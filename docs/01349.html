<html>
<head>
<title>Another Stage Of Visualization: Be Reactive with Dash</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可视化的另一个阶段:对 Dash 做出反应</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-gentle-invitation-to-interactive-visualization-with-dash-a200427ccce9?source=collection_archive---------7-----------------------#2019-03-04">https://towardsdatascience.com/a-gentle-invitation-to-interactive-visualization-with-dash-a200427ccce9?source=collection_archive---------7-----------------------#2019-03-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fc39" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一个温柔的邀请</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b64792d9a4036cb08022b2fc458021b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cpHURXwg9JdSaRtm"/></div></div></figure><p id="938f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Dash 是一个开源的 python 库，它使我们能够用 Plotly 创建 web 应用程序。使用简单的反应式装饰器，如下拉菜单、滑动条和降价文本数据，可以很容易地构建交互式可视化。我们甚至可以使用回调函数根据输入数据更新图表，所有这些功能都可以直接使用，不需要 Javascript 或 HTML。Plotly 是一个非常强大的工具，它使我们能够以一种方便的方式制作一个信息丰富且有效的情节，Dash 可以被视为展示令人敬畏的可视化的舞台。</p><p id="c500" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">今天我将向你展示如何用 Plotly 创建一个仪表板。我们将制作一个时间序列线图，并添加一个下拉菜单和一个与该图交互的滑动条。有关于如何使用这个库的很好的文档，但是我发现一开始可能很难阅读示例代码并使用它们。因此，这可能是一个善良的桥梁，让你了解如何使用破折号与 Plotly。</p><h1 id="ccd3" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">装置</h1><p id="1d74" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">要构建一个仪表板，我们需要安装如下一些包。</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="2e19" class="mp lo iq ml b gy mq mr l ms mt">pip install plotly==2.5.1<br/>pip install dash==0.21.0<br/>pip install dash-core-components==0.22.1<br/>pip install dash-html-components==0.10.0<br/>pip install dash-renderer==0.12.1</span></pre><p id="5d11" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正如我上面所说，<code class="fe mu mv mw ml b">dash-core-components</code>不仅允许我们构建图形，还允许我们构建下拉列表和文本框，这样我们就可以相应地更新组件。<code class="fe mu mv mw ml b">dash-html-components</code>使我们能够在 Python 中使用 HTML &amp; CSS。它帮助我们在仪表板上放置 HTML 组件，如 Div、H1 和 H2。</p><p id="2c70" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果这是你第一次使用破折号和 HTML 语法，它可能有点复杂和难以阅读。因此，我建议您将以下脚本作为 Dash 的基本指南。从现在开始，我们要做的是一步一步地填写这个。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="e00c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，我们导入库。您可以根据需要添加其他库。然后我们通过调用 Dash 类来初始化 Dash。这就像在我们的桌子上放一块空白的白板，我们所做的就是在这块板上构建更多的应用程序。</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="7e11" class="mp lo iq ml b gy mq mr l ms mt"><strong class="ml ir"># Step 1. Launch the application</strong><br/>app = dash.Dash()</span><span id="7dfa" class="mp lo iq ml b gy mz mr l ms mt"><strong class="ml ir"># Step 2. Import the dataset</strong><br/>df = pd.read_csv('finance-charts-apple.csv')</span></pre><p id="6060" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在让我们从<em class="na">熊猫</em>的 CSV 文件中提取一些材料。我们要使用的数据集是苹果公司的股票价格数据，这里的<a class="ae nb" href="https://raw.githubusercontent.com/plotly/datasets/master/finance-charts-apple.csv" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"/></a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/6d5e3ddc52b41eeedcc41f0b5724be8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kpNv2T8zP995aUxNeUQSQQ.png"/></div></div></figure><h1 id="ca2a" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">仪表板上的简单散点图</h1><p id="7caa" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">关于 Plotly 本身的细节我就不多说了，但是如果有必要的话你可以从这个视频<a class="ae nb" href="https://www.youtube.com/watch?v=yBU3uPzyQOg&amp;index=2&amp;list=PLE50-dh6JzC4onX-qkv9H3HtPbBVA8M94" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"/></a><strong class="kt ir"/>中找到一个关于 Plotly 的很好的教程。在这一系列的视频中，你还可以学习如何制作 3D 绘图或 Choropleth 地图。这里我们将绘制一个显示股票价格波动的线图。</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="e777" class="mp lo iq ml b gy mq mr l ms mt"><strong class="ml ir"># Step 3. Create a plotly figure</strong><br/>trace_1 = go.Scatter(x = st.Date, y = st['AAPL.High'],<br/>                    name = 'AAPL HIGH',<br/>                    line = dict(width = 2,<br/>                                color = 'rgb(229, 151, 50)'))</span><span id="7c69" class="mp lo iq ml b gy mz mr l ms mt">layout = go.Layout(title = 'Time Series Plot',<br/>                   hovermode = 'closest')</span><span id="a60e" class="mp lo iq ml b gy mz mr l ms mt">fig = go.Figure(data = [trace_1], layout = layout)</span></pre><p id="8247" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，该是<code class="fe mu mv mw ml b">dash-html-components</code>出场的时候了。我们先放一个除法，然后把图形放进去。<code class="fe mu mv mw ml b">id</code>正在给这个组件命名，这样我们就可以用它的名字来称呼它。以后你就明白这是干什么用的了。然后，我们在步骤 6 中创建一个运行的服务器。如果我们设置调试模式等于真，我们可以很容易地改变和更新应用程序，而服务器正在运行。</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="f4e1" class="mp lo iq ml b gy mq mr l ms mt"><strong class="ml ir"># Step 4. Create a Dash layout</strong><br/>app.layout = html.Div([<br/>               <strong class="ml ir"> dcc.Graph(id = 'plot', figure = fig)</strong><br/>                      ])</span><span id="5258" class="mp lo iq ml b gy mz mr l ms mt"><strong class="ml ir"># Step 6. Add the server clause</strong><br/>if __name__ == '__main__':<br/>    app.run_server(debug = True)</span></pre><p id="a803" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们用<strong class="kt ir"> <em class="na"> app.py </em> </strong>的名字保存这个脚本，在终端上导入(或者 anaconda 提示)。请注意，工作目录应该与您保存文件的位置相同。</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="a301" class="mp lo iq ml b gy mq mr l ms mt">C:\Users\jjone\Dash&gt; <strong class="ml ir">python app.py</strong></span></pre><p id="5809" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果没有打字错误或语法错误，您将看到本地主机地址。你可以复制并粘贴它，也可以在一个新的网页标签上输入<strong class="kt ir"> localhost:8050 </strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/83323e07facc6d946d1c552a1f8ae297.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*L55LReQFwnz6FOLEbTWRfA.gif"/></div></div></figure><h1 id="9a1b" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">添加页眉和段落</h1><p id="7563" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">我们也可以有额外的组件，如把文本数据就像 HTML。你可以在 这里找到<a class="ae nb" href="https://dash.plot.ly/dash-html-components" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">有哪些元素。让我们在页面上放一个简单的标题和一段文字。</strong></a></p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="45b7" class="mp lo iq ml b gy mq mr l ms mt"><strong class="ml ir"># Step 4. Create a Dash layout</strong><br/>app.layout = html.Div([<br/>    <strong class="ml ir">     </strong>   <strong class="ml ir">    # adding a header and a paragraph<br/>                html.Div([<br/>                    html.H1("This is my first dashboard"),<br/>                    html.P("Learning Dash is so interesting!!")<br/>                         ], <br/>                  </strong>  style = {'padding' : '50px' , <br/>                             'backgroundColor' : '#3aaab2'}),</span><span id="5ba2" class="mp lo iq ml b gy mz mr l ms mt"># adding a plot        <br/>                dcc.Graph(id = 'plot', figure = fig)<br/>                   <strong class="ml ir">   </strong>])</span></pre><p id="2c26" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在图表的顶部，我将再添加一个部分，并在其中添加一个标题和一个段落。我们有两个主要组件，<code class="fe mu mv mw ml b">html.Div</code>里面的<code class="fe mu mv mw ml b">html.Div</code>和<code class="fe mu mv mw ml b">dcc.Graph.</code>，还有两个附加组件，头(<code class="fe mu mv mw ml b">html.H1</code>)和段(<code class="fe mu mv mw ml b">html.P</code>)。我们可以用<code class="fe mu mv mw ml b">style</code>属性改变组件的边距或背景色。它应该以支持 CSS 属性的字典格式来指定。</p><p id="6744" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请特别注意括号的开始和结束位置。理解每个部分的段落范围是很重要的。由于有太多的括号和方括号，一开始可能会令人困惑。而且很容易犯语法错误。</p><p id="7c58" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将步骤 4 中的代码放入我们的模板中，看看结果。如果服务器没有关闭，我们可以通过按 F5 来检查结果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/257a57d57708d528b54f3f769920e89c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hPwmFhWj_-_17mdkNFeerQ.png"/></div></div></figure><p id="4a66" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我希望您了解什么是 dash 组件和 HTML 组件。如何将多个组件放在一起，以及如何将它们放在一起。</p><h1 id="cfa6" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">下拉式</h1><p id="241f" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">这次让我们试着在仪表板上做一个下拉菜单。我们要做另一个图，根据给定的选项改变它的 y 轴。通过<a class="ae nb" href="https://dash.plot.ly/dash-core-components" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">仪表板组件</strong> </a>的文档，我们可以把<code class="fe mu mv mw ml b">Dropdown</code>整理如下。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/f53fcdcc993674c99a99fbaa42176179.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XfWBooI0yAJs-PVYT7b0QA.png"/></div></div></figure><p id="f88d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如您所见，这些选项应该是字典格式的。在我们的例子中，选项将是只有连续变量的列，从第 2 列到第 10 列。有了列表理解，我们可以只用一行就做出选项字典。</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="490d" class="mp lo iq ml b gy mq mr l ms mt">features = st.columns[1:-1]<br/>opts = [{'label' : i, 'value' : i} for i in features]</span></pre><p id="185a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我们将下拉组件放在绘图的底部，而不是 HTML 组件。先看一下粗体字，因为其他的只是为了修饰两大应用。<code class="fe mu mv mw ml b">value</code>是下拉列表的默认值。</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="ad73" class="mp lo iq ml b gy mq mr l ms mt"><strong class="ml ir"># Step 4. Create a Dash layout</strong><br/>app.layout = html.Div([<br/>                # adding a plot<br/>                dcc.Graph(id = 'plot', figure = fig),</span><span id="48b5" class="mp lo iq ml b gy mz mr l ms mt"><strong class="ml ir">                # dropdown</strong><br/>        <strong class="ml ir">        html.P([<br/>                    html.Label("Choose a feature"),<br/>                    dcc.Dropdown(id = 'opt', <br/>                                 options = opts,<br/>                                 value = opts[0])<br/>                        ], </strong>style = {'width': '400px',<br/>                                    'fontSize' : '20px',<br/>                                    'padding-left' : '100px',<br/>                                    'display': 'inline-block'}<strong class="ml ir">)</strong><br/>                      ])</span></pre><p id="9b94" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正如我们之前所做的，我们可以在模板的第 4 步替换这段代码，并检查结果。</p><h1 id="1db7" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">使用回调连接到图形</h1><p id="716b" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">为了根据下拉列表的选择更新图表，我们需要在输入数据(下拉列表)和输出数据(图表)之间建立一个连接。这将通过在步骤 5 中添加一个回调函数来完成。</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="9380" class="mp lo iq ml b gy mq mr l ms mt"><strong class="ml ir"># Step 5. Add callback functions</strong><br/><a class="ae nb" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank"><strong class="ml ir">@app</strong></a><strong class="ml ir">.callback(</strong>Output('plot', 'figure'),<br/>             [Input('opt', 'value')]<strong class="ml ir">)</strong></span></pre><p id="90d1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你记得我们给每个组件赋予了什么<code class="fe mu mv mw ml b">id</code>吗？<strong class="kt ir"> <em class="na">剧情</em> </strong>和<strong class="kt ir"> <em class="na"> opt。</em> </strong>因此我们可以如上图用它们的名字来称呼它们。我们从名为<strong class="kt ir"> <em class="na"> opt </em> </strong>的选项中获取输入数据，并将输出给名为<strong class="kt ir"> <em class="na"> plot </em> </strong>的线图。</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="aaf7" class="mp lo iq ml b gy mq mr l ms mt"><strong class="ml ir">def</strong> update_figure(<strong class="ml ir">X</strong>):<br/>    trace_2 = go.Scatter(x = st.Date, <strong class="ml ir">y = st[X],</strong><br/>                       <strong class="ml ir"> name = X,</strong><br/>                        line = dict(width = 2,<br/>                                    color = 'rgb(106, 181, 135)'))<br/>    fig = go.Figure(data = <strong class="ml ir">[trace_1, trace_2]</strong>, layout = layout)<br/>    <strong class="ml ir">return</strong> fig</span></pre><p id="278a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，我们获取输入数据，然后通过创建更新函数返回我们想要的输出。这里我们的输入数据是什么？这是从下拉列表中选择的特征变量的名称，我们将它作为第二个线图的 y 轴。由于<code class="fe mu mv mw ml b">trace_1</code>没有什么可改变的，我们可以简单地将<code class="fe mu mv mw ml b">trace_2 </code>添加到数据表中。现在，如果我们将这段代码放到第 5 步，并重新运行<strong class="kt ir"> app.py </strong>，结果将如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/87de4d777582c25298c889863c3bd792.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*fC_NBqX04_dPCvc1E2aY-A.gif"/></div></div></figure><p id="691d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我们进入下一部分之前，我想简单谈一下回调。因为这是编写任何应用程序时最常用的函数之一。简单来说，<a class="ae nb" href="https://en.wikipedia.org/wiki/Callback_(computer_programming)" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="na">一个回调</em></strong></a><strong class="kt ir"><em class="na"/></strong>是一个在得到真正的执行命令之后再执行的函数，通常是为了更新。回调函数在得到命令后不能正常工作。这些人都是那种<strong class="kt ir"><em class="na"/></strong>。它们将在其他命令行被执行后执行它们的工作，我们<strong class="kt ir"> <em class="na">调用</em> </strong>它们<strong class="kt ir"> <em class="na">返回</em> </strong>再次执行真正的命令。</p><p id="dd4a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">看看我们的<code class="fe mu mv mw ml b">update_figure()</code>是怎么运作的。这个函数不是在我们导入这个应用程序之后，而是当我们通过“回调”给它实际的输入信号时，才开始工作这就是回调函数。你在不理解的情况下使用它是完全没问题的，但是我希望你在这里得到粗略的想法。你还可以从<a class="ae nb" href="https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced" rel="noopener" target="_blank"> <strong class="kt ir">这篇文章</strong> </a>中找到更多细节。</p><h1 id="0c0c" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">范围滑块</h1><p id="d48d" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">最后，让我们尝试一个范围滑块。我们将在图中添加一个年范围滑块，它非常类似于下拉菜单。让我们先查看一下 dash 组件的文档。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/ec1d39df4da5b5e21dc2ddbb007f7d47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pXzCcck7W2eenYAt6FfmSA.png"/></div></div></figure><p id="553f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我想这时候你很容易就明白了。这里的重点是如何做一个标记字典。由于日期周期从(2015 年 2 月 17 日<em class="na"> ) </em>开始到(2017 年 2 月 17 日)<em class="na">，</em>我想在周期之间添加 7 个标记，如下所示。</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="095b" class="mp lo iq ml b gy mq mr l ms mt">st['Date'] = pd.to_datetime(st.Date)<br/>dates = ['2015-02-17', '2015-05-17', '2015-08-17', '2015-11-17',<br/>         '2016-02-17', '2016-05-17', '2016-08-17', '2016-11-17',  <br/>         '2017-02-17']</span><span id="9878" class="mp lo iq ml b gy mz mr l ms mt">date_mark = {i : dates[i] for i in range(0, 9)}</span></pre><p id="f2af" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我们可以简单地将范围滑块放在下拉位置。这次我把它命名为<strong class="kt ir"> <em class="na">滑块</em> </strong>。<code class="fe mu mv mw ml b">min</code>和<code class="fe mu mv mw ml b">max</code>是滑块的最小值和最大值，<code class="fe mu mv mw ml b">value</code>是滑块的默认设置。同样，所有其他部分都在设计 CSS 样式的 HTML 组件。</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="1556" class="mp lo iq ml b gy mq mr l ms mt"><strong class="ml ir"># Step 4. Create a Dash layout</strong><br/>app.layout = html.Div([<br/>                # adding a plot<br/>                dcc.Graph(id = 'plot', figure = fig),</span><span id="7b1f" class="mp lo iq ml b gy mz mr l ms mt"><strong class="ml ir">                # range slider<br/>                html.P([<br/>                    html.Label("Time Period"),<br/>                    dcc.RangeSlider(id = 'slider',<br/>                                    marks = date_mark,<br/>                                    min = 0,<br/>                                    max = 8,<br/>                                    value = [3, 4]) <br/>                        ],</strong> style = {'width' : '80%',<br/>                                    'fontSize' : '20px',<br/>                                    'padding-left' : '100px',<br/>                                    'display': 'inline-block'}<strong class="ml ir">)</strong><br/>                      ])</span></pre><p id="9114" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">做好滑块后，下一步会做什么？把它和剧情联系起来！我们将再次从<strong class="kt ir"> <em class="na">滑块</em> </strong>获取输入数据，并将输出返回到<strong class="kt ir"> <em class="na">图</em> </strong>。但是这一次，这里有个小技巧。您是否注意到滑块的默认值是一个包含两个值的列表？请再次检查上面的代码框。<code class="fe mu mv mw ml b"><strong class="kt ir">value = [3, 4]</strong></code>与下拉组件不同，范围滑块在一个列表中接受两个值。因此，当我们从滑块中获取输入数据时，会有两个值，即起始值和结束值(<code class="fe mu mv mw ml b"><strong class="kt ir">X[0]</strong></code>、<code class="fe mu mv mw ml b"><strong class="kt ir">X[1]</strong></code>)</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="c359" class="mp lo iq ml b gy mq mr l ms mt"><strong class="ml ir"># Step 5. Add callback functions</strong><br/><a class="ae nb" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.callback(Output('plot', 'figure'),<br/>             [Input('slider', 'value')])<br/><strong class="ml ir">def </strong>update_figure<strong class="ml ir">(X):</strong><br/>    <strong class="ml ir">st2 = st[(st.Date &gt; dates[X[0]]) &amp; (st.Date &lt; dates[X[1]])]</strong><br/>    trace_1 = go.Scatter(x = st2.Date, y = st2['AAPL.High'],<br/>                        name = 'AAPL HIGH',<br/>                        line = dict(width = 2,<br/>                                    color = 'rgb(229, 151, 50)'))<br/>    fig = go.Figure(data = [trace_1], layout = layout)<br/>   <strong class="ml ir"> return</strong> fig</span></pre><p id="b2f2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们将过滤数据，并用给定的周期更新图形。如果你再次重新加载网页，你会看到与我相同的结果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/497e69b9d4adc3cf3bc2b8223c0ea9c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*9z1GrsxIIBtb8HCpvPMXUQ.gif"/></div></div></figure><h1 id="d97f" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">把这些都集中起来！</h1><p id="f97a" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">我想到目前为止我们已经谈了很多了。从放图到添加回调。现在我们为什么不把它们都放在一起？我建议你一步一步地阅读下面的脚本。您可以在第 4 步中组合图形、下拉菜单和滑块的所有组件，就像替换和更改模块一样。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="7605" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你准备好看看我们的第一个仪表板是什么样子了吗？😃😃🙌🙌嘣！！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/9e334b2c4b89d0a2c9cdcc0fc92b859b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*sdhmWqbWpO7cArqG2kqeSQ.gif"/></div></div></figure><p id="1ff4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">干得好！你喜欢制作仪表板吗？我希望现在您能够轻松阅读和理解其他 Dash 代码示例。Dash 提供了<strong class="kt ir"> </strong> <a class="ae nb" href="https://dash.plot.ly/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">这样一个不错的指南</strong> </a> <strong class="kt ir"> </strong>所以你可以随意探索自己的网站。你也可以通过 Plotly 查看 Dash 中的其他内容。</p><div class="nk nl gp gr nm nn"><a href="https://medium.com/@plotlygraphs/introducing-dash-5ecf7191b503" rel="noopener follow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd ir gy z fp ns fr fs nt fu fw ip bi translated">🌟引入破折号🌟</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">用纯 Python 创建反应式 Web 应用程序</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">medium.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob kp nn"/></div></div></a></div><h1 id="ebd6" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">部署</h1><p id="0d6c" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">到目前为止，我们的应用程序本地托管在您的机器上。为了让其他人也能使用它，我们需要将它部署在 web 上。有两个选择可以选择，App 授权和部署到 Heroku。第一种要求我们安装<code class="fe mu mv mw ml b"><a class="ae nb" href="https://github.com/plotly/dash-auth" rel="noopener ugc nofollow" target="_blank">dash-auth</a></code>包，有两种不同类型的认证，HTTP Basic Auth 或 Plotly OAuth。可以按照<a class="ae nb" href="https://dash.plot.ly/authentication" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">这个教程</strong> </a>。</p><p id="2403" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">另一种方式是通过使用 Heroku、AWS、Google 云平台等托管平台。Heroku 是最简单的部署方式，你可以按照这个教程<a class="ae nb" href="https://dash.plot.ly/deployment" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"/></a>。其他平台和 Heroku 一样。</p><p id="3aed" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">除了下拉菜单，我们还可以添加其他组件，如文本区或上传数据。我建议你去了解一下有什么样的仪表板部件。您还可以添加任意数量的 HTML 组件，并使用 CSS 属性以更奇特的方式设计您的电路板。如果你需要学习一些 HTML &amp; CSS 的基础知识，可以从<a class="ae nb" href="https://www.youtube.com/playlist?list=PLB5jA40tNf3vh75MBwUb4oqiXFOZ5pYyX" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">这个视频</strong> </a>中找到很棒的教程。</p><p id="8f3c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢您的阅读，希望您对这篇文章感兴趣。如果有什么需要改正的地方，请和我们分享你的见解。我总是乐于交谈，所以请在下面留下评论，分享你的想法。我还在<a class="ae nb" href="https://www.linkedin.com/in/jiwon-jeong/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上分享有趣和有用的资源，所以请随时关注并联系我。下次我会带着另一个有趣的故事回来的！</p></div></div>    
</body>
</html>