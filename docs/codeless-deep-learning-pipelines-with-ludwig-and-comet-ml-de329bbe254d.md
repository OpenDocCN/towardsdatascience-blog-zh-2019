# Ludwig å’Œ Comet.ml çš„æ— ä»£ç æ·±åº¦å­¦ä¹ ç®¡é“

> åŸæ–‡ï¼š<https://towardsdatascience.com/codeless-deep-learning-pipelines-with-ludwig-and-comet-ml-de329bbe254d?source=collection_archive---------21----------------------->

![](img/5643fa4441b009c6919b1de16134f555.png)

## å¦‚ä½•åœ¨å‘½ä»¤è¡Œä¸­ç»“åˆä½¿ç”¨ Ludwig å’Œ Comet.ml æ¥æ„å»ºå¼ºå¤§çš„æ·±åº¦å­¦ä¹ æ¨¡å‹â€”â€”ä½¿ç”¨ç¤ºä¾‹æ–‡æœ¬åˆ†ç±»æ¨¡å‹

[Ludwig](https://uber.github.io/ludwig/?source=post_page---------------------------) æ˜¯ä¸€ä¸ªåŸºäº TensorFlow çš„å·¥å…·ç®±ï¼Œå…è®¸ç”¨æˆ·åœ¨ä¸éœ€è¦ç¼–å†™ä»£ç çš„æƒ…å†µä¸‹è®­ç»ƒå’Œæµ‹è¯•æ·±åº¦å­¦ä¹ æ¨¡å‹*ã€‚*

é€šè¿‡ä»å¤´åˆ°å°¾æä¾›ä¸€ä¸ªå®šä¹‰è‰¯å¥½çš„ã€*æ— ä»£ç *æ·±åº¦å­¦ä¹ ç®¡é“ï¼ŒLudwig ä½¿ä»ä¸šè€…å’Œç ”ç©¶äººå‘˜èƒ½å¤Ÿå¿«é€Ÿè®­ç»ƒå’Œæµ‹è¯•ä»–ä»¬çš„æ¨¡å‹ï¼Œå¹¶è·å¾—å¼ºå¤§çš„åŸºçº¿æ¥æ¯”è¾ƒå®éªŒã€‚

> *â€œLudwig å¸®åŠ©æˆ‘ä»¬åœ¨ä¸ç¼–å†™ä»£ç çš„æƒ…å†µä¸‹å»ºç«‹æœ€å…ˆè¿›çš„æ¨¡å‹ï¼Œé€šè¿‡å°† Ludwig ä¸ Comet é›†æˆï¼Œæˆ‘ä»¬å¯ä»¥ä»¥å¯é‡å¤çš„æ–¹å¼è·Ÿè¸ªæˆ‘ä»¬æ‰€æœ‰çš„å®éªŒï¼Œè·å¾—å¯è§æ€§ï¼Œå¹¶æ›´å¥½åœ°äº†è§£ç ”ç©¶è¿‡ç¨‹ã€‚â€â€”* ***Piero Molinoï¼Œä¼˜æ­¥äººå·¥æ™ºèƒ½å®éªŒå®¤çš„é«˜çº§ ML / NLP ç ”ç©¶ç§‘å­¦å®¶ï¼ŒLudwig*** çš„åˆ›é€ è€…

Ludwig æä¾›äº†ç”¨äºé¢„å¤„ç†æ•°æ®ã€è®­ç»ƒã€å‘å¸ƒé¢„æµ‹å’Œå¯è§†åŒ–çš„ CLI å‘½ä»¤ã€‚åœ¨æœ¬å¸–ä¸­ï¼Œæˆ‘ä»¬å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨ Ludwigï¼Œå¹¶ä½¿ç”¨ [Comet.ml](http://bit.ly/2Jd156C?source=post_page---------------------------) è·Ÿè¸ªæ‚¨çš„ Ludwig å®éªŒã€‚

> *å‚è§è·¯å¾·ç»´å¸Œ Github å›è´­* [*æ­¤å¤„*](https://github.com/uber/ludwig/?source=post_page---------------------------)

![](img/26a00afd78494a70a65fb06a3cfe114a.png)

æƒ³è¦ä¸€ä¸ªå¿«é€Ÿçš„å›¾åƒå­—å¹•æ¨¡å‹æˆ–è§†è§‰é—®ç­”æ¨¡å‹ï¼Ÿ[åœ¨è¿™ 4 ä¸ªç®€å•çš„æ­¥éª¤ä¸­ä½¿ç”¨ Ludwig](https://uber.github.io/ludwig/?source=post_page---------------------------)æ¥å»ºç«‹ã€è®­ç»ƒå’Œè¯„ä¼°æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚

åœ¨è¿™é‡Œçš„ [Comet.ml](http://bit.ly/2Jd156C?source=post_page---------------------------) ï¼Œæˆ‘ä»¬å¯¹ Ludwig å¡«è¡¥æœºå™¨å­¦ä¹ ç”Ÿæ€ç³»ç»Ÿç©ºç™½çš„æ½œåŠ›æ„Ÿåˆ°å…´å¥‹ã€‚Ludwig *æœ€å*é‡‡ç”¨æœºå™¨å­¦ä¹ æ¨¡å‹ã€è®­ç»ƒã€æ•°æ®å’Œå¯è§†åŒ–çš„æŠ½è±¡è¡¨ç¤ºçš„æƒ³æ³•ï¼Œå¹¶å°†å®ƒä»¬å˜æˆä¸€ä¸ªè‡ªå§‹è‡³ç»ˆæ— ç¼ã€å¯æ‰§è¡Œçš„ç®¡é“ã€‚

# è¿™æ„å‘³ç€æˆ‘ä»¬ç»ˆäºå¯ä»¥èŠ±æ›´å°‘çš„æ—¶é—´:

*   å¤„ç†ä¸åŒæ•°æ®ç±»å‹çš„æ•°æ®é¢„å¤„ç†â˜ ï¸
*   å°†ä¸åŒçš„æ¨¡å‹æ¶æ„ç½‘æ ¼åŒ–åªæ˜¯ä¸ºäº†å¾—åˆ°ç®€å•çš„åŸºçº¿æ¨¡å‹
*   ç¼–å†™ä»£ç è¿›è¡Œé¢„æµ‹

# æ›´å¤šæ—¶é—´:

*   è·å¾—é€æ˜çš„ç»“æœğŸš€

# [æ•´åˆå½—æ˜Ÿä¸è·¯å¾·ç»´å¸Œ](https://medium.com/comet-ml/comet-ml-partners-with-uber-on-ludwig-5adb802bbdfc?source=post_page---------------------------)

æˆ‘ä»¬ä¸ Ludwig å›¢é˜Ÿåˆä½œ[æ•´åˆ Comet.ml](https://medium.com/comet-ml/comet-ml-partners-with-uber-on-ludwig-5adb802bbdfc?source=post_page---------------------------) ä»¥ä¾¿ç”¨æˆ·å¯ä»¥åœ¨è®­ç»ƒæ—¶å®æ—¶è·Ÿè¸ªåŸºäº Ludwig çš„å®éªŒã€‚

[Comet.ml](http://bit.ly/2Jd156C?source=post_page---------------------------) åœ¨ä¸‰ä¸ªä¸»è¦é¢†åŸŸå¯¹ Ludwig è¿›è¡Œäº†è¡¥å……:

1.  **æ¯”è¾ƒå¤šä¸ªè·¯å¾·ç»´å¸Œå®éªŒ:**è·¯å¾·ç»´å¸Œè®©ä½ è½»æ¾è®­ç»ƒï¼Œè¿­ä»£ä¸åŒçš„æ¨¡å‹å’Œå‚æ•°é›†ã€‚Comet æä¾›äº†ä¸€ä¸ªæ¥å£æ¥å¸®åŠ©ä½ è·Ÿè¸ªé‚£äº›ä¸åŒå®éªŒçš„ç»“æœå’Œç»†èŠ‚ã€‚
2.  **ä¸ºæ‚¨çš„åˆ†æç»„ç»‡çš„å•†åº—:** Ludwig å…è®¸æ‚¨å›´ç»•è®­ç»ƒè¿‡ç¨‹å’Œç»“æœç”Ÿæˆå¾ˆé…·çš„å¯è§†åŒ–æ•ˆæœã€‚Comet å…è®¸æ‚¨è·Ÿè¸ªè¿™äº›å¯è§†åŒ–æ•ˆæœï¼Œå¹¶è‡ªåŠ¨å°†å®ƒä»¬ä¸æ‚¨çš„å®éªŒå…³è”èµ·æ¥ï¼Œè€Œä¸æ˜¯å°†å®ƒä»¬ä¿å­˜åœ¨æŸä¸ªåœ°æ–¹ã€‚
3.  **ä½ çš„å®éªŒçš„å…ƒåˆ†æ:**ä½ å¯èƒ½ä¼šå¤šæ¬¡é‡å¤ä½ çš„è·¯å¾·ç»´å¸Œå®éªŒã€‚ç”¨ Comet è·Ÿè¸ªå®ƒä»¬ä½¿æ‚¨èƒ½å¤Ÿåˆ†æè¯¸å¦‚å“ªäº›å‚æ•°èµ·ä½œç”¨ä¹‹ç±»çš„äº‹æƒ…ï¼Œä»¥ä¾¿æ„å»ºæ›´å¥½çš„æ¨¡å‹ã€‚

é€šè¿‡ç”¨ Comet.ml è¿è¡Œæ‚¨çš„ Ludwig å®éªŒï¼Œæ‚¨å¯ä»¥æ•è·æ‚¨çš„å®éªŒçš„:

*   ä»£ç (æ‚¨ä½¿ç”¨çš„å‘½ä»¤è¡Œå‚æ•°)
*   **å®æ—¶æ€§èƒ½å›¾è¡¨ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥å®æ—¶æŸ¥çœ‹æ¨¡å‹æŒ‡æ ‡(è€Œä¸æ˜¯ç­‰åˆ°åŸ¹è®­å®Œæˆä¹‹å)**
*   ä½ å’Œè·¯å¾·ç»´å¸Œä¸€èµ·åˆ›ä½œçš„å¯è§†åŒ–ä½œå“
*   ç¯å¢ƒè¯¦ç»†ä¿¡æ¯(ä¾‹å¦‚åŒ…ç‰ˆæœ¬)
*   è¿è¡Œå†å²è®°å½•(HTML é€‰é¡¹å¡)

â€¦ä»¥åŠæ›´å¤šï¼

# ç”¨å½—æ˜Ÿè¿è¡Œè·¯å¾·ç»´å¸Œ

1.  å®‰è£… Ludwig for Python(å’Œ spacy for English ä½œä¸ºä¾èµ–é¡¹ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨è¿™ä¸ªä¾‹å­ä¸­ä½¿ç”¨äº†æ–‡æœ¬ç‰¹æ€§)ã€‚*è¿™ä¸ªä¾‹å­å·²ç»ç”¨ Python 3.6 æµ‹è¯•è¿‡äº†ã€‚*

```
$ pip install ludwig
$ python -m spacy download en
```

*å¦‚æœåœ¨å®‰è£…* `gmpy` *æ—¶é‡åˆ°é—®é¢˜ï¼Œè¯·å®‰è£…* `libgmp` *æˆ–* `gmp` *ã€‚åœ¨åŸºäº Debian çš„ Linux å‘è¡Œç‰ˆä¸Š:* `sudo apt-get install libgmp3-dev` *ã€‚MacOS ä¸Š:* `brew install gmp` *ã€‚*

2.å®‰è£… Comet:

```
$ pip install comet_ml
```

3.è®¾ç½®æ‚¨çš„ Comet å‡­æ®:

*   åœ¨ [https://www.comet.ml](http://bit.ly/2Jd156C?source=post_page---------------------------) è·å–æ‚¨çš„ API å¯†é’¥
*   è®© Ludwig å¯ä»¥ä½¿ç”¨ API é”®ï¼Œå¹¶è®¾ç½® Ludwig å®éªŒç»†èŠ‚è¦æŠ¥å‘Šç»™å“ªä¸ª Comet é¡¹ç›®:

```
$ export COMET_API_KEY="..."
$ export COMET_PROJECT_NAME="..."
```

4.æˆ‘ä»¬å»ºè®®æ‚¨ä¸ºæ¯ä¸ª Ludwig å®éªŒåˆ›å»ºä¸€ä¸ªæ–°ç›®å½•ã€‚

```
$ mkdir experiment1
$ cd experiment1
```

> ***ä¸€äº›èƒŒæ™¯:*** *æ¯æ¬¡ä½ æƒ³åˆ›å»ºä¸€ä¸ªæ–°çš„æ¨¡å‹å¹¶è®­ç»ƒå®ƒçš„æ—¶å€™ï¼Œä½ ä¼šç”¨åˆ°ä¸¤ä¸ªå‘½ä»¤ä¸­çš„ä¸€ä¸ªâ€”â€”*
> 
> *â€”è®­ç»ƒ
> â€”å®éªŒ*
> 
> *ä¸€æ—¦ä½¿ç”¨* `*--comet*` *æ ‡å¿—è¿è¡Œè¿™äº›å‘½ä»¤ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ª* `*.comet.config*` *æ–‡ä»¶ã€‚è¿™ä¸ª* `*.comet.config*` *æ–‡ä»¶ä»æ‚¨ä¸Šé¢è®¾ç½®çš„ç¯å¢ƒå˜é‡ä¸­æå–æ‚¨çš„ API é”®å’Œ Comet é¡¹ç›®åã€‚*

å¦‚æœæ‚¨æƒ³è¿è¡Œå¦ä¸€ä¸ªå®éªŒï¼Œå»ºè®®æ‚¨åˆ›å»ºä¸€ä¸ªæ–°ç›®å½•ã€‚

5.**ä¸‹è½½æ•°æ®é›†ã€‚**å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ [Reuters-21578](http://archive.ics.uci.edu/ml/datasets/Reuters-21578+Text+Categorization+Collection?source=post_page---------------------------) è¿™ä¸ªä¼—æ‰€å‘¨çŸ¥çš„æ–°é—»ä¸“çº¿æ•°æ®é›†æ¥å¤„ç†æ–‡æœ¬åˆ†ç±»ç”¨ä¾‹ã€‚å®ƒåªåŒ…å« 21ï¼Œ578 ä¸ªæ–°é—»ä¸“çº¿æ–‡æ¡£ï¼Œåˆ†ä¸º 6 ä¸ªç±»åˆ«ã€‚ä¸¤ä¸ªæ˜¯â€œå¤§â€ç±»åˆ«(è®¸å¤šæ­£é¢æ–‡æ¡£)ï¼Œä¸¤ä¸ªæ˜¯â€œä¸­â€ç±»åˆ«ï¼Œä¸¤ä¸ªæ˜¯â€œå°â€ç±»åˆ«(å¾ˆå°‘æ­£é¢æ–‡æ¡£)ã€‚

*   å°ç±»:heat.csvï¼Œhousing.csv
*   ä¸­ç­‰ç±»åˆ«:coffee.csvã€gold.csv
*   å¤§ç±»:acq.csvï¼Œearn.csv

```
$ curl [http://boston.lti.cs.cmu.edu/classes/95-865-K/HW/HW2/reuters-allcats-6.zip](http://boston.lti.cs.cmu.edu/classes/95-865-K/HW/HW2/reuters-allcats-6.zip?source=post_page---------------------------) -o reuters-allcats-6.zip
$ unzip reuters-allcats-6.zip
```

6.å®šä¹‰æˆ‘ä»¬å¸Œæœ›ç”¨æˆ‘ä»¬æƒ³è¦çš„è¾“å…¥å’Œè¾“å‡ºç‰¹æ€§æ„å»ºçš„æ¨¡å‹ã€‚ç”¨è¿™äº›å†…å®¹åˆ›å»ºä¸€ä¸ªåä¸º`model_definition.yaml`çš„æ–‡ä»¶:

```
input_features:
    -
        name: text
        type: text
        level: word
        encoder: parallel_cnnoutput_features:
    -
        name: class
        type: category
```

7.ç”¨æ–°çš„`--comet`å›½æ——è®­ç»ƒæ¨¡ç‰¹

```
$ ludwig experiment --comet --data_csv reuters-allcats.csv \
    --model_definition_file model_definition.yaml
```

ä¸€æ—¦ä½ è¿è¡Œè¿™ä¸ªï¼Œä¸€ä¸ªå½—æ˜Ÿå®éªŒå°†è¢«åˆ›å»ºã€‚æ£€æŸ¥ Comet å®éªŒ URL çš„è¾“å‡ºï¼Œå¹¶ç‚¹å‡»é‚£ä¸ª URLã€‚

8.åœ¨å½—æ˜Ÿä¸Šï¼Œä½ å¯ä»¥çœ‹åˆ°:

*   æ‚¨åœ¨**å›¾è¡¨é€‰é¡¹å¡**ä¸Šçš„å®æ—¶æ¨¡å‹æŒ‡æ ‡
*   æ‚¨è¿è¡Œæ¥è®­ç»ƒæ‚¨çš„å®éªŒçš„ bash å‘½ä»¤ä»¥åŠ**ä»£ç é€‰é¡¹å¡**ä¸­çš„ä»»ä½•è¿è¡Œå‚æ•°
*   Ludwig æ­£åœ¨ä½¿ç”¨çš„è¶…å‚æ•°(é»˜è®¤)åœ¨**è¶…å‚æ•°é€‰é¡¹å¡**ä¸­

è¿˜æœ‰æ›´å¤šï¼çœ‹è¿™ä¸ªæ ·æœ¬å®éªŒ[è¿™é‡Œ](https://www.comet.ml/dsblank/ludwig/b919068a27014a1b941a1de11c707a0b?source=post_page---------------------------)

![](img/a47bf64802b32127feb24d0caaee6f79.png)

ä½¿ç”¨å½—æ˜Ÿæ ‡å¿—è¿è¡Œæˆ‘ä»¬çš„ç¤ºä¾‹æ–‡æœ¬åˆ†ç±» Ludwig å®éªŒã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œå’Œè¿™ä¸ªå½—æ˜Ÿå®éªŒ[äº’åŠ¨](https://www.comet.ml/dsblank/ludwig/b919068a27014a1b941a1de11c707a0b?source=post_page---------------------------)

å¦‚æœæ‚¨é€‰æ‹©ä½¿ç”¨ Ludwig åˆ¶ä½œä»»ä½•å¯è§†åŒ–æ•ˆæœï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤å°†è¿™äº›å¯è§†åŒ–æ•ˆæœä¸Šä¼ åˆ° Comet çš„**å›¾åƒé€‰é¡¹å¡**:

```
$ ludwig visualize --comet \
    --visualization learning_curves \
    --training_statistics \
    ./results/experiment_run_0/training_statistics.json
```

# ç°åœ¨ï¼Œæ‚¨å·²ç»å‡†å¤‡å¥½ä¸€èµ·ä½¿ç”¨ Ludwig å’Œ Comet æ¥æ„å»ºæ‚¨çš„æ·±åº¦å­¦ä¹ æ¨¡å‹äº†ï¼åœ¨è¿™é‡ŒæŠ¥åå½—æ˜Ÿ[ã€‚](https://www.comet.ml/pricing?source=post_page---------------------------)