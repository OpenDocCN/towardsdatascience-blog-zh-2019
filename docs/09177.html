<html>
<head>
<title>Solving TSP Using Dynamic Programming</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用动态规划法求解 TSP</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/solving-tsp-using-dynamic-programming-2c77da86610d?source=collection_archive---------7-----------------------#2019-12-05">https://towardsdatascience.com/solving-tsp-using-dynamic-programming-2c77da86610d?source=collection_archive---------7-----------------------#2019-12-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/cbe7f41e67b62e0e549f6c1b25c9c69e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y6AD9n6k7Vix7MfQiYH95A.png"/></div></div></figure><div class=""/><div class=""><h2 id="f647" class="pw-subtitle-paragraph jy ja jb bd b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dk translated">是的，因为没有足够的解决方案</h2></div><p id="8527" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当我在为我的运输系列中的另一篇文章(<a class="ae kq" href="https://medium.com/hackernoon/yats-yet-another-tsp-solution-6a71aeabe1f8" rel="noopener"> I </a>、<a class="ae kq" rel="noopener" target="_blank" href="/bounded-clustering-7ac02128c893"> II </a>，敬请关注 III)进行研究时，我正在为<a class="ae kq" href="https://en.wikipedia.org/wiki/Travelling_salesman_problem" rel="noopener ugc nofollow" target="_blank">旅行销售员问题</a> (TSP)寻找一个<a class="ae kq" href="https://en.wikipedia.org/wiki/Dynamic_programming" rel="noopener ugc nofollow" target="_blank">动态规划</a>解决方案。</p><p id="238e" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我确实找到了许多资源，但是没有一个是我喜欢的。要么是它们太抽象，太理论化，出现在一个我不喜欢看的长视频里，或者，你知道，不是我的风格。好像我不明白其中的逻辑。</p><p id="0e82" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以说实话，我甚至不想写这篇文章，因为我认为它已经被写了一千遍了。但是，生活难道不令人惊讶吗？</p><figure class="lo lp lq lr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ln"><img src="../Images/1a2b02fb249a0857536248b026e290bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Z27pI9R7uAeztjno.jpg"/></div></div></figure><blockquote class="ls lt lu"><p id="f6de" class="kr ks lv kt b ku kv kc kw kx ky kf kz lw lb lc ld lx lf lg lh ly lj lk ll lm ij bi translated"><strong class="kt jc">关于这篇文章后面的完整代码，你可以去</strong> <a class="ae kq" href="https://github.com/DalyaG/CodeSnippetsForPosterity/tree/master/SolvingTSPUsingDynamicProgramming" rel="noopener ugc nofollow" target="_blank"> <strong class="kt jc">这里</strong> </a> <strong class="kt jc">。</strong></p></blockquote><h1 id="5c5c" class="lz ma jb bd mb mc md me mf mg mh mi mj kh mk ki ml kk mm kl mn kn mo ko mp mq bi translated">背景</h1><p id="986e" class="pw-post-body-paragraph kr ks jb kt b ku mr kc kw kx ms kf kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">你可以在本帖中读到一个更好、更令人愉快的版本，但要点如下。我们在一个平面上有<code class="fe mw mx my mz b">n</code>个点，我们希望找到恰好访问每个点一次的最短路径。</p><figure class="lo lp lq lr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi na"><img src="../Images/58bdf2b9430650ed47d8ce49635a77e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dL8x3ZUcN7wBfIAd4s7BSQ.png"/></div></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk">Yup, this is already a spoiler with the solution! Did I mention I wasn’t planning on writing this post?</figcaption></figure><h1 id="6c11" class="lz ma jb bd mb mc md me mf mg mh mi mj kh mk ki ml kk mm kl mn kn mo ko mp mq bi translated">DP 速成班</h1><p id="6c39" class="pw-post-body-paragraph kr ks jb kt b ku mr kc kw kx ms kf kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">实际上，我真正想说的是，这是<strong class="kt jc">而不是</strong>DP 速成班😇</p><p id="2913" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您不习惯动态编程的概念，我推荐一个比我更好的介绍，介绍这个漂亮的方法。幸运的是，一个有趣且直观的工具已经存在了！请访问 Siraj Raval 的精彩视频，加入我们的讨论🤓</p><figure class="lo lp lq lr gt is"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h1 id="8cc7" class="lz ma jb bd mb mc md me mf mg mh mi mj kh mk ki ml kk mm kl mn kn mo ko mp mq bi translated">构建 DP 树</h1><p id="5150" class="pw-post-body-paragraph kr ks jb kt b ku mr kc kw kx ms kf kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">在动态编程(DP)中，我们边走边构建解决方案。在我们的例子中，这意味着我们的初始状态将是任何要访问的第一个节点，然后我们通过添加每个可能的节点来扩展每个状态，以形成大小为 2 的路径，等等。每次我们访问以前访问过的部分解决方案时，我们只保留最好的分数。</p><p id="3eb0" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">啊哈！<br/>但是你问什么是“已访问部分解决方案”？<br/>而且你问的没错！<br/>弄清楚什么应该“保留在内存中”是成功的 DP 解决方案的关键要素之一。经过反复试验，我决定在内存中保留每个部分解决方案的最后一个的<em class="lv">和倒数第二个</em>的<em class="lv">节点。</em></p><figure class="lo lp lq lr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nh"><img src="../Images/1acbab149586f5dd70f42ad4cd66ec97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*INWPtvZ1B_Fg1vjmLc-R0A.png"/></div></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk">For the partial solution [1,2,3,4], where 4 in the last node visited, we ask ourselves — what is the best way to get there? We can either come from 3 and have a total cost of 1.8, or come from 2 and have a total cost of 1.5.</figcaption></figure><p id="693c" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一旦你确定了你想在内存中保存什么，代码就非常简单了，而且对于不同的问题，在不同的 DP 实现之间几乎没有变化:</p><figure class="lo lp lq lr gt is"><div class="bz fp l di"><div class="ni ng l"/></div></figure><h1 id="fd18" class="lz ma jb bd mb mc md me mf mg mh mi mj kh mk ki ml kk mm kl mn kn mo ko mp mq bi translated">回溯最短路径</h1><p id="424a" class="pw-post-body-paragraph kr ks jb kt b ku mr kc kw kx ms kf kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">一旦我们到达了树的末端，意味着我们在备忘录中保存的路径是完整的，那么“剩下的一切”就是折回我们的步骤以找到最佳路径。</p><p id="3de3" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">幸运的是，我们记住了每个部分路径中的最后一个和倒数第二个节点！</p><figure class="lo lp lq lr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nj"><img src="../Images/ba37a0ba222485475769799dfbda095b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AGf8RxYf9Zps6kMAtIkdpw.png"/></div></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk">Our optimal path in pink: [4,1,2,3]</figcaption></figure><p id="5dc9" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，第一步将是查看最后一层，包括所有完整路径，并选择总成本最低的最后一个节点。</p><p id="57bd" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从那里，我们可以使用倒数第二个节点来追溯我们的步骤。</p><figure class="lo lp lq lr gt is"><div class="bz fp l di"><div class="ni ng l"/></div></figure><h1 id="a08e" class="lz ma jb bd mb mc md me mf mg mh mi mj kh mk ki ml kk mm kl mn kn mo ko mp mq bi translated">与启发式解决方案相比</h1><p id="a2f9" class="pw-post-body-paragraph kr ks jb kt b ku mr kc kw kx ms kf kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">好了，现在我们有了 TSP 问题的最优解，我们可以用它做什么呢？</p><p id="6f14" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">嗯，事情是…那不多…</p><figure class="lo lp lq lr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nk"><img src="../Images/482eb55b15e7bbdde896c488b2634ba9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3eRxBDPQwOn-eBcmrKZ2AQ.png"/></div></div></figure><p id="5b50" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">TSP 是一个<a class="ae kq" href="https://en.wikipedia.org/wiki/NP-completeness" rel="noopener ugc nofollow" target="_blank"> NP 完全</a>问题，求解到最优是高度不可伸缩的。幸运的是，在<a class="ae kq" href="https://medium.com/hackernoon/yats-yet-another-tsp-solution-6a71aeabe1f8" rel="noopener">之前的帖子</a>中，我们使用快速启发式方法解决了 TSP 问题。在那篇文章之后，你们中的许多人问我——这个解决方案与最优方案相比如何？而我终于可以回答了！</p><figure class="lo lp lq lr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nl"><img src="../Images/6485bc21530f78b1bb43376266687f06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*89_vxXSGiAervO4Vvc7Ndg.png"/></div></div></figure><p id="7731" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">哇！！这就是指数增长的样子！！😨</p><p id="1f98" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">撇开复杂性不谈，启发式的解决方案总是让它接近最优解😅</p><p id="099b" class="pw-post-body-paragraph kr ks jb kt b ku kv kc kw kx ky kf kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于这个实验中的最大输入，即使我们看最终结果，它看起来也非常相似🎯</p><figure class="lo lp lq lr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nm"><img src="../Images/c604ee4805a56f6d67cbca30cacce084.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jesE488hFLVUNn6fOmPLXA.png"/></div></div></figure><h1 id="a86f" class="lz ma jb bd mb mc md me mf mg mh mi mj kh mk ki ml kk mm kl mn kn mo ko mp mq bi translated">AAAA，那是所有的人！敬请期待我们的下一次冒险！</h1><blockquote class="ls lt lu"><p id="62d2" class="kr ks lv kt b ku kv kc kw kx ky kf kz lw lb lc ld lx lf lg lh ly lj lk ll lm ij bi translated"><strong class="kt jc">这篇文章后面的完整代码你可以去</strong> <a class="ae kq" href="https://github.com/DalyaG/CodeSnippetsForPosterity/tree/master/SolvingTSPUsingDynamicProgramming" rel="noopener ugc nofollow" target="_blank"> <strong class="kt jc">这里</strong> </a> <strong class="kt jc">。</strong></p></blockquote><figure class="lo lp lq lr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nn"><img src="../Images/5e6e5015fe97410b1236c9ab84dd486b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bpQFOXow80JqHx7rodarNw.png"/></div></div></figure></div></div>    
</body>
</html>