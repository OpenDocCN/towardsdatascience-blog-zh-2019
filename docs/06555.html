<html>
<head>
<title>How to drive your Arduino-propulsed robot arm with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用 Python 驱动你的 Arduino 推进的机械臂</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-drive-your-arduino-propulsed-robot-arm-with-python-4e428873237b?source=collection_archive---------19-----------------------#2019-09-19">https://towardsdatascience.com/how-to-drive-your-arduino-propulsed-robot-arm-with-python-4e428873237b?source=collection_archive---------19-----------------------#2019-09-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="5477" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Arduino 微控制器是一个漂亮的电子产品。开箱即用，它可以驱动您的大多数设备和原型。GPIO 的数量、用户友好的 IDE 和低廉的价格<strong class="jp ir">给现代原型方法</strong>带来了重大变化。然而，这种怪物不能解决强大的计算过程。由于机器人涉及复杂的算法，你应该考虑 Python 和 Arduino 的合作来让它活起来。</p><p id="d2bd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是“从零开始设计机器人手臂”系列的第二篇文章。</p><p id="4553" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第一篇文章中，我们获得了一个相当有用的 Keras 模型，并在模拟中对其进行了图形化测试。</p><p id="418a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">现在我非常兴奋能在真正的原型上使用这个模型！</strong>我们希望评估它与模拟结果相比有多好，并得出关于我们的接近值的第一个结论。最后的工作将是设计一些方法来最小化误差。</p><h2 id="df14" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">Python 和 Arduino 之间的串行链接。</h2><p id="c33a" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">为了连接它们，我想使用 pySerial 库，它使我们能够通过 Arduino 的串行端口进行通信。</p><p id="1abe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">基本上，当 Arduino 通过串口监听时，python 脚本会同时向他发送一些信息。这种基本的通信过程使我们能够向机器人发送我们预测的角度三元组，以便将它驱动到希望的位置。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/fcae6bd19596014398cb74ec84db2934.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*Ow2G2XZBhLC1Kovsib6jiw.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Serial Communication Process</figcaption></figure><p id="18b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在端口参数中，您需要输入 Arduino 卡使用的通信端口。波特率应该与 Arduino 脚本中的波特率相同。</p><figure class="lk ll lm ln gt lo"><div class="bz fp l di"><div class="lv lw l"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Code on the python-side</figcaption></figure><p id="41d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在 Serial.begin(9600)行中，您正在设置波特率。</p><figure class="lk ll lm ln gt lo"><div class="bz fp l di"><div class="lv lw l"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Code on the Arduino-side</figcaption></figure><h2 id="ec82" class="kl km iq bd kn ko kp dn kq kr ks dp kt jy ku kv kw kc kx ky kz kg la lb lc ld bi translated">使用模型生成推论(预测需求角度)</h2><p id="1c16" class="pw-post-body-paragraph jn jo iq jp b jq le js jt ju lf jw jx jy lg ka kb kc lh ke kf kg li ki kj kk ij bi translated">多亏了 Keras 图书馆，这项工作才得以完成。你只需要使用函数</p><pre class="lk ll lm ln gt lx ly lz ma aw mb bi"><span id="8beb" class="kl km iq ly b gy mc md l me mf">model.predict</span></pre><p id="cf99" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您还可以决定创建两个不同的脚本:一个将训练模型，另一个将利用它。为此，您需要在第一个脚本中保存模型，并在第二个脚本中加载它。</p><p id="d629" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">很明显 Keras 已经帮你做了。以下是主要功能:</p><pre class="lk ll lm ln gt lx ly lz ma aw mb bi"><span id="8c23" class="kl km iq ly b gy mc md l me mf">model.save(“model.h5”)</span></pre><p id="22b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并且加载它:</p><pre class="lk ll lm ln gt lx ly lz ma aw mb bi"><span id="1ba4" class="kl km iq ly b gy mc md l me mf">model = load_model(“model.h5”)</span></pre><p id="0a90" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在你真的离你预想的很近了。现在的任务是设置你的伺服系统，为你的(X，Y)坐标生成预测，并将预测的角度发送给机器人——享受结果。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/b2a0f7eadb422424873c35d62be4f103.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*Gepp2B_lh6Gq766L9EfCnw.png"/></div></figure><p id="7427" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">非常感谢您的阅读，如果您有任何问题，或者您有合理的批评，或者只是想交流您的项目，请随时联系我们。</p><p id="6473" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一篇文章将会比较模拟和应用程序的健壮性。为此，我使用 CNN 通过视觉识别来检测机器人的位置。</p><p id="5b87" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">敬请期待！！</p><p id="4a09" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是完整的 Python 脚本。</p><figure class="lk ll lm ln gt lo"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="0a1f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是完整的 Arduino 脚本。</p><figure class="lk ll lm ln gt lo"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="6ac0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了更好地理解，你应该读一下上一篇文章:</p><p id="d4b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">“一种高效快速控制机器人的方法。真的。”https://link.medium.com/LIGf4r3k5Z</p><p id="209a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">参考文献</strong>:</p><p id="9537" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">张量流:<a class="ae mg" href="https://en.wikipedia.org/wiki/TensorFlow" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/TensorFlow</a></p><p id="fd48" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">https://en.wikipedia.org/wiki/NumPy<a class="ae mg" href="https://en.wikipedia.org/wiki/NumPy" rel="noopener ugc nofollow" target="_blank">号</a></p><p id="69cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">https://en.wikipedia.org/wiki/Matplotlib<a class="ae mg" href="https://en.wikipedia.org/wiki/Matplotlib" rel="noopener ugc nofollow" target="_blank"/></p><p id="b309" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">https://en.wikipedia.org/wiki/Keras</p></div></div>    
</body>
</html>