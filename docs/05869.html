<html>
<head>
<title>Create Chatbot using Rasa Part-1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Rasa Part-1 创建聊天机器人</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/create-chatbot-using-rasa-part-1-67f68e89ddad?source=collection_archive---------1-----------------------#2019-08-27">https://towardsdatascience.com/create-chatbot-using-rasa-part-1-67f68e89ddad?source=collection_archive---------1-----------------------#2019-08-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="f621" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://medium.com/towards-data-science/data-science-in-the-real-world/home" rel="noopener"> <strong class="ak">现实世界中的数据科学</strong> </a></h2><div class=""/><div class=""><h2 id="d319" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">安装并运行你的第一个 Rasa 机器人。了解 Rasa 框架。</h2></div><p id="8057" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja"> Rasa </strong>是一个开源的机器学习框架，用于构建<a class="ae lk" href="http://blog.rasa.com/level-3-contextual-assistants-beyond-answering-simple-questions/" rel="noopener ugc nofollow" target="_blank"> AI 助手和聊天机器人</a>。大多数情况下，在 Rasa 中工作不需要任何编程语言经验。虽然有一个叫做“<strong class="kq ja">Rasa</strong>T10】Action Server 的东西，你需要在那里用 Python 写代码，它主要用来触发外部动作，比如调用 Google API 或 REST API 等。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi ll"><img src="../Images/77ebb73f1eb0f6cba3605fb87192308b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bs0JvC6bmiwrC7we49-tjw.png"/></div></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">rasa.com</figcaption></figure><p id="a339" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">Rasa 有两个主要模块:</p><ol class=""><li id="03ba" class="mb mc iq kq b kr ks ku kv kx md lb me lf mf lj mg mh mi mj bi translated"><strong class="kq ja">拉莎·NLU</strong>用于理解用户信息</li><li id="0dd2" class="mb mc iq kq b kr mk ku ml kx mm lb mn lf mo lj mg mh mi mj bi translated">用于进行对话和决定下一步行动的 Rasa 核心</li></ol><p id="112b" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">注意——现在 Rasa NLU 和 Rasa 核心源代码合并在一起。</p><p id="4e8b" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">Rasa X 是一个帮助你构建、改进和部署由 Rasa 框架支持的人工智能助手的工具。Rasa X 包括一个用户界面和一个 REST API。Rasa X 是 Rasa 的最新版本。</p><p id="d3ca" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">关于我:我是 Rasa 官方贡献者。</p><h1 id="c135" class="mp mq iq bd mr ms mt mu mv mw mx my mz kf na kg nb ki nc kj nd kl ne km nf ng bi translated">Rasa 组件</h1><p id="ed08" class="pw-post-body-paragraph ko kp iq kq b kr nh ka kt ku ni kd kw kx nj kz la lb nk ld le lf nl lh li lj ij bi translated"><strong class="kq ja"> Rasa X </strong> —这是一个基于浏览器的 GUI 工具，它将允许您通过使用基于 GUI 的交互模式来训练机器学习模型。请记住，它是 Rasa 软件堆栈中的可选工具。有时，rasa 会从您的浏览器向 Rasa 发送使用统计信息— <em class="nm">，但它不会向您的系统外部发送训练数据</em>，<em class="nm">，它只会发送您使用 Rasa X Train 的次数。</em></p><p id="d23b" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja"> Rasa NLU </strong> —这是 Rasa 试图理解用户消息的地方，以检测您消息中的<strong class="kq ja">意图</strong>和<strong class="kq ja">实体</strong>。Rasa NLU 有不同的组件来识别意图和实体，其中大多数都有一些额外的依赖关系。</p><ol class=""><li id="e288" class="mb mc iq kq b kr ks ku kv kx md lb me lf mf lj mg mh mi mj bi translated">Spacy(需要单独安装)</li><li id="99a1" class="mb mc iq kq b kr mk ku ml kx mm lb mn lf mo lj mg mh mi mj bi translated">Tensorflow(默认情况下可用于 Rasa)</li></ol><p id="d623" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja"> Rasa Core </strong> —这是 Rasa 尝试帮助您处理上下文消息流的地方。基于用户消息，它可以预测对话作为回复，并可以触发 Rasa 动作服务器。</p><p id="e48b" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">Rasa 内部使用 Tensorflow，无论何时您执行“<strong class="kq ja"> pip install rasa </strong>”或“<strong class="kq ja"> pip install rasa-x </strong>”操作，默认情况下它都会安装 Tensorflow。</p><h1 id="83df" class="mp mq iq bd mr ms mt mu mv mw mx my mz kf na kg nb ki nc kj nd kl ne km nf ng bi translated">安装 Rasa</h1><p id="4641" class="pw-post-body-paragraph ko kp iq kq b kr nh ka kt ku ni kd kw kx nj kz la lb nk ld le lf nl lh li lj ij bi translated">Ubuntu 16+，Mac OS 和 Windows 10 (Visual C++构建工具)</p><p id="83e3" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">注意:</strong>如果您使用的是 windows，请确保您已经安装了 Visual c++构建工具。这是一些 python 包所必需的。一定要使用 miniconda 来避免系统中其他已安装的 Python 包或冲突的 Python 版本的问题。</p><p id="be03" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在你的操作系统中安装 MiniConda(Anaconda 的一部分)</p><div class="nn no gp gr np nq"><a href="https://conda.io/miniconda.html" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd ja gy z fp nv fr fs nw fu fw iz bi translated">Miniconda - Conda 文档</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">安装程序有两种变体:Miniconda 是基于 Python 2 的，Miniconda3 是基于 Python 3 的。请注意…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">conda.io</p></div></div></div></a></div><p id="5b55" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">安装 miniconda 后，按照下面的命令在 conda 中创建一个虚拟环境。这将允许您无错误地运行 Rasa。</p><pre class="lm ln lo lp gt nz oa ob oc aw od bi"><span id="34d9" class="oe mq iq oa b gy of og l oh oi">conda install python=3.6<br/>conda create -n rasa python=3.6<br/>source activate rasa<br/>pip install rasa-x --extra-index-url <a class="ae lk" href="https://pypi.rasa.com/simple" rel="noopener ugc nofollow" target="_blank">https://pypi.rasa.com/simple</a></span></pre><p id="1d5d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">按照上面的命令，Rasa 和 Rasa X 都将安装在您的系统中。</p><h1 id="8a8b" class="mp mq iq bd mr ms mt mu mv mw mx my mz kf na kg nb ki nc kj nd kl ne km nf ng bi translated">在 Rasa 中创建新项目</h1><p id="0740" class="pw-post-body-paragraph ko kp iq kq b kr nh ka kt ku ni kd kw kx nj kz la lb nk ld le lf nl lh li lj ij bi translated">打开终端，激活康达虚拟环境。现在转到一个目录并执行“<strong class="kq ja"> rasa init </strong>”，它将在该位置创建一个 rasa 项目。“rasa x”将启动 Rasa X 应用程序</p><pre class="lm ln lo lp gt nz oa ob oc aw od bi"><span id="6184" class="oe mq iq oa b gy of og l oh oi">source activate rasa<br/>rasa init</span></pre><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/febbba4beb1b3b21bcb2dd669b8c2806.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*utF-_Wg_pG5FbVdE-kF9Rg.png"/></div></figure><p id="4918" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">“<strong class="kq ja"> rasa init </strong>”应该显示上面的消息，以防您做得很好，并且您的系统不包含任何错误。跟随交互式会话并继续按回车键到达最后一步。最后，它应该显示这条消息。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi ok"><img src="../Images/074112091a85095afa2bdfe02b64d031.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VJTEnUK-1Bz704RKwHwytw.png"/></div></div></figure><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/d61a3a14f3674f9930bd0b8da26aac94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*fdRU_-kBfoJc-I4Ts2xA-g.png"/></div></figure><p id="bdb8" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">如果您在终端中执行“<strong class="kq ja"> ls -la </strong>”，您可以看到 Rasa 创建的文件列表。现在做“rasa x”来启动 rasa。</p><h1 id="f64e" class="mp mq iq bd mr ms mt mu mv mw mx my mz kf na kg nb ki nc kj nd kl ne km nf ng bi translated">Rasa 配置</h1><p id="6f07" class="pw-post-body-paragraph ko kp iq kq b kr nh ka kt ku ni kd kw kx nj kz la lb nk ld le lf nl lh li lj ij bi translated">让我解释一下文件，它是作为 Rasa 的初始项目结构创建的。</p><p id="4eeb" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">一个空文件，帮助 python 找到你的动作</p><p id="3e54" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><code class="fe om on oo oa b">actions.py</code>自定义操作的代码。如果您希望 Rasa 通过 REST API 或 API 调用来调用外部服务器，您可以在这里定义您的自定义操作。请记住，您可以为 Rasa 自定义操作创建多个 Python 脚本。</p><p id="3011" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><code class="fe om on oo oa b">config.yml</code> '* '配置你的 NLU 和核心车型。如果你正在处理 Tensorflow 或 Spacy，你需要在这里定义这样的管道。要处理这个文件，你要表现出对机器学习和深度学习的了解。</p><p id="2cd1" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><code class="fe om on oo oa b">credentials.yml</code>连接其他服务的详细信息。如果你想在 Facebook Messenger 上构建 Bot，微软 Bot 框架，你可以在这里维护这样的凭证和令牌。所以基本上你只需要添加脸书、slack 和 Bot 框架相关的配置，rasa 会自动为你做 rest。请记住，您需要通过 https 域托管 Rasa。在开发过程中，您可以使用<strong class="kq ja"> ngrok </strong>作为测试工具。</p><p id="54a3" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><code class="fe om on oo oa b">data/nlu.md</code>‘*’你的 NLU 训练数据。您可以在这里定义意图。比如订披萨或者预定优步。你需要为此添加相关的句子。请记住，如果您正在使用 Rasa-X，您的培训意图和数据将会自动添加。</p><p id="7403" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><code class="fe om on oo oa b">data/stories.md</code> '* '你的故事。这是 Rasa 核心所必需的。有一种叫做“Rasa 中的对话流”的东西，其中 Rasa Core 控制着你和 chatbot 之间的对话流，因此对于这种流，你需要使用这些故事来训练 chatbot。因此，如果你想让你的聊天机器人在不同的背景(故事)下非常完美，你可以在这里添加这些故事。</p><p id="ab1a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><code class="fe om on oo oa b">domain.yml</code> '* '您的助手的域。这个文件结合了聊天机器人可以检测到的不同意图和机器人回复列表。请记住，您可以在这里定义您的自定义操作服务器 python 方法名称(下划线格式)，以便 Rasa 为您调用该 Python 方法。</p><p id="6709" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><code class="fe om on oo oa b">endpoints.yml</code>连接到 FB messenger 等频道的详细信息。这主要用于生产设置。您可以像 Redis 一样配置您的数据库，以便 Rasa 可以存储跟踪信息。</p><p id="3d8a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><code class="fe om on oo oa b">models/&lt;timestamp&gt;.tar.gz</code>您的初始模型</p><h1 id="4f12" class="mp mq iq bd mr ms mt mu mv mw mx my mz kf na kg nb ki nc kj nd kl ne km nf ng bi translated">玩示例聊天机器人</h1><p id="bc0e" class="pw-post-body-paragraph ko kp iq kq b kr nh ka kt ku ni kd kw kx nj kz la lb nk ld le lf nl lh li lj ij bi translated">Rasa 用默认数据为您创建了一个示例机器人。所以现在您可以从 Shell/Terminal 开始使用它。首先，让我们从终端测试您的聊天机器人(记住要在终端中进行)</p><pre class="lm ln lo lp gt nz oa ob oc aw od bi"><span id="c3aa" class="oe mq iq oa b gy of og l oh oi">rasa shell</span></pre><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi op"><img src="../Images/c61efdb55f5dec62656375c84c26dce6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KMhoAe4_86l4zoeY70GqsQ.png"/></div></div></figure><p id="fa0c" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">你可以输入“hi ”,在机器人的回复中，你会收到一些回应。</p><h1 id="e177" class="mp mq iq bd mr ms mt mu mv mw mx my mz kf na kg nb ki nc kj nd kl ne km nf ng bi translated">如何使用 Rasa-X</h1><p id="9d04" class="pw-post-body-paragraph ko kp iq kq b kr nh ka kt ku ni kd kw kx nj kz la lb nk ld le lf nl lh li lj ij bi translated">这是 Rasa 堆栈的最新成员。您可以使用 Rasa-X 在浏览器上尝试您的聊天机器人。可以下载训练数据。此外，您可以通过指导您的机器人来纠正您的训练数据。</p><pre class="lm ln lo lp gt nz oa ob oc aw od bi"><span id="d989" class="oe mq iq oa b gy of og l oh oi">rasa x</span></pre><p id="24cb" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">它将询问许可协议，您可以说“y”并继续。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi oq"><img src="../Images/d7bdc80e709f75af3bf5f73c2b2d318e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fl8gnUqBonL1iA6QnZZNvg.png"/></div></div></figure><p id="7a17" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在浏览器上打开此链接—<a class="ae lk" href="http://localhost:5002/talk" rel="noopener ugc nofollow" target="_blank">http://localhost:5002/talk</a></p><p id="ff6a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在左边，你可以试着和你的机器人聊天，在右边你可以看到哪个意图和回复得到了回应。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi or"><img src="../Images/05b403566b6e84558e03ce24acc1ec58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TeFWZIIW7EU8OXuSiSAb_g.png"/></div></div></figure><p id="5e66" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">关于 Rasa-x 的一些事实</strong></p><p id="9ff5" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">当您在本地运行 Rasa X 时，您的培训数据和故事将从您的项目(例如<code class="fe om on oo oa b">data/nlu.md</code>)中的文件中读取，并且您在 UI 中所做的任何更改都将保存回这些文件中。对话和其他数据存储在 SQLite 数据库中，该数据库保存在一个名为<code class="fe om on oo oa b">rasa.db</code>的文件中。</p><p id="de98" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">观看此视频，了解有关 Rasa-X 的更多信息</p><figure class="lm ln lo lp gt lq"><div class="bz fp l di"><div class="os ot l"/></div></figure><h1 id="0a5a" class="mp mq iq bd mr ms mt mu mv mw mx my mz kf na kg nb ki nc kj nd kl ne km nf ng bi translated">如何使用 Rasa 自定义操作(操作服务器)</h1><p id="872a" class="pw-post-body-paragraph ko kp iq kq b kr nh ka kt ku ni kd kw kx nj kz la lb nk ld le lf nl lh li lj ij bi translated">这是你的聊天机器人最真实的例子。假设你想在你的聊天机器人上增加一个功能，让你的机器人告诉你一个特定城市的最新天气预报，你会怎么做？答案是“Rasa 自定义操作”</p><p id="f816" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">一个动作可以运行你想要的任何代码。自定义操作可以打开灯，在日历中添加事件，检查用户的银行余额，或者任何你能想到的事情。</p><p id="b815" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">Rasa 将在预测到自定义操作时调用您可以指定的端点。这个端点应该是一个 web 服务器，它响应这个调用，运行代码，并可选地返回信息来修改对话状态。</p><p id="ed17" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在编辑器中打开“<strong class="kq ja">actions . py</strong>”(Visual Studio 代码可以是一个选项)</p><p id="ff06" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">步骤 1 — </strong>在“actions.py”中定义一个名为“<strong class="kq ja">ActionCheckWeather”</strong>的方法</p><pre class="lm ln lo lp gt nz oa ob oc aw od bi"><span id="0ec9" class="oe mq iq oa b gy of og l oh oi"><strong class="oa ja">from</strong> <strong class="oa ja">rasa_sdk</strong> <strong class="oa ja">import</strong> Action<br/><strong class="oa ja">from</strong> <strong class="oa ja">rasa_sdk.events</strong> <strong class="oa ja">import</strong> SlotSet<br/><br/><strong class="oa ja">class</strong> <strong class="oa ja">ActionCheckWeather</strong>(Action):<br/>   <strong class="oa ja">def</strong> name(self) -&gt; Text:<br/>      <strong class="oa ja">return</strong> "action_check_weather"<br/><br/>   <strong class="oa ja">def</strong> run(self,<br/>           dispatcher: CollectingDispatcher,<br/>           tracker: Tracker,<br/>           domain: Dict[Text, Any]) -&gt; List[Dict[Text, Any]]:<br/><br/>      dispatcher.utter_message("Hello World! from custom action")</span><span id="bbf6" class="oe mq iq oa b gy ou og l oh oi"><strong class="oa ja">      return</strong> []</span></pre><p id="769f" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">步骤 2-将此自定义操作与您的聊天机器人相链接。打开“domain.yml”。</p><p id="4af7" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在动作列表中添加“动作 _ 检查 _ 天气”动作。这应该是这样的</p><pre class="lm ln lo lp gt nz oa ob oc aw od bi"><span id="2b31" class="oe mq iq oa b gy of og l oh oi">actions:</span><span id="6019" class="oe mq iq oa b gy ou og l oh oi">- utter_greet</span><span id="a915" class="oe mq iq oa b gy ou og l oh oi">- utter_cheer_up</span><span id="657d" class="oe mq iq oa b gy ou og l oh oi">- utter_did_that_help</span><span id="f0d2" class="oe mq iq oa b gy ou og l oh oi">- utter_happy</span><span id="020f" class="oe mq iq oa b gy ou og l oh oi">- utter_goodbye</span><span id="9ceb" class="oe mq iq oa b gy ou og l oh oi">- <strong class="oa ja">action_check_weather</strong></span></pre><p id="ab35" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">现在，在故事中，将这个自定义操作添加为您的流。打开“<strong class="kq ja"> stories.md </strong>”文件和这个新的自定义动作“action_check_weather”作为快乐路径流的一部分。</p><pre class="lm ln lo lp gt nz oa ob oc aw od bi"><span id="35ae" class="oe mq iq oa b gy of og l oh oi"><strong class="oa ja">## happy path</strong></span><span id="1e78" class="oe mq iq oa b gy ou og l oh oi">* greet</span><span id="66fe" class="oe mq iq oa b gy ou og l oh oi">- utter_greet</span><span id="4fe9" class="oe mq iq oa b gy ou og l oh oi">* mood_great</span><span id="5a2e" class="oe mq iq oa b gy ou og l oh oi">- action_check_weather</span></pre><p id="59d5" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">步骤 3 告诉 rasa 使用自定义操作服务器</p><p id="93a4" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">打开“endpoints.yml”并添加以下行以启用自定义操作服务器</p><pre class="lm ln lo lp gt nz oa ob oc aw od bi"><span id="d49a" class="oe mq iq oa b gy of og l oh oi">action_endpoint:</span><span id="33b0" class="oe mq iq oa b gy ou og l oh oi">   url: "http://localhost:5055/webhook"</span></pre><p id="75eb" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">现在使用下面的命令重新训练你的 Rasa 聊天机器人。你需要重新训练你的机器学习模型，因为你在“stories.md”和“domain.yml”文件中做了一些修改。所以没有重新训练，你不能通知 Rasa 使用这些。</p><pre class="lm ln lo lp gt nz oa ob oc aw od bi"><span id="1a4d" class="oe mq iq oa b gy of og l oh oi">rasa train</span></pre><p id="56a8" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">现在使用以下命令再次启动 Rasa</p><pre class="lm ln lo lp gt nz oa ob oc aw od bi"><span id="aed9" class="oe mq iq oa b gy of og l oh oi">rasa x</span></pre><p id="ecd3" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">此外，使用以下命令启动 Rasa 操作服务器。Rasa X 和 Rasa run 操作应该在两个不同的终端中运行。</p><pre class="lm ln lo lp gt nz oa ob oc aw od bi"><span id="e8a6" class="oe mq iq oa b gy of og l oh oi">rasa run actions</span></pre><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi ov"><img src="../Images/edc7943cf64d6deca932cb937d1c2c72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AUFQObM_j2Wct6gLZ3mtnQ.png"/></div></div></figure><p id="e445" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">你可以看到，你得到了用 python 写的自定义动作的回复。在同一个 python 脚本中，您可以连接到后端数据库并返回响应。此外，您可以使用额外的 python 包调用外部 API。</p><p id="58e9" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">另外，你可以用 C#、NodeJS 和 Java 开发定制动作服务器。</p><h1 id="3ebf" class="mp mq iq bd mr ms mt mu mv mw mx my mz kf na kg nb ki nc kj nd kl ne km nf ng bi translated">如何为聊天机器人构建自定义前端</h1><p id="27b5" class="pw-post-body-paragraph ko kp iq kq b kr nh ka kt ku ni kd kw kx nj kz la lb nk ld le lf nl lh li lj ij bi translated">您可以使用 HTML5 和 CSS3 构建一个聊天机器人 GUI。可以像 ReactJS 和 JQuery 一样使用库。如果你愿意，你可以使用 Angular 作为你的前端 JavaScript 框架来为你的聊天机器人构建前端。</p><ol class=""><li id="c8a9" class="mb mc iq kq b kr ks ku kv kx md lb me lf mf lj mg mh mi mj bi translated">在 HTML5 和 CSS3 中构建 GUI</li><li id="824d" class="mb mc iq kq b kr mk ku ml kx mm lb mn lf mo lj mg mh mi mj bi translated">从前端调用 Rasa Rest API</li><li id="cb2b" class="mb mc iq kq b kr mk ku ml kx mm lb mn lf mo lj mg mh mi mj bi translated">好了</li></ol><p id="d938" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">从 JavaScript 到 Rasa 后端的示例 API 调用</p><p id="2735" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">当我们开始构建生产级 Rasa 聊天机器人时，首先我们可以简单地使用下面的命令来启动 Rasa。</p><pre class="lm ln lo lp gt nz oa ob oc aw od bi"><span id="b0ec" class="oe mq iq oa b gy of og l oh oi">rasa run</span></pre><p id="9f1d" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">上述命令将运行 Rasa 核心，并在端口 5005 上公开 REST API。</p><pre class="lm ln lo lp gt nz oa ob oc aw od bi"><span id="2d8c" class="oe mq iq oa b gy of og l oh oi">URL: <a class="ae lk" href="http://localhost:5005/webhooks/rest/webhook" rel="noopener ugc nofollow" target="_blank">http://localhost:5005/webhooks/rest/webhook</a><br/>Method: POST<br/>Header: Content-Type: application/json<br/>Body:<br/>{<br/> “sender”: “Rasa1”,<br/> “message”: “hi”<br/>}</span><span id="88d0" class="oe mq iq oa b gy ou og l oh oi">Response:<br/>[<br/>    {<br/>       “recipient_id”: “Rasa1”,<br/>       “text”: “Hey! How are you?”<br/>    }<br/>]</span></pre><p id="df35" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">现在，您可以在前端应用程序中解析这个响应，并向用户显示这个响应。请记住，Rasa 将根据我们在请求正文中传递的名为“Rasa1”的唯一 id 来跟踪您的对话。</p><p id="b468" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在本文的下一部分，我们将学习</p><ol class=""><li id="6d66" class="mb mc iq kq b kr ks ku kv kx md lb me lf mf lj mg mh mi mj bi translated">Rasa 插槽</li><li id="f083" class="mb mc iq kq b kr mk ku ml kx mm lb mn lf mo lj mg mh mi mj bi translated">使用 Docker 的 Rasa</li><li id="a9dd" class="mb mc iq kq b kr mk ku ml kx mm lb mn lf mo lj mg mh mi mj bi translated">Rasa-X 进展</li><li id="1a97" class="mb mc iq kq b kr mk ku ml kx mm lb mn lf mo lj mg mh mi mj bi translated">Rasa 生产部署</li></ol><p id="b573" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">你可以从我的 Github 获得完整的代码</p><div class="nn no gp gr np nq"><a href="https://github.com/bikashkumars/rasa" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd ja gy z fp nv fr fs nw fu fw iz bi translated">bikashkumars/rasa</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">github.com</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb lv nq"/></div></div></a></div><p id="44b3" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">快乐的 Rasa 和快乐的机器学习——读者们。！！！</p></div></div>    
</body>
</html>