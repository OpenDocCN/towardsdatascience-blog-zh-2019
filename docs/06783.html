<html>
<head>
<title>Is your Numpy optimized for speed?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你的 Numpy 是否针对速度进行了优化？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/is-your-numpy-optimized-for-speed-c1d2b2ba515?source=collection_archive---------13-----------------------#2019-09-27">https://towardsdatascience.com/is-your-numpy-optimized-for-speed-c1d2b2ba515?source=collection_archive---------13-----------------------#2019-09-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8ed6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何发现你的 Numpy 是否使用了快速 BLAS 库？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a096fb9ef2837e39392346f6e4639d1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*psrOIchmsr5ERjJ_.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">The Numpy <a class="ae ky" href="https://en.wikipedia.org/wiki/NumPy#/media/File:NumPy_logo.svg" rel="noopener ugc nofollow" target="_blank">Logo</a>, Wikipedia.</figcaption></figure><p id="c6ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您的研究工作高度依赖于基于数字的计算，如向量或矩阵的加法和乘法等。然后，建议运行一些检查，以查看 Numpy 是否使用了针对速度优化的三个库之一，而不是 Numpy 的默认版本。</p><p id="67a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有 4 个 Blas 和 Lapack 版本可供选择，据我所知，Numpy 会从下面的(2，3，4)库中选择一个，如果你的系统中没有这两个版本，它会默认使用第一个。</p><h2 id="6002" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">图书馆:</h2><ol class=""><li id="ff2a" class="mo mp it lb b lc mq lf mr li ms lm mt lq mu lu mv mw mx my bi translated">默认 BLAS 和 Lapack</li><li id="ce07" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><a class="ae ky" href="https://www.openblas.net/" rel="noopener ugc nofollow" target="_blank"> OpenBLAS </a></li><li id="732d" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><a class="ae ky" href="https://software.intel.com/en-us/mkl" rel="noopener ugc nofollow" target="_blank">英特尔 MKL </a></li><li id="e011" class="mo mp it lb b lc mz lf na li nb lm nc lq nd lu mv mw mx my bi translated"><a class="ae ky" href="http://math-atlas.sourceforge.net/" rel="noopener ugc nofollow" target="_blank">图集</a></li></ol><h2 id="45a1" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">基准</h2><p id="c4aa" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">幸运的是，网上有两个基准测试，第一个<a class="ae ky" href="https://github.com/tmolteno/necpp/issues/18" rel="noopener ugc nofollow" target="_blank">是 2015 年制作的，比较了 OpenBLAS、英特尔 MKL 和 ATLAS，它倾向于 MKL 和 ATLAS，但值得注意的是，自 2015 年以来发生了很多变化。</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/22de5bec532eec639c55ce7a5d90f63f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*s8mM7daX0Rz3kHV1"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Figure 1: a comparison of four BLAS libraries</figcaption></figure><p id="762c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="http://markus-beuckelmann.de/blog/boosting-numpy-blas.html" rel="noopener ugc nofollow" target="_blank">第二张</a>一张(图 1)是 2017 年的，更完整。它显示了所有四个库的比较，结果有利于 OpenBLAS，英特尔 MKL vs ATLAS，而 MKL 略微领先。对向量和矩阵乘法、奇异值分解、乔莱斯基分解和特征分解进行了比较。</p><h2 id="fd88" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">哪个图书馆？</h2><p id="a4d2" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">如果你想知道 Numpy 目前使用的是哪一个，简单的答案是:</p><blockquote class="ni nj nk"><p id="97ec" class="kz la nl lb b lc ld ju le lf lg jx lh nm lj lk ll nn ln lo lp no lr ls lt lu im bi translated">导入 numpy<br/>print(numpy . show _ config())</p></blockquote><p id="34a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://stackoverflow.com/questions/37184618/find-out-if-which-blas-library-is-used-by-numpy" rel="noopener ugc nofollow" target="_blank">长回答</a>就是你得挖开外壳，看看装的是哪个。</p><p id="c5b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于编号为&lt; 1.10:</p><blockquote class="ni nj nk"><p id="c44b" class="kz la nl lb b lc ld ju le lf lg jx lh nm lj lk ll nn ln lo lp no lr ls lt lu im bi translated"> 【T0】 </p></blockquote><p id="d98b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">For Numpy≥1.10:</p><blockquote class="ni nj nk"><p id="8bb3" class="kz la nl lb b lc ld ju le lf lg jx lh nm lj lk ll nn ln lo lp no lr ls lt lu im bi translated"> 【T1】 </p></blockquote><p id="bca1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">immediately after you will have to follow some symlinks.</p><pre class="kj kk kl km gt nt ns nu nv aw nw bi"><span id="4d59" class="lv lw it ns b gy nx ny l nz oa">$ldd /usr/lib/python2.7/dist-packages/numpy/core/_dotblas.so <br/>    linux-vdso.so.1 =&gt;  (0x00007fff12db8000)<br/>    libblas.so.3 =&gt; /usr/lib/libblas.so.3 (0x00007fce7b028000)<br/>    libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007fce7ac60000)<br/>    libm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007fce7a958000)<br/>    libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fce7a738000)<br/>    /lib64/ld-linux-x86-64.so.2 (0x00007fce7ca40000)</span><span id="4124" class="lv lw it ns b gy ob ny l nz oa">$ readlink -e /usr/lib/libblas.so.3<br/>/usr/lib/openblas-base/libblas.so.3</span></pre><p id="917f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Please note that these examples were pasted from this SO <a class="ae ky" href="https://stackoverflow.com/questions/37184618/find-out-if-which-blas-library-is-used-by-numpy" rel="noopener ugc nofollow" target="_blank">的帖子</a>。</p><p id="6544" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">非常感谢你阅读这篇文章，如果你有任何评论，请随时回复。</p></div><div class="ab cl oc od hx oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="im in io ip iq"><p id="5009" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我要感谢我的同事巴拉克·亚伊尔·赖夫在这个问题上启发了我。</p></div><div class="ab cl oc od hx oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="im in io ip iq"><p id="da4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Ori Cohen 博士拥有计算机科学博士学位，主要研究机器学习。他是 TLV 新遗迹公司的首席数据科学家，从事 AIOps 领域的机器和深度学习研究。</p></div></div>    
</body>
</html>