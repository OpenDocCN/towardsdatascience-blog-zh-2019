<html>
<head>
<title>Deep learning based web application: from data collection to deployment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于深度学习的 web 应用:从数据收集到部署</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/deep-learning-based-web-application-from-data-collection-to-deployment-9e89f29b67df?source=collection_archive---------19-----------------------#2019-09-08">https://towardsdatascience.com/deep-learning-based-web-application-from-data-collection-to-deployment-9e89f29b67df?source=collection_archive---------19-----------------------#2019-09-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6d5c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从头开始构建图像分类器 web 应用程序，不需要 GPU 或信用卡。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a32d0163bd7e375a36c43130419eb1f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p6itltMiHpF4P9qWjZpgPQ.jpeg"/></div></div></figure><p id="fb77" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这篇文章描述了如何在不需要 GPU 或信用卡的情况下为<strong class="kw iu">图像分类</strong>、<em class="lq">构建一个基于深度学习的网络应用</em>！</p><p id="4924" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">尽管有很多文章描述这种东西，但我找不到完整的指南来描述<strong class="kw iu">从数据收集到部署的所有步骤</strong>，而且一些细节也很难找到(例如，如何在 Google Drive 上克隆 Github repo)。</p><p id="87ce" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">文章很大程度上基于<a class="ae lr" href="https://docs.fast.ai/index.html" rel="noopener ugc nofollow" target="_blank"> fast.ai </a>的程序员实用深度学习课程(简直太神奇了)。它分为以下几个部分:</p><ol class=""><li id="b540" class="ls lt it kw b kx ky la lb ld lu lh lv ll lw lp lx ly lz ma bi translated"><strong class="kw iu">数据采集</strong></li><li id="4c87" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated"><strong class="kw iu">培训</strong></li><li id="c6a1" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated"><strong class="kw iu">部署</strong></li></ol><p id="dd0e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">本指南面向已经具备基本编码和深度学习经验的人<em class="lq">；如果有些概念是全新的，你最好从更具体的文章开始。</em></p><p id="dfb0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将看到一个如何构建<em class="lq">猫科动物分类器的例子。</em><strong class="kw iu">完整代码</strong>在<a class="ae lr" href="https://github.com/davide-burba/spotted_feline_classifier" rel="noopener ugc nofollow" target="_blank">这里</a>有，你可以在这里 <a class="ae lr" href="https://spotted-feline-identifier.onrender.com" rel="noopener ugc nofollow" target="_blank">测试<strong class="kw iu"> web 应用(如果不行说明我已经关机了；可以看看 fast.ai 玩具模型<a class="ae lr" href="https://fastai-v3.onrender.com" rel="noopener ugc nofollow" target="_blank">这里</a>)！</strong></a></p><h1 id="8e8a" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">1.数据收集</h1><p id="7c13" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">第一个问题是数据收集。虽然在像<a class="ae lr" href="https://www.kaggle.com" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>这样的网站上有许多预先存在的数据集，但你可能会对构建<strong class="kw iu">我们自己的数据集</strong>感兴趣。在这种情况下，<strong class="kw iu">我们对区分斑点猫科动物</strong>感兴趣，如下图所示。</p><div class="kj kk kl km gt ab cb"><figure class="nd kn ne nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/f1f1a12b1612749696915d3aebafad39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*kENnwbzvMdDd-_qVZ_2wnQ.jpeg"/></div></figure><figure class="nd kn nj nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/7e1a76ada143852bb2b6482fd2876559.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*3DabfyXRCqPheVr5BzQONw.jpeg"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk no di np nq">Cheetah, Jaguar, Leopard and … Other</figcaption></figure></div><div class="ab cb"><figure class="nd kn nr nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/2071875e1eb7b67bba376afd9baa0872.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*69ns3kbL6URHsaT2x4kJ5g.jpeg"/></div></figure><figure class="nd kn ns nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/2584ba2f52b928b5acaa70c82b80e5b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*gIdB7OYBPMsYDYMDnbro0Q.jpeg"/></div></figure></div><p id="5d1b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，给定一幅图像，我们的分类器应该告诉我们它是否包含一只<strong class="kw iu">猎豹</strong>、一只<strong class="kw iu">美洲豹</strong>、一只<strong class="kw iu">豹</strong>或其他什么。是的，我知道这完全没用。然而，这有利于练习和娱乐:)。</p><p id="892e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第一件事是收集每个班级的图像样本。有几种方法可以从网上抓取图像；我们将利用<a class="ae lr" href="https://docs.fast.ai/index.html" rel="noopener ugc nofollow" target="_blank"> fast.ai </a>提供的<a class="ae lr" href="https://docs.fast.ai/widgets.image_cleaner.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> image_cleaner 模块</strong> </a> <strong class="kw iu"> </strong>。其他的选择可能是<a class="ae lr" href="https://pypi.org/project/google_images_download/" rel="noopener ugc nofollow" target="_blank">Google _ images _ download</a>包，或者你可以试着从浏览器使用 javascript 控制台，就像这里的<a class="ae lr" href="https://github.com/fastai/course-v3/blob/master/nbs/dl1/lesson2-download.ipynb" rel="noopener ugc nofollow" target="_blank">一样</a>。</p><p id="6f7e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lr" href="http://image_cleaner" rel="noopener ugc nofollow" target="_blank"><strong class="kw iu">image _ cleaner</strong></a><strong class="kw iu"/>提供可从 Jupyter 笔记本使用的应用程序。你需要做的就是<a class="ae lr" href="https://docs.fast.ai/install.html" rel="noopener ugc nofollow" target="_blank">安装 fastai 库</a>并在 Jupyter 笔记本中运行以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk"><strong class="ak">Warning</strong>: to be run in Jupiter Notebook, it doesn’t work in Jupyter Lab and CoLab</figcaption></figure><p id="c56c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这将导致类似这样的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/620984fe03833ec1d0fcfb25bb4590f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DBUe-FocD4X5BKA_JuKAng.png"/></div></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk">You need to set the keywords for the search, the number of images and the minimum quality.</figcaption></figure><p id="adac" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">比你想象的容易，对吧？我们只需要注意<strong class="kw iu">几个细节</strong>:</p><ol class=""><li id="2be8" class="ls lt it kw b kx ky la lb ld lu lh lv ll lw lp lx ly lz ma bi translated">在你的搜索中要精确；可能值得使用特殊字符来强制包含("")或排除(-)。例如:<em class="lq">猫科动物“美洲虎”——汽车。</em></li><li id="f04d" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">要下载超过 100 张图片，你需要安装 selenium 和 chromedriver。</li><li id="c0c8" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">有不同的方法来训练分类器<strong class="kw iu"> <em class="lq">理解图像是否不对应于任何考虑的类别。</em> </strong>一种方法是创建一个"<strong class="kw iu">其他"</strong>类包含随机图像。对于“<strong class="kw iu">other”</strong>类，我们的搜索是:<em class="lq">动物-美洲虎-猎豹-豹。</em></li><li id="642c" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">您的数据集中很可能会有一些噪声图像；应该“用手”将它们移除。拥有一个相对较小的干净数据集比拥有一个巨大的嘈杂数据集要好。</li></ol><p id="c9e4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们有了一个全新的干净的数据集。训练时间到了！</p><h1 id="91ae" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">2.培养</h1><p id="9bfa" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated"><em class="lq">现在呢？每个人都知道，为了能够训练一个图像分类器，你需要大量的图像和图形处理器！或者……也许不是？</em></p><p id="0711" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们不需要收集这么多图像，这是因为两个惊人的技术:<strong class="kw iu">数据增强</strong>和<strong class="kw iu">迁移学习</strong>。第一种技术是通过从现有图像开始构建新图像来自动扩充数据集，如下图所示:</p><div class="kj kk kl km gt ab cb"><figure class="nd kn nw nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/e6a6fac79059168114b1c4762ff93d0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:634/format:webp/1*dNeSxAx97SpHjx5JhbbbqA.jpeg"/></div></figure><figure class="nd kn nx nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/0154f51ae881421028523e29d79ed09c.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/format:webp/1*msqF3r1a0mwyd8q1dJiyyA.jpeg"/></div></figure><figure class="nd kn ny nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/f37d8ae158a3ae0ae6f049f626a92686.png" data-original-src="https://miro.medium.com/v2/resize:fit:686/format:webp/1*c1yJHUUuzBLcgC26VfdsLQ.png"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk nz di oa nq">Example of Data Augmentation</figcaption></figure></div><p id="85b6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第二种技术是使用预先训练好的模型，在我们的例子中是<a class="ae lr" href="https://arxiv.org/abs/1512.03385" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> ResNet34 </strong> </a> <strong class="kw iu">。</strong>这个网络已经在<a class="ae lr" href="http://www.image-net.org" rel="noopener ugc nofollow" target="_blank"> ImageNe </a> t 数据集上进行了训练，可以检测数千个类别。因此，我们可以预期<em class="lq">由最后一个隐藏层给出的图像表示“捕捉”了大量复杂的图案</em>，即它提供了智能特征。</p><p id="3ffd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">即使这些概念可能看起来不完全清楚，这也不应该阻止我们部署我们的应用程序。事实上，<a class="ae lr" href="https://docs.fast.ai/index.html" rel="noopener ugc nofollow" target="_blank"> fast.ai </a>库使得这些技术变得非常容易使用。</p><p id="2c37" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了在不需要信用卡的情况下免费访问 GPU，我们可以使用 Google Colab，这是 Google 提供的一项服务，因此与 Google Drive 高度集成。</p><p id="51c1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在谷歌实验室中创建和运行一个 Jupyter 笔记本相当简单。要启用 GPU，请按“<em class="lq">运行时</em>”、“<em class="lq">运行时类型</em>，并将“<em class="lq">硬件加速器”</em>设置为 GPU。</p><p id="26be" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然而，我们还需要:</p><ol class=""><li id="2b35" class="ls lt it kw b kx ky la lb ld lu lh lv ll lw lp lx ly lz ma bi translated"><strong class="kw iu">连接驱动</strong></li><li id="2d92" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated"><strong class="kw iu">与 Git/GitHub 通信</strong></li></ol><p id="04b0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一旦我们将数据放入 Google Drive，要从 Colab Notebook 访问它，我们只需运行以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="7d10" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们可以从“<em class="lq">路径”加载数据。</em></p><p id="d6e2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要从 Drive 使用 Github，我们基本上使用 Colab 笔记本作为命令行，如这里的<a class="ae lr" href="https://lalorosas.com/blog/github-colab-drive" rel="noopener ugc nofollow" target="_blank">所述</a>。就我个人而言，我在我称为<strong class="kw iu"><em class="lq">git _ communicator . ipynb .</em></strong>的项目之外使用过一个 Colab 笔记本</p><p id="7626" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，要克隆 Github 存储库，我们只需在 Colab 的笔记本上运行以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="0f8f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一旦我们完成了修改，我们就可以运行通常的 git 命令(以“！”开头)提交和推送修改)来自 Colab 笔记本手机。</p><p id="8a85" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一旦我们为我们的项目创建了一个 GitHub 库，我们就能够<strong class="kw iu">在 Google Drive 上克隆</strong>，利用一个免费的 GPU<strong class="kw iu">在 Colab 上运行</strong>现有的笔记本，然后<strong class="kw iu">提交</strong>修改！</p><p id="e601" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">既然我们已经解决了技术问题，是时候训练我们的分类器了。还是那句话，<a class="ae lr" href="https://docs.fast.ai/index.html" rel="noopener ugc nofollow" target="_blank"> fast.ai </a>让它超级简单。首先，让我们<strong class="kw iu">加载数据</strong>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="f9f3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这段代码创建了一个<em class="lq"> DataBunch </em>对象:</p><ol class=""><li id="ed3d" class="ls lt it kw b kx ky la lb ld lu lh lv ll lw lp lx ly lz ma bi translated">保留 20%的数据进行验证</li><li id="a071" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">应用标准数据扩充技术</li><li id="93f7" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">应用 ImageNet 数据集规范化</li></ol><p id="dfd8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">很好，现在我们将使用带有预训练权重的 ResNet34 网络架构，并且<strong class="kw iu">仅训练最后一个隐藏层与输出层</strong>的连接。这可以通过两行代码来完成:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="6ad1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该代码使用了<a class="ae lr" href="https://docs.fast.ai/callbacks.one_cycle.html#What-is-1cycle?" rel="noopener ugc nofollow" target="_blank"><strong class="kw iu">fit-one-cycle</strong></a>策略，这是一种智能技术，通过使用开始时逐渐增加，后来逐渐减少的学习速率，在短时间内训练网络。这使我们得出以下结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/fc34ac7be606c48debdc1f7cbd7ffd9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Oae_APRAQEilW89xpDy5A.png"/></div></div></figure><p id="c9df" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在不到 6 分钟的时间里，我们在验证集上达到了几乎 93%的准确率。然而，我们可以观察到<strong class="kw iu">培训损失仍然大于验证损失。</strong>这意味着仍有改进的空间！</p><p id="4260" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在也许值得对整个网络进行<strong class="kw iu">训练，</strong>不仅仅是最后一层。这也可以通过两行代码来实现:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="f4e6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在策略中为最大学习速率设置一个片而不是单个值允许<strong class="kw iu">用不同的学习速率训练网络</strong>。第一层将用较小的学习率来训练，因为它们“检测”在不同图像数据分布中不应该改变太多的简单模式。</p><p id="47d3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们看看我们现在得到的混淆矩阵:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/7a599337e72eee58fabea988a66db2ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*-vEtsvAtOo5Sj8PqAJAhYw.png"/></div></figure><p id="aa05" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">哇，这是验证集上<strong class="kw iu"> 98.73 %的准确率</strong>！</p><p id="ee06" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果我们将它作为专业应用<strong class="kw iu">，我们将不得不提供一个单独的测试集</strong>来评估我们的分类器的性能。然而，对于像我们这样的玩具项目来说，这个结果已经足够了！</p><p id="9353" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">由于我们对模型感到满意，我们可以通过运行以下命令将其导出以进行部署:</p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="bb42" class="oi mh it oe b gy oj ok l ol om">learn.export()</span></pre><p id="19e7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">运行模型所需的一切都将存储在一个名为<strong class="kw iu"> export.pkl 的文件中，在我们的例子中</strong>放在“data”目录中。</p><h1 id="4fbf" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">3.部署</h1><p id="01e9" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">如果说训练很容易，那么部署就更容易了，多亏了<strong class="kw iu"> </strong> <a class="ae lr" href="https://www.docker.com/why-docker" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> Docker </strong> </a>和<a class="ae lr" href="https://render.com" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> Render </strong> </a>。</p><p id="a2ec" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lr" href="https://www.docker.com/why-docker" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> Docker </strong> </a>是一个允许使用容器轻松部署和运行应用程序的工具。简而言之，它是一种虚拟机，而不是虚拟化整个操作系统，使用与运行系统相同的 Linux 内核，从而提高性能。</p><p id="ebd0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lr" href="https://render.com" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> Render </strong> </a>是一个 web 服务，允许非常容易地构建和运行 web 应用程序(以及其他)。</p><p id="cdff" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">同样，我们甚至不需要理解这些东西实际上是如何工作的。我们可以简单地使用 fast.ai 提供的示例代码<a class="ae lr" href="https://github.com/render-examples/fastai-v3" rel="noopener ugc nofollow" target="_blank">(这里是</a>)，把它添加到我们的存储库中(或者从头开始分支)。</p><p id="c734" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要在渲染时部署,只需:</p><ol class=""><li id="40de" class="ls lt it kw b kx ky la lb ld lu lh lv ll lw lp lx ly lz ma bi translated">创建一个渲染帐户，并将其连接到 Github</li><li id="ca36" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">将训练好的模型文件<strong class="kw iu"> export.pkl </strong>上传到 Google Drive 并使其可下载</li><li id="c079" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">用 URL 编辑<code class="fe on oo op oe b">model_file_url</code>变量到<strong class="kw iu"> export.pkl </strong>和<strong class="kw iu">T30】更新文件<code class="fe on oo op oe b">server.py</code>中的行<code class="fe on oo op oe b">classes</code></strong></li><li id="49ba" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">编辑<strong class="kw iu">index.html</strong>以更改网站文本和布局(可选)</li><li id="c49d" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">启动新服务</li></ol><p id="982d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所有这些步骤在<a class="ae lr" href="https://course.fast.ai/deployment_render.html" rel="noopener ugc nofollow" target="_blank">和</a>中详细描述。</p><p id="84b3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，你现在应该有一个基于深度学习的 web 应用程序！它应该是这样的:</p><div class="kj kk kl km gt ab cb"><figure class="nd kn oq nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/5f922a6c85717d8c9315fcaf01d1f641.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*PkLh8S9JrpZzWb5YCEeHqg.png"/></div></figure><figure class="nd kn or nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/df4649856a59730ce6db0cbb7ca1a8db.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*llYv_TZ3bEW3oGFereEADA.png"/></div></figure><figure class="nd kn os nf ng nh ni paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/65cfdff58e915671822760041feb03bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*amfcTmgxjXNMyeVGdbJRKw.png"/></div></figure></div><h1 id="f22a" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结束语</h1><ol class=""><li id="3e48" class="ls lt it kw b kx my la mz ld ot lh ou ll ov lp lx ly lz ma bi translated">数据决定一切。整个过程最重要的是得到一个像样的数据集。</li><li id="04bb" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">在这个应用程序中，我们<strong class="kw iu">只对动物的图像进行训练</strong>。网络可能会对其他主题的图像表现出意想不到的行为。</li><li id="1e38" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">我们基于验证集来评估性能。在现实世界的应用中，<strong class="kw iu">我们应该使用测试集</strong>来避免有偏见的估计。</li><li id="3760" class="ls lt it kw b kx mb la mc ld md lh me ll mf lp lx ly lz ma bi translated">fast.ai 库非常酷，它让复杂的高级技术变得非常容易使用。然而，<strong class="kw iu">如果你需要更多地控制正在发生的事情</strong>，直接使用它的后端<a class="ae lr" href="https://pytorch.org" rel="noopener ugc nofollow" target="_blank"> PyTorch </a>可能会更好。</li></ol></div></div>    
</body>
</html>