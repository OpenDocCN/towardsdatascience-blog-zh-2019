# 避免数据科学产品中的“自动移交”综合症

> 原文：<https://towardsdatascience.com/avoiding-the-automatic-hand-off-syndrome-in-data-science-products-11be20315f1d?source=collection_archive---------35----------------------->

## 数据科学产品的简单进化指南

![](img/b4dc35b4981ca60874f845796b386f39.png)

# 对数据科学产品演变的看法

为新团队开发数据科学产品可能是一项艰巨的任务。数据科学产品的本质中嵌入了相互冲突的要求。第一个约束:产品团队希望尽快将概念证明推向市场。第二个约束:数据科学(DS)团队需要一个不断增长的基础设施来进行高效的实验。数据科学家通常缺乏足够的基础设施来满足他们不断增长的需求。第三个约束:工程团队(ENG)重视系统的稳定性和可靠性。这使得他们无法与来自研究团队的“创意一代”保持同步。这些约束的组合导致机器学习流水线中的常规延迟。延误会严重影响士气和商业价值的创造。重要的是，这在模型创建和模型监控时留下了阴影。作为一个社区，我们需要确定容易延迟和失败的组件和工作流，以超越数据科学/机器学习工程的当前状态，达到更高的标准。

> 在这三个团队中，即(产品、DS 和 ENG)，一个中心问题很早就被提出。
> 
> 谁应该是数据科学产品计算管道的主要所有者？

随着三连胜在这个问题上的深入，所有权问题变得更加微妙。开始出现更多类似以下的问题:

*   当前的数据科学项目处于产品生命周期的哪个阶段？
*   工程可靠性与数据科学灵活性之间的项目权衡是什么？
*   这个项目创造了多少商业价值，它的任务关键程度如何？

这些问题可以帮助指导数据科学和工程小组。它可以帮助他们决定何时以及如何分配勘探和开发的工作。

# 它是关键任务吗？

为此，三连胜需要考虑最坏的情况。假设我们有一个长达一周的混乱，我们无法修复模型或支持它的数据管道上的任何东西。会有什么影响？以下是场景的排序列表:

1.  该模型返回了不好的预测，但没有商业价值的损失。
2.  该模型的预测能力正变得过时。这导致了轻微的商业价值损失。
3.  模型的预测是如此的错误，以至于我们失去了大量的商业价值。
4.  模型的预测正在破坏我们的客户关系。这种模式引发了重大的商业价值损失，并影响了品牌。

有了这个简单的列表，团队可以给他们的项目一个**任务关键度分数**。这可以帮助他们考虑 DS 到 ENG 交互的选项。

> 如果没有这个**任务关键度评分**评估，规避风险的工程团队通常会建议完全移交项目。就在第一次模型迭代之后。太快了。
> 
> 我们姑且称之为数据科学产品中的**“自动移交”综合症**。

# 从任务关键度评分到 DS 管道

这里有一个模式可以用来避免这种自动切换。在我最近参与的人工智能项目中，我看到了这项工作。在确定了任务的关键程度后，团队可以选择下面两条路径中的一条。

基于任务关键度的 ML 产品管理的两种不同方法

对于非关键任务产品，DS 项目负责人应促进 DS 的完全所有权。这样，领导该产品的数据科学家也可以拥有 DS 管道:

![](img/5f8058364454d795eb203b882f39b032.png)

Two different methods of ML product management based on Mission Criticality

对于任务不太关键的产品，DS 项目负责人应促进数据科学团队的完全所有权。这样，领导该产品的数据科学家就可以拥有 DS 管道:

*   数据准备
*   特征工程
*   模特培训
*   模型服务
*   模型监控

为了在这方面取得成功，数据科学平台团队可以提供轻度的“平台”级支持。DS 团队可以依赖上游数据管道。这些通常可用于母公司业务中的报告职能。

另一方面，项目的任务关键程度可能会变得过高。飞行中的颠簸可能会造成巨大的商业价值损失。在这种情况下，建议采用一种补充方案。工程部门构建了一个用于生产用途的硬化管道。这涉及“稳定性第一”的数据准备、特征工程和模型训练/服务/监控。DS 团队继续并行开发新的功能工程/模型。

保持服务/监控与生产管道的分离是很有用的。实验性的 DS 管道可以使用生产工作负载所使用的服务/监控基础设施。这也防止了模型服务兼容性的偶然差异。

当产品发展到足够关键时，这简化了未来的“移交”。“伪不变的”服务层鼓励团队寻找与之兼容的模型。这是一个使用依赖倒置原则的好机会。服务层是消费者/客户查询和预测服务之间的接口。但是，它可以在团队之间建立一个契约。实验管道和生产管道都可以共享这项服务。这种策略的缺点是它减少了 ML 搜索空间。API 契约和 DB 表模式都可以充当契约。这使实验和生产途径保持同步。

还有两个问题没有得到解答:

*   **如何在 DS 和 ENG 团队成员之间分配工作，使他们能够发挥互补的技能？**
*   实验和生产层面之间的这种互动何时以及如何发展？

# DS 和 ENG 之间的分工

下面是一种模拟 DS 与 ENG 交互的方法，分为两个复杂性轴:

*   计算性能复杂性
*   机器学习复杂性

“计算性能复杂性”(CPC)是一个宽泛的抽象术语。我将在这里用它来描述任何不“适合”数据科学家的笔记本电脑的处理。

“机器学习复杂性”(MLC)也是一个宽泛而抽象的术语。我会把它用于任何需要大量机器学习知识的处理。

目标是帮助 DS 团队决定如何划分各种项目组件。DS 产品可以去除一些不必要的耦合。这需要将产品总分类与商品总分类脱钩。我们解释如何根据 DS 和 ENG 团队的专业化来划分组件。

![](img/bd5659cb8729bef84f16da20fa838548.png)

Possible Data/DS/ML Component refinement directions

这种分割的想法是把它分成有意义的部分。组件的并发实现加快了生产时间。

在项目早期，手头的问题没有足够的 ML 或性能复杂性。但是每个人都默认参与其中。这种方法增加了团队内部的大量通信开销。数据工程师可以管理专门的低延迟和大数据堆栈。数据科学家和 ML 工程师可以管理机器学习组件。

使用该框架分离关注点是一门艺术。该框架可以指导构建模块化机器学习管道的最初尝试。

# **何时以及如何将实验工作发展到生产水平**

![](img/6287e0310898cb691193c4e6513c22fe.png)

ML Evolution pathways

监控是数据科学产品发展的关键。DS 车主高度关注直播车型的商业价值创造。上图提出了一种简单反馈回路的方法。这是一张简单的地图，可以帮助您跳到全面的生产支持。

DS 团队可以使用上面的决策图来选择策略。该图有助于确定一段时间内管道的任务关键度。DS 团队可以选择实验管道或完整的生产支持。在实验管道中，数据科学所有权属于整个管道。

实验途径提供了充分的灵活性。这包括生成多个版本的特征工程和模型训练步骤。在管道出口处，有两种类型的 DS 监控。“预测性能”和“业务价值”监控。**预测性能**指导 DS 团队的下一次迭代。这允许他们改进他们的模型/特征工程技术。**商业价值**监控引导从实验模式到生产模式的演进。DS 团队可以继续迭代，同时为完整的生产支持构建可靠的案例。

在实验+生产模式下，工程负责人复制最佳的 ML 配方。这个食谱来自实验途径。它们强化了有性能或可靠性限制问题的模块。

这种双模式允许 DS 团队不断迭代。对现有管道的修改产生了下一个最佳方案。这个下一个最佳配方旨在成为生产流水线。与实验模式一样，DS 团队使用预测性能进行迭代。业务价值监控确定了进一步强化生产的需求。DS 项目是全生命周期项目。因此，我们可以使用业务价值指标来确定任何日落。这是为未来的 DS 产品腾出空间所必需的。

# **结论**

ML 管道的延迟和痛苦的调试是昂贵的。部分问题是产品+数据科学+工程三管齐下的工作流程。所有这些单独的部分孤立地工作得很好。但是沟通开销会降低项目的速度。这篇博文解释了导致“自动移交”综合症的原因。DS 团队从第一天开始就将项目移交给工程部门进行实施。这种方法在机器学习产品的发展上有缺陷。

为了解决这个问题，我们描述了 3 个简单的准则。这是为了帮助处理这种过早优化。首先，我们描述了如何估计项目的任务关键度。这包括 DS 管道如何适应以支持这两种情况。其次，我们描述了如何划分一个复杂的 DS 应用程序的指导原则。我们使用了复杂性能和复杂机器学习这两个轴。最后，我们描述了一种跟踪和适应实验+生产模式的方法。使用业务价值监控，我们可以调整 ML 管道运营模式。

这是所有的乡亲。

我希望你喜欢这篇文章。它旨在帮助您提高您的机器学习项目架构设计技能。

请注意，这篇文章中表达的观点是我个人的，不一定是我雇主的观点。

我们在招人！如果您对此感兴趣，请查看 Xandr 数据科学平台工程的空缺职位:

[https://xandr . att . jobs/job/new-York/data-science-platform-engineer/25348/12859712](https://xandr.att.jobs/job/new-york/data-science-platform-engineer/25348/12859712)