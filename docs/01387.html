<html>
<head>
<title>Twitter Sentiment Analysis using fastText</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨ fastText çš„ Twitter æƒ…æ„Ÿåˆ†æ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://towardsdatascience.com/twitter-sentiment-analysis-using-fasttext-9ccd04465597?source=collection_archive---------6-----------------------#2019-03-05">https://towardsdatascience.com/twitter-sentiment-analysis-using-fasttext-9ccd04465597?source=collection_archive---------6-----------------------#2019-03-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1fd9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªå¿«é€Ÿæ–‡æœ¬åº“æ¥åˆ†æå„ç§æ¨æ–‡çš„æƒ…ç»ªï¼Œè¯¥åº“æ˜“äºä½¿ç”¨å’Œå¿«é€Ÿè®­ç»ƒã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/0d22e011563ae0e3681bb4310df17f29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VT7AxioAGXplMe7RAEYfSA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Twitter sentiment analysis</figcaption></figure><h1 id="c372" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">ä»€ä¹ˆæ˜¯ fastTextï¼Ÿ</h1><p id="63ce" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">FastText æ˜¯ç”±è„¸ä¹¦äººå·¥æ™ºèƒ½å¼€å‘çš„è‡ªç„¶è¯­è¨€å¤„ç†åº“ã€‚è¿™æ˜¯ä¸€ä¸ªå¼€æºã€å…è´¹ã€è½»é‡çº§çš„åº“ï¼Œå…è®¸ç”¨æˆ·å­¦ä¹ æ–‡æœ¬è¡¨ç¤ºå’Œæ–‡æœ¬åˆ†ç±»å™¨ã€‚å®ƒåœ¨æ ‡å‡†çš„é€šç”¨ç¡¬ä»¶ä¸Šå·¥ä½œã€‚æ¨¡å‹å¯ä»¥ç¼©å°å°ºå¯¸ï¼Œç”šè‡³é€‚åˆç§»åŠ¨è®¾å¤‡ã€‚</p><h1 id="2ac3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">ä¸ºä»€ä¹ˆé€‰æ‹© fastTextï¼Ÿ</h1><p id="8b50" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">æ·±åº¦ç¥ç»ç½‘ç»œæ¨¡å‹çš„ä¸»è¦ç¼ºç‚¹æ˜¯å®ƒä»¬éœ€è¦å¤§é‡çš„æ—¶é—´æ¥è®­ç»ƒå’Œæµ‹è¯•ã€‚åœ¨è¿™é‡Œï¼ŒfastText æœ‰ä¸€ä¸ªä¼˜åŠ¿ï¼Œå› ä¸ºå®ƒåªéœ€è¦å¾ˆå°‘çš„æ—¶é—´æ¥è®­ç»ƒï¼Œå¹¶ä¸”å¯ä»¥åœ¨æˆ‘ä»¬çš„å®¶ç”¨ç”µè„‘ä¸Šé«˜é€Ÿè®­ç»ƒã€‚</p><p id="6298" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ ¹æ® fastText ä¸Šçš„<a class="ae me" href="https://research.fb.com/fasttext/" rel="noopener ugc nofollow" target="_blank">è„¸ä¹¦äººå·¥æ™ºèƒ½åšå®¢</a>çš„è¯´æ³•ï¼Œè¿™ä¸ªåº“çš„å‡†ç¡®æ€§ä¸æ·±åº¦ç¥ç»ç½‘ç»œç›¸å½“ï¼Œå¹¶ä¸”åªéœ€è¦å¾ˆå°‘çš„æ—¶é—´æ¥è®­ç»ƒã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mf"><img src="../Images/e850ea29faffd15f2253108f5e19b65a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2HEY4ZmzTbzFjqBdy4nwjw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">comparison between fastText and other deep learning based models</figcaption></figure><p id="6875" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬çŸ¥é“äº† fastText ä»¥åŠæˆ‘ä»¬ä¸ºä»€ä¹ˆä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•ä½¿ç”¨è¿™ä¸ªåº“è¿›è¡Œæƒ…æ„Ÿåˆ†æã€‚</p><h1 id="e166" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">è·å–æ•°æ®é›†</h1><p id="9f55" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">æˆ‘ä»¬å°†ä½¿ç”¨ betsentiment.com çš„<a class="ae me" href="https://betsentiment.com/resources/dataset/english-tweets" rel="noopener ugc nofollow" target="_blank">ä¸Šå¯ç”¨çš„æ•°æ®é›†ã€‚æ¨æ–‡æœ‰å››ä¸ªæ ‡ç­¾ï¼Œåˆ†åˆ«æ˜¯æ­£å€¼ã€è´Ÿå€¼ã€ä¸­æ€§å’Œæ··åˆå‹ã€‚æˆ‘ä»¬ä¼šå¿½ç•¥æ‰€æœ‰å¸¦æœ‰æ··åˆæ ‡ç­¾çš„æ¨æ–‡ã€‚</a></p><p id="5b4d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å°†ä½¿ç”¨å›¢é˜Ÿ tweet æ•°æ®é›†ä½œä¸ºè®­ç»ƒé›†ï¼Œè€Œçƒå‘˜æ•°æ®é›†ä½œä¸ºéªŒè¯é›†ã€‚</p><h1 id="2651" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">æ¸…æ´—æ•°æ®é›†</h1><p id="5359" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">æ­£å¦‚æˆ‘ä»¬æ‰€çŸ¥ï¼Œåœ¨è®­ç»ƒä»»ä½•æ¨¡å‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ¸…ç†æ•°æ®ï¼Œåœ¨è¿™é‡Œä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><h2 id="4aa7" class="mg lc iq bd ld mh mi dn lh mj mk dp ll jy ml mm lp kc mn mo lt kg mp mq lx mr bi translated">æˆ‘ä»¬å°†æ ¹æ®è¿™äº›è§„åˆ™æ¸…ç†æ¨æ–‡:</h2><ol class=""><li id="1846" class="ms mt iq jp b jq lz ju ma jy mu kc mv kg mw kk mx my mz na bi translated">ç§»é™¤æ‰€æœ‰æ ‡ç­¾ï¼Œå› ä¸ºæ ‡ç­¾ä¸ä¼šå½±å“æƒ…ç»ªã€‚</li><li id="106e" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">åˆ é™¤æåŠï¼Œå› ä¸ºå®ƒä»¬åœ¨æƒ…æ„Ÿåˆ†æä¸­ä¹Ÿä¸é‡è¦ã€‚</li><li id="b25a" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">å°†ä»»ä½•è¡¨æƒ…ç¬¦å·æ›¿æ¢ä¸ºå®ƒä»¬æ‰€ä»£è¡¨çš„æ–‡æœ¬ï¼Œä½œä¸ºè¡¨æƒ…ç¬¦å·æˆ–è¡¨æƒ…ç¬¦å·åœ¨ä»£è¡¨ä¸€ç§æƒ…ç»ªæ–¹é¢å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚</li><li id="891f" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">ç”¨å®Œæ•´çš„å½¢å¼ä»£æ›¿æ”¶ç¼©ã€‚</li><li id="6b5e" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">åˆ é™¤æ¨æ–‡ä¸­å‡ºç°çš„ä»»ä½• URLï¼Œå› ä¸ºå®ƒä»¬åœ¨æƒ…æ„Ÿåˆ†æä¸­å¹¶ä¸é‡è¦ã€‚</li><li id="1d34" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">åˆ é™¤æ ‡ç‚¹ç¬¦å·ã€‚</li><li id="e982" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">ä¿®å¤æ‹¼å†™é”™è¯¯çš„å•è¯(éå¸¸åŸºç¡€ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªéå¸¸è€—æ—¶çš„æ­¥éª¤)ã€‚</li><li id="c1c1" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">å°†æ‰€æœ‰å†…å®¹è½¬æ¢ä¸ºå°å†™ã€‚</li><li id="eee2" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">åˆ é™¤ HTML æ ‡ç­¾(å¦‚æœæœ‰)ã€‚</li></ol><h2 id="fff2" class="mg lc iq bd ld mh mi dn lh mj mk dp ll jy ml mm lp kc mn mo lt kg mp mq lx mr bi translated">æ¸…ç†æ¨æ–‡çš„è§„åˆ™:</h2><p id="784b" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">æˆ‘ä»¬å°†æ¸…ç†è¿™æ¡æ¨æ–‡</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="18ba" class="mg lc iq nh b gy nl nm l nn no">tweet = '&lt;html&gt; bayer leverkusen goalkeeeeper bernd leno will not be #going to napoli. his agent uli ferber to bild: "I can confirm that there were negotiations with napoli, which we have broken off. napoli is not an option." Atletico madrid and Arsenal are the other strong rumours. #b04 #afc &lt;/html&gt;'</span></pre><h2 id="d812" class="mg lc iq bd ld mh mi dn lh mj mk dp ll jy ml mm lp kc mn mo lt kg mp mq lx mr bi translated">åˆ é™¤ HTML æ ‡ç­¾</h2><p id="4f07" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">æœ‰æ—¶ twitter å“åº”åŒ…å« HTML æ ‡ç­¾ï¼Œæˆ‘ä»¬éœ€è¦åˆ é™¤å®ƒã€‚</p><p id="70b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<code class="fe np nq nr nh b"><a class="ae me" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank">Beautifulsoup</a></code> <a class="ae me" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank">åŒ…</a>ã€‚</p><p id="4a05" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœæ²¡æœ‰ HTML æ ‡ç­¾ï¼Œé‚£ä¹ˆå®ƒå°†è¿”å›ç›¸åŒçš„æ–‡æœ¬ã€‚</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="68c8" class="mg lc iq nh b gy nl nm l nn no">tweet = BeautifulSoup(tweet).get_text()</span><span id="0d7e" class="mg lc iq nh b gy ns nm l nn no">#output<br/>'bayer leverkusen goalkeeeeper bernd leno will not be #going to napoli. his agent uli ferber to bild: "I can confirm that there were negotiations with napoli, which we have broken off. napoli is not an option." Atletico madrid and Arsenal are the other strong rumours. #b04 #afc'</span></pre><p id="0a74" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å°†ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…è¦åˆ é™¤æˆ–è¦æ›¿æ¢çš„è¡¨è¾¾å¼ã€‚ä¸ºæ­¤ï¼Œå°†ä½¿ç”¨<code class="fe np nq nr nh b"><a class="ae me" href="https://docs.python.org/3/library/re.html" rel="noopener ugc nofollow" target="_blank">re</a></code> <a class="ae me" href="https://docs.python.org/3/library/re.html" rel="noopener ugc nofollow" target="_blank">åŒ…</a>ã€‚</p><h2 id="40db" class="mg lc iq bd ld mh mi dn lh mj mk dp ll jy ml mm lp kc mn mo lt kg mp mq lx mr bi translated">ç§»é™¤æ ‡ç­¾</h2><p id="e81c" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">Regex <code class="fe np nq nr nh b">@[A-Za-z0-9]+</code>ä»£è¡¨æåŠæ¬¡æ•°ï¼Œ<code class="fe np nq nr nh b">#[A-Za-z0-9]+</code>ä»£è¡¨æ ‡ç­¾ã€‚æˆ‘ä»¬å°†ç”¨ç©ºæ ¼æ›¿æ¢åŒ¹é…è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„æ¯ä¸ªå•è¯ã€‚</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="7d23" class="mg lc iq nh b gy nl nm l nn no">tweet = ' '.join(re.sub("(@[A-Za-z0-9]+)|(#[A-Za-z0-9]+)", " ", tweet).split())</span><span id="268f" class="mg lc iq nh b gy ns nm l nn no">#output<br/>'bayer leverkusen goalkeeeeper bernd leno will not be to napoli. his agent uli ferber to bild: "I can confirm that there were negotiations with napoli, which we have broken off. napoli is not an option." Atletico madrid and Arsenal are the other strong rumours.'</span></pre><h2 id="f0d8" class="mg lc iq bd ld mh mi dn lh mj mk dp ll jy ml mm lp kc mn mo lt kg mp mq lx mr bi translated">åˆ é™¤ URL</h2><p id="dafc" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">Regex <code class="fe np nq nr nh b">\w+:\/\/\S+</code>åŒ¹é…æ‰€æœ‰ä»¥ http://æˆ– https://å¼€å¤´å¹¶ç”¨ç©ºæ ¼æ›¿æ¢çš„ URLã€‚</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="7f5f" class="mg lc iq nh b gy nl nm l nn no">tweet = ' '.join(re.sub("(\w+:\/\/\S+)", " ", tweet).split())</span><span id="9e8d" class="mg lc iq nh b gy ns nm l nn no">#output<br/>'bayer leverkusen goalkeeeeper bernd leno will not be to napoli. his agent uli ferber to bild: "I can confirm that there were negotiations with napoli, which we have broken off. napoli is not an option." Atletico madrid and Arsenal are the other strong rumours.'</span></pre><h2 id="7794" class="mg lc iq bd ld mh mi dn lh mj mk dp ll jy ml mm lp kc mn mo lt kg mp mq lx mr bi translated">åˆ é™¤æ ‡ç‚¹ç¬¦å·</h2><p id="f804" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">ç”¨ç©ºæ ¼æ›¿æ¢æ‰€æœ‰æ ‡ç‚¹ç¬¦å·ï¼Œå¦‚<code class="fe np nq nr nh b">.,!?:;-=</code>ã€‚</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="0b88" class="mg lc iq nh b gy nl nm l nn no">tweet = ' '.join(re.sub("[\.\,\!\?\:\;\-\=]", " ", tweet).split())</span><span id="6d86" class="mg lc iq nh b gy ns nm l nn no">#output <br/>'bayer leverkusen goalkeeeeper bernd leno will not be napoli his agent uli ferber to bild "I can confirm that there were negotiations with napoli which we have broken off napoli is not an option " Atletico madrid and Arsenal are the other strong rumours'</span></pre><h2 id="43a9" class="mg lc iq bd ld mh mi dn lh mj mk dp ll jy ml mm lp kc mn mo lt kg mp mq lx mr bi translated">å°å†™å­—æ¯ç›˜</h2><p id="e416" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">ä¸ºäº†é¿å…å¤§å°å†™æ•æ„Ÿé—®é¢˜</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="b1fb" class="mg lc iq nh b gy nl nm l nn no">tweet = tweet.lower()</span><span id="ec36" class="mg lc iq nh b gy ns nm l nn no">#output<br/>'bayer leverkusen goalkeeeeper bernd leno will not be napoli his agent uli ferber to bild "i can confirm that there were negotiations with napoli which we have broken off napoli is not an option " atletico madrid and arsenal are the other strong rumours'</span></pre><h2 id="25f9" class="mg lc iq bd ld mh mi dn lh mj mk dp ll jy ml mm lp kc mn mo lt kg mp mq lx mr bi translated">æ›¿æ¢æ”¶ç¼©</h2><p id="b2ab" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">å»æ‰ç¼©å†™ï¼Œç¿»è¯‘æˆåˆé€‚çš„ä¿šè¯­ã€‚æ²¡æœ‰é€šç”¨çš„åˆ—è¡¨æ¥ä»£æ›¿ç¼©å†™ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ºäº†è‡ªå·±çš„ç›®çš„åˆ¶ä½œäº†è¿™ä¸ªåˆ—è¡¨ã€‚</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="152b" class="mg lc iq nh b gy nl nm l nn no">CONTRACTIONS = {"mayn't":"may not", "may've":"may have",......}</span><span id="1d88" class="mg lc iq nh b gy ns nm l nn no">tweet = tweet.replace("â€™","'")<br/>words = tweet.split()<br/>reformed = [CONTRACTIONS[word] if word in CONTRACTIONS else word for word in words]<br/>tweet = " ".join(reformed)</span><span id="0f8f" class="mg lc iq nh b gy ns nm l nn no">#input<br/>'I maynâ€™t like you.'</span><span id="1148" class="mg lc iq nh b gy ns nm l nn no">#output<br/>'I may not like you.'</span></pre><h2 id="6db8" class="mg lc iq bd ld mh mi dn lh mj mk dp ll jy ml mm lp kc mn mo lt kg mp mq lx mr bi translated">ä¿®å¤æ‹¼å†™é”™è¯¯çš„å•è¯</h2><p id="6a7b" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å®é™…ä¸Šå¹¶æ²¡æœ‰æ„å»ºä»»ä½•å¤æ‚çš„å‡½æ•°æ¥çº æ­£æ‹¼å†™é”™è¯¯çš„å•è¯ï¼Œè€Œåªæ˜¯æ£€æŸ¥æ¯ä¸ªå­—ç¬¦åœ¨æ¯ä¸ªå•è¯ä¸­å‡ºç°çš„æ¬¡æ•°æ˜¯å¦ä¸è¶…è¿‡ 2 æ¬¡ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸åŸºæœ¬çš„æ‹¼å†™é”™è¯¯æ£€æŸ¥ã€‚</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="2fa2" class="mg lc iq nh b gy nl nm l nn no">tweet = ''.join(''.join(s)[:2] for _, s in itertools.groupby(tweet))</span><span id="61cb" class="mg lc iq nh b gy ns nm l nn no">#output<br/>'bayer leverkusen goalkeeper bernd leno will not be napoli his agent uli ferber to bild "i can confirm that there were negotiations with napoli which we have broken off napoli is not an option " atletico madrid and arsenal are the other strong rumours'</span></pre><h2 id="78fb" class="mg lc iq bd ld mh mi dn lh mj mk dp ll jy ml mm lp kc mn mo lt kg mp mq lx mr bi translated">æ›¿æ¢è¡¨æƒ…ç¬¦å·æˆ–è¡¨æƒ…ç¬¦å·</h2><p id="c3d3" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">ç”±äºè¡¨æƒ…ç¬¦å·å’Œè¡¨æƒ…ç¬¦å·åœ¨è¡¨è¾¾æƒ…æ„Ÿæ–¹é¢å‘æŒ¥ç€é‡è¦ä½œç”¨ï¼Œæˆ‘ä»¬éœ€è¦ç”¨å®ƒä»¬åœ¨ç®€å•è‹±è¯­ä¸­æ‰€ä»£è¡¨çš„è¡¨è¾¾æ–¹å¼æ¥å–ä»£å®ƒä»¬ã€‚</p><p id="0d70" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¯¹äºè¡¨æƒ…ç¬¦å·ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<code class="fe np nq nr nh b">emoji</code>åŒ…ï¼Œå¯¹äºè¡¨æƒ…ç¬¦å·ï¼Œæˆ‘ä»¬å°†å»ºç«‹è‡ªå·±çš„å­—å…¸ã€‚</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="4d12" class="mg lc iq nh b gy nl nm l nn no">SMILEYS = {":â€‘(":"sad", ":â€‘)":"smiley", ....}</span><span id="1209" class="mg lc iq nh b gy ns nm l nn no">words = tweet.split()<br/>reformed = [SMILEY[word] if word in SMILEY else word for word in words]<br/>tweet = " ".join(reformed)</span><span id="6316" class="mg lc iq nh b gy ns nm l nn no">#input <br/>'I am :-('</span><span id="1e98" class="mg lc iq nh b gy ns nm l nn no">#output<br/>'I am sad' </span></pre><h2 id="52ef" class="mg lc iq bd ld mh mi dn lh mj mk dp ll jy ml mm lp kc mn mo lt kg mp mq lx mr bi translated">è¡¨æƒ…ç¬¦å·</h2><p id="be35" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">è¡¨æƒ…åŒ…è¿”å›ç»™å®šè¡¨æƒ…çš„å€¼ä¸º<code class="fe np nq nr nh b">:flushed_face:</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä»ç»™å®šçš„è¾“å‡ºä¸­åˆ é™¤<code class="fe np nq nr nh b">:</code>ã€‚</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="506d" class="mg lc iq nh b gy nl nm l nn no">tweet = emoji.demojize(tweet)<br/>tweet = tweet.replace(":"," ")<br/>tweet = ' '.join(tweet.split())</span><span id="a908" class="mg lc iq nh b gy ns nm l nn no">#input<br/>'He is ğŸ˜³'</span><span id="bc2f" class="mg lc iq nh b gy ns nm l nn no">#output<br/>'He is flushed_face'</span></pre><p id="0adc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‰€ä»¥ï¼Œæˆ‘ä»¬å·²ç»æ¸…ç†äº†æˆ‘ä»¬çš„æ•°æ®ã€‚</p><h1 id="da99" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">ä¸ºä»€ä¹ˆä¸ç”¨ NLTK åœç”¨è¯ï¼Ÿ</h1><p id="c3cf" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">æ¸…é™¤æ•°æ®æ—¶ï¼Œåˆ é™¤åœç”¨è¯æ˜¯ä¸€ç§æœ‰æ•ˆçš„æ–¹æ³•ã€‚å®ƒå»æ‰äº†æ‰€æœ‰æ— å…³ç´§è¦çš„è¯ï¼Œé€šå¸¸æ˜¯æ¯ä¸ªå¥å­ä¸­æœ€å¸¸ç”¨çš„è¯ã€‚è·å– NLTK åº“ä¸­å­˜åœ¨çš„æ‰€æœ‰åœç”¨è¯</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="96a4" class="mg lc iq nh b gy nl nm l nn no">from nltk.corpus import stopwords<br/>stop_words = stopwords.words('english')<br/>print(stop_words)</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nt"><img src="../Images/22565d0a334fc36444425c2635c16a40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dJlJlbzLFJDwBxzpJ8Gtrw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">NLTK stop words</figcaption></figure><p id="22c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœä½¿ç”¨ NLTK åœç”¨è¯ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„è´Ÿé¢ç¼©å†™éƒ½å°†è¢«ç§»é™¤ï¼Œè¿™åœ¨æƒ…æ„Ÿåˆ†æä¸­èµ·ç€é‡è¦çš„ä½œç”¨ã€‚</p><h1 id="ee66" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">æ ¼å¼åŒ–æ•°æ®é›†</h1><p id="feee" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">éœ€è¦æ ¼å¼åŒ– fastText ç›‘ç£å­¦ä¹ æ‰€éœ€çš„æ•°æ®ã€‚</p><p id="fd0a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae me" href="https://github.com/facebookresearch/fastText/blob/master/README.md#text-classification" rel="noopener ugc nofollow" target="_blank"> FastText </a>å‡è®¾æ ‡ç­¾æ˜¯ä»¥å­—ç¬¦ä¸²<code class="fe np nq nr nh b">__label__</code>ä¸ºå‰ç¼€çš„å•è¯ã€‚</p><p id="d23b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">fastText æ¨¡å‹çš„è¾“å…¥åº”è¯¥å¦‚ä¸‹æ‰€ç¤º</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="b5d9" class="mg lc iq nh b gy nl nm l nn no">__label__NEUTRAL _d i 'm just fine i have your fanbase angry over<br/>__label__POSITIVE what a weekend of football results &amp; hearts</span></pre><p id="0c58" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æ ¼å¼åŒ–æ•°æ®</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="31e0" class="mg lc iq nh b gy nl nm l nn no">def transform_instance(row):<br/>    cur_row = []<br/>    #Prefix the index-ed label with __label__<br/>    label = "__label__" + row[4]  <br/>    cur_row.append(label)<br/>    cur_row.extend(nltk.word_tokenize(tweet_cleaning_for_sentiment_analysis(row[2].lower())))<br/>    return cur_row</span><span id="c6f3" class="mg lc iq nh b gy ns nm l nn no">def preprocess(input_file, output_file):<br/>    i=0<br/>    with open(output_file, 'w') as csvoutfile:<br/>        csv_writer = csv.writer(csvoutfile, delimiter=' ', lineterminator='\n')<br/>        with open(input_file, 'r', newline='', encoding='latin1') as csvinfile: # encoding='latin1'<br/>            csv_reader = csv.reader(csvinfile, delimiter=',', quotechar='"')<br/>            for row in csv_reader:<br/>                if row[4]!="MIXED" and row[4].upper() in ['POSITIVE','NEGATIVE','NEUTRAL'] and row[2]!='':<br/>                    row_output = transform_instance(row)<br/>                    csv_writer.writerow(row_output )<br/>                    # print(row_output)<br/>                i=i+1<br/>                if i%10000 ==0:<br/>                    print(i)</span></pre><p id="3e63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™é‡Œï¼Œæˆ‘ä»¬å¿½ç•¥æ ‡ç­¾ä¸æ˜¯<code class="fe np nq nr nh b">Positive, Negative and neutral</code>çš„æ¨æ–‡ã€‚</p><p id="5030" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe np nq nr nh b">nltk.<a class="ae me" href="https://www.nltk.org/api/nltk.tokenize.html#nltk.tokenize.punkt.PunktLanguageVars.word_tokenize" rel="noopener ugc nofollow" target="_blank">word_tokenize</a>()</code>å°†å­—ç¬¦ä¸²è½¬æ¢æˆç‹¬ç«‹çš„å•è¯ã€‚</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="29dc" class="mg lc iq nh b gy nl nm l nn no">nltk.word_tokenize('hello world!')</span><span id="5328" class="mg lc iq nh b gy ns nm l nn no">#output<br/>['hello', 'world', '!']</span></pre><h1 id="896f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">å¯¹æ•°æ®é›†è¿›è¡Œä¸Šé‡‡æ ·</h1><p id="a7b2" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">åœ¨æˆ‘ä»¬çš„æ•°æ®é›†ä¸­ï¼Œæ•°æ®å¹¶æ²¡æœ‰è¢«å¹³å‡åˆ’åˆ†åˆ°ä¸åŒçš„æ ‡ç­¾ä¸­ã€‚å®ƒåŒ…å«ä¸­æ€§æ ‡ç­¾ä¸­å¤§çº¦ 72%çš„æ•°æ®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„æ¨¡å‹å¾€å¾€ä¼šè¢«å¤§ç­æ·¹æ²¡ï¼Œè€Œå¿½ç•¥å°ç­ã€‚</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="2ae4" class="mg lc iq nh b gy nl nm l nn no">import pandas as pd<br/>import seaborn as sns</span><span id="3dde" class="mg lc iq nh b gy ns nm l nn no">df = pd.read_csv('betsentiment-EN-tweets-sentiment-teams.csv',encoding='latin1')</span><span id="d3fd" class="mg lc iq nh b gy ns nm l nn no">df['sentiment'].value_counts(normalize=True)*100</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/c600787c67546ce30b613e1da942c53a.png" data-original-src="https://miro.medium.com/v2/resize:fit:610/format:webp/1*YbRlxnt-5yj1_vb8NZoFkQ.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">percentage of tweets for each labels</figcaption></figure><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="26b9" class="mg lc iq nh b gy nl nm l nn no">sns.countplot(x="sentiment", data=df)</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/3ca937d09c41a326a315a3b5b8d28e96.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*2j7zrySOG2l-EfC7XBPQlg.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">countplot for sentiment labels</figcaption></figure><p id="1845" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç”±äºä¸­æ€§ç±»ç”±æ•°æ®é›†çš„å¤§éƒ¨åˆ†ç»„æˆï¼Œè¯¥æ¨¡å‹å°†å§‹ç»ˆå°è¯•é¢„æµ‹ä¸­æ€§æ ‡ç­¾ï¼Œå› ä¸ºå®ƒå°†ä¿è¯ 72%çš„å‡†ç¡®æ€§ã€‚ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦æ¯ä¸ªæ ‡ç­¾æœ‰ç›¸åŒæ•°é‡çš„æ¨æ–‡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘ minor ç±»æ·»åŠ æ–°çš„ tweets æ¥å®ç°è¿™ä¸€ç‚¹ã€‚å‘å°‘æ•°æ—è£”æ ‡ç­¾æ·»åŠ æ–°æ¨æ–‡çš„è¿‡ç¨‹è¢«ç§°ä¸ºä¸Šé‡‡æ ·ã€‚</p><p id="66ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å°†é€šè¿‡ä¸€æ¬¡åˆä¸€æ¬¡åœ°é‡å¤ç»™å®šæ ‡ç­¾ä¸­çš„ tweet æ¥å®ç°ä¸Šé‡‡æ ·ï¼Œç›´åˆ°æ¯ä¸ªæ ‡ç­¾ä¸­ tweet çš„æ•°é‡ç›¸ç­‰ã€‚</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="bc48" class="mg lc iq nh b gy nl nm l nn no">def upsampling(input_file, output_file, ratio_upsampling=1):<br/>    # Create a file with equal number of tweets for each label<br/>    #    input_file: path to file<br/>    #    output_file: path to the output file<br/>    #    ratio_upsampling: ratio of each minority classes vs majority one. 1 mean there will be as much of each class than there is for the majority class <br/>    <br/>    i=0<br/>    counts = {}<br/>    dict_data_by_label = {}</span><span id="aab6" class="mg lc iq nh b gy ns nm l nn no"># GET LABEL LIST AND GET DATA PER LABEL<br/>    with open(input_file, 'r', newline='') as csvinfile: <br/>        csv_reader = csv.reader(csvinfile, delimiter=',', quotechar='"')<br/>        for row in csv_reader:<br/>            counts[row[0].split()[0]] = counts.get(row[0].split()[0], 0) + 1<br/>            if not row[0].split()[0] in dict_data_by_label:<br/>                dict_data_by_label[row[0].split()[0]]=[row[0]]<br/>            else:<br/>                dict_data_by_label[row[0].split()[0]].append(row[0])<br/>            i=i+1<br/>            if i%10000 ==0:<br/>                print("read" + str(i))</span><span id="efd9" class="mg lc iq nh b gy ns nm l nn no"># FIND MAJORITY CLASS<br/>    majority_class=""<br/>    count_majority_class=0<br/>    for item in dict_data_by_label:<br/>        if len(dict_data_by_label[item])&gt;count_majority_class:<br/>            majority_class= item<br/>            count_majority_class=len(dict_data_by_label[item])  <br/>    <br/>    # UPSAMPLE MINORITY CLASS<br/>    data_upsampled=[]<br/>    for item in dict_data_by_label:<br/>        data_upsampled.extend(dict_data_by_label[item])<br/>        if item != majority_class:<br/>            items_added=0<br/>            items_to_add = count_majority_class - len(dict_data_by_label[item])<br/>            while items_added&lt;items_to_add:<br/>                data_upsampled.extend(dict_data_by_label[item][:max(0,min(items_to_add-items_added,len(dict_data_by_label[item])))])<br/>                items_added = items_added + max(0,min(items_to_add-items_added,len(dict_data_by_label[item])))</span><span id="379d" class="mg lc iq nh b gy ns nm l nn no"># WRITE ALL<br/>    i=0</span><span id="c0df" class="mg lc iq nh b gy ns nm l nn no">with open(output_file, 'w') as txtoutfile:<br/>        for row in data_upsampled:<br/>            txtoutfile.write(row+ '\n' )<br/>            i=i+1<br/>            if i%10000 ==0:<br/>                print("writer" + str(i))</span></pre><p id="6ec0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è‡³äºé‡å¤æ¨æ–‡ï¼Œä¸€æ¬¡åˆä¸€æ¬¡ï¼Œå¯èƒ½ä¼šå¯¼è‡´æˆ‘ä»¬çš„æ¨¡å‹è¿‡åº¦é€‚åº”æˆ‘ä»¬çš„æ•°æ®é›†ï¼Œä½†ç”±äºæˆ‘ä»¬çš„æ•°æ®é›†å¾ˆå¤§ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚</p><h1 id="954c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">åŸ¹å…»</h1><p id="6188" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">å°è¯•ç”¨<a class="ae me" href="https://github.com/facebookresearch/fastText/tree/master/python#building-fasttext" rel="noopener ugc nofollow" target="_blank"> git å…‹éš†</a>å®‰è£… fastTextï¼Œè€Œä¸æ˜¯ä½¿ç”¨ pipã€‚</p><p id="35f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å°†ä½¿ç”¨ç›‘ç£è®­ç»ƒæ³•ã€‚</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="0963" class="mg lc iq nh b gy nl nm l nn no">hyper_params = {"lr": 0.01,<br/>                "epoch": 20,<br/>                "wordNgrams": 2,<br/>                "dim": 20}     <br/>                               <br/>        print(str(datetime.datetime.now()) + ' START=&gt;' + str(hyper_params) )</span><span id="50bc" class="mg lc iq nh b gy ns nm l nn no"># Train the model.<br/>        model = fastText.train_supervised(input=training_data_path, **hyper_params)<br/>        print("Model trained with the hyperparameter \n {}".format(hyper_params))</span></pre><p id="82e1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe np nq nr nh b">lr</code>ä»£è¡¨<code class="fe np nq nr nh b">learning rate</code>ï¼Œ<code class="fe np nq nr nh b">epoch</code>ä»£è¡¨<code class="fe np nq nr nh b">number of epoch</code>ï¼Œ<code class="fe np nq nr nh b">wordNgrams</code>ä»£è¡¨<code class="fe np nq nr nh b">max length of word Ngram</code>ï¼Œ<code class="fe np nq nr nh b">dim</code>ä»£è¡¨<code class="fe np nq nr nh b">size of word vectors</code>ã€‚</p><p id="eb06" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe np nq nr nh b">train_supervised</code>æ˜¯ç”¨äºä½¿ç”¨ç›‘ç£å­¦ä¹ æ¥è®­ç»ƒæ¨¡å‹çš„å‡½æ•°ã€‚</p><h1 id="ed0a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">è¯„ä»·</h1><p id="453a" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">æˆ‘ä»¬éœ€è¦è¯„ä¼°è¿™ä¸ªæ¨¡å‹ä»¥ç¡®å®šå®ƒçš„å‡†ç¡®æ€§ã€‚</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="90f3" class="mg lc iq nh b gy nl nm l nn no">model_acc_training_set = model.test(training_data_path)<br/>model_acc_validation_set = model.test(validation_data_path)<br/>        <br/># DISPLAY ACCURACY OF TRAINED MODEL<br/>text_line = str(hyper_params) + ",accuracy:" + str(model_acc_training_set[1])  + ",validation:" + str(model_acc_validation_set[1]) + '\n' </span><span id="7ba6" class="mg lc iq nh b gy ns nm l nn no">print(text_line)</span></pre><p id="5ab2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å°†åœ¨è®­ç»ƒå’ŒéªŒè¯æ•°æ®é›†ä¸Šè¯„ä¼°æˆ‘ä»¬çš„æ¨¡å‹ã€‚</p><p id="669c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe np nq nr nh b">test</code>è¿”å›æ¨¡å‹çš„ç²¾åº¦å’Œå¬å›ç‡ï¼Œè€Œä¸æ˜¯ç²¾åº¦ã€‚ä½†æ˜¯åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œä¸¤ä¸ªå€¼å‡ ä¹ç›¸åŒï¼Œæ‰€ä»¥æˆ‘ä»¬åªä½¿ç”¨ç²¾åº¦ã€‚</p><p id="e3bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ€»çš„æ¥è¯´ï¼Œè¯¥æ¨¡å‹å¯¹è®­ç»ƒæ•°æ®ç»™å‡ºäº† 97.5%çš„å‡†ç¡®åº¦ï¼Œå¯¹éªŒè¯æ•°æ®ç»™å‡ºäº† 79.7%çš„å‡†ç¡®åº¦ã€‚</p><h1 id="1b7c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">é¢„æµ‹</h1><p id="1ca1" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">æˆ‘ä»¬å°†é¢„æµ‹ä¼ é€’ç»™æˆ‘ä»¬è®­ç»ƒå¥½çš„æ¨¡å‹çš„æ–‡æœ¬çš„æƒ…æ„Ÿã€‚</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="21cc" class="mg lc iq nh b gy nl nm l nn no">model.predict(['why not'],k=3)<br/>model.predict(['this player is so bad'],k=1)</span></pre><p id="dc08" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe np nq nr nh b">predict</code>è®©æˆ‘ä»¬é¢„æµ‹ä¼ é€’çš„å­—ç¬¦ä¸²çš„æƒ…æ„Ÿï¼Œè€Œ<code class="fe np nq nr nh b">k</code>ä»£è¡¨è¿”å›çš„å¸¦æœ‰ç½®ä¿¡åº¦å¾—åˆ†çš„æ ‡ç­¾çš„æ•°é‡ã€‚</p><h1 id="eb3e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">é‡åŒ–æ¨¡å‹</h1><p id="0798" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">é‡åŒ–æœ‰åŠ©äºæˆ‘ä»¬é™ä½æ¨¡å‹çš„è§„æ¨¡ã€‚</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="3460" class="mg lc iq nh b gy nl nm l nn no">model.quantize(input=training_data_path, qnorm=True, retrain=True, cutoff=100000)</span></pre><h1 id="39d7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">ä¿å­˜æ¨¡å‹</h1><p id="e2c9" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">æˆ‘ä»¬å¯ä»¥ä¿å­˜è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œç„¶åéšæ—¶ä½¿ç”¨ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½è®­ç»ƒå®ƒã€‚</p><pre class="km kn ko kp gt ng nh ni nj aw nk bi"><span id="d486" class="mg lc iq nh b gy nl nm l nn no">model.save_model(os.path.join(model_path,model_name + ".ftz"))</span></pre><h1 id="945a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">ç»“è®º</h1><p id="c2f3" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">æˆ‘ä»¬å­¦ä¹ å¦‚ä½•æ¸…ç†æ•°æ®ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™è®­ç»ƒæ¨¡å‹æ¥é¢„æµ‹æ¨æ–‡çš„æƒ…ç»ªã€‚æˆ‘ä»¬è¿˜å­¦ä¹ ä½¿ç”¨ fastText å®ç°æƒ…æ„Ÿåˆ†ææ¨¡å‹ã€‚</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nw nx l"/></div></figure></div></div>    
</body>
</html>