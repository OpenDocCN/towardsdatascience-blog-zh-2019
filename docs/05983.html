<html>
<head>
<title>Basics of Data Science Product Management: The ML Workflow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据科学产品管理基础:ML 工作流</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/basics-of-ai-product-management-orchestrating-the-ml-workflow-3601e0ff6baa?source=collection_archive---------10-----------------------#2019-08-31">https://towardsdatascience.com/basics-of-ai-product-management-orchestrating-the-ml-workflow-3601e0ff6baa?source=collection_archive---------10-----------------------#2019-08-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9ea2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">ML 理论难，应用更难！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b14d0a99ad2c71e4917e38f555e062bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jtXRelUkE0fAqTVwF6fVgw.jpeg"/></div></div></figure><p id="f916" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">过去几年，我一直在将数据科学应用于商业的不同方面。一些用例是内部机器学习(ML)工具、分析报告、数据管道、预测 API 以及最近的端到端 ML 产品。</p><p id="83a6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我有过成功和失败的 ML 产品的公平分享。甚至有关于<a class="ae lq" href="https://www.lexalytics.com/lexablog/stories-ai-failure-avoid-ai-fails-2019" rel="noopener ugc nofollow" target="_blank"> ML 产品恐怖故事</a>的报道，其中开发的解决方案最终未能解决它们应该解决的问题。在很大程度上，可以通过适当地管理 ML 产品来填补这一空白，以确保它最终对用户真正有用。</p><p id="92df" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我很快了解到，管理 ML 产品很困难，因为机器学习(ML)工作流程中的不同步骤涉及到复杂性和不确定性(列举如下):</p><ol class=""><li id="e58d" class="lr ls it kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated"><strong class="kw iu">相关文献综述(及其他资源)</strong></li><li id="21cc" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><strong class="kw iu">数据采集&amp;处理</strong></li><li id="87e9" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><strong class="kw iu">模型训练，实验，&amp;评估</strong></li><li id="b916" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><strong class="kw iu">部署</strong></li></ol><p id="f518" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">考虑到 ML 工作流程中的困难和我们的资源限制(例如，时间、人员、存储和计算)，我们如何确保我们的每个步骤的方法将最大化 ML 模型对整个 ML 产品的价值贡献？</p><p id="95d6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这篇博文中，我的目标是给出这些步骤的概述，同时举例说明一些可预见的挑战和我发现在优化 ML 工作流中有用的框架。请注意，在给定可用资源的情况下，当 ML 工作流创建的 ML 模型对整个产品的附加值最高时，我们认为 ML 工作流是优化的。</p><p id="ebd8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">此外，这篇文章是为至少对机器学习概念、工具和工作流有高度理解的读者准备的；但是，如果您不熟悉我提到的一些概念，请不要担心。我经常链接到解释这些概念的文章，即使对那些我不理解的文章，快速的谷歌搜索也能给出高水平的理解。</p><p id="ff59" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们开始吧！</p><h1 id="3eec" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">1.相关文献(和其他资源)的回顾</h1><p id="2a4d" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">ML 工作流程的相关文献回顾(RRL)步骤包括阅读现有方法、数据集和其他可能与我们将用于模型的方法相关的资源。这为我们的方法提供了一组可能的设计选择。这些设计选择的例子有</p><ol class=""><li id="1e5a" class="lr ls it kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated">ML 算法</li><li id="aee5" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">神经网络架构</li><li id="ae74" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">超参数值(例如隐藏层数)</li><li id="e673" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">优化者</li><li id="3afb" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">特征工程</li><li id="9862" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">自然语言处理中的文本预处理方法</li><li id="0cb0" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">汇集方法</li><li id="461f" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">数据集</li><li id="d617" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">用于部署的云服务</li></ol><p id="07a8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">大多数设计选择取自相关文献，但也有可能一些组件是“从零开始”创建的，这通常是因为项目的某些方面可能与相关文献中的任何内容都不同。例如，如果被训练的模型旨在根据一个人的在线购物来预测其收入，并且没有关于该主题的论文/博客发表，那么您的团队可能必须生成他们自己的关于特征工程的设计选择。</p><p id="c677" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">另一个相关的产品管理(PM)问题是在开始模型开发之前决定给 RRL 分配多少时间。以我的经验来看，花 1-2 周的时间关注 RRL 是合适的。在某些情况下，让一组成员专注于 RRL，而另一组成员专注于进行基于 RRL 发现的实验也是有意义的。后者对于更大的团队更可行。</p><p id="e2db" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">RRL 还应该告知我们可供我们使用的资源。从这里开始，我们必须了解这些可以在多大程度上减少工作量，甚至消除我们工作流程中某些部分的需要。</p><p id="97a2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">例如，预训练模型的存在可能会加快训练时间，同时需要更少的训练数据，这意味着我们可以分配更少的时间来进行模型训练和数据集生成(在监督模型的情况下)。在语义搜索的上下文中，我们甚至可以通过使用由预训练的 BERT 模型生成的特征<a class="ae lq" href="https://github.com/hanxiao/bert-as-service/blob/master/docs/tutorial/simple-search.rst" rel="noopener ugc nofollow" target="_blank">来完全消除模型训练的需要。</a></p><p id="35d0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于带标签的数据集形式的可用资源，确定标签是否与我们希望模型实现的目标一致对我们来说很重要。例如，如果我们想要训练一个模型，它可以在没有足够大的客户服务数据集的情况下识别客户服务电子邮件的情绪，那么<a class="ae lq" href="https://www.kaggle.com/iarunava/imdb-movie-reviews-dataset" rel="noopener ugc nofollow" target="_blank"> IMDB 评论数据集</a>是否与训练该模型相关？我们可以假设这个问题的答案，但如果我们能找到一种方法来测试在 IMDB 评论上训练的模型是否能正确检测客户服务电子邮件上下文中的情绪，那就更好了。我们将在下一节更详细地讨论数据。</p><p id="0e9e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">总之，RRL 步骤告诉我们现有的方法和可用的资源，这将有助于设计和规划我们的 ML 工作流程。</p><h1 id="4e9f" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">2.数据收集和处理</h1><p id="d818" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">这一步包括获取数据并将其处理成一种状态，在这种状态下，可以将数据输入 ML 模型进行训练或评估。此步骤的方法主要取决于七个因素:</p><ol class=""><li id="0c2f" class="lr ls it kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated">数据的大小</li><li id="1203" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">运行查询所需的计算能力</li><li id="0920" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">可利用的资源</li><li id="cedd" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">数据库文档的质量</li><li id="109f" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">数据的清洁度</li><li id="73b1" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">数据源</li><li id="35e0" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">地面实况数据的可用性</li></ol><p id="afe9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从上面可以看出，数据的大小(1)和所需的计算能力(2)会影响提取和处理数据所需的资源量。特别是当可用资源(3)有限时(例如，来自内部数据中心的固定资源)，这意味着对于具有复杂查询的大型数据集，数据拉取更慢且更昂贵，这证明需要额外的查询优化工作和数据采样。在 hive 查询的情况下，这可能意味着一次在几个分区上运行优化的查询来进行初始数据提取。此外，值得注意的是，使用云计算平台(例如 GCP 和 AWS)可以缓解存储和计算方面的资源稀缺问题，因为这些平台允许您“按需”使用资源，而无需遵守物理数据中心的限制。</p><p id="4d3b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">虽然数据的整洁性(5)可能会增加数据处理的资源需求，但数据库文档的质量(4)不会影响所需的资源。但是，这两个因素都会影响编写从必要的数据库中提取数据所需的查询所需的时间。一个巨大的瓶颈通常来自于不知道哪些表包含您需要的确切字段。一个记录良好的数据库会使找到正确的字段变得容易，而一个记录不良的数据库会大大减慢你的工作流程。类似地，不干净的数据会降低您的速度，因为需要额外的(通常非常繁琐的)步骤来将字段转换成处理所需的格式。</p><p id="681d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你的数据来源(6)也有相关的风险。在数据源来自公共 API 或网站(通过 web crawler)的情况下，还存在可用性、可维护性和合法性的问题。就 API 而言，曾经“免费”使用的东西很有可能以后需要通过“订阅”按月付费。另一个问题是，当这些资源的所有者突然对您在一段时间内可以获取的数据量施加速率限制时(例如，每天 5 次请求)。</p><p id="6990" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于被爬取的网站，维护成为一个大问题，因为网络爬虫通常对被爬取的网站中的任何变化非常敏感。此外，如果被抓取的网站基于其<em class="nc">条款&amp;条件</em>明确禁止抓取，网络抓取可能会有法律问题，所以在进行任何网络抓取之前最好先检查一下。由于这些原因，当你的 ML 产品需要从公共 API 和网站获取时，警惕这些风险是很重要的。尽早了解这些情况会让你做好准备，为事情变糟做好潜在的替代方案。</p><p id="afbf" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，用于模型评估的地面真实数据(7)的可用性将决定我们是否必须设计一种方法来标记数据。通常，标记数据有两个可能的来源:1)外部方，2)用户。根据建模任务的难度，来自外部方的“高质量”标签数据的成本会有所不同。对于技术任务(例如<a class="ae lq" href="https://www.ncbi.nlm.nih.gov/pubmed/29643524" rel="noopener ugc nofollow" target="_blank">医学期刊</a>的信息提取)，只有领域专家用户能够给出高质量的标签。对于简单的任务(例如<a class="ae lq" href="https://www.kaggle.com/c/dogs-vs-cats" rel="noopener ugc nofollow" target="_blank">狗对猫的图像分类</a>)，领域专家不需要有高质量的标签。那么我们为什么不直接让领域专家用户一直标记数据呢？因为它们通常更贵(想象一下按小时付费给医生来标记数据)。换句话说，随着建模任务变得越来越复杂，雇人标记数据的成本也变得越来越高。</p><p id="3b67" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一个聪明的解决办法是让用户为你创建你的基本事实数据。这可以通过在 ML 产品中嵌入“标签”来实现，同时最大限度地减少摩擦，甚至将标签过程转变为增值活动。一个很好的例子是<a class="ae lq" href="https://www.facebook.com/help/tag-suggestions" rel="noopener ugc nofollow" target="_blank">脸书给用户“标记”朋友的能力，让他们知道他们在照片中。</a>通过标记您的朋友，您正在“标记”他们的图像数据集。用户受益是因为他们可以和朋友联系，而脸书受益是因为他们得到了“免费”标签的数据。大家都赢了！</p><p id="0c34" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我计划在未来的博客文章中进一步讨论将评估嵌入到你的人工智能产品中的话题。</p><h1 id="e956" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">3.模型培训、实验和评估</h1><p id="925f" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">现在我们来看 ML 工作流程中最著名的部分:实际训练模型和试验不同的方法！</p><p id="e75f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您可能读过一些文章，这些文章谈到训练模型只占数据科学家工作的 20%。这是非常准确的，但是从 PM 的角度来看，重要的是要理解要考虑的主要事情是:</p><ol class=""><li id="e82f" class="lr ls it kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated">计划的实验</li><li id="cf45" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">培训运行时间</li><li id="9b33" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">精确度定义</li><li id="58d5" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated">准确度基线</li></ol><p id="8989" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在你开始训练你的模型之前，你应该已经对基于你的团队的假设(由 RRL 步骤的发现支持)你计划运行的实验有一些想法。列出这些步骤，并根据模型的预期改进(就准确性而言)和所需的增量时间对它们进行排序。预期改进最高、所需时间最短的实验应该在最上面。</p><p id="2bb4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">此外，区分需要重新训练模型的实验和不需要重新训练的实验也很重要。例如，在模型被训练用于文本分类之后，假设输入文本的格式仍然一致，人们仍然可以试验不同的文本预处理方法。对于不需要“再训练”的实验，时间成本通常要低得多，因为训练运行时间占实验时间成本的大部分。这意味着许多非再培训实验可以被视为团队可以快速执行的“速赢”。</p><p id="8e13" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">关于非训练实验要注意的一点是，它们通常是那种你只有在已经有一些训练好的模型之后才能做的实验(例如，模型集合需要已经训练好的模型)。正因为如此，我通常把实验期的最后一段时间分配给快速的非训练实验，而训练时间较长的实验则在实验期的最开始进行。</p><p id="1129" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Training runtime (2)只是讨论一个版本的模型在数据集上训练需要多长时间。这很重要，因为训练一个模型(对于需要训练的实验)需要多长时间将决定你可以用不同版本的模型做多少次实验，给定你为你的项目承诺的时间表。</p><p id="24bb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这意味着你很可能没有足够的时间来完成你计划进行的所有实验。无论如何，应该首先进行排名较高的实验；然而，该团队也可以通过减少执行实验所需的时间来增加实验的数量。一个简单的方法是减少训练时间。</p><p id="1fc0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">那么我们如何控制训练运行时间呢？通常，这可以通过简化模型(例如，减少神经网络的层数)或减少数据集的大小(例如，从数据集中选择示例或要素的子集)来控制。我采用的一种非常有效的简单方法是从一个模型的最简单版本开始，使用最小的合理数据样本(即运行时间最快的版本)。然后，你可以逐渐增加模型的复杂性和样本量，直到你达到你的目标训练运行时间——允许你进行所有计划的实验的运行时间。跟踪模型复杂性和样本大小的每个级别的准确性和运行时间也很重要，这样您就可以利用这一点来了解与增加的复杂性和样本大小相关的时间权衡。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/af87b5a69b48ebd51ee45966aa260207.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bazV-e3xfddsxXjknClHQw.png"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">Tradeoff between Training Runtime and Sample Size + Model Complexity</figcaption></figure><p id="ab4f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">减少培训运行时间的另一种方法是升级您可以访问的硬件资源(例如 GPU 和 CPU)。幸运的是，云计算平台允许人们定制不同价位的可用资源。因为升级的成本是完全记录在案的，所以升级决策是由升级成本和培训运行时的预期加速决定的。为了充分利用这些资源，许多训练算法实现通过并行化(例如 pytorch、tensorflow、scikit-learn)来加速操作。</p><p id="6eb3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，我们必须定义模型的准确性度量(3 ),我们将使用它来评估每个实验的结果。要记住的重要一点是，准确性指标应该是模型对整个 ML 产品的价值贡献的度量。因此，你需要对你的 ML 产品试图解决的问题有一个深刻的理解，并从那里，回到模型正在执行的特定任务，并确定它帮助产品解决问题的确切方式。</p><p id="f397" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一个常见的错误是只关注准确性度量，因为这是特定任务的常用度量。事实上，确保模型的准确性度量与其对产品的价值贡献一致是非常重要的:否则，更好的执行模型不会转化为更好的产品，在这种情况下，实验将是徒劳的。</p><p id="6b0f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">例如，在<a class="ae lq" href="https://medium.com/cracking-the-data-science-interview/the-5-machine-learning-use-cases-that-optimize-your-airbnb-travel-experience-fb027a56e5a5" rel="noopener"> Airbnb </a>的情况下，主机偏好通过主机将接受预订请求的概率来建模。鉴于接受概率较高的预订首先显示给客人，这也意味着更多的预订将被接受，这将转化为 Airbnb 的收入提升。模型越精确，接受率越高，收入也越高。</p><p id="8620" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一旦价值度量被确定，团队现在需要一个基线性能(4)来决定模型是否“成功”以及成功的程度。我设定基线性能的一个框架是理解性能水平，这将使模型对 ML 产品真正“有用”。这可能是一件很难做到的事情，但它可能是有用的，因为它:1)迫使我们思考模型应该如何为用户提供价值，2)给我们一个初始的目标性能，我们可以用它来评估有用性，3)激励团队与用户进行实际的对话，以理解模型在为他们提供价值中的作用。</p><p id="e36c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从长远来看，通过运行 A/B 测试来比较不同版本的模型对实际产品价值指标(如收入、签约、订单)的影响，可以更经验性地得出有用性。Airbnb 是一家拥有数据科学文化的公司的一个很好的例子，这种文化通过 A/B 测试使用实验来评估模型。这确保了他们的模型确实在改进产品。</p><h1 id="7ca6" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">4.部署</h1><p id="7e53" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">部署是 ML 工作流中的最后一步，该方法主要取决于:1)预测是实时需要还是周期性批量需要，以及 2)延迟要求。</p><p id="a92f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果实时预测是必要的，那么模型可能会被部署为一个 API，可以通过向这个 API 发送请求来检索预测。这通常使用在单独实例(例如 AWS ec2)上运行的 flask 或 django 等应用框架或在云上运行预测脚本的 FaaS 平台(例如 AWS Lambda)来完成。</p><p id="479e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果需要以特定的频率(例如每天、每月)批量进行预测，那么定期对新数据运行预测脚本就足够了。对于这种情况，像 crontab(内置于 Linux 中)和其他自动化框架(例如 Airflow、Luigi)这样的工具就足够了。由于广泛记载的<a class="ae lq" href="https://medium.com/videoamp/what-we-learned-migrating-off-cron-to-airflow-b391841a0da4" rel="noopener">原因</a>，我更喜欢使用气流进行批量部署。</p><p id="2fd8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于延迟需求，它基本上回答了这个问题:模型需要多快才能做出预测？通常，应用程序会有服务级别协议(SLA ),将预测延迟保持在某个标准。</p><p id="8737" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">例如，当您打开中型应用程序时，他们会向您显示一个文章推荐列表，该推荐列表可能是 1)“预测的”并每天存储一次，在您打开应用程序时向您显示(批量部署)，或者 2)在您打开应用程序时“预测的”(实时部署)。自然地，第一个只需要预测 SLA 足够快，以便用户在早上打开应用程序时(例如，从每天午夜起的 5 个小时)将看到更新的列表。其次，SLA 必须更加严格，因为预测是在用户打开应用程序时发生的(例如，从打开应用程序起 1 秒钟)，用户不希望等待太久才能看到他们推荐的文章。</p><p id="37b9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从上图可以明显看出，延迟更可能是实时部署的一个问题。那么，我们如何将延迟降低到可接受的水平(SLA)，假设目前还没有达到这个水平？例如，想象一下打开应用程序后，预测需要 5 秒而不是 1 秒的 SLA。</p><p id="4ff9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这就是机器学习工程(MLE)的用武之地。MLE 涉及使用特殊技术(例如并行化)来加速部署的机器学习模型的运行时间，目标是达到设定的 SLA。ML 工程师的工作是将 5 秒预测运行时间降低到目标 1 秒预测运行时间。</p><h1 id="0782" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">结论</h1><p id="9209" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">至此，你应该对 ML 工作流程有了一个总体的了解，以及在设计每个步骤的方法时需要考虑的一些不同的事情。请务必注意，在每个冲刺阶段结束时，应与您的数据科学团队详细讨论每一步，以便在给定所有可用信息的情况下，计划的方法在任何时间点都是最佳方法。</p><p id="5ab9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">此外，我认为，在成为数据科学产品经理之前，拥有数据科学方面的全面经验具有相当大的优势。这是因为设置积压工作、确定任务优先级、估计时间表以及沟通 ML 产品如何工作和提供价值需要深入了解 ML 工作流程以及与每个步骤相关的不确定性。即使仅仅从优先化任务和制定时间表的角度来看，理解 ML 工作流也意味着了解随着项目的进展新信息的含义。</p><p id="eea7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我计划在以后的博客文章中对数据科学产品管理的其他方面进行更详细的讨论(例如，设置待办事项、区分任务优先级、估计时间表、使 ML 模型目标与产品的价值主张保持一致、将评估集成到 ML 产品中、管理 ML 的新利益相关者)。如果你对从哪些开始有任何建议，请随时评论<em class="nc">、</em>或通过<em class="nc">、</em>、<a class="ae lq" href="https://twitter.com/AND__SO" rel="noopener ugc nofollow" target="_blank">推特</a>、<a class="ae lq" href="https://www.linkedin.com/in/lorenzoampil/" rel="noopener ugc nofollow" target="_blank"> linkedin </a>或电子邮件(<em class="nc">lorenzo.ampil@gmail.com)</em>联系我。敬请期待！</p></div></div>    
</body>
</html>