<html>
<head>
<title>Build your own custom hotword detector with zero training data and $0!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">建立您自己的自定义热门词探测器零训练数据和$0！</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-your-own-custom-hotword-detector-with-zero-training-data-and-0-35adfa6b25ea?source=collection_archive---------14-----------------------#2019-08-19">https://towardsdatascience.com/build-your-own-custom-hotword-detector-with-zero-training-data-and-0-35adfa6b25ea?source=collection_archive---------14-----------------------#2019-08-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="b226" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> TLDR </strong> : <em class="ko">谷歌 TTS - &gt;噪音增强- &gt; {wav 文件} - &gt; SnowBoy - &gt; {。pmdl 型号} - &gt;树莓 Pi </em></p><p id="ab9a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">好了，又到了一年中的这个时候了。你知道<a class="ae kp" href="https://burningman.org/" rel="noopener ugc nofollow" target="_blank">沙漠里有个东西</a>。上一次，我装配了一个谷歌 AIY 视觉套件，并在<a class="ae kp" href="https://www.facebook.com/CampByteThis/" rel="noopener ugc nofollow" target="_blank">芯片上添加了<a class="ae kp" href="http://espeak.sourceforge.net/" rel="noopener ugc nofollow" target="_blank"> <em class="ko"> espeak </em> </a>和 Terra </a>，这是一群杂牌军的艺术装置，即<a class="ae kp" href="https://www.facebook.com/CampByteThis/" rel="noopener ugc nofollow" target="_blank">ÿntelligent 技术解放的 bÿte:燃烧器</a>。</p><p id="fe84" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">结果是这样的:</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="kv kw l"/></div></figure><p id="720f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这一次，我决定增加一种额外的感官能力:倾听和回应的能力，在机器学习中，通俗地说就是装配一个可以在设备上和离线工作的热词检测引擎。放松点，皮兹，不？把啤酒递给我好吗？在学徒上阅读…</p><p id="93a9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，我开始四处寻找简单的现成解决方案，并偶然发现了令人敬畏的<a class="ae kp" href="https://snowboy.kitt.ai/" rel="noopener ugc nofollow" target="_blank"><em class="ko">snow boy</em></a><em class="ko"/>离线热门词汇检测器。这当然是有限制的！你可以下载预先训练好的机器学习模型来检测特定的热门词汇，如<em class="ko"> Alexa </em>和<em class="ko"> Jarvis(见下图)… </em></p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi kx"><img src="../Images/9380338cb06566e68693df56d7cb72f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vCK34zOAVSaUOC6C63bvzg.png"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk">The off-the-shelf available hotword models</figcaption></figure><p id="7c1e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">..但是，为了真正为精确的自定义热门词汇建立您自己的健壮模型，您需要大约 500 名志愿者每人贡献 3 个样本。尽管我在社交媒体上的影响力极其有限，但我还是召集了大约 5 名捐款人</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi li"><img src="../Images/bb299574c2f989348bd0e36969324dfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*AVujJtInf02m-ztW1eMKEw.png"/></div><figcaption class="le lf gj gh gi lg lh bd b be z dk">5 donors from my social media campaign!</figcaption></figure><p id="2df5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">看到这毫无进展，我想到了生成自己的数据集。我最近从事了几个合成到真实单词转移学习项目，其中一个我在 https://arxiv.org/abs/1905.08633 ICLR 的深度生成模型研讨会上发表了论文(见<a class="ae kp" href="https://arxiv.org/abs/1905.08633" rel="noopener ugc nofollow" target="_blank">和</a>)，我认为如果 WaveNet 在生成真实声音的文本到语音转换方面真的如此令人印象深刻，我可以使用 Goggle doles 提供的 300 美元免费 Google cloud credits 来为我收集数据，并通过一些漂亮的噪声增强将学习转移到现实世界中，是的，深度神经网络的泛化能力是不合理的！</p><h2 id="21ec" class="lj lk it bd ll lm ln dn lo lp lq dp lr kb ls lt lu kf lv lw lx kj ly lz ma mb bi translated"><strong class="ak">第一阶段:使用 Google TTS 生成不同声音的合成热门词音频文件</strong></h2><p id="8717" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">于是，我创建了一个临时的 GC 账号，虔诚地按照文档写了一些 Python 代码(分享到这里:<a class="ae kp" href="https://github.com/vinayprabhu/BurningMan2019/blob/master/generate_SYNTHETIC_audiofiles.py" rel="noopener ugc nofollow" target="_blank">https://github . com/vinay prabhu/burning man 2019/blob/master/generate _ SYNTHETIC _ audio files . py</a>)。在大约 5 分钟内，我有 189 个。wav 文件的热词我是针对的(这是<strong class="js iu"> <em class="ko">嘿芯片！</em> </strong> BTW)不同的口音，或者更正式地称为<em class="ko">的声音。你可以从<a class="ae kp" href="https://github.com/vinayprabhu/BurningMan2019/blob/master/wav.zip" rel="noopener ugc nofollow" target="_blank">这里</a>下载整个宝藏。</em></p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi mh"><img src="../Images/1cdad2f8ef98949c5b95d7cfa7a705dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rl41jgUHxNLMurLczDQz8A.png"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk">Using Google TTS to generate synthetic training data</figcaption></figure><p id="8873" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我最喜欢的一些声音例子是:</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="mi kw l"/></div></figure><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="mi kw l"/></div><figcaption class="le lf gj gh gi lg lh bd b be z dk">Example sound files from the Google TTS engine!</figcaption></figure><p id="30a3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在我们有了 189 个。不同声音的 wav 文件，对于这些声音中的每一个，我执行了普通的加性白高斯噪声增强来获得(189 x 3) wav 文件。这里是与这个任务相关的<a class="ae kp" href="https://github.com/vinayprabhu/BurningMan2019/blob/master/Colab_Notebooks/wav_augmentation.ipynb" rel="noopener ugc nofollow" target="_blank"> colab 笔记本</a>。</p><h2 id="6aea" class="lj lk it bd ll lm ln dn lo lp lq dp lr kb ls lt lu kf lv lw lx kj ly lz ma mb bi translated">阶段 2:使用合成的噪声增强 wav 文件训练热词检测模型</h2><p id="1a19" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">尽管这项技术很有前途，但它仍处于危险之中。用于以编程方式训练您自己的模型的 api 看起来相当严格:</p><pre class="kq kr ks kt gt mj mk ml mm aw mn bi"><span id="8655" class="lj lk it mk b gy mo mp l mq mr">python training_service<strong class="mk iu">.</strong>py 1.wav 2.wav 3.wav saved_model<strong class="mk iu">.</strong>pmdl</span></pre><p id="2fb5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正如所见，您需要准确地输入 3 个 wav 文件来生成一个模型。所以，是的。我确实为每个声音生成了 189 个模型(我非常非常高兴在这方面被证明是错误的)，并将它们逻辑“或”在一起。摄取 wav 文件训练 ML 模型的 colab 笔记本分享到这里:<a class="ae kp" href="https://github.com/vinayprabhu/BurningMan2019/blob/master/Colab_Notebooks/model_gen.ipynb" rel="noopener ugc nofollow" target="_blank">https://github . com/vinay prabhu/burning man 2019/blob/master/Colab _ Notebooks/model _ gen . ipynb</a></p><h2 id="386a" class="lj lk it bd ll lm ln dn lo lp lq dp lr kb ls lt lu kf lv lw lx kj ly lz ma mb bi translated">阶段 3:将所有的模型组合在一起，并在 Raspberry Pi 上运行它们</h2><p id="9f41" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">好的。所以，这个阶段有点棘手。请确保您耐心且虔诚地遵循本回购文件:</p><div class="ms mt gp gr mu mv"><a href="https://github.com/wanleg/snowboyPi" rel="noopener  ugc nofollow" target="_blank"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd iu gy z fp na fr fs nb fu fw is bi translated">wanleg/snowboyPi</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">从全新安装 Raspbian 开始(Lite 或 Regular，本指南假设是 Lite) sudo apt update &amp;&amp; sudo apt -y…</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">github.com</p></div></div><div class="ne l"><div class="nf l ng nh ni ne nj lc mv"/></div></div></a></div><p id="65e5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">树莓 Pi 上音频项目的一个主要来源是 ALSA 的恶作剧，以及随之而来的 HDMI、USB 音频和本地音频输出端口之间的音频统治之争。为了避免这一点，我使用了良好的 ol' SAMSON mike in + audio-out 钻机(显然亚马逊<a class="ae kp" href="https://www.amazon.com/Samson-Mic-Portable-Condenser-Microphone/dp/B001R76D42/ref=asc_df_B001R76D42/?tag=hyprod-20&amp;linkCode=df0&amp;hvadid=312039437910&amp;hvpos=1o4&amp;hvnetw=g&amp;hvrand=1977879924165500956&amp;hvpone=&amp;hvptwo=&amp;hvqmt=&amp;hvdev=c&amp;hvdvcmdl=&amp;hvlocint=&amp;hvlocphy=9031928&amp;hvtargid=pla-318320044466&amp;psc=1" rel="noopener ugc nofollow" target="_blank">兜售这些</a>现在 29.99 美元！班加罗尔 SP 路的便宜多了。)</p><p id="3e2e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">整个设置如下所示:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi nk"><img src="../Images/dd21444cd4231bf5879014f6460b48f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bie-m17myj3H0o9IQfCwAw.png"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk">The raspberry pi-3 set-up with the Samson mike</figcaption></figure><p id="c55c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在开始人体试验之前，我试图通过一个简单的测试案例来隔离使用麦克风的影响，我在笔记本电脑上播放谷歌 TTS 输出音频文件，并检查音频文件是否相关。运行在 Raspberry Pi 上的 pmdl 确实会被合成话语触发。结果非常好！</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="kv kw l"/></div><figcaption class="le lf gj gh gi lg lh bd b be z dk">Synthetic data input trials</figcaption></figure><p id="9ac0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在有了一些希望，我开始调整 snowboy.py 脚本(从这里:【https://github.com/wanleg/snowboyPi/blob/master/snowboy.py】T2)来包含所有的。我刚刚生成的 pmdl 模型文件，以便当现实世界中的智人说出关键字‘嘿，芯片！’时，至少有一个会被触发。原来，你需要做的只是在这里添加第 29 行的模特列表:<a class="ae kp" href="https://github.com/wanleg/snowboyPi/blob/master/snowboy.py#L29" rel="noopener ugc nofollow" target="_blank">https://github . com/wan leg/snowboyPi/blob/master/snowboy . py # L29</a></p><blockquote class="nl nm nn"><p id="4914" class="jq jr ko js b jt ju jv jw jx jy jz ka no kc kd ke np kg kh ki nq kk kl km kn im bi translated"><strong class="js iu">大结局:</strong></p><p id="2025" class="jq jr ko js b jt ju jv jw jx jy jz ka no kc kd ke np kg kh ki nq kk kl km kn im bi translated">现在所有的文件都打包好了(顺便说一下，你再也不用担心这些单个 DNN 模型的大小了。各有~ 10KB。令人印象深刻的作品 <a class="ae kp" href="http://docs.kitt.ai/snowboy/" rel="noopener ugc nofollow" target="_blank"> <em class="it">雪衣人</em> </a> <em class="it">！)，我最终决定用真实的人类语音输入进行最后的真实世界测试，结果是..*鼓声*。</em></p></blockquote><p id="f21c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">钽..大！有用！它与我正常的(印度口音)声音和我的亚当·莱文声音配合得天衣无缝。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="kv kw l"/></div></figure><p id="8bdb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">第 4 阶段:片上部署和 Terra +套管+ playa 部署</strong></p><p id="f579" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我正屏息等待这一阶段。我一回到默认世界就更新这篇博文！</p></div></div>    
</body>
</html>