# å¦‚ä½•åœ¨ Amazon RDS ä¸Šå»ºç«‹ PostgreSQL æ•°æ®åº“

> åŸæ–‡ï¼š<https://towardsdatascience.com/how-to-set-up-a-postgresql-database-on-amazon-rds-64e8d144179e?source=collection_archive---------13----------------------->

![](img/8b7327f28f8ad54ab894721941e065ff.png)

LPhoto by [Joshua Sortino](https://unsplash.com/@sortino?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/data?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

[**PostgreSQL**](https://www.postgresql.org/about/) **æ˜¯ä¸€ä¸ªå¼€æºçš„å¯¹è±¡å…³ç³»æ•°æ®åº“ç³»ç»Ÿï¼Œä½¿ç”¨ SQL è¯­è¨€è¿›è¡Œäº¤äº’å’Œç»´æŠ¤ã€‚å®ƒå·²ç»è¢«è¯æ˜æ˜¯ä¸€ä¸ªé«˜åº¦å¯æ‰©å±•çš„æ•°æ®åº“è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºå®ƒå…è®¸æ‚¨ç®¡ç†ä¸‡äº¿å­—èŠ‚çš„æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥å¤„ç†è®¸å¤šå¹¶å‘ç”¨æˆ·ã€‚PostgreSQL ä¹Ÿæ˜¯ç¬¦åˆ ACID çš„ï¼Œä»¥ç¡®ä¿å‡ºé”™æ—¶çš„æœ‰æ•ˆæ€§ã€‚**

å½“æ‚¨éœ€è¦åˆ›å»ºå…³ç³»æ•°æ®åº“æ—¶ï¼Œæ‚¨åº”è¯¥**é€‰æ‹© PostgreSQL æ•°æ®åº“ï¼Œ**å…¶ä¸­æ•°æ®è¢«ç»„ç»‡åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªç”±åˆ—å’Œè¡Œç»„æˆçš„è¡¨ä¸­ï¼Œä½¿ç”¨å”¯ä¸€çš„é”®æ¥æ ‡è¯†æ¯ä¸€è¡Œã€‚ä¸€ä¸ªè¡¨ä¸­çš„è¡Œé€šå¸¸ä½¿ç”¨è¯¥å”¯ä¸€é”®é“¾æ¥åˆ°å…¶ä»–è¡¨ä¸­çš„è¡Œã€‚

è™½ç„¶æœ‰è®¸å¤šåœ°æ–¹å¯ä»¥æ‰˜ç®¡æ‚¨çš„ PostgreSQL æ•°æ®åº“ï¼Œä½†æ˜¯**æœ¬æ–‡ç‰¹åˆ«å…³æ³¨åœ¨** [**äºšé©¬é€Šå…³ç³»æ•°æ®åº“æœåŠ¡**](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Welcome.html) **(äºšé©¬é€Š RDS)** ä¸Šæ‰˜ç®¡æ‚¨çš„æ•°æ®åº“ã€‚Amazon RDS å…è®¸åœ¨ AWS äº‘ä¸­è®¾ç½®å…³ç³»æ•°æ®åº“ï¼Œéå¸¸å®¹æ˜“ä½¿ç”¨ã€‚

å¦‚æœæ‚¨åˆšåˆšå¼€å§‹ä½¿ç”¨æ‰€æœ‰ AWS æœåŠ¡ï¼Œå¸Œæœ›æ‚¨ä¼šå‘ç°è¿™å¾ˆæœ‰å¸®åŠ©ï¼åœ¨æœ¬æ–‡çš„å¤§éƒ¨åˆ†æ—¶é—´é‡Œï¼Œæˆ‘å°†ä»‹ç» AWS ä¸Šçš„ PostgreSQL è®¾ç½®ï¼Œç„¶åä»‹ç»å¦‚ä½•æ‰§è¡Œä¸€äº›å…¶ä»–æœ‰ç”¨çš„æ•°æ®åº“æ“ä½œã€‚å¦‚æœæ‚¨å·²ç»å»ºç«‹äº†æ•°æ®åº“ï¼Œè¯·éšæ„è·³è¿‡ï¼â­â­

**è¿™ç¯‡æ–‡ç« æ¶µç›–äº†å“ªäº›å†…å®¹:**

*   å¦‚ä½•åœ¨ Amazon RDS ä¸­åˆ›å»º PostgreSQL æ•°æ®åº“
*   å¦‚ä½•ä»å¤–éƒ¨è¿æ¥åˆ° PostgreSQL æ•°æ®åº“
*   å¦‚ä½•ä½¿ç”¨ SQL åœ¨æ•°æ®åº“ä¸­åˆ›å»ºè¡¨
*   å¦‚ä½•ä½¿ç”¨ SQL å°†æ•°æ®æ’å…¥æ•°æ®åº“çš„è¡¨ä¸­
*   å¦‚ä½•ä½¿ç”¨ SQL åˆ é™¤æ•°æ®åº“ä¸­çš„è¡¨

# åœ¨ Amazon RDS ä¸­åˆ›å»º PostgreSQL æ•°æ®åº“

è¦åœ¨ AWS ä¸­åˆ›å»º Postgres æ•°æ®åº“ï¼Œé¦–å…ˆç™»å½•æ‚¨çš„å¸æˆ·å¹¶åœ¨ AWS ç®¡ç†æ§åˆ¶å°ä¸­æœç´¢`RDS`ã€‚ç‚¹å‡»å·¦è¾¹å·¥å…·æ¡ä¸Šçš„`Databases`ï¼Œä½ å°†è¢«å¸¦åˆ°ä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºçš„é¡µé¢ã€‚

![](img/6bbf5cc274aafd11f886d9970961d96f.png)

RDS Databases View

ç‚¹å‡»å³ä¸Šè§’çš„æ©™è‰²`Create database`æŒ‰é’®ï¼Œç°åœ¨ä½ å¯ä»¥å¼€å§‹ä¸ºä½ çš„æ–°æ•°æ®åº“é€‰æ‹©é€‰é¡¹äº†ã€‚

## **é€‰æ‹©ä¸€ç§æ•°æ®åº“åˆ›å»ºæ–¹æ³•**

é€‰æ‹©`Standard Create`ä»¥ä¾¿æ‚¨å¯ä»¥å®šåˆ¶æ•°æ®åº“é…ç½®ã€‚

![](img/19d5dca0b697c352473e07a05bffa55b.png)

## **é€‰æ‹©å‘åŠ¨æœºé€‰é¡¹**

æˆ‘ä»¬æ­£åœ¨åˆ›å»º Postgres æ•°æ®åº“ï¼Œå› æ­¤é€‰æ‹© PostgreSQL å¹¶ä¿ç•™é»˜è®¤ç‰ˆæœ¬ 11.5-R1ã€‚

![](img/52a87eb1339a090c58991090185e75e4.png)

## **ä¸ºæ‚¨çš„ç”¨ä¾‹é€‰æ‹©ä¸€ä¸ªæ¨¡æ¿**

å› ä¸ºæˆ‘ä»¬æ­£åœ¨æµ‹è¯•ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©äº†å…è´¹å±‚ï¼

![](img/a397a2c289d05ba842351811c27cd85b.png)

## **è‡ªå®šä¹‰è®¾ç½®**

æ‚¨å¯ä»¥æ›´æ”¹`DB instance identifier`å’Œ`Master username`æˆ–ä¿ç•™é»˜è®¤å€¼ã€‚æˆ‘æŠŠæˆ‘çš„ç”¨æˆ·åæ”¹æˆäº†`test-db`å’Œï¼Œå¹¶ä¿ç•™äº†é»˜è®¤ç”¨æˆ·å`postgres`ã€‚æ‚¨ä¹Ÿå¯ä»¥è®© Amazon RDS ä¸ºæ‚¨ç”Ÿæˆä¸€ä¸ªå¯†ç ï¼Œæˆ–è€…æ‚¨å¯ä»¥æŒ‡å®šè‡ªå·±çš„å¯†ç ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘æŒ‡å®šäº†æˆ‘è‡ªå·±çš„ã€‚

![](img/853fedfa8d1fecc87ce0f0e91d752f59.png)

## **æ•°æ®åº“å®ä¾‹å¤§å°**

DB instance ç±»å†³å®š Amazon RDS DB å®ä¾‹çš„è®¡ç®—å’Œå†…å­˜å®¹é‡ã€‚æ‚¨éœ€è¦çš„ DB å®ä¾‹ç±»å–å†³äºæ‚¨çš„å¤„ç†èƒ½åŠ›å’Œå†…å­˜éœ€æ±‚( [Amazon æ–‡æ¡£](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.DBInstanceClass.html))

è¿™æ˜¯æ‚¨å¸Œæœ›é€‰æ‹©æ»¡è¶³å†…å­˜éœ€æ±‚çš„å®ä¾‹çš„åœ°æ–¹ã€‚å¯¹äºå…è´¹å±‚ï¼Œæˆ‘ä»¬åªæœ‰`Burstable classes`ä½œä¸ºé€‰é¡¹ï¼Œæˆ‘å°†è¿™éƒ¨åˆ†ä¿ç•™ä¸ºé»˜è®¤çš„`db.t2.micro`ã€‚

![](img/7ceb4615c300272418faf6bd58ee5e3b.png)

## **å­˜å‚¨å¤§å°**

æ‚¨å¯ä»¥åœ¨è¿™é‡ŒæŒ‡å®šæ•°æ®åº“çš„å­˜å‚¨è¦æ±‚ã€‚æ‚¨è¿˜å¯ä»¥é€‰æ‹©å¯ç”¨å­˜å‚¨è‡ªåŠ¨æ‰©å±•ï¼Œä»¥ä¾¿æ‚¨çš„æ•°æ®åº“æ˜¯åŠ¨æ€çš„ï¼Œå¯ä»¥è‡ªåŠ¨æ‰©å±•ğŸ™‚

åŒæ ·ï¼Œæˆ‘åªæ˜¯ä¿ç•™äº†`storage type`ã€`allocated storage`ã€`maximum storage threshold`çš„é»˜è®¤å€¼ï¼Œå¹¶ä¿ç•™äº†`enable storage autoscaling`é€‰ä¸­çš„âœ…

![](img/c144a926859030f2da7ac5a91a37743d.png)

## **å¯ç”¨æ€§&è€ç”¨æ€§**

è¯¥é€‰é¡¹ç”¨äºåˆ›å»ºä¸€ä¸ªå¤‡ç”¨æ•°æ®åº“ï¼Œä»¥é˜²åœæœºï¼Œè¿™æ ·æ‚¨çš„æ•°æ®åº“å°±å¯ä»¥ä¸€ç›´æ­£å¸¸è¿è¡Œã€‚è¯¥é€‰é¡¹åœ¨ç©ºé—²å±‚ä¸å¯ç”¨ã€‚

![](img/8e98958d8abd82e8e8508fd8089f0bb0.png)

## è¿é€šæ€§

æ‚¨å¯ä»¥åœ¨è¿™é‡ŒæŒ‡å®šä»¥ä¸‹è¿æ¥é…ç½®:

*   **VPC** â€”ä¸ºè¯¥æ•°æ®åº“å®ä¾‹å®šä¹‰è™šæ‹Ÿç½‘ç»œç¯å¢ƒçš„ VPC
*   **å­ç½‘ç»„** â€”å®šä¹‰æ•°æ®åº“å®ä¾‹å¯ä»¥ä½¿ç”¨å“ªäº›å­ç½‘å’Œ IP èŒƒå›´çš„å­ç½‘ç»„
*   **å…¬å…±å¯è®¿é—®æ€§** â€”æ•°æ®åº“æ˜¯å¦å¯å…¬å¼€è®¿é—®
*   **VPC å®‰å…¨ç»„** â€”å…è®¸ VPC ä¹‹å¤–çš„æµé‡è¿›å…¥çš„å®‰å…¨ç»„
*   **å¯ç”¨æ€§åŒºåŸŸ** â€”é€šè¿‡å°†æ•…éšœä¸å…¶ä»–å¯ç”¨æ€§åŒºåŸŸéš”ç¦»æ¥æé«˜é«˜å¯ç”¨æ€§
*   **æ•°æ®åº“ç«¯å£** â€”æ•°æ®åº“å®ä¾‹å°†ç”¨äºåº”ç”¨ç¨‹åºè¿æ¥çš„ TCP/IP ç«¯å£

æˆ‘ä¿ç•™äº†é™¤`Publicly accessible`éƒ¨åˆ†ä¹‹å¤–çš„æ‰€æœ‰é»˜è®¤å€¼ï¼Œæˆ‘å°†å®ƒæ”¹ä¸º`Yes`ï¼Œè¿™æ ·æˆ‘çš„æ•°æ®åº“å°±å¯ä»¥åœ¨ VPC ä¹‹å¤–è®¿é—®ï¼Œå°±åƒä» Jupyter ç¬”è®°æœ¬ä¸Šè®¿é—®ä¸€æ ·ã€‚

![](img/38dc55311de67092239873539f9cf29b.png)![](img/4501f14e8c052359ea2a00f59bd84eef.png)

## æ•°æ®åº“è®¤è¯

åœ¨æ­¤éƒ¨åˆ†ä¸­ï¼Œæ‚¨å¯ä»¥ä»ä»¥ä¸‹é€‰é¡¹ä¸­é€‰æ‹©å¦‚ä½•éªŒè¯æ‚¨çš„æ•°æ®åº“å‡­æ®:

*   **å¯†ç è®¤è¯** â€”é€šè¿‡ DB å¼•æ“çš„æœ¬æœºå¯†ç è®¤è¯ç‰¹æ€§ç®¡ç†æ‚¨çš„æ•°æ®åº“ç”¨æˆ·å‡­è¯ã€‚
*   **å¯†ç å’Œ IAM æ•°æ®åº“è®¤è¯** â€”é€šè¿‡ DB å¼•æ“çš„æœ¬æœºå¯†ç è®¤è¯åŠŸèƒ½å’Œ IAM ç”¨æˆ·å’Œè§’è‰²ç®¡ç†æ‚¨çš„æ•°æ®åº“ç”¨æˆ·å‡­è¯ã€‚
*   **å¯†ç å’Œ Kerberos è®¤è¯** â€” é€šè¿‡ DB å¼•æ“çš„åŸç”Ÿå¯†ç è®¤è¯ç‰¹æ€§å’Œ AWS ç›®å½•æœåŠ¡åˆ›å»ºçš„ AWS æ‰˜ç®¡ Microsoft AD ç®¡ç†æ‚¨çš„æ•°æ®åº“ç”¨æˆ·å‡­è¯ã€‚è¿™æ ·ï¼Œæ‚¨å¯ä»¥é›†ä¸­å­˜å‚¨å’Œç®¡ç†ç”¨æˆ·å‡­è¯ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªæ•°æ®åº“å®ä¾‹å•ç‹¬å­˜å‚¨å’Œç®¡ç†ã€‚

è®©æˆ‘ä»¬å’Œ`Password authentication`ä¸€èµ·å»å§ã€‚

![](img/7f5d5536b33c1d13ad29d4832a12e652.png)

## åˆ›å»ºæ•°æ®åº“

æœ€åï¼Œå•å‡»åº•éƒ¨çš„`create database`å¼€å§‹åˆ›å»ºæ•°æ®åº“ï¼Œæ‚¨åº”è¯¥ä¼šåœ¨é¡µé¢ä¸Šçœ‹åˆ°ä»¥ä¸‹æ¶ˆæ¯ã€‚è¿™éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ï¼

![](img/c67fbd78c6e8c9e9233f43651c1a3bf9.png)

# è¿æ¥åˆ° AWS RDS ä¸­çš„ PostgreSQL æ•°æ®åº“

> ä¸‹è½½ [Jupyter ç¬”è®°æœ¬](https://github.com/Cryptolytic-app/cryptolytic/blob/master/medium_articles/postgres_setup.ipynb)è·Ÿéš

æˆ‘ä»¬å°†ä½¿ç”¨ psycopg2 åº“åœ¨ Jupyter ç¬”è®°æœ¬ä¸­æœ¬åœ°è¿æ¥åˆ° postgres æ•°æ®åº“(æ‚¨ä¹Ÿå¯ä»¥ä» IDE æˆ–ç»ˆç«¯è¿æ¥)ã€‚ç»§ç»­ä½¿ç”¨`!pip install psycopg2-binary`å®‰è£… psycopg2ï¼Œç„¶åå¯ä»¥è¿è¡Œä¸‹é¢çš„ä»£ç è¿›è¡Œè¿æ¥ã€‚

***æ³¨æ„*** *:å¯¹äº* `*POSTGRES_DBNAME*` *ï¼Œå½“æˆ‘æ”¾å…¥çœŸæ­£çš„æ•°æ®åº“åæ—¶ï¼Œå®ƒå®é™…ä¸Šä»æ¥æ²¡æœ‰å·¥ä½œè¿‡ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æˆ‘å°†å…¶å‘½åä¸º test-dbï¼Œæˆ‘å¿…é¡»æ”¾å…¥* `*postgres*` *æ¥ä»£æ›¿ã€‚å¦‚æœå®ƒæœ€ç»ˆä¸èƒ½ä½¿ç”¨æ‚¨ç»™å®šçš„æ•°æ®åº“åç§°ï¼Œå°è¯•é»˜è®¤çš„* `*postgres*` *å®ƒå¯èƒ½ä¼šå·¥ä½œã€‚*

```
import psycopg2 as ps# define credentials 
credentials = {'POSTGRES_ADDRESS' : '', # change to your endpoint
               'POSTGRES_PORT' : '', # change to your port
               'POSTGRES_USERNAME' : '', # change to your username
               'POSTGRES_PASSWORD' : '', # change to your password
               'POSTGRES_DBNAME' : ''} # change to your db name# create connection and cursor    
conn = ps.connect(host=credentials['POSTGRES_ADDRESS'],
                  database=credentials['POSTGRES_DBNAME'],
                  user=credentials['POSTGRES_USERNAME'],
                  password=credentials['POSTGRES_PASSWORD'],
                  port=credentials['POSTGRES_PORT'])cur = conn.cursor()
```

å¦‚æœä½ æ²¡æœ‰å¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œä½ å·²ç»æˆåŠŸåœ°è¿æ¥åˆ°ä½ çš„ postgres æ•°æ®åº“ï¼ğŸŠ

# åœ¨ Postgres æ•°æ®åº“ä¸­åˆ›å»ºè¡¨

æ—¢ç„¶æ‚¨å·²ç»æˆåŠŸåœ°åˆ›å»ºäº†ä¸€ä¸ª postgres æ•°æ®åº“ï¼Œè®©æˆ‘ä»¬åœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ªè¡¨ã€‚

é¦–å…ˆï¼ŒéªŒè¯æ•°æ®åº“ä¸­æœ‰ä»€ä¹ˆâ€”åº”è¯¥ä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¿”å›ç©ºåˆ—è¡¨çš„ä»£ç è¿›è¡Œæ£€æŸ¥ã€‚

```
query = """SELECT * FROM pg_catalog.pg_tables
            WHERE schemaname != 'pg_catalog'
            AND schemaname != 'information_schema';"""cur.execute(query)
cur.fetchall()
```

***æ³¨æ„:*** *å¦‚æœæ‚¨è·³è¿‡äº†æœ¬æ–‡çš„éƒ¨åˆ†å†…å®¹ï¼Œè¯·å…ˆç¡®ä¿æ‚¨å·²ç»è¿æ¥åˆ°äº†æ•°æ®åº“(è§ä¸Šæ–‡)ğŸ˜€*

æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹ä»£ç æ¥åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªè¡¨:

```
cur.execute("""CREATE TABLE table_1
                (column_1 integer, 
                column_2 float,
                column_3 varchar(50),
                column_4 boolean);""")# Commit table creation
conn.commit()
```

è¿™å°†åˆ›å»ºä¸€ä¸ªåä¸º`table_1`çš„è¡¨ï¼ŒåŒ…å« 4 åˆ—ã€‚æˆ‘å·²ç»åŒ…å«äº†ä¸€äº›å¸¸è§çš„ SQL æ•°æ®ç±»å‹ï¼Œå› æ­¤æ‚¨å¯ä»¥å°†å®ƒä»¬æ›´æ”¹ä¸ºæ‚¨çš„è¡¨çš„æ•°æ®ç±»å‹ã€‚

å¦‚æœæˆ‘ä»¬è¿è¡Œä¸Šé¢çš„ä»£ç æ¥æ£€æŸ¥æ•°æ®åº“ä¸­çš„è¡¨ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸‹é¢çš„å“åº”ï¼Œå¯ä»¥çœ‹åˆ° table_1 ç°åœ¨åœ¨æ•°æ®åº“ä¸­:

```
[(â€˜publicâ€™, â€˜table_1â€™, â€˜postgresâ€™, None, False, False, False, False)]
```

**å¥½å¤„:**å¦‚æœæ‚¨æƒ³è¦ç³»ç»Ÿåœ°åˆ›å»ºä¸€ç»„ç»™å®šäº†è¡¨ååˆ—è¡¨çš„è¡¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç :

```
table_list = [] # a list of string table namesfor table_name in table_list:
    cur.execute("""CREATE TABLE {table_name}
                (column_1 float,
                column_2 float,
                column_3 float,
                column_4 float);""".format(table_name=table_name))# Commit table creation
conn.commit()
```

# å°†æ•°æ®æ’å…¥ PostgreSQL æ•°æ®åº“çš„è¡¨ä¸­

ç°åœ¨ postgres æ•°æ®åº“ä¸­æœ‰äº†ä¸€ä¸ªè¡¨ï¼Œå¯ä»¥å¼€å§‹è¾“å…¥æ•°æ®äº†ã€‚

è‹¥è¦æ’å…¥ä¸€è¡Œæ•°æ®ï¼Œè¯·è¿è¡Œä»¥ä¸‹ä»£ç :

```
data = [1, 2.2, 'three', True]
insert_query = """INSERT INTO table_8
                   (column_1, column_2, column_3, column_4)
                   VALUES (%s, %s, %s, %s);"""# execute insert
cur.execute(insert_query, data)

# commit data insert
conn.commit()
```

æˆ‘å°†æ•°æ®æ”¾å…¥ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œç¡®ä¿æ•°æ®ç±»å‹ä¸ä¸ºè¡¨ä¸­çš„åˆ—é€‰æ‹©çš„æ•°æ®ç±»å‹ç›¸åŒ¹é…ã€‚ç¡®ä¿è‡ªå®šä¹‰æ­£åœ¨åˆ›å»ºçš„è¡¨ï¼Œä»¥åŒ¹é…å°†è¦æ’å…¥çš„æ•°æ®ç±»å‹ã€‚ç„¶åï¼Œæˆ‘ç¼–å†™äº†å°†è¯¥åˆ—è¡¨æ’å…¥åˆ°è¡¨ä¸­çš„æŸ¥è¯¢ï¼Œæ‰§è¡Œè¯¥æŸ¥è¯¢ï¼Œå¹¶å°†å®ƒæäº¤åˆ°è¡¨ä¸­ã€‚å¦‚æœä¸æäº¤æ‰§è¡Œï¼Œæ‚¨çš„æ•°æ®å°†ä¸ä¼šä¿å­˜åˆ°è¡¨ä¸­ã€‚

é€šè¿‡ä»è¡¨ä¸­æå–æ•°æ®æ¥éªŒè¯æ•°æ®æ˜¯å¦å·²ä¿å­˜:

![](img/6a0cd1e0bb6454e63f9791ad5f770a4e.png)

select è¯­å¥è¿”å›æˆ‘ä»¬æ’å…¥çš„æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬çŸ¥é“å®ƒæ˜¯æœ‰æ•ˆçš„ï¼

è¦åœ¨è¡¨ä¸­æ’å…¥å¤šè¡Œæ•°æ®ï¼Œè¯·è¿è¡Œä»¥ä¸‹ä»£ç :

```
data = [[5, 5.5, 'five', True], [5, 5.5, 'five', True], [5, 5.5, 'five', True]]
insert_query = """INSERT INTO table_1
                   (column_1, column_2, column_3, column_4)
                   VALUES (%s, %s, %s, %s);"""# execute multiple inserts
cur.executemany(insert_query, data)

# commit data insert
conn.commit()
```

è¿™é‡Œçš„åŒºåˆ«åœ¨äºï¼Œå˜é‡`data`æ˜¯ä¸€ä¸ªåŒ…å«è¦æ’å…¥çš„æ•°æ®çš„åˆ—è¡¨åˆ—è¡¨ã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨`cur.executemany`è€Œä¸æ˜¯`cur.execute`æ¥éå†æˆ‘ä»¬çš„æ•°æ®åˆ—è¡¨å¹¶æ’å…¥æ‰€æœ‰çš„è¾“å…¥ã€‚

åŒæ ·ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç®€å•çš„ select è¯­å¥éªŒè¯æ˜¯å¦æ’å…¥äº†ä¸‰è¡Œæ–°æ•°æ®:

![](img/9fcd2a0199c597cb9fae70fa3ba3cec9.png)

ç°åœ¨ï¼Œæ‚¨å¯ä»¥çœ‹åˆ° select è¯­å¥è¿”å›äº†ä½¿ç”¨å‰é¢çš„ insert è¯­å¥æ·»åŠ çš„ 3 ä¸ªæ–°è¡Œã€‚

# åˆ é™¤/åˆ é™¤ SQL ä¸­çš„è¡¨

ä½ æœ€ç»ˆä¼šæƒ³è¦åˆ é™¤è¿™ä¸ªæµ‹è¯•è¡¨ï¼Œå¼€å§‹ä½ çœŸæ­£çš„å·¥ä½œâ€”â€”æˆ–è€…ä½ å¯èƒ½åƒæˆ‘ä¸€æ ·æç ¸äº†ä¸€äº›äº‹æƒ…ğŸ™ƒ

ä½¿ç”¨ SQL å‘½ä»¤`DROP TABLE`åˆ é™¤ postgres æ•°æ®åº“ä¸­çš„ä¸€ä¸ªè¡¨:

```
cur.execute("""DROP TABLE table_1""")
conn.commit()
```

ç¡®ä¿æ‚¨ç¡®å®æäº¤äº†ï¼Œå¦åˆ™æ‚¨çš„è¡¨ä¸ä¼šè¢«åˆ é™¤ï¼ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰ç”¨æ¥æ£€æŸ¥çš„ä»£ç æ¥éªŒè¯æ‚¨çš„æ•°æ®åº“åŒ…å«çš„è¡¨ã€‚

å°±æ˜¯è¿™æ ·ï¼ç°åœ¨ï¼Œæ‚¨å¯ä»¥åœ¨ AWS ä¸Šå»ºç«‹è‡ªå·±çš„ PostgreSQL æ•°æ®åº“ï¼Œåˆ›å»ºè¡¨ï¼Œæ·»åŠ æ•°æ®ï¼Œå¹¶åˆ é™¤ä»»ä½•ä¸éœ€è¦çš„è¡¨ã€‚å¦‚æœä½ æŒ‰ç…§æ•™ç¨‹å­¦ä¹ å¹¶å‘ç°ä»»ä½•é”™è¯¯ï¼Œè¯·è®©æˆ‘çŸ¥é“ï¼Œè¿™æ ·æˆ‘å¯ä»¥ä¿®å¤å®ƒï¼

æ‚¨è¿˜å¯ä»¥ä½¿ç”¨æ›´å¥½çš„ç”¨æˆ·ç•Œé¢æ¥ç®¡ç† PostgreSQLã€‚æˆ‘æ¨è pgAdminï¼Œè¿™é‡Œ[å¯ä»¥å…è´¹ä¸‹è½½](https://www.pgadmin.org/download/)ã€‚

è¿™ç¯‡æ–‡ç« æœ€ç»ˆå°†æˆä¸ºæˆ‘å’Œæˆ‘çš„å›¢é˜Ÿåœ¨ä»äº‹ä¸€ä¸ªåä¸º Cryptolytic çš„é¡¹ç›®æ—¶æ‰€å­¦åˆ°çš„ç»éªŒçš„ç³»åˆ—æ–‡ç« çš„ä¸€éƒ¨åˆ†(æ–‡ç« å°†å¾ˆå¿«å†™å‡ºæ¥å¹¶é“¾æ¥åˆ°è¿™é‡Œ)ã€‚è¿™æ˜¯æˆ‘ä»¬åœ¨è¿›è¡Œé¡¹ç›®æ—¶å¸Œæœ›æ‹¥æœ‰çš„æŒ‡å—ã€‚

![](img/85f111ba2c9569145f0e12a4926e8228.png)

**åŒ…å«æœ¬æ–‡ä¸­ä½¿ç”¨çš„æ‰€æœ‰ä»£ç çš„ç¬”è®°æœ¬å¯ä»¥åœ¨è¿™é‡Œ**[](https://github.com/Cryptolytic-app/cryptolytic/blob/master/medium_articles/postgres_setup.ipynb)****æ‰¾åˆ°ï¼Œè¿™æ˜¯æˆ‘ä»¬çš„å¯†ç ç ´è§£é¡¹ç›®çš„å›è´­æ–‡ä»¶ä¸­çš„å†…å®¹â€”â€”æ‰€ä»¥å¦‚æœä½ å¾ˆå¥½å¥‡ï¼Œå¯ä»¥å»çœ‹çœ‹ï¼****

****åœ¨ twitter [@elizabethets](http://www.twitter.com/elizabethets) ä¸Šæ‰¾åˆ°æˆ‘æˆ–è€…åœ¨ [LinkedIn](https://www.linkedin.com/in/elizabethts/) ä¸Šè”ç³»æˆ‘ï¼****

****æ¥æº:****

****[](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Welcome.html) [## ä»€ä¹ˆæ˜¯äºšé©¬é€Šå…³ç³»æ•°æ®åº“æœåŠ¡(Amazon RDS)ï¼Ÿ

### Amazon å…³ç³»æ•°æ®åº“æœåŠ¡(Amazon RDS)æ˜¯ä¸€ä¸ª web æœåŠ¡ï¼Œå®ƒä½¿è®¾ç½®ã€æ“ä½œå’Œæ‰©å±•å…³ç³»æ•°æ®åº“å˜å¾—æ›´åŠ å®¹æ˜“

docs.aws.amazon.com](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Welcome.html)  [## å…³äº

### PostgreSQL æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ã€å¼€æºçš„å¯¹è±¡å…³ç³»æ•°æ®åº“ç³»ç»Ÿï¼Œå®ƒä½¿ç”¨å¹¶æ‰©å±•äº† SQL è¯­è¨€å’Œ

www.postgresql.org](https://www.postgresql.org/about/) [](https://github.com/Cryptolytic-app/cryptolytic) [## å¯†ç ç ´è§£-app/å¯†ç ç ´è§£

### ä½ å¯ä»¥åœ¨ Cryptolytic æ‰¾åˆ°è¿™ä¸ªé¡¹ç›®ã€‚Trello æ¿äº§å“ Canvas Cryptolytic æ˜¯ä¸€ä¸ªä¸ºåˆå­¦è€…ä¿®ä¿®è¡¥è¡¥çš„å¹³å°â€¦

github.com](https://github.com/Cryptolytic-app/cryptolytic) [](https://en.wikipedia.org/wiki/Relational_database) [## å…³ç³»æ•°æ®åº“

### å…³ç³»æ•°æ®åº“æ˜¯åŸºäºæ•°æ®å…³ç³»æ¨¡å‹çš„æ•°å­—æ•°æ®åº“ï¼Œç”± E. F. Codd äº 1970 å¹´æå‡ºã€‚ä¸€ä¸ªâ€¦

en.wikipedia.org](https://en.wikipedia.org/wiki/Relational_database) [](https://en.wikipedia.org/wiki/ACID) [## é…¸

### åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒACID(åŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§)æ˜¯æ•°æ®åº“çš„ä¸€ç»„å±æ€§â€¦

en.wikipedia.org](https://en.wikipedia.org/wiki/ACID)****