<html>
<head>
<title>Basic data structures of xarray</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">xarray 的基本数据结构</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/basic-data-structures-of-xarray-80bab8094efa?source=collection_archive---------3-----------------------#2019-09-05">https://towardsdatascience.com/basic-data-structures-of-xarray-80bab8094efa?source=collection_archive---------3-----------------------#2019-09-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/137e4131d41ad13ade0d9cbc572ea05c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MtkBR7zQneUMmSua"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@pkmfaris?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Faris Mohammed</a> on <a class="ae kc" href="https://unsplash.com/search/photos/array?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1743" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Xarray 是一个 python 包，用于处理带标签的多维数组，包括高级分析和可视化功能。Xarray 深受熊猫的启发，在内部使用熊猫。虽然 pandas 是处理表格数据的一个很好的工具，但是当数据维数较高时，它可能会变得有些笨拙。Pandas 的主要数据结构是 Series(用于一维数据)和 DataFrame(用于二维数据)。它曾经有面板(用于三维数据)，但在版本 0.25.0 中删除了<a class="ae kc" href="https://pandas.pydata.org/pandas-docs/stable/reference/panel.html" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="a00c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设读者熟悉熊猫，如果你不知道熊猫是什么，你应该在 xarray 之前查看一下。</p><h2 id="ed28" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">为什么我应该使用 ND 数组？</h2><p id="117d" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">在许多科学领域，需要将一个数据点映射到各种属性(称为坐标)，例如，您希望将某个温度测量值映射到纬度、经度、高度和时间。这是 4 维！</p><p id="b512" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在 python 中，使用 ND 数组的基本包是<a class="ae kc" href="https://numpy.org/" rel="noopener ugc nofollow" target="_blank"> NumPy </a>。Xarray 有一些内置特性，使得使用 ND 数组比 NumPy 更容易:</p><ul class=""><li id="9769" class="lz ma iq kf b kg kh kk kl ko mb ks mc kw md la me mf mg mh bi translated">xarray 不使用轴标签，而是使用命名维度，这使得选择数据和对维度应用操作变得容易。</li><li id="1f0c" class="lz ma iq kf b kg mi kk mj ko mk ks ml kw mm la me mf mg mh bi translated">NumPy 数组只能有一种数据类型，而 xarray 可以在 ND 数组中保存异构数据。这也使得 NaN 操作更容易。</li><li id="2a10" class="lz ma iq kf b kg mi kk mj ko mk ks ml kw mm la me mf mg mh bi translated">使用<code class="fe mn mo mp mq b">obj.attrs</code>跟踪对象上的任意元数据。</li></ul></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><h2 id="edd2" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">数据结构</h2><p id="89c5" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">Xarray 有两种数据结构:</p><ul class=""><li id="a61a" class="lz ma iq kf b kg kh kk kl ko mb ks mc kw md la me mf mg mh bi translated">数据数组—用于单个数据变量</li><li id="14b1" class="lz ma iq kf b kg mi kk mj ko mk ks ml kw mm la me mf mg mh bi translated">数据集—多个数据数组(数据变量)的容器</li></ul><p id="6f85" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">根据<a class="ae kc" href="http://cfconventions.org/" rel="noopener ugc nofollow" target="_blank"> CF 惯例</a>，在<strong class="kf ir">数据变量</strong>和<strong class="kf ir">坐标</strong>之间有区别。Xarray 遵循这些约定，但是它主要是语义性的，您不必遵循它。我是这样看的:一个<em class="my">数据变量</em>是感兴趣的<em class="my">数据</em>，一个<em class="my">坐标</em>是<em class="my">描述感兴趣的</em>数据的标签。例如，纬度、经度和时间是坐标，而温度是数据变量。这是因为我们对测量温度感兴趣，其余的都是描述测量结果(数据点)。在<a class="ae kc" href="http://xarray.pydata.org/en/stable/data-structures.html#dataset" rel="noopener ugc nofollow" target="_blank"> xarray 文档</a>中，他们说:</p><blockquote class="mz na nb"><p id="5441" class="kd ke my kf b kg kh ki kj kk kl km kn nc kp kq kr nd kt ku kv ne kx ky kz la ij bi translated">坐标表示常量/固定量/独立量，不同于属于数据的变化量/测量量/相关量。</p></blockquote></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><p id="0899" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi nf translated"><span class="l ng nh ni bm nj nk nl nm nn di"> O </span>凯，来看看一些代码吧！</p><pre class="no np nq nr gt ns mq nt nu aw nv bi"><span id="2355" class="lb lc iq mq b gy nw nx l ny nz"># customary imports<br/>import numpy as np<br/>import pandas as pd<br/>import xarray as xr</span></pre><p id="5289" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们将创建一些玩具温度数据来玩:</p><figure class="no np nq nr gt jr"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="9eae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们生成了一个随机温度值的数组，以及坐标纬度和经度(二维)的数组。首先，让我们看看如何在 pandas 中表示这些数据:</p><pre class="no np nq nr gt ns mq nt nu aw nv bi"><span id="79e8" class="lb lc iq mq b gy nw nx l ny nz">df = pd.DataFrame({"temperature":temperature, "lat":lat, "lon":lon})<br/>df</span></pre><figure class="no np nq nr gt jr gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/e8100b9c1d27fe94fc715997f4f964ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:424/format:webp/1*AdNTaIt1TJUQ0gPl6p9KLw.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Output of the above cell</figcaption></figure><p id="eff3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将从这些数据中创建一个<em class="my"> DataArray </em>，让我们来看看四种方法:</p><ul class=""><li id="b198" class="lz ma iq kf b kg kh kk kl ko mb ks mc kw md la me mf mg mh bi translated">来自熊猫系列</li><li id="2b81" class="lz ma iq kf b kg mi kk mj ko mk ks ml kw mm la me mf mg mh bi translated">来自一个熊猫的数据框架</li><li id="bd7f" class="lz ma iq kf b kg mi kk mj ko mk ks ml kw mm la me mf mg mh bi translated">使用 DataArray 构造函数</li><li id="bf5a" class="lz ma iq kf b kg mi kk mj ko mk ks ml kw mm la me mf mg mh bi translated">使用带有投影坐标的 DataArray 构造函数</li></ul><h2 id="e3a4" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">从序列创建数据数组</h2><p id="8e6f" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">我们将创建一个熊猫系列，然后是一个数据数组。由于我们希望在数据中表示两个维度，因此我们将创建一个具有两级多索引的序列:</p><pre class="no np nq nr gt ns mq nt nu aw nv bi"><span id="bf7b" class="lb lc iq mq b gy nw nx l ny nz">idx = pd.MultiIndex.from_arrays(arrays=[lat,lon], names=["lat","lon"])</span><span id="9a13" class="lb lc iq mq b gy od nx l ny nz">s = pd.Series(data=temperature, index=idx)<br/>s</span><span id="d262" class="lb lc iq mq b gy od nx l ny nz"># use from_series method<br/>da = xr.DataArray.from_series(s)<br/>da</span></pre><figure class="no np nq nr gt jr gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/1c0b186618b08b1b17f009c5c0340751.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/1*IlojNYHbzp1u8bMFipo--Q.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Output of the above cell</figcaption></figure><p id="d53b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是数据数组打印出来的样子。</p><h2 id="b18c" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">从数据帧创建数据数组</h2><p id="b2f8" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">我们可以为 DataArray 构造函数提供一个熊猫数据帧。它会将数据框的索引视为第一维，将列视为第二维。如果索引或列有多个级别，xarray 将创建嵌套维度。</p><p id="fd2e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于我们希望纬度和经度作为我们的维度，实现这一点的最聪明的方法是使用纬度作为索引，经度作为列来透视我们的数据框:</p><pre class="no np nq nr gt ns mq nt nu aw nv bi"><span id="10a5" class="lb lc iq mq b gy nw nx l ny nz">df_pv = df.pivot(index="lat", columns="lon")</span><span id="0f2b" class="lb lc iq mq b gy od nx l ny nz"># drop first level of columns as it's not necessary<br/>df_pv = df_pv.droplevel(0, axis=1)</span><span id="871f" class="lb lc iq mq b gy od nx l ny nz">df_pv</span></pre><figure class="no np nq nr gt jr gh gi paragraph-image"><div class="gh gi of"><img src="../Images/a99183b9df1580ce8dec744a3d01fa72.png" data-original-src="https://miro.medium.com/v2/resize:fit:484/format:webp/1*4yfNK-zLO7FVOeelFvYIHQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Output of the above cell</figcaption></figure><p id="d6d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">数据透视后，我们可以通过为 DataArray 构造函数提供透视数据框来轻松创建 DataArray:</p><pre class="no np nq nr gt ns mq nt nu aw nv bi"><span id="8cbc" class="lb lc iq mq b gy nw nx l ny nz">da = xr.DataArray(data=df_pv)<br/>da</span></pre><figure class="no np nq nr gt jr gh gi paragraph-image"><div class="gh gi og"><img src="../Images/d1429c5092e16747e0ef73bbc3fdb7cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/1*PgREZlw7pcdxY4kmk5T8ww.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Output of the above cell</figcaption></figure><h2 id="b07d" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">使用构造函数创建 DataArray</h2><p id="e63b" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">我们已经看到了从 pandas 对象创建 DataArray 的两种方法。现在，让我们看看如何手动创建数据数组。因为我们希望在数据中表示二维，所以数据应该以二维数组的形式出现，这样我们就可以将它直接传递给 DataArray 构造函数。</p><p id="3936" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将使用透视数据框中的数据，然后我们需要明确指定坐标和维度:</p><figure class="no np nq nr gt jr"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="no np nq nr gt jr gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/dcb158a386e9f80868d68e2b585de431.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/format:webp/1*mfCmWV4QZ6SFDehiH0iSLw.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Output of the above cell</figcaption></figure><p id="652b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里需要注意的重要一点是，坐标数组必须是一维的，并且具有它们所代表的维度的长度。我们有一个(4，4)形状的数据数组，所以我们为构造函数提供了两个坐标数组。每个都是一维的，长度为 4。</p><h2 id="f2f3" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">使用带有投影坐标的构造函数创建 DataArray</h2><p id="0f77" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">我们将检查用投影坐标创建 DataArray 的最后一种方法。它们在某些情况下可能是有用的，但是它们有一个缺点，即坐标没有明确的可解释性。使用它们的最大的<em class="my">优势</em>是我们可以传递给 DataArray 构造函数相同形状的数组，用于数据和坐标，而不必考虑旋转我们的数据。</p><p id="fb6c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的例子中，我们有温度数据，我们有两个维度:纬度和经度，所以我们可以在一个任意形状的(不需要旋转)的<strong class="kf ir">二维数组中表示我们的数据，然后为构造函数提供两个相同形状的坐标数组来表示纬度和经度:</strong></p><figure class="no np nq nr gt jr"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="6df3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面，请注意在 DataArray 构造函数中指定坐标的方式。这是一个字典，它的键是坐标的名称，它的值是元组，它们的第一项是维度列表，第二项是坐标值。</p><pre class="no np nq nr gt ns mq nt nu aw nv bi"><span id="29e7" class="lb lc iq mq b gy nw nx l ny nz">da = xr.DataArray(data=temperature,<br/>                  coords={"lat": (["x","y"], lat),<br/>                          "lon": (["x","y"], lon)},<br/>                  dims=["x","y"])</span><span id="fa8c" class="lb lc iq mq b gy od nx l ny nz">da</span></pre><figure class="no np nq nr gt jr gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/8c43a0602a3c0dcc876bb8ec6bb08155.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/format:webp/1*2Z6ldRFNBtRdaHoFd1NcAQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Output of the above cell</figcaption></figure><p id="e90d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意它说 x 和 y 是没有坐标的维度。还要注意，lat 和 lon 旁边没有星号，因为它们是<a class="ae kc" href="https://xarray.pydata.org/en/stable/data-structures.html#coordinates" rel="noopener ugc nofollow" target="_blank">无量纲坐标</a>。</p><h1 id="6d2d" class="oj lc iq bd ld ok ol om lg on oo op lj oq or os lm ot ou ov lp ow ox oy ls oz bi translated">三维</h1><p id="5e6d" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">现在让我们创建另一个维度！让我们创建 2 天的温度数据，不是 1 天而是 2 天！</p><p id="6e97" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像以前一样，每天我们都需要一个二维(纬度和经度)温度值数组。为了表示 2 天的数据，我们希望将每日数组堆叠在一起，形成一个三维数组:</p><figure class="no np nq nr gt jr"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="a8d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们将数据传递给 DataArray 构造函数，并使用投影坐标:</p><pre class="no np nq nr gt ns mq nt nu aw nv bi"><span id="0294" class="lb lc iq mq b gy nw nx l ny nz">da = xr.DataArray(data=temperature_3d,<br/>                  coords={"lat": (["x","y"], lat),<br/>                          "lon": (["x","y"], lon), <br/>                          "day": ["day1","day2"]},<br/>                  dims=["x","y","day"])</span><span id="886e" class="lb lc iq mq b gy od nx l ny nz">da</span></pre><figure class="no np nq nr gt jr gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/5e4a64b8ba428f0cef186b20c06f7e2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*JCtwAbhlzWQ5hQavICET4g.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Output of the above cell</figcaption></figure></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><p id="b761" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以使用一个具有 3 级多索引的 pandas 系列来创建同样的东西。要创建一个系列，我们需要将数据扁平化，这意味着使其一维化:</p><pre class="no np nq nr gt ns mq nt nu aw nv bi"><span id="bb59" class="lb lc iq mq b gy nw nx l ny nz"># make data 1-dimensional<br/>temperature_1d = temperature_3d.flatten("F")<br/>lat = lat.flatten()<br/>lon = lon.flatten()</span><span id="ab48" class="lb lc iq mq b gy od nx l ny nz">day = ["day1","day2"]</span></pre><p id="b193" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们将创建一个具有 3 级多索引的系列:</p><figure class="no np nq nr gt jr"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="no np nq nr gt jr gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/f68196fbf8e38d82bb8357b3c2e9b0e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:624/format:webp/1*fRgFfkdYh5sFYFGw3Cx2kA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Output of the above cell</figcaption></figure><p id="5f82" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们将使用 from_series 方法创建一个 DataArray:</p><pre class="no np nq nr gt ns mq nt nu aw nv bi"><span id="8146" class="lb lc iq mq b gy nw nx l ny nz">da = xr.DataArray.from_series(s)<br/>da</span></pre><figure class="no np nq nr gt jr gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/8264876810cab2689baa813d9e905687.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*j_afYA_LzUFSc4QZbSgBPQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Output of the above cell</figcaption></figure><h1 id="349a" class="oj lc iq bd ld ok ol om lg on oo op lj oq or os lm ot ou ov lp ow ox oy ls oz bi translated">资料组</h1><p id="a8ba" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">到目前为止，我们只处理了温度数据。让我们添加压力数据:</p><figure class="no np nq nr gt jr"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="c7d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们将创建一个<em class="my">数据集</em>(不是一个数据数组)，以温度和压力作为<em class="my">数据变量。</em>对于投影坐标，<em class="my"> data_vars </em>参数和<em class="my"> coords </em>参数都需要一个类似于 DataArray 的<em class="my"> coords </em>参数的字典:</p><figure class="no np nq nr gt jr"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="no np nq nr gt jr gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/c741c8a7b3cfd4f83b2cbbc650b7b2e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*Ogikz6OfKDqHZxMaz_WoNg.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Output of the above cell</figcaption></figure></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><p id="18ea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以为每个<em class="my">数据变量</em>创建一个<em class="my">数据数组</em>，然后从<em class="my">数据数组创建一个<em class="my">数据集</em>。</em>让我们使用 from_series 方法为温度和压力创建两个数据数组，就像我们对三维情况所做的那样:</p><figure class="no np nq nr gt jr"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="b15e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们将使用这两个数据数组创建一个数据集:</p><pre class="no np nq nr gt ns mq nt nu aw nv bi"><span id="dbfa" class="lb lc iq mq b gy nw nx l ny nz">ds = xr.Dataset(data_vars={"temperature": da_temperature, "pressure": da_pressure})</span><span id="8b9f" class="lb lc iq mq b gy od nx l ny nz">ds</span></pre><figure class="no np nq nr gt jr gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/b5d264c3210782211bd39d87fc09d946.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*qRFo0oV97NNib2OVFJyvRw.png"/></div></figure><h2 id="5273" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">结论</h2><p id="a0a0" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">这是对 xarray 数据结构的快速介绍。xarray 还有更多的功能，比如索引、选择和分析数据。我不会在这里涉及这些，因为我想保持这个教程简单。我鼓励你看一看 xarray docs，并尝试使用它。希望这篇文章对你有用！</p></div></div>    
</body>
</html>