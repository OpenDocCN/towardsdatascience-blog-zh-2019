# 我写了一个程序，说得像海峡时报论坛的集体智慧

> 原文：<https://towardsdatascience.com/i-wrote-a-program-that-speaks-like-the-collective-hive-mind-of-the-straits-times-forum-41c96e7d8d71?source=collection_archive---------17----------------------->

新加坡主要报纸之一《海峡时报》的论坛版块是国家财富。论坛部分专门为干瘪而热情的新加坡人提供一个平台，分享他们对新加坡文化和社会的看法。

![](img/dfc4be4d4e577c5d3139f85ffc6f937a.png)

Photo by [Elijah O'Donnell](https://unsplash.com/@elijahsad?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

在众多开创性的作品中，有“[](https://www.straitstimes.com/forum/letters-on-the-web/unsafe-to-sew-on-train)**在火车上缝纫不安全”——其中一位关心此事的市民呼吁对火车上的缝纫进行严格监管，因为有人在公共交通工具上缝纫可能会对其他乘客造成身体伤害。如果有人被刺穿眼睛怎么办？他们如何寻求帮助？**

**还有我个人最喜欢的，“ [**武吉提马带学校培养精英学生**](https://www.straitstimes.com/forum/letters-on-the-web/bukit-timah-belt-schools-breeding-elitist-students) ”，热情地呼吁学生不要在星巴克浪费宝贵的钱，这样论坛信作者就可以牺牲她少得多的钱来买完全一样的饮料。**

**我发现我不能一天不在海峡时报论坛上搜罗现代新加坡完全缺乏的传统智慧。**

**因此，我决定创建海峡时报论坛信件生成器(STFLG ),不断告诉我需要做些什么，才能让新加坡社会不至于分崩离析。**

**如果你想试一试，可以在这里找到: [**海峡时报论坛信函生成器**](https://prestonlimlianjie.github.io/straits-times-forum-letter-generator/) 。我将在下一节解释 STFLG 使用的算法——跳到最后，看一些我最喜欢的 STFLG 制作的作品。**

# ****在碧昂斯的帮助下解释马尔可夫链****

**STFLG 的目标是创建一篇文章——本质上是一堆文本——采用海峡时报论坛版块的风格。**

**我为 STFLG 选择的底层算法是**马尔可夫链**，这是一种在手机上预测下一个单词和预测股票价格的常用技术。或者在其他令人捧腹的应用程序中，如[Trump tweet generator](https://filiph.github.io/markov/)——它与 STFLG 真的没有太大区别。**

**无论如何，马尔可夫链是一个非常简单的算法，但经常被不必要的复杂数学符号所掩盖。让我试着用 [*的一句歌词来解释马尔可夫链，这首歌词来自*碧昂斯**](https://open.spotify.com/track/5IVuqXILoxVWvWEPm82Jxr?si=jIJxlJ_bTf6ExKjQnfRXXA) 的《热恋中的 T4》:**

> **<start>哦哦哦哦哦哦哦不不</start>**

**假设我们要创作一首和*热恋*风格相同的歌词。我们的算法必须做两件事:(1)学习歌曲的风格，以及(2)生成具有该风格的歌词。**

**请记住，我们的目标不是精确地复制歌词，而是创作一首本质上相似的新歌词。**

## **具体地说，(1)可以通过研究一个语料库(文本主体)并计算一个单词出现的概率来实现，假设已经选择了另一个单词。**

**这听起来像抽象的天书，所以让我们看一个具体的例子。**

**在上面的歌词中，我们知道“哦”100%都是在“嗯”之后。我们还知道，50%的情况下“哦”在“不”之后，25%的情况下“哦”在“哦”之后。鉴于这些概率，我们可以说:**

**如果当前单词是:**

> **“呃”，*下一个词是*“哦”——**100%* “哦”，*下一个词是*“呃”——***50%***，“哦”——***25%***，“不”—— *"<结束>"—***50%****的时间分别为* " <开始>"，*接下来的话就是*“呃”—**的时间******

****我们刚刚创建了我们的马尔可夫链！****

## ****现在让我们执行步骤(2):使用我们的马尔可夫链生成一个新的歌词。****

****先从“ *<开始>* ”开始，掷骰子挑下一个字。既然“ *<开始>* 之后的下一个词是“*呃*”100%的时候，我们选择“*呃*”。现在我们掷骰子来选择下一个单词。在“*呃*”之后的下一个词是“*哦*”一个 100%的时候也是，所以我们挑“*哦*”。****

****我们现在有:****

> ****<start>呃哦”</start>****

****这就是有趣的地方。****

****假设我们有“哦”这个词，我们的下一个词可能是“呃”、“不”或“哦”。假设我们在这一时刻掷骰子，这个词恰好是“哦”。但是如果我们重新做整个过程，选择的单词可能是“不”或者“呃”。因此，我们可以:****

> ****"<start>嗯哦嗯……—***50%***的时间
> " <开始>嗯哦……—***25%****的时间* " <开始>嗯哦不…"—**时间的 25%**</start>****

****如果我们有三个词，现在有三种不同的可能结果，当我们有四个词时，我们可以有六种结果:****

> ****“<start>嗯哦嗯哦”——***50%****的时间* “<开始>嗯哦哦嗯”——***12.5%****的时间* “<开始>嗯哦哦哦”——***6.25%*** *>呃哦不不”——****12.5%****的时间* <开始>呃哦不<结束>——***——****的时间***</start>****

***经过一些# [quickmaths](https://www.youtube.com/watch?v=3M_5oYU-IsU) 之后，我们得到了原来的歌词:***

> ***<start>呃哦呃哦呃哦哦不不不<end>——***0.78125%****的时间*</end></start>***

***![](img/2e7a6389e90bbab7115a578bc4006eef.png)***

***Skrrat, skidi-kat-kat. Boom.***

***然而，我们得到的是相似但不完全相同的歌词(不同之处用粗体突出显示):***

> ***"<start>呃哦呃哦呃哦**呃**哦不不不<结束>"—***0.78125%****时间* " <开始>呃哦哦哦哦**哦不不不不不<结束>—***0*****</start>***

****Skidiki-pap-pap 和一个 pu-pu-pudrrrrr-boom*。
*Skya，嘟-嘟-库-库-敦-敦。****

***#快速数学。***

***抱歉，我走神了。***

***有趣的是，在语料库中只有一个歌词的这个玩具示例中，生成原始歌词的概率是 0.78125%，但是生成上述 3 个相似歌词中的任何一个的概率要高得多**(4.3%)**。***

***因此，随着马尔可夫链的增长，生成的歌词不太可能与原始歌词完全相同，但很可能是相似的。***

***这就是马尔可夫链背后的直觉。***

## ***改进我们的算法:二阶马尔可夫链***

***上述算法被称为**一阶马尔可夫链**；它在大多数情况下工作正常，但在某些情况下会出现故障。***

***考虑下面的例子。我们生成了三个词，“*我吃了一个*”。一阶马尔可夫链试图找到下一个单词。然而，它有五个选项可供选择——并非所有选项对人类读者都有意义。***

> ******一阶马尔可夫链*** *当前词:“*一个*”
> 下一个词:“*鸭子、窗户、长颈鹿、微风、胡萝卜*”****

***但是该算法选择“*窗口*的可能性与选择“*鸭子*”的可能性一样大。我不知道你怎么想，但我不认为自己是窗户的行家。***

***这是一阶马尔可夫链出错的地方。我们可以通过使用**二阶马尔可夫链**来改进生成器。除了一个关键细节之外，二阶马尔可夫链类似于上述一阶马尔可夫链。***

***二阶马尔可夫链不是基于前一个单词是什么来选择下一个单词，而是基于前两个单词是什么来选择下一个单词。***

***考虑下面的例子:***

> ******二阶马尔可夫链*** *当前两个字:*吃了一个**下一个字:*鸭子，胡萝卜****

*****二阶马尔可夫链比一阶马尔可夫链更有可能产生可信的文章，因为它们有更多的“历史背景”。*****

*****人们可以想象实现更高阶的马尔可夫链来提高生成器的预测能力。对于股票价格或蛋白质折叠预测的应用来说，情况确实如此，人们希望预测尽可能准确。但在我们的情况下，我们只是想要可信的东西，而不是现有的海峡时报论坛信件的精确副本。*****

# *****结果*****

*****我非常努力地研究了数以千计的《海峡时报》论坛信件，并能够创建一个二阶马尔可夫链来捕捉论坛信件的“风格”。然后我用上面提到的二阶马尔可夫链生成了自己的文章——你可以在这里摆弄一下:[**【海峡时报论坛信函生成器】**](https://prestonlimlianjie.github.io/straits-times-forum-letter-generator/) 。*****

*****这里有一些我最喜欢的由 STFLG 生成的文章。我真的认为其中一些是诗歌。*****

*****免责声明:这些文章中没有一篇反映我的任何观点…或者任何人的观点。*****

> *******一起张贴作品。*******
> 
> *****在病房里，如果你是一个强加了严格的行为准则和水印的和平在许多政府拨款和给予应有的重视，我们的环境立即，但没有被授予，也许更多的室外座位提供给企图自杀的人；9 月 9 日)。这可以说是最有效的生活方式，却是不合理的。*****
> 
> *****而我们大多数人需要使用泰瑟枪来抑制暴力或挥舞武器的对象。*****
> 
> *****而不是嫉妒部长们的高薪。*****
> 
> *******学校，需要尊重和要求表面空间。*******
> 
> *****例如，夕阳产业。我希望所有人都能买得起小贩的食物。*****
> 
> *****学校里不超过 400 个 SCC*****
> 
> *****而投资于国家反馈单位——保证获得负担得起的、高质量的商品和抗击抑郁症的人被贴上“被宠坏”或“虚弱”的标签。*****
> 
> *****或许去新加坡休息。*****
> 
> *******有账户，ATM 卡可以保障和便利但不拥有汽车。*******
> 
> *****它们帮助新加坡人理解纳税人进入公众视野的主要驱动力。*****
> 
> *****上个月提供的估计支出是因为领导人也是自然资源极其匮乏的人，以确保这些机构在不解决固有问题的情况下继续增加土地销售计划，同时通过一个银行账户抑制市场情绪，使外籍家政工人能够获得社会援助，以帮助少数在劳动力市场表现良好的新加坡人获得社会援助。*****
> 
> *****我们为获得这一最高荣誉而自豪。*****
> 
> *******一周信#1:新加坡应柔佛要求对马来西亚作出对等回应；1 月 6 日)。*******
> 
> *****我也想知道有多少允许我们回到马车上，发现这意味着针对特定群体的国家发展。*****
> 
> *******保护区，改善乌宾岛的生活社区，这使得乌宾岛正在组织“尽情吃”榴莲马来西亚之旅。*******
> 
> *****因此我们应该收养。*****
> 
> *****最近的网络攻击，我意识到这将是勇敢和强大的公司治理，往往以技术为基础。*****
> 
> *****社会和家庭发展部*****
> 
> *******狮子缺少罢工者*******
> 
> *****新加坡最大的资源就是实力。*****
> 
> *****我已经看到这些如何一直使用国内生产总值(GDP)和人均 GDP 公用事业使用率更客观地更好地了解过去的有效性和通过短信发送的约会提醒。*****
> 
> *****我们相信，一个分裂的东盟将会对一些他们没有停止的事情作出回应，比如最近的 SNEC 事件，它会定期指控是否基于他们的食品避税。*****
> 
> *****一点一点地，我们都可以读到我投票选出的最佳新兵的照片——很少有人会不同意 Seah Yam Meng 先生的信(在 PMD 的舒适环境下对我们的湿货市场进行机场般的检查，彻底管理乱停车)。*****

# *****外卖食品*****

*****这是你的另一个有趣而无聊的项目，主要是因为我卧病在床。哦，软件工程师做的事情是为了娱乐/而不是恢复。*****

*****以下是我的建议:*****

1.  *****我惊讶于实现我自己的二阶马尔可夫链是如此容易。*****
2.  *****一两年后，我可能会后悔制作了一个模仿《海峡时报》论坛集体思维的节目。*****

*****如果你喜欢这个，一定要看看我的其他作品，比如我做的一个关于 [**机器学习鸡米分类器**](https://blog.usejournal.com/i-made-a-machine-learning-chicken-rice-classifier-in-4-hours-to-tell-me-what-type-of-chicken-rice-e9b1af4aa069) 的作品。*****