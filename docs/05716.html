<html>
<head>
<title>Answering Monty Hall puzzle with Monte Carlo</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用蒙特卡洛回答蒙蒂·霍尔难题</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/answering-monty-hall-problem-with-monte-carlo-6c6069e39bfe?source=collection_archive---------17-----------------------#2019-08-21">https://towardsdatascience.com/answering-monty-hall-problem-with-monte-carlo-6c6069e39bfe?source=collection_archive---------17-----------------------#2019-08-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/80745a2cf9ae9b2a680e2df0243a5fa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mQYZDsIGuU7ALGgh"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo by <a class="ae jd" href="https://unsplash.com/@adamrhodes?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Adam Rhodes</a> on <a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a>. <a class="ae jd" href="https://adamrhodesphotography.co.uk/" rel="noopener ugc nofollow" target="_blank">Adams’s Website</a></figcaption></figure><div class=""/><div class=""><h2 id="48e7" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">蒙特卡洛是一种概念简单但功能强大的技术，被广泛使用。它利用随机性来回答问题。</h2></div><p id="358d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这篇文章中，我将解释如何使用<a class="ae jd" href="https://en.wikipedia.org/wiki/Monte_Carlo_method" rel="noopener ugc nofollow" target="_blank">蒙特卡罗方法</a>解决<a class="ae jd" href="https://en.wikipedia.org/wiki/Monty_Hall_problem" rel="noopener ugc nofollow" target="_blank">蒙蒂霍尔问题</a>。这是用 python 实现的，Python 是一种编程语言，它的名字本身就是向英国喜剧团体——<a class="ae jd" href="https://en.wikipedia.org/wiki/Monty_Python" rel="noopener ugc nofollow" target="_blank">蒙蒂 Python 致敬。</a></p><h1 id="217c" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">蒙蒂·霍尔问题</h1><p id="9c23" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">我第一次接触到蒙蒂霍尔问题是在电影《21 世纪》。这个片段展示了这个问题。</p><p id="6a4d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Vsauce 的迈克尔大卫·史蒂文斯<a class="ae jd" href="https://www.youtube.com/watch?v=TVq2ivVpZgQ" rel="noopener ugc nofollow" target="_blank">和 Vox </a>对此也有解释。</p><p id="61b8" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们跳入问题— <em class="mo">想象一下，你面前有三扇门。</em></p><figure class="mq mr ms mt gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mp"><img src="../Images/d82b618a03f97b71ec8d780556b5bbea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cevAgoOmwS8MQXCNPietUg.jpeg"/></div></div></figure><p id="2917" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mo">游戏节目主持人让你选择其中一扇门。如果你选择了正确的门，你会赢得一辆车，否则你会得到一只山羊。</em></p><p id="e62e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mo">假设您选择了门№1 </em></p><figure class="mq mr ms mt gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mp"><img src="../Images/78130c05439ee7b3babab04581f90748.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yOI_wpqRqkX443gZMC2ilA.jpeg"/></div></div></figure><p id="5884" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">知道每扇门后是什么的游戏节目主持人打开 3 号门，露出一只山羊。</p><figure class="mq mr ms mt gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mp"><img src="../Images/ccfe07f5d7bbe1f003d989d0a65f0a3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hffOlG1UfQCaemcbgMVXKg.jpeg"/></div></div></figure><p id="e3ef" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mo">游戏节目主持人给你两个选择</em></p><ol class=""><li id="469d" class="mu mv jg kx b ky kz lb lc le mw li mx lm my lq mz na nb nc bi translated"><em class="mo">贴着 1 号门</em></li><li id="124f" class="mu mv jg kx b ky nd lb ne le nf li ng lm nh lq mz na nb nc bi translated"><em class="mo">切换到 2 号门</em></li></ol><p id="3cdd" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你会选择哪一个？</p><h1 id="8c2a" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">蒙特卡罗实验</h1><p id="1f5f" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">蒙特卡洛实验的定义根据<a class="ae jd" href="https://en.wikipedia.org/wiki/Monte_Carlo_method" rel="noopener ugc nofollow" target="_blank">维基百科</a> <strong class="kx jh"> <em class="mo">蒙特卡洛方法</em> </strong> <em class="mo">，或</em> <strong class="kx jh"> <em class="mo">蒙特卡洛实验</em> </strong> <em class="mo">，是一大类</em> <a class="ae jd" href="https://en.wikipedia.org/wiki/Computation" rel="noopener ugc nofollow" target="_blank"> <em class="mo">计算</em> </a> <em class="mo"> </em> <a class="ae jd" href="https://en.wikipedia.org/wiki/Algorithm" rel="noopener ugc nofollow" target="_blank"> <em class="mo">算法</em> </a> <em class="mo">即依靠重复</em> <a class="ae jd" href="https://en.wikipedia.org/wiki/Random_sampling" rel="noopener ugc nofollow" target="_blank"> <em class="mo">随机抽样</em> </a> <em class="mo">底层概念是用</em> <a class="ae jd" href="https://en.wikipedia.org/wiki/Randomness" rel="noopener ugc nofollow" target="_blank"> <em class="mo">随机性</em> </a> <em class="mo">来解决原则上可能是</em> <a class="ae jd" href="https://en.wikipedia.org/wiki/Deterministic_system" rel="noopener ugc nofollow" target="_blank"> <em class="mo">确定性</em> </a> <em class="mo">的问题。</em></p><p id="37ec" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这意味着你可以模拟一个实验，基于某个或某些条件模拟任意次，然后分析模拟的结果以得出一个解决方案。</p><p id="59b7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在电影《复仇者联盟 3：无限战争》中，奇异博士对未来进行了近 1400 万次模拟，以确定未来有多少结局，复仇者联盟会赢吗？本质上，他是在应用蒙特卡罗实验的原理。</p><h1 id="987d" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">用蒙特卡洛模拟蒙提霍尔</h1><p id="189c" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">想象一下前面描述的游戏陷入了一个循环，就像电影<a class="ae jd" href="https://en.wikipedia.org/wiki/Groundhog_Day_(film)" rel="noopener ugc nofollow" target="_blank">土拨鼠日</a>中的比利·穆雷一样。</p><p id="8f5c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">每次游戏开始时，我们记录坚持第一个选择的门和切换到新的门的成功和失败。</p><p id="988c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">假设这个游戏已经进行了 100 次。我们会检查在这 100 场比赛中，有多少场比赛的车是通过不开关车门和开关车门赢得的。</p><p id="ac0c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">通过查看这些比率，我们将知道哪个选项增加了成功的机会。</p><h1 id="46df" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">编纂蒙蒂霍尔和蒙特卡洛</h1><p id="9951" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">让我们定义一个模拟蒙蒂霍尔问题的函数</p><pre class="mq mr ms mt gt ni nj nk nl aw nm bi"><span id="20b9" class="nn ls jg nj b gy no np l nq nr">def monty_hall():<br/>    ...</span></pre><p id="57af" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在该函数中，创建三个车门，并将汽车随机分配给其中一个车门。列表中的值“1”代表汽车</p><pre class="mq mr ms mt gt ni nj nk nl aw nm bi"><span id="cb51" class="nn ls jg nj b gy no np l nq nr">doors = [0, 1, 0]<br/>shuffle(doors)</span></pre><p id="8836" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">玩家选择打开一扇门。值 0、1 和 2 代表列表变量“门”的索引</p><pre class="mq mr ms mt gt ni nj nk nl aw nm bi"><span id="7824" class="nn ls jg nj b gy no np l nq nr">door_selected = choice([0, 1, 2])</span></pre><p id="8604" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">游戏节目主持人现在打开后面没有汽车的门</p><pre class="mq mr ms mt gt ni nj nk nl aw nm bi"><span id="e625" class="nn ls jg nj b gy no np l nq nr">non_car_doors = list()<br/>for i,d in enumerate(doors):<br/> if d == 0 and i != door_selected: non_car_doors.append(i)</span><span id="ddaf" class="nn ls jg nj b gy ns np l nq nr">door_opened = choice(non_car_doors)</span></pre><p id="22fb" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，评估以下两个选择</p><ol class=""><li id="ca01" class="mu mv jg kx b ky kz lb lc le mw li mx lm my lq mz na nb nc bi translated">坚持最初的选择赢得一辆车</li></ol><pre class="mq mr ms mt gt ni nj nk nl aw nm bi"><span id="4400" class="nn ls jg nj b gy no np l nq nr">non_switch_success =  True if doors[door_selected] == 1 else False</span></pre><p id="09cf" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">2.通过切换到剩下的门赢得一辆车</p><pre class="mq mr ms mt gt ni nj nk nl aw nm bi"><span id="1414" class="nn ls jg nj b gy no np l nq nr">remaining_door = set([0,1,2]).difference([door_selected, door_opened])<br/>remaining_door = remaining_door.pop()<br/>switch_success =  True if doors[remaining_door] == 1 else False</span></pre><p id="dd6c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，返回每个选项的成功结果</p><pre class="mq mr ms mt gt ni nj nk nl aw nm bi"><span id="c19c" class="nn ls jg nj b gy no np l nq nr">return non_switch_success, switch_success</span></pre><p id="1135" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">定义蒙特卡洛函数，该函数采用单个参数“n”来表示要运行的模拟数量。运行 Monte Hall 模拟“n”次，并返回每个选项的成功分布。</p><pre class="mq mr ms mt gt ni nj nk nl aw nm bi"><span id="4c16" class="nn ls jg nj b gy no np l nq nr">def monte_carlo(n):<br/>    non_switch_success_count = 0<br/>    switch_success_count = 0</span><span id="6ecd" class="nn ls jg nj b gy ns np l nq nr">for i in range(n):<br/>        ns, ss = monty_hall()<br/>        non_switch_success_count += ns<br/>        switch_success_count += ss</span><span id="d0ef" class="nn ls jg nj b gy ns np l nq nr">print(f"Number of plays: {n}")<br/>    print(f"Number of success on switch: {switch_success_count}     <br/>     {(switch_success_count/n)*100}%")<br/>    print(f"Number of success on non-switch:                       {non_switch_success_count}  <br/>     {(non_switch_success_count/n)*100}%")</span></pre><p id="c71a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">完整的代码可以在下面找到，如何运行它在标题评论。</p><figure class="mq mr ms mt gt is"><div class="bz fp l di"><div class="nt nu l"/></div></figure><h1 id="6ab4" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">运行模拟</h1><p id="fbca" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">让我们模拟 100 个游戏</p><pre class="mq mr ms mt gt ni nj nk nl aw nm bi"><span id="56cc" class="nn ls jg nj b gy no np l nq nr">╰─$ ./main.py 100<br/>Number of plays: 100<br/>Number of success on switch: 71  71.0%<br/>Number of success on non-switch: 29  28.999999999999996%</span></pre><p id="e193" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以看到切换的成功率更高。</p><p id="25b4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们再运行一次</p><pre class="mq mr ms mt gt ni nj nk nl aw nm bi"><span id="3736" class="nn ls jg nj b gy no np l nq nr">╰─$ ./main.py 100<br/>Number of plays: 100<br/>Number of success on switch: 62  62.0%<br/>Number of success on non-switch: 38  38.0%</span></pre><p id="438a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们仍然可以看到切换的成功率更高，但是成功率差别很大。</p><p id="c093" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们对 100 万个游戏进行同样的模拟，然后做 3 次，看看成功率是否有很大的不同。</p><pre class="mq mr ms mt gt ni nj nk nl aw nm bi"><span id="de91" class="nn ls jg nj b gy no np l nq nr">╰─$ ./main.py 1000000<br/>Number of plays: 1000000<br/>Number of success on switch: 666566  66.6566%<br/>Number of success on non-switch: 333434  33.3434%</span><span id="9b65" class="nn ls jg nj b gy ns np l nq nr">╰─$ ./main.py 1000000<br/>Number of plays: 1000000<br/>Number of success on switch: 666588  66.6588%<br/>Number of success on non-switch: 333412  33.3412%</span><span id="af06" class="nn ls jg nj b gy ns np l nq nr">╰─$ ./main.py 1000000<br/>Number of plays: 1000000<br/>Number of success on switch: 666628  66.6628%<br/>Number of success on non-switch: 333372  33.3372%</span></pre><p id="2694" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以看到，成功的百分比变化不大，它告诉我们，如果我们进行转换，那么获胜的机会是三分之二。</p><p id="f7f2" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">进行切换！</p><figure class="mq mr ms mt gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mp"><img src="../Images/f8e2bcbd914ebcfc4c638f95c68e04bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DlOkvUgEynonk2LTG-x0bA.jpeg"/></div></div></figure><h1 id="0461" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">结论</h1><p id="2d43" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">这篇文章的动机是介绍蒙特卡罗方法，并将其应用于一个对新手来说容易理解和有趣的问题。蒙特卡罗方法可能在概念上看起来很简单，但它是一种强大的方法，广泛用于金融行业、强化学习、物理科学、计算生物学等领域。</p></div></div>    
</body>
</html>