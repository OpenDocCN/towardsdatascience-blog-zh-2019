<html>
<head>
<title>How To Use Python To Get SalesForce Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用 Python 获取 SalesForce 数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/using-python-to-get-salesforce-data-97bb5a7ef2cf?source=collection_archive---------3-----------------------#2019-10-12">https://towardsdatascience.com/using-python-to-get-salesforce-data-97bb5a7ef2cf?source=collection_archive---------3-----------------------#2019-10-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/33d0f0dbf3935f9f842d47edf666960e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Jwb5TH8LwCnIvHXp"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Photo by <a class="ae kf" href="https://unsplash.com/@dnevozhai?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Denys Nevozhai</a> on <a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1208" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我在一家大量使用 SalesForce 的初创公司工作。</p><p id="4434" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我第一次开始时，我们必须通过 Salesforce 网站登录。转到“报告”选项卡，创建一个包含必要字段的报告。下载逗号分隔值电子表格。在这里和那里做一些数据清理。主要是过滤字段，看看有没有空值或细微差别。再次导出 CSV，并在 Excel 中做一个 Vlookup，看看我们有什么数据。</p><p id="c89c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我心想，一定有一种更简单的方法，我只需运行一个 Python 脚本就可以完成这项工作。做了一些谷歌搜索，发现了<code class="fe le lf lg lh b"><a class="ae kf" href="https://github.com/simple-salesforce/simple-salesforce/blob/master/README.rst" rel="noopener ugc nofollow" target="_blank">simple_salesforce</a></code>。</p><blockquote class="li lj lk"><p id="de77" class="kg kh ll ki b kj kk kl km kn ko kp kq lm ks kt ku ln kw kx ky lo la lb lc ld im bi translated"><em class="it">来自他们的网站</em> — Simple Salesforce 是一个为 Python 2.6、2.7、3.3、3.4、3.5 和 3.6 构建的基本 Salesforce.com REST API 客户端。目标是为 REST 资源和 APEX API 提供一个非常底层的接口，返回 API JSON 响应的字典。</p></blockquote><p id="2edc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">使用 Python 拉 Salesforce 数据需要的东西:<br/> 1。Python 模块<em class="ll">simple _ sales force<br/>T11】2。具有 API 访问权限的 SalesForce 凭据</em></strong></p><p id="f628" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设你已经掌握了 Python 的基本知识，那么继续在你的机器上安装<code class="fe le lf lg lh b">simple_salesforce</code> <em class="ll"> </em>。</p><pre class="lp lq lr ls gt lt lh lu lv aw lw bi"><span id="6549" class="lx ly it lh b gy lz ma l mb mc">pip install simple_salesforce</span></pre><p id="689b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">完成后，我们可以继续创建我们的 Python 文件，并进行必要的导入。我们还需要我们的 SalesForce 凭据。如果不能联系您的 SalesForce 开发人员，帐户必须具有 API 访问权限。</p><pre class="lp lq lr ls gt lt lh lu lv aw lw bi"><span id="bb67" class="lx ly it lh b gy lz ma l mb mc">from simple_salesforce import Salesforce</span><span id="ae65" class="lx ly it lh b gy md ma l mb mc">sf = Salesforce(<br/>username='myemail@example.com', <br/>password='password', <br/>security_token='token')</span></pre><p id="6f36" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您还没有 SalesForce 安全令牌，请登录到 SalesForce 网站。导航到设置。然后到我的个人信息，在那个下拉菜单下应该重置我的安全令牌。这将以带有字母数字代码的电子邮件形式发送给您。</p><p id="daac" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">使用 SOQL 查询 SalesForce 数据</strong></p><p id="38ac" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们现在可以使用 Python 登录到 SalesForce。为了查询数据，<code class="fe le lf lg lh b">simple_salesforce</code>有一个叫做<code class="fe le lf lg lh b">query_all</code>的方法，这使得获取数据变得非常容易。SalesForce 有自己的方式来编写查询，称为 SalesForce 对象查询语言。</p><p id="8fdb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是使用 Python 和自定义字段进行查询的示例:</p><pre class="lp lq lr ls gt lt lh lu lv aw lw bi"><span id="f301" class="lx ly it lh b gy lz ma l mb mc">"SELECT Owner.Name, store_id__c, account_number__c, username__c, password__c, program_status__c, FROM Account WHERE program_status__c IN ('Live','Test')"</span></pre><p id="e2c0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们现在可以将这个 SOQL 代码插入到方法中，并将其提取到一个变量中:</p><pre class="lp lq lr ls gt lt lh lu lv aw lw bi"><span id="60d9" class="lx ly it lh b gy lz ma l mb mc">sf_data = sf.query_all("SELECT Owner.Name, store_id__c, account_number__c, username__c, password__c, program_status__c, FROM Account WHERE program_status__c IN ('Live','Test')")</span></pre><p id="d37a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">输出将是 JSON 格式，但是我们可以使用<code class="fe le lf lg lh b"><a class="ae kf" href="https://pandas.pydata.org/pandas-docs/stable/index.html" rel="noopener ugc nofollow" target="_blank">pandas</a></code>很容易地将其转换成数据帧。JSON 返回了一些我认为不必要的属性，所以我放弃了它们。</p><pre class="lp lq lr ls gt lt lh lu lv aw lw bi"><span id="9dbf" class="lx ly it lh b gy lz ma l mb mc">sf_df = pd.DataFrame(sf_data['records']).drop(columns='attributes')</span></pre><p id="1b87" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们现在有了一个数据框架，可以进行数据分析和数据清理。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><p id="be29" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">访问我的代码<a class="ae kf" href="https://www.patreon.com/melvfnz" rel="noopener ugc nofollow" target="_blank">这里</a>！</p><p id="d52a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我在<a class="ae kf" href="https://square.site/book/8M6SR06V2RQRB/mentor-melv" rel="noopener ugc nofollow" target="_blank">这里也有家教和职业指导</a>！</p><p id="f991" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你们有任何问题、评论或担忧，别忘了在<a class="ae kf" href="https://www.linkedin.com/in/melvfernandez/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系我！</p></div></div>    
</body>
</html>