# 使用 Rmusic 软件包在 R 中创作和播放音乐

> 原文：<https://towardsdatascience.com/compose-and-play-music-in-r-with-the-rmusic-package-b2afa90761ea?source=collection_archive---------30----------------------->

## 介绍一个有趣的，实验性的软件包，它允许你创作简单的音乐，并在你的休息时间播放它们

几年前的圣诞节，在这个老 Stackoverflow post 的帮助下，我创作了一个音乐大师版本的《铃儿响叮当》。我只是回到这段代码，把它变成了一个 R 包，可以播放你想创作的任何曲子。

## 安装软件包

要安装该软件包，请运行:

```
devtools::install_github("keithmcnulty/Rmusic", build_vignettes = TRUE)
```

## 作曲

要创作简单的音乐，你需要创建两个向量，一个包含音符，另一个包含节拍中音符的持续时间。当然，这两个向量的长度应该是一样的。

根据以下规则，notes 向量应该是字符串向量:

*   音符从`"A"`到`"G"`
*   半音是通过在弦上加一个`#`(升)或`b`(降)来表示的，例如`"A#"`或`"Bb"`
*   默认八度音程是第四钢琴八度音程。对于较低或较高的八度音程，将八度音程编号附加到弦上，例如`"Ab3"`、`"C3"`、`"G#5"`

持续时间向量包含简单的数字字符串，代表每个音符的节拍数，例如`2`或`1.25`

## 例如:艺术大师《铃儿响叮当》

我喜欢把音符向量写成每一小节音乐的字符串，然后用`strsplit()`把它们分解成想要的格式:

```
jbells_pitch <- paste(
  "E E E",
  "E E E",
  "E G C D",
  "E",
  "F F F F",
  "F E E E",
  "E D D E",
  "D G",
  "E E E",
  "E E E",
  "E G C D",
  "E",
  "F F F F",
  "F E E E E",
  "G G F D",
  "C",
  "G3 E D C",
  "G3",
  "G3 G3 G3 E D C",
  "A3",
  "A3 F E D",
  "B3",
  "G G F D",
  "E",
  "G3 E D C",
  "G3",
  "G3 E D C",
  "A3 A3", 
  "A3 F E D",
  "G G G G A G F D",
  "C C5 B A G F G",
  "E E E G C D",
  "E E E G C D",
  "E F G A C E D F",
  "E C D E F G A G",
  "F F F F F F",
  "F E E E E E",
  "E D D D D E",
  "D D E F G F E D",
  "E E E G C D",
  "E E E G C D",
  "E F G A C E D F",
  "E C D E F G A G",
  "F F F F F F",
  "F E E E E E",
  "G C5 B A G F E D",
  "C C E G C5"
)jbells_pitch <- strsplit(jbells_pitch, " ")[[1]]
```

对于持续时间向量:

```
jbells_duration <- c(
  1, 1, 2, 
  1, 1, 2, 
  1, 1, 1.5, 0.5, 
  4, 
  1, 1, 1, 1, 
  1, 1, 1, 1, 
  1, 1, 1, 1,
  2, 2,
  1, 1, 2, 
  1, 1, 2, 
  1, 1, 1.5, 0.5, 
  4, 
  1, 1, 1, 1, 
  1, 1, 1, 0.5, 0.5, 
  1, 1, 1, 1,
  4,
  1, 1, 1, 1, 
  3, .5, .5, 
  1, 1, 1, 1, 
  4,
  1, 1, 1, 1, 
  4,
  1, 1, 1, 1, 
  4,
  1, 1, 1, 1, 
  4,
  1, 1, 1, 1, 
  3, 1,
  1, 1, 1, 1,
  1, 1, 1, 1, 
  1, 1, 1, 1, 
  1, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5,
  1, 1, 0.5, 0.5, 0.5, 0.5, 
  1, 1, 0.5, 0.5, 0.5, 0.5,
  0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5,
  0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5,
  1, 0.5, 0.5, 1, 0.5, 0.5, 
  1, 0.5, 0.5, 1, 0.5, 0.5, 
  1, 0.5, 0.5, 0.5, 0.5, 1,
  1, 0.33, 0.33, 0.33, 1, 0.33, 0.33, 0.33,
  1, 1, 0.5, 0.5, 0.5, 0.5, 
  1, 1, 0.5, 0.5, 0.5, 0.5,
  0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5,
  0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5,
  1, 0.5, 0.5, 1, 0.5, 0.5, 
  1, 0.5, 0.5, 1, 0.5, 0.5, 
  0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5,
  1, 0.33, 0.33, 0.33, 2
)
```

你可以在套装的简介中找到一些其他的例子。

## 播放或保存音乐

要在 R 会话中播放叮当音乐，只需运行:

```
Rmusic::play_music(jbells_pitch, jbells_duration)
```

`play_music()`函数期望音符和持续时间向量作为其前两个参数，并且还有一个`tempo`参数，其默认值为每分钟 240 拍。

要将其保存为`.wav`文件，只需运行:

```
Rmusic::save_music(jbells_pitch, jbells_duration, output_file = "jbells.wav")
```

`save_music()`函数也需要输出`.wav`文件的路径。如果需要，请参阅帮助文档。

*最初我是一名纯粹的数学家，后来我成为一名心理学家和数据科学家。我热衷于将所有这些学科的严密性应用于复杂的人的问题。我也是一个编码极客和日本 RPG 的超级粉丝。在* [*领英*](https://www.linkedin.com/in/keith-mcnulty/) *或* [*推特*](https://twitter.com/dr_keithmcnulty) *上找到我。*

![](img/974b31569db4c4ee5a2a97f21f65e1e1.png)