<html>
<head>
<title>Comparing Python Virtual Environment tools</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">比较 Python 虚拟环境工具</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/comparing-python-virtual-environment-tools-9a6543643a44?source=collection_archive---------1-----------------------#2019-02-01">https://towardsdatascience.com/comparing-python-virtual-environment-tools-9a6543643a44?source=collection_archive---------1-----------------------#2019-02-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/cb1c1c50d6ee59396e691bb10bd3d056.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*t-V8CKNj9fKsBMUl"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@rawpixel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">rawpixel</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><blockquote class="kd ke kf"><p id="67f7" class="kg kh ki kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">感谢<a class="lf lg ep" href="https://medium.com/u/fb29fa8f93c4?source=post_page-----9a6543643a44--------------------------------" rel="noopener" target="_blank">凯斯·史密斯</a>、<a class="lf lg ep" href="https://medium.com/u/a34700ebd09d?source=post_page-----9a6543643a44--------------------------------" rel="noopener" target="_blank">亚历山大·莫尔</a>、<a class="lf lg ep" href="https://medium.com/u/a317127888ca?source=post_page-----9a6543643a44--------------------------------" rel="noopener" target="_blank">维克多·基里洛夫</a>和<a class="lf lg ep" href="https://medium.com/u/4505a3589b13?source=post_page-----9a6543643a44--------------------------------" rel="noopener" target="_blank">阿兰·斯派特</a>推荐<code class="fe lh li lj lk b">pew</code>、<code class="fe lh li lj lk b">venv</code>和<code class="fe lh li lj lk b">pipenv</code>。</p></blockquote><p id="1aaf" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated">我很喜欢我们在 Medium 上的社区。我最近发表了一篇关于为 Python 项目使用<a class="ae kc" rel="noopener" target="_blank" href="/python-virtual-environments-made-easy-fe0c603fe601">虚拟环境的文章。这篇文章很受欢迎，读者的反馈为我打开了一个新的视角。我以前不知道<code class="fe lh li lj lk b">pew</code>、<code class="fe lh li lj lk b">venv</code>和<code class="fe lh li lj lk b">pipenv</code>。他们的推荐帮助我了解了该领域的最新技术，并进一步提高了我的知识和经验。</a></p><p id="ee8e" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated">在他们的建议之后，我阅读了所有的建议。在这篇文章中，我将分享我学到的新的虚拟环境工具，以及它们之间的对比。</p><h1 id="6939" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">Python 虚拟环境的各种工具</h1><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mm"><img src="../Images/2a6dbec9ccfebb6ddae4d44b32bc9493.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4jXmUtlz9kGgfZ1P"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@plushdesignstudio?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Plush Design Studio</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="187a" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated">我浏览了各种文档和文章，了解了它们如何带来不同的东西。我的发现描述如下:</p><h2 id="e4ad" class="mr lp iq bd lq ms mt dn lu mu mv dp ly ll mw mx mc lm my mz mg ln na nb mk nc bi translated">1.虚拟</h2><p id="6572" class="pw-post-body-paragraph kg kh iq kj b kk nd km kn ko ne kq kr ll nf ku kv lm ng ky kz ln nh lc ld le ij bi translated">我在之前的文章中已经讨论过<code class="fe lh li lj lk b">virtualenv</code>了。你可以在这里查看<a class="ae kc" rel="noopener" target="_blank" href="/python-virtual-environments-made-easy-fe0c603fe601">。该指南可在</a>这里获得。</p><p id="82ba" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated"><strong class="kj ir">优点:<br/> </strong>通过<code class="fe lh li lj lk b">pip</code>很容易升级，可以轻松使用多个版本的 Python。它还支持 Python 2.7+。</p><p id="b730" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated"><strong class="kj ir">缺点:<br/> </strong>这里 Python 解释器二进制实际上是复制到一个新的位置，需要从那里读取。此外，如果您想使用它，您必须单独安装它，因为它不是 Python 附带的。</p><blockquote class="kd ke kf"><p id="60f8" class="kg kh ki kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated"><em class="iq">边注:如果打算用</em> <code class="fe lh li lj lk b"><em class="iq">virtualenv</em></code> <em class="iq">，</em><a class="lf lg ep" href="https://medium.com/u/1f9a4530caf?source=post_page-----9a6543643a44--------------------------------" rel="noopener" target="_blank"><em class="iq">rafabluszcz 扎瓦日基</em> </a> <em class="iq">推荐使用</em><a class="ae kc" href="https://virtualenvwrapper.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"><em class="iq">virtualenvwrapper</em></a><em class="iq">。一定要去看看。</em></p></blockquote><h2 id="d1f2" class="mr lp iq bd lq ms mt dn lu mu mv dp ly ll mw mx mc lm my mz mg ln na nb mk nc bi translated">2.Python 环境包装器(pew)</h2><p id="fbf2" class="pw-post-body-paragraph kg kh iq kj b kk nd km kn ko ne kq kr ll nf ku kv lm ng ky kz ln nh lc ld le ij bi translated"><code class="fe lh li lj lk b">pew</code>作为一个包装器，一旦你开始使用它，你只需要记住这个命令，因为它可以用于我们需要的所有命令。完整的文档可以在这里找到。</p><p id="d85a" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated">优点:<br/> 它让虚拟环境的工作变得非常容易。使用一个简单的命令，您就可以创建一个新的环境，安装一个软件包列表并激活该环境。</p><p id="242a" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated"><strong class="kj ir">缺点:<br/> </strong>我注意到的主要问题是现在它的支持非常有限。代码上最后一次提交是 2018 年 3 月，差不多一年了。</p><h2 id="be84" class="mr lp iq bd lq ms mt dn lu mu mv dp ly ll mw mx mc lm my mz mg ln na nb mk nc bi translated">3.venv</h2><p id="69ea" class="pw-post-body-paragraph kg kh iq kj b kk nd km kn ko ne kq kr ll nf ku kv lm ng ky kz ln nh lc ld le ij bi translated"><code class="fe lh li lj lk b">venv</code>也可以用来设置和访问虚拟环境。从 Python 3.5 开始，它成为创建虚拟环境的推荐方法。你可以在这里找到它的文档。</p><p id="5beb" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated"><strong class="kj ir">优点:<br/> </strong>它生成的配置文件是 Python 二进制直接理解的，不需要把二进制复制到新的位置。此外，Python 开发人员也支持它。</p><p id="1d56" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated"><strong class="kj ir">缺点:<br/> </strong>不是针对 3.3 之前的 Python 版本。</p><h2 id="0d83" class="mr lp iq bd lq ms mt dn lu mu mv dp ly ll mw mx mc lm my mz mg ln na nb mk nc bi translated">4.pipenv</h2><p id="2ceb" class="pw-post-body-paragraph kg kh iq kj b kk nd km kn ko ne kq kr ll nf ku kv lm ng ky kz ln nh lc ld le ij bi translated">该工具将 Python 和虚拟环境的使用提升到了一个新的水平，因为它将包和环境管理支持结合到了一个工具中。这里的文件是<a class="ae kc" href="https://pipenv.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">这里的</a>。</p><p id="9f48" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated"><strong class="kj ir">优点:<br/> </strong>我们可以简单的指定我们工作的环境。此外，它允许我们为我们的环境创建单独的部分，如生产和测试开发。</p><p id="6f44" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated"><strong class="kj ir">缺点:<br/> </strong>必须通过<code class="fe lh li lj lk b">pip</code>单独下载。它增加了很多功能，但是如果他们觉得他们也需要额外的功能，应该采用它。</p><blockquote class="ni"><p id="8a88" class="nj nk iq bd nl nm nn no np nq nr le dk translated">根据我的经验，所有不同的工具都能解决这个问题。它们中的每一个都可以帮助你轻松地创建一个虚拟环境，没有太多的麻烦。你可以简单地选择其中任何一个并学习它的工作原理。</p></blockquote><p id="52b8" class="pw-post-body-paragraph kg kh iq kj b kk ns km kn ko nt kq kr ll nu ku kv lm nv ky kz ln nw lc ld le ij bi translated">我认为<code class="fe lh li lj lk b">pipenv</code>是处理虚拟环境的最佳工具之一，并且由于其增加的功能，它的势头越来越大。因此，我将讨论让您开始使用<code class="fe lh li lj lk b">pipenv</code>的基础知识。</p><h1 id="59b0" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">pipenv</h1><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nx"><img src="../Images/de5ed3b2353827ec5330c31c5ed7f6a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NuJeF-67CRMn2fAQ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@paan_azam13?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Farhan Azam</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f2cc" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated">要使用<code class="fe lh li lj lk b">brew</code>安装<code class="fe lh li lj lk b">pipenv</code>，使用以下命令。</p><pre class="mn mo mp mq gt ny lk nz oa aw ob bi"><span id="31e3" class="mr lp iq lk b gy oc od l oe of">brew install pipenv</span></pre><h2 id="1a66" class="mr lp iq bd lq ms mt dn lu mu mv dp ly ll mw mx mc lm my mz mg ln na nb mk nc bi translated">创造环境</h2><p id="4553" class="pw-post-body-paragraph kg kh iq kj b kk nd km kn ko ne kq kr ll nf ku kv lm ng ky kz ln nh lc ld le ij bi translated">一旦<code class="fe lh li lj lk b">pipenv</code>安装完毕，我们就可以开始处理我们的环境了。转到您想要创建环境的任何文件夹。我来创造<code class="fe lh li lj lk b">pipenvProject</code>里面的环境。只要进入它，安装你喜欢的任何软件包。让我们安装<code class="fe lh li lj lk b">requests</code>。这将自动设置环境，创建<code class="fe lh li lj lk b">Pipfile</code>和<code class="fe lh li lj lk b">Pipfile.lock</code>。</p><pre class="mn mo mp mq gt ny lk nz oa aw ob bi"><span id="d925" class="mr lp iq lk b gy oc od l oe of">cd <!-- -->pipenvProject<br/>pipenv install requests</span></pre><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi og"><img src="../Images/6862151a36fbf6fe6f7c6a593bddb562.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nkbqrptT1zxFjmsLVYP6qg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">pipenv install requests</figcaption></figure><p id="389c" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated">将在目录中创建两个文件。<code class="fe lh li lj lk b">Pipfile</code>其中包括包列表、Python 版本等信息。锁文件也被生成为<code class="fe lh li lj lk b">Pipfile.lock</code>。</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oh"><img src="../Images/177d8584f5f6f2e31c18d26f87a79c82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VzytD5a8wu-5Bsz7cMDV9Q.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Pipfile</figcaption></figure><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oi"><img src="../Images/dc3aa4602698643c1163845108e035f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vd7QDCo67DMsAOu9atBtcw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Pipfile.lock</figcaption></figure><p id="09d5" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated">要激活这个环境，我们可以简单的说<code class="fe lh li lj lk b">pipenv shell</code>。我们现在在虚拟环境中。我们现在可以使用<code class="fe lh li lj lk b">python</code>命令进入 Python，并使用<code class="fe lh li lj lk b">import requests</code>检查我们是否有这个包。由于我们没有得到任何错误，这意味着软件包已经安装。</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oj"><img src="../Images/03c00be061a51faebdbacdbfb443898e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r59M0yms49yxk48pvFZTMQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Inside environment</figcaption></figure><p id="fa8d" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated">我们可以使用<code class="fe lh li lj lk b">exit</code>退出环境。当我们退出环境时，我们将不再能够访问<code class="fe lh li lj lk b">requests</code>包。</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ok"><img src="../Images/e8d27c005dded12f962a9a9dec1a1ca7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NUOwXTvp2bpt_CAJASZisQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Outside environment</figcaption></figure><p id="d6ab" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated">我们也可以直接在环境中运行命令，而不需要显式调用<code class="fe lh li lj lk b">shell</code>。为此，我们可以使用<code class="fe lh li lj lk b">run</code>命令。因此，如果您必须运行 Python，请使用以下命令:</p><pre class="mn mo mp mq gt ny lk nz oa aw ob bi"><span id="2754" class="mr lp iq lk b gy oc od l oe of">pipenv run python</span></pre><h2 id="dca6" class="mr lp iq bd lq ms mt dn lu mu mv dp ly ll mw mx mc lm my mz mg ln na nb mk nc bi translated">与非 pipenv 用户的兼容性</h2><p id="a792" class="pw-post-body-paragraph kg kh iq kj b kk nd km kn ko ne kq kr ll nf ku kv lm ng ky kz ln nh lc ld le ij bi translated">每当我们在 Python 中安装一组包时，我们通常在一个名为 requirements.txt 的文件中指定列表。</p><pre class="mn mo mp mq gt ny lk nz oa aw ob bi"><span id="155c" class="mr lp iq lk b gy oc od l oe of">pip install -r requirements.txt</span></pre><p id="7b17" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated">因此，当您开始使用<code class="fe lh li lj lk b">pipenv</code>时，有一种方法可以为该文件创建文本。简单地说，使用命令:</p><pre class="mn mo mp mq gt ny lk nz oa aw ob bi"><span id="9fcc" class="mr lp iq lk b gy oc od l oe of">pipenv lock -r</span></pre><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ol"><img src="../Images/d177dd6fd87cdabf5752e258f9f935b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eDLKDhLhrpgbOuGTT7Go_A.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Requirements file text</figcaption></figure><p id="af51" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated">它将显示其他人可以使用的我们的<code class="fe lh li lj lk b">requirements.txt</code>文件的文本。</p><h2 id="6bdf" class="mr lp iq bd lq ms mt dn lu mu mv dp ly ll mw mx mc lm my mz mg ln na nb mk nc bi translated">删除环境</h2><p id="7191" class="pw-post-body-paragraph kg kh iq kj b kk nd km kn ko ne kq kr ll nf ku kv lm ng ky kz ln nh lc ld le ij bi translated">使用<code class="fe lh li lj lk b">pipenv —-rm </code>命令很容易删除一个环境。要再次创建它，使用命令<code class="fe lh li lj lk b">pipenv shell</code>。</p><p id="c7da" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated">但是，目录中的文件仍将保持原样。如果您希望完全删除它，请删除该目录。</p><pre class="mn mo mp mq gt ny lk nz oa aw ob bi"><span id="635e" class="mr lp iq lk b gy oc od l oe of">cd ..<br/>rm -r pipenvProject</span></pre><h1 id="fb08" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">结论</h1><p id="54ff" class="pw-post-body-paragraph kg kh iq kj b kk nd km kn ko ne kq kr ll nf ku kv lm ng ky kz ln nh lc ld le ij bi translated">在本文中，我讨论了 Python 虚拟环境的新的高级工具，包括<code class="fe lh li lj lk b">pew</code>、<code class="fe lh li lj lk b">venv</code>和<code class="fe lh li lj lk b">pipenv</code>。我也列举了他们的优缺点。</p><p id="0dd6" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated"><strong class="kj ir">奖励:</strong></p><figure class="mn mo mp mq gt jr"><div class="bz fp l di"><div class="om on l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Error</figcaption></figure><p id="c59d" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated">如果您在创建虚拟环境时遇到了上述错误，那么有一个简单的解决方法。在主目录中用<code class="fe lh li lj lk b">touch</code>命令创建一个文件<code class="fe lh li lj lk b">.bash_profile</code>。然后，在编辑器中打开它(我用的是<code class="fe lh li lj lk b">vim</code>)。</p><pre class="mn mo mp mq gt ny lk nz oa aw ob bi"><span id="0443" class="mr lp iq lk b gy oc od l oe of">touch ~/.bash_profile<br/>vim .bash_profile</span></pre><p id="6c7a" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated">添加以下两行，保存并重启您的终端。问题会得到解决。</p><pre class="mn mo mp mq gt ny lk nz oa aw ob bi"><span id="15dd" class="mr lp iq lk b gy oc od l oe of">export LC_ALL=en_US.UTF-8<br/>export LANG=en_US.UTF-8</span></pre></div><div class="ab cl oo op hu oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="ij ik il im in"><p id="8320" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr ll kt ku kv lm kx ky kz ln lb lc ld le ij bi translated">请随意分享你的想法和想法。我很乐意收到你的来信。</p></div></div>    
</body>
</html>