<html>
<head>
<title>A Comprehensive Guide to List Comprehensions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">列表理解综合指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-comprehensive-guide-to-list-comprehensions-f15bae4fd0c3?source=collection_archive---------22-----------------------#2019-10-17">https://towardsdatascience.com/a-comprehensive-guide-to-list-comprehensions-f15bae4fd0c3?source=collection_archive---------22-----------------------#2019-10-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="a943" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">老实说，你的特征工程技能可能没有达到你想要的水平，你不知道该怎么办。很长一段时间(<em class="ko">比我愿意承认的时间</em>长)以来，我一直在使用分散在多行上的各种<strong class="js iu">熊猫</strong>操作，只是为了执行简单的操作——比如将一列的一部分提取到另一列中——而实际上大多数事情可以在一行代码中完成。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/959553e965243e52e96a8efbc1a5836a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wjv1kTaAYOQIL4oL"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Photo by <a class="ae lf" href="https://unsplash.com/@m4r1vs?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Marius Niveri</a> on <a class="ae lf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="45a7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">列举理解</strong>就是这样做的一种方式。如果我想卖给你一些东西，现在是时候告诉你它们是如何简单和直观，它们是(<em class="ko">在花了几天时间与它们晃来晃去</em>)但对于初学者来说，它们可能看起来令人生畏。</p><p id="1417" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本文将尝试用尽可能简单的语言解释列表理解，并展示它们在数据科学中的用例。现在我废话连篇也没什么意思了，让我们直入主题吧。</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h1 id="bd6a" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">介绍泰坦尼克号数据集</h1><p id="696b" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">我敢肯定，你知道著名的<strong class="js iu">泰坦尼克号</strong>数据集，并可能使用它之前的某个时候。即使你还没有，也没什么好担心的，只要从<a class="ae lf" href="https://raw.githubusercontent.com/datasciencedojo/datasets/master/titanic.csv" rel="noopener ugc nofollow" target="_blank">这个 URL </a>下载，然后用 Python 导入就可以了。这是你应该有的:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mq"><img src="../Images/77f2030577049e75c2fa599bd69d8d28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tJVSv0aQ2X969Yzm6_iBXw.png"/></div></div></figure><p id="7bcf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="ko">牛逼。</em>T15】</strong></p><p id="0a30" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">先说简单的。</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h1 id="d205" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">用例 1:将“性别”转换为 0 和 1</h1><p id="197c" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">这可能是列表理解的最简单的用例。这个想法就是你要做如下的转换:</p><ul class=""><li id="61af" class="mr ms it js b jt ju jx jy kb mt kf mu kj mv kn mw mx my mz bi translated"><em class="ko">公</em> - &gt; 0</li><li id="b1b7" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated"><em class="ko">女</em> - &gt; 1</li></ul><p id="36f8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在尝试在没有列表理解的情况下这样做。我知道这并不困难，但是看看这个漂亮的一行程序:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/54e806aeeceb67706b53f75d21714e3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1038/format:webp/1*P5e7S0H52uRVz_gRN1nzqA.png"/></div></figure><p id="792d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在干净了。但是这很可能不是你阅读这篇文章的原因——你想看更高级的东西。</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h1 id="2067" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">用例 2:从“名称”列提取标题</h1><p id="e150" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">现在，这个稍微高级一点。你看到<strong class="js iu"> <em class="ko">名称</em> </strong>栏了吗？注意它是如何在第一个逗号后加上这个标题(<em class="ko">像先生、小姐等</em>)并在点号后结束的？</p><p id="3da1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">提取起来很简单。首先，你在逗号处分开字符串，并抓取右边的所有内容，然后在点处分开，并抓取左边的所有内容:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/caf794da2139910a9a96afb25db08cd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*vF5zGGsph_MBgrxgxJUiqA.png"/></div></figure><p id="40d9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="ko">爽。我知道，但是你可以更进一步。让我们看看怎么做。</em></strong></p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h1 id="aa17" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">用例 3:将“年龄”分成 3 组</h1><p id="6d70" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">直到最近我才知道在一个列表理解中可以使用多个<em class="ko"> if </em>语句。你可以这样做，但是你越深入，你的代码最终看起来就越乱。</p><p id="06a9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">想法是将<strong class="js iu"> <em class="ko">年龄</em> </strong>列分成 3 组:</p><p id="097d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">下面 _20 </em> - &gt;年龄&lt; 20</p><p id="f2a4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">20 _ 到 _50 </em> - &gt; 20 &lt;年龄&lt; 50</p><p id="2b27" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">以上 _50 </em> - &gt;年龄&gt; 50</p><p id="fd8a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这可以在一行代码中完成。让我们看看如何:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nh"><img src="../Images/5a007724f0f6ace53146b0ff556228a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RgQzPjQsYhnPQZq2qmBb2A.png"/></div></div></figure><p id="28a2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先你在做两组(<em class="ko">低于 _20 和 20 _ 到 _50 </em>)，然后再把第二组进一步分成两组(<em class="ko">20 _ 到 _50 和高于 _50 </em>)。这个特殊的例子并不复杂，但是如果您试图在这个列表理解中添加另一个 if 语句，就会变得混乱。</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h1 id="5df4" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">在你离开之前</h1><p id="5f5e" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">列表理解很棒，这是毋庸置疑的。作为数据科学家，您应该尽可能地利用它们，用更少的代码行完成更多的工作。</p><p id="4b61" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">获取一些数据集，并尝试在清理和准备过程中加以利用。你永远不会回头。</p><p id="718e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我想听听你的看法，你是如何在一行代码中实现复杂的逻辑的？让我知道。T13】</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><p id="9faa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">喜欢这篇文章吗？成为</em> <a class="ae lf" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="ko">中等会员</em> </a> <em class="ko">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="ni nj gp gr nk nl"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">通过我的推荐链接加入 Medium-Dario rade ci</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">medium.com</p></div></div><div class="nu l"><div class="nv l nw nx ny nu nz kz nl"/></div></div></a></div></div></div>    
</body>
</html>