<html>
<head>
<title>An Ode To R-Squared</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R 平方的颂歌</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/an-ode-to-r-squared-804d8d0ed22c?source=collection_archive---------11-----------------------#2019-07-05">https://towardsdatascience.com/an-ode-to-r-squared-804d8d0ed22c?source=collection_archive---------11-----------------------#2019-07-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4f8d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">或者说，<strong class="ak"> <em class="kf">统计学家的十字军东征:一场责任与决心的舞蹈</em> </strong></h2></div><p id="8113" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">据说能够向另一个人解释某事是掌握它的第一步。作为一名有抱负的数据科学家，R 平方感觉像是我应该掌握的东西之王…</p><p id="ec61" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">因此，本博客涵盖以下问题:</p><ul class=""><li id="3ebb" class="lc ld iq ki b kj kk km kn kp le kt lf kx lg lb lh li lj lk bi translated">什么是 R 平方，它告诉我们什么？</li><li id="f011" class="lc ld iq ki b kj ll km lm kp ln kt lo kx lp lb lh li lj lk bi translated">怎样才能直观的推导出 R 平方的公式？</li><li id="a58a" class="lc ld iq ki b kj ll km lm kp ln kt lo kx lp lb lh li lj lk bi translated">为什么 R 的平方总是在 0–1 之间？</li></ul><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lq"><img src="../Images/5c4e878b1304326d6e029fa73d156623.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MdCOeE2Zb8Qhc1zJOH9LSQ.png"/></div></div><figcaption class="mc md gj gh gi me mf bd b be z dk">Portrait of Student Trying to Understand R-Squared, With Cat (c.2019)</figcaption></figure><h1 id="dc33" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">什么是 R 平方，它告诉我们什么？</h1><p id="c48d" class="pw-post-body-paragraph kg kh iq ki b kj my jr kl km mz ju ko kp na kr ks kt nb kv kw kx nc kz la lb ij bi translated">假设我们有一个输出度量 y，带有观察到的数据点，<em class="nd"> y </em> ᵢ.那么预测未来观测值的最简单方法就是取现有观测值的平均值。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi ne"><img src="../Images/a829061719d55e93ede410575ac92d5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mljojvPo_QzbmEaAVUmtnQ.png"/></div></div><figcaption class="mc md gj gh gi me mf bd b be z dk">The baseline mean model, ȳ</figcaption></figure><p id="2a0f" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">注意这个基线模型如何总是为未来的观察预测相同的值。还要注意，这个预测不依赖于<em class="nd"> x </em>的值。不用说，这不是一个很好的模型。</p><p id="a9ba" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">为了改善这种情况，假设我们改为创建一个线性回归模型，<em class="nd"> f </em>，根据观察到的数据点，<em class="nd"> y </em> ᵢ，<strong class="ki ir">及其相关的<em class="nd"> x </em>值来预测 y 的值。</strong></p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi nf"><img src="../Images/58b4675f92c7b41b284b75449e4310f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qGZvdV4TSuYmTt27s7SAjA.png"/></div></div><figcaption class="mc md gj gh gi me mf bd b be z dk">Our model ‘<em class="kf">f</em>’</figcaption></figure><p id="c416" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">那么我们可能需要一些统计数据(姑且称之为 R 平方)来告诉我们我们的模型有多好。特别是，我们的模型<em class="nd"> f </em>比“基线均值模型”有多大的改进？</p><blockquote class="ng"><p id="8e7c" class="nh ni iq bd nj nk nl nm nn no np lb dk translated">R 平方告诉我们:“我们的模型占了均值方差的多少？” </p></blockquote><p id="d05d" class="pw-post-body-paragraph kg kh iq ki b kj nq jr kl km nr ju ko kp ns kr ks kt nt kv kw kx nu kz la lb ij bi translated">如果模型解释了 100%的方差(即 R 平方= 1)，那么我们可以说它完美地解释了观察到的数据点。</p><p id="70db" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">如果模型解释了 0%的方差(即 R 平方= 0)，那么我们可以说它对观察到的数据点没有任何精确的解释。</p><p id="bb2d" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">在现实世界中，R-Squared 善于促进模型之间的比较。然而，确定一个“好”的 R 平方值本身有点困难。一般来说，R 平方大于 0.6 的模型值得您关注，尽管还有其他因素需要考虑:</p><ul class=""><li id="36e7" class="lc ld iq ki b kj kk km kn kp le kt lf kx lg lb lh li lj lk bi translated">任何试图预测人类行为的领域，如心理学，其 R 平方值通常低于 0.5。人类本来就很难预测！</li><li id="e3d6" class="lc ld iq ki b kj ll km lm kp ln kt lo kx lp lb lh li lj lk bi translated">具有高 R 平方值的模型可能遭受其他问题，例如<a class="ae nv" href="https://en.wikipedia.org/wiki/Overfitting" rel="noopener ugc nofollow" target="_blank">过度拟合</a>。r 平方只是数据科学家评估其模型有效性的众多方法之一。</li></ul><h1 id="cd5a" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">怎样才能直观的推导出 R 平方的公式？</h1><p id="3235" class="pw-post-body-paragraph kg kh iq ki b kj my jr kl km mz ju ko kp na kr ks kt nb kv kw kx nc kz la lb ij bi translated">与其一头扎进代数的海洋，我想形象地考虑一下 R 平方。</p><p id="24fa" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">我们已经知道，回归将创建一个最小化残差的模型(即模型预测值<em class="nd"> y </em>和实际观察值<em class="nd"> y </em>之间的差异)。因此，查看我们模型的残差似乎是一个明智的起点。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi nw"><img src="../Images/112d0ff6d7fbf3c4718bc7fd6e69c60e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nOE9bCbSwXz3vaRzM0r-zw.png"/></div></div><figcaption class="mc md gj gh gi me mf bd b be z dk">Our model, f, (L) and the baseline case ȳ (R)</figcaption></figure><p id="4ca5" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">我们的模型<em class="nd"> f </em>(左边图表中的蓝色箭头)的残差可以被认为是我们的模型无法解释的观察值的比特。</p><p id="b469" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">一旦我们开始将这些残差作为公式的一部分进行求和，那么对它们的平方和进行求和是很有用的。这将确保我们不必处理任何负面价值。它还会放大较大个体误差的影响，这在模型预测不佳时会变得格外明显。</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi nx"><img src="../Images/8aa779d735e925ae21415f26716fdb7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F3l0a4hMQPo_eOmGZMRE-w.png"/></div></div><figcaption class="mc md gj gh gi me mf bd b be z dk">The squared residuals for our model, f, (L) and the baseline case ȳ (R)</figcaption></figure><p id="6505" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">同样，我们可以为我们的模型和基线情况可视化这些平方残差。在这里，蓝色的方块是另一种方式来显示我们的模型无法解释的那部分误差。蓝色方块的总面积可以用数学方法表示为:</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/f558c84fb8822beef9dd345c0a84b5bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*VWUkb4wHIfbFosxbJzrNjQ.png"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk"><em class="kf">The Residual sum of squared errors of our regression model also known as SSE (Sum of Squared Errors)</em></figcaption></figure><p id="e33e" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">此外，橙色方块的总和可由下式给出:</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/9ae47ff6b1b44a96b62ea281ad36b712.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*mcwhhX3yHD-EyGWH6BsXYA.png"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk">The<strong class="bd oa"> Total</strong> sum of squared error — the squared difference between <em class="kf">y</em> and ȳ</figcaption></figure></div><div class="ab cl ob oc hu od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="ij ik il im in"><p id="f22e" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">我们希望 R 平方是我们的模型与基线情况的比较。我们可以通过将蓝色方块的面积作为橙色方块面积的一部分来进行比较:</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/3e33c575c4d061ec8ad1a50eaa0b417f.png" data-original-src="https://miro.medium.com/v2/resize:fit:246/format:webp/1*8lzn99bEaxNb7iki9ASMCA.png"/></div></figure><p id="381f" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">因此，这个表达式告诉我们，模型解释的是<em class="nd">而不是</em>偏离平均值ȳ的份额。因此，由模型解释的<em class="nd">是</em>的方差份额，或传说中的 R 平方，可以给定为:</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/9dc7eeaec220a7474a12c1f5cc8c8618.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/format:webp/1*quvgt9vM14ptr0ozENnALw.png"/></div></figure><h1 id="35c4" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">为什么 R 的平方总是在 0–1 之间？</h1><p id="773c" class="pw-post-body-paragraph kg kh iq ki b kj my jr kl km mz ju ko kp na kr ks kt nb kv kw kx nc kz la lb ij bi translated">R 平方最有用的性质之一是它的范围在 0 和 1 之间。这意味着我们可以很容易地比较不同的模型，并决定哪一个更好地解释了均值方差。</p><p id="20c9" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">当然，从上面我们知道 R 平方可以这样表示:</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/9dc7eeaec220a7474a12c1f5cc8c8618.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/format:webp/1*quvgt9vM14ptr0ozENnALw.png"/></div></figure><p id="457c" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">所以要让 R 的平方有界在 0 和 1 之间，我们要求<strong class="ki ir"><em class="nd">(ss RES/ss stot)</em></strong>本身在 0 和 1 之间。如果出现以下情况，就会发生这种情况:</p><ol class=""><li id="80a1" class="lc ld iq ki b kj kk km kn kp le kt lf kx lg lb ok li lj lk bi translated"><strong class="ki ir"><em class="nd">SSres≤SStot</em></strong><em class="nd">(对于 R 平方大于等于 0) </em></li><li id="3ad2" class="lc ld iq ki b kj ll km lm kp ln kt lo kx lp lb ok li lj lk bi translated"><strong class="ki ir"> <em class="nd"> SSres </em> </strong> <em class="nd">和</em><strong class="ki ir"><em class="nd">SStot</em></strong><em class="nd">都为正，或者都为负(对于 R 平方小于或等于 1)。</em></li></ol><p id="30ec" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">让我们依次来看这些。回想一下:</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/f558c84fb8822beef9dd345c0a84b5bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*VWUkb4wHIfbFosxbJzrNjQ.png"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk">The sum of all the squared resisuals from the model.</figcaption></figure><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/9ae47ff6b1b44a96b62ea281ad36b712.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*mcwhhX3yHD-EyGWH6BsXYA.png"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk">The sum of all the squared residuals from the mean of observed values.</figcaption></figure><p id="bb68" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">对于(1)，我们可以做一个直观的论证。记住，<strong class="ki ir"> <em class="nd"> SStot </em> </strong>代表观察到的 y 值之间的差距，以及它们的平均值，ȳ.</p><p id="ba4a" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">假定<strong class="ki ir"> y = ȳ </strong>表示一条直线(特别是，一条穿过 x-y 平面的水平线)，<strong class="ki ir"> y = ȳ </strong>本身就是我们数据集的线性模型。当然，这不是一个好模型，但它仍然是一个模型。</p><p id="b9dc" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">现在让我们考虑一下计算 R 平方的模型——这个模型产生了<em class="nd"> f </em>项，因此产生了<strong class="ki ir"> <em class="nd"> SSres </em> </strong>。该模型是通过回归创建的，根据定义，我们知道回归过程会生成最小化数据集残差的模型。</p><p id="f7ad" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">我们有两种可能的情况:</p><ul class=""><li id="0114" class="lc ld iq ki b kj kk km kn kp le kt lf kx lg lb lh li lj lk bi translated">回归产生<strong class="ki ir"> y = ȳ </strong>作为最小化残差的模型。这样，我们就有了<strong class="ki ir"><em class="nd">ssres</em></strong>=<strong class="ki ir"><em class="nd">sstot</em></strong>，因为<em class="nd"> f </em> ᵢ = <strong class="ki ir"> </strong> ȳ跨越了数据集。</li><li id="3549" class="lc ld iq ki b kj ll km lm kp ln kt lo kx lp lb lh li lj lk bi translated">回归产生了不同的模型。由于回归产生了一个最小化残差的模型，这个模型的残差必须小于<strong class="ki ir"> y = ȳ </strong>的情况。所以我们要有<strong class="ki ir"><em class="nd">SSres</em></strong><strong class="ki ir"><em class="nd">&lt;SStot</em></strong><em class="nd">。</em></li></ul><p id="7644" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">于是，我们有了<strong class="ki ir"><em class="nd">SSres≤SStot</em></strong><em class="nd">。</em></p><p id="5699" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">因此，R 的平方将总是大于或等于 0。</p><p id="4de8" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">对于(2)，我们知道<strong class="ki ir"> <em class="nd"> SSres </em> </strong>和<strong class="ki ir"> <em class="nd"> SStot </em> </strong>都是作为平方和给出的(见上图)。由于平方数总是正的，我们知道<strong class="ki ir"> <em class="nd"> SSres </em> </strong>和<strong class="ki ir"> <em class="nd"> SStot </em> </strong>都将总是正的。</p><p id="b432" class="pw-post-body-paragraph kg kh iq ki b kj kk jr kl km kn ju ko kp kq kr ks kt ku kv kw kx ky kz la lb ij bi translated">因此，R 的平方将总是小于或等于 1。</p></div></div>    
</body>
</html>