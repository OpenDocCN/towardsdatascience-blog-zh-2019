<html>
<head>
<title>Create your own Virtual Personal Assistant</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建您自己的虚拟个人助理</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/create-your-own-virtual-personal-assistant-94be5df65ced?source=collection_archive---------7-----------------------#2019-05-20">https://towardsdatascience.com/create-your-own-virtual-personal-assistant-94be5df65ced?source=collection_archive---------7-----------------------#2019-05-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/13a7ba0b0c30a43647f10a465e1cb97d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bqekIYkD8ddhxNyfb3MPhw.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Courtesy: <a class="ae kf" href="https://pixabay.com/photos/robot-mech-machine-technology-2301646/#" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><p id="d3f0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你知道 Cortana，Siri，Google Assistant 吧？你有没有想象过你可以制作自己的虚拟个人助理，随心所欲的定制？今天，我们就在这里做。我们将用 python 从头开始构建一个个人助理。哦，在开始之前，让我告诉你，这绝不是一个人工智能，而只是一个人工智能可以做什么的有力例子，以及 python 是多么多才多艺和令人惊叹。此外，为了开始使用 python，您需要有一些使用 python 的经验。那么，让我们开始吧:</p><p id="aa04" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们需要安装一些重要的软件包:</p><ul class=""><li id="f503" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated">SpeechRecognition:用于执行语音识别的库，支持多种引擎和 API，在线和离线。</li><li id="0b96" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">Pyttsx3 : Pyttsx 是 python 中一个很好的文本到语音转换库。</li><li id="a1b5" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">Wikipedia : Wikipedia 是一个 Python 库，使得访问和解析来自 Wikipedia 的数据变得容易。</li><li id="a722" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">Wolframalpha:针对<a class="ae kf" href="http://wolframalpha.com/" rel="noopener ugc nofollow" target="_blank"> Wolfram|Alpha </a> v2.0 API 构建的 Python 客户端。</li><li id="b29f" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">py audio:PortAudio 的 Python 绑定。</li></ul><p id="2f5f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">确保你已经安装了所有这些软件包，否则你可能会遇到一些错误，这是你如何安装它:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="6b84" class="mb mc it lx b gy md me l mf mg">pip install PackageName</span></pre><p id="5cb0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu"> PyAudio 安装:</strong></p><p id="2c2b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可能会在安装 Pyaudio 时遇到一些错误，我也遇到过同样的问题。您可以利用这些步骤来避免安装错误:</p><ul class=""><li id="46bb" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated">通过<code class="fe mh mi mj lx b">python --version</code>找到你的 Python 版本比如我的是<code class="fe mh mi mj lx b">3.7.3</code></li><li id="8709" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">从<a class="ae kf" href="https://www.lfd.uci.edu/~gohlke/pythonlibs/#pyaudio" rel="noopener ugc nofollow" target="_blank"> <strong class="ki iu">这里</strong> </a>找到合适的<code class="fe mh mi mj lx b">.whl</code>文件，比如我的是<code class="fe mh mi mj lx b">PyAudio‑0.2.11‑cp37‑cp37m‑win_amd64.whl</code>，下载。</li><li id="0d15" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">转到下载它的文件夹，例如<code class="fe mh mi mj lx b">cd C:\Users\foobar\Downloads</code></li><li id="493d" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">以我的例子为例，用<code class="fe mh mi mj lx b">pip</code>安装<code class="fe mh mi mj lx b">.whl</code>文件:</li></ul><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="525f" class="mb mc it lx b gy md me l mf mg">pip install PyAudio-0.2.11-cp37-cp37m-win_amd64.whl</span></pre><p id="2c41" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，安装它可以避免不必要的错误:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="cf0f" class="mb mc it lx b gy md me l mf mg">pip install pypiwin32</span></pre><p id="d7d1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您完成了这些包的安装，那么我们可以导入它们并返回代码:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="f689" class="mb mc it lx b gy md me l mf mg">import os<br/>import sys<br/>import datetime<br/>import pyttsx3<br/>import speech_recognition as sr<br/>import wikipedia<br/>import wolframalpha<br/>import webbrowser<br/>import smtplib<br/>import random</span></pre><p id="856f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我们将使用“SAPI5”作为 pyttsx3 的 TTS 引擎，获取 wolframaplha 的密钥，并定义客户端。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="ccb9" class="mb mc it lx b gy md me l mf mg">engine = pyttsx3.init(‘sapi5’) <br/>client = wolframalpha.Client(‘Get your own key’)</span></pre><p id="6477" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="mk">您可以从 wolframalpha.com-&gt;Apps-&gt;Key 获得自己的密钥。</em></p><p id="96f8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我们将初始化一个变量，并获得我们需要的必要的声音参数。女声可以在第二行设置为-1，男声设置为-2。接下来，我们将创建一个函数<strong class="ki iu"> talk </strong>，将音频作为输入参数。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="6cf5" class="mb mc it lx b gy md me l mf mg">voices = engine.getProperty(‘voices’)<br/>engine.setProperty(‘voice’, voices[len(voices) — 2].id)</span><span id="6c8e" class="mb mc it lx b gy ml me l mf mg">def talk(audio): <br/>    print(‘KryptoKnite: ‘ + audio) <br/>    engine.say(audio) <br/>    engine.runAndWait()</span></pre><p id="a745" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，让我们创建另一个函数<strong class="ki iu"> greetMe </strong>，它将用于在用户运行程序时问候用户。<em class="mk"> datetime.datetime.now()。小时</em>用于以小时为单位获取当前时间，并根据时间和以下条件给出输出。<strong class="ki iu"> Talk </strong> fn 将用于给出语音方面的输出。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="dee5" class="mb mc it lx b gy md me l mf mg">def greetMe():<br/>    CurrentHour = int(datetime.datetime.now().hour)<br/>    if CurrentHour &gt;= 0 and CurrentHour &lt; 12:<br/>        talk('Good Morning!')</span><span id="022f" class="mb mc it lx b gy ml me l mf mg">    elif CurrentHour &gt;= 12 and CurrentHour &lt; 18:<br/>        talk('Good Afternoon!')</span><span id="3c30" class="mb mc it lx b gy ml me l mf mg">    elif CurrentHour &gt;= 18 and CurrentHour != 0:<br/>        talk('Good Evening!')<br/></span><span id="8c05" class="mb mc it lx b gy ml me l mf mg">greetMe()</span><span id="2135" class="mb mc it lx b gy ml me l mf mg">talk('Hey Buddy, It\'s  your assistant KryptoKnite!')<br/>talk('tell me about today?')</span></pre><p id="c464" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们将创建另一个函数<strong class="ki iu"> GivenCommand </strong>，用于识别用户输入，它将定义麦克风用作输入源，我们将暂停阈值设置为 1。尝试使用 except 块，要识别的语言将被设置为英语-印度，如果语音未被识别或听不到，我们将发送文本输入作为一种错误消息。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="ca24" class="mb mc it lx b gy md me l mf mg">def GivenCommand():<br/>    k = sr.Recognizer()<br/>    with sr.Microphone() as source:<br/>        print("Listening...")<br/>        k.pause_threshold = 1<br/>        audio = k.listen(source)<br/>    try:<br/>        Input = k.recognize_google(audio, language='en-in')<br/>        print('Kunal Dhariwal: ' + Input + '\n')</span><span id="af7d" class="mb mc it lx b gy ml me l mf mg">    except sr.UnknownValueError:<br/>        talk('Sorry! I didn\'t get that! Try typing it here!')<br/>        Input = str(input('Command: '))</span><span id="7c1b" class="mb mc it lx b gy ml me l mf mg">    return Input</span></pre><p id="56c3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，让我们开始主要功能:</p><p id="991e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这里，我们将声明一些重要的函数和条件，这些函数和条件将增强我们的个人助理的功能，并帮助他提供输出和接收来自用户的输入。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="8097" class="mb mc it lx b gy md me l mf mg">if __name__ == '__main__':</span><span id="559b" class="mb mc it lx b gy ml me l mf mg">    while True:</span><span id="1359" class="mb mc it lx b gy ml me l mf mg">        Input = GivenCommand()<br/>        Input = Input.lower()</span><span id="dee9" class="mb mc it lx b gy ml me l mf mg">        if 'open google' in Input:<br/>            talk('sure')<br/>            webbrowser.open('www.google.co.in')</span><span id="588a" class="mb mc it lx b gy ml me l mf mg">        elif 'open youtube' in Input:<br/>            talk('sure')<br/>            webbrowser.open('www.youtube.com')</span><span id="9ed8" class="mb mc it lx b gy ml me l mf mg">        elif "what\'s up" in Input or 'how are you' in Input:<br/>            setReplies = ['Just doing some stuff!', 'I am good!',                                     <br/>                          'Nice!', 'I am amazing and full of power']<br/>            talk(random.choice(setReplies))</span></pre><p id="b481" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，你可以添加更多的<strong class="ki iu"> <em class="mk"> elif </em> </strong>和其他功能，比如我添加了一个发送电子邮件的功能。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="d4fb" class="mb mc it lx b gy md me l mf mg">elif 'email' in Input:<br/>    talk('Who is the recipient? ')<br/>    recipient = GivenCommand()</span><span id="683c" class="mb mc it lx b gy ml me l mf mg">    if 'me' in recipient:<br/>        try:<br/>            talk('What should I say? ')<br/>            content = GivenCommand()</span><span id="5c59" class="mb mc it lx b gy ml me l mf mg">            server = smtplib.SMTP('smtp.gmail.com', 587)<br/>            server.ehlo()<br/>            server.starttls()<br/>            server.login("Your_Username", 'Your_Password')<br/>            server.sendmail('Your_Username', "Recipient_Username", content)<br/>            server.close()<br/>            talk('Email sent!')</span><span id="1272" class="mb mc it lx b gy ml me l mf mg">        except:<br/>            talk('Sorry ! I am unable to send your message at this moment!')</span></pre><p id="4c21" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者可能正在播放一些音乐？</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="c8d6" class="mb mc it lx b gy md me l mf mg">elif 'play music' in Input:<br/>    music_folder = 'Path<br/>    music = ['song']<br/>    random_music = music_folder + random.choice(music) + '.mp3'<br/>    os.system(random_music)</span><span id="0798" class="mb mc it lx b gy ml me l mf mg">    talk('Okay, here is your music! Enjoy!')</span></pre><p id="e801" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们将添加一些功能，使用这些输入在维基百科、谷歌上进行搜索，并使用 wolframalpha。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="de75" class="mb mc it lx b gy md me l mf mg">else:<br/>    Input = Input<br/>    talk('Searching...')<br/>    try:<br/>        try:<br/>            res = client.Input(Input)<br/>            outputs = next(res.outputs).text<br/>            talk('Alpha says')<br/>            talk('Gotcha')<br/>            talk(outputs)</span><span id="12c2" class="mb mc it lx b gy ml me l mf mg">        except:<br/>            outputs = wikipedia.summary(Input, sentences=3)<br/>            talk('Gotcha')<br/>            talk('Wikipedia says')<br/>            talk(outputs)<br/></span><span id="31c7" class="mb mc it lx b gy ml me l mf mg">    except:<br/>        talk("searching on google for " + Input)<br/>        say = Input.replace(' ', '+')<br/>        webbrowser.open('https://www.google.co.in/search?q=' + Input)</span><span id="0d74" class="mb mc it lx b gy ml me l mf mg">talk('Next Command! Please!')</span></pre><p id="f5ff" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当这一切完成后，程序退出是非常重要的。让我们在这里为它写一个条件:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="3480" class="mb mc it lx b gy md me l mf mg">elif 'nothing' in Input or 'abort' in Input or 'stop' in Input:<br/>    talk('okay')<br/>    talk('Bye, have a good day.')<br/>    sys.exit()</span><span id="ec7e" class="mb mc it lx b gy ml me l mf mg">elif 'bye' in Input:<br/>    talk('Bye, have a great day.')<br/>    sys.exit()</span></pre><p id="3966" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就是这样！您已经创建了自己的虚拟个人助理。</p><p id="c6a8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你现在可以自定义它，并为它设置任何条件，还可以添加 N 个功能，使它更加神奇。</p><blockquote class="mm mn mo"><p id="ec34" class="kg kh mk ki b kj kk kl km kn ko kp kq mp ks kt ku mq kw kx ky mr la lb lc ld im bi translated"><strong class="ki iu">完整代码:</strong><a class="ae kf" href="https://bit.ly/2VaBsEU" rel="noopener ugc nofollow" target="_blank">https://bit.ly/2VaBsEU</a></p><p id="7f27" class="kg kh mk ki b kj kk kl km kn ko kp kq mp ks kt ku mq kw kx ky mr la lb lc ld im bi translated">你可以在我的 LinkedIn 帖子<a class="ae kf" href="https://bit.ly/2DW8qU0" rel="noopener ugc nofollow" target="_blank">https://bit.ly/2DW8qU0</a>这里获得<strong class="ki iu"> <em class="it">视频演示</em> </strong></p><p id="9297" class="kg kh mk ki b kj kk kl km kn ko kp kq mp ks kt ku mq kw kx ky mr la lb lc ld im bi translated">如果您遇到任何错误或需要任何帮助，您可以随时在 LinkedIn 上发表评论或 ping 我。</p><p id="72cd" class="kg kh mk ki b kj kk kl km kn ko kp kq mp ks kt ku mq kw kx ky mr la lb lc ld im bi translated"><strong class="ki iu">领英</strong>:<a class="ae kf" href="https://bit.ly/2u4YPoF" rel="noopener ugc nofollow" target="_blank">https://bit.ly/2u4YPoF</a></p><p id="d583" class="kg kh mk ki b kj kk kl km kn ko kp kq mp ks kt ku mq kw kx ky mr la lb lc ld im bi translated"><strong class="ki iu">Github</strong>:<a class="ae kf" href="https://bit.ly/2SQV7ss" rel="noopener ugc nofollow" target="_blank">https://bit.ly/2SQV7ss</a></p></blockquote><blockquote class="ms"><p id="e5ef" class="mt mu it bd mv mw mx my mz na nb ld dk translated">我希望这有助于增强您的知识库:)</p><p id="b1c6" class="mt mu it bd mv mw nc nd ne nf ng ld dk translated">关注我了解更多！</p><p id="9b82" class="mt mu it bd mv mw nc nd ne nf ng ld dk translated">感谢您的阅读和宝贵的时间！</p></blockquote></div></div>    
</body>
</html>