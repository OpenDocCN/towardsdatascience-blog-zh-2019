<html>
<head>
<title>Inspecting a 15 year CDC Chronic Disease Dataset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">检查 15 年 CDC 慢性病数据集</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/inspecting-a-cdc-chronic-disease-dataset-e1685a6b525a?source=collection_archive---------10-----------------------#2019-03-02">https://towardsdatascience.com/inspecting-a-cdc-chronic-disease-dataset-e1685a6b525a?source=collection_archive---------10-----------------------#2019-03-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c773" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用 Python 和数据科学技术对人口健康指标进行探索性数据分析</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e115fbbad075942b372a5d4759bb8f0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-UdMz42Yt6SfxDrc"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@dangribbin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Dan Gribbin</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="97b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最近，我接受了一个个人项目，以应用我一直在学习的 Python 和机器学习。由于我对人口健康感兴趣，我决定从了解我在<a class="ae ky" href="https://www.kaggle.com/cdc/chronic-disease/home" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>上找到的 15 年人口健康特定数据集开始。这个数据集来自美国疾病控制和预防中心的慢性病指标。在这个博客系列中，我想用 exploration 演示数据集中有什么。稍后，我将深入探讨数据可视化。目前，我不确定我是否看到只有这个数据集的实际机器学习的机会。</p><p id="53a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据 Kaggle 的概述，该数据集中提供的有限背景信息指出，这些指标是从 2001 年到 2016 年在州一级收集的，共有 202 个指标。使用 jupyter notebook 和文件上的 pd.read_csv()，有 403，984 行，34 列，或属性。通过跑步。info()方法，下面输出中的第二列显示我们有一些丢失的数据。在下面的最后一列中，有不同类型的数据，其中一些是数字型的，比如整数和浮点值，而另一些是包含字符串的对象。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="7643" class="ma mb it lw b gy mc md l me mf">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 403984 entries, 0 to 403983<br/>Data columns (total 34 columns):<br/>YearStart                    403984 non-null int64<br/>YearEnd                      403984 non-null int64<br/>LocationAbbr                 403984 non-null object<br/>LocationDesc                 403984 non-null object<br/>DataSource                   403984 non-null object<br/>Topic                        403984 non-null object<br/>Question                     403984 non-null object<br/>Response                     79323 non-null object<br/>DataValueUnit                374119 non-null object<br/>DataValueType                403984 non-null object<br/>DataValue                    297817 non-null object<br/>DataValueAlt                 273666 non-null float64<br/>DataValueFootnoteSymbol      188019 non-null object<br/>DatavalueFootnote            187853 non-null object<br/>LowConfidenceLimit           246819 non-null float64<br/>HighConfidenceLimit          246819 non-null float64<br/>StratificationCategory1      403984 non-null object<br/>Stratification1              403984 non-null object<br/>StratificationCategory2      79323 non-null object<br/>Stratification2              79323 non-null object<br/>StratificationCategory3      79323 non-null object<br/>Stratification3              79323 non-null object<br/>GeoLocation                  401416 non-null object<br/>ResponseID                   79323 non-null object<br/>LocationID                   403984 non-null int64<br/>TopicID                      403984 non-null object<br/>QuestionID                   403984 non-null object<br/>DataValueTypeID              403984 non-null object<br/>StratificationCategoryID1    403984 non-null object<br/>StratificationID1            403984 non-null object<br/>StratificationCategoryID2    79324 non-null object<br/>StratificationID2            79324 non-null object<br/>StratificationCategoryID3    79323 non-null object<br/>StratificationID3            79323 non-null object</span></pre><p id="85d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们了解一下每个专栏都是关于什么的。虽然有些列名相对来说不言自明，但我使用 set(dataframe['ColumnName'])来更好地理解唯一的分类数据。以下是一些例子:</p><p id="bc09" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">题目</strong> : 400k+行数据分为以下 17 类。有一个名为 TopicID 的对应列，它只是给出了一个缩写的标签。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="4b6f" class="ma mb it lw b gy mc md l me mf">{'Alcohol',<br/> 'Arthritis',<br/> 'Asthma',<br/> 'Cancer',<br/> 'Cardiovascular Disease',<br/> 'Chronic Kidney Disease',<br/> 'Chronic Obstructive Pulmonary Disease',<br/> 'Diabetes',<br/> 'Disability',<br/> 'Immunization',<br/> 'Mental Health',<br/> 'Nutrition, Physical Activity, and Weight Status',<br/> 'Older Adults',<br/> 'Oral Health',<br/> 'Overarching Conditions',<br/> 'Reproductive Health',<br/> 'Tobacco'}</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mg"><img src="../Images/bb287b3dd2f597c4edb8b2218734fe54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mZzdRveT7F9KkUzqK6cs8A.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Distribution of the data by topic. Diabetes, Chronic Obstructive Pulmonary Disease, and Cardiovascular Disease are the top 3 topics</figcaption></figure><p id="75a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">问题</strong>:在每个话题中，都有一些问题。我们将使用相应的列 QuestionID。这些是数据集具有值的 202 个唯一指标，我们将对此进行进一步分析。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="f879" class="ma mb it lw b gy mc md l me mf">{'Activity limitation due to arthritis among adults aged &gt;= 18 years',<br/> 'Adults aged &gt;= 18 years with arthritis who have taken a class to learn how to manage arthritis symptoms',<br/> 'Adults with diagnosed diabetes aged &gt;= 18 years who have taken a diabetes self-management course',<br/> 'Alcohol use among youth',<br/> 'Alcohol use before pregnancy',<br/> 'All teeth lost among adults aged &gt;= 65 years',<br/> 'Amount of alcohol excise tax by beverage type (beer)',</span><span id="a97d" class="ma mb it lw b gy mh md l me mf">...</span><span id="4165" class="ma mb it lw b gy mh md l me mf"> 'State child care regulation supports onsite breastfeeding',<br/> 'States that allow stronger local tobacco control and prevention laws',<br/> 'States with strong polices that require retail licenses to sell tobacco products',<br/> 'Taking medicine for high blood pressure control among adults aged &gt;= 18 years with high blood pressure',<br/> 'Television viewing among high school students',<br/> 'Timeliness of routine health care checkup among women aged 18-44 years',<br/> 'Visits to dentist or dental clinic among adults aged &gt;= 18 years',<br/> 'Visits to dentist or dental clinic among adults aged &gt;= 18 years with diagnosed diabetes'}</span></pre><p id="360e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">数据源</strong>:考虑到我们有这么多的指标，有 33 个数据源我并不奇怪。然而，下面的直方图显示，大部分数据来自两个来源，BRFSS，即 CDC 的<a class="ae ky" href="https://www.cdc.gov/brfss/index.html" rel="noopener ugc nofollow" target="_blank">行为风险因素监测系统</a>和 NVSS，即<a class="ae ky" href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwi6y_65j-HgAhWNUt8KHU6WBQAQFjAAegQICBAB&amp;url=https%3A%2F%2Fwww.cdc.gov%2Fnchs%2Fnvss%2Findex.htm&amp;usg=AOvVaw1WouJ9qe19F_ytzMqKy17C" rel="noopener ugc nofollow" target="_blank">国家生命统计系统</a>。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="0495" class="ma mb it lw b gy mc md l me mf">{'ACS 1-Year Estimates',<br/> 'ACS 5-Year Estimates',<br/> 'AEDS',<br/> 'ANRF',<br/> 'APIS',<br/> 'ASHW',<br/> 'BRFSS',<br/> 'Birth Certificate, NVSS',<br/> 'CDC Breastfeeding Report Card',<br/> "CDC Children's Food Environment State Indicator Report",<br/> 'CDC School Health Profiles',<br/> 'CMS CCW',<br/> 'CMS Part A Claims Data',<br/> 'Current Population Survey',<br/> 'Death certificate',<br/> 'HRSA, UDS',<br/> 'InfoUSA; USDA',<br/> 'Legal Research',<br/> 'NSCH',</span><span id="1b09" class="ma mb it lw b gy mh md l me mf">...</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mi"><img src="../Images/53a6d2075d83abb9f378412eaf0ba4f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YhY1UIqPQuj6aHh17kR97w.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">CDC’s BRFSS and NVSS make up almost the entirety of this dataset</figcaption></figure><p id="52b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">data value unit</strong>:data value 中的值由以下单位组成，包括百分比、金额、年份和千例数。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="529a" class="ma mb it lw b gy mc md l me mf">{' ',<br/> '$',<br/> '%',<br/> 'Number',<br/> 'Number ',<br/> 'Years',<br/> 'cases per 1,000',<br/> 'cases per 1,000,000',<br/> 'cases per 10,000',<br/> 'cases per 100,000',<br/> 'gallons',<br/> nan,<br/> 'pack sales per capita',<br/> 'per 100,000',<br/> 'per 100,000 residents'}</span></pre><p id="6029" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> DataValueType </strong>:以下几个类别很有见地，表明当我们想要查看跨州数据比较时，有年龄调整后的数字与原始数字相比较，这有助于我们进行比较。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="1675" class="ma mb it lw b gy mc md l me mf">{'Adjusted by age, sex, race and ethnicity',<br/> 'Age-adjusted Mean',<br/> 'Age-adjusted Prevalence',<br/> 'Age-adjusted Rate',<br/> 'Average Annual Age-adjusted Rate',<br/> 'Average Annual Crude Rate',<br/> 'Average Annual Number',<br/> 'Commercial host (dram shop) liability status for alcohol service',<br/> 'Crude Prevalence',<br/> 'Crude Rate',<br/> 'Local control of the regulation of alcohol outlet density',<br/> 'Mean',<br/> 'Median',<br/> 'Number',<br/> 'Per capita alcohol consumption',<br/> 'Percent',<br/> 'Prevalence',<br/> 'US Dollars',<br/> 'Yes/No'}</span></pre><p id="b60d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">数据值 vs 数据值 Alt </strong>:数据值似乎是我们未来分析的目标数据列。使用。head()方法，该列由 string 对象形式的数值组成，而 DataValueAlt 是数值 float64。后来，我想使用 pandas pivot_table 方法，它只需要数字数据。因此，我将使用 DataValueAlt 进行后续分析。</p><p id="faa4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">分层和分层类别相关列</strong>:与分层相关的列有 12 列，是性别、种族、年龄等每个指标内的子组。在分层类别 1 中，有性别、总体和种族。例如，在分层 1 中，值由种族类型组成。在 ID 列中，如分层 ID1，我们有相应的种族标签。</p><p id="b32b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">缺失数据:</strong></p><p id="6c9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用下面的 matplotlib 和 seaborn 生成热图，很容易看到哪里有数据，哪里缺少数据以及缺少多少数据。黄色代表丢失的数据。列是每个指标，纵轴是 40 万行数据。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="820c" class="ma mb it lw b gy mc md l me mf">import matplotlib.pyplot as plt<br/>%matplotlib inline</span><span id="91df" class="ma mb it lw b gy mh md l me mf">plt.figure(figsize=(16, 6))</span><span id="3980" class="ma mb it lw b gy mh md l me mf">sns.heatmap(df.isnull(),yticklabels=False,cbar=False,cmap='viridis')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/cba3d75aef30ee4dbb49be6ab7baf848.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uVpXKjxqXzI_yCPpSHf-lQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Large portions of missing data is related to Stratification Categories 2 and 3 and the related Stratification 2 and 3. The horizontal axis consists of the column names.</figcaption></figure><p id="b2b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在热图中，响应和与分层类别 2/3 和分层 2/3 相关的列包含的数据不到 20%。虽然分层类别 1 和分层 1 似乎有潜在有用的数据，但让我们确认 2 和 3 中有什么数据。对于每个分层列，我遵循类似的方法:</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="47e0" class="ma mb it lw b gy mc md l me mf">df['StratificationCategory2'].count()</span><span id="7c2d" class="ma mb it lw b gy mh md l me mf">df_strat2cat = []</span><span id="20a7" class="ma mb it lw b gy mh md l me mf">for i in df['StratificationCategory2']:<br/>    if (pd.isnull(i) is False):<br/>        if i is not ' ':<br/>            df_strat2cat.append(i)</span></pre><p id="6037" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，列的计数返回 79k，其中包含数据。我想看看里面有什么，所以我设置了 for 循环来遍历特定分层 2 或 3 列中的每个元素，并将非空值或带有空格的值追加到一个名为 df_strat2cat 的新数组中。这意外地产生了一个没有值的数组。在对其他分层列重复此操作后，我删除了这组列。</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="6445" class="ma mb it lw b gy mc md l me mf">df_new = df.drop(['Response','ResponseID','StratificationCategory2','StratificationCategory3','Stratification2','Stratification3','StratificationCategoryID2','StratificationCategoryID3','StratificationID2','StratificationID3' ],axis = 1)</span><span id="0639" class="ma mb it lw b gy mh md l me mf">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 403984 entries, 0 to 403983<br/>Data columns (total 24 columns):<br/>YearStart                    403984 non-null int64<br/>YearEnd                      403984 non-null int64<br/>LocationAbbr                 403984 non-null object<br/>LocationDesc                 403984 non-null object<br/>DataSource                   403984 non-null object<br/>Topic                        403984 non-null object<br/>Question                     403984 non-null object<br/>DataValueUnit                374119 non-null object<br/>DataValueType                403984 non-null object<br/>DataValue                    297817 non-null object<br/>DataValueAlt                 273666 non-null float64<br/>DataValueFootnoteSymbol      188019 non-null object<br/>DatavalueFootnote            187853 non-null object<br/>LowConfidenceLimit           246819 non-null float64<br/>HighConfidenceLimit          246819 non-null float64<br/>StratificationCategory1      403984 non-null object<br/>Stratification1              403984 non-null object<br/>GeoLocation                  401416 non-null object<br/>LocationID                   403984 non-null int64<br/>TopicID                      403984 non-null object<br/>QuestionID                   403984 non-null object<br/>DataValueTypeID              403984 non-null object<br/>StratificationCategoryID1    403984 non-null object<br/>StratificationID1            403984 non-null object<br/>dtypes: float64(3), int64(3), object(18)</span></pre><p id="40b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用 df_new，seaborn 热图显示最少的黄色和大部分紫色。如果我们想更进一步，我们可以填充缺失的数据，但此时，我将把额外的工作留到稍后阶段。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/cf7a81d773a423e030c4f23e5fce06a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Va6WZuy0MFAz8voI6eEkQ.png"/></div></div></figure><p id="c98b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">概括地说，我使用 pandas 将 CSV 数据文件导入到数据帧中。然后，我使用各种方法来更好地理解每一列中的数据，因为上下文信息非常有限。分层 2 和 3 列的组是无用的，并且这些被移除。在下一篇文章的<a class="ae ky" href="https://medium.com/@danielwu3/relationships-validated-between-population-health-chronic-indicators-b69e7a37369a" rel="noopener">中，我们将采用生成的数据框架来理解数据，甚至进一步理解具体指标之间的关系。</a></p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="a3d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">阅读分析的第二部分:<a class="ae ky" href="https://medium.com/@danielwu3/relationships-validated-between-population-health-chronic-indicators-b69e7a37369a" rel="noopener">https://medium . com/@ Daniel Wu 3/relationships-validated-between-population-health-chronic-indicators-b 69e 7a 37369 a</a></p></div></div>    
</body>
</html>