<html>
<head>
<title>Practical Steps and Considerations to Successfully Profile your Customer Base</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">成功描述客户群的实用步骤和注意事项</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/practical-steps-and-considerations-to-successfully-profile-your-customer-base-19f3f0991407?source=collection_archive---------10-----------------------#2019-10-03">https://towardsdatascience.com/practical-steps-and-considerations-to-successfully-profile-your-customer-base-19f3f0991407?source=collection_archive---------10-----------------------#2019-10-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><h1 id="5ec2" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">如何使用特征丰富的数据集，通过 K 均值聚类、主成分分析和 Bootstrap 聚类评估进行有效的统计分割</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/7b5a7c0243657962b35defeee033a1d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-_Qax2TEoMJvB7Gk"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by <a class="ae le" href="https://unsplash.com/@heftiba?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Toa Heftiba</a> on <a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="7df6" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">概观</h1><p id="3b27" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">统计细分是我最喜欢的分析方法之一:我从自己的咨询经验中发现，它能很好地引起客户的共鸣，并且是一个相对简单的概念，可以向非技术受众解释。</p><p id="c2ee" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">今年早些时候，我使用了流行的 K-Means 聚类算法，根据客户对一系列<strong class="lh iu">营销活动</strong>的反应来划分客户。为了进行分析，我特意选择了一个基本数据集，以表明这不仅是一个相对容易进行的分析，而且有助于挖掘客户群中有趣的行为模式，即使使用很少的客户属性。</p><p id="a372" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">在这篇文章中，我使用一个<strong class="lh iu">复杂且功能丰富的数据集</strong>重新审视了客户细分，以展示在更现实的环境中运行这种类型的分析时，您需要采取的实际步骤和可能面临的典型决策。</p><p id="b1e4" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated"><strong class="lh iu">注意</strong>为了简洁起见，我只包括了构成故事流程的一部分的代码，所以所有的图表都是“只有图片和数字”。你可以在我的网站 找到完整的客户档案分析<a class="ae le" href="https://rpubs.com/DiegoUsai/534775" rel="noopener ugc nofollow" target="_blank"> <strong class="lh iu">。</strong></a></p><h1 id="2f63" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">商业目标</h1><p id="ef7f" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">选择合适的方法取决于你想要回答的问题的性质和你的企业所处的行业类型。在这篇文章中，我假设我正在与一个客户一起工作，这个客户希望<strong class="lh iu">更好地了解他们的客户基础</strong>，特别强调每个客户对企业底线的<strong class="lh iu">货币价值</strong>。</p><p id="7490" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">一种非常适合这种分析的方法是流行的<a class="ae le" href="https://en.wikipedia.org/wiki/RFM_%28customer_value%29" rel="noopener ugc nofollow" target="_blank"> RFM 细分</a>，它考虑了 3 个主要属性:</p><ul class=""><li id="69f1" class="mi mj it lh b li md lm me lq mk lu ml ly mm mc mn mo mp mq bi translated"><code class="fe mr ms mt mu b">Recency</code>–<em class="mv">客户最近购买了什么？</em></li><li id="f2f9" class="mi mj it lh b li mw lm mx lq my lu mz ly na mc mn mo mp mq bi translated"><code class="fe mr ms mt mu b">Frequency</code>–<em class="mv">他们多久购买一次？</em></li><li id="e9b6" class="mi mj it lh b li mw lm mx lq my lu mz ly na mc mn mo mp mq bi translated"><code class="fe mr ms mt mu b">Monetary Value</code>–<em class="mv">他们花了多少钱？</em></li></ul><p id="0973" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">这是一种受欢迎的方法，理由很充分:实现很容易<strong class="lh iu">(你只需要一个随时间变化的客户订单的交易数据库)，并且基于<strong class="lh iu">每个客户贡献了多少</strong>显式地创建子组。</strong></p><h1 id="38c5" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">加载库</h1><pre class="kp kq kr ks gt nb mu nc nd aw ne bi"><span id="f9ca" class="nf jr it mu b gy ng nh l ni nj">library(tidyverse)<br/>library(lubridate)<br/>library(readr)<br/>library(skimr)<br/>library(broom)<br/>library(scales)<br/>library(ggrepel)<br/>library(fpc)</span></pre><h1 id="6dc3" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">数据</h1><p id="08fc" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我在这里使用的数据集附带了一个红皮书出版物，可以在附加资料部分免费下载。这些数据涵盖了<strong class="lh iu">样本户外公司</strong>的<em class="mv"> 3 &amp; 1/2 年</em>的销售额<code class="fe mr ms mt mu b">orders</code>，这是一家虚构的 B2B 户外设备零售企业，并附有他们销售的<code class="fe mr ms mt mu b">products</code>及其客户(在他们的案例中是<code class="fe mr ms mt mu b">retailers</code>)的详细信息。</p><p id="fa9e" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">在这里，我只是加载已编译的数据集，但如果你想继续，我也写了一篇名为<a class="ae le" href="https://diegousai.io/2019/09/loading-merging-and-joining-datasets/" rel="noopener ugc nofollow" target="_blank">加载、合并和连接数据集</a>的文章，其中我展示了我如何组装各种数据馈送，并整理出变量命名、新功能创建和一些常规内务任务等内容。</p><pre class="kp kq kr ks gt nb mu nc nd aw ne bi"><span id="c2e0" class="nf jr it mu b gy ng nh l ni nj">orders_tbl &lt;- read_rds("orders_tbl.rds")</span></pre><p id="bcc0" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">你可以在我的 Github 库上找到完整的代码。</p><h1 id="034d" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">数据探索</h1><p id="27b1" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这是任何数据科学项目的关键阶段，因为它有助于理解数据集。在这里，你可以<em class="mv">了解变量之间的关系</em>，发现数据中有趣的模式，检测异常事件和异常值。这也是你<em class="mv">制定假设</em>的阶段，假设细分可能会发现哪些客户群。</p><p id="ee2c" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">首先，我需要创建一个分析数据集，我称之为<code class="fe mr ms mt mu b">customers_tbl</code> ( <code class="fe mr ms mt mu b">tbl</code>代表<a class="ae le" href="https://cran.r-project.org/web/packages/tibble/vignettes/tibble.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lh iu"> tibble </strong> </a>，R modern 代表数据帧)。我将<code class="fe mr ms mt mu b">average order value</code>和<code class="fe mr ms mt mu b">number of orders</code>包括在内，因为我想看看 RFM 标准之外的几个变量，即近期、频率和货币价值。</p><pre class="kp kq kr ks gt nb mu nc nd aw ne bi"><span id="dceb" class="nf jr it mu b gy ng nh l ni nj">customers_tbl &lt;- <br/>   orders_tbl %&gt;%  <br/>                                 # cut-off date is 30-June-2007<br/>   mutate(days_since = as.double( <br/>     ceiling(<br/>       difftime(<br/>          time1 = "2007-06-30",<br/>          time2 = orders_tbl$order_date, <br/>          units = "days")))<br/>          ) %&gt;%<br/>   filter(order_date &lt;= "2007-06-30") %&gt;% <br/>   group_by(retailer_code) %&gt;%    # create analysis variables<br/>   summarise(<br/>      recency = min(days_since),  # recency<br/>      frequency = n(),            # frequency<br/>      avg_amount = mean(revenue), # average sales<br/>      tot_amount = sum(revenue),  # total sales<br/>      # number of orders<br/>      order_count = length(unique(order_date))<br/>      ) %&gt;%                          <br/>   mutate(avg_order_val =         # average order value<br/>            tot_amount / order_count) %&gt;% <br/>   ungroup()</span></pre><p id="ef34" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">根据经验，你最好在你的细分中包括一个良好的<strong class="lh iu"> 2 到 3 年的交易历史</strong>(这里我用的是完整的<em class="mv"> 3 &amp; 1/2 </em>年)。这确保您的数据有足够的变化，以捕捉各种各样的客户类型和行为、不同的购买模式和<em class="mv">异常值</em>。</p><p id="7ce3" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated"><strong class="lh iu">异常值</strong>可能代表很少出现的客户，例如，在一段时间内只进行了一些零星的购买，或者只下了一两个非常大的订单就消失了。一些数据科学从业者更喜欢从细分分析中排除离群值，因为<em class="mv"> k 均值聚类</em>倾向于将它们放在自己的小组中，这可能没有什么描述能力。相反，我认为重要的是包括异常值，这样就可以研究它们，了解它们为什么会出现，如果这些客户再次出现，就用正确的激励措施瞄准他们(比如<em class="mv">推荐他们可能购买的产品</em>，多次购买折扣，或者让他们加入一个<em class="mv">忠诚度计划</em>)。</p><h1 id="61fe" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">单变量探索</h1><h2 id="5c07" class="nf jr it bd js nk nl dn jw nm nn dp ka lq no np ke lu nq nr ki ly ns nt km nu bi translated">崭新</h2><p id="5702" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">新近分布严重右偏，平均值约为 29，50%的观察值介于 9 和 15 之间。这意味着大部分顾客在过去 15 天内进行了最近一次购买。</p><pre class="kp kq kr ks gt nb mu nc nd aw ne bi"><span id="1ce5" class="nf jr it mu b gy ng nh l ni nj"><strong class="mu iu">summary</strong>(customers_tbl$frequency)</span><span id="75fe" class="nf jr it mu b gy nv nh l ni nj">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. <br/>##     2.0   245.0   565.5   803.1   886.2  8513.0</span></pre><p id="361c" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">通常情况下，我希望订单在时间上分布得更均匀一些，尾部的第一部分不会有太多缺口。集中在过去 2 周活动中的大量销售告诉我，订单是“手动”添加到数据集的，以模拟订单激增。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/b7d390cf06528cff3eb445a5e9eb4916.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BLXiZsEKKZvOpR2awz_dKw.png"/></div></div></figure><h2 id="a5f0" class="nf jr it bd js nk nl dn jw nm nn dp ka lq no np ke lu nq nr ki ly ns nt km nu bi translated">频率</h2><p id="d5d8" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">分布是右偏的，大多数客户购买了 250 次到不到 900 次，平均值被右偏拉到中值以上。</p><pre class="kp kq kr ks gt nb mu nc nd aw ne bi"><span id="95b0" class="nf jr it mu b gy ng nh l ni nj"><strong class="mu iu">summary</strong>(customers_tbl$frequency)</span><span id="70fc" class="nf jr it mu b gy nv nh l ni nj">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. <br/>##     2.0   245.0   565.5   803.1   886.2  8513.0</span></pre><p id="e87e" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">在每个客户购买 4000 次以上时，可以发现少量异常值，其中一个极值点超过 8500 次。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/0da1a90f52246a7bccf6d2418d611f5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pqC_ZcXPVUCP5Q1s5mF9kA.png"/></div></div></figure><h2 id="6cff" class="nf jr it bd js nk nl dn jw nm nn dp ka lq no np ke lu nq nr ki ly ns nt km nu bi translated">总销售额和平均销售额</h2><p id="b53f" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe mr ms mt mu b">total sales</code>和<code class="fe mr ms mt mu b">average sales</code>都是右偏的，总销售额在 5000 万美元和 7500 万美元标记处显示出一些极端的异常值，无论平均销售额是否有更连续的尾部。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nx"><img src="../Images/12abf18a68aa2eb65413c7c65775c70e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lew9MkWQiXMrxmjEp1zjPA.png"/></div></div></figure><p id="659a" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">它们都可以很好地捕捉细分的<em class="mv">货币价值</em>维度，但我个人更喜欢<code class="fe mr ms mt mu b">average sales</code>，因为它缓和了极端值的影响。</p><h2 id="1e57" class="nf jr it bd js nk nl dn jw nm nn dp ka lq no np ke lu nq nr ki ly ns nt km nu bi translated">订单数量</h2><p id="cad7" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe mr ms mt mu b">orders per customer</code>的数量在左手边显示出一个双模态的暗示，一个峰值在 30 左右，另一个峰值在 90 左右。这表明了数据中不同亚组的潜力。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/9e5136b10322066791947ab386180ec6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*du34fd20ezgY6PcabAc6SQ.png"/></div></div></figure><p id="3a9b" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">这种分布也有右偏，在截至 2007 年 6 月 30 日的 3 年中，大多数零售商的订单数量在 37 到 100 之间。有少量异常值，一个极端的例子是一家零售商在 3 年内下了<strong class="lh iu"> 349 份订单</strong>。</p><pre class="kp kq kr ks gt nb mu nc nd aw ne bi"><span id="feaa" class="nf jr it mu b gy ng nh l ni nj"><strong class="mu iu">summary</strong>(customers_tbl$order_count)</span><span id="fd56" class="nf jr it mu b gy nv nh l ni nj">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. <br/>##    1.00   37.00   72.00   78.64  103.00  349.00</span></pre><h2 id="0630" class="nf jr it bd js nk nl dn jw nm nn dp ka lq no np ke lu nq nr ki ly ns nt km nu bi translated">平均订单价值</h2><p id="abf0" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe mr ms mt mu b">average order value</code>刚刚超过 10.5 万美元，50%的订单价值在 6.5 万美元到 13 万美元之间，少数异常值超过 30 万美元。</p><pre class="kp kq kr ks gt nb mu nc nd aw ne bi"><span id="ebad" class="nf jr it mu b gy ng nh l ni nj"><strong class="mu iu">summary</strong>(customers_tbl$avg_order_val)</span><span id="c505" class="nf jr it mu b gy nv nh l ni nj">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. <br/>##   20238   65758   90367  105978  129401  661734</span></pre><p id="ee21" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">我们还发现了少量超出每个订单 30 万美元的异常值。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/99ae844d5654f6efaf7e23d0c4f82604.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E4gukOvR5tTMM_lTU_Dgbw.png"/></div></div></figure><h1 id="521f" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">多变量探索</h1><p id="9e26" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">将 2 或 3 个变量绘制在一起是理解它们之间存在的关系的一个很好的方法，并且可以感觉到你可能会找到多少个聚类。绘制尽可能多的组合总是好的，但这里我只展示最显著的组合。</p><p id="686a" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">让我们画出 RFM 三重奏(<code class="fe mr ms mt mu b">recency</code>、<code class="fe mr ms mt mu b">frequency</code>和<code class="fe mr ms mt mu b">average sales</code>)并使用频率对这些点进行颜色编码。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/7a91633ec1caf8b2b7e820a53acb12a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q1vVD3qtAlbEHEMrihR45g.png"/></div></div></figure><p id="fb08" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">该图表不太容易阅读，因为大多数数据点聚集在左侧，鉴于我们在前一节中发现<code class="fe mr ms mt mu b">recency</code>严重向右倾斜，这并不奇怪。您还可以注意到，大多数点都是淡蓝色，表示购买频率较低。</p><p id="ee03" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">为了使图表更具可读性，通常方便的做法是用正偏斜对变量进行对数变换，以将观察值分布到整个绘图区。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/0e660a4c6c57fc449fb458ba09cdaa67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jvTbq9hGHxPIpp5qovWKCw.png"/></div></div></figure><p id="40dd" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">即使是对数刻度对图表的可读性也没有太大帮助。鉴于<code class="fe mr ms mt mu b">recency</code>中发现的极端右偏，我预计聚类算法可能会发现很难识别定义良好的组。</p><h1 id="7f6a" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">分析</h1><p id="5bcd" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">为了描述客户，我使用了 K 均值聚类技术:它可以很好地处理大型数据集，并快速迭代到稳定的解决方案。</p><p id="c885" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">首先，我需要调整变量的比例，以便它们大小的相对差异不会影响计算。</p><pre class="kp kq kr ks gt nb mu nc nd aw ne bi"><span id="6479" class="nf jr it mu b gy ng nh l ni nj">clust_data &lt;- <br/>   customers_tbl %&gt;% <br/>   <strong class="mu iu">select</strong>(-retailer_code) %&gt;% <br/>   <strong class="mu iu">scale</strong>() %&gt;% <br/>   <strong class="mu iu">as_tibble</strong>()</span></pre><p id="1940" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">然后，我构建一个函数来计算任意数量的中心的<code class="fe mr ms mt mu b">kmeans</code>,并创建一个嵌套的 tibble 来容纳所有的模型输出。</p><pre class="kp kq kr ks gt nb mu nc nd aw ne bi"><span id="f035" class="nf jr it mu b gy ng nh l ni nj">kmeans_map &lt;- <strong class="mu iu">function</strong>(centers = centers) {<br/>   <strong class="mu iu">set.seed</strong>(1975)                   <em class="mv"># for reproducibility</em><br/>   clust_data[,1:3] %&gt;%  <br/>      <strong class="mu iu">kmeans</strong>(centers = centers, <br/>             nstart = 100, <br/>             iter.max = 50)<br/>}</span><span id="549d" class="nf jr it mu b gy nv nh l ni nj">kmeans_map_tbl &lt;-                <em class="mv"># Create a nested tibble</em><br/>   <strong class="mu iu">tibble</strong>(centers = 1:10) %&gt;%    <em class="mv"># create column with centres </em><br/>   <strong class="mu iu">mutate</strong>(k_means = centers %&gt;% <br/>          <strong class="mu iu">map</strong>(kmeans_map)) %&gt;%   <em class="mv"># iterate `kmeans_map` row-wise </em><br/>   <strong class="mu iu">mutate</strong>(glance = k_means %&gt;%   <em class="mv"># apply `glance()` row-wise<br/>          </em><strong class="mu iu">map</strong>(glance))</span></pre><p id="29df" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">最后，我可以构建一个<code class="fe mr ms mt mu b">scree plot</code>并寻找“肘”，在这个点上，添加额外集群的增益<code class="fe mr ms mt mu b">tot.withinss</code>开始变得平稳。看起来最佳的集群数是<strong class="lh iu"> 4 </strong>。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/19c00a5c8b43d52458d99b46b1e77a62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3qnXWMjMQP1UIEJ6JzF1hA.png"/></div></div></figure><h1 id="f78f" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">评估集群</h1><p id="4036" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">尽管该算法在数据中捕获了一些不同的组，但是在分类 1 和 2 以及分类 3 和 4 之间也有一些明显的重叠。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/752d4f916ef6c5799ba24613dccfe4e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tVgAO6ZIgti_a5jGtGw_Pw.png"/></div></div></figure><p id="733c" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">此外，集群之间的平衡不是特别好，第 4 组包含了所有<code class="fe mr ms mt mu b">retailers</code>的近 80%,这对于分析您的客户来说用处有限。第 1 组、第 3 组和第 4 组具有非常相似的<code class="fe mr ms mt mu b">recency</code>值，第 2 组捕获了一些(但不是全部)“最近”的买家。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ny"><img src="../Images/48c680e7d7f64b7fc90440c8f3cab035.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FiMvpC-pIrEfa6UfoEOjHw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">rfm 4-cluster table</figcaption></figure><h1 id="51ca" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">替代分析</h1><p id="5931" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">正如预期的那样，该算法正在努力寻找基于<code class="fe mr ms mt mu b">recency</code>的定义明确的群体。我对基于 RFM 的分析不是特别满意，我认为考虑不同的特征组合是明智的。</p><p id="fec6" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">我已经研究了几个备选方案(为了简洁起见，这里没有包括)，发现每个客户的<code class="fe mr ms mt mu b">average order value</code>、<code class="fe mr ms mt mu b">orders per customer</code>和<code class="fe mr ms mt mu b">average sales </code>是有希望的候选方案。绘制它们揭示了足够好的特征分离，这是令人鼓舞的。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/2a9b14adf77854c1a8eb175317e79863.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*neARxT4PquGnxAbBPotL5g.png"/></div></div></figure><p id="4890" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">让我们用新的变量再进行一次客户细分。</p><pre class="kp kq kr ks gt nb mu nc nd aw ne bi"><span id="0aad" class="nf jr it mu b gy ng nh l ni nj"><em class="mv"># function for a set number of centers</em><br/>kmeans_map_alt &lt;- <strong class="mu iu">function</strong>(centers = centers) {<br/>   <strong class="mu iu">set.seed</strong>(1975)                 <em class="mv"># for reproducibility</em><br/>   clust_data[,4:6] %&gt;%           <em class="mv"># select relevant features</em><br/>      <strong class="mu iu">kmeans</strong>(centers = centers, <br/>             nstart = 100, <br/>             iter.max = 50)<br/>}</span><span id="cc38" class="nf jr it mu b gy nv nh l ni nj"><em class="mv"># create nested tibble</em><br/>kmeans_map_tbl_alt &lt;- <br/>   <strong class="mu iu">tibble</strong>(centers = 1:10) %&gt;%     <em class="mv"># create column with centres </em><br/>   <strong class="mu iu">mutate</strong>(k_means = centers %&gt;% <br/>       <strong class="mu iu">map</strong>(kmeans_map_alt)) %&gt;%   <em class="mv"># iterate row-wise </em><br/>   <strong class="mu iu">mutate</strong>(glance = k_means %&gt;%    <em class="mv"># apply `glance()` row-wise</em><br/>       <strong class="mu iu">map</strong>(glance))               </span></pre><p id="3d1f" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">同样，聚类的最佳数量应该是<strong class="lh iu"> 4 </strong>，但是斜率变为 5 的变化没有我们之前看到的那么明显，这可能意味着有意义的组的数量可能会更高。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/75481429920c3f8375a53275785c67df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1catiDeiueiQxBlU2Ku5rg.png"/></div></div></figure><h1 id="21c0" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">评估集群</h1><p id="7176" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">虽然仍然存在，但集群重叠不太明显，群体分离更加明显。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/275d3a0378fe745af1b29de3beaf9545.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-UgBkD_yg_hV1IywQrrhSw.png"/></div></div></figure><p id="4eb5" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">集群被更好地定义，不再像以前那样由一个群体主宰。虽然没有在模型中使用，但我已经在表格中添加了<code class="fe mr ms mt mu b">recency</code>,表明即使是以前的“问题儿童”现在在各个组中也更加平衡了。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nz"><img src="../Images/c44c2d737bde79ff412b881990b139e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1-o4VE1fjyAHEoJUIK3efw.png"/></div></div></figure><p id="aaa3" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">当我增加集群的数量时，组分离仍然很整齐，一些明显的重叠仅在 7 集群配置中再次出现。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oa"><img src="../Images/4fe4b20e9aafd04c37d232af17c12a97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ydXIKyc1_aMoxApuaBFDWA.png"/></div></div></figure><h1 id="2a18" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">主成分分析</h1><p id="8979" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">绘制变量组合图是一个很好的探索性练习，但本质上是任意的，可能会导致错误和遗漏，尤其是当您需要考虑的变量不止一个时。</p><p id="9d55" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">幸运的是，我们可以使用降维算法，如主成分分析，简称 PCA，来可视化客户群。</p><p id="23ad" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">PCA 的一个主要优点是每个 PCs 都与最大化数据线性方差的方向正交。这意味着前几个 PC 可以捕获数据中的大部分方差，并且是比上面图的变量比较更可靠的聚类的二维可视化。</p><p id="d2ba" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">为了执行<em class="mv">主成分分析</em>，我使用了基数 r 的<code class="fe mr ms mt mu b">prcomp</code>函数。</p><p id="a34c" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated"><strong class="lh iu">非常重要:</strong>不要忘记缩放和居中您的数据！出于某种原因，这不是默认的！</p><pre class="kp kq kr ks gt nb mu nc nd aw ne bi"><span id="abc9" class="nf jr it mu b gy ng nh l ni nj">pca_obj &lt;- <br/>   customers_tbl[,5:7] %&gt;% <br/>   <strong class="mu iu">prcomp</strong>(center = TRUE, <br/>          scale. = TRUE)</span><span id="2b34" class="nf jr it mu b gy nv nh l ni nj"><strong class="mu iu">summary</strong>(pca_obj)<br/><em class="mv">## Importance of components:</em><br/><em class="mv">##                          PC1   PC2  PC3</em><br/><em class="mv">## Standard deviation     1.422 0.942 0.30</em><br/><em class="mv">## Proportion of Variance 0.674 0.296 0.03</em><br/><em class="mv">## Cumulative Proportion  0.674 0.970 1.00</em></span></pre><p id="d7a9" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">最好看一下每台电脑解释的<em class="mv">差异</em>。我需要的信息是<strong class="lh iu">方差比例</strong>。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/cda95fe7090e5988a10a0962e23383ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*STZmSPf3IH83FcLAtM2UnA.png"/></div></div></figure><p id="8c56" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">前两个组成部分解释了数据中 97%的变化，这意味着使用前两个 PC 将使我们对数据有很好的理解，随后的每个 PC 将增加很少的信息。当您有大量变量要在聚类中运行时，这显然更有意义。</p><h1 id="c3b7" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">4 个聚类的 PCA 可视化</h1><p id="045b" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">首先，我从<code class="fe mr ms mt mu b">pca_obj</code>中提取 PCA，并将元素<code class="fe mr ms mt mu b">x</code>中包含的 PCs 坐标与原始<code class="fe mr ms mt mu b">customer_tbl</code>集中的<code class="fe mr ms mt mu b">retailer</code>信息连接起来。</p><pre class="kp kq kr ks gt nb mu nc nd aw ne bi"><span id="c6a0" class="nf jr it mu b gy ng nh l ni nj">pca_tbl &lt;- <br/>   pca_obj$x %&gt;%                 <em class="mv"># extract "x", which contains the PCs co-ordinates</em><br/>   <strong class="mu iu">as_tibble</strong>() %&gt;%               <em class="mv"># change to a tibble</em><br/>   <strong class="mu iu">bind_cols</strong>(customers_tbl %&gt;%   <em class="mv"># append retailer_code</em><br/>             <strong class="mu iu">select</strong>(retailer_code))</span></pre><p id="2714" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">然后，我从<code class="fe mr ms mt mu b">kmeans_map_tbl_alt</code>开始<code class="fe mr ms mt mu b">pluck</code>第 4 个元素，将集群信息附加到它上面，并通过<strong class="lh iu">零售商代码</strong>连接<code class="fe mr ms mt mu b">left_join</code>,这样我在一个 tibble 中就有了我需要的所有信息，为绘图做好准备。</p><pre class="kp kq kr ks gt nb mu nc nd aw ne bi"><span id="486c" class="nf jr it mu b gy ng nh l ni nj">km_pca_4_tbl &lt;- <br/>   kmeans_map_tbl_alt %&gt;% <br/>   <strong class="mu iu">pull</strong>(k_means) %&gt;%<br/>   <strong class="mu iu">pluck</strong>(4) %&gt;%                  <em class="mv"># pluck element 4 </em><br/>   <strong class="mu iu">augment</strong>(customers_tbl) %&gt;%    <em class="mv"># attach .cluster to the tibble </em><br/>   <strong class="mu iu">left_join</strong>(pca_tbl,            <em class="mv"># left_join by retailer_code </em><br/>             by = 'retailer_code')</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/d4e3e4f85ccf4801e59e40ce1df920a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qDdkzs4FmbWbCg4RPXziOQ.png"/></div></div></figure><p id="44ea" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">该图证实了在 4 集群配置中，各个段被很好地分开。分段 1 和分段 3 在不同方向上显示出显著的可变性，并且分段 2 和分段 4 之间存在一定程度的重叠。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ob"><img src="../Images/ad489770425ea41e5b956325eed55364.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ulup6Sx9pJ77CNL2VVSchw.png"/></div></div></figure><p id="1177" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated"><strong class="lh iu">第 1 组</strong>包括下了少量高额订单的客户。尽管他们只占总销售额的 6%,鼓励他们下稍微多一点的订单也能大大增加你的底线。</p><p id="0c47" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated"><strong class="lh iu">第 2 组</strong>是“订单价值低”/“订单数量低”部分。然而，由于它几乎占客户群的 40%，我会鼓励他们增加订单价值或订单数量。</p><p id="fed7" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated"><strong class="lh iu">第 3 组</strong>相对较小(占总<code class="fe mr ms mt mu b">retailers</code>的 11%),但已经下了<em class="mv">非常多的中高价值订单</em>。这些是你最有价值的客户，占总销售额的近 40%。我想让他们非常开心和投入。</p><p id="2dfc" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated"><strong class="lh iu">第四组</strong>是<strong class="lh iu">好机会</strong>可能出现的地方！就零售商数量(45%)和对总销售额的贡献(44%)而言，这是最大的群体。我会试着激励他们转移到第 1 组或第 3 组<strong class="lh iu">的</strong>。</p><h1 id="80de" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">6 个聚类的 PCA 可视化</h1><p id="dd4b" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lh iu">重要提示</strong>:集群编号是随机生成的，因此群组名称与上一节中的名称不匹配。</p><p id="9a1e" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">现在，让我们看看添加额外的集群是否揭示了一些隐藏的动态，并帮助我们微调这个分析练习。这里我只展示 6 集群配置，这是最有前途的。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/48eddcba1e35460cba0b6ab63ef9649d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6r6DNMQ-aUtX4VT0STK5Yw.png"/></div></div></figure><p id="0f56" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">6-片段设置广泛地证实了在 4-分割解决方案中发现的组结构和分离，显示了良好的簇稳定性。之前的细分市场 1 和 3 进一步分裂，形成 2 个<em class="mv">“中端”</em>组，每个组都从之前的细分市场 2 和 4“借用”。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oc"><img src="../Images/ec5b0b4709ea304ee6e859387cca4106.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sQrLPIGkNpcHNOYVPetCAA.png"/></div></div></figure><p id="f569" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">新的<em class="mv">【中端】</em>群体有其独特的特点:</p><ul class=""><li id="98cb" class="mi mj it lh b li md lm me lq mk lu ml ly mm mc mn mo mp mq bi translated"><strong class="lh iu">新组 1 </strong>的客户正在下<em class="mv">中高价值</em>的<em class="mv">高订单数量，并贡献了<em class="mv">总销售额</em>的约 18%。</em></li><li id="81fa" class="mi mj it lh b li mw lm mx lq my lu mz ly na mc mn mo mp mq bi translated"><strong class="lh iu">测试</strong>的策略:由于他们已经频繁下订单，我们可能会向他们提供激励措施<strong class="lh iu">以增加他们的订单价值</strong>。</li><li id="88c5" class="mi mj it lh b li mw lm mx lq my lu mz ly na mc mn mo mp mq bi translated">另一方面，<strong class="lh iu">新的第 3 组</strong>客户购买<em class="mv">的频率降低</em>，具有类似的<em class="mv">中高订单价值</em>，约占<em class="mv">总客户</em>的 16%。</li><li id="2f90" class="mi mj it lh b li mw lm mx lq my lu mz ly na mc mn mo mp mq bi translated"><strong class="lh iu">测试</strong>的策略:在这种情况下，激励可以集中在<strong class="lh iu">提高订单数量</strong>。</li></ul><p id="b35a" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">定义更好的集群代表更大的潜在机会:测试不同的策略、了解每个群体真正的共鸣以及使用正确的激励与他们联系起来变得更加容易。</p><h1 id="491f" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">集群启动评估</h1><p id="991b" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">值得采取的最后一个步骤是通过验证它们是否捕获了数据中的非随机结构来验证您的集群有多“真实”。这对于 k 均值聚类尤其重要，因为分析师必须提前指定聚类的数量。</p><p id="5b34" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated"><strong class="lh iu"> clusterboot 算法</strong>使用 bootstrap 重采样来评估给定集群对数据扰动的稳定程度。通过测量给定数量的重采样运行的集合之间的相似性来评估聚类的稳定性。</p><pre class="kp kq kr ks gt nb mu nc nd aw ne bi"><span id="6171" class="nf jr it mu b gy ng nh l ni nj">kmeans_boot100 &lt;-<br/>   <strong class="mu iu">clusterboot</strong>(<br/>      clust_data[,4:6],<br/>      B = 50,                    <em class="mv"># number of resampling runs</em><br/>      bootmethod = "boot",       <em class="mv"># nonparametric resampling </em><br/>      clustermethod = kmeansCBI, <em class="mv"># clustering method: k-means </em><br/>      k = 7,                     <em class="mv"># number of clusters </em><br/>      seed = 1975)               <em class="mv"># for reproducibility</em></span><span id="e0bd" class="nf jr it mu b gy nv nh l ni nj">bootMean_df &lt;-                   # saving results to a data.frame<br/>   <strong class="mu iu">data.frame</strong>(cluster = 1:7, <br/>              bootMeans = kmeans_boot100$bootmean)</span></pre><p id="effe" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">为了解释结果，我用一个简单的图表来可视化测试输出。</p><p id="76ba" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">请记住:</p><ul class=""><li id="9a03" class="mi mj it lh b li md lm me lq mk lu ml ly mm mc mn mo mp mq bi translated">值<strong class="lh iu">高于 0.8 </strong>(段 2、3 和 5)表示高度稳定的簇</li><li id="ad3f" class="mi mj it lh b li mw lm mx lq my lu mz ly na mc mn mo mp mq bi translated">值<strong class="lh iu">在 0.6 和 0.75 </strong>之间(段 1、4 和 6)表示可接受的稳定度</li><li id="95f4" class="mi mj it lh b li mw lm mx lq my lu mz ly na mc mn mo mp mq bi translated">低于 0.6 (段 7)的值<strong class="lh iu">应视为不稳定</strong></li></ul><p id="f76b" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">因此，6 集群配置总体上相当稳定。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/38011651af475fd9dd587d77ef9008ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HNhFAVWgVqkcU3e6yRshgg.png"/></div></div></figure><h1 id="6677" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">结束语</h1><p id="2199" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这篇文章中，我使用了一个功能丰富的数据集来运行您需要采取的实际步骤，以及在运行客户概要分析时可能面临的考虑。我在一系列不同的客户属性上使用了<strong class="lh iu"> K-means 聚类</strong>技术，在客户群中寻找潜在的子群体，用<strong class="lh iu">主成分分析</strong>直观地检查了不同的群体，并用<code class="fe mr ms mt mu b">fpc</code>包中的<strong class="lh iu">集群引导</strong>验证了集群的稳定性。</p><p id="2b99" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">这种分析应该为与相关业务涉众的讨论提供一个坚实的基础。通常情况下，我会根据客户特征的不同组合向客户展示各种资料，并提出我自己的数据驱动型建议供讨论。然而，最终还是由他们来决定他们想要满足于多少个组，以及每个细分市场应该具有什么样的特征。</p><h1 id="fdc9" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">结论</h1><p id="e492" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">统计细分非常容易实现，可以识别您的客户群中自然发生的行为模式。但是，它有一些限制，在商业环境中应该始终牢记。首先也是最重要的，它是一张及时的快照，就像一张照片一样，它只代表拍摄的那一瞬间。</p><p id="6375" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">因此，应该定期对<strong class="lh iu">进行重新评估</strong>，因为:</p><ul class=""><li id="af01" class="mi mj it lh b li md lm me lq mk lu ml ly mm mc mn mo mp mq bi translated">它可以捕捉不一定适用于不同时间段的季节性影响</li><li id="d59b" class="mi mj it lh b li mw lm mx lq my lu mz ly na mc mn mo mp mq bi translated"><strong class="lh iu">新客户</strong>可以进入你的客户群，改变每个群体的构成</li><li id="56d0" class="mi mj it lh b li mw lm mx lq my lu mz ly na mc mn mo mp mq bi translated">客户的购买模式会随着时间的推移而演变，你的客户档案也应该如此</li></ul><p id="d027" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">尽管如此，统计细分仍然是在消费者数据中寻找群体的一个强大而有用的探索性练习。我从自己的咨询经验中发现，这也能引起客户的共鸣，而且对于非技术受众来说，这是一个相对简单的概念。</p><h1 id="8ca1" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">代码库</h1><p id="2d0f" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">完整的 R 代码可以在<a class="ae le" href="https://github.com/DiegoUsaiUK/Customer_Analytics/tree/master/RFM_Segmentation" rel="noopener ugc nofollow" target="_blank">我的 GitHub 简介</a>中找到</p><h1 id="7201" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">参考</h1><ul class=""><li id="4b68" class="mi mj it lh b li lj lm ln lq od lu oe ly of mc mn mo mp mq bi translated">关于<a class="ae le" href="https://www.insanegrowth.com/customer-segmentation/" rel="noopener ugc nofollow" target="_blank">客户细分优势的更广泛讨论</a></li><li id="7415" class="mi mj it lh b li mw lm mx lq my lu mz ly na mc mn mo mp mq bi translated">关于<a class="ae le" href="http://setosa.io/ev/principal-component-analysis/" rel="noopener ugc nofollow" target="_blank">主成分分析</a>的直观介绍</li><li id="f5ec" class="mi mj it lh b li mw lm mx lq my lu mz ly na mc mn mo mp mq bi translated">对于<a class="ae le" href="https://www.r-bloggers.com/bootstrap-evaluation-of-clusters/" rel="noopener ugc nofollow" target="_blank">集群启动算法</a>的应用</li><li id="fd7e" class="mi mj it lh b li mw lm mx lq my lu mz ly na mc mn mo mp mq bi translated">对于某些<a class="ae le" href="https://www.datascience.com/blog/k-means-alternatives" rel="noopener ugc nofollow" target="_blank"> k-means 缺点的批判</a></li></ul></div><div class="ab cl og oh hx oi" role="separator"><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol"/></div><div class="im in io ip iq"><p id="7554" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated"><em class="mv">原载于 2019 年 9 月 23 日</em><a class="ae le" href="https://diegousai.io/2019/09/steps-and-considerations-to-run-a-successful-segmentation/" rel="noopener ugc nofollow" target="_blank"><em class="mv">https://diegousei . io</em></a><em class="mv">。</em></p></div></div>    
</body>
</html>