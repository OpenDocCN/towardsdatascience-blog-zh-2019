<html>
<head>
<title>PDF Processing with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 处理 PDF</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/pdf-preprocessing-with-python-19829752af9f?source=collection_archive---------2-----------------------#2019-07-02">https://towardsdatascience.com/pdf-preprocessing-with-python-19829752af9f?source=collection_archive---------2-----------------------#2019-07-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/022430a5785c84a3253fa72d2a88f324.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GMLIavQPvYnejuNJ"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Photo by <a class="ae kf" href="https://unsplash.com/@jstrippa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">James Harrison</a> on <a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="8029" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">介绍</h2><p id="c68c" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm kp ln lo lp kt lq lr ls kx lt lu lv lw im bi translated">作为一种语法相对简单的高级解释语言，Python 对于那些没有编程经验的人来说是完美的。流行的 Python 库被很好地集成在一起，提供了处理像 Pdf 这样的非结构化数据源的解决方案，并且可以用来使它更加合理和有用。</p><p id="beb3" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">PDF 是最重要和使用最广泛的数字媒体之一。用于提交和交换文档。pdf 包含有用的信息、链接和按钮、表单域、音频、视频和业务逻辑。</p><h2 id="acec" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">1-为什么使用 Python 处理 PDF</h2><p id="6329" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm kp ln lo lp kt lq lr ls kx lt lu lv lw im bi translated">如你所知，PDF 处理属于文本分析。</p><p id="b0b4" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">大多数文本分析库或框架都是仅用 Python 设计的。这为文本分析提供了杠杆作用。还有一点，你永远无法在现有的机器学习或自然语言处理框架中直接处理 pdf。除非他们为此提供一个明确的接口，否则我们必须首先将 pdf 转换成文本。</p><h2 id="754c" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">2-用于 PDF 处理的 Python 库</h2><p id="53d0" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm kp ln lo lp kt lq lr ls kx lt lu lv lw im bi translated"><strong class="le iu">作为一名数据科学家，你可能不会拘泥于数据格式。</strong></p><p id="958e" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">pdf 是一个很好的数据源，大多数组织只发布 pdf 格式的数据。</p><p id="db5e" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">随着 AI 的成长，我们需要更多的数据进行预测和分类；因此，忽略 pdf 作为数据源可能是一个错误。实际上，PDF 处理有点困难，但是我们可以利用下面的 API 来简化它。</p><p id="4c74" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">在这一节中，我们将发现<strong class="le iu">顶级 Python PDF 库:</strong></p><p id="080a" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><a class="ae kf" href="https://euske.github.io/pdfminer/index.html" rel="noopener ugc nofollow" target="_blank">T5】pdf minerT7】</a></p><p id="b2f0" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">PDFMiner 是一个从 PDF 文档中提取信息的工具。与其他 PDF 相关工具不同，它完全专注于获取和分析文本数据。PDFMiner 允许用户获得文本在页面上的确切位置，以及其他信息，如字体或线条。它包括一个 PDF 转换器，可以将 PDF 文件转换为其他文本格式(如 HTML)。它有一个可扩展的 PDF 解析器，可以用于文本分析之外的其他目的。</p><p id="40b4" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><a class="ae kf" href="https://github.com/mstamy2/PyPDF2" rel="noopener ugc nofollow" target="_blank"> <strong class="le iu"> PyPDF2 </strong> </a></p><p id="d1d3" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">PyPDF2 是一个纯 python 的 PDF 库，能够拆分、合并、裁剪和转换 PDF 文件的页面。它还可以向 PDF 文件添加自定义数据、查看选项和密码。它可以从 pdf 中检索文本和元数据，还可以将整个文件合并在一起。</p><p id="2640" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><a class="ae kf" href="https://github.com/pmaupin/pdfrw" rel="noopener ugc nofollow" target="_blank">T13】pdfT15】rw</a></p><p id="c8fb" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">pdfrw 是一个 Python 库和实用程序，用于读取和写入 PDF 文件:</p><ul class=""><li id="32ce" class="mc md it le b lf lx lj ly kp me kt mf kx mg lw mh mi mj mk bi translated">版本 0.4 已经过测试，可以在 Python 2.6、2.7、3.3、3.4、3.5 和 3.6 上运行</li><li id="acb7" class="mc md it le b lf ml lj mm kp mn kt mo kx mp lw mh mi mj mk bi translated">操作包括子集化、合并、旋转、修改元数据等。</li><li id="59ee" class="mc md it le b lf ml lj mm kp mn kt mo kx mp lw mh mi mj mk bi translated">最快的纯 Python PDF 解析器</li><li id="565b" class="mc md it le b lf ml lj mm kp mn kt mo kx mp lw mh mi mj mk bi translated">多年来一直被印刷商用于印前生产</li><li id="033c" class="mc md it le b lf ml lj mm kp mn kt mo kx mp lw mh mi mj mk bi translated">可与 rst2pdf 一起使用，忠实地再现矢量图像</li><li id="bdb6" class="mc md it le b lf ml lj mm kp mn kt mo kx mp lw mh mi mj mk bi translated">可以单独使用，也可以与 report lab 结合使用，以便在新的 pdf 中重用现有的 pdf</li><li id="5272" class="mc md it le b lf ml lj mm kp mn kt mo kx mp lw mh mi mj mk bi translated">特许的</li></ul><p id="9e0c" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">石板</strong></p><p id="5289" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">Slate 是一个 Python 包，它简化了从 PDF 文件中提取文本的过程。这取决于 PDFMiner 包。</p><h2 id="9b4a" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">3-设置环境</h2><p id="4903" class="pw-post-body-paragraph lc ld it le b lf lg lh li lj lk ll lm kp ln lo lp kt lq lr ls kx lt lu lv lw im bi translated"><strong class="le iu">第一步:</strong>从【Python.org】<strong class="le iu"/>中选择要安装的 Python 版本。</p><p id="5b9b" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">第二步:</strong>下载 Python 可执行安装程序。</p><p id="2ffb" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">第三步:</strong>运行可执行安装程序。</p><p id="cbbc" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">步骤 4: </strong>验证 Python 是否安装在 Windows 上。</p><p id="7a44" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">步骤 5: </strong>验证是否安装了 Pip。</p><p id="8fad" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">第六步:</strong>将 Python 路径添加到环境变量中(可选)。</p><p id="d2b1" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">步骤 7 </strong>:为你的 IDE 安装 Python 扩展。</p><blockquote class="mq mr ms"><p id="5cb3" class="lc ld mt le b lf lx lh li lj ly ll lm mu lz lo lp mv ma lr ls mw mb lu lv lw im bi translated">我在 visual studio 代码中使用 Python 3.7。有关如何设置环境和选择 Python inter inter ter 来开始用 VS 代码编码的更多信息，请查看 VS 代码文档中的<strong class="le iu"/><a class="ae kf" href="https://code.visualstudio.com/docs/python/python-tutorial" rel="noopener ugc nofollow" target="_blank"><strong class="le iu">Python 入门。</strong>T25】</a></p></blockquote><p id="b588" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">第 7 步:现在你可以用你的 IDE 执行 python 脚本了。</p><p id="423a" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">步骤 8 </strong>:安装<strong class="le iu"> pdfminer.six </strong></p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="4876" class="kg kh it nc b gy ng nh l ni nj">pip install pdfminer.six</span></pre><p id="0c87" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">第 9 步</strong>:安装<strong class="le iu"> PyPDF2 </strong></p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="aead" class="kg kh it nc b gy ng nh l ni nj">pip install PyPDF2</span></pre><p id="dde5" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">搞定了。现在，你可以开始用 python 处理 pdf 文档了。</p><h2 id="2214" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated"><strong class="ak"> 4-多个大型 Pdf 文档文本提取解决方案</strong></h2><figure class="mx my mz na gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nk"><img src="../Images/1cc171fb24c6629eddae40ef405e6f74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ADmk27YqK5GP38ELF2Pqcg.jpeg"/></div></div></figure><p id="2e50" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">pdf 文本提取解决方案基于三个主要步骤:</p><ul class=""><li id="8729" class="mc md it le b lf lx lj ly kp me kt mf kx mg lw mh mi mj mk bi translated"><strong class="le iu">将 PDF 文档分割成一组文档(逐页分割)</strong></li><li id="53c7" class="mc md it le b lf ml lj mm kp mn kt mo kx mp lw mh mi mj mk bi translated"><strong class="le iu">处理分割文档并提取文本。</strong></li></ul></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><p id="8b59" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">步骤 1:设置烧瓶应用端口和前缀:</strong></p><pre class="mx my mz na gt nb nc ns bn nt nu bi"><span id="d875" class="nv kh it nc b be nw nx l ny nj">import datetime<br/>import numpy as np<br/>import json<br/><br/><br/>def myconverter(o):<br/><br/>    if isinstance(o, datetime.datetime):<br/>        return o.__str__()<br/>    if isinstance(o, np.bool_):<br/>        return o.__str__()<br/><br/><br/>def writeToJSONFile(filepath, data):<br/>    with open(filepath, 'w') as file:<br/>        json.dump(data, file, default=myconverter, indent=4)<br/><br/><br/>ports = {<br/>    "data_extraction": 5000<br/>}<br/><br/>PREFIX = "/api"</span></pre><p id="6515" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">第二步:分割 PDF 文档</strong>:</p><p id="082c" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">该脚本包括:</p><ul class=""><li id="ba14" class="mc md it le b lf lx lj ly kp me kt mf kx mg lw mh mi mj mk bi translated">从上传文件夹中收集 Pdf 文件</li><li id="372b" class="mc md it le b lf ml lj mm kp mn kt mo kx mp lw mh mi mj mk bi translated">逐页分割 Pdf 文件</li><li id="2fa6" class="mc md it le b lf ml lj mm kp mn kt mo kx mp lw mh mi mj mk bi translated">将分割的 pdf 页面保存到输出文件夹</li></ul><pre class="mx my mz na gt nb nc ns bn nt nu bi"><span id="1184" class="nv kh it nc b be nw nx l ny nj">import os<br/>from PyPDF2 import PdfFileReader, PdfFileWriter<br/><br/><br/>def splitting(upload_folder, split_folder):<br/>    '''Do collect PDF files, split pages and save them<br/>    '''<br/><br/>    entries = os.listdir(upload_folder)<br/>    path = os.path.abspath(split_folder)<br/><br/>    for entry in entries:<br/><br/>        uploaded_file = os.path.join(upload_folder, entry)<br/>        output_file_folder = os.path.join(path, entry)<br/><br/>        if not os.path.isdir(output_file_folder):<br/>            os.mkdir(output_file_folder)<br/><br/>            pdf = PdfFileReader(uploaded_file, strict=False)<br/>            for page in range(pdf.getNumPages()):<br/>                pdf_writer = PdfFileWriter()<br/>                pdf_writer.addPage(pdf.getPage(page))<br/>                output_filename = \<br/>                    os.path.join(output_file_folder, f'{page+1}.pdf')<br/>                with open(output_filename, 'wb') as out:<br/>                    pdf_writer.write(out)<br/><br/><br/><br/></span></pre><p id="049b" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">第三步:从 PDF 文档中提取文本</strong>:</p><p id="d131" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">该脚本包括:</p><ul class=""><li id="cd33" class="mc md it le b lf lx lj ly kp me kt mf kx mg lw mh mi mj mk bi translated">收集分割的 PDF 页面。</li><li id="4604" class="mc md it le b lf ml lj mm kp mn kt mo kx mp lw mh mi mj mk bi translated">将文本文件提取并保存到输出目录</li></ul><pre class="mx my mz na gt nb nc ns bn nt nu bi"><span id="6d9a" class="nv kh it nc b be nw nx l ny nj">import os<br/>from io import StringIO<br/>import re<br/>from pdfminer.pdfinterp import PDFResourceManager, PDFPageInterpreter<br/>from pdfminer.converter import TextConverter<br/>from pdfminer.layout import LAParams<br/>from pdfminer.pdfpage import PDFPage<br/><br/><br/>def pdf_to_text(path):<br/>    '''Extract text from pdf documents<br/>    '''<br/><br/>    manager = PDFResourceManager()<br/>    retstr = StringIO()<br/>    layout = LAParams(all_texts=False, detect_vertical=True)<br/>    device = TextConverter(manager, retstr, laparams=layout)<br/>    interpreter = PDFPageInterpreter(manager, device)<br/>    with open(path, 'rb') as filepath:<br/>        for page in PDFPage.get_pages(filepath, check_extractable=True):<br/>            interpreter.process_page(page)<br/>    text = retstr.getvalue()<br/>    device.close()<br/>    retstr.close()<br/>    return text<br/><br/><br/>def extraction(split_path, text_path):<br/>    '''Extract and save text files to output dir<br/>    '''<br/><br/>    # entries names<br/>    entries = os.listdir(split_path)<br/><br/>    # repeat the process for each entry<br/>    for entry in entries:<br/><br/>        # define a custom list cotain entries files paths<br/>        custom_list = os.listdir(os.path.join(split_path, entry))<br/><br/>        # list must be sorted<br/>        custom_list.sort(key=lambda f: int(re.sub(r'\D', '', f)))<br/><br/>        # repeat the process for each file path<br/>        for file_path in custom_list:<br/><br/>            text_output = pdf_to_text(<br/>                os.path.join(split_path, entry, file_path))<br/><br/>            # save text file of each entry<br/>            with open(os.path.join(text_path, f"{entry}.txt"),<br/>                      "a",<br/>                      encoding="utf-8") as text_file:<br/>                text_file.write(text_output)</span></pre><p id="c807" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">步骤 4:提取相关实用程序的烧瓶包装: (分离和提取烧瓶 API) </strong></p><pre class="mx my mz na gt nb nc ns bn nt nu bi"><span id="4b93" class="nv kh it nc b be nw nx l ny nj">'''Flask wrapping of the extraction related utilities<br/>'''<br/><br/>import os<br/>from flask import Flask, request, jsonify<br/>from werkzeug.utils import secure_filename<br/><br/>from global_common import ports<br/>from global_common import PREFIX<br/>from extraction import extraction<br/>from splitting import splitting<br/><br/>app = Flask(__name__)<br/>port = int(os.environ.get("PORT", ports["data_extraction"]))<br/><br/>path = os.getcwd()<br/><br/># Project directories defined As follow:<br/><br/># -data_dir-: data .<br/>data = os.path.join(path, 'data')<br/>if not os.path.isdir(data):<br/>    os.mkdir(data)<br/><br/># -upload_dir-: contain files uploaded.<br/>uploads = os.path.join(data, 'uploads')<br/>if not os.path.isdir(uploads):<br/>    os.mkdir(uploads)<br/><br/># -preparation_dir-: contain processed &amp; prepared files.<br/>prepare = os.path.join(data, 'files_preparation')<br/>if not os.path.isdir(prepare):<br/>    os.mkdir(prepare)<br/><br/># -output_dir-: contain generated text files.<br/>outputs = os.path.join(data, 'outputs')<br/>if not os.path.isdir(outputs):<br/>    os.mkdir(outputs)<br/><br/># Verify and validate files extensions...<br/>ALLOWED_EXTENSIONS = set(['.pdf'])<br/><br/><br/>def allowed_file(filename):<br/>    '''Assess if the file extension is in the allowed listdir<br/>    '''<br/>    lowercase_extension = os.path.splitext(filename)[1].lower()<br/>    return lowercase_extension in ALLOWED_EXTENSIONS<br/><br/><br/>@app.route(PREFIX + '/upload', methods=['POST'])<br/>def upload():<br/>    '''Upload files to process<br/>    '''<br/>    if request.method != 'POST':<br/>        resp = jsonify({'message': 'Operation not supported'})<br/>        resp.status_code = 500<br/>        return resp<br/><br/>    # check if the post request has the file part<br/>    if 'files[]' not in request.files:<br/>        resp = jsonify({'message': 'No file part in the request'})<br/>        resp.status_code = 500<br/>        return resp<br/><br/>    files = request.files.getlist('files[]')<br/><br/>    errors = {}<br/>    success = False<br/><br/>    # check if file allowed or not allowed.<br/>    for file in files:<br/>        if file and allowed_file(file.filename):<br/>            filename = secure_filename(file.filename)<br/>            file.save(os.path.join(uploads, filename))<br/>            success = True<br/>        else:<br/>            errors[file.filename] = 'File type is not allowed'<br/><br/>    if success and errors:<br/>        errors['message'] = 'File(s) successfully uploaded'<br/>        resp = jsonify(errors)<br/>        resp.status_code = 404<br/>        return resp<br/><br/>    if success:<br/>        resp = jsonify({'message': 'Files successfully uploaded'})<br/>        resp.status_code = 200<br/>        return resp<br/><br/>    resp = jsonify(errors)<br/>    resp.status_code = 404<br/>    return resp<br/><br/><br/>@app.route(PREFIX + '/extraction', methods=['POST'])<br/>def extract_function():<br/>    '''Do extract data from files<br/>    '''<br/>    if request.method == 'POST':  # check request method<br/>        if not os.listdir(uploads):  # if uploads dir is empty return -&gt; error<br/>            resp = jsonify({'message': 'Files not found'})<br/>            resp.status_code = 500<br/>            return resp<br/><br/>        try:<br/><br/>            # splitting : split docs into single pages.<br/>            splitting(uploads, prepare)<br/><br/>            # extraction: extract text from pages.<br/>            extraction(prepare, outputs)<br/><br/>            resp = jsonify({'message': 'Files successfully extracted '})<br/>            resp.status_code = 200<br/>            return resp<br/><br/>        except:<br/><br/>            resp = jsonify({'message': 'error occurs while extraction'})<br/>            resp.status_code = 404<br/>            return resp<br/>    else:<br/><br/>        resp = jsonify({'message': 'Operation not supported'})<br/>        resp.status_code = 500<br/>        return resp<br/><br/><br/>if __name__ == '__main__':<br/>    app.run(debug=True, host='0.0.0.0', port=port)</span></pre><p id="ad0d" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">第五步:编写 Dockerfile 文件</strong></p><pre class="mx my mz na gt nb nc ns bn nt nu bi"><span id="35ee" class="nv kh it nc b be nw nx l ny nj">FROM python:3.7<br/>COPY . /app/<br/>WORKDIR /app<br/>RUN pip install -r requirements.txt<br/>ENTRYPOINT ["python3"]<br/>CMD ["app.py"]</span></pre><p id="cea3" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">第六步:</strong> <strong class="le iu">编写 App(编写 Docker-Compose 文件</strong>)</p><pre class="mx my mz na gt nb nc ns bn nt nu bi"><span id="0b71" class="nv kh it nc b be nw nx l ny nj">version: '3'<br/><br/>services:<br/>  web:<br/>    build: '.'<br/>    ports:<br/>      - '5000:5000'</span></pre><p id="78c0" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">步骤 7:测试烧瓶应用程序(上传&amp;提取)</strong></p><p id="4a72" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">另外，我在<a class="ae kf" href="https://github.com/ahmedkhemiri95/PDFs-TextExtract" rel="noopener ugc nofollow" target="_blank">的 pdf-text extract</a>GitHub 项目中附上了 postman 集合。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="c700" class="kg kh it nc b gy ng nh l ni nj">curl -X POST <a class="ae kf" href="http://127.0.0.1:5000/api/upload" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:5000/api/upload</a><br/>curl -X POST <a class="ae kf" href="http://127.0.0.1:5000/api/upload" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:5000/api/upload</a> --form 'files[]=@"toto.pdf"' --form 'files[]=@"toto2.pdf"'<br/>curl -X POST <a class="ae kf" href="http://127.0.0.1:5000/api/extraction" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:5000/api/extraction</a><br/></span></pre></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><p id="7494" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated">GitHub 上有完整版的 Extraction。</p><p id="0b5f" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">请通过</strong>查看</p><p id="7ecc" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu"> <em class="mt">分叉</em> </strong> <em class="mt">和</em> <strong class="le iu"> <em class="mt">主演</em> </strong> <em class="mt">资源库是支持项目的最佳方式。</em></p><div class="nz oa gp gr ob oc"><a href="https://github.com/ahmedkhemiri95/PDFs-TextExtract" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">ahmedkhemiri 95/pdf-text extract</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">Python 多 PDF 文档文本提取— Python 3.7 作为一名数据科学家，你可能不会拘泥于数据格式。PDFs</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">github.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq jz oc"/></div></div></a></div></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><blockquote class="mq mr ms"><p id="af73" class="lc ld mt le b lf lx lh li lj ly ll lm mu lz lo lp mv ma lr ls mw mb lu lv lw im bi translated"><strong class="le iu">如果你对我的文章有任何反馈、评论或有趣的见解，请随时通过我的 LinkedIn 社交媒体频道联系我</strong></p></blockquote><p id="ed9c" class="pw-post-body-paragraph lc ld it le b lf lx lh li lj ly ll lm kp lz lo lp kt ma lr ls kx mb lu lv lw im bi translated"><strong class="le iu">你可以在 Github 上关注我:【https://github.com/ahmedkhemiri95】T22</strong></p><div class="nz oa gp gr ob oc"><a href="https://www.linkedin.com/in/ahmed-khemiri-b33400134/" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd iu gy z fp oh fr fs oi fu fw is bi translated">Ahmed Khemiri -微软认证培训师-微软| LinkedIn</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">在世界上最大的职业社区 LinkedIn 上查看 Ahmed Khemiri 的个人资料。艾哈迈德有 3 个工作列在他们的…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">www.linkedin.com</p></div></div><div class="ol l"><div class="or l on oo op ol oq jz oc"/></div></div></a></div></div></div>    
</body>
</html>