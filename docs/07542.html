<html>
<head>
<title>Data Science Best Practices: Python Environments</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据科学最佳实践:Python 环境</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-science-best-practices-python-environments-354b0dacd43a?source=collection_archive---------18-----------------------#2019-10-21">https://towardsdatascience.com/data-science-best-practices-python-environments-354b0dacd43a?source=collection_archive---------18-----------------------#2019-10-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/073d58ad7f3c92b301ed8ab2cdd0f0fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Vc48t6-lkx4SW2DC"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Photo by <a class="ae kf" href="https://unsplash.com/@tracycodes?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tracy Adams</a> on <a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div><div class="ab cl kg kh hx ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="im in io ip iq"><h1 id="f840" class="kn ko it bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">什么是 Python 虚拟环境？</h1><p id="f3d0" class="pw-post-body-paragraph ll lm it ln b lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">虚拟环境是隔离的编码空间，可以在其中安装、升级和使用 Python 包，而不是在您的工作环境中全局安装包。虚拟环境可以用. txt 或。yml 文件，它通过终端/命令提示符/anaconda 提示符列出了软件包名称及其版本。当您安装或升级软件包时，旧版本仍安装在您的目录中，因此不同的虚拟环境可以使用不同的软件包版本。</p><h1 id="1aed" class="kn ko it bd kp kq mj ks kt ku mk kw kx ky ml la lb lc mm le lf lg mn li lj lk bi translated">为什么在数据科学中使用虚拟环境？</h1><p id="b8dc" class="pw-post-body-paragraph ll lm it ln b lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">想象一下，你花了几个月的时间清理、操作、创建特征、训练你的模型、改进模型、评估你的模型性能；你操作你的模型并投入生产。此时，您还没有听说过虚拟环境，所以您进入了下一个项目。您找到了下一个项目需要的 Python 包，但是您首先必须更新比如说 Pandas，所以您决定使用以下命令一次性更新您的所有包:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="6caa" class="mx ko it mt b gy my mz l na nb">conda update --all</span></pre><p id="e669" class="pw-post-body-paragraph ll lm it ln b lo nc lq lr ls nd lu lv lw ne ly lz ma nf mc md me ng mg mh mi im bi translated">你开始了你的一天，但是从你最近的一个项目中得到一个警告，告诉你有东西坏了。如果你够幸运，并且这个 bug 并不模糊，你就能够修复它。然而，如果你像我的同事一样不幸，碰巧在一个服务器上运行你的生产模型，并且你破坏了整个 Python path 环境，那么，运气不好。是时候清理干净并托管新服务器了。</p><p id="275a" class="pw-post-body-paragraph ll lm it ln b lo nc lq lr ls nd lu lv lw ne ly lz ma nf mc md me ng mg mh mi im bi translated">您还可能希望使用特定于项目的虚拟环境，通过在环境中指明所有包及其指定版本来确保代码的可再现性。通过使用虚拟环境，您还可以绕过安装软件包时可能需要的管理员权限。最后，使用环境是您可以更好地组织项目的另一个步骤，或者当您只需要一个项目时，避免将包安装到您的默认路径。</p><h1 id="1056" class="kn ko it bd kp kq mj ks kt ku mk kw kx ky ml la lb lc mm le lf lg mn li lj lk bi translated">如何创建和安装虚拟环境？</h1><p id="befd" class="pw-post-body-paragraph ll lm it ln b lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">以下是使用 conda 创建环境的方法之一</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="00a3" class="mx ko it mt b gy my mz l na nb">conda create --name myenv    ## Replace myenv with environment name</span></pre><p id="56fd" class="pw-post-body-paragraph ll lm it ln b lo nc lq lr ls nd lu lv lw ne ly lz ma nf mc md me ng mg mh mi im bi translated">上面的代码将在当前路径中创建环境，使用的 Python 版本与您当前使用的版本相同，因为您没有指定版本。您可以通过以下方式激活此环境:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="efb9" class="mx ko it mt b gy my mz l na nb">conda activate myenv  ## Replace myenv with environment name</span></pre><p id="0cda" class="pw-post-body-paragraph ll lm it ln b lo nc lq lr ls nd lu lv lw ne ly lz ma nf mc md me ng mg mh mi im bi translated">一旦环境被激活，您就可以正常安装软件包，它只会被添加到该环境中。如果要在创建和激活环境之前指定软件包，可以创建一个文件并将文件扩展名更改为。格式如下的 yml。<em class="nh">名称</em>部分将是您激活环境时使用的环境名称。</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/c81872801077b71a3420cf5e3c4b0a77.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*ouWQW82fTc_DVSZjUy09tg.png"/></div></figure><p id="269d" class="pw-post-body-paragraph ll lm it ln b lo nc lq lr ls nd lu lv lw ne ly lz ma nf mc md me ng mg mh mi im bi translated">在你喝完之后。yml 文件就绪，执行此操作以从文件创建环境:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="c661" class="mx ko it mt b gy my mz l na nb">conda env create -f environment.yml</span></pre><p id="6f23" class="pw-post-body-paragraph ll lm it ln b lo nc lq lr ls nd lu lv lw ne ly lz ma nf mc md me ng mg mh mi im bi translated"><em class="nh">的名字是 environment.yml </em>。yml 文件。</p><h1 id="86a9" class="kn ko it bd kp kq mj ks kt ku mk kw kx ky ml la lb lc mm le lf lg mn li lj lk bi translated">将环境安装为您的 Jupyter 笔记本内核</h1><p id="e671" class="pw-post-body-paragraph ll lm it ln b lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">对于喜欢使用 Jupyter 笔记本的人来说，这是非常重要的一步。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="7eda" class="mx ko it mt b gy my mz l na nb">python -m ipykernel install --user --name myenv</span></pre><p id="cf48" class="pw-post-body-paragraph ll lm it ln b lo nc lq lr ls nd lu lv lw ne ly lz ma nf mc md me ng mg mh mi im bi translated">如果不执行这一行，您将无法使用刚刚在 Jupyter 笔记本中创建的环境。</p><h1 id="9a22" class="kn ko it bd kp kq mj ks kt ku mk kw kx ky ml la lb lc mm le lf lg mn li lj lk bi translated">更新您的环境</h1><p id="35b6" class="pw-post-body-paragraph ll lm it ln b lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">如果您由于以下原因需要更新您的环境:</p><ul class=""><li id="335b" class="nj nk it ln b lo nc ls nd lw nl ma nm me nn mi no np nq nr bi translated">您的一个核心依赖项的新版本发布了</li><li id="e543" class="nj nk it ln b lo ns ls nt lw nu ma nv me nw mi no np nq nr bi translated">需要安装额外的软件包</li><li id="b59b" class="nj nk it ln b lo ns ls nt lw nu ma nv me nw mi no np nq nr bi translated">或者你不再需要一个包裹</li></ul><p id="64f5" class="pw-post-body-paragraph ll lm it ln b lo nc lq lr ls nd lu lv lw ne ly lz ma nf mc md me ng mg mh mi im bi translated">编辑您的。yml 文件，编辑包名，然后保存它。打开终端/命令提示符，导航到的目录。yml 文件并运行以下代码:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="f965" class="mx ko it mt b gy my mz l na nb">conda env update --file environment.yml --prune</span></pre><h1 id="8b20" class="kn ko it bd kp kq mj ks kt ku mk kw kx ky ml la lb lc mm le lf lg mn li lj lk bi translated">克隆环境</h1><p id="8e36" class="pw-post-body-paragraph ll lm it ln b lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">您可以在终端/命令提示符下使用以下代码来制作环境的精确副本:</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="c291" class="mx ko it mt b gy my mz l na nb">conda create --name clonename --clone myenv</span></pre><p id="ad87" class="pw-post-body-paragraph ll lm it ln b lo nc lq lr ls nd lu lv lw ne ly lz ma nf mc md me ng mg mh mi im bi translated"><em class="nh"> clonename </em>将是您想要命名您的克隆环境的名称，<em class="nh"> myenv </em>是您想要克隆的环境的名称。</p><h1 id="3998" class="kn ko it bd kp kq mj ks kt ku mk kw kx ky ml la lb lc mm le lf lg mn li lj lk bi translated">谢谢你看我的文章！</h1><p id="3cb2" class="pw-post-body-paragraph ll lm it ln b lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated"><strong class="ln iu">如果你觉得这篇内容很有帮助，并想阅读我的其他内容，请随时关注我:<br/></strong><a class="ae kf" href="http://www.twitter.com/datascitips" rel="noopener ugc nofollow" target="_blank">Twitter</a><br/><a class="ae kf" href="http://www.instagram.com/datascitips" rel="noopener ugc nofollow" target="_blank">insta gram</a><br/><a class="ae kf" href="http://www.facebook.com/datascitips" rel="noopener ugc nofollow" target="_blank">脸书</a> <br/> <strong class="ln iu">我会发布一些对你有用的数据科学技巧和窍门！</strong></p></div></div>    
</body>
</html>