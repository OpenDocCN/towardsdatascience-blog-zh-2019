<html>
<head>
<title>Effective notification mechanisms in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R 中有效的通知机制</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/effective-notification-mechanisms-in-r-82db9cb8816?source=collection_archive---------29-----------------------#2019-09-05">https://towardsdatascience.com/effective-notification-mechanisms-in-r-82db9cb8816?source=collection_archive---------29-----------------------#2019-09-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9bce" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在这里，我们探索不同的 R 通知机制，并看看每种机制的优缺点。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/12030f33deebb3986578ca4e154e7a69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CkOYuLyclxwva1IZXFhTBQ.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@prateekkatyal?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Prateek Katyal</a> on <a class="ae ky" href="https://unsplash.com/search/photos/notification?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a3ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">想象一下，运行一个聚类算法需要 4-5 个小时才能完成，现在你要么等待它完成，要么随着你的耐心减少，每小时检查一次，看看这个过程是否已经完成。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/fc2b8693028a5842c544320857bdf32d.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*Wn0sOncK1XTLUnOQXjxFxA.gif"/></div></figure><p id="a793" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">想象所有这样的场景，然后想象一个通知机制，它会让你知道进度或者一旦完成就通知你。</p><p id="df0a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们是来讨论这个问题的。</p><p id="905f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们从最简单的通知机制开始这篇短文，这个机制被亲切地称为“beepr”。</p><h2 id="05d4" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">beepr</h2><p id="71d5" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">顾名思义，它只是在函数被调用时发出声音。代码是这样的:</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="30f7" class="lw lx it mv b gy mz na l nb nc">library(beepr)<br/>beep()</span></pre><p id="c1f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你也可以从 10 种你想要的声音中选择。这是一个非常简单易用的软件包，关于可用声音的更多细节，你可以参考<a class="ae ky" href="https://www.r-project.org/nosvn/pandoc/beepr.html" rel="noopener ugc nofollow" target="_blank">这里</a>。</p></div><div class="ab cl nd ne hx nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="im in io ip iq"><h2 id="54e9" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">RPushbullet</h2><p id="1de2" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">这是我个人最喜欢的一个，RPushbullet 利用<a class="ae ky" href="https://www.pushbullet.com/" rel="noopener ugc nofollow" target="_blank">push pullet</a>API 跨设备发送通知。它可以是任何东西，浏览器/android/ios，只要你在设备上安装了 pushbullet 你就好。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="3b80" class="lw lx it mv b gy mz na l nb nc"><strong class="mv iu">Step 1:</strong> Install pushbullet app in your phone/browser<br/><strong class="mv iu">Step 2:</strong> Access pushbullet settings from your browser and get the token/key for your account.<br/><strong class="mv iu">Step 3:</strong> Run<br/><em class="nk">library(RPushbullet)<br/>pbSetup()<br/></em><strong class="mv iu">Step 4:</strong> Once you run the above step you will be asked to enter the token and select the registered device in the r console itself, do that.<br/><strong class="mv iu">Step 5: </strong>Run a similar code with your message and you are done<br/><em class="nk">pbPost("note", "Clustering Completed", "Clustering completed in 4hrs 13mins")</em></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/f1d320dc997b6d5ea2bb55d829978e06.png" data-original-src="https://miro.medium.com/v2/resize:fit:814/format:webp/1*RkHyRV4dx3alQdvP3uVYqA.png"/></div></figure><p id="a6df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这不仅仅是笔记，你也可以发送链接，文件作为一个信息和通知将显示在注册的设备。</p><p id="8fa5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常这是我发现最有用的一个。它非常容易安装，也是所有解决方案中最实用的，不管你的代码是运行在服务器上还是桌面上。</p></div><div class="ab cl nd ne hx nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="im in io ip iq"><h2 id="6a9a" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated"><code class="fe nm nn no mv b">notifier</code></h2><p id="7bd6" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">这是一个基于桌面的通知包，可以用来在 macOS，Windows 和 Linux 上发送桌面通知。这里有一篇关于 macOS 实现这个<a class="ae ky" href="https://datascienceplus.com/send-desktop-notifications-from-r-in-windows-linux-and-mac/" rel="noopener ugc nofollow" target="_blank">的文章</a>。但不幸的是，我无法让它在我的 Windows 10 机器上工作，它总是出现这样或那样的错误。但是步骤很简单，如果你能做到，请告诉我。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="3535" class="lw lx it mv b gy mz na l nb nc">#install.packages("devtools") if devtools is not installed<br/>devtools::install_github("gaborcsardi/notifier")</span><span id="77f7" class="lw lx it mv b gy np na l nb nc">library(notifier)<br/>#composing the first notification message<br/><br/>notify(<br/>  title = "Here goes the Title",<br/>  msg = c("Hello","World")<br/>  )</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/03beb83944da4863f3d46c9f2de0f0b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*NI-RM8MPxgSMLicSiLqD1Q.png"/></div></figure><p id="6e28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这张图是 macOS 用的，取自<a class="ae ky" href="https://datascienceplus.com/send-desktop-notifications-from-r-in-windows-linux-and-mac/" rel="noopener ugc nofollow" target="_blank">这里</a>。这也是在桌面环境中获得通知的一种非常方便的方法，但是如果您的代码在服务器上运行，这种方法就没什么用了。</p></div><div class="ab cl nd ne hx nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="im in io ip iq"><h2 id="8201" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">邮件</h2><p id="334d" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">通过<a class="ae ky" href="https://www.rdocumentation.org/packages/mailR/versions/0.4.1" rel="noopener ugc nofollow" target="_blank"> mailR </a>包，你可以从 r 发送电子邮件。但是我不喜欢使用这个，你必须在脚本中传递用户 id/密码，这不太安全。但你仍然感兴趣的是下面的代码。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="e541" class="lw lx it mv b gy mz na l nb nc">install.packages(“mailR”)<br/>library(mailR)</span><span id="f382" class="lw lx it mv b gy np na l nb nc">send.mail(from = “<a class="ae ky" href="mailto:sender@gmail.com" rel="noopener ugc nofollow" target="_blank">sender@gmail.com</a>”,<br/> to = c(“<a class="ae ky" href="mailto:recipient1@gmail.com" rel="noopener ugc nofollow" target="_blank">recipient1@gmail.com</a>”, “Recipient 2 &lt;<a class="ae ky" href="mailto:recipient2@gmail.com" rel="noopener ugc nofollow" target="_blank">recipient2@gmail.com</a>&gt;”),<br/> replyTo = c(“Reply to someone else &lt;<a class="ae ky" href="mailto:someone.else@gmail.com" rel="noopener ugc nofollow" target="_blank">someone.else@gmail.com</a>&gt;”),<br/> subject = “Subject of the email”,<br/> body = “Body of the email”,<br/> smtp = list(host.name = “smtp.gmail.com”, port = 465, user.name = “gmail_username”, passwd = “password”, ssl = TRUE),<br/> authenticate = TRUE,<br/> send = TRUE)</span></pre><p id="1509" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果需要的话，你可以参考<a class="ae ky" href="https://medium.com/@randerson112358/send-email-using-r-program-1b094208cf2f" rel="noopener">这篇文章</a>以获得更多的细节和解决谷歌不太安全的应用程序问题的方法。</p></div><div class="ab cl nd ne hx nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="im in io ip iq"><h2 id="cafb" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated"><code class="fe nm nn no mv b">RDCOMClient — Outlook</code></h2><p id="4d6a" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">这是另一个特别有帮助的方案，如果你在日常生活中必须展望未来的话。安装和运行起来非常简单</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="f5d8" class="lw lx it mv b gy mz na l nb nc">library(RDCOMClient)<br/>## init com api<br/>OutApp &lt;- COMCreate("Outlook.Application")<br/>## create an email <br/>outMail = OutApp$CreateItem(0)<br/>## configure  email parameter <br/>outMail[["To"]] = "test@test.com"<br/>outMail[["subject"]] = "some subject"<br/>outMail[["body"]] = "some body"<br/>## send it                     <br/>outMail$Send()</span><span id="b2c7" class="lw lx it mv b gy np na l nb nc"><strong class="mv iu">#edit to add attachment<br/></strong>outMail[["Attachments"]]$Add(path_to_attch_file)</span><span id="0ef2" class="lw lx it mv b gy np na l nb nc"><strong class="mv iu">#edit to change “from” (send from secondary mailbox)<br/></strong>outMail[["SentOnBehalfOfName"]] = "yoursecondary@mail.com"</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/8179b985080cb7a53f7bc885e70b7676.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*yMfHgUDXK2CcoAUejRV_mw.png"/></div></figure><p id="cbb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">加上发送附件和从另一个邮箱发送的额外优势，这在各种情况下都很有用。</p></div><div class="ab cl nd ne hx nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="im in io ip iq"><p id="330a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在就这些了，现在有了这些，在 R 中实现通知就容易多了，希望能让我们的生活轻松一点。</p></div></div>    
</body>
</html>