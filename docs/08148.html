<html>
<head>
<title>Just Keep Guessing: The Power of the Monte Carlo Method</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">继续猜测:蒙特卡罗方法的力量</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/just-keep-guessing-the-power-of-the-monte-carlo-method-f06bc6f33d19?source=collection_archive---------25-----------------------#2019-11-07">https://towardsdatascience.com/just-keep-guessing-the-power-of-the-monte-carlo-method-f06bc6f33d19?source=collection_archive---------25-----------------------#2019-11-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/592c01642516d2ad8cf8e6b022a8c29f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z3U2Py2kpb1U4MrGjYwTMw.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Photo by <a class="ae kf" href="https://commons.wikimedia.org/wiki/User:Martinp1" rel="noopener ugc nofollow" target="_blank">Martinp1</a></figcaption></figure><p id="e551" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">蒙特卡罗方法是一个非常强大的工具，广泛应用于各种领域。从数学到科学到金融，蒙特卡罗方法可以用来解决各种独特而有趣的问题。</p><p id="6972" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">蒙特卡罗方法的思想相当简单。它依靠大量的重复随机抽样来获得数值结果，并取所有这些结果的平均值来找到问题的最终答案。</p><p id="d716" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们尝试用蒙特卡罗方法找到积分的数值解。在我们开始之前，应该注意到蒙特卡罗模拟对于单变量函数来说并不是最优的。他们在解决多变量函数时做得最好，但是为了清楚和简单起见，我们现在将坚持一个。</p><p id="bc0b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">先说函数平均值的定义。平均值可以表示为</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div class="gh gi le"><img src="../Images/471769e7fb4c17fb3fa43aab20592e2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:376/format:webp/1*1sbldYNtTCEq3T2ILaIUrQ.png"/></div></figure><p id="6530" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">其中<em class="lj"> a </em>和<em class="lj"> b </em>是我们的开始和结束积分点，<em class="lj"> x </em>是我们正在积分的值。因此，从这里我们可以通过将方程的两边乘以范围<em class="lj"> (b-a)来计算积分。</em></p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/b71975f0d6ab9406541f4189b81d6ddc.png" data-original-src="https://miro.medium.com/v2/resize:fit:350/format:webp/1*HmO3ijKQejzUXOPXc0O6Dg.png"/></div></figure><p id="1a15" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在积分等于一个函数的平均值乘以我们想要积分的范围。</p><p id="5c93" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从这里我们要求<em class="lj"> F </em>的平均值。我们可以这样做:取一个大的随机数样本，找到每个随机数的对应值，将这些值相加，然后用随机数的总数除总和。数学上，这个关系看起来像</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/3e2f96cbe4b1c358c6c5348892fadaa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:262/format:webp/1*rCmGN4-CEG0ag7micf4chw.png"/></div></figure><p id="f6f0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">值得注意的是，这只在<strong class="ki iu">随机数均匀分布</strong>的情况下有效。记住这一点，感兴趣的积分的最终方程是</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div class="gh gi lm"><img src="../Images/ce51d556964f546a5931c90723cb12d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:482/format:webp/1*-OXvEXFJP34LNTDxgv7NxQ.png"/></div></figure><p id="cfbe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在剩下要做的就是插入我们想要积分的函数，我们积分的极限，以及在计算积分时我们想要猜多少次。</p><p id="1be1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们举一个简单的例子。让我们将函数<em class="lj"> sin(x) </em>从 0 到<em class="lj"> pi </em>进行积分。分析上，这个积分并不太难，计算只是</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/5eaffa12fc90e121862a686b8a8d2745.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*km2cavQ5SGD8lfrYz92Lhg.png"/></div></figure><p id="2cb3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是我们的兴趣是看看蒙特卡罗方法能多好地完成这个计算，所以我们要解的方程是</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lo"><img src="../Images/6c7fc4c153283294c94fcd0831647061.png" data-original-src="https://miro.medium.com/v2/resize:fit:442/format:webp/1*AuQSFEiZCTzfe1pPSo4R3w.png"/></div></div></figure><p id="661c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是你运行自己的蒙特卡洛计算所需的所有代码。</p><pre class="lf lg lh li gt lp lq lr ls aw lt bi"><span id="e31f" class="lu lv it lq b gy lw lx l ly lz">import numpy as np<br/>from scipy import random</span><span id="c5ce" class="lu lv it lq b gy ma lx l ly lz">a, b = 0, np.pi # limits of integration<br/>N = 100_000     # Number of random points<br/>integral = 0.0  # initialize the value of the integral</span><span id="e76d" class="lu lv it lq b gy ma lx l ly lz">x_random = random.uniform(a,b,N) # array of random numbers</span><span id="9b9d" class="lu lv it lq b gy ma lx l ly lz">def func(x):<br/>    '''This is the function that we want to integrate'''<br/>    return np.sin(x)</span><span id="6833" class="lu lv it lq b gy ma lx l ly lz"># Makes a guess at the integral, adds that guess to the other guesses, and prints intermediate answers<br/>for x in range(N):<br/>    integral += func(x_random[x])<br/>    if (x % 10_000 == 0) &amp; (x != 0):<br/>        intermediate_answer = (b-a)/float(x)*integral<br/>        print(f'Value after {x} iterations is {intermediate_answer}')<br/>    <br/>answer = (b-a)/float(N)*integral<br/>print(f'The value of the integral from {a} to {b} is: ', answer)</span></pre><p id="49bf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">结果是</p><figure class="lf lg lh li gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mb"><img src="../Images/395cce55036d431f857e44209eeb187a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*pKwXRZ4-yoX0vC2K6_5bbA.png"/></div></div></figure><p id="ea71" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以看到，我们的蒙特卡洛计算正在慢慢地向正确答案靠拢！</p></div></div>    
</body>
</html>