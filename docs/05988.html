<html>
<head>
<title>Easy, Engaging Bar Charts from Simple to Sophisticated</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从简单到复杂的简单、引人入胜的条形图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/easy-bar-charts-from-simple-to-sophisticated-7270c03eced8?source=collection_archive---------15-----------------------#2019-08-31">https://towardsdatascience.com/easy-bar-charts-from-simple-to-sophisticated-7270c03eced8?source=collection_archive---------15-----------------------#2019-08-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d109" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过数据可视化讲述您的故事</h2></div><p id="d300" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">想象一下生成数据可视化的最简单的代码。让我们从一个我们都见过并且都需要的形象化的条形图开始。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/8409dcf0261371af37c52a535d61c472.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4vV-MfsBu4rj-TIruV1wfg.jpeg"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk">Beach bar chart, horizontal orientation.</figcaption></figure><p id="afd3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">条形图中的每个条形代表一个变量的类别或级别，该变量具有相对较少的唯一值，例如公司的各个部门。每个条形的高度对应于我们分配给该类别的数字。这个数字可以代表很多东西，例如，对于每个部门，雇员的平均工资，或者雇员的数量。</p><p id="d6e4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们需要指令来创建一个如此简单的条形图，以至于计算机可以直接读取我们的想法。我们希望我们的默认可视化在没有编程的情况下看起来很棒。我们宁愿把时间花在分析和解释上，甚至(有时)做一些完全不同的事情，而不是弄清楚编码语法和调试。</p><blockquote class="lr"><p id="a36f" class="ls lt iq bd lu lv lw lx ly lz ma la dk translated">最小的计算机输入应该提供最大的有用的计算机输出。</p></blockquote><p id="3a25" class="pw-post-body-paragraph kf kg iq kh b ki mb jr kk kl mc ju kn ko md kq kr ks me ku kv kw mf ky kz la ij bi translated">无论您是 R 专家还是 Python 专家，或者根本不是专家，都没有什么区别。为了简单起见，我们将条形图函数命名为<code class="fe mg mh mi mj b">BarChart</code>。一个简单的函数调用就是一个简单的函数调用，不管是什么语言，所有人都可以访问。<code class="fe mg mh mi mj b">BarChart</code>包含在我的<em class="mk"> lessR </em>包中，是 R 生态系统的一部分。</p><h1 id="563c" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">数据帧</h1><p id="2d9f" class="pw-post-body-paragraph kf kg iq kh b ki nd jr kk kl ne ju kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">从哪里开始？</p><blockquote class="lr"><p id="4c8c" class="ls lt iq bd lu lv lw lx ly lz ma la dk translated">数据分析分析组织成表格的指定变量的数据值。</p></blockquote><p id="94ea" class="pw-post-body-paragraph kf kg iq kh b ki mb jr kk kl mc ju kn ko md kq kr ks me ku kv kw mf ky kz la ij bi translated">将您的数据值存储在<em class="mk">数据表</em>中。每一列都包含单个变量的数据值，例如下面的一些雇员的 Excel 表。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi ni"><img src="../Images/24584891c77c2a903bde5a55e014ae92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7H8DMUdrOmyDAqCrh-VD7A.jpeg"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk">First six rows of data of a data table with an ID field and four variables: Years, Gender, Dept, and Salary.</figcaption></figure><p id="b495" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用相对较少的非数字类别定义数据表中的每个分类变量，比如性别和部门。其他变量有连续的数值，如薪水。每行包含单个雇员的数据值。空白单元格表示缺少数据。</p><p id="b282" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们访问这种数据表的通用结构，无论是用 R 语言、Python 语言，还是在第一个广泛可用的数据分析系统中，都可以追溯到 20 世纪 70 年代初我的大学时代。当时，我在 IBM 360 大型机上用穿孔卡运行 SAS 和 SPSS 版进行数据分析，玩得很开心。你知道，在我们有那些连接到主机的高级终端之前，我们可以在屏幕上打字，更不用说携带我们自己的电脑了。从一开始，我们就将数据组织成分类变量和连续变量的数据表。</p><p id="c76f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要开始分析，请将数据表中的数据值从某个外部文件(位于您的计算机系统或网络上)读取到存储在您正在运行的应用程序中的数据结构中。r 和 Python 把这个数据结构叫做<em class="mk">数据帧</em>。我们正是从数据框架开始数据分析的。</p><p id="8784" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一个简单的读取函数，不出所料地被命名为<code class="fe mg mh mi mj b">Read</code>，也是<em class="mk"> lessR </em>包的一部分。<code class="fe mg mh mi mj b">Read</code>用相同的函数调用将 Excel、text csv 逗号或制表符分隔、SAS、SPSS 或 R 数据文件读入 R 数据框。计算机不是完全哑的，所以让它弄清楚文件的类型。<code class="fe mg mh mi mj b">Read</code>还提供各种输出来帮助你理解你的数据，并确保它被正确读取。</p><p id="e79d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要使用，在响应 R 命令提示符&gt;时，输入带数据位置的<code class="fe mg mh mi mj b">Read</code>，用引号括起来。将输出定向到数据框。在这里，从文件的网址读取上图中引用的完整 Excel 文件。为简单起见，将我们新创建的数据框称为<em class="mk"> d，</em>是所有<em class="mk"> lessR </em>数据分析函数的默认数据框名称。</p><pre class="lc ld le lf gt nj mj nk nl aw nm bi"><span id="88e7" class="nn mm iq mj b gy no np l nq nr">d = Read("<a class="ae ns" href="http://web.pdx.edu/~gerbing/data/employee.xlsx" rel="noopener ugc nofollow" target="_blank">http://web.pdx.edu/~gerbing/data/employee.xlsx</a>")</span></pre><p id="d301" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要在您的计算机系统上浏览数据文件，而不是位置，不要在引号之间放置任何东西。</p><h1 id="16fd" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">基本条形图</h1><p id="2309" class="pw-post-body-paragraph kf kg iq kh b ki nd jr kk kl ne ju kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">现在，我们有了编写最简单的函数调用所需的信息，可以创建每个部门中雇员数量的条形图。</p><blockquote class="lr"><p id="5848" class="ls lt iq bd lu lv lw lx ly lz ma la dk translated">从可视化函数创建可视化，该函数将数据作为变量名称引用。</p></blockquote><p id="387d" class="pw-post-body-paragraph kf kg iq kh b ki mb jr kk kl mc ju kn ko md kq kr ks me ku kv kw mf ky kz la ij bi translated">这就是我们的函数名和我们希望绘制以获得条形图的变量。</p><h2 id="c3f6" class="nn mm iq bd mn nt nu dn mr nv nw dp mv ko nx ny mx ks nz oa mz kw ob oc nb od bi translated">默认条形图</h2><p id="94f9" class="pw-post-body-paragraph kf kg iq kh b ki nd jr kk kl ne ju kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">要获得默认条形图，运行 R 应用程序(参见最后一节)，访问<em class="mk"> lessR </em>函数，读取您的数据，然后输入以下内容以响应 R 命令提示符，&gt;。</p><pre class="lc ld le lf gt nj mj nk nl aw nm bi"><span id="9f78" class="nn mm iq mj b gy no np l nq nr">BarChart(Dept)</span></pre><p id="6b91" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你把你的数据框命名为<em class="mk"> d </em>，就是这样。如果您愿意，可以包含参数<em class="mk"> data </em>，这是一个名为<em class="mk"> d </em>之外的数据帧所必需的。</p><pre class="lc ld le lf gt nj mj nk nl aw nm bi"><span id="6ee0" class="nn mm iq mj b gy no np l nq nr">BarChart(Dept, data=d)</span></pre><p id="21ea" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">无论哪种方式，得到以下可视化。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi oe"><img src="../Images/3f82faad274b21c73c8374c92c67e599.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lZ-B0dc8ycYu9gV7bpkiwA.jpeg"/></div></div></figure><p id="c572" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mg mh mi mj b">BarChart</code>标注每个条形，如每个部门员工的百分比。从我们的可视化中，我们看到销售部门的员工比任何其他部门都多，占所有员工的 15%或 42%。金融从业人员最少，只有 4 人，占全部从业人员的 11%。</p><p id="b9ca" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的默认条形图避免了枯燥的灰色。我们想要颜色，但不是任何颜色。我们希望防止一些条形(如亮红色)比其他条形(如深蓝色)更明显的感知偏差。条形图中的所有颜色都具有相同的亮度和强度。如果我们将彩色条纹放入 PhotoShop 等照片处理应用程序，并转换为灰度，所有条纹的灰度都相同。</p><p id="bcfe" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们想要许多易于实施的选项。如果我们愿意，可以水平翻转条形，或者用绘制的数值(这里是计数，而不是百分比)标记条形，或者完全关闭标记，甚至用灰色标记。我们希望所有这些选项都可以工作，而不必编写更多的代码行。</p><p id="b7e8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在创建我们伟大的图形时，我们可能会得到一些附带的统计输出。对于我们的条形图，自然输出是频率分布，我们的分类变量的每个类别的计数和比例。还包括相等类别比例的卡方检验。</p><p id="3654" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">进一步简化条形图函数调用的唯一方法是缩写。我们有。如果你厌倦了键入<code class="fe mg mh mi mj b">BarChart</code>，就用<code class="fe mg mh mi mj b">bc</code>，比如<code class="fe mg mh mi mj b">bc(Dept)</code>。</p><h2 id="0c1d" class="nn mm iq bd mn nt nu dn mr nv nw dp mv ko nx ny mx ks nz oa mz kw ob oc nb od bi translated">水平条形图</h2><p id="fb71" class="pw-post-body-paragraph kf kg iq kh b ki nd jr kk kl ne ju kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">为了定制超出默认范围的代码，我们不想编写更多的代码。相反，请指定参数值。例如，要水平翻转图表，将参数<em class="mk"> horiz </em>设置为<em class="mk"> TRUE </em>。</p><pre class="lc ld le lf gt nj mj nk nl aw nm bi"><span id="da24" class="nn mm iq mj b gy no np l nq nr">BarChart(Dept, horiz=TRUE)</span></pre><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi oe"><img src="../Images/c1bef87f9f57bc122ee7de5c5c1680ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EQ1WM6iLMQv8DbsG3NrmEw.jpeg"/></div></div></figure><h1 id="c009" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">重新排列类别</h1><p id="a08d" class="pw-post-body-paragraph kf kg iq kh b ki nd jr kk kl ne ju kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">默认情况下，R 按字母顺序排列类别。如果顺序是任意的，或者是按字母顺序排列的，这种方法就可以，否则就不行。</p><h2 id="9430" class="nn mm iq bd mn nt nu dn mr nv nw dp mv ko nx ny mx ks nz oa mz kw ob oc nb od bi translated">按数值对类别进行排序</h2><p id="b381" class="pw-post-body-paragraph kf kg iq kh b ki nd jr kk kl ne ju kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">一种重新排序的方法是使用参数<em class="mk"> sort 按数值对类别进行排序。</em>将值设置为<code class="fe mg mh mi mj b">“+”</code>进行升序排序，或者设置为<code class="fe mg mh mi mj b">“-”</code>进行降序排序，最大值优先。</p><pre class="lc ld le lf gt nj mj nk nl aw nm bi"><span id="bc44" class="nn mm iq mj b gy no np l nq nr">BarChart(Dept, sort="-")</span></pre><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi oe"><img src="../Images/041a9dffd5059239796e8a62bb7c9753.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*57iO6yFIeI8M6vMy1Q77Xw.jpeg"/></div></div></figure><h2 id="b51f" class="nn mm iq bd mn nt nu dn mr nv nw dp mv ko nx ny mx ks nz oa mz kw ob oc nb od bi translated">定义类别的任意顺序</h2><p id="518e" class="pw-post-body-paragraph kf kg iq kh b ki nd jr kk kl ne ju kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">r 可以将一个分类变量表示为一个<em class="mk">因子</em>，它允许对类别进行任何排序。用 R <code class="fe mg mh mi mj b">factor</code>函数转换成一个因子，或者更简单更通用的<em class="mk"> lessR </em>版本<code class="fe mg mh mi mj b">factors</code>。用<em class="mk">级别</em>参数指定类别或级别的顺序。</p><p id="ff9b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这里，将变量 Dept 转换为默认<em class="mk"> d </em>数据框中的 R 因子，其中类别排序为财务第一，管理最后。然后将创建的因子保存回<em class="mk"> d </em>数据框。同样，如果要转换的变量不在<em class="mk"> d </em>数据框中，包括<em class="mk">数据</em>参数。</p><pre class="lc ld le lf gt nj mj nk nl aw nm bi"><span id="ddc0" class="nn mm iq mj b gy no np l nq nr">d = factors(Dept, levels=c("FINC", "MKTG", "SALE", "ACCT", "ADMN"))<br/>BarChart(Dept)</span></pre><p id="27e4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在条形图中的条形遵循指定的顺序。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi oe"><img src="../Images/86cc1f647a7116123316e48b7ecc2119.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0yCuXQffHsNmrzPuH3tZuA.jpeg"/></div></div></figure><h1 id="ee2a" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">两个分类变量的条形图</h1><p id="6246" class="pw-post-body-paragraph kf kg iq kh b ki nd jr kk kl ne ju kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">要向条形图添加第二个分类变量，请在函数调用中引用第二个变量的名称。</p><h2 id="4895" class="nn mm iq bd mn nt nu dn mr nv nw dp mv ko nx ny mx ks nz oa mz kw ob oc nb od bi translated">堆积条形图</h2><p id="4a5c" class="pw-post-body-paragraph kf kg iq kh b ki nd jr kk kl ne ju kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">同样，为了简单起见，让我们用来命名参数<em class="mk">来表示第二个分类变量。</em></p><pre class="lc ld le lf gt nj mj nk nl aw nm bi"><span id="a21b" class="nn mm iq mj b gy no np l nq nr">BarChart(Dept, by=Gender)</span></pre><p id="9893" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于下面的条形图，条形图的大小与 just Dept 的第一个条形图相同，但现在每个条形图都分成两个部分。每种性别的部分相互堆叠，形成一个<em class="mk">堆叠条形图</em>。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi oe"><img src="../Images/97702c1a9fedc108d2f9aaccba609616.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vcAfdxvgA6GfriyyNbHiXA.jpeg"/></div></div></figure><p id="ca4f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与前面的 just Dept 条形图一样，每个条形的高度对应于相关部门中的雇员数。现在我们有了额外的信息，每组变量的百分比。例如，销售部门的女性占 14%，这是基于整个分析中的员工总数。</p><h2 id="ce89" class="nn mm iq bd mn nt nu dn mr nv nw dp mv ko nx ny mx ks nz oa mz kw ob oc nb od bi translated">并排条形图</h2><p id="715c" class="pw-post-body-paragraph kf kg iq kh b ki nd jr kk kl ne ju kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">你更愿意并排看到每个性别的条形图来强调他们的相对影响力吗？参数<em class="mk">的时间在</em>旁边。</p><pre class="lc ld le lf gt nj mj nk nl aw nm bi"><span id="6a59" class="nn mm iq mj b gy no np l nq nr">BarChart(Dept, by=Gender, beside=TRUE)</span></pre><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi oe"><img src="../Images/ac24f57f3d1ef2c532e2fae7f9e3baf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SwQG7r5xisAMQIdcysi0Xw.jpeg"/></div></div></figure><p id="5600" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mg mh mi mj b">BarChart</code>不列出具有最小值的条形的百分比值。</p><h2 id="c919" class="nn mm iq bd mn nt nu dn mr nv nw dp mv ko nx ny mx ks nz oa mz kw ob oc nb od bi translated">百分比堆积条形图</h2><p id="7f86" class="pw-post-body-paragraph kf kg iq kh b ki nd jr kk kl ne ju kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">另一个演示侧重于这些数据值在每个部门中的男女比例<em class="mk">，它代表第一分类变量的每个类别中的所有数据值。对应的条形图是一个堆积的 100%条形图，用参数<em class="mk"> stack100 </em>表示。</em></p><pre class="lc ld le lf gt nj mj nk nl aw nm bi"><span id="5982" class="nn mm iq mj b gy no np l nq nr">BarChart(Dept, by=Gender, stack100=TRUE)</span></pre><p id="73c0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于这种类型的条形图，所有的条形高度相同。每个条形代表第一个分类变量的每个类别中的所有数据值。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi oe"><img src="../Images/ce3e0d670929214bb2c2ccb4d52a0291.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ms83nlszz4EoTEazyroxSA.jpeg"/></div></div></figure><p id="2d1b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这里，我们看到销售领域的男性人数是女性的两倍，分别为 67%和 33%，营销领域的女性人数比男性多得多，分别为 83%和 17%。</p><h1 id="68bb" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">超过个计数的条形图</h1><p id="9193" class="pw-post-body-paragraph kf kg iq kh b ki nd jr kk kl ne ju kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">条形图与类别相关联的数字超出了计数的范围。对于垂直条形图，在水平轴或<em class="mk"> x </em>轴上绘制分类变量的值。在纵轴或 y 轴上绘制数字。在前面的例子中，我们提供了变量 Dept 的值<em class="mk"> x </em>，由此<code class="fe mg mh mi mj b">BarChart</code>将计数计算为变量<em class="mk"> y </em>的值。因此，前面的函数调用没有指定一个<em class="mk"> y </em>变量。</p><h2 id="24cf" class="nn mm iq bd mn nt nu dn mr nv nw dp mv ko nx ny mx ks nz oa mz kw ob oc nb od bi translated">绘制数值变量在不同类别中的平均值</h2><p id="9e01" class="pw-post-body-paragraph kf kg iq kh b ki nd jr kk kl ne ju kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">为了绘制不同级别部门的可变工资的平均值，通知<code class="fe mg mh mi mj b">BarChart</code>变量<em class="mk">y</em>-是基于工资的。用参数<em class="mk"> stat </em>表示<em class="mk"> y </em>跨<em class="mk"> x </em>类别汇总的统计量。在这里画出每个部门的平均工资。</p><pre class="lc ld le lf gt nj mj nk nl aw nm bi"><span id="f8d7" class="nn mm iq mj b gy no np l nq nr">BarChart(Dept, Salary, stat="mean")</span></pre><p id="122b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">明确地说，包括<em class="mk"> x </em>和<em class="mk"> y </em>参数的名称，在<code class="fe mg mh mi mj b">BarChart</code>函数调用中写入<code class="fe mg mh mi mj b">x=Dept</code>和<code class="fe mg mh mi mj b">y=Salary</code>。或者，键入 less，如本例所示，并删除参数名。无论哪种方式，我们得到以下可视化。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi oe"><img src="../Images/b632923486bd8dd30cf2e962ab3dc89a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s5iOL4iZ_zAmMR6YXwevbA.jpeg"/></div></div></figure><p id="bf40" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">除了<code class="fe mg mh mi mj b">“mean”</code>，我们还可以选择统计数据<code class="fe mg mh mi mj b">“sum”</code>、<code class="fe mg mh mi mj b">“sd”</code>、<code class="fe mg mh mi mj b">“dev”</code>、<code class="fe mg mh mi mj b"> “min”</code>、<code class="fe mg mh mi mj b">“median”</code>或<code class="fe mg mh mi mj b">“max”</code>。</p><p id="b3cd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mg mh mi mj b">“dev”</code>表示每个类别相对于<em class="mk"> y </em>变量平均值的偏差分数。绘制偏差分数强调了数值变量在类别间的差异。</p><pre class="lc ld le lf gt nj mj nk nl aw nm bi"><span id="a637" class="nn mm iq mj b gy no np l nq nr">BarChart(Dept, Salary, stat="dev")</span></pre><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi oe"><img src="../Images/901f3dbe0f5d35770b3bd54da6e44fab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tgvjmhkJtdZz8SEIDedhIQ.jpeg"/></div></div></figure><p id="fc48" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个例子中，我们看到平均工资最高的是行政部门，平均来说，会计师的工资最低。</p><p id="2ebc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与典型的数值一样，更具信息性的可视化是根据它们的大小进行排序。我们再次调用<em class="mk">排序</em>选项。我们还包括一个新选项，<em class="mk"> fill_sort </em>，它为条形提供了两种颜色，在这里以 0 分割，以区分正负偏差。</p><pre class="lc ld le lf gt nj mj nk nl aw nm bi"><span id="ed21" class="nn mm iq mj b gy no np l nq nr">BarChart(Dept, Salary, stat="dev", sort="+", fill_split=0)</span></pre><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi oe"><img src="../Images/193af2a55c8c30ffad7daa767d1c5915.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4czXjnnUb--xUmlim7NXzQ.jpeg"/></div></div></figure><h2 id="e636" class="nn mm iq bd mn nt nu dn mr nv nw dp mv ko nx ny mx ks nz oa mz kw ob oc nb od bi translated">跨类别按变量比较<em class="of">的级别</em></h2><p id="b2bd" class="pw-post-body-paragraph kf kg iq kh b ki nd jr kk kl ne ju kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">公司各个部门的男女平均工资有什么不同？现在我们把它们放在一个函数调用中。将第一个分类变量<em class="mk"> x </em>(部门)、数字变量<em class="mk"> y </em>(薪水)、第二个分类变量<em class="mk"> by </em>(性别)包括在一起，并指出<em class="mk"> y </em>到每个类别组合平均值的转换。</p><pre class="lc ld le lf gt nj mj nk nl aw nm bi"><span id="9e96" class="nn mm iq mj b gy no np l nq nr">BarChart(Dept, Salary, by=Gender, stat="mean", beside=TRUE)</span></pre><p id="4fe4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当比较不同级别的平均值时，将级别绘制为相邻的条形可能更有意义，因此将参数旁边的<em class="mk">设置为<em class="mk">真</em>。</em></p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi oe"><img src="../Images/f2ad9ce214f607c2b31912fd1c58546a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fEerYlM1ERbaWVljhdD3HA.jpeg"/></div></div></figure><p id="5c5e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mg mh mi mj b">BarChart</code>的文本输出还包括标绘平均值的具体值。没有直接在横条上写数值的空间。</p><h1 id="74eb" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">式样</h1><p id="7c4c" class="pw-post-body-paragraph kf kg iq kh b ki nd jr kk kl ne ju kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">对于特定的应用，你需要这些灰色吗？灰度和许多其他样式选项是可用的，太多了，无法在这里全部讨论。事实上，可视化的任何方面都可以定制。最有影响的两个参数是<em class="mk">填充、</em>用于区域的颜色，例如条和点，以及<em class="mk">颜色、</em>用于区域的边缘颜色，包括线段本身。</p><p id="a17b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了让我们的灰色不那么无聊，绘制一个从浅到深的灰度调色板。<em class="mk"> lessR </em>包提供预定义的调色板，例如用于一系列灰色的<code class="fe mg mh mi mj b">“grays”</code>。以 30 度的增量遍历色轮定义了其他<em class="mk"> lessR </em>调色板:<code class="fe mg mh mi mj b">“reds”</code>、<code class="fe mg mh mi mj b">“rusts”</code>、<code class="fe mg mh mi mj b">browns”</code>、<code class="fe mg mh mi mj b">“greens”</code>、<code class="fe mg mh mi mj b">“emeralds”</code>、<code class="fe mg mh mi mj b">“turquoises”</code>、<code class="fe mg mh mi mj b">“aquas”</code>、<code class="fe mg mh mi mj b">“blues”</code>、<code class="fe mg mh mi mj b">“purples”</code>、<code class="fe mg mh mi mj b">“violets”</code>和<code class="fe mg mh mi mj b">“magentas”</code>。</p><pre class="lc ld le lf gt nj mj nk nl aw nm bi"><span id="6d99" class="nn mm iq mj b gy no np l nq nr">BarChart(Dept, Salary, by=Gender, stat="mean", fill="grays")</span></pre><p id="adc3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">性别在这些数据中只有两个值，因此结果条形图跨越两种颜色的灰色。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi oe"><img src="../Images/70101735dd60a83e42aae9726eb734cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FTSjj4lZtWf5NtxW2eRGmA.jpeg"/></div></div></figure><p id="755a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">样式的另一个选项是改变整个地块的基本颜色主题，例如使用<em class="mk">主题</em>参数，但是我们将这个讨论留到下次。</p><h1 id="a546" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">统计数据表</h1><p id="737d" class="pw-post-body-paragraph kf kg iq kh b ki nd jr kk kl ne ju kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">之前说明的数据表包含记录的数据值，有时称为<em class="mk">原始数据</em>或<em class="mk">测量数据</em>。所有之前的<code class="fe mg mh mi mj b">BarChart</code>示例都是从读入数据框<em class="mk"> d </em>的原始数据中创建可视化。从原始数据中，<code class="fe mg mh mi mj b">BarChart</code>为您计算汇总，如计数或平均值，然后绘制计算值。</p><p id="85ae" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一种可能是数据已经汇总。也许原始数据值甚至不可用。也许你在网上的某个地方看到了一些统计数据，现在你想要相应的条形图。</p><p id="6b6e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mg mh mi mj b">BarChart</code>可以直接处理输入的统计汇总。<code class="fe mg mh mi mj b">BarChart</code>将输入的数据评估为原始数据值或统计汇总，如计数或平均值。如果数据是原始数据值，则首先计算适当的统计概要。显示的条形图来自输入或计算的适当统计摘要。</p><p id="dc3e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，要直接从两个分类变量的列表计数中创建条形图，将相应的交叉列表作为数据表读入 R 数据框，通常再次命名为<em class="mk"> d </em>。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi og"><img src="../Images/b8f6cf6d44ceb9f6a39773bbd358e922.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Y4kBndk9_fM8PGPHtm9RA.jpeg"/></div></div></figure><p id="a1cc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">其他都没变。<code class="fe mg mh mi mj b">BarChart</code>函数调用与处理原始数据值时相同。当然，要确保在函数调用中包含分类变量和数值变量，如果需要的话，还可以通过包含<em class="mk">分类变量。</em></p><h1 id="633b" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">所有的条形图</h1><p id="a28e" class="pw-post-body-paragraph kf kg iq kh b ki nd jr kk kl ne ju kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">一个数据表可以，而且经常有许多变量，分类变量和连续变量的混合。数据分析通常始于检查分析中每个变量的分布，由每个分类变量的条形图表示。为了获得所有的条形图，不提供数据引用，即不通过变量提供<em class="mk"> x，y，</em>和<em class="mk">。如果您接受所有其他默认值，这意味着只有括号，根本没有输入值。</em></p><pre class="lc ld le lf gt nj mj nk nl aw nm bi"><span id="0eca" class="nn mm iq mj b gy no np l nq nr">BarChart()</span></pre><p id="723d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">结果是数据框中每个分类变量的<em class="mk">条形图和频率表。在开始分析之前，使用前述的<code class="fe mg mh mi mj b">factor</code>或<code class="fe mg mh mi mj b">factors</code>函数正确定义分类变量，以指定所选条形图的分类顺序。</em></p><h1 id="ef1e" class="ml mm iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">让它发生</h1><p id="4c49" class="pw-post-body-paragraph kf kg iq kh b ki nd jr kk kl ne ju kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">两个占主导地位的开源数据科学应用程序 R 和 Python 有时被视为竞争对手。与生活中的许多事情一样，计算机应用程序更倾向于相互合作。</p><blockquote class="lr"><p id="a2ff" class="ls lt iq bd lu lv lw lx ly lz ma la dk translated">r 和 Python 想成为朋友。</p></blockquote><p id="80cc" class="pw-post-body-paragraph kf kg iq kh b ki mb jr kk kl mc ju kn ko md kq kr ks me ku kv kw mf ky kz la ij bi translated">充分利用各自的优势，与同事一起工作，不管他们更喜欢 R 还是 Python。例如，在机器学习方面，很难比 Python 做得更好。并且很高兴在 r。</p><p id="0551" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你更喜欢用 Python 来做数据清理和预处理，即数据分析中耗时的数据争论阶段吗？如果是这样，在您完成所有工作后，对 Python pandas <code class="fe mg mh mi mj b"><a class="ae ns" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_csv.html" rel="noopener ugc nofollow" target="_blank">to_csv</a></code>函数的简单函数调用将指定的清理数据帧写入一个 csv 文件。从那里，数据可以很容易地转移到任何数据分析系统中，比如使用前面提到的来自我的<em class="mk"> lessR </em>包中的<code class="fe mg mh mi mj b">Read</code>函数。</p><p id="7866" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您像大多数分析师一样，从 RStudio 运行 R，您会得到通常的 R 控制台，但也会有一个用于可视化的专用窗口，可以访问您的文件目录等等。RStudio 还支持在同一个分析中混合使用 R 和 Python 代码。r 函数甚至可以直接访问 Python 数据帧，反之亦然！语言之间的障碍正在消失。</p><p id="5104" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下载 r .选择<a class="ae ns" href="https://cran.r-project.org/bin/windows/base/" rel="noopener ugc nofollow" target="_blank"> Windows </a>，或者<a class="ae ns" href="https://cran.r-project.org/bin/macosx/" rel="noopener ugc nofollow" target="_blank"> Mac </a>(点击页面下方几段的链接，左边空白处)。</p><p id="9d51" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下载<a class="ae ns" href="https://www.rstudio.com/products/rstudio/download/" rel="noopener ugc nofollow" target="_blank"> RStudio </a>。选择第一个选项，RStudio 桌面，开源许可。</p><p id="f1d7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要访问<em class="mk"> lessR </em>包中的功能，比如<code class="fe mg mh mi mj b">BarChart</code>，你首先需要从官方的 R 服务器上下载这些功能。只有一次，当运行 R 时，输入以下内容进行下载。</p><pre class="lc ld le lf gt nj mj nk nl aw nm bi"><span id="7e1b" class="nn mm iq mj b gy no np l nq nr">install.packages("lessR")</span></pre><p id="e177" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你将自动下载<em class="mk"> lessR </em>函数和数据集，以及几个依赖包。</p><p id="de98" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从那时起，为了开始每个 R 会话，用<code class="fe mg mh mi mj b">library</code>函数加载<em class="mk"> lessR </em>函数。下面是一个完整的三行程序，它根据数据框中指定变量 Dept 的数据值创建一个条形图。在本例中，我们读取的数据与之前的员工数据文件相同，但是来自一个内置的<em class="mk"> lessR </em>数据集——如果您想找点乐子，需要一些数据，并且不在互联网上，这很方便。</p><pre class="lc ld le lf gt nj mj nk nl aw nm bi"><span id="a6ca" class="nn mm iq mj b gy no np l nq nr">library("lessR")<br/>d = Read("Employee")<br/>BarChart(Dept)</span></pre><p id="4bc8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它不是火箭科学。当然，一旦将数据值读入 R，就可以创建许多数据可视化和其他分析。</p><p id="2878" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以你有它。未来的文章将展示简单获得的其他可视化效果，包括对称为 Likert scales 的调查项目的响应的专用条形图。享受你的条形图吧。</p><p id="5a47" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要了解更多关于数据可视化的知识，使用 lessR 和其他可视化系统，请查看我在 CRC 出版社出版的 2020 年出版的书，<a class="ae ns" href="https://www.amazon.com/R-Visualizations-Derive-Meaning-Data/dp/1138599638/ref=sr_1_1?dchild=1&amp;keywords=Gerbing&amp;qid=1590628688&amp;s=books&amp;sr=1-1" rel="noopener ugc nofollow" target="_blank"><em class="mk">R Visualizations:Derive Meaning from Data</em></a>。</p></div></div>    
</body>
</html>