<html>
<head>
<title>Four Basic Ways to Automate Data Extraction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自动化数据提取的四种基本方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/four-basic-ways-to-automate-data-extraction-3151064dc110?source=collection_archive---------13-----------------------#2019-10-12">https://towardsdatascience.com/four-basic-ways-to-automate-data-extraction-3151064dc110?source=collection_archive---------13-----------------------#2019-10-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><h1 id="11d1" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak"> 1。从哪里获取数据？</strong></h1><p id="c156" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">做<a class="ae lm" rel="noopener" target="_blank" href="/what-data-analysis-tools-should-i-learn-to-start-a-career-as-a-data-analyst-af650b54c9e9">数据分析</a> <strong class="kq iu"> </strong>的人都知道，如何获取数据是至关重要的一步。数据抽取是数据分析的基础。没有数据，分析就没有意义。有时，我们有多少数据源，我们有多少数据，以及数据质量如何将决定我们的输出会发生什么。</p><p id="a8f3" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">我们需要考虑到数据的趋势受到多个维度的影响。我们需要在保证数据质量的情况下，通过多源数据采集收集尽可能多的数据维度，这样才能获得高质量的数据分析结果。</p><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi ls"><img src="../Images/c9f0390d15485717571982fe19f14cfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LtH5NyXil76YLiThibsReA.jpeg"/></div></div></figure><p id="9cd1" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">那么，从数据收集的角度来看，数据来源是什么呢？我把它们分为以下四类。</p><p id="8318" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated"><strong class="kq iu"> 1)开放数据源(政府、大学和企业)</strong></p><p id="2d0e" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated"><strong class="kq iu"> 2)爬虫抓取(web 和应用)</strong></p><p id="5fef" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated"><strong class="kq iu"> 3)日志收集(前端捕获后端脚本)</strong></p><p id="9d91" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated"><strong class="kq iu"> 4)传感器(图像、速度、热量)</strong></p><p id="f098" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">这四种类型的数据源包括:开放数据源、爬虫抓取、日志收集和传感器。都有自己的特点。</p><p id="afe8" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">开放数据源通常是特定于行业的数据库。比如美国人口普查局开放了美国人口信息、地区分布、教育等数据。除了政府，企业和高校也会开放相应的数据集。要知道很多研究都是基于开放数据源的，这一点很重要。你需要相同的数据集来比较算法的质量。</p><p id="cc0f" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">第三种数据源是日志采集，是<br/>统计用户的操作。我们可以在前端跟踪事件，在后端收集脚本和<br/>统计，分析网站的访问情况。</p><p id="b525" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">最后是传感器，它主要收集物理信息，如图像、视频或速度、热量、压力等。一个物体。由于本文的主要重点是数据提取，因此将不对该方法进行描述。</p><p id="b62f" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">现在我们知道有四种类型的数据源，我们如何收集它们呢？</p><h1 id="b715" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">2.如何使用开放数据源？</h1><p id="32cf" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">下表显示了一些权威的开放数据源。</p><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi me"><img src="../Images/ef85505c57aed889c5b36dd21d111950.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mNEbpEV4ij_mpYdnVV3nuw.png"/></div></div></figure><p id="6cb9" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">如果你在找某个领域的数据源，比如金融领域，可以看看政府、高校、企业是否有开放的数据源。</p><h1 id="f84e" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">3.如何使用爬虫抓取数据？</h1><p id="2d95" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">爬虫抓取应该是最常见的方式，比如你想要的对餐厅的评价数据。当然这里一定要注意版权问题。而且很多网站也有反抓取机制。</p><p id="baf1" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">最直接的方法就是用 Python 写爬虫代码，当然你需要学习 Python 的基本语法。另外 PHP 也可以写爬虫，但是不如 Python，尤其是多线程操作的时候。</p><p id="c501" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">在 Python 爬虫中，基本上要经历三个过程。</p><p id="d05c" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">1)使用请求抓取内容。我们可以使用请求库来抓取网页信息。Requests 库可以说是 Python 爬虫的绝佳工具，就是 Python 的 HTTP 库。通过这个库抓取网页中的数据非常方便，可以节省我们很多时间。</p><p id="aade" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated"><strong class="kq iu"> 2)使用 XPath 解析内容。</strong> XPath 是 XML Path 的缩写。它是一种用于确定 XML 文档中某个部分的位置的语言，通常在开发中用作小型查询语言。XPath 可以通过元素和属性进行索引。</p><p id="8072" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated"><strong class="kq iu"> 3)用熊猫保存你的数据。</strong> Pandas 是一种先进的数据结构，使数据分析变得更加容易，我们可以使用 Pandas 来保存抓取的数据。最后，通过熊猫将其写入数据库，如 XLS 或 MySQL。</p><p id="fdd8" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">对于 Python 来说，请求、XPath 和 Pandas 是三个有用的工具。当然，还有很多其他工具可以编写 Python 爬虫，比如 Selenium、PhantomJS 或者 Puppteteer。</p><p id="9d33" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">另外，我们也可以不用编程抓取网页信息。下面是三种常用的爬虫。</p><h2 id="fdc4" class="mf jr it bd js mg mh dn jw mi mj dp ka kz mk ml ke ld mm mn ki lh mo mp km mq bi translated"><a class="ae lm" href="https://www.import.io/" rel="noopener ugc nofollow" target="_blank">–import . io</a></h2><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi mr"><img src="../Images/b975705a8be2026707ccae27f272b368.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zCcdsqSNobx2jM1bsyfJKA.png"/></div></div></figure><p id="476e" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">最引人注目也是大家认为最好的功能叫做“Magic”，这个功能让用户只需进入一个网页就可以自动提取数据，无需任何其他设置。</p><h2 id="d595" class="mf jr it bd js mg mh dn jw mi mj dp ka kz mk ml ke ld mm mn ki lh mo mp km mq bi translated"><a class="ae lm" href="https://www.parsehub.com/" rel="noopener ugc nofollow" target="_blank">–parse hub</a></h2><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi mr"><img src="../Images/78ebe8a9096b1d3d3e9e3bb42df3c996.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ou0bThkzfqsuu3SVolaJHQ.png"/></div></div></figure><p id="f8a5" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">ParseHub 是一个基于 web 的抓取客户端工具，支持 JavaScript 渲染、Ajax 抓取、cookies、会话等。该应用程序可以分析和检索网站上的数据，并将其转换成有意义的数据。它还可以使用机器学习技术来识别复杂的文档，并将它们导出到 JSON、CSV、Google Sheets 等。</p><h2 id="a4e3" class="mf jr it bd js mg mh dn jw mi mj dp ka kz mk ml ke ld mm mn ki lh mo mp km mq bi translated"><a class="ae lm" href="https://webscraper.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ak">–刮刀</strong> </a></h2><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi mr"><img src="../Images/33f69d185d13341997c68398d9bebfd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qnMG048_T1ueQaJIHHERhQ.png"/></div></div></figure><p id="1f1b" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">Web Scraper 是一个 Chrome 扩展，已经有超过 20 万人安装了它。它支持点击式数据抓取，支持动态页面呈现，并针对 JavaScript、Ajax、下拉拖动和分页进行了优化，具有完整的选择器系统，并支持将数据导出到 CSV 和其他格式。此外，它还拥有自己的云刮刀，支持调度任务、API 管理和代理切换。</p><h1 id="ba54" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">4.如何使用日志收集工具？</h1><p id="69c6" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">日志收集最大的作用就是通过分析用户访问情况来提升系统性能，从而增加系统负载。及时发现系统负载瓶颈，也可以方便技术人员根据实际用户访问情况对系统进行优化。</p><p id="5a71" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">日志记录了用户访问网站的全过程:谁访问了网站，在什么时间，通过什么渠道(如搜索引擎、URL 输入)，进行了什么操作；系统是否产生错误；甚至用户的 IP、HTTP 请求时间、用户代理等。</p><p id="8e13" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">这里的日志收集可以分为两种形式。</p><p id="f8be" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated"><strong class="kq iu"> 1)通过网络服务器收集。</strong>比如 httpd、Nginx、Tomcat 都有自己的日志功能。同时，很多互联网公司都有自己的海量数据收集工具，多用于系统日志收集，如 Hadoop 的 Chukwa、Cloudera 的 Flume、脸书的 Scribe 等这些工具是分布式架构，可以满足每秒数百 MB 的日志数据收集和传输需求。</p><p id="4d1a" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated"><strong class="kq iu"> 2)定制用户行为。</strong>比如用 JavaScript 代码监听用户行为，AJAX 异步请求后端日志等等。</p><h1 id="b9e2" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">5.什么是事件跟踪？</h1><p id="f4d6" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><strong class="kq iu">事件跟踪是日志收集的关键步骤。</strong></p><p id="e294" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">事件跟踪就是收集相应的信息，在你设定的地点进行报告。比如一个页面的访问状态，包括用户信息、设备信息；或者用户在页面上的操作行为，包括停留时间的长短。每个事件跟踪就像一个照相机。它收集用户行为数据，并对数据进行多维度分析，能够真实还原用户使用场景和用户需求。</p><p id="ab94" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">那么我们如何跟踪不同的事件呢？</p><p id="bd17" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">事件跟踪就是在你需要统计的地方植入统计代码，当然植入代码可以自己写，也可以使用第三方统计工具。我谈到了“不要重复生产一个轮子”的原则。对于事件跟踪工具，市场已经相当成熟。我可以给你推荐一些谷歌分析、Talkingdata 等三方工具。都是用前端追踪的方式，然后在第三方工具里就能看到用户的行为数据。但是如果我们想看到更深层次的用户行为，我们需要定制事件跟踪设置。</p><p id="051c" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">综上所述，日志收集有助于我们了解用户的运营数据，适用于运维监控、安全审计、业务数据分析等场景。典型的 web 服务器有自己的日志功能，或者您可以使用 Flume 从不同的服务器集群收集、聚合和传输大量的日志数据。当然，我们也可以使用第三方统计工具或者自定义埋点来获取我们想要的统计数据。</p><h1 id="6631" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">结论</h1><p id="3784" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">数据提取是数据分析的关键。我们喜欢用 Python 网络爬虫来解决问题。事实上，数据收集方法非常广泛。有时候可以直接使用公开的数据源，比如比特币的价格和交易数据。可以直接从 Kaggle 下载，不需要自己爬。</p><p id="bda6" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">另一方面，根据我们的需求，需要采集的数据也是不同的，比如交通行业，数据采集会和摄像头或者测速仪有关。对于操作人员来说，日志收集和分析是关键点。因此，我们需要为特定的业务场景选择正确的收购工具。</p><p id="06b2" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated">至于拿到数据后的下一步，数据分析，可以看本帖<a class="ae lm" rel="noopener" target="_blank" href="/top-6-data-analytics-tools-in-2019-4df815ebf82c"><em class="ms">2019 年 6 大数据分析工具</em> </a>，其中推荐类似<a class="ae lm" href="https://www.tableau.com/" rel="noopener ugc nofollow" target="_blank"> Tableau </a>和<a class="ae lm" href="http://www.finereport.com/en/?utm_source=medium&amp;utm_medium=media&amp;utm_campaign=blog&amp;utm_term=Four%20Basic%20Ways%20to%20Automate%20Data%20Extraction" rel="noopener ugc nofollow" target="_blank"> FineReport </a>的工具。</p><h1 id="fb3a" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">您可能也会对…感兴趣</h1><p id="141a" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><a class="ae lm" rel="noopener" target="_blank" href="/guide-to-financial-statement-analysis-for-beginners-835d551b8e29"> <em class="ms">初学者财务报表分析指南</em> </a></p><p id="30b9" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated"><a class="ae lm" rel="noopener" target="_blank" href="/9-data-visualization-tools-that-you-cannot-miss-in-2019-3ff23222a927"><em class="ms">2019 年你不能错过的 9 个数据可视化工具</em> </a></p><p id="c5fd" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated"><a class="ae lm" rel="noopener" target="_blank" href="/top-16-types-of-chart-in-data-visualization-196a76b54b62"> <em class="ms">数据可视化中前 16 种图表类型</em> </a></p><p id="db41" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated"><a class="ae lm" rel="noopener" target="_blank" href="/top-10-map-types-in-data-visualization-b3a80898ea70"> <em class="ms">数据可视化十大地图类型</em> </a></p><p id="3f5c" class="pw-post-body-paragraph ko kp it kq b kr ln kt ku kv lo kx ky kz lp lb lc ld lq lf lg lh lr lj lk ll im bi translated"><a class="ae lm" rel="noopener" target="_blank" href="/a-step-by-step-guide-to-making-sales-dashboards-34c999cfc28b"> <em class="ms">制作销售仪表盘的逐步指南</em> </a></p></div></div>    
</body>
</html>