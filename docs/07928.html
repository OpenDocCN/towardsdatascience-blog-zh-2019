<html>
<head>
<title>Web Scraping Basics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">网页抓取基础知识</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/web-scraping-basics-3c0229653842?source=collection_archive---------28-----------------------#2019-11-01">https://towardsdatascience.com/web-scraping-basics-3c0229653842?source=collection_archive---------28-----------------------#2019-11-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9d2f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从网上收集数据的基础知识</h2></div><p id="445a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">联合国教科文组织是联合国内部的一个组织，致力于保护世界自然和文化遗产。世界上有许多遗产，包括包含自然现象的遗产，如大堡礁。不幸的是，一些获奖的地方受到了人为干预的威胁。我们可以用以下问题来解构这个人为干预的问题；</p><p id="c9c7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">1-哪些地点受到威胁，它们位于哪里？</p><p id="ced3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2-世界上有比其他地区更濒危的地方吗？</p><p id="83ec" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">3-将网站置于风险中的原因是什么？</p><p id="e3d7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以查看维基百科，找到进一步解决这些问题的地方列表。当我们去<a class="ae le" href="https://www.wikipedia.org/" rel="noopener ugc nofollow" target="_blank">https://www.wikipedia.org/</a>搜索“濒危世界遗产名录”时，我们会看到<a class="ae le" href="https://en.wikipedia.org/wiki/List_of_World_Heritage_in_Danger" rel="noopener ugc nofollow" target="_blank">https://en . Wikipedia . org/wiki/List _ of _ World _ Heritage _ in _ Danger</a>维基百科页面。在此页面中，我们可以看到一个表格，其中的列为我们提供了处于危险中的网站的功能信息。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/3840c01f39bf8ad57ffa6191f49729c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d6EdylFWiFOrRm6izgtmzA.jpeg"/></div></div></figure><p id="9fa4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将使用 R 作为编程语言，从 web 上抓取数据并加载到数据帧中。请记住，这篇文章只提供了基本的网页抓取技术，给我们一个围绕过程和可能的网页抓取解决方案的想法。</p><p id="c0fb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们找到了想要抓取的数据，下一步是使用 R 将所需的数据加载到 R 中。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="df2a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们有一个表，可以从前面安装的 XML 库中使用 readHTMLTable()函数加载到 R 中。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="f9ec" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们基本上是在告诉 R，导入的数据以 HTML 文档的形式出现。我们使用名为 htmlParse()的函数通过解析器实现了这一点。使用 readHTMLTable()函数，我们告诉 R 提取它在已解析的 heritage_parsed 对象中找到的所有 HTML 表格，并将它们存储在 heritage_tables 中。</p><p id="9834" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们选择一个表，我们可以用它来更接近地回答我们最初建立的业务问题。我们要用的表格应该有遗址的名称、位置、文化或自然的分类变量、碑文年份和濒危年份。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="1ce0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们能够获得包含我们之前定义的所需列的数据表。我们可以执行简单的数据清理。为了做到这一点，让我们看看数据帧的结构。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="34aa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们有 53 个地点和 9 个变量。我们可以看到每个变量的数据类型并不准确，例如，标准应该是自然或文化之间的分类变量，但是在这种情况下，我们有许多因素，数据类型被记录为字符串。我们可以对数据集应用基本的清理方法。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="d19d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">年份变量需要是数字，一些年份条目不明确，因为它们有几个年份附加或组合在一起。在这些值中，我们使用正则表达式选择最后一个给定的年份，比如[[:digit:]]4＄行</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="9505" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们看看位置变量，因为它看起来比年份变量要混乱得多。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="5d55" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个变量实际上在一行中包含三个不同的值，它有几个不同的站点位置、国家和地理坐标。我们能做的就是得到地图的坐标。我们可以再次使用正则表达式来提取这些信息。</p><figure class="lg lh li lj gt lk"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="5932" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们能够检索坐标和相应的世界遗产。这就完成了 web 抓取和数据准备过程，以供进一步分析。</p><p id="b85d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">web 抓取的过程总是包括使用一些工具，比如使用 R 或 Python 包从 web 上解析和抓取表格。如果我们想总结传播、提取和存储网络数据的技术，我们可以使用下图。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/d17ef4ec582e33cb0d8d9bedabba4bcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*vPqFqDXbCOmoBVianatpbw.jpeg"/></div></figure><p id="90dd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">web 抓取最重要的阶段是初始阶段，在这个阶段我们定义数据需求。什么类型的数据最适合回答我们的业务问题？数据的质量是否足以回答我们的问题？信息是否存在系统性缺陷？</p><p id="3f59" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们从网上获取任何数据时，我们需要记住数据的来源。数据可能是作为第一方数据收集的一部分收集的，也可能是二手数据，如 Twitter 帖子或在离线环境中收集并手动在线发布的数据。然而，即使我们找不到数据的来源，我们使用网络上的数据也是完全有意义的。数据质量取决于用户的目的和数据的应用。</p><p id="1be4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">网络抓取基础有 5 个步骤，我们可以定义和遵循。</p><p id="1079" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">1-弄清楚你需要什么样的信息。</p><p id="3189" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2-看看你是否能在网上找到能为你提供商业问题答案的数据源。</p><p id="4240" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">3-在试图找出数据来源时，创建数据生成过程的理论。(例如:数据集来自抽样计划或调查等……)</p><p id="4dc2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">4-概述数据源的优点和缺点。(确定是合法的！)</p><p id="5a10" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">5-制定决策，如果可行，从不同来源收集数据，以进一步整合。</p></div></div>    
</body>
</html>