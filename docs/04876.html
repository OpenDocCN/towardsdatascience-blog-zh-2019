<html>
<head>
<title>Web Scraping Using Python Libraries.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 库的 Web 抓取。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/web-scraping-using-python-libraries-fe3037152ed1?source=collection_archive---------8-----------------------#2019-07-23">https://towardsdatascience.com/web-scraping-using-python-libraries-fe3037152ed1?source=collection_archive---------8-----------------------#2019-07-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a083" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让我们使用 Python 从 web 中抓取数据。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9c6bc053ececba09abd00b88b8a13bdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YH_zfktV-QwoIB65qCWmAw.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@_imkiran?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Sai Kiran Anagani</a> on <a class="ae ky" href="https://unsplash.com/s/photos/websites?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6ed2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">今天我们将清理“<a class="ae ky" href="https://www.ratemyprofessors.com/?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank">评价我的教授</a>的网站。关于我的教授网站的一点见解，这是一个包含学校，教授和大学评级的网站。你可以搜索任何教授或学校，并在参加他们的课程之前获得他们的评级。这是一个方便的功能，有助于更多地了解你的教授或你想加入的大学。在本教程中，我们将看到如何刮取和提取一个特定的教授的标签。我警告你们，这并不违法，但是从网站上收集大量数据会导致你的 IP 地址被封。只做一次或两次，但不要愚蠢地将它放在循环中，并试图将请求放在循环中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi me"><img src="../Images/77a2cc16ebcc70798020cd1d8a19e518.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wBlT3OclMBO1DDD0"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Rate My Professor.</figcaption></figure><h1 id="e6bb" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">什么是网页抓取？</h1><p id="2cf6" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">Web 抓取(也称为抓取、数据提取、数据收集等。)是一种用于从网站提取数据的技术。有时，网络抓取非常有用，我们可以直接从网络上获得我们想要的数据，但有时这是一种不好的方法，因为这就像是未经允许从网站上窃取宝贵的数据，但将你的抓取过程限制在一次或两次，这样可以避免你陷入麻烦。</p><p id="cff9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">网页抓取所需的最有用的库是:</strong></p><ol class=""><li id="8a13" class="nc nd it lb b lc ld lf lg li ne lm nf lq ng lu nh ni nj nk bi translated"><a class="ae ky" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank">美汤</a>。</li><li id="ae36" class="nc nd it lb b lc nl lf nm li nn lm no lq np lu nh ni nj nk bi translated"><a class="ae ky" href="https://2.python-requests.org/en/master/?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank">请求</a>。</li></ol><h1 id="1e1a" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">这些是我们将在本教程中遵循的步骤:</h1><ol class=""><li id="5662" class="nc nd it lb b lc mx lf my li nq lm nr lq ns lu nh ni nj nk bi translated"><strong class="lb iu">导入所需的库。</strong></li><li id="2540" class="nc nd it lb b lc nl lf nm li nn lm no lq np lu nh ni nj nk bi translated"><strong class="lb iu">获取 URL 并将其存储在变量中。</strong></li><li id="0034" class="nc nd it lb b lc nl lf nm li nn lm no lq np lu nh ni nj nk bi translated"><strong class="lb iu">使用请求库向网站发出请求。</strong></li><li id="883f" class="nc nd it lb b lc nl lf nm li nn lm no lq np lu nh ni nj nk bi translated"><strong class="lb iu">使用美汤库从网站获取 HTML(原始)数据。</strong></li><li id="83ba" class="nc nd it lb b lc nl lf nm li nn lm no lq np lu nh ni nj nk bi translated"><strong class="lb iu">使用 soup.findAll 方法获得我们正在寻找的受尊重的标签。</strong></li><li id="e268" class="nc nd it lb b lc nl lf nm li nn lm no lq np lu nh ni nj nk bi translated"><strong class="lb iu">移除所有的 HTML 标签并将其转换为纯文本格式。</strong></li></ol><p id="737f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能想知道要提取什么标签，在 Rate My Professor 网站上，每个教授都会有他/她尊敬的标签，如(<strong class="lb iu">滑稽、繁重的家庭作业、努力学习或失败等。我们将尝试在这些教程中添加这些标签，如下所示。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi me"><img src="../Images/31e0b1112541e77ee6291aec5d0c59b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Gl3Jo2EE6tFzVjHD.png"/></div></div></figure><p id="6c01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们开始之前，请确保以较慢的速度收集数据，您也可以使用 VPN 服务来获得不同的 IP 地址，这可以防止您的 IP 地址被禁止，但我希望你们能够按照说明进行操作。这里有一篇<a class="ae ky" href="https://hackernoon.com/how-to-scrape-a-website-without-getting-blacklisted-271a605a0d94?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">文章</strong> </a>会让你知道如何抓取一个网站而不被列入黑名单。本教程中重要的一点是，我没有必要解释每一行代码，这里也不需要，因为 python 代码是不言自明的。不过，我会尽量不把你弄糊涂，用一种简单的方式把事情说清楚。所以我写了这个教程，这样每个人都可以理解，不管他们的编程背景如何。此外，完整的源代码可以在我的<a class="ae ky" href="https://github.com/Tanu-N-Prabhu/Python/blob/master/Data%20Scraping%20from%20the%20Web/Web_Scraping_Rate_My_Professor_Website.ipynb" rel="noopener ugc nofollow" target="_blank"> GitHub </a>中找到。互联网上可能有很多教程，但这个教程很容易理解，因为我已经尽可能地解释了代码，有些部分是一个机械的过程，你只需要遵循它们，如果你有任何疑问，请在下面的评论部分告诉我。完整的源代码可以在下面给出的我的<a class="ae ky" href="https://github.com/Tanu-N-Prabhu/Python/blob/master/Data%20Scraping%20from%20the%20Web/Web_Scraping_Rate_My_Professor_Website.ipynb" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。</p><div class="nt nu gp gr nv nw"><a href="https://github.com/Tanu-N-Prabhu/Python/blob/master/Data%20Scraping%20from%20the%20Web/Web_Scraping_Rate_My_Professor_Website.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd iu gy z fp ob fr fs oc fu fw is bi translated">塔努-北帕布/Python</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">这个存储库帮助您从头开始理解 python。-塔努-北帕布/蟒蛇</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">github.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok ks nw"/></div></div></a></div><h2 id="90d7" class="ol mg it bd mh om on dn ml oo op dp mp li oq or mr lm os ot mt lq ou ov mv ow bi translated">让我们开始吧。</h2><h1 id="06c0" class="mf mg it bd mh mi mj mk ml mm mn mo mp jz mq ka mr kc ms kd mt kf mu kg mv mw bi translated">1.导入所需的库</h1><p id="d58a" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">让我们导入几个重要的库，比如<a class="ae ky" href="https://2.python-requests.org/en/master?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> Requests </a>和<a class="ae ky" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> BeautifulSoup </a>。</p><pre class="kj kk kl km gt ox oy oz pa aw pb bi"><span id="8ed0" class="ol mg it oy b gy pc pd l pe pf">import requests<br/>from bs4 import BeautifulSoup</span></pre></div><div class="ab cl pg ph hx pi" role="separator"><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl"/></div><div class="im in io ip iq"><h1 id="af12" class="mf mg it bd mh mi pn mk ml mm po mo mp jz pp ka mr kc pq kd mt kf pr kg mv mw bi translated">2.获取 URL 并将其存储在一个变量中。</h1><p id="a92d" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">让我们将教授的 URL 存储在名为“<strong class="lb iu"> url </strong>”的变量中。网站的网址可以在这里找到:“<a class="ae ky" href="https://www.ratemyprofessors.com/ShowRatings.jsp?tid=1986099&amp;source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">评我的教授</strong> </a>”。</p><pre class="kj kk kl km gt ox oy oz pa aw pb bi"><span id="e330" class="ol mg it oy b gy pc pd l pe pf">url = ‘<a class="ae ky" href="https://www.ratemyprofessors.com/ShowRatings.jsp?tid=1986099'" rel="noopener ugc nofollow" target="_blank">https://www.ratemyprofessors.com/ShowRatings.jsp?tid=1986099'</a></span></pre></div><div class="ab cl pg ph hx pi" role="separator"><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl"/></div><div class="im in io ip iq"><h1 id="3189" class="mf mg it bd mh mi pn mk ml mm po mo mp jz pp ka mr kc pq kd mt kf pr kg mv mw bi translated">3.使用请求库向网站发出请求。</h1><p id="4879" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">这里我们通过传递“<strong class="lb iu"> url </strong>”作为参数来使用请求库，注意不要多次运行。如果你得到像<strong class="lb iu">响应 200 </strong>那么它是成功的，如果你得到别的东西，那么可能是代码或你的浏览器有问题，我不知道。</p><pre class="kj kk kl km gt ox oy oz pa aw pb bi"><span id="dd06" class="ol mg it oy b gy pc pd l pe pf">page = requests.get(url)<br/>page</span><span id="e75b" class="ol mg it oy b gy ps pd l pe pf"><strong class="oy iu">&lt;Response [200]&gt;</strong></span></pre></div><div class="ab cl pg ph hx pi" role="separator"><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl"/></div><div class="im in io ip iq"><h1 id="457d" class="mf mg it bd mh mi pn mk ml mm po mo mp jz pp ka mr kc pq kd mt kf pr kg mv mw bi translated">4.使用漂亮的汤库从网站获取 HTML(原始)数据。</h1><p id="cf7d" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">这里我们通过将<strong class="lb iu"> page.text </strong>作为参数传递并使用<strong class="lb iu"> HTML 解析器来使用 BeautifulSoup。您可以尝试打印这个汤，但是打印这个汤并不能给你答案，相反它包含了大量的 HTML 数据，所以我决定不在这里展示它。</strong></p><pre class="kj kk kl km gt ox oy oz pa aw pb bi"><span id="cdf8" class="ol mg it oy b gy pc pd l pe pf">soup = BeautifulSoup(page.text, “html.parser”)</span></pre></div><div class="ab cl pg ph hx pi" role="separator"><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl"/></div><div class="im in io ip iq"><h1 id="e3c5" class="mf mg it bd mh mi pn mk ml mm po mo mp jz pp ka mr kc pq kd mt kf pr kg mv mw bi translated">5.使用 soup.findAll 方法获得我们正在寻找的受尊重的标签。</h1><p id="cd58" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">这里是您添加您正在寻找的标签的地方，要获得标签名称，您所要做的就是在相应的标签上右键单击<strong class="lb iu">或在网页中的标签上单击<strong class="lb iu"> Ctrl-Shift-I </strong>，然后一个带有所选标签的页面将在您的右侧为您打开，如下所示:</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi me"><img src="../Images/f52d39e09b0605223d9477704c0e63b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9YrZBOvqqBGNPjPr.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Press <strong class="bd pt">Inspect </strong>or <strong class="bd pt">Ctrl-Shift-I</strong> on the respected tag (in this case it’s <strong class="bd pt">Hilarious</strong>)</figcaption></figure><p id="a4b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，您可以复制 HTML 标签和类(如果有的话)，然后将它放在<strong class="lb iu"> soup.findAll </strong>方法中。在这种情况下，HTML 标记是“<strong class="lb iu"> span </strong>”，类是“<strong class="lb iu">tag-box-choose tags”</strong></p><pre class="kj kk kl km gt ox oy oz pa aw pb bi"><span id="fefb" class="ol mg it oy b gy pc pd l pe pf">proftags = soup.findAll(“span”, {“class”: “tag-box-choosetags” })<br/>proftags</span><span id="1c02" class="ol mg it oy b gy ps pd l pe pf"><strong class="oy iu">[&lt;span class=”tag-box-choosetags”&gt; Hilarious &lt;b&gt;(11)&lt;/b&gt;&lt;/span&gt;, &lt;span class=”tag-box-choosetags”&gt; Caring &lt;b&gt;(9)&lt;/b&gt;&lt;/span&gt;, <br/>&lt;span class=”tag-box-choosetags”&gt; Accessible outside class &lt;b&gt;(8)&lt;/b&gt;&lt;/span&gt;, <br/>&lt;span class=”tag-box-choosetags”&gt; Amazing lectures &lt;b&gt;(5)&lt;/b&gt;&lt;/span&gt;, <br/>&lt;span class=”tag-box-choosetags”&gt; Clear grading criteria &lt;b&gt;(4)&lt;/b&gt;&lt;/span&gt;, <br/>&lt;span class=”tag-box-choosetags”&gt; Inspirational &lt;b&gt;(4)&lt;/b&gt;&lt;/span&gt;, &lt;span class=”tag-box-choosetags”&gt; Group projects &lt;b&gt;(3)&lt;/b&gt;&lt;/span&gt;, &lt;span class=”tag-box-choosetags”&gt; Respected &lt;b&gt;(3)&lt;/b&gt;&lt;/span&gt;, <br/>&lt;span class=”tag-box-choosetags”&gt; Gives good feedback &lt;b&gt;(2)&lt;/b&gt;&lt;/span&gt;, <br/>&lt;span class=”tag-box-choosetags”&gt; EXTRA CREDIT &lt;b&gt;(2)&lt;/b&gt;&lt;/span&gt;, &lt;span class=”tag-box-choosetags”&gt; Participation matters &lt;b&gt;(1)&lt;/b&gt;&lt;/span&gt;, <br/>&lt;span class=”tag-box-choosetags”&gt; Lecture heavy &lt;b&gt;(1)&lt;/b&gt;&lt;/span&gt;, &lt;span class=”tag-box-choosetags”&gt; Test heavy &lt;b&gt;(1)&lt;/b&gt;&lt;/span&gt;, &lt;span class=”tag-box-choosetags”&gt; So many papers &lt;b&gt;(1)&lt;/b&gt;&lt;/span&gt;]</strong></span></pre></div><div class="ab cl pg ph hx pi" role="separator"><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl"/></div><div class="im in io ip iq"><h1 id="c326" class="mf mg it bd mh mi pn mk ml mm po mo mp jz pp ka mr kc pq kd mt kf pr kg mv mw bi translated">6.删除所有的 HTML 标签并将其转换为纯文本格式。</h1><p id="f8a3" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">这里我们移除所有的 HTML 标签，并将其转换为文本格式，这可以通过放置在 for 循环中的<strong class="lb iu"> get_text </strong>方法来完成。这将 HTML 转换成文本格式。</p><pre class="kj kk kl km gt ox oy oz pa aw pb bi"><span id="c06b" class="ol mg it oy b gy pc pd l pe pf">for mytag in proftags:<br/>  print(mytag.get_text())</span><span id="cc87" class="ol mg it oy b gy ps pd l pe pf"><strong class="oy iu">Hilarious (11)  <br/>Caring (9)  <br/>Accessible outside class (8)  <br/>Amazing lectures (5)  <br/>Clear grading criteria (4)  <br/>Inspirational (4)  <br/>Group projects (3)  <br/>Respected (3)  <br/>Gives good feedback (2)  <br/>EXTRA CREDIT (2)  <br/>Participation matters (1)  <br/>Lecture heavy (1)  <br/>Test heavy (1)  <br/>So many papers (1)</strong></span></pre><p id="6c25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们得到了上述信息，我们正在寻找。我们拿到了教授的所有标签。这就是我们如何通过使用请求和漂亮的汤库从互联网上收集数据。坦率地说，这是我教授“数据科学”的教授。他是整个大学最好的教授之一。我喜欢他的教学和他的风格。</p><p id="a39f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢你们花时间阅读我的教程，敬请期待更多更新。请在下面的评论区告诉我你对这个教程的看法。此外，如果你对代码有任何疑问，评论区都是你的。祝你有愉快的一天。</p></div></div>    
</body>
</html>