<html>
<head>
<title>The Mueller Report: An investigation in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">穆勒报告:在美国的调查</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-mueller-report-an-investigation-in-r-40f7e0f219ef?source=collection_archive---------15-----------------------#2019-05-05">https://towardsdatascience.com/the-mueller-report-an-investigation-in-r-40f7e0f219ef?source=collection_archive---------15-----------------------#2019-05-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d91e34dfff89cacbd82fe20d115ba304.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S3R1wIEjKG2cbggh"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@mktgmantra?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">David Everett Strickler</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9d4d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">随着最近穆勒报告的发布，我认为对 r .的调查进行研究是一个有趣的想法，即对穆勒报告进行探索性分析。所以现在开始。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="931e" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">环境设置</strong></h1><p id="8171" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">让我们首先加载本次探索所需的所有库。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="8e47" class="mu lj iq mq b gy mv mw l mx my">rm(list = ls())<br/>library(tidyverse)<br/>library(pdftools)<br/>library(tidylog)<br/>library(hunspell)<br/>library(tidytext)<br/>library(ggplot2)<br/>library(gridExtra)<br/>library(scales)</span></pre></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="ea07" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">获取数据即米勒报告</strong></h1><p id="8270" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">这份报告可以在司法部的网站<a class="ae kc" href="https://www.justice.gov/storage/report.pdf" rel="noopener ugc nofollow" target="_blank">这里</a>免费获得，我们可以作为 R 对象访问它，就像这样-</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="109d" class="mu lj iq mq b gy mv mw l mx my">download.file("<a class="ae kc" href="https://www.justice.gov/storage/report.pdf" rel="noopener ugc nofollow" target="_blank">https://www.justice.gov/storage/report.pdf</a>", "~/Downloads/mueller-report.pdf")</span><span id="6add" class="mu lj iq mq b gy mz mw l mx my">report &lt;- pdf_text("~/Downloads/mueller-report.pdf")</span></pre><p id="797f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我将在这里使用报告呈现的预转换 CSV 格式<a class="ae kc" href="https://github.com/gadenbuie/mueller-report/blob/36fbb136a2a508c812db8773e9342b7a55204b20/mueller_report.csv" rel="noopener ugc nofollow" target="_blank"/>。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="6dc5" class="mu lj iq mq b gy mv mw l mx my">report &lt;- read_csv("<a class="ae kc" href="https://raw.githubusercontent.com/gadenbuie/mueller-report/master/mueller_report.csv" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/gadenbuie/mueller-report/master/mueller_report.csv</a>")</span></pre></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="4af0" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">清理数据</strong></h1><p id="b61d" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">由于实际的报告从几页开始，pdf 到文本的解析返回一些失败(也是报告的修订部分)，所以数据中有一些空行。让我们把这些过滤掉。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="cd2b" class="mu lj iq mq b gy mv mw l mx my">report %&gt;% <br/>  filter(page &gt;= 9) -&gt; content<br/>content %&gt;% <br/>  filter(!is.na(text)) -&gt; content</span></pre><p id="f053" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，由于解析错误，我们在数据中看到许多拼写错误的单词。让我们用 hunspell 找到并删除大部分单词拼写错误的行。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="f596" class="mu lj iq mq b gy mv mw l mx my">content %&gt;% <br/>  rowwise() %&gt;% <br/>  mutate(num_misspelled_words = length(hunspell(text)[[1]]),<br/>         num_words = length(str_split(text, " ")[[1]]),<br/>         perc_misspelled = num_misspelled_words/num_words) %&gt;% <br/>  select(-num_misspelled_words, -num_words) -&gt; content</span><span id="a624" class="mu lj iq mq b gy mz mw l mx my">content %&gt;% <br/>  filter(perc_misspelled &lt;= 0.5) -&gt; content</span></pre><p id="7551" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用<a class="ae kc" href="https://www.tidytextmining.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> tidytext </strong> </a>规格化线条</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="e829" class="mu lj iq mq b gy mv mw l mx my">content %&gt;% <br/>  unnest_tokens(text, text, token = "lines") -&gt; content</span></pre></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="e4f6" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">最流行词汇</strong></h1><p id="cf8c" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">让我们看看穆勒报告中最受欢迎的词是什么</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="34ca" class="mu lj iq mq b gy mv mw l mx my">tidy_content &lt;- content %&gt;%<br/>  unnest_tokens(word, text) %&gt;%<br/>  anti_join(stop_words)</span><span id="d94e" class="mu lj iq mq b gy mz mw l mx my">tidy_content %&gt;% <br/>  mutate(word = str_extract(word, "[a-z']+")) %&gt;%<br/>  filter(!is.na(word)) %&gt;% <br/>  count(word, sort = TRUE) %&gt;% <br/>  filter(str_length(word) &gt; 1,<br/>         n &gt; 400) %&gt;% <br/>  mutate(word = reorder(word, n)) %&gt;%<br/>  ggplot( aes(x=word, y=n)) +<br/>  geom_segment( aes(x=word, xend=word, y=0, yend=n), color="skyblue", size=1) +<br/>  geom_point( color="blue", size=4, alpha=0.6) +<br/>  coord_flip() + <br/>  theme(panel.grid.minor.y = element_blank(),<br/>        panel.grid.major.y = element_blank(),<br/>        legend.position="none") +<br/>  labs(x = "",<br/>       y = "Number of Occurences",<br/>       title = "Most popular words from the Mueller Report",<br/>       subtitle = "Words occurring more than 400 times",<br/>       caption = "Based on data from the Mueller Report")</span></pre><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi na"><img src="../Images/7783ac0e89a1b7f134a9765118963b19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aSygfZc0zXqgIO_0_I_CVg.jpeg"/></div></div></figure><p id="3bba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从上面的图中我们可以看出，报告中最受欢迎的词是“总统”和“特朗普”。另一个值得注意的词，“科恩”、“弗林”、“科米”和“麦克加恩”。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="1925" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">最常见的相关词</strong></h1><p id="a22a" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">让我们建立一个在报告中高度相关的词的网络</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="a66c" class="mu lj iq mq b gy mv mw l mx my">word_cors &lt;- tidy_content %&gt;% <br/>  add_count(word) %&gt;% <br/>  filter(n &gt; stats::quantile(n, 0.7)) %&gt;% <br/>  pairwise_cor(word, page, sort = TRUE)</span><span id="1f1f" class="mu lj iq mq b gy mz mw l mx my">set.seed(123)</span><span id="5f2b" class="mu lj iq mq b gy mz mw l mx my">word_cors %&gt;%<br/>  filter(correlation &gt; 0.25,<br/>         !str_detect(item1, "\\d"),<br/>         !str_detect(item2, "\\d")) %&gt;% <br/>  graph_from_data_frame() %&gt;%<br/>  ggraph(layout = "fr") +<br/>  geom_edge_link(aes(edge_alpha = correlation), show.legend = FALSE) +<br/>  geom_node_point(color = "lightblue", size = 5) +<br/>  geom_node_text(aes(label = name), repel = TRUE) +<br/>  theme_void() + <br/>  labs(x = "",<br/>       y = "",<br/>       title = "Commonly Occuring Correlated Words",<br/>       subtitle = "Per page correlation higher than 0.25",<br/>       caption = "Based on data from the Mueller Report")</span></pre><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nb"><img src="../Images/21d9f9c34721cbfca058503fc568608c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i4WDxMCCbxqNq6szrJ4DnA.jpeg"/></div></div></figure><p id="6bf3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如我们所料，最常见的相关单词是“meeting”和“kushner”&amp;“comey”和“investigation”等等。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="67b2" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">总结</strong></h1><p id="255b" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">正如我们所看到的，我们可以使用 r 快速对 Mueller 报告进行探索性分析。点击这里查看我关于穆勒报告的详细博文</p><div class="nc nd gp gr ne nf"><a href="https://www.adityamangal.com/2019/04/the-mueller-report/" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd ir gy z fp nk fr fs nl fu fw ip bi translated">穆勒报告</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">介绍分析加载库下载报告清理页面范围文本 NA 拼写错误的单词正常化大多数…</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">www.adityamangal.com</p></div></div><div class="no l"><div class="np l nq nr ns no nt jw nf"/></div></div></a></div><p id="a57c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我将讨论如何使用 python 的 NLTK 库和 R 来分析报告中的情感，并使用我们自己定制的搜索引擎对报告进行事实核查。</p><p id="68a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我在这里或者在<a class="ae kc" href="https://www.adityamangal.com/2019/04/the-mueller-report/" rel="noopener ugc nofollow" target="_blank">博客</a>上知道你的想法。</p><p id="2663" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">干杯！</p></div></div>    
</body>
</html>