<html>
<head>
<title>SELECT answers FROM sql</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从 sql 中选择答案</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/select-answers-from-sql-5cef923380ac?source=collection_archive---------29-----------------------#2019-11-18">https://towardsdatascience.com/select-answers-from-sql-5cef923380ac?source=collection_archive---------29-----------------------#2019-11-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f413" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一些带有直观答案的常见 SQL 面试问题的回顾</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ea3e956f3961cbd3b449fd0c20228006.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_MR6QC3u0Nz7LHmdGikM8A.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Modded from photo by <a class="ae ky" href="https://unsplash.com/@randomlies?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Ashim D’Silva</a> on <a class="ae ky" href="https://unsplash.com/s/photos/pile-of-stuff?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2ede" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于任何对数据分析或数据科学感兴趣的人来说，重要的一点是:<strong class="lb iu">不要低估 SQL 的效用！</strong>使用 Python 和 pandas、numpy 之类的包很容易上手，但有许多业务是用 SQL 完成的，许多报告和分析工作可以用它快速高效地完成。如果您对大数据感兴趣，并且使用 PySpark 之类的包与 Apache Spark 进行交互，那么编写 SQL 查询可能是过滤和分析数据最清晰、最快捷的方式。</p><p id="6654" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了帮助巩固这些概念，下面是一些关于 SQL 的常见面试问题的分类。我从我最近查阅的其他人的列表中提取了这些信息(更多信息请点击底部的链接),我只是针对我个人在最近的采访中遇到的一些问题给出了解释:</p><h2 id="bbfa" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">SQL、MySQL 和 SQL Server 之间的区别</h2><p id="39d8" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">非常基础的，SQL 代表结构化查询语言。它是用于设计、管理和查询结构化关系数据库的语言本身。mySQL 是一个开源的关系数据库管理系统。SQL Server(也称为 Microsoft SQL Server)是由 Microsoft 为其服务器平台创建的关系数据库管理系统。这两个平台都使用一种通用语言(SQL ),但也有各自的细微差别。还有一些你可能听说过的，比如 Oracle，但是要注意的是 SQL 是语言，而其他的是数据库平台。</p><h2 id="ca2f" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">哪里与拥有</h2><p id="8511" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">如果你需要一个一句话的答案:<strong class="lb iu"> HAVING </strong>专门用于使用集合函数对表进行过滤，而<strong class="lb iu"> WHERE </strong>不是。对于更长的上下文:<strong class="lb iu"> WHERE </strong>子句根据满足特定条件的行进行过滤。它在行中寻找特定数据的匹配。<strong class="lb iu"> HAVING </strong>子句用于对整个表中的数据条件进行过滤。下面是这种情况的快速分析。让我们假设我们有一张桌子，看起来像这样一个随机分类的《权力的游戏》角色:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="8558" class="lv lw it mu b gy my mz l na nb">╔═══════════╦════════════════════╦════════╗<br/>║   name    ║       house        ║  age   ║<br/>╠═══════════╬════════════════════╬════════╣<br/>║ Eddard    ║ Stark              ║ 40     ║<br/>║ Catelyn   ║ Stark              ║ 35     ║<br/>║ Rob       ║ Stark              ║ 17     ║<br/>║ Sansa     ║ Stark              ║ 13     ║<br/>║ Cersei    ║ Lannister          ║ 35     ║<br/>║ Jaime     ║ Lannister          ║ 35     ║<br/>║ Tyrion    ║ Lannister          ║ 30     ║<br/>║ Daenerys  ║ Targaryen          ║ 15     ║<br/>║ Theon     ║ Greyjoy            ║ 19     ║<br/>╚═══════════╩════════════════════╩════════╝</span></pre><p id="c901" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想要查找大于或等于 30 的字符，我们可以编写如下查询:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="1d90" class="lv lw it mu b gy my mz l na nb">SELECT name, age<br/>FROM got_table<br/>WHERE age &gt;= 30</span></pre><p id="893a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此函数查看表，根据列出的年龄大于或等于 30 的行进行筛选。它查看表中的可用数据，并从中进行过滤。但是假设你想使用集合函数。让我们从基于 house 聚合这个表开始，只是为了计算每个表中列出了多少人:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="d24d" class="lv lw it mu b gy my mz l na nb">SELECT house, COUNT(*)<br/>FROM got_table<br/>GROUP BY house</span></pre><p id="725c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们做到了！但是，如果我们只想查看在这个聚合表中创建的具有多个成员的行，我们需要使用具有的<strong class="lb iu">而不是<strong class="lb iu"> WHERE </strong>:</strong></p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="c987" class="lv lw it mu b gy my mz l na nb">SELECT house, COUNT(*)<br/>FROM got_table<br/>GROUP BY house<br/>HAVING COUNT(*) &lt; 2</span></pre><p id="852e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简而言之，如果你在寻找行<strong class="lb iu">在哪里</strong>或者组<strong class="lb iu">在哪里</strong>。</p><h2 id="ca88" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">主键与外键</h2><p id="b813" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">一个<strong class="lb iu">主键</strong> <strong class="lb iu">键</strong>是数据库表中一条记录的唯一标识符。外键是一个表中的一个字段，它是另一个表中的主键。主键在每个表中只能出现一次，而外键可以出现多次。在这里，我将制作几个表格来说明(为了好玩，请容忍我的假数据和混合位置):</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="683b" class="lv lw it mu b gy my mz l na nb">╔════════╦═══════════╦═════════╗  ╔════════╦═══════════╦════════╗<br/>║group_id║  name     ║army_size║  ║planetid║  name     ║group_id║<br/>╠════════╬═══════════╬═════════╣  ╠════════╬═══════════╬════════╣  <br/>║ 0001   ║Cpt. Planet║ 1       ║  ║ 7001   ║ Earth     ║ 0001   ║  <br/>║ 0002   ║First Order║ 800,000 ║  ║ 7020   ║ Cybertron ║ 0001   ║<br/>║ 0003   ║ Autobots  ║ 1,000   ║  ║ 7044   ║ Tatooine  ║ 0003   ║<br/>║ 0004   ║Silverhawks║ 10      ║  ║ 5084   ║ Alderan   ║ 0004   ║<br/>║ 0005   ║ C.H.U.D.s ║ 35,000  ║  ║ 2001   ║ Mars      ║ 0002   ║<br/>╚════════╩═══════════╩═════════╝  ╚════════╩═══════════╩════════╝<br/>TABLE 1                           TABLE 2</span></pre><p id="82ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，假设我们有一些派系(主要取自大脑的后部)在为几个不同的星球而争斗。我们将它们放在单独的表中，以存储每一个的单独特征。这些表格是基于哪个群体控制哪个星球而联系在一起的。在表 1 中，<strong class="lb iu">主键</strong>是 group_id。它是用来标识每条记录的唯一 id。在表 2 中，<strong class="lb iu">主键</strong>是 planetid，而<strong class="lb iu">外键</strong>是 group_id。你可以看到我们如何证明行星船长已经接管了地球和赛博顿，这是一个相当有力的举动！表 2 中使用的 group_id 显示了两个表之间的关系，但是拥有一个外键允许我们为每个集合拥有唯一的表。在较大的数据库中，您的系统会有几个以这种方式连接的表。</p><h2 id="9d00" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">连接和联合</h2><p id="f184" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">基础如下，假设我们有两个表，我们并排连接数据，它们有一些共同的键或值来匹配:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi gj"><img src="../Images/e1b6770c4809eda8cab21e4da173f7da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5aXv9VXP463FcJb7lpCMnQ.png"/></div></div></figure><ul class=""><li id="d6f5" class="nc nd it lb b lc ld lf lg li ne lm nf lq ng lu nh ni nj nk bi translated">内部连接:只记录在两个表中有匹配的值(B)</li><li id="c390" class="nc nd it lb b lc nl lf nm li nn lm no lq np lu nh ni nj nk bi translated">左连接:最左侧表中的所有记录和右侧匹配的记录(A &amp; B)</li><li id="a26c" class="nc nd it lb b lc nl lf nm li nn lm no lq np lu nh ni nj nk bi translated">右连接:最右边的表中的所有记录和最左边的记录相匹配(B &amp; C)</li><li id="4594" class="nc nd it lb b lc nl lf nm li nn lm no lq np lu nh ni nj nk bi translated">完全外部连接:来自两者的所有记录(A &amp; B &amp; C)</li></ul><p id="ca9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还不错，只是需要时间记住布局。这是很好的思考通过加入他们并排的性质。有了工会，我们只需要改变我们看待表格的角度:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi gj"><img src="../Images/98ee0f8c7e0f20c7b2636af146bce415.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kjnIQVk12E2cys9Zbsv7Hw.png"/></div></div></figure><ul class=""><li id="c8c6" class="nc nd it lb b lc ld lf lg li ne lm nf lq ng lu nh ni nj nk bi translated">联合:两个表的组合，一个堆叠在另一个的上面，但是第二个没有重复(A &amp; B)</li><li id="3d4e" class="nc nd it lb b lc nl lf nm li nn lm no lq np lu nh ni nj nk bi translated">联合所有:两张桌子整体叠放在一起的组合(A &amp; B &amp; C)</li></ul><h2 id="5b70" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">删除、截断和丢弃</h2><p id="f88e" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">快速回答:<strong class="lb iu"> DELETE </strong>可以用来从表中删除一些记录，<strong class="lb iu"> TRUNCATE </strong>删除整个表的行，<strong class="lb iu"> DROP </strong>从数据库中删除对象。当使用<strong class="lb iu"> DELETE </strong>时，您将指定一个 WHERE 子句来选择记录:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="6a3c" class="lv lw it mu b gy my mz l na nb">DELETE FROM got_table WHERE house = "Stark"</span></pre><p id="382f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> TRUNCATE </strong>清除表格中的所有行，没有修饰符:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="2d17" class="lv lw it mu b gy my mz l na nb">TRUNCATE TABLE got_table</span></pre><p id="1632" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> DROP </strong>实际上是从数据库中删除表对象和行:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="da30" class="lv lw it mu b gy my mz l na nb">DROP TABLE got_table</span></pre><p id="936b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每一个都有用途，但是根据你的情况，明智地选择你需要的。</p><h2 id="6251" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">操纵字符串</h2><p id="6b0c" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">有很多函数可以帮助进行字符串操作，但是一个重要的事情是索引从 1 开始(尽管在其他编程语言中通常从 0 开始)。下面是一些可能会出现的快速重要功能:</p><ul class=""><li id="2f7b" class="nc nd it lb b lc ld lf lg li ne lm nf lq ng lu nh ni nj nk bi translated"><strong class="lb iu">SUBSTR(</strong><em class="nq">)text，position，length </em> <strong class="lb iu"> ) </strong>将获取文本并抓取任意部分</li><li id="3050" class="nc nd it lb b lc nl lf nm li nn lm no lq np lu nh ni nj nk bi translated"><strong class="lb iu"> LEFT( </strong> <em class="nq"> text，length</em><strong class="lb iu">)</strong>&amp;<strong class="lb iu">RIGHT(</strong><em class="nq">text，length </em> <strong class="lb iu"> ): </strong>两者都从最右边或最左边的固定位置开始并从那里修剪。</li><li id="5255" class="nc nd it lb b lc nl lf nm li nn lm no lq np lu nh ni nj nk bi translated"><strong class="lb iu"> REPLACE( </strong> <em class="nq"> text，string_to_find，string _ to _ REPLACE _ with</em><strong class="lb iu">):</strong>相当直接的文本替换。</li><li id="3fcd" class="nc nd it lb b lc nl lf nm li nn lm no lq np lu nh ni nj nk bi translated"><strong class="lb iu">CONCAT(</strong>)T26【text _ 1】、text_2 等 <strong class="lb iu"> <em class="nq">。</em> ): </strong>简单组合的文字</li></ul><p id="c715" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是对每一种可能出现的情况的简要介绍:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="37bd" class="lv lw it mu b gy my mz l na nb">╔═══════════╦══════════╦══════════════════════════╗<br/>║   first    ║   last   ║  line                    ║<br/>╠═══════════╬══════════╬══════════════════════════╣<br/>║ Inigo     ║ Montoya <strong class="mu iu"> </strong>║ "Prepare to battle!"     ║<br/>╚═══════════╩══════════╩══════════════════════════╝</span><span id="0841" class="lv lw it mu b gy nr mz l na nb"><strong class="mu iu">SELECT</strong> LEFT(first, 1), last <strong class="mu iu">FROM</strong> pb_table<br/>╔═════╦══════════╗<br/>║  I  ║  Montoya ║  <br/>╚═════╩══════════╝<br/><strong class="mu iu">SELECT</strong> CONCAT(last, "," , first) <strong class="mu iu">FROM</strong> pb_table<br/>╔════════════════╗<br/>║ Montoya, Inigo ║  <br/>╚════════════════╝<br/><strong class="mu iu">SELECT</strong> last, REPLACE(line, "battle", "die") <strong class="mu iu">FROM</strong> pb_table<br/>╔══════════╦════════════════════╗<br/>║  Montoya ║  "Prepare to die!" ║  <br/>╚══════════╩════════════════════╝</span></pre><p id="63a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我发现一些面试问题来源很有帮助:</p><p id="72ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://intellipaat.com/blog/interview-question/sql-interview-questions/" rel="noopener ugc nofollow" target="_blank">最重要的 SQL 面试问题(IntelliPaat) </a></p><p id="ac31" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://www.edureka.co/blog/interview-questions/sql-interview-questions" rel="noopener ugc nofollow" target="_blank">2019 年需准备的 65 大 SQL 面试问题(Edureka) </a></p><p id="42bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://www.guru99.com/sql-interview-questions-answers.html" rel="noopener ugc nofollow" target="_blank">50 大 SQL 面试问题&amp;答案(Guru99) </a></p><p id="7e85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://www.softwaretestingmaterial.com/sql-interview-questions/" rel="noopener ugc nofollow" target="_blank"> 100+最流行的 SQL 面试问答(软件测试材料)</a></p><p id="bf57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我喜欢的一些 SQL 学习资源:</p><p id="76e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://mode.com/sql-tutorial/introduction-to-sql" rel="noopener ugc nofollow" target="_blank">模式分析</a>(免费，可以用自己的平台做一些互动练习)</p><p id="e722" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://www.codecademy.com/learn/learn-sql" rel="noopener ugc nofollow" target="_blank">代码教程</a>(喜欢他们的互动平台和详尽的讲解)</p><p id="658e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://www.w3schools.com/SQL/default.asp" rel="noopener ugc nofollow" target="_blank"> W3Schools </a>(也是一些示例交互的非常好的书面参考)</p><p id="977c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">谢谢！</p></div></div>    
</body>
</html>