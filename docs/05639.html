<html>
<head>
<title>Getting to Know the Mel Spectrogram</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解 Mel 光谱图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/getting-to-know-the-mel-spectrogram-31bca3e2d9d0?source=collection_archive---------1-----------------------#2019-08-19">https://towardsdatascience.com/getting-to-know-the-mel-spectrogram-31bca3e2d9d0?source=collection_archive---------1-----------------------#2019-08-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/a26ebd43774ff6671ff7c4310e4b27fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bxk1tXnFw5Jvncj-6TkbIQ.png"/></div></div></figure><div class=""/><p id="61a0" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你想像 Neo 一样了解 Mel 光谱图，请阅读这篇短文！(也许不是全部，但至少有一点)</p><blockquote class="kw kx ky"><p id="8cec" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated">对于 TL；博士和全部代码，去<a class="ae ld" href="https://github.com/DalyaG/CodeSnippetsForPosterity/tree/master/GettingToKnowTheMelSpectrogram" rel="noopener ugc nofollow" target="_blank">这里</a>。</p></blockquote><h2 id="ba4f" class="le lf jb bd lg lh li dn lj lk ll dp lm kj ln lo lp kn lq lr ls kr lt lu lv lw bi translated">几天前发生在我脑子里的一次真实对话</h2><p id="3d52" class="pw-post-body-paragraph jy jz jb ka b kb lx kd ke kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv ij bi translated">我:嗨梅尔声谱图，我可以叫你梅尔吗？<br/> <em class="kz">梅尔:确定。</em></p><p id="b747" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我:谢谢。梅尔，我们第一次见面时，你对我来说是个谜。<br/> <em class="kz">梅尔:真的吗？击球手出局了吗</em></p><p id="6527" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我:你由两个概念组成，它们的全部目的是使抽象的概念对人类来说是可理解的——梅尔标度<a class="ae ld" href="https://en.wikipedia.org/wiki/Mel_scale" rel="noopener ugc nofollow" target="_blank"><strong class="ka jc"/></a><strong class="ka jc"/>和<strong class="ka jc"> </strong> <a class="ae ld" href="https://en.wikipedia.org/wiki/Spectrogram" rel="noopener ugc nofollow" target="_blank"> <strong class="ka jc">光谱图</strong></a>——然而你自己对我这个人类来说很难理解。梅尔:这种片面的讲话有什么意义吗？</p><p id="7a63" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我:你知道更困扰我的是什么吗？我听说你是 DSP <em class="kz">(数字信号处理)</em>领域的<em class="kz"> buzzz </em>，但是我在网上很少找到关于你的直观信息。梅尔:我应该为你感到难过吗？</p><p id="4511" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我:所以无论如何，我不想让你被误解，所以我决定写你。<br/> <em class="kz">梅尔:啧啧。这其实挺好的。希望现在有更多的人理解我。</em></p><p id="94c9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我:很乐意，我的朋友。我想我们可以谈谈你的核心元素是什么，然后用 python 上的<a class="ae ld" href="https://librosa.github.io/librosa/index.html" rel="noopener ugc nofollow" target="_blank"><strong class="ka jc">librosa</strong></a><strong class="ka jc"/>包展示一些好看的招数。梅尔:哦，太棒了！我爱 librosa！它可以用一行代码生成我！</p><p id="0ace" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我:太好了！让我们在这篇文章中用这首美丽的鲸鱼歌曲作为我们的玩具例子吧！你怎么想呢?梅尔:你知道你在自言自语，对吗？</p><figure class="mc md me mf gt is"><div class="bz fp l di"><div class="mg mh l"/></div></figure><h1 id="bfee" class="mi lf jb bd lg mj mk ml lj mm mn mo lm mp mq mr lp ms mt mu ls mv mw mx lv my bi translated">声谱图</h1><p id="31cd" class="pw-post-body-paragraph jy jz jb ka b kb lx kd ke kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv ij bi translated">视觉化声音是一种恍惚的概念。有一些迷人的方法可以做到这一点，也有更多的数学方法，我们将在这篇文章中探索。</p><figure class="mc md me mf gt is gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/75827cfde1acf328a585e98984fefe7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/0*5qfVgA97cfmgMkGv.jpg"/></div><figcaption class="na nb gj gh gi nc nd bd b be z dk">Photo credit: Chelsea Davis. See more of this beautiful artwork <a class="ae ld" href="https://blog.soundviz.com/2015/10/29/8-stunning-ways-artists-are-visualizing-sound/" rel="noopener ugc nofollow" target="_blank">here</a>.</figcaption></figure><p id="33e6" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当我们谈论<em class="kz">声音</em>时，我们通常谈论一系列不同压力强度的振动，所以想象声音有点像想象空气波。</p><figure class="mc md me mf gt is gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/ad7619d0b11481a31880c55f81717f8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*ScJHiiGuW-wy3w7jPL_kAg.png"/></div></figure><figure class="mc md me mf gt is"><div class="bz fp l di"><div class="nf mh l"/></div></figure><figure class="mc md me mf gt is gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/474ab029805e1ad21b768498b1c6092b.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*S307DuarhOZPTV2_iVLfMg.png"/></div></figure><p id="0ef0" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但这只是这首复杂而丰富的鲸鱼歌曲的二维表现！<br/>声音的另一种数学表示是<a class="ae ld" href="https://en.wikipedia.org/wiki/Fourier_transform" rel="noopener ugc nofollow" target="_blank">傅立叶变换</a>。不需要太多的细节(观看<a class="ae ld" href="https://www.youtube.com/watch?v=spUNpyF58BY" rel="noopener ugc nofollow" target="_blank">这个</a>教育视频以获得易于理解的解释)，傅立叶变换是一种功能，它将时域中的信号作为输入，并将其分解为频率输出。</p><p id="2939" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们以一个短时窗为例，看看应用傅立叶变换会得到什么。</p><figure class="mc md me mf gt is"><div class="bz fp l di"><div class="nf mh l"/></div></figure><figure class="mc md me mf gt is gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/e018355c4d6ed91e015906642c5e9aae.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*27n9ml-LpflzK3ciRZnxAQ.png"/></div></figure><p id="65f4" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们把完整的鲸歌分成几个时间窗口，并在每个时间窗口上应用傅立叶变换。</p><figure class="mc md me mf gt is"><div class="bz fp l di"><div class="nf mh l"/></div></figure><figure class="mc md me mf gt is gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/0d7474f5a25aa41015de759d22a80f29.png" data-original-src="https://miro.medium.com/v2/resize:fit:974/format:webp/1*x4m2z-4748EohM8tSulOSQ.png"/></div></figure><p id="25f6" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">哇，这里看不到什么，是吗？这是因为人类听到的大多数声音都集中在非常小的频率和振幅范围内。</p><figure class="mc md me mf gt is gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/9e82d39e40bc8f1595e0cadf2418eb47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*nRrG3uXi3jj4MHBQXBL22g.png"/></div></figure><p id="9c72" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们做另一个小调整——将 y 轴(频率)转换为对数标度，将“颜色”轴(振幅)转换为<a class="ae ld" href="https://en.wikipedia.org/wiki/Decibel" rel="noopener ugc nofollow" target="_blank">分贝</a>，这是振幅的对数标度。</p><figure class="mc md me mf gt is"><div class="bz fp l di"><div class="nf mh l"/></div></figure><figure class="mc md me mf gt is gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/d5d88590a36b84740e4a4769f424916c.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*MoiYQrW3Qaft6lfPQYbUbw.png"/></div></figure><p id="47c9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这就是我们所说的<a class="ae ld" href="https://en.wikipedia.org/wiki/Spectrogram" rel="noopener ugc nofollow" target="_blank">声谱图</a>！</p><h1 id="7ff4" class="mi lf jb bd lg mj mk ml lj mm mn mo lm mp mq mr lp ms mt mu ls mv mw mx lv my bi translated">熔融标度</h1><p id="2f0b" class="pw-post-body-paragraph jy jz jb ka b kb lx kd ke kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv ij bi translated">让我们暂时忘记所有这些可爱的形象化，谈谈数学。从数学上来说，Mel 标度<a class="ae ld" href="https://en.wikipedia.org/wiki/Mel_scale" rel="noopener ugc nofollow" target="_blank">是频率标度的一些非线性变换的结果。这种 Mel 标度被构造成使得在 Mel 标度上彼此距离相等的声音，对于人类来说也是“声音”,因为它们彼此距离相等。<br/>与 Hz 标度相反，500 和 1000 Hz 之间的差异很明显，而 7500 和 8000 Hz 之间的差异几乎不明显。</a></p><p id="7442" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">幸运的是，有人为我们计算了这个非线性转换，我们需要做的就是使用 librosa 中的适当命令来应用它。</p><figure class="mc md me mf gt is"><div class="bz fp l di"><div class="nf mh l"/></div></figure><p id="9c9b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">没错。就是这样。但是这给了我们什么呢？<br/>使用重叠的三角形滤波器，将 Hz 标度划分为仓，并将每个仓转换为 Mel 标度中的相应仓。</p><figure class="mc md me mf gt is"><div class="bz fp l di"><div class="nf mh l"/></div></figure><figure class="mc md me mf gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nl"><img src="../Images/53e253de04e129574305cc320cdefc88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PQhuoU7yKIWpqdmzEC3qQA.png"/></div></div></figure><p id="0da1" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在<em class="kz">这个</em>给了我们什么？<br/>现在，我们可以获取一个时间窗口的振幅，计算<a class="ae ld" href="https://en.wikipedia.org/wiki/Dot_product" rel="noopener ugc nofollow" target="_blank">与<code class="fe nm nn no np b">mel</code>的点积</a>以执行转换，并在这个新的频率范围内获得声音的可视化。</p><figure class="mc md me mf gt is"><div class="bz fp l di"><div class="nf mh l"/></div></figure><figure class="mc md me mf gt is gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/b310c707d16ec48b734cad56705335d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*6CZ9yKQ-IUMvTeHkvM5lWA.png"/></div></figure><p id="336a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">嗯，还是没什么意义，他？好吧，让我们总结一下，看看我们会得到什么。</p><h1 id="27f0" class="mi lf jb bd lg mj mk ml lj mm mn mo lm mp mq mr lp ms mt mu ls mv mw mx lv my bi translated">梅尔光谱图</h1><p id="1e77" class="pw-post-body-paragraph jy jz jb ka b kb lx kd ke kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv ij bi translated">我们现在知道什么是声谱图，也知道什么是梅尔标度，所以梅尔声谱图是一个声谱图，相当令人惊讶的是，它以梅尔标度为其<em class="kz"> y </em>轴。</p><p id="7e49" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这就是如何用一行代码生成 Mel 光谱图，并使用另外 3 行代码很好地显示它:</p><figure class="mc md me mf gt is"><div class="bz fp l di"><div class="nf mh l"/></div></figure><figure class="mc md me mf gt is gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/d6273097660b8f19bfb1e11f8677b8d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*OOTqBsjpuXyfYJVdPxWtBA.png"/></div></figure><h1 id="56a3" class="mi lf jb bd lg mj mk ml lj mm mn mo lm mp mq mr lp ms mt mu ls mv mw mx lv my bi translated">概述</h1><p id="f628" class="pw-post-body-paragraph jy jz jb ka b kb lx kd ke kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv ij bi translated">Mel 谱图是以下管道的结果:</p><ol class=""><li id="0dbf" class="ns nt jb ka b kb kc kf kg kj nu kn nv kr nw kv nx ny nz oa bi translated"><strong class="ka jc">分离到窗口</strong>:用大小为<code class="fe nm nn no np b">n_fft=2048</code>的窗口对输入进行采样，每次进行大小为<code class="fe nm nn no np b">hop_length=512</code>的跳跃来采样下一个窗口。</li><li id="ff4f" class="ns nt jb ka b kb ob kf oc kj od kn oe kr of kv nx ny nz oa bi translated"><strong class="ka jc">对每个窗口进行 FFT </strong>(快速傅立叶变换)，从时域变换到频域。</li><li id="e010" class="ns nt jb ka b kb ob kf oc kj od kn oe kr of kv nx ny nz oa bi translated"><strong class="ka jc">生成 Mel 标度</strong>:取整个频谱，并将其分成<code class="fe nm nn no np b">n_mels=128</code>均匀间隔的频率。<br/>我们所说的均匀分布是什么意思？不是通过频率维度上的距离，而是人耳听到的距离。</li><li id="7cbc" class="ns nt jb ka b kb ob kf oc kj od kn oe kr of kv nx ny nz oa bi translated"><strong class="ka jc">生成谱图</strong>:对于每个窗口，将信号的幅度分解成其分量，对应 mel 标度中的频率。</li></ol><figure class="mc md me mf gt is"><div class="bz fp l di"><div class="nf mh l"/></div></figure><figure class="mc md me mf gt is gh gi paragraph-image"><div class="gh gi og"><img src="../Images/6ecb89117fbeb7629843bccb2ffdf4a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/0*nRXaTz7OFPA7OdkH.jpg"/></div></figure><h1 id="b7a7" class="mi lf jb bd lg mj mk ml lj mm mn mo lm mp mq mr lp ms mt mu ls mv mw mx lv my bi translated">未完待续…</h1><p id="4f22" class="pw-post-body-paragraph jy jz jb ka b kb lx kd ke kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv ij bi translated">现在我们知道了梅尔光谱图和尼奥，我们要用它做什么？</p><p id="775b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好吧，那是另一个帖子…</p><p id="ce3f" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">与此同时，你有没有利用 Mel 光谱图做一些疯狂的项目？请在评论中分享！</p></div></div>    
</body>
</html>