<html>
<head>
<title>Read Text from Image with One Line of Python Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用一行 Python 代码从图像中读取文本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/read-text-from-image-with-one-line-of-python-code-c22ede074cac?source=collection_archive---------0-----------------------#2019-10-28">https://towardsdatascience.com/read-text-from-image-with-one-line-of-python-code-c22ede074cac?source=collection_archive---------0-----------------------#2019-10-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="3b62" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">处理图像不是一件小事。对你来说，作为一个人，很容易看到某样东西，并立即知道你在看什么。但是电脑不是这样工作的。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/1cc7e4df00873526b5230a6bc67da12f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wZAcNrIWFFjuJA78"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by <a class="ae le" href="https://unsplash.com/@lenin33?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Lenin Estrada</a> on <a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5a43" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对你来说太难的任务，像复杂的算术和一般的数学，是计算机不费吹灰之力就能完成的。但是在这里<strong class="js iu">正好相反适用于</strong>——对你来说微不足道的任务，比如识别图像中是猫还是狗，对计算机来说真的很难。在某种程度上，我们是天造地设的一对。至少现在是这样。</p><p id="27d6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">虽然图像分类和涉及某种程度的计算机视觉的任务可能需要一些代码和扎实的理解，但从某种程度上格式良好的图像中读取文本却是 Python 中的一行程序——可以应用于许多现实生活中的问题。</p><p id="dc30" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在今天的帖子中，我想证明这一点。虽然还有一些安装工作要做，但应该不会花太多时间。这些是您需要的库:</p><ul class=""><li id="ea94" class="lf lg it js b jt ju jx jy kb lh kf li kj lj kn lk ll lm ln bi translated">OpenCV</li><li id="3d98" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">宇宙魔方</li></ul><p id="299f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我不想再长篇大论这个介绍部分了，所以我们现在为什么不进入正题呢？</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="047a" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">OpenCV</h1><p id="ca8f" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">现在，这个库将只用于加载图像，你实际上不需要事先对它有一个坚实的理解(虽然它可能是有帮助的，你会看到为什么)。</p><p id="932d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">根据官方文件:</p><blockquote class="nd ne nf"><p id="6e7f" class="jq jr ng js b jt ju jv jw jx jy jz ka nh kc kd ke ni kg kh ki nj kk kl km kn im bi translated">OpenCV(开源计算机视觉库)是一个开源的计算机视觉和机器学习软件库。OpenCV 旨在为计算机视觉应用提供一个公共基础设施，并加速机器感知在商业产品中的应用。作为一个 BSD 许可的产品，OpenCV 使得企业利用和修改代码变得很容易。[1]</p></blockquote><p id="bf38" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">简而言之，你可以使用 OpenCV 做任何种类的<strong class="js iu">图像转换</strong>，这是一个相当简单的库。</p><p id="a368" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您还没有安装它，它将只是终端中的一行:</p><pre class="kp kq kr ks gt nk nl nm nn aw no bi"><span id="b671" class="np mb it nl b gy nq nr l ns nt">pip install opencv-python</span></pre><p id="c6a9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">差不多就是这样。到目前为止，这很容易，但这种情况即将改变。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="4dcd" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">宇宙魔方</h1><p id="68d1" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated"><strong class="js iu"> <em class="ng">这到底是什么库？</em> </strong>嗯，根据维基百科:</p><blockquote class="nd ne nf"><p id="e53f" class="jq jr ng js b jt ju jv jw jx jy jz ka nh kc kd ke ni kg kh ki nj kk kl km kn im bi translated">Tesseract 是用于各种操作系统的光学字符识别引擎。它是自由软件，在 Apache 许可下发布，版本 2.0，自 2006 年以来一直由 Google 赞助开发。[2]</p></blockquote><p id="3187" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我确信现在有更复杂的库可用，但是我发现这个运行得很好。根据我自己的经验，这个库应该能够读取任何图像中的文本，前提是字体不是一些连你都无法读取的粗体字。</p><p id="2380" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果它不能读取你的图像，花更多的时间玩 OpenCV，应用各种过滤器使文本突出。</p><p id="0cb1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在安装有点底层的痛苦。如果你使用的是 Linux，这可以归结为几个<strong class="js iu"> <em class="ng"> sudo-apt get </em> </strong>命令:</p><pre class="kp kq kr ks gt nk nl nm nn aw no bi"><span id="dccd" class="np mb it nl b gy nq nr l ns nt">sudo apt-get update<br/>sudo apt-get install tesseract-ocr<br/>sudo apt-get install libtesseract-dev</span></pre><p id="d63c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我用的是 Windows，所以这个过程有点繁琐。</p><p id="70ff" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，打开<a class="ae le" href="https://github.com/UB-Mannheim/tesseract/wiki" rel="noopener ugc nofollow" target="_blank">这个 URL </a>，下载 32 位或 64 位安装程序:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/902dad29e6f3560ce70e66358d824427.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*8DCCEQBjhSifztQA2QmvoA.png"/></div></figure><p id="3e2f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">安装本身很简单，归结起来就是点击几次<strong class="js iu"> <em class="ng">下一个</em> </strong>。是的，你还需要做一个<strong class="js iu"> pip 安装</strong>:</p><pre class="kp kq kr ks gt nk nl nm nn aw no bi"><span id="c3b3" class="np mb it nl b gy nq nr l ns nt">pip install pytesseract</span></pre><p id="2347" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="ng">就这些吗？</em> </strong>嗯，不是，你还是要告诉 Python 宇宙魔方安装在哪里。在 Linux 机器上，我不需要这样做，但是在 Windows 上是必须的。默认安装在<strong class="js iu"> <em class="ng">程序文件</em> </strong>中。</p><p id="5854" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您做的一切都是正确的，那么执行这个单元格应该不会产生任何错误:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nv"><img src="../Images/33e448b951c4717011c87df201c47b0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FpkRjLbfJcnNH5ucdqfvew.png"/></div></div></figure><p id="cbf9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">T17】一切都好吗？你可以继续了。</strong></p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="8852" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">阅读课文</h1><p id="8867" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">先说一个简单的。我发现了几个包含某种文字的免版税图片，第一个是这样的:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/5c0f1742ac05f6e7c3e11db7c23916c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KvQ_ceyq0DRFiSkyy4lTwA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk"><a class="ae le" href="https://upload.wikimedia.org/wikipedia/commons/thumb/b/bc/Wikinews_Breaking_News.png/800px-Wikinews_Breaking_News.png" rel="noopener ugc nofollow" target="_blank">https://upload.wikimedia.org/wikipedia/commons/thumb/b/bc/Wikinews_Breaking_News.png/800px-Wikinews_Breaking_News.png</a></figcaption></figure><p id="2759" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这应该是最简单的，并且有可能宇宙魔方会把那些蓝色的“物体”读成括号。让我们看看会发生什么:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/014ab676ecf46dcd1f480152788e0566.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*bVREaNJmNyPrM2MWBbDzpQ.png"/></div></figure><p id="f8b4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我的主张是真实的。不过这不是问题，你可以用 Python 的魔法轻松解决这些问题。</p><p id="c9e0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下一个可能更棘手:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ny"><img src="../Images/0aa1fa204530a38967367be37334358a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kleiyoHmQKzMiIqEbK2WjA.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk"><a class="ae le" href="https://live.staticflickr.com/7892/46879778504_3b11c328b0_b.jpg" rel="noopener ugc nofollow" target="_blank">https://live.staticflickr.com/7892/46879778504_3b11c328b0_b.jpg</a></figcaption></figure><p id="9a57" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我希望它不会发现硬币上“B ”:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/217033b022fb8d1d480f607fb0991405.png" data-original-src="https://miro.medium.com/v2/resize:fit:734/format:webp/1*NkbEpRBYJKQ4NZ3rS91L9g.png"/></div></figure><p id="cf9d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">看起来效果很好。</p><p id="c3cd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在就看你把这个应用到你自己的问题上了。如果文本与背景融为一体，OpenCV 技巧在这里可能至关重要。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="62f2" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">在你离开之前</h1><p id="8eff" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">对于计算机来说，从图像中读取文本是一项非常困难的任务。想想看，计算机不知道什么是字母，它只对数字起作用。在引擎盖后面发生的事情起初可能看起来像一个黑箱，但是如果这是你感兴趣的领域，我鼓励你进一步调查。</p><p id="61aa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我不是说 PyTesseract 每次都能完美地工作，但是我发现它甚至在一些复杂的图像上也足够好了。但不是直接从盒子里拿出来的。需要一些图像处理来突出文本。</p><p id="3f49" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我知道这是个复杂的话题。过一天算一天。总有一天它会成为你的第二天性。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><p id="2a3a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">喜欢这篇文章吗？成为 <a class="ae le" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="ng">中等会员</em> </a> <em class="ng">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="oa ob gp gr oc od"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">通过我的推荐链接加入 Medium-Dario rade ci</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">medium.com</p></div></div><div class="om l"><div class="on l oo op oq om or ky od"/></div></div></a></div></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="1877" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">参考</h1><p id="8fa5" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">[1]<a class="ae le" href="https://opencv.org/about/" rel="noopener ugc nofollow" target="_blank">https://opencv.org/about/</a></p><p id="6cbf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">[2]<a class="ae le" href="https://en.wikipedia.org/wiki/Tesseract_(software)" rel="noopener ugc nofollow" target="_blank">https://en . Wikipedia . org/wiki/tessera CT _(软件)</a></p></div></div>    
</body>
</html>