<html>
<head>
<title>Analysis of the Light Rail Network using Python (Pandas, Plotly, SodaPy)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python (Pandas，Plotly，SodaPy)分析轻轨网络</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/analysis-on-the-light-rail-network-using-python-pandas-plotly-sodapy-6a8f255eb225?source=collection_archive---------12-----------------------#2019-08-28">https://towardsdatascience.com/analysis-on-the-light-rail-network-using-python-pandas-plotly-sodapy-6a8f255eb225?source=collection_archive---------12-----------------------#2019-08-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="6585" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我记得当我听说堪培拉最新的公共交通时，我是多么兴奋。我只去过澳大利亚的几个地方，但我觉得堪培拉错过了悉尼和墨尔本的轻轨系统，因为它们非常方便，感觉很棒🏎</p><p id="baa8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我喜欢轻轨运行的平稳程度<em class="kl"> *(可能除了在到达终点站 Gungahlin 之前的那一小段，在那里感觉好像电车从轨道上刮去了税款)* </em>，它如何节省汽油、停车或只是一般的旅行费用(优惠利率——我在大学，我有折扣，政府理解我的财务困难，因为我把钱都花在大米上了*sob*)。乘坐电车往返城市对我来说很有意义，这太棒了！</p><p id="b835" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是就像世界上的所有事情一样，轻轨解决方案也有一些问题需要解决，比如<a class="ae km" href="https://www.youtube.com/watch?v=yBSB2efY03A" rel="noopener ugc nofollow" target="_blank">险些出事</a>🤦🏽和<a class="ae km" href="https://www.abc.net.au/news/2019-08-12/pedestrian-hit-by-canberra-light-rail/11404506" rel="noopener ugc nofollow" target="_blank">事故</a>，这可能会导致其他事情的延迟。在这篇文章中，我想看看延迟并收集一些见解。</p><h1 id="386d" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">TL；速度三角形定位法(dead reckoning)</h1><h2 id="4fab" class="ll ko iq bd kp lm ln dn kt lo lp dp kx jy lq lr lb kc ls lt lf kg lu lv lj lw bi translated">Jupyter 笔记本:</h2><p id="15b4" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated"><a class="ae km" href="https://plot.ly/~noel.angelo/0/table-of-contentsspan-classtocski/" rel="noopener ugc nofollow" target="_blank">(全代码)</a></p><blockquote class="mc md me"><p id="617a" class="jn jo kl jp b jq jr js jt ju jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj kk ij bi translated">在<strong class="jp ir">平均</strong>上，轻轨在高峰时段延误有多严重？— <strong class="jp ir">全行程* </strong>(阿林加圣⟷贡加林广场)</p></blockquote><ul class=""><li id="8141" class="mi mj iq jp b jq jr ju jv jy mk kc ml kg mm kk mn mo mp mq bi translated"><strong class="jp ir">到阿林加街:</strong>晚 13.8 秒(<em class="kl">上午 8 点</em>)</li><li id="dbd7" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated"><strong class="jp ir">到 Gungahlin Pl: </strong>晚 25.5 秒(<em class="kl">下午 5 点</em>)</li></ul><blockquote class="mc md me"><p id="872e" class="jn jo kl jp b jq jr js jt ju jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj kk ij bi translated">服务—完成百分比？💯</p></blockquote><ul class=""><li id="202d" class="mi mj iq jp b jq jr ju jv jy mk kc ml kg mm kk mn mo mp mq bi translated">工作日: 212 次-100%</li><li id="be8b" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated">星期五: 224 次旅行— 100%</li><li id="0a25" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated">星期六: 152 次旅行——100%</li><li id="c61a" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated">周日: 123 趟——100%</li></ul><blockquote class="mc md me"><p id="bfbd" class="jn jo kl jp b jq jr js jt ju jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj kk ij bi translated">记录的最长延迟时间是多少，是否与任何事故有关？</p></blockquote><ul class=""><li id="dbcd" class="mi mj iq jp b jq jr ju jv jy mk kc ml kg mm kk mn mo mp mq bi translated"><strong class="jp ir">2019 年 7 月 16 日:</strong> 11.8 分钟— <a class="ae km" href="https://www.canberratimes.com.au/story/6276799/car-and-tram-crash-on-light-rail-line/" rel="noopener ugc nofollow" target="_blank">北伯恩大道与斯温登街交叉口发生车祸</a></li><li id="e9c6" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated"><strong class="jp ir">2019 年 8 月 12 日:</strong> 9.8 分钟— <a class="ae km" href="https://www.abc.net.au/news/2019-08-12/pedestrian-hit-by-canberra-light-rail/11404506" rel="noopener ugc nofollow" target="_blank">北伯恩大道与巴里街交叉口之间的行人事故</a></li></ul><blockquote class="mc md me"><p id="fc67" class="jn jo kl jp b jq jr js jt ju jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj kk ij bi translated">哪个车站在终点站停车后延迟最长？</p></blockquote><ul class=""><li id="3b49" class="mi mj iq jp b jq jr ju jv jy mk kc ml kg mm kk mn mo mp mq bi translated"><strong class="jp ir">到阿林加街:</strong>埃卢埃拉街—9: <em class="kl">上午 25 点(9.1 分钟；8 月至 12 日)</em></li><li id="ce2b" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated"><strong class="jp ir">到贡加林 Pl: </strong>曼宁克拉克 Cr —上午 7:18<em class="kl">(11.3 分；8 月 20 日)</em></li></ul></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><h1 id="b907" class="kn ko iq bd kp kq nd ks kt ku ne kw kx ky nf la lb lc ng le lf lg nh li lj lk bi translated">关于数据</h1><p id="81f4" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">堪培拉地铁运营 (CMO)运营着堪培拉有史以来第一条轻轨。轻轨系统已经运行了几个月，往返于城市和贡加林之间。你可能听说过在电车向公众开放的第一个月，人们来回乘坐电车。ACT 政府最近开始通过他们的<a class="ae km" href="https://www.data.act.gov.au/" rel="noopener ugc nofollow" target="_blank">开放数据门户</a>发布轻轨<a class="ae km" href="https://www.transport.act.gov.au/contact-us/information-for-developers" rel="noopener ugc nofollow" target="_blank">数据</a> ( <a class="ae km" href="https://www.data.act.gov.au/Transport/Canberra-Metro-Light-Rail-Transit-Feed-Vehicle-Upd/4f7h-bvpk" rel="noopener ugc nofollow" target="_blank">车辆</a>，<a class="ae km" href="https://www.data.act.gov.au/Transport/Canberra-Metro-Light-Rail-Transit-Feed-Trip-Update/r9a8-xw6s" rel="noopener ugc nofollow" target="_blank">车次</a>)。他们以通用交通馈送规范(GTFS)格式提供完整的时间表，其中集成了谷歌地图的实时更新。有关更多信息，请参考以下链接:</p><ul class=""><li id="a0d0" class="mi mj iq jp b jq jr ju jv jy mk kc ml kg mm kk mn mo mp mq bi translated"><a class="ae km" href="https://www.transport.act.gov.au/googletransit/google_transit_lr.zip" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> CMET 轻轨 GTFS 数据馈送</strong> </a>:该 zip 文件包含轻轨服务的静态时刻表数据(<em class="kl"> CSV 文件</em>)</li><li id="c579" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated"><a class="ae km" href="http://files.transport.act.gov.au/feeds/lightrail.pb" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> CMET 轻轨 GTFS-R 数据进给</strong> </a>:此数据进给(<em class="kl">)。pb 文件</em>)包含轻轨实时位置和运动信息。</li><li id="31cf" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated"><a class="ae km" href="https://www.data.act.gov.au/Transport/Canberra-Metro-Light-Rail-Transit-Feed-Trip-Update/jxpp-4iiz" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> CMET 轻轨历史档案</strong> </a>:此数据馈送(<em class="kl"> API 端点</em>)包含通过 GTFS-R 馈送记录的行程。</li><li id="3520" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated"><a class="ae km" href="https://www.transport.act.gov.au/about-us/public-transport-options/light-rail/using-light-rail" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">使用轻轨—堪培拉交通</strong></a>:<strong class="jp ir"/>TC 网站上对应轻轨服务频率的行驶时间。</li></ul><h1 id="c321" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">数据收集</h1><p id="3efe" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated"><strong class="jp ir"> Socrata 开放数据 API </strong>:我从 ACT 的开放数据门户对<a class="ae km" href="https://www.data.act.gov.au/Transport/Canberra-Metro-Light-Rail-Transit-Feed-Trip-Update/jxpp-4iiz" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="kl">轻轨历史档案</em> </strong> </a>进行了 API 调用，以获取几个月的<strong class="jp ir"> <em class="kl">行程更新</em> </strong>记录，因为有时数据越多越有趣— <em class="kl">。</em></p><blockquote class="mc md me"><p id="30ba" class="jn jo kl jp b jq jr js jt ju jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj kk ij bi translated">(注:轻轨有 2 组信息实时更新并存档— <strong class="jp ir">车辆</strong>和<strong class="jp ir">行程</strong>T25】更新，以下要点从门户拉存档的<strong class="jp ir">行程</strong> <strong class="jp ir">更新</strong>)</p></blockquote><figure class="ni nj nk nl gt nm"><div class="bz fp l di"><div class="nn no l"/></div><figcaption class="np nq gj gh gi nr ns bd b be z dk">Retrieve data from ACT Open Data Portal</figcaption></figure><blockquote class="mc md me"><p id="cbcf" class="jn jo kl jp b jq jr js jt ju jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj kk ij bi translated">对于以下文件，我们可以从堪培拉交通局网站上发布的<a class="ae km" href="https://www.transport.act.gov.au/googletransit/google_transit_lr.zip" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> GTFS 数据馈送</strong> </a>中提取。</p></blockquote><p id="cbd9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">行程(GTFS) </strong>:我们想从获取<code class="fe nt nu nv nw b">trips.csv</code>文件，因为它包含每个<strong class="jp ir">行程</strong>的<code class="fe nt nu nv nw b">route_id</code>，这将有助于以后将<strong class="jp ir">部分</strong>(井场→贡加林 Pl | EPIC→阿林加 St)行程与<strong class="jp ir">全部</strong>(贡加林 Pl →阿林加 St)行程分开。</p><p id="a99a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">停靠站(GTFS) </strong>:我们也想得到这个<code class="fe nt nu nv nw b">stops.csv</code>，因为我们想显示停靠站的名称，而不只是让它的<code class="fe nt nu nv nw b">stop_id</code>在以后可视化。</p><blockquote class="mc md me"><p id="11cc" class="jn jo kl jp b jq jr js jt ju jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj kk ij bi translated"><em class="iq">在 GTFS，全车次有一个</em><strong class="jp ir"><em class="iq"/></strong><em class="iq"/><code class="fe nt nu nv nw b"><em class="iq">ACTO001</em></code><em class="iq">，而部分车次可以是</em> <code class="fe nt nu nv nw b"><em class="iq">X1</em></code> <em class="iq">或</em> <code class="fe nt nu nv nw b"><em class="iq">X2</em></code> <em class="iq">。</em></p></blockquote><h1 id="4003" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">数据争论</h1><p id="4dfc" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">这里是我对数据集做的一些事情。<em class="kl">(朱庇特笔记本)</em></p><ul class=""><li id="71d2" class="mi mj iq jp b jq jr ju jv jy mk kc ml kg mm kk mn mo mp mq bi translated">按时间顺序对数据集进行排序(<em class="kl">最早到最晚</em>)</li><li id="db77" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated">选择适合用于此分析的列</li><li id="3aaf" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated">转换列的数据类型</li><li id="3e5c" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated">重命名一些列</li><li id="6a40" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated">将轻轨记录与<em class="kl">预约公交车</em> → <em class="kl">沿轻轨路线行驶并在高峰时段将人从 A 点到 B 点的公交车</em>分开</li><li id="b9cf" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated">掉起飞延误(<code class="fe nt nu nv nw b">departure delay</code>好像和<code class="fe nt nu nv nw b">arrival delay</code>一样。我期望在某些事件期间看到到达和延误之间的一些变化，例如<em class="kl">电车故障、事故、未遂事故</em>——但在数据集中似乎没有变化</li></ul><h1 id="9129" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">删除预测记录</h1><p id="6a5a" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">我想查看数据集中的到达和离开时间，并将其与指示数据检索时间的时间戳进行比较。我这样做的原因是，我只想汇总历史记录。查看下面列出的<code class="fe nt nu nv nw b">date range</code>,似乎在我们的数据集中有预测到达时间的行。</p><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi nx"><img src="../Images/5a199a17818f5ab382137e4137ee74d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-ZMOSFhiSptMdBLQkXveyA.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk">Last 10 rows of the data pulled from the Open Data Portal with a filter to see which rows have predicted values</figcaption></figure><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi oe"><img src="../Images/0804d5915d0f942408d3a00615511010.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k4V1ejhyGOIX2XhzSdWC_g.png"/></div></div></figure><h1 id="29a3" class="kn ko iq bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">添加其他信息</h1><p id="ed8c" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">我还想为每次旅行添加路线类型，以便能够通过添加<code class="fe nt nu nv nw b">month</code>和<code class="fe nt nu nv nw b">days</code>来帮助我按照月份和工作日对行进行过滤和分组，从而将分类为<code class="fe nt nu nv nw b">partial trip</code>或<code class="fe nt nu nv nw b">full trip</code></p><p id="ba9c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这段代码将为我们提供这个分析的最终数据集。</p><figure class="ni nj nk nl gt nm"><div class="bz fp l di"><div class="nn no l"/></div></figure><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi of"><img src="../Images/c024c6b45b3bc0f4df83b2117a2d7754.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kwHcOJDazproO0AdEUR4HQ.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk">First five rows of the working dataset</figcaption></figure></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><h1 id="cc5e" class="kn ko iq bd kp kq nd ks kt ku ne kw kx ky nf la lb lc ng le lf lg nh li lj lk bi translated">数据分析</h1><p id="e85c" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">我想在宏观层面上查看数据集，我想根据行程的路线和目的地对行程进行分类:</p><ul class=""><li id="405f" class="mi mj iq jp b jq jr ju jv jy mk kc ml kg mm kk mn mo mp mq bi translated"><strong class="jp ir">路线 id </strong>:部分(<code class="fe nt nu nv nw b">X1</code>和<code class="fe nt nu nv nw b">X2</code>)和全部(<code class="fe nt nu nv nw b">ACTO001</code>)行程。</li><li id="3e41" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated"><strong class="jp ir">行程目的地</strong> : ( <code class="fe nt nu nv nw b">Gungahlin Pl</code>)和(<code class="fe nt nu nv nw b">Alinga St</code>)。</li></ul><p id="d025" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我有兴趣看到以下内容:</p><blockquote class="mc md me"><p id="a4c6" class="jn jo kl jp b jq jr js jt ju jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj kk ij bi translated">高峰时段轻轨平均晚点多少？</p><p id="746f" class="jn jo kl jp b jq jr js jt ju jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj kk ij bi translated">轻轨的总行程数是多少(按路线、目的地和服务)？</p><p id="3c37" class="jn jo kl jp b jq jr js jt ju jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj kk ij bi translated">记录的最长延迟时间是多少，是否与任何事故有关？</p><p id="6f53" class="jn jo kl jp b jq jr js jt ju jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj kk ij bi translated">哪个车站在终点站停车后延迟最长？</p></blockquote></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><h2 id="7038" class="ll ko iq bd kp lm ln dn kt lo lp dp kx jy lq lr lb kc ls lt lf kg lu lv lj lw bi translated">假设—高峰时段的延误</h2><p id="e9cf" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">参照<strong class="jp ir"> CMO </strong>出版的<a class="ae km" href="https://cmet.com.au/frequency-guide/" rel="noopener ugc nofollow" target="_blank"> <em class="kl">频率指南</em> </a>可以得知峰值时间如下:</p><p id="06a7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">到阿林加街(<em class="kl">每 6 分钟一趟，电车到达每个车站</em>):</p><ul class=""><li id="3eb8" class="mi mj iq jp b jq jr ju jv jy mk kc ml kg mm kk mn mo mp mq bi translated"><strong class="jp ir">上午 7:00 至 9:00</strong>:早高峰时间</li><li id="6a37" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated"><strong class="jp ir">下午 4:00 到 5:30</strong>:晚高峰时间</li></ul><p id="69a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">到 Gungahlin Place ( <em class="kl">每 6 分钟—电车到达每个车站</em>):</p><ul class=""><li id="0246" class="mi mj iq jp b jq jr ju jv jy mk kc ml kg mm kk mn mo mp mq bi translated"><strong class="jp ir">早上 7:30 到 9:00</strong>:早高峰时间</li><li id="7b87" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated"><strong class="jp ir">下午 4 点到 6 点</strong>:晚高峰时间</li></ul><figure class="ni nj nk nl gt nm"><div class="bz fp l di"><div class="og no l"/></div><figcaption class="np nq gj gh gi nr ns bd b be z dk">Data visualisation of the aggregated (average) delays from the trips in the dataset — (<em class="oh">Plotly)</em></figcaption></figure><blockquote class="mc md me"><p id="eedd" class="jn jo kl jp b jq jr js jt ju jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj kk ij bi translated">从上图中，我们可以看出，在所有 13 个站点中，前往 <strong class="jp ir"> <em class="iq">思域</em> </strong>的轻轨平均在上午<em class="iq"> 8:00 左右晚点<strong class="jp ir"> 13.8 秒</strong>，前往</em> <strong class="jp ir"> <em class="iq">君临</em> </strong>的轻轨平均在下午<em class="iq"> 5:00 左右晚点<strong class="jp ir"> 25.5 秒</strong>。</em></p><p id="e95c" class="jn jo kl jp b jq jr js jt ju jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj kk ij bi translated">考虑到人们正前往工作，人们已经预料到去 Civic 的最高到达延迟将是在清晨左右。有趣的是，到达冈加林的时间会延迟。去思域的时候几乎是两倍的量。</p></blockquote><h2 id="18ad" class="ll ko iq bd kp lm ln dn kt lo lp dp kx jy lq lr lb kc ls lt lf kg lu lv lj lw bi translated">分析 1——计划行程与观察行程的总次数</h2><p id="a6ea" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">查看<a class="ae km" href="https://www.transport.act.gov.au/googletransit/google_transit_lr.zip" rel="noopener ugc nofollow" target="_blank">堪培拉交通局</a>提供的<code class="fe nt nu nv nw b">trips.csv</code>文件，我们可以提取轻轨的静态时间表，并计算出某一天应该有多少趟车。GTFS 有一个名为<code class="fe nt nu nv nw b">service_id</code>的元数据，它为计划的旅行次数指定了工作日。</p><figure class="ni nj nk nl gt nm"><div class="bz fp l di"><div class="og no l"/></div><figcaption class="np nq gj gh gi nr ns bd b be z dk">Number of expected trips for each weekday taken from static timetable (GTFS) — (Plotly)</figcaption></figure><p id="fa05" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在看看工作数据集，我们可以细分每个月(6 月 19 日-8 月 24 日)的图表。</p><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi oi"><img src="../Images/36ee255c53f7e13a94ff8a75219c424d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YWKYOp9fELmticINaajQUA.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk">Number of actual trips from the 19th of June to the mid-day of 24th of August</figcaption></figure><p id="b1ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，我们可以开始绘制静态时间表和每天发生的行程之间的差异，并获得每天完成的行程的百分比。</p><figure class="ni nj nk nl gt nm"><div class="bz fp l di"><div class="og no l"/></div></figure><p id="7012" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">看上面的图表，汇总每天的数据来查看周五和周日是否完成了旅行次数有点棘手。这是因为周五和周日的服务与其他日期重叠，当数据被聚合时，重叠的数据被添加到它所属的工作日，而不是到服务本身。</p><p id="35f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以根据服务 id 来计算唯一行程 id 的数量，而不是每天汇总数据<em class="kl"/>。—我们 100%完成了行程！</p><h2 id="83d2" class="ll ko iq bd kp lm ln dn kt lo lp dp kx jy lq lr lb kc ls lt lf kg lu lv lj lw bi translated">分析 2 —记录的最高延迟时间；它与任何事件有关吗？</h2><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi oj"><img src="../Images/a9e25e3635f2f0d14fb76f399b8c763a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zKQpcQuF2PqL0KUvE3Xc2g.png"/></div></div></figure><p id="505b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">图中最明显的异常是发生在 7 月 16 日的延迟。汽车撞上电车的日期是哪一天？—<a class="ae km" href="https://www.canberratimes.com.au/story/6276799/car-and-tram-crash-on-light-rail-line/" rel="noopener ugc nofollow" target="_blank">https://www . Canberra times . com . au/story/6276799/car-and-tram-crash-on-light-rail-line/</a>。</p><div class="ni nj nk nl gt ab cb"><figure class="ok nm ol om on oo op paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><img src="../Images/5a6a794f605d57039f2c7a2ba1a78533.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*5QtxDb0qBLMicAqSym9FNQ.png"/></div></figure><figure class="ok nm oq om on oo op paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><img src="../Images/b5afb3022c346dcce4c667db6ffdabb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*d09MTBp2bhuLAFQjymJO6g.png"/></div></figure></div><p id="4caa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">延迟上升的第一个实例发生在<strong class="jp ir">斯温登街</strong>(停止序列 8)——我们可以将此与纳拉伯大道和斯温登街交叉口发生事故的新闻相关联。由于坠机，延误了 11.8 分钟。</p><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi oj"><img src="../Images/91f2707b37c70639deaabed6c8bd8e68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uARD-tM91BvjdWY20_-cHA.png"/></div></div></figure><p id="877e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于 8 月，异常值来自 8 月 12 日。还有一起事故，一名行人被电车撞了。—<a class="ae km" href="https://www.abc.net.au/news/2019-08-12/pedestrian-hit-by-canberra-light-rail/11404506" rel="noopener ugc nofollow" target="_blank">https://www . ABC . net . au/news/2019-08-12/行人被堪培拉轻轨撞/11404506 </a>。延迟时间长达 9.6 分钟。</p><h2 id="affc" class="ll ko iq bd kp lm ln dn kt lo lp dp kx jy lq lr lb kc ls lt lf kg lu lv lj lw bi translated">分析 3-在终端停止后，哪个停止的延迟最高？</h2><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi or"><img src="../Images/e2170a0183e67c11f71c5654c548531a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BVE6kw5cPY87uZVkS-S1vQ.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk">Stop Sequence 12 to Alinga St. is Elouera Street</figcaption></figure><p id="919d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里延迟最高的是前往阿林加街的行程，8 月 9 日到达<strong class="jp ir">埃卢埃拉街</strong>时，比<strong class="jp ir">晚了 9 分钟到达。</strong></p><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="ny nz di oa bf ob"><div class="gh gi os"><img src="../Images/7526223e0699f92f9fe661329fc6203e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AikAUeAIyWlxgKWeTRNM2g.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk">Stop Sequence 9 is Well Station Drive</figcaption></figure><p id="bf77" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有趣的是，记录到 Gungahlin 的最高延迟是 712 秒的<strong class="jp ir">井站驱动</strong>(停止顺序:9)或延迟 717 秒(大约 12 分钟)的<strong class="jp ir">nullabor Avenue</strong>(停止顺序:10)。</p></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><h1 id="f19c" class="kn ko iq bd kp kq nd ks kt ku ne kw kx ky nf la lb lc ng le lf lg nh li lj lk bi translated">最终考虑</h1><p id="9786" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">理解有轨电车服务的延误对于物流问题和环境原因是很重要的。如今，越来越多的居民尝试乘坐电车，并不得不应对对这种公共交通工具日益增长的需求。</p><p id="0f61" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，我们试图研究这个问题的一部分:通过显示哪些停靠序列和哪些行程具有最高的延迟。我们可以更好地安排需求，并确定未投入使用的轻轨的最佳维护日期。过马路时请小心，注意周围的环境🙏。</p></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><p id="f9dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">注意:我还计划建立一个仪表板，使用 Elasticsearch 框架将所有这些信息汇集到一个视图中。我对数据分析和这类事情还很陌生，所以如果你知道有关于 elasticsearch 或 Kafka 的好材料的文章或教程，请让我知道！在那之前-保持可爱！</em></p></div></div>    
</body>
</html>