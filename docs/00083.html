<html>
<head>
<title>Introduction to AWS EC2 and the Command Line in Data Science</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS EC2 和数据科学中的命令行简介</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/introduction-to-aws-ec2-and-the-command-line-in-data-science-6de2a9aa8d8e?source=collection_archive---------11-----------------------#2019-01-04">https://towardsdatascience.com/introduction-to-aws-ec2-and-the-command-line-in-data-science-6de2a9aa8d8e?source=collection_archive---------11-----------------------#2019-01-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/d5431d759b600eab61587b4769b8e263.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*Fq0GuTM3LZ7S6I_mW1hD9A.png"/></div></figure><p id="25df" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这个帖子的灵感来自于一个从来没有听说过命令行的朋友。这并不令人惊讶，因为我大约两年前才开始。现在，我每天都用它。</p><p id="67d8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">数据科学中最重要的工具之一是命令行(同义短语包括终端、shell、控制台、命令提示符、Bash)。尤其是在使用亚马逊网络服务(AWS)和弹性计算云(EC2)时，熟悉命令行是一个<em class="ks">必须</em>做的事情。</p><p id="778d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">你可能会问，“为什么我不能用我自己的电脑呢？”答案很简单——随着数据量的增加，仅靠 8 或 16 GB 的 RAM 处理数 TB 的数据变得不可能。使用 AWS 可以在处理大数据时实现可扩展性。你不再使用<em class="ks">的一台</em>本地计算机，而是可能使用云上的 40 台计算机，这一概念被称为<em class="ks">并行处理。</em>简而言之(一语双关)，你是在付钱给亚马逊借他们的电脑。</p><p id="bf92" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">命令行的目的是与计算机(本地或远程)及其文件系统进行交互。它提供了一个<em class="ks">纯文本</em>界面(是的，不再需要点击)来为你的操作系统运行提供命令。</p><p id="b465" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">一些使用案例:</p><ul class=""><li id="296e" class="kt ku iq jw b jx jy kb kc kf kv kj kw kn kx kr ky kz la lb bi translated">读取、写入、编辑、查找、移动、复制、删除、下载文件</li><li id="8e51" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">Git/Github</li><li id="8546" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">基本数据探索/操作</li><li id="2868" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">登录到远程计算机，也称为 SSH-ing(安全外壳)</li><li id="06e3" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">观看《星球大战》(打开终端，输入 telnet towel.blinkenlights.nl)</li></ul><p id="5433" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">一些<em class="ks">危险</em>用例:</p><ul class=""><li id="4d18" class="kt ku iq jw b jx jy kb kc kf kv kj kw kn kx kr ky kz la lb bi translated">拒绝服务(DoS)攻击</li><li id="40e8" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">黑客攻击和窃取人们的信息</li></ul><figure class="li lj lk ll gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lh"><img src="../Images/83fcae4d4cc55031fbe1412bc2b00c5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vzrbv5Td83DZzBxrZokMMQ.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Source: <a class="ae lu" href="https://xkcd.com/196/" rel="noopener ugc nofollow" target="_blank">https://xkcd.com/196/</a></figcaption></figure><p id="ac4b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">本教程旨在给出一个简短的介绍，首先是 AWS EC2 入门(我们将使用自由层规范)，然后是在命令行上使用的重要语法。</p></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><h1 id="b706" class="mc md iq bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">AWS 入门</h1><p id="bbf3" class="pw-post-body-paragraph ju jv iq jw b jx na jz ka kb nb kd ke kf nc kh ki kj nd kl km kn ne kp kq kr ij bi translated">首先要做的是去<a class="ae lu" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank">https://aws.amazon.com/</a>创建一个账户。然后，按照这个简短的 GIF。</p><figure class="li lj lk ll gt jr gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/b0fddcd68afe6b94dc42e8333f37c5b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*RSsr6ofZjWFY-Zp3n5vJmg.gif"/></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Launching an AWS instance</figcaption></figure><p id="9df9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">喝杯咖啡，等一两分钟，让 AWS 实例启动。一旦准备好，它应该显示<em class="ks">正在运行</em>。</p><figure class="li lj lk ll gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi ng"><img src="../Images/8b7b2bb3a828ab39bae435751ad054bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uE7mw-3LTHeIxSRbrsyrcg.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">EC2 Management Console</figcaption></figure><p id="eaa7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">注意右下角的公共 DNS (IPv4)。</p><p id="3540" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">打开您的终端，键入以下命令:</p><pre class="li lj lk ll gt nh ni nj nk aw nl bi"><span id="6310" class="nm md iq ni b gy nn no l np nq">chmod 400 &lt;&lt;name_of_pem_file&gt;&gt;<br/>ssh -i &lt;name_of_pem_file&gt; <a class="ae lu" href="mailto:ubuntu@ec2-54-213-153-185.us-west-2.compute.amazonaws.com" rel="noopener ugc nofollow" target="_blank">ubuntu@&lt;&lt;</a>Public DNS (IPv4)&gt;&gt;</span></pre><p id="7795" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">例如，我会键入:</p><pre class="li lj lk ll gt nh ni nj nk aw nl bi"><span id="3476" class="nm md iq ni b gy nn no l np nq">chmod 400 chris_medium.pem<br/>ssh -i "chris_medium.pem" ubuntu@ec2-54-213-153-185.us-west-2.compute.amazonaws.com</span></pre><figure class="li lj lk ll gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nr"><img src="../Images/1bf90d6723ca0528253f437ad43c8e5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hcBl5mWPBkgHO0bp04ElPQ.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Inside an AWS instance</figcaption></figure><figure class="li lj lk ll gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lh"><img src="../Images/0f1a2bb9a3b47af3beebbbff91268aeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WKQuzYRdK4B5NVTUtmjA0A.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Source: <a class="ae lu" href="https://xkcd.com/908/" rel="noopener ugc nofollow" target="_blank">https://xkcd.com/908/</a></figcaption></figure><p id="d2ba" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">恭喜你！您现在已经准备好在 AWS 上开始云计算了。</p></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><h1 id="ebcc" class="mc md iq bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">命令行入门</h1><p id="bf4b" class="pw-post-body-paragraph ju jv iq jw b jx na jz ka kb nb kd ke kf nc kh ki kj nd kl km kn ne kp kq kr ij bi translated">现在您已经进入了 AWS 实例，您需要知道如何通过终端输入文本命令来提供指令。</p><p id="40bd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">让我们从古腾堡计划中抓取一些文本(《傲慢与偏见》，简·奥斯汀)开始:<a class="ae lu" href="http://www.gutenberg.org/files/1342/1342-0.txt" rel="noopener ugc nofollow" target="_blank">http://www.gutenberg.org/files/1342/1342-0.txt</a></p><blockquote class="ns nt nu"><p id="2c07" class="ju jv ks jw b jx jy jz ka kb kc kd ke nv kg kh ki nw kk kl km nx ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="iq"> wget: </em> </strong> <em class="iq">从网站下载文件</em></p></blockquote><pre class="li lj lk ll gt nh ni nj nk aw nl bi"><span id="415f" class="nm md iq ni b gy nn no l np nq">wget <a class="ae lu" href="http://www.gutenberg.org/files/1342/1342-0.txt" rel="noopener ugc nofollow" target="_blank">http://www.gutenberg.org/files/1342/1342-0.txt</a></span></pre><blockquote class="ns nt nu"><p id="dd8b" class="ju jv ks jw b jx jy jz ka kb kc kd ke nv kg kh ki nw kk kl km nx ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="iq"> ls: </em> </strong> <em class="iq">列出当前工作目录下的文件</em></p></blockquote><figure class="li lj lk ll gt jr gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/1636f3b6de679a1763d571c985e7246b.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/format:webp/1*IvkNe1gaOYICq8h_SoS1Qg.png"/></div></figure><p id="d911" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">当输入 ls 时，您的终端应该显示一个名为<code class="fe nz oa ob ni b">1342-0.txt</code>的文件。</p><figure class="li lj lk ll gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi oc"><img src="../Images/68ca60624c23ed5ca85e0f1069339b92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zSCZ2b2AP2gBRwa51poCzQ.png"/></div></div></figure><p id="e1a6" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">前缀为的文件。<em class="ks">是隐藏的</em>文件。参数<code class="fe nz oa ob ni b">-a</code>将显示它们。有些参数是必选的，而有些像<code class="fe nz oa ob ni b">-a</code>是可选的。</p><blockquote class="ns nt nu"><p id="96e0" class="ju jv ks jw b jx jy jz ka kb kc kd ke nv kg kh ki nw kk kl km nx ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="iq">男人:</em> </strong> <em class="iq">查看命令手册页</em></p></blockquote><p id="5bd1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">键入<code class="fe nz oa ob ni b">man ls</code>(或者 help 前面加两个连字符，由于某种原因 Medium 不断将两个连字符转换成长破折号)将为您提供每个参数的信息。多个参数可以通过连续输入来完成，例如，<code class="fe nz oa ob ni b">ls -ltr</code>将以一个长列表的格式显示你的文件，并按修改时间排序，最早的条目最先出现。</p><blockquote class="ns nt nu"><p id="78f4" class="ju jv ks jw b jx jy jz ka kb kc kd ke nv kg kh ki nw kk kl km nx ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="iq">头:</em> </strong> <em class="iq">打印前 10 行</em></p></blockquote><figure class="li lj lk ll gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi od"><img src="../Images/af4fc10af10bfaad4d46e032ef261512.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MtioODGLRjQNf0tUIGx85Q.png"/></div></div></figure><blockquote class="ns nt nu"><p id="7799" class="ju jv ks jw b jx jy jz ka kb kc kd ke nv kg kh ki nw kk kl km nx ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="iq">尾:</em> </strong> <em class="iq">打印最后 10 行</em></p></blockquote><figure class="li lj lk ll gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi oe"><img src="../Images/15a1252af20b9abefd73fa8a9737e996.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LY_DU2yvzoUYr7SEKUXn0w.png"/></div></div></figure><p id="260f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">你在屏幕上看到的被称为<em class="ks">标准输出</em>。让我们将三个命令合并成一个。</p><blockquote class="ns nt nu"><p id="eb53" class="ju jv ks jw b jx jy jz ka kb kc kd ke nv kg kh ki nw kk kl km nx ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="iq">猫:</em> </strong> <em class="iq">打印文件的内容</em></p><p id="1ce5" class="ju jv ks jw b jx jy jz ka kb kc kd ke nv kg kh ki nw kk kl km nx ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="iq"> |: </em> </strong> <em class="iq">将一个命令的输出作为输入传递给另一个命令的管道运算符</em></p><p id="b384" class="ju jv ks jw b jx jy jz ka kb kc kd ke nv kg kh ki nw kk kl km nx ko kp kq kr ij bi translated"><strong class="jw ir">T51】WC:</strong>T54】字数</p></blockquote><figure class="li lj lk ll gt jr gh gi paragraph-image"><div class="gh gi of"><img src="../Images/2df2ac1fd0a00f85bd0dd0fa8fde440b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*4gZ-Xy8oaVhJJzo0zcQ0RA.png"/></div></figure><p id="6861" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">首先，文本内容将被打印到标准输出。然后，标准输出将被传递给<code class="fe nz oa ob ni b">wc</code>命令，该命令将提供文件的行数、字数和字符数。</p><blockquote class="ns nt nu"><p id="7a01" class="ju jv ks jw b jx jy jz ka kb kc kd ke nv kg kh ki nw kk kl km nx ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="iq"> mv: </em> </strong> <em class="iq">移动文件(可以用来重命名)</em></p><p id="ff97" class="ju jv ks jw b jx jy jz ka kb kc kd ke nv kg kh ki nw kk kl km nx ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="iq"> mkdir: </em> </strong> <em class="iq">创建目录/文件夹</em></p><p id="9310" class="ju jv ks jw b jx jy jz ka kb kc kd ke nv kg kh ki nw kk kl km nx ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="iq"> cp </em> </strong> <em class="iq">:复制一个文件</em></p><p id="b585" class="ju jv ks jw b jx jy jz ka kb kc kd ke nv kg kh ki nw kk kl km nx ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="iq"> rm </em> </strong> <em class="iq">:删除一个文件</em></p><p id="8e70" class="ju jv ks jw b jx jy jz ka kb kc kd ke nv kg kh ki nw kk kl km nx ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="iq">光盘:</em> </strong> <em class="iq">更改目录</em></p></blockquote><p id="d877" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">让我们将文本文件重命名为<code class="fe nz oa ob ni b">pride_and_prejudice</code>，创建一个名为<code class="fe nz oa ob ni b">books</code>的目录，将<code class="fe nz oa ob ni b">pride_and_prejudice</code>文件复制到<code class="fe nz oa ob ni b">books</code>。</p><pre class="li lj lk ll gt nh ni nj nk aw nl bi"><span id="9429" class="nm md iq ni b gy nn no l np nq">mv 1342-0.txt pride_and_prejudice<br/>mkdir books<br/>cp pride_and_prejudice books/</span></pre><blockquote class="ns nt nu"><p id="27d6" class="ju jv ks jw b jx jy jz ka kb kc kd ke nv kg kh ki nw kk kl km nx ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="iq"> grep: </em> </strong> <em class="iq">基于模式的过滤器</em></p><p id="d01b" class="ju jv ks jw b jx jy jz ka kb kc kd ke nv kg kh ki nw kk kl km nx ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="iq"> &gt; : </em> </strong> <em class="iq">将标准输出写入一个文件(如果已有同名文件则覆盖)</em></p><p id="f465" class="ju jv ks jw b jx jy jz ka kb kc kd ke nv kg kh ki nw kk kl km nx ko kp kq kr ij bi translated"><strong class="jw ir"><em class="iq">&gt;&gt;:</em></strong><em class="iq">将标准输出追加到文件末尾</em></p><p id="42d4" class="ju jv ks jw b jx jy jz ka kb kc kd ke nv kg kh ki nw kk kl km nx ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="iq">触摸:</em> </strong> <em class="iq">创建空文件</em></p><p id="591c" class="ju jv ks jw b jx jy jz ka kb kc kd ke nv kg kh ki nw kk kl km nx ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="iq">回显:</em> </strong> <em class="iq">打印消息到标准输出</em></p></blockquote><ol class=""><li id="6cc4" class="kt ku iq jw b jx jy kb kc kf kv kj kw kn kx kr og kz la lb bi translated">让我们将包含单词“happy”的所有行存储到一个名为 happy.txt 的文件中。</li><li id="7837" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr og kz la lb bi translated">接下来，让我们将包含单词“sad”的所有行存储到一个名为 sad.txt 的文件中</li><li id="68ba" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr og kz la lb bi translated">然后，创建一个名为 subset 的空文件，并将这两个文件组合在一起。</li><li id="5212" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr og kz la lb bi translated">在子集的末尾添加一条消息，说明“完成！”</li></ol><pre class="li lj lk ll gt nh ni nj nk aw nl bi"><span id="d04a" class="nm md iq ni b gy nn no l np nq">cat pride_and_prejudice | grep happy &gt; happy.txt<br/>cat pride_and_prejudice | grep -sw sad &gt; sad.txt<br/>touch subset<br/>cat *.txt &gt;&gt; subset<br/>echo "Finished" &gt;&gt; subset</span></pre><p id="f5cd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在第二行中，使用了可选参数<code class="fe nz oa ob ni b">-sw</code>，这样 dis <strong class="jw ir"> sad </strong> vantage 这样的词也不会被捕获。您可以使用星号<code class="fe nz oa ob ni b">*</code>对所有以扩展名<code class="fe nz oa ob ni b">.txt</code>结尾的文件执行操作。</p><p id="0540" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">假设您的任务是从古腾堡项目网站下载 100 个文件(书籍 1000–1099 ),并将文件名更改为书名。这似乎是一个非常单调的任务，但是使用命令行，只用几行就可以完成！</p><p id="d2db" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们需要学习如何做循环。</p><figure class="li lj lk ll gt jr gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/5707566949a5f2fd91357c01a70f8bcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*-tVFe-HJ3sDTS-aE1YX3nw.png"/></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Source: <a class="ae lu" href="https://www.cyberciti.biz/faq/bash-for-loop/" rel="noopener ugc nofollow" target="_blank">https://www.cyberciti.biz/faq/bash-for-loop/</a></figcaption></figure><pre class="li lj lk ll gt nh ni nj nk aw nl bi"><span id="c580" class="nm md iq ni b gy nn no l np nq">for i in 1 2 3 4 5<br/>do<br/>   echo "Hi Person $i"<br/>done</span></pre><p id="572e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">输出将是:</p><pre class="li lj lk ll gt nh ni nj nk aw nl bi"><span id="ff17" class="nm md iq ni b gy nn no l np nq">Hi Person 1<br/>Hi Person 2<br/>Hi Person 3<br/>Hi Person 4<br/>Hi Person 5</span></pre><p id="e3ae" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">一个稍微复杂一点的例子:</p><pre class="li lj lk ll gt nh ni nj nk aw nl bi"><span id="d493" class="nm md iq ni b gy nn no l np nq">for i in $( ls )<br/>do<br/>    echo file: $i<br/>done</span></pre><p id="ac82" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">输出将是:</p><pre class="li lj lk ll gt nh ni nj nk aw nl bi"><span id="1c49" class="nm md iq ni b gy nn no l np nq">file: books<br/>file: happy.txt<br/>file: pride_and_prejudice<br/>file: sad.txt<br/>file: subset</span></pre><p id="803d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><code class="fe nz oa ob ni b">$</code>使您能够在另一个命令中使用一个命令。</p><p id="d1fa" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">从古腾堡网站上看，这些文件将会是<a class="ae lu" href="http://www.gutenberg.org/files/1/1-0.txt" rel="noopener ugc nofollow" target="_blank">http://www.gutenberg.org/files/1/1-0.txt</a>或<a class="ae lu" href="http://www.gutenberg.org/files/1/1-0.txt" rel="noopener ugc nofollow" target="_blank">http://www.gutenberg.org/files/1/1.txt</a>(它们的文件名中是否有<code class="fe nz oa ob ni b">-0</code>并不一致。</p><p id="f605" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">考虑到这两种情况，我们可以使用<code class="fe nz oa ob ni b">||</code>命令，如果第一个命令失败，它将只触发第二个命令。</p><blockquote class="ns nt nu"><p id="1d95" class="ju jv ks jw b jx jy jz ka kb kc kd ke nv kg kh ki nw kk kl km nx ko kp kq kr ij bi translated"><strong class="jw ir"> <em class="iq"> tr: </em> </strong> <em class="iq">翻译一个字符(使用-d 会删除字符)</em></p></blockquote><p id="5775" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">代码如下(一步一步的细节可以在下面看到):</p><pre class="li lj lk ll gt nh ni nj nk aw nl bi"><span id="9a1d" class="nm md iq ni b gy nn no l np nq">mkdir gutenberg<br/>cd gutenberg</span><span id="7133" class="nm md iq ni b gy oi no l np nq">for i in {1000..1099}<br/>do<br/>    wget -O file "<a class="ae lu" href="http://www.gutenberg.org/files/2/2.txt" rel="noopener ugc nofollow" target="_blank">http://www.gutenberg.org/files/$i/$i.txt</a>" || <br/>    wget -O file "<a class="ae lu" href="http://www.gutenberg.org/files/2/2-0.txt" rel="noopener ugc nofollow" target="_blank">http://www.gutenberg.org/files/$i/$i-0.txt</a>"<br/>    name=$(cat file | head -n 1 | tr -cd "[:alnum:][:space:]")<br/>    name<!-- -->="${name/$'\r'/}"<br/>    mkdir "$i"<br/>    mv file "$i/$name"<br/>done</span></pre><p id="57a9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">键入<code class="fe nz oa ob ni b">ls</code>应该会得到这样的结果:</p><figure class="li lj lk ll gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi oc"><img src="../Images/38dbbdd3008ba354aec02fc6831dd88d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qcUIRouiLFa7OZdOkv7rfw.png"/></div></div></figure><p id="3a03" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">要查看文件夹中的文件，您可以使用<code class="fe nz oa ob ni b">ls -R</code>:</p><figure class="li lj lk ll gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi oj"><img src="../Images/f4517d6b2078db439d090d9d4db6e8ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mRYZhrylFug__AzXq4MVuQ.png"/></div></div></figure><p id="40d9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">创建一个名为 gutenberg 的文件夹，并将目录更改为该文件夹</p><pre class="li lj lk ll gt nh ni nj nk aw nl bi"><span id="c51c" class="nm md iq ni b gy nn no l np nq">mkdir gutenberg<br/>cd gutenberg</span></pre><p id="5434" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">开始 for 循环，其中 I 将是一个从 1000 到 1099(包括 1000 和 1099)的数字</p><pre class="li lj lk ll gt nh ni nj nk aw nl bi"><span id="366c" class="nm md iq ni b gy nn no l np nq">for i in {1000..1099}<br/>do</span></pre><p id="b5dd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">参数<code class="fe nz oa ob ni b">-O</code>会将文件重命名为名称<code class="fe nz oa ob ni b">file</code>。它将首先尝试下载<code class="fe nz oa ob ni b">&lt;number&gt;.txt</code>，如果失败，它将尝试<code class="fe nz oa ob ni b">&lt;number&gt;-0.txt</code>。</p><pre class="li lj lk ll gt nh ni nj nk aw nl bi"><span id="8728" class="nm md iq ni b gy nn no l np nq">wget -O file "<a class="ae lu" href="http://www.gutenberg.org/files/2/2.txt" rel="noopener ugc nofollow" target="_blank">http://www.gutenberg.org/files/$i/$i.txt</a>" || <br/>wget -O file "<a class="ae lu" href="http://www.gutenberg.org/files/2/2-0.txt" rel="noopener ugc nofollow" target="_blank">http://www.gutenberg.org/files/$i/$i-0.txt</a>"</span></pre><p id="1947" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这将获取文本文件，检索第一行(标题所在的位置)，只保留字母数字和空格，并将字符串存储为一个名为<code class="fe nz oa ob ni b">name</code>的变量。<code class="fe nz oa ob ni b">[:alnum:]</code>和<code class="fe nz oa ob ni b">[:space:]</code>分别是字母数字和空白的字符集。下一行将删除剩余的奇怪的、bash 特有的字符，例如将<code class="fe nz oa ob ni b">'The Project Gutenberg EBook of the Riverman by Stewart Edward White'$'\r'</code>转换为<code class="fe nz oa ob ni b">'The Project Gutenberg EBook of the Riverman by Stewart Edward White'</code>。这使用了<em class="ks">变量替换、</em>的概念，并使用了以下语法:<code class="fe nz oa ob ni b">${parameter//patern/string}</code>。在这一部分中，<code class="fe nz oa ob ni b">/string</code>组件是空的，所以它不用任何东西替换<code class="fe nz oa ob ni b">\r</code>。</p><pre class="li lj lk ll gt nh ni nj nk aw nl bi"><span id="d723" class="nm md iq ni b gy nn no l np nq">name=$(cat file | head -n 1 | tr -cd "[:alnum:][:space:]")<br/>name<!-- -->="${name/$'\r'/}"</span></pre><p id="136f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">最后一部分将通过创建一个具有适当编号的文件夹并将文件移动到其中来结束 for 循环。</p><pre class="li lj lk ll gt nh ni nj nk aw nl bi"><span id="b596" class="nm md iq ni b gy nn no l np nq">    mkdir "$i"<br/>    mv file "$i/$name"<br/>done</span></pre></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><h1 id="da21" class="mc md iq bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">结论</h1><p id="7d7b" class="pw-post-body-paragraph ju jv iq jw b jx na jz ka kb nb kd ke kf nc kh ki kj nd kl km kn ne kp kq kr ij bi translated">本教程中还有许多我没有涉及到的工具，它们也被广泛使用。其中包括:</p><ul class=""><li id="b344" class="kt ku iq jw b jx jy kb kc kf kv kj kw kn kx kr ky kz la lb bi translated">Git/Github</li><li id="ebc1" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">精力</li><li id="e409" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">Bash 脚本</li><li id="9e7c" class="kt ku iq jw b jx lc kb ld kf le kj lf kn lg kr ky kz la lb bi translated">Bash 配置文件</li></ul><p id="2555" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">感谢您的阅读！这是我的第一篇博文——欢迎留下评论，提供任何建设性的反馈。你也可以建议我将来写的主题。我会试着每周发一次帖子。</p></div></div>    
</body>
</html>