<html>
<head>
<title>Why you should care about Docker?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你为什么要关心 Docker？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/why-you-should-care-about-docker-9622725a5cb8?source=collection_archive---------5-----------------------#2019-01-22">https://towardsdatascience.com/why-you-should-care-about-docker-9622725a5cb8?source=collection_archive---------5-----------------------#2019-01-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="482b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您是一名软件工程师或数据科学家，您现在可能已经听说过 docker 了。</p><p id="4ac5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它引起我注意的方式是我在互联网上浏览深度学习框架，几乎所有其他框架都有 docker 支持，这让我思考 docker 到底是什么。</p><p id="7c38" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">乍一看肯定不直观。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="ab gu cl kq"><img src="../Images/02aca655b62ce1f8a4e5b4e3c849ea7f.png" data-original-src="https://miro.medium.com/v2/format:webp/1*9hGvYE5jegHm1r_97gH-jQ.png"/></div></figure></div><div class="ab cl kt ku hu kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ij ik il im in"><p id="ea8c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是在我们深入 docker 之前，我们需要了解什么是虚拟机和容器。</p><h1 id="e9ce" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">什么是“容器”和“虚拟机”？</h1><p id="57c2" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">容器和虚拟机的目标相似:将应用程序及其依赖项隔离到一个自包含的单元中，该单元可以在任何地方运行。</p><p id="1dc6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，容器和虚拟机消除了对物理硬件的需求，允许在能耗和成本效益方面更有效地使用计算资源。</p><p id="055c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">容器和虚拟机之间的主要区别在于它们的架构方法。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="ab gu cl kq"><img src="../Images/b04a678fe5df53c6d2ac7397cf910c8c.png" data-original-src="https://miro.medium.com/v2/format:webp/1*gVNbunchCV5wXgnwlT-iGg.jpeg"/></div><figcaption class="md me gj gh gi mf mg bd b be z dk">VMs and Container architecture</figcaption></figure><p id="0a65" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如上图所示，虚拟机构建在主机操作系统之上，因此增加了一个额外的层，这在容器中是完全没有的。</p><p id="7184" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你和我一样，就把它(docker)当成一个更好的 VM，在那里你可以做大量的实验，而不必担心环境变量。</p><h1 id="3e15" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">Docker 是什么？</h1><p id="5d10" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">Docker 真正做的是将应用程序代码从基础设施需求和需要中分离出来。它通过在一个称为“容器”的隔离环境中运行每个应用程序来实现这一点</p><p id="48e1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这意味着开发人员可以专注于在 Docker 容器中运行的实际代码，而不用担心它最终将在哪个系统上运行，DevOps 可以专注于确保在 Docker 容器中安装正确的程序，并减少所需的系统数量和部署后维护所述系统的复杂性。</p><h1 id="db56" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">你为什么要关心它？</h1><p id="2b10" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">每一个 Docker 容器都是从一无所知的纯普通 Linux 机器开始的。</p><p id="859b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，我们告诉容器它需要知道的一切——为了运行应用程序，它需要下载和安装的所有依赖项。这个过程是用一个<code class="fe mh mi mj mk b">Dockerfile</code>完成的。</p><p id="b0cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于本节，可以说，Docker 消除了部署应用程序的猜测(和花费的调试时间),因为它总是作为一台全新的、隔离的机器启动，并且添加了完全相同的依赖项。每一个。单身。时间。</p><p id="82f3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">没有安装了不同版本依赖项的环境。没有完全缺少依赖关系的环境。不要和 Docker 胡闹。</p><p id="d575" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">1.<strong class="jp ir">易用性:</strong> Docker 让任何人——开发人员、系统管理员、架构师和其他人——更容易利用容器来快速构建和测试可移植的应用程序。它允许任何人在他们的笔记本电脑上打包一个应用程序，反过来可以在任何公共云、私有云甚至裸机上不加修改地运行。咒语是:“构建一次，运行在任何地方。”</p><p id="afe2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.<strong class="jp ir">速度:</strong> Docker 集装箱非常轻便快速。由于容器只是运行在内核上的沙盒环境，它们占用的资源更少。您可以在几秒钟内创建并运行 Docker 容器，相比之下，虚拟机可能需要更长时间，因为它们每次都必须启动完整的虚拟操作系统。</p><p id="b52b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.<strong class="jp ir"> Docker Hub: </strong> Docker 用户也受益于 Docker Hub 日益丰富的生态系统，你可以把它想象成一个“Docker 图片的应用商店”Docker Hub 拥有数万张由社区创建的公共图片，随时可供使用。搜索符合您需求的图像非常容易，只需很少或不需要修改就可以下载和使用。</p><p id="4546" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.模块化和可伸缩性: Docker 使得将应用程序的功能分解到单独的容器中变得容易。例如，您可能在一个容器中运行 Postgres 数据库，在另一个容器中运行 Redis 服务器，而 Node.js 应用程序在另一个容器中运行。有了 Docker，将这些容器链接在一起创建应用程序变得更加容易，使得将来独立扩展或更新组件变得更加容易。</p></div><div class="ab cl kt ku hu kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ij ik il im in"><h1 id="fd9f" class="la lb iq bd lc ld ml lf lg lh mm lj lk ll mn ln lo lp mo lr ls lt mp lv lw lx bi translated">Docker 入门</h1><p id="14d7" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">前往 docker 网站，如果你使用的是 Windows 10 家庭版，你需要 Docker 工具箱。</p><p id="0b2e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦你成功安装了 Docker，让我们试着在它上面运行 ubuntu image 稍后会详细介绍。</p><p id="c0dd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在 Docker 允许你使用一个已经预先构建好的映像或者在一个已经存在的映像上构建。这个建立在现有图像上的建筑确实令人兴奋。</p><p id="9663" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以定制图像，只定制您需要的图像并对其进行处理。</p><p id="a1b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们开始研究 Dockerfile 之前，让我们确保我们的安装已经完成。</p><p id="f177" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">前往码头快速启动终端</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mq"><img src="../Images/3e4cd89630247b13f1b2f6db345282de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ca0KQ03nOaoRJDv_jV2x2Q.png"/></div></div><figcaption class="md me gj gh gi mf mg bd b be z dk">Docker Quick Start Terminal</figcaption></figure><p id="cf59" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了确保我们的设置配置正确，让我们运行 Docker 提供的默认映像。</p><pre class="kl km kn ko gt mv mk mw mx aw my bi"><span id="2ab5" class="mz lb iq mk b gy na nb l nc nd">docker pull hello-world</span></pre><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi ne"><img src="../Images/ae2d9b353f5b8c70d8dee21786249d8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gHNRs7KunLIeVU5AIwABGQ.png"/></div></div><figcaption class="md me gj gh gi mf mg bd b be z dk">docker pull command</figcaption></figure><p id="a60a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要查看您刚刚提取的图像，请键入以下命令:</p><pre class="kl km kn ko gt mv mk mw mx aw my bi"><span id="89d6" class="mz lb iq mk b gy na nb l nc nd">docker image ls</span></pre><p id="c79a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，此刻，你在等待，你好，Docker 中的世界</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mq"><img src="../Images/7636927e06574bd909d550c52ae7152c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h9e8FYdgUv1Hz8nE5q8IWQ.png"/></div></div><figcaption class="md me gj gh gi mf mg bd b be z dk">running the hello-world container</figcaption></figure><pre class="kl km kn ko gt mv mk mw mx aw my bi"><span id="1f2d" class="mz lb iq mk b gy na nb l nc nd">docker run hello-world</span></pre></div><div class="ab cl kt ku hu kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ij ik il im in"><h2 id="97d5" class="mz lb iq bd lc nf ng dn lg nh ni dp lk jy nj nk lo kc nl nm ls kg nn no lw np bi translated">Dockerfile —一切开始的地方</h2><p id="e7fa" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">Docker 是一个强大的工具，但是它的力量是通过使用称为<strong class="jp ir"> Dockerfiles </strong>的东西来利用的(如上所述)。</p><blockquote class="nq nr ns"><p id="023d" class="jn jo nt jp b jq jr js jt ju jv jw jx nu jz ka kb nv kd ke kf nw kh ki kj kk ij bi translated"><code class="fe mh mi mj mk b"><em class="iq">Dockerfile</em></code>是一个文本文档，包含用户可以在命令行上调用的所有命令，以组合一个图像。使用<code class="fe mh mi mj mk b"><em class="iq">docker build</em></code>,用户可以创建一个连续执行几个命令行指令的自动化构建。- Docker，Docker 文件参考</p></blockquote><p id="c765" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Docker 映像由只读层组成，每一层代表一条 Dockerfile 指令。这些层是堆叠的，每一层都是前一层的变化的增量。</p><p id="9cda" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当 Docker 容器启动时，需要告诉它做什么，它没有安装任何东西，它知道如何不做任何事情。真的没有。</p><p id="04e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Dockerfile 首先需要的是一个<strong class="jp ir">基础映像</strong>。基础映像告诉容器要安装什么作为它的操作系统——Ubuntu、RHEL、SuSE、Node、Java 等等。</p><p id="b2ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，您将提供设置说明。这些都是 Docker 容器需要知道的事情:环境变量、要安装的依赖项、文件所在的位置等等。</p><p id="cebc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，你必须告诉容器做什么。通常，它将运行安装说明中指定的应用程序的特定安装和命令。</p><h2 id="caa4" class="mz lb iq bd lc nf ng dn lg nh ni dp lk jy nj nk lo kc nl nm ls kg nn no lw np bi translated">在 Docker 上尝试 Ubuntu</h2><p id="9faa" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">这里有几个 docker 文件示例，包括解释每一行和每一层发生了什么的注释。</p><pre class="kl km kn ko gt mv mk mw mx aw my bi"><span id="faa2" class="mz lb iq mk b gy na nb l nc nd"># Get the base ubuntu 18.04 from Docker hub</span><span id="2820" class="mz lb iq mk b gy nx nb l nc nd"># Head to https://hub.docker.com/_/ubuntu for other variations</span><span id="2957" class="mz lb iq mk b gy nx nb l nc nd">FROM ubuntu:18.04</span><span id="5ec0" class="mz lb iq mk b gy nx nb l nc nd"># Get the necessary updates</span><span id="fc22" class="mz lb iq mk b gy nx nb l nc nd">RUN apt-get update</span><span id="1ee0" class="mz lb iq mk b gy nx nb l nc nd"># This ensures that the first directory that is opened once image is # build is /home</span><span id="ce3b" class="mz lb iq mk b gy nx nb l nc nd">WORKDIR /home</span></pre><p id="bf92" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将此文件保存为 Dockerfile。</p><p id="320f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在前往 DockerQuick 启动终端，确保当前目录和存储<em class="nt"> Dockerfile </em>的位置是相同的。</p><pre class="kl km kn ko gt mv mk mw mx aw my bi"><span id="77ff" class="mz lb iq mk b gy na nb l nc nd">docker build .</span></pre><p id="86e1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在当你这样做的时候，虽然 docker 创建了一个图像，但是你必须记住 docker 给它的随机名称，因为我们还没有给它命名。</p><pre class="kl km kn ko gt mv mk mw mx aw my bi"><span id="610f" class="mz lb iq mk b gy na nb l nc nd">docker build -t ubuntu1:latest .</span></pre><p id="1968" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，这确保了这个刚刚构建的映像被命名为 ubuntu1</p><pre class="kl km kn ko gt mv mk mw mx aw my bi"><span id="3baf" class="mz lb iq mk b gy na nb l nc nd">docker image ls</span></pre><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi ny"><img src="../Images/dbbe054fd7b67e65bd599ec791aaeb32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uULViLc3TSt-1552zdyyzg.png"/></div></div><figcaption class="md me gj gh gi mf mg bd b be z dk">Docker images</figcaption></figure><p id="eb9d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以看到，映像大小只有 111MB，相比之下，我们使用虚拟机时至少要分配 10GB。</p><p id="dc32" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还要注意，当我们在构建时没有<em class="nt"> -t </em>标签时，存储库名称和标签是 none。所以当我们试图使用这个图像时，我们需要通过图像 ID 来记住它。</p><p id="8ac4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nt"> -t </em>基本上是格式<em class="nt">储存库:标签</em></p><p id="5d53" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你忘记放置标签，docker 默认将其标记为<em class="nt"> latest。</em></p><p id="c726" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后</p><pre class="kl km kn ko gt mv mk mw mx aw my bi"><span id="813f" class="mz lb iq mk b gy na nb l nc nd">docker run --rm -it ubuntu1:latest</span></pre><p id="97d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nt"> — rm </em>确保容器运行后，立即删除。</p><p id="8717" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nt"> -it </em>因为我们想使用终端进行交互。</p><p id="81c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在 docker 终端中输入你在 Ubuntu 系统上输入的所有命令。</p><h1 id="b956" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">结论</h1><p id="da93" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">我希望你现在已经具备了在自己的系统上开始入侵 Docker 所需要的知识，并且能够意识到这个不可思议的工具的威力！</p></div><div class="ab cl kt ku hu kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ij ik il im in"><p id="3ebf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你喜欢这个，这里有第二部分关于 Python 开发的 Docker。</p><p id="4519" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以随时联系推特、领英、T21 或电子邮件。</p></div></div>    
</body>
</html>