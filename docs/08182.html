<html>
<head>
<title>5 Minute Guide to Detecting Holidays in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Python 检测假日的 5 分钟指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/5-minute-guide-to-detecting-holidays-in-python-c270f8479387?source=collection_archive---------3-----------------------#2019-11-09">https://towardsdatascience.com/5-minute-guide-to-detecting-holidays-in-python-c270f8479387?source=collection_archive---------3-----------------------#2019-11-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="572c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您决定深入研究数据分析，例如，想要分析购买趋势，您可能想要在数据集中构造一个新属性，该属性只有两种可能的结果-0 或 1-是假日，不是假日。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/7c915e715481564a3487c51001a8fe39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*k6g0wea4MS5CYHbd"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by <a class="ae le" href="https://unsplash.com/@sapegin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Artem Sapegin</a> on <a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8d48" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">花点时间想想为什么这个派生变量可能有用。你可能不会发现假期本身有更大的购买量，但假期前一周的销售情况如何呢？</p><p id="f61d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="lf">一整另一种动物，是不是？</em>T3】</strong></p><p id="5d93" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">无论如何，在今天这个相当简短的帖子中，我想讨论一下我前段时间发现的一个 Python 库—<strong class="js iu"><em class="lf"/></strong>—是的，就是这个名字。它允许你获得特定年份和特定国家的主要节日的日期和名称。你可能想知道它现在支持多少个国家，答案肯定会让你大吃一惊——大约 50 个左右(<em class="lf">能够为一些国家指定个别地区</em>)。</p><p id="95ea" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可以在这里找到完整的列表:</p><div class="lg lh gp gr li lj"><a href="https://pypi.org/project/holidays/" rel="noopener  ugc nofollow" target="_blank"><div class="lk ab fo"><div class="ll ab lm cl cj ln"><h2 class="bd iu gy z fp lo fr fs lp fu fw is bi translated">假日</h2><div class="lq l"><h3 class="bd b gy z fp lo fr fs lp fu fw dk translated">一个快速、高效的 Python 库，用于动态生成国家、省和州特定的假日集。它…</h3></div><div class="lr l"><p class="bd b dl z fp lo fr fs lp fu fw dk translated">pypi.org</p></div></div><div class="ls l"><div class="lt l lu lv lw ls lx ky lj"/></div></div></a></div><p id="0357" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本文的目标是对您最常用的库和展示函数进行一些探索。我们将创建 2019 年全年的日期列表，并从那里声明另一个列，如果那天(<em class="lf">或</em>)是假日，则该列的值为 1，否则为 0。</p><p id="69d2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在进入代码之前，您需要安装库，因此启动<strong class="js iu">终端</strong>并执行以下命令:</p><pre class="kp kq kr ks gt ly lz ma mb aw mc bi"><span id="baf5" class="md me it lz b gy mf mg l mh mi">pip install holidays</span></pre><p id="3640" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">T15】一切都好吗？我的意思是应该的，看在上帝的份上，这只是一个小小的安装。不过，现在让我们做一些真正的事情。</strong></p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="98aa" class="mq me it bd mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm bi translated">进口货</h1><p id="482f" class="pw-post-body-paragraph jq jr it js b jt nn jv jw jx no jz ka kb np kd ke kf nq kh ki kj nr kl km kn im bi translated">屁股总是，你的笔记本应该从进口开始。这里没什么特别的，只有<em class="lf"> Numpy </em>，<em class="lf">熊猫</em>，<em class="lf">日期时间</em>，还有耶，新安装的<em class="lf">节假日</em>库:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ns"><img src="../Images/9e6ce9eebd248c9aabe0bae51a05280a.png" data-original-src="https://miro.medium.com/v2/resize:fit:388/format:webp/1*JfaFxZXwEpwqm_E02uGiNA.png"/></div></div></figure><p id="e2b0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可能不需要 Numpy 跟着来，但是我总是喜欢进口的。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="77a2" class="mq me it bd mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm bi translated">提取假期</h1><p id="1310" class="pw-post-body-paragraph jq jr it js b jt nn jv jw jx no jz ka kb np kd ke kf nq kh ki kj nr kl km kn im bi translated">如果你打开<a class="ae le" href="https://pypi.org/project/holidays/" rel="noopener ugc nofollow" target="_blank"> Holidays library </a>的文档并向下滚动一点，你会看到 50 多个受支持国家的列表。</p><p id="c4c9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在提取假期非常容易，您需要循环查找感兴趣国家的假期，并指定感兴趣的年份:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/3ab6d779fbbfc79a41baf2d1efb6028f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*YdwP2kvXzz_7EA5rEdOUDg.png"/></div></figure><p id="31c9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">是啊，就这么简单。然而，获得的日期不是期望的格式。大多数情况下，您只关心日期本身，而不关心它代表什么假日，因为您最喜欢在数据集中有一个二进制属性，如果假日存在，则值为 1，否则为 0。</p><p id="2ae9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">好消息是，提取日期的字符串表示非常容易:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/64e4c8101c738f86faf3e93e021990b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*aFDJHz1VPVBKVk8k8ZxGow.png"/></div></figure><p id="6f21" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在让我们将所有的字符串表示存储在一个单独的列表中——稍后会派上用场:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nv"><img src="../Images/70157f68e93acb37985d673beebad2ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VHcz5LCPTzqdGAugmVRs8w.png"/></div></div></figure><p id="c41c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">太好了。现在，我们可以构建一个<strong class="js iu">熊猫</strong> DataFrame 对象，并在这些假期中尽情玩耍。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="8e39" class="mq me it bd mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm bi translated">将一切联系在一起</h1><p id="89f2" class="pw-post-body-paragraph jq jr it js b jt nn jv jw jx no jz ka kb np kd ke kf nq kh ki kj nr kl km kn im bi translated">对于熊猫，构建日期列表相当简单，比如说 2019 年全年:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/94c4156a05268c2cefd1bb396d1393ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*zxQEA00746ZDk1yoY2A25Q.png"/></div></figure><p id="b2a0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">太好了。现在，我们可以从这些日期构建一个 DataFrame 对象—让我们将它们放入日期列:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/92809633e49b03fcbd6b06bfae401869.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/format:webp/1*AIz8dOymGkfphz7BIcow9w.png"/></div></figure><p id="941a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在有一个小问题。日期看起来是以字符串格式存储的，就像我们的<strong class="js iu"> <em class="lf"> us_holidays </em> </strong>列表一样，但事实并非如此。这是一个<strong class="js iu">时间戳</strong>对象。下一个单元格验证了这一说法:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/b4e7e9fbc8f8ce3e01537dd22bc387ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*gpEmlxSAtYa4oM62G2j_MQ.png"/></div></figure><p id="3fe6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，让我们探索如何只提取日期作为字符串，并丢弃时间信息。您需要将时间戳转换成一个字符串，然后分割该字符串，只保留左边的部分(<em class="lf">日期信息</em>)。这是一件相当简单的事情:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/84caf01e6401a90bb37b4b6af58baa87.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*jtNqW2pcf02wCdWjYLN-SQ.png"/></div></figure><p id="b4a4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在我们可以使用<a class="ae le" rel="noopener" target="_blank" href="/a-comprehensive-guide-to-list-comprehensions-f15bae4fd0c3">列表理解</a>的能力来构建一个二进制列表，如果日期是假日，则值为 1，否则为 0。我决定将所有内容打包到<strong class="js iu"> <em class="lf"> print() </em> </strong>中，并指定一个不同的结束参数，这样整个列表就可以显示在屏幕上:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oa"><img src="../Images/ba1ffb693c2fce641987c489c115bfa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I1qGYLADqhfwsCjiZTO2tQ.png"/></div></div></figure><p id="78a5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，最后，根据同样的原则，您可以将该列表作为一列添加到之前创建的 Pandas 数据帧中:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/a3a7c275af0cbae0937d0fb893792f03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1346/format:webp/1*tdeltCKW9VufmZ4Ih6HYow.png"/></div></figure><p id="749c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你差不多完成了。你现在可以继续你的分析了。当然，您拥有的数据集将会有更多的属性，所以这个新的二进制列对于分析可能会很方便。</p><p id="34cb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感谢您的阅读，我希望您能在工作流程中利用这些知识。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="1ecb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="lf">喜欢这篇文章吗？成为</em> <a class="ae le" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="lf">中等会员</em> </a> <em class="lf">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="lg lh gp gr li lj"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="lk ab fo"><div class="ll ab lm cl cj ln"><h2 class="bd iu gy z fp lo fr fs lp fu fw is bi translated">通过我的推荐链接加入 Medium-Dario rade ci</h2><div class="lq l"><h3 class="bd b gy z fp lo fr fs lp fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="lr l"><p class="bd b dl z fp lo fr fs lp fu fw dk translated">medium.com</p></div></div><div class="ls l"><div class="oc l lu lv lw ls lx ky lj"/></div></div></a></div></div></div>    
</body>
</html>