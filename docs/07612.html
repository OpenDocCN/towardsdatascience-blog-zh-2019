<html>
<head>
<title>Deep Reinforcement Learning for Drones in 3D realistic environments</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">3D 现实环境中无人机的深度强化学习</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/deep-reinforcement-learning-for-drones-in-3d-realistic-environments-36821b6ee077?source=collection_archive---------6-----------------------#2019-10-23">https://towardsdatascience.com/deep-reinforcement-learning-for-drones-in-3d-realistic-environments-36821b6ee077?source=collection_archive---------6-----------------------#2019-10-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="89b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一个完整的代码，让您开始使用虚幻游戏引擎和 Python 在逼真的环境中实现深度强化学习。</p><blockquote class="kl km kn"><p id="4ea4" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><strong class="jp ir">注 1: </strong>文中提到的 Github 资源库 DRLwithTL 已经过时。请使用以下更详细的存储库，而不是 https://github.com/aqeelanwar/PEDRA 的<a class="ae ks" href="https://github.com/aqeelanwar/PEDRA" rel="noopener ugc nofollow" target="_blank"/></p><p id="5e69" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><strong class="jp ir">注 2: </strong>关于无人机强化学习更详细的文章可以在<a class="ae ks" rel="noopener" target="_blank" href="/pedra-programmable-engine-for-drone-reinforcement-learning-applications-5b04423a42dd">这里</a>找到</p></blockquote><h1 id="3b56" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">概述:</h1><p id="aec5" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">上周，我公开了一个 GitHub 知识库，其中包含一个独立的详细 python 代码，使用虚幻游戏引擎在 3D 模拟环境中的无人机上实现深度强化学习。我决定在本文中介绍一个详细的文档。3D 环境在 Epic Unreal 游戏引擎上制作，Python 用于与环境交互，并使用 TensorFlow 进行深度强化学习。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi lw"><img src="../Images/2517839bf9439e86ad0977afed494a79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RbojhDWagOURQMYtoyRaJQ.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk">Drone navigating in a 3D indoor environment.[4]</figcaption></figure><p id="61f4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文结束时，您的机器上将拥有一个工作平台，能够在逼真的无人机环境中实现深度强化学习。你将能够</p><ul class=""><li id="1ed0" class="mm mn iq jp b jq jr ju jv jy mo kc mp kg mq kk mr ms mt mu bi translated">设计您的定制环境</li><li id="847a" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">将它与您的 Python 代码连接起来</li><li id="5541" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">使用/修改 DRL 的现有 Python 代码</li></ul><p id="5bca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于本文，基本目标将是无人机自主导航。没有开始或结束位置，而是无人机必须尽可能长时间地导航，而不会撞到障碍物。代码可以修改为任何用户定义的目标。</p><p id="5851" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完整的模拟包括三个主要部分</p><ul class=""><li id="ab92" class="mm mn iq jp b jq jr ju jv jy mo kc mp kg mq kk mr ms mt mu bi translated"><strong class="jp ir"> 3D 模拟平台</strong> —创建并运行模拟环境</li><li id="668c" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated"><strong class="jp ir">接口平台</strong> —模拟无人机物理以及虚幻和 Python 之间的接口</li><li id="6484" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated"><strong class="jp ir"> DRL python 代码平台</strong> —包含基于 TensorFlow 的 DRL 代码</li></ul><p id="dc7e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这三个平台有多种选择。但是对于本文，我们将选择以下内容</p><ul class=""><li id="7a7e" class="mm mn iq jp b jq jr ju jv jy mo kc mp kg mq kk mr ms mt mu bi translated">3D 仿真平台— <strong class="jp ir">虚幻引擎【1】</strong></li><li id="42e4" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">接口平台— <strong class="jp ir"> AirSim [2] </strong></li><li id="1980" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">DRL python 代码平台— <strong class="jp ir"> DRLwithTL GitHub 库[3] </strong></li></ul><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi na"><img src="../Images/ae27dc3c279adf493dd64a40f843e521.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nDoArAovBobKo0CE1LmkyA.png"/></div></div></figure></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><p id="3b08" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本文的其余部分将分为三个步骤</p><ul class=""><li id="7994" class="mm mn iq jp b jq jr ju jv jy mo kc mp kg mq kk mr ms mt mu bi translated">步骤 1 —安装平台</li><li id="a121" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">步骤 2-运行 python 代码</li><li id="b0dc" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">步骤 3 —控制/修改代码参数</li></ul><h1 id="6a82" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">步骤 1 —安装三个平台:</h1><p id="b833" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">建议<a class="ae ks" rel="noopener" target="_blank" href="/setting-up-python-platform-for-machine-learning-projects-cfd85682c54b">为这个项目创建一个新的虚拟环境</a>并安装依赖项。可以采取以下步骤来下载这些平台的入门指南。</p><ol class=""><li id="94c0" class="mm mn iq jp b jq jr ju jv jy mo kc mp kg mq kk ni ms mt mu bi translated"><strong class="jp ir">克隆存储库:</strong>包含 DRL 代码的存储库可以使用</li></ol><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="b491" class="no ku iq nk b gy np nq l nr ns">git clone https://github.com/aqeelanwar/DRLwithTL.git</span></pre><p id="12c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.<strong class="jp ir">下载 Alexnet 的 Imagenet 权重:</strong>DNN 在初始化时使用 AlexNet 的 Imagenet 学习权重，而不是随机权重。这给了 DNN 一个更好的训练起点，并有助于趋同。</p><p id="6d7c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以下链接可用于下载 imagenet.npy 文件。</p><p id="34d0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae ks" href="https://drive.google.com/open?id=1Ei4mCzjfLY5ql6ILIUHaCtAR2XF6BtAM" rel="noopener ugc nofollow" target="_blank">下载 imagenet.npy </a></p><p id="75de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下载完成后，在 DRLwithTL 根文件夹中创建一个文件夹<em class="ko">‘models’</em>，将下载的文件<em class="ko"> </em>放在那里。</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="a2d9" class="no ku iq nk b gy np nq l nr ns">models/imagenet.py</span></pre><p id="3c1d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.<strong class="jp ir">安装需要的包:</strong>提供的 requirements.txt 文件可以用来安装所有需要的包。使用以下命令</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="2a49" class="no ku iq nk b gy np nq l nr ns">cd DRLwithTL<br/>pip install -r requirements.txt</span></pre><p id="b7a7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将在激活的 python 环境中安装所需的包。</p><p id="4609" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.<strong class="jp ir">安装 Epic 虚幻引擎:</strong>您可以按照下面链接中的指南在您的平台上安装虚幻引擎</p><p id="5928" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae ks" href="https://docs.unrealengine.com/en-US/GettingStarted/Installation/index.html" rel="noopener ugc nofollow" target="_blank">安装虚幻引擎的说明</a></p><p id="147c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.<strong class="jp ir">安装 AirSim: </strong> AirSim 是微软为代理(无人机和汽车)开发的虚幻引擎开源插件，具有物理和视觉上的逼真模拟。为了在 Python 和模拟环境之间建立接口，需要安装 AirSim。可以从下面的链接下载</p><p id="9d76" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae ks" href="https://github.com/microsoft/airsim" rel="noopener ugc nofollow" target="_blank">安装 AirSim 的说明</a></p><p id="3ad6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦一切安装妥当，我们就可以进入运行代码的下一步了。</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><h1 id="1a2c" class="kt ku iq bd kv kw nt ky kz la nu lc ld le nv lg lh li nw lk ll lm nx lo lp lq bi translated">步骤 2 —运行 DRLwithTL-Sim 代码:</h1><p id="0013" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">一旦下载并运行了所需的包和软件，就可以采取以下步骤来运行代码</p><h2 id="96b8" class="no ku iq bd kv ny nz dn kz oa ob dp ld jy oc od lh kc oe of ll kg og oh lp oi bi translated">创建/下载模拟环境</h2><p id="591e" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">您可以使用虚幻引擎手动<a class="ae ks" href="https://docs.unrealengine.com/en-US/Resources/index.html" rel="noopener ugc nofollow" target="_blank">创建您的环境</a>，也可以从下面的链接下载一个示例环境并运行它。</p><p id="cfa6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae ks" href="https://drive.google.com/open?id=1u5teth6l4JW2IXAkZAg1CbDGR6zE-v6Z" rel="noopener ugc nofollow" target="_blank">下载环境</a></p><p id="5c5f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以下环境可通过上面的链接下载</p><ul class=""><li id="b048" class="mm mn iq jp b jq jr ju jv jy mo kc mp kg mq kk mr ms mt mu bi translated">室内长环境</li><li id="6e10" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">室内扭转环境</li><li id="b973" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">室内通风环境</li><li id="1141" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">室内技术环境</li><li id="5eb0" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">室内金字塔环境</li><li id="6d1a" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated">室内冰箱环境</li></ul><p id="ee69" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上面的链接将帮助您下载 64 位 windows 环境的打包版本。运行可执行文件(。exe)来启动环境。如果您在运行环境时遇到问题，请确保 Documents/AirSim 中的<strong class="jp ir"> <em class="ko"> settings.json </em> </strong>文件已经被<a class="ae ks" href="https://github.com/microsoft/AirSim/blob/master/docs/settings.md" rel="noopener ugc nofollow" target="_blank">正确配置</a>。您可以尝试使用 F、M 和反斜杠键来更改环境中的相机视图。此外，键 1、2、3 和 0 可用于查看 FPV、分割图、深度图和切换子窗口视图。</p><h2 id="7281" class="no ku iq bd kv ny nz dn kz oa ob dp ld jy oc od lh kc oe of ll kg og oh lp oi bi translated">编辑配置文件(可选)</h2><p id="4ccf" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">DRL 模拟的 RL 参数可以使用提供的配置文件进行设置，并在最后一节进行说明。</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="201c" class="no ku iq nk b gy np nq l nr ns">cd DRLwithTL\configs<br/>notepad config.cfg                <strong class="nk ir">(# for Windows)</strong></span></pre><h2 id="8fb5" class="no ku iq bd kv ny nz dn kz oa ob dp ld jy oc od lh kc oe of ll kg og oh lp oi bi translated">运行 Python 代码</h2><p id="dd7c" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">可以使用以下命令启动 DRL 代码</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="ce76" class="no ku iq nk b gy np nq l nr ns">cd DRLwithTL<br/>python main.py</span></pre><p id="eafe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行<strong class="jp ir"> <em class="ko"> main.py </em> </strong>执行以下步骤</p><ol class=""><li id="366a" class="mm mn iq jp b jq jr ju jv jy mo kc mp kg mq kk ni ms mt mu bi translated">尝试加载配置文件</li><li id="c603" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk ni ms mt mu bi translated">尝试连接虚幻引擎(<em class="ko">室内 _ 长</em>环境必须运行，python 才能与环境连接，否则将出现连接拒绝警告——除非建立连接，否则代码不会继续运行)</li><li id="a2e1" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk ni ms mt mu bi translated">尝试创建 DNN 的两个实例(使用双 DQN)并用选定的权重初始化它们。</li><li id="2913" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk ni ms mt mu bi translated">尝试为用户界面初始化 Pygame 屏幕</li><li id="e00d" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk ni ms mt mu bi translated">启动 DRL 算法</li></ol><p id="5e01" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此时，可以看到无人机在环境中四处移动，收集数据点。下面的框图显示了所使用的 DRL 算法。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi oj"><img src="../Images/fa274f3e65002b3c5f0a69ad1db6b4d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wrnb5P5IgevFY91yBt6iiA.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk">Block diagram of DRL Training and associated segments</figcaption></figure><h2 id="9f6b" class="no ku iq bd kv ny nz dn kz oa ob dp ld jy oc od lh kc oe of ll kg og oh lp oi bi translated">使用 tensorboard 查看学习参数</h2><p id="9f29" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">在模拟过程中，可以在 tensorboard 上查看 RL 参数，如ε、学习率、平均 Q 值、损耗和返回。张量板日志文件的路径取决于配置文件中设置的<em class="ko">环境类型</em>、<em class="ko">环境名称、</em>和<em class="ko">训练类型</em>，由下式给出</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="a01b" class="no ku iq nk b gy np nq l nr ns">models/trained/&lt;env_type&gt;/&lt;env_name&gt;/Imagenet/   <strong class="nk ir"># Generic path</strong><br/>models/trained/Indoor/indoor_long/Imagenet/      <strong class="nk ir"># Example path</strong></span></pre><p id="145d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦确定了日志文件的存储位置，就可以在终端上使用以下命令来激活 tensorboard。</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="a6ba" class="no ku iq nk b gy np nq l nr ns">cd models/trained/Indoor/indoor_long/Imagenet/<br/>tensorboard --logdir &lt;train_type&gt;                <strong class="nk ir"># Generic</strong><br/>tensorboard --logdir e2e                         <strong class="nk ir"># Example</strong></span></pre><p id="3ce9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">终端将显示可以在任何浏览器上打开的本地 URL，并且 tensorboard 显示器将在运行时显示 DRL 参数。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ok"><img src="../Images/75dcd14ec9ad424333d4b2895b4b018e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mo3ERF_SJusO24QgY_0XRw.png"/></div></div></figure><h2 id="0196" class="no ku iq bd kv ny nz dn kz oa ob dp ld jy oc od lh kc oe of ll kg og oh lp oi bi translated">使用 PyGame 屏幕的运行时控件</h2><p id="723b" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">众所周知，DRL 渴望数据。对于复杂的任务，如仅使用前置摄像头在逼真的环境中进行无人机自主导航，在 DRL 收敛之前，模拟可能需要数小时的训练(通常在 GTX1080 GPU 上需要 8 到 12 小时)。在模拟过程中，如果您觉得需要更改一些 DRL 参数，可以使用模拟过程中出现的 PyGame 屏幕来完成。这可以通过以下步骤完成</p><ol class=""><li id="22f9" class="mm mn iq jp b jq jr ju jv jy mo kc mp kg mq kk ni ms mt mu bi translated">更改配置文件以反映修改(例如降低学习率)并保存。</li><li id="1ed1" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk ni ms mt mu bi translated">选择 Pygame 屏幕，点击<strong class="jp ir"> <em class="ko">【退格】</em> </strong>。这将暂停模拟。</li><li id="b3d1" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk ni ms mt mu bi translated">按下<strong class="jp ir"> ' <em class="ko"> L' </em> </strong>键。这将加载更新的参数，并将其打印在终端上。</li><li id="c0f7" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk ni ms mt mu bi translated">点击<strong class="jp ir"> <em class="ko">【退格】</em> </strong>键恢复模拟。</li></ol><p id="b283" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在模拟只更新了学习率。其他变量也可以通过编辑模块 check_user_input 的 aux_function.py 文件进行更新。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ol"><img src="../Images/5318c5a51cf280e03cc06723859b21a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NRxttgGU7mWpK3sABAgN7w.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk">Editing check_user_input module to update other parameters too</figcaption></figure><p id="c796" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第 187 行的 cfg 变量有所有更新的参数，你只需要把它赋给相应的变量并返回值就可以激活它了。</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><h1 id="1531" class="kt ku iq bd kv kw nt ky kz la nu lc ld le nv lg lh li nw lk ll lm nx lo lp lq bi translated">步骤 3 —控制/修改 DRLwithTL-Sim 中的参数:</h1><p id="dc61" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">该代码使您能够控制</p><ol class=""><li id="4c5b" class="mm mn iq jp b jq jr ju jv jy mo kc mp kg mq kk ni ms mt mu bi translated">更改 DRL 配置</li><li id="0590" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk ni ms mt mu bi translated">改变深度神经网络(DNN)</li><li id="aacd" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk ni ms mt mu bi translated">修改无人机行动空间</li></ol><h2 id="41e7" class="no ku iq bd kv ny nz dn kz oa ob dp ld jy oc od lh kc oe of ll kg og oh lp oi bi translated">1.更改 DRL 配置:</h2><p id="ab11" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">提供的配置文件可用于在开始模拟之前设置 DRL 参数。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi om"><img src="../Images/dfc5a8e93d7cd9c2c083ea8ddcd153c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UIF_R8Ye3bNQnqbLZ6l_xQ.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk">Config file used for DRL and sample values</figcaption></figure><ul class=""><li id="6ecd" class="mm mn iq jp b jq jr ju jv jy mo kc mp kg mq kk mr ms mt mu bi translated"><strong class="jp ir"> num_actions: </strong>动作空间中动作的数量。该代码通过将摄像机帧划分为 sqrt(num _ actions)* sqrt(num _ actions)的网格来使用基于感知的动作空间[4]。</li><li id="5452" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated"><strong class="jp ir"> train_type: </strong>决定在 DNN 训练的层数。支持的值为 e2e、最后 4 个、最后 3 个和最后 2 个。更多的值可以被删除</li><li id="873c" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated"><strong class="jp ir"> wait_before_train: </strong>该参数用于设置训练应该开始的迭代。模拟在开始训练阶段之前收集了这么多的数据点。</li><li id="96c0" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated"><strong class="jp ir">最大迭代次数:</strong>确定用于 DRL 的最大迭代次数。当这些迭代完成后，模拟停止。</li><li id="4f1a" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated"><strong class="jp ir"> buffer_len: </strong>用于设置体验回放缓冲区的大小。模拟继续收集数据点，并开始将它们存储在重放缓冲区中。从该重放缓冲器中采样数据点并用于训练。</li><li id="e8c7" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated"><strong class="jp ir"> batch_size: </strong>决定一次训练迭代的批量大小。</li><li id="c937" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated"><strong class="jp ir">ε_ saturation:</strong>ε贪心法用于从勘探阶段过渡到开采阶段。当迭代次数接近该值时，ε接近 0.9，即 90%的动作是通过 DNN(利用)预测的，只有 10%是随机的(探索)</li><li id="0d01" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated"><strong class="jp ir"> crash_threshold </strong>:该值与深度图一起使用，确定无人机何时被视为虚拟坠毁。当到深度图上中心动态窗口中最近障碍物的平均深度低于该值时，奖励-1 被分配给数据元组。</li><li id="a88f" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated"><strong class="jp ir"> Q_clip: </strong>如果设置为真，Q 值在超出某个值时会被剪切。有助于 DRL 的融合。</li><li id="bdc4" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated"><strong class="jp ir"> train_interval: </strong>该值决定训练的频率。例如，如果设置为 3，则每 3 次迭代后进行训练。</li><li id="3145" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated"><strong class="jp ir"> update_target_interval: </strong>模拟使用双 DQN 方法来帮助收敛 DRL 损失。update_target_interval 确定模拟在两个 Q 网络之间转换的频率。</li><li id="8644" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated"><strong class="jp ir"> dropout_rate: </strong>确定连接被丢弃的频率，以避免过度拟合。</li><li id="0a1a" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated"><strong class="jp ir"> switch_env_steps: </strong>决定无人机改变其初始位置的频率。这些初始位置设置在相应环境名称下的 environments/initial _ positions . py 中。</li><li id="89ec" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk mr ms mt mu bi translated"><strong class="jp ir">ε_ 模型:</strong>线性或指数</li></ul><h2 id="5881" class="no ku iq bd kv ny nz dn kz oa ob dp ld jy oc od lh kc oe of ll kg og oh lp oi bi translated">2.更改 DNN 拓扑:</h2><p id="b06b" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">可在以下 python 文件中修改用于将 Q 值映射到其状态的 DNN。</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="ffc6" class="no ku iq nk b gy np nq l nr ns">network/network.py       #Location of DNN</span></pre><p id="7f95" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不同的 DNN 拓扑可以在这个 python 文件中定义为一个类。代码带有三个不同版本的修改后的 AlexNet 网络。如果需要，可以根据用户需要定义更多的网络。一旦定义了一个新的网络，可以修改<strong class="jp ir"><em class="ko">net owork/agent . py</em></strong>文件，在第 30 行使用所需的网络，如下所示</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="on oo l"/></div></figure><h2 id="7dbb" class="no ku iq bd kv ny nz dn kz oa ob dp ld jy oc od lh kc oe of ll kg og oh lp oi bi translated">3.修改无人机行动空间:</h2><p id="ec73" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">当前版本的代码支持基于感知的动作空间。更改配置文件中的 num_actions 参数会更改前置摄像头被分成的箱数。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi op"><img src="../Images/e4e09fe06c60ce8df17814fae0e7a8a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b7aAmys0CBfElK6TAOjTxw.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk">Perception-based action space — Default action space used in the DRLwithTL code [4]</figcaption></figure><p id="e76e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果需要使用完全不同类型的动作空间，用户可以通过修改以下模块来定义它</p><pre class="lx ly lz ma gt nj nk nl nm aw nn bi"><span id="b402" class="no ku iq nk b gy np nq l nr ns"><strong class="nk ir">Module:</strong>    take_action<br/><strong class="nk ir">Location: </strong> network/agent.py</span></pre><p id="cf77" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果修改，这个模块应该能够将动作号(比如 0，1，2，…，num_actions)映射到无人机的相应偏航和俯仰值。</p><h1 id="26ba" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">总结:</h1><p id="3955" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">本文旨在让您在真实的 3D 环境中开始使用深度强化学习平台的工作平台。文章还提到了可以根据用户需求修改的代码部分。工作中的完整代码可以在文献[4]中看到。</p><h2 id="0ba9" class="no ku iq bd kv ny nz dn kz oa ob dp ld jy oc od lh kc oe of ll kg og oh lp oi bi translated">参考资料:</h2><ol class=""><li id="6502" class="mm mn iq jp b jq lr ju ls jy oq kc or kg os kk ni ms mt mu bi translated"><a class="ae ks" href="https://www.unrealengine.com" rel="noopener ugc nofollow" target="_blank">https://www.unrealengine.com</a></li><li id="7986" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk ni ms mt mu bi translated"><a class="ae ks" href="https://github.com/microsoft/airsim" rel="noopener ugc nofollow" target="_blank">https://github.com/microsoft/airsim</a></li><li id="e640" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk ni ms mt mu bi translated"><a class="ae ks" href="https://github.com/aqeelanwar/DRLwithTL.git" rel="noopener ugc nofollow" target="_blank">https://github.com/aqeelanwar/DRLwithTL.git</a></li><li id="a9a5" class="mm mn iq jp b jq mv ju mw jy mx kc my kg mz kk ni ms mt mu bi translated"><a class="ae ks" href="http://arxiv.org/abs/1910.05547" rel="noopener ugc nofollow" target="_blank">http://arxiv.org/abs/1910.05547</a></li></ol></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><p id="5f06" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果这篇文章对你有帮助，欢迎鼓掌、分享和回复。如果想了解更多关于机器学习和数据科学的知识，请关注我@<a class="ot ou ep" href="https://medium.com/u/a7cc4f201fb5?source=post_page-----36821b6ee077--------------------------------" rel="noopener" target="_blank"><strong class="jp ir">Aqeel an war</strong></a><strong class="jp ir">或者在</strong><a class="ae ks" href="https://www.linkedin.com/in/aqeelanwarmalik/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="ko">LinkedIn</em></strong></a><strong class="jp ir"><em class="ko">上与我联系。</em> </strong></p></div></div>    
</body>
</html>