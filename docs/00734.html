<html>
<head>
<title>A Comprehensive Guide to Data Visualisation in R for Beginners</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">面向初学者的 R 语言数据可视化综合指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-guide-to-data-visualisation-in-r-for-beginners-ef6d41a34174?source=collection_archive---------1-----------------------#2019-02-04">https://towardsdatascience.com/a-guide-to-data-visualisation-in-r-for-beginners-ef6d41a34174?source=collection_archive---------1-----------------------#2019-02-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0f1d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">R 可视化功能概述。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b202dde7142f6649cd832942207e80c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gIGJBUrUmJWR6TEq"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@firmbee?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">William Iven</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><blockquote class="kz la lb"><p id="785c" class="lc ld le lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">注意:文章是旧的，许多没有反映 R 包的最新变化</p></blockquote></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="3b6a" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">当今世界充满了数据，我们必须正确地分析数据，以获得有意义的见解。数据可视化是一个重要的工具，可以从数据中挖掘出可能的关键见解。如果分析的结果没有被恰当地可视化，它们将不会被有效地传达给期望的受众。</p><p id="6232" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">在本教程中，我们将学习如何使用 R 统计语言来分析和显示数据。我们将从基本的情节开始，然后在文章的后面继续讨论更高级的情节。</p><h1 id="976f" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">目录</h1><ul class=""><li id="2788" class="nb nc it lf b lg nd lj ne mg nf mh ng mi nh ly ni nj nk nl bi translated"><a class="ae ky" href="https://medium.com/p/ef6d41a34174/#65f4" rel="noopener">R 简介</a></li><li id="50af" class="nb nc it lf b lg nm lj nn mg no mh np mi nq ly ni nj nk nl bi translated"><a class="ae ky" href="https://medium.com/p/ef6d41a34174/#c517" rel="noopener">基础剧情入门</a></li><li id="8d73" class="nb nc it lf b lg nm lj nn mg no mh np mi nq ly ni nj nk nl bi translated"><a class="ae ky" href="https://medium.com/p/ef6d41a34174/#0689" rel="noopener">R 中的可视化库</a></li><li id="cb0c" class="nb nc it lf b lg nm lj nn mg no mh np mi nq ly ni nj nk nl bi translated"><a class="ae ky" href="https://medium.com/p/ef6d41a34174/#e672" rel="noopener">可视化 R 中的地理数据</a></li><li id="6885" class="nb nc it lf b lg nm lj nn mg no mh np mi nq ly ni nj nk nl bi translated"><a class="ae ky" href="https://medium.com/p/ef6d41a34174/#8b3f" rel="noopener">结论</a></li></ul></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="ff94" class="mj mk it bd ml mm nr mo mp mq ns ms mt jz nt ka mv kc nu kd mx kf nv kg mz na bi translated">先决条件</h1><p id="9769" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated">对 R 及其语法的基本熟悉将使您很容易入门。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="65f4" class="mj mk it bd ml mm nr mo mp mq ns ms mt jz nt ka mv kc nu kd mx kf nv kg mz na bi translated">R 简介</h1><h2 id="3838" class="nz mk it bd ml oa ob dn mp oc od dp mt mg oe of mv mh og oh mx mi oi oj mz ok bi translated">概观</h2><p id="b9fc" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated"><a class="ae ky" href="https://www.r-project.org/about.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lf iu"> R </strong> </a>是一个统计计算和图形的语言和环境。当涉及到创建可视化时，r 也非常灵活和易于使用。它的功能之一是用最少的代码生成高质量的地块。</p><h2 id="23b7" class="nz mk it bd ml oa ob dn mp oc od dp mt mg oe of mv mh og oh mx mi oi oj mz ok bi translated">装置</h2><p id="ee71" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated">我们将简要回顾一下安装 R:</p><ol class=""><li id="3c27" class="nb nc it lf b lg lh lj lk mg ol mh om mi on ly oo nj nk nl bi translated">进入<a class="ae ky" href="https://www.r-project.org/" rel="noopener ugc nofollow" target="_blank"> R 主页</a>选择<strong class="lf iu">曲柄</strong>。<br/> <strong class="lf iu"> CRAN </strong>是—综合 R 档案网的缩写。它是包含 R 发行版、软件包和文档的站点的集合。</li><li id="76f5" class="nb nc it lf b lg nm lj nn mg no mh np mi nq ly oo nj nk nl bi translated">选择离你最近的地点。</li><li id="5f4f" class="nb nc it lf b lg nm lj nn mg no mh np mi nq ly oo nj nk nl bi translated">根据您的操作系统下载并安装 R。</li></ol><p id="06e5" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated"><em class="le">或者，您可以在 base R GUI 上使用</em><a class="ae ky" href="http://www.rstudio.com/" rel="noopener ugc nofollow" target="_blank"><em class="le">R studio</em></a><em class="le">。</em></p><h2 id="a98e" class="nz mk it bd ml oa ob dn mp oc od dp mt mg oe of mv mh og oh mx mi oi oj mz ok bi translated">启动</h2><p id="450c" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated">下载并安装 R 后，您可以从应用程序文件夹(MacOS)或桌面图标(Windows)启动它。只需输入以下命令来检查 R 是否已经正确安装并正在运行。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="60c4" class="nz mk it oq b gy ou ov l ow ox">&gt; 1<br/>1<br/>&gt; ‘hello World’<br/>hello world</span></pre><h2 id="5399" class="nz mk it bd ml oa ob dn mp oc od dp mt mg oe of mv mh og oh mx mi oi oj mz ok bi translated">载入数据</h2><p id="b2ea" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated">数据集既可以是内置的，也可以从 r。</p><ul class=""><li id="36a2" class="nb nc it lf b lg lh lj lk mg ol mh om mi on ly ni nj nk nl bi translated"><strong class="lf iu">内置数据集</strong>指的是 r 中已经提供的数据集。我们将使用一个这样的数据集，称为<strong class="lf iu">空气质量</strong>数据集，它与 1973 年 5 月至 9 月纽约的每日空气质量测量值有关。该数据集由 6 个变量的 100 多个观测数据组成，即<strong class="lf iu">、臭氧</strong>(十亿分之几)、太阳<strong class="lf iu">。R </strong>(太阳辐射)<strong class="lf iu">风</strong>(平均风速)<strong class="lf iu">温度</strong>(日最高气温华氏温度)<strong class="lf iu">月</strong>(观测月)日<strong class="lf iu">日</strong>(一个月中的某一天)</li></ul><p id="64dc" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">要将内置数据集加载到 R 中，请在控制台中键入以下命令:</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="25ba" class="nz mk it oq b gy ou ov l ow ox">data(airquality)</span></pre><ul class=""><li id="76b2" class="nb nc it lf b lg lh lj lk mg ol mh om mi on ly ni nj nk nl bi translated">在<strong class="lf iu">外部数据源</strong>的情况下(CSV、Excel、文本、HTML 文件等。)，只需用<strong class="lf iu"> setwd() </strong>命令将包含数据的文件夹设置为<strong class="lf iu">工作目录</strong>。</li></ul><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="5a0a" class="nz mk it oq b gy ou ov l ow ox">setwd(path of the folder where the file is located)</span></pre><p id="47f6" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">现在，在<strong class="lf iu">读取</strong>命令的帮助下加载文件。在这种情况下，数据是一个名为<strong class="lf iu"> airquality.csv </strong>的 CSV 文件，可以从<a class="ae ky" href="https://github.com/parulnith/Data-Visualisation-with-R/blob/master/airquality.csv" rel="noopener ugc nofollow" target="_blank">这里</a>下载</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="79bf" class="nz mk it oq b gy ou ov l ow ox">airquality = read.csv('airquality.csv',header=TRUE, sep=",")</span></pre><p id="286c" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">以上代码将文件<strong class="lf iu"> airquality.csv </strong>读入数据帧<strong class="lf iu"> airquality </strong>。<strong class="lf iu"> Header=TRUE </strong>指定数据包含标题，<strong class="lf iu"> sep= "，"</strong>指定数据中的值用逗号分隔。</p><h2 id="43a5" class="nz mk it bd ml oa ob dn mp oc od dp mt mg oe of mv mh og oh mx mi oi oj mz ok bi translated">数据探索</h2><p id="a349" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated">一旦数据被加载到工作空间中，就应该研究它以了解它的结构。</p><ul class=""><li id="424c" class="nb nc it lf b lg lh lj lk mg ol mh om mi on ly ni nj nk nl bi translated"><strong class="lf iu"> str(airquality) </strong> <br/>它显示 R 对象的内部结构，并给出数据集的行和列的快速概览。</li></ul><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="9e99" class="nz mk it oq b gy ou ov l ow ox">'data.frame': 111 obs. of  6 variables:    <br/>$ Ozone  : int  41 36 12 18 23 19 8 16 11 14 ...    <br/>$ Solar.R: int  190 118 149 313 299 99 19 256 290 274 ...    <br/>$ Wind   : num  7.4 8 12.6 11.5 8.6 13.8 20.1 9.7 9.2 10.9 ...    <br/>$ Temp   : int  67 72 74 62 65 59 61 69 66 68 ...    <br/>$ Month  : int  5 5 5 5 5 5 5 5 5 5 ...    <br/>$ Day    : int  1 2 3 4 7 8 9 12 13 14 ... `</span></pre><ul class=""><li id="547f" class="nb nc it lf b lg lh lj lk mg ol mh om mi on ly ni nj nk nl bi translated"><strong class="lf iu"> head(data，n) </strong>和<strong class="lf iu"> tail(data，n)</strong><br/>head 输出数据集中顶部的<strong class="lf iu"> n 个</strong>元素，而 tail 方法输出底部的<strong class="lf iu"> n 个</strong>。</li></ul><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="ee1c" class="nz mk it oq b gy ou ov l ow ox">head(airquality, n=3)<br/>Ozone Solar.R Wind Temp Month Day<br/>1    41     190  7.4   67     5   1<br/>2    36     118  8.0   72     5   2<br/>3    12     149 12.6   74     5   3</span><span id="ab76" class="nz mk it oq b gy oy ov l ow ox">tail(airquality, n=3)<br/>   Ozone Solar.R Wind Temp Month Day<br/>109    14     191 14.3   75     9  28<br/>110    18     131  8.0   76     9  29<br/>111    20     223 11.5   68     9  30</span></pre><ul class=""><li id="f0de" class="nb nc it lf b lg lh lj lk mg ol mh om mi on ly ni nj nk nl bi translated"><strong class="lf iu">summary(</strong>air quality<strong class="lf iu">)</strong><br/>summary 方法根据变量的类型显示数据集中每个变量的描述性统计数据。</li></ul><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="0045" class="nz mk it oq b gy ou ov l ow ox"><strong class="oq iu">summary(data)</strong><br/>    <br/>    Ozone          Solar.R           Wind            Temp           Month            Day       <br/> Min.   :  1.0   Min.   :  7.0   Min.   : 2.30   Min.   :57.00   Min.   :5.000   Min.   : 1.00  <br/> 1st Qu.: 18.0   1st Qu.:113.5   1st Qu.: 7.40   1st Qu.:71.00   1st Qu.:6.000   1st Qu.: 9.00  <br/> Median : 31.0   Median :207.0   Median : 9.70   Median :79.00   Median :7.000   Median :16.00  <br/> Mean   : 42.1   Mean   :184.8   Mean   : 9.94   Mean   :77.79   Mean   :7.216   Mean   :15.95  <br/> 3rd Qu.: 62.0   3rd Qu.:255.5   3rd Qu.:11.50   3rd Qu.:84.50   3rd Qu.:9.000   3rd Qu.:22.50  <br/> Max.   :168.0   Max.   :334.0   Max.   :20.70   Max.   :97.00   Max.   :9.000   Max.   :31.00</span></pre><p id="4a1a" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">我们可以一目了然地看到变量的<strong class="lf iu">均值</strong>、<strong class="lf iu">中位数</strong>、<strong class="lf iu">最大值</strong>和<strong class="lf iu">四分位值</strong>。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="c517" class="mj mk it bd ml mm nr mo mp mq ns ms mt jz nt ka mv kc nu kd mx kf nv kg mz na bi translated">基本情节入门</h1><p id="6064" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated"><a class="ae ky" href="https://stat.ethz.ch/R-manual/R-devel/library/graphics/html/graphics-package.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lf iu">图形</strong> </a>包用于绘制<strong class="lf iu">基</strong>图形，如散点图、箱线图等。通过输入:<code class="fe oz pa pb oq b">library(help = "graphics")</code>可以获得带有帮助页面的完整功能列表。</p><h2 id="b2a6" class="nz mk it bd ml oa ob dn mp oc od dp mt mg oe of mv mh og oh mx mi oi oj mz ok bi translated">plot()函数</h2><ul class=""><li id="04b5" class="nb nc it lf b lg nd lj ne mg nf mh ng mi nh ly ni nj nk nl bi translated"><code class="fe oz pa pb oq b">plot()</code>函数是一种用于绘制<strong class="lf iu"> R </strong>对象的通用函数。</li></ul><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="3963" class="nz mk it oq b gy ou ov l ow ox">plot(airquality$Ozone)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/f88acacb4b1b1c808c37906e68d309fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*fsPPJTgw-E-BxDFS_osyMA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Scatter Plot</figcaption></figure><p id="e8e4" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">我们在这里得到一个<strong class="lf iu">散点图/点图</strong>，其中每个点代表<strong class="lf iu">臭氧</strong>在<strong class="lf iu">平均十亿分之</strong>中的值。</p><ul class=""><li id="6058" class="nb nc it lf b lg lh lj lk mg ol mh om mi on ly ni nj nk nl bi translated">现在让我们绘制一张臭氧和风值之间的图表，来研究两者之间的关系。</li></ul><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="a223" class="nz mk it oq b gy ou ov l ow ox">plot(airquality$Ozone, airquality$Wind)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pd"><img src="../Images/a5e8f6891438d51d416929f464e93b6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BQYysd2EQpMPTv3Y.png"/></div></div></figure><p id="b432" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">图表显示风和臭氧值有某种程度的负相关性。</p><ul class=""><li id="1532" class="nb nc it lf b lg lh lj lk mg ol mh om mi on ly ni nj nk nl bi translated">当我们对整个数据集使用 plot 命令而不选择任何特定列时，会发生什么情况？</li></ul><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="b7b0" class="nz mk it oq b gy ou ov l ow ox">plot(airquality)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/f8c13ec2808c0a5a2f329a493f4dbe69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lR2n8ECAL_YyDnVR.png"/></div></div></figure><p id="177b" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">我们得到一个散点图矩阵，它是所有列的相关矩阵。上面的图立即显示:</p><ul class=""><li id="484f" class="nb nc it lf b lg lh lj lk mg ol mh om mi on ly ni nj nk nl bi translated">臭氧水平和温度正相关。</li><li id="0345" class="nb nc it lf b lg nm lj nn mg no mh np mi nq ly ni nj nk nl bi translated">风速与温度和臭氧水平都呈负相关。</li></ul><p id="7234" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">只要看看变量之间的关系图，我们就能很快发现它们之间的关系。</p><h2 id="964a" class="nz mk it bd ml oa ob dn mp oc od dp mt mg oe of mv mh og oh mx mi oi oj mz ok bi translated">在 plot()函数中使用参数</h2><p id="893a" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated">我们可以通过使用<code class="fe oz pa pb oq b">plot()</code>函数的参数来轻松设计图表。</p><h2 id="5f68" class="nz mk it bd ml oa ob dn mp oc od dp mt mg oe of mv mh og oh mx mi oi oj mz ok bi translated">类型参数</h2><p id="ec54" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated">绘图函数有一个名为<code class="fe oz pa pb oq b">type</code>的参数，它可以接受像<strong class="lf iu"> p:点</strong>、<strong class="lf iu"> l:线</strong>、<strong class="lf iu"> b:两者</strong>等值。这决定了输出图形的形状。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="67d2" class="nz mk it oq b gy ou ov l ow ox"># points and lines <br/> plot(airquality$Ozone, type= "b")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/4f12a65ddbf732667016a32308312ee1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cBJkC6Dtc9QZVCjz.png"/></div></div></figure><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="aa84" class="nz mk it oq b gy ou ov l ow ox"># high density vertical lines.<br/> plot(airquality$Ozone, type= "h")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/1bd74b81579bc26316af592e6e0fd5cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/0*7ENrTEySe5Ing7wW.png"/></div></figure><p id="0ebe" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated"><em class="le">在控制台中键入</em> <code class="fe oz pa pb oq b"><em class="le">?plot()</em></code> <em class="le">可以阅读更多关于</em> <code class="fe oz pa pb oq b"><em class="le">plot()</em></code> <em class="le">命令的内容。</em></p><p id="c1fc" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated"><strong class="lf iu">标签和标题</strong></p><p id="6c0a" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">我们还可以标记 X 轴和 Y 轴，并给我们的图加一个标题。此外，我们还可以选择给图着色。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="3db0" class="nz mk it oq b gy ou ov l ow ox">plot(airquality$Ozone, xlab = 'ozone Concentration', ylab = 'No of Instances', main = 'Ozone levels in NY city', col = 'green')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/f215dcac68bd53e4dfd0ec43f75cdac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/0*d_AcewsORSFfkD8z.png"/></div></figure><h2 id="b5d6" class="nz mk it bd ml oa ob dn mp oc od dp mt mg oe of mv mh og oh mx mi oi oj mz ok bi translated">2.条形图</h2><p id="9fa5" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated">在条形图中，数据以矩形条的形式表示，条的长度与数据集中变量或列的值成比例。通过调整<strong class="lf iu"> horiz </strong>参数，可以生成水平和垂直条形图。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="85a5" class="nz mk it oq b gy ou ov l ow ox"># Horizontal bar plot<br/> barplot(airquality$Ozone, main = 'Ozone Concenteration in air',xlab = 'ozone levels', col= 'green',horiz = TRUE)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/d35ddaa76953870c493d790593541121.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/0*gUNc_il6cUqhriX4.png"/></div></figure><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="63bb" class="nz mk it oq b gy ou ov l ow ox"># Vertical bar plot<br/>barplot(airquality$Ozone, main = 'Ozone Concenteration in air',xlab = 'ozone levels', col='red',horiz = FALSE)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/610b348d756cc7541e22dd0b2b0599b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1394/format:webp/0*iaBVkEqgykwVhA3W.png"/></div></figure><h2 id="035b" class="nz mk it bd ml oa ob dn mp oc od dp mt mg oe of mv mh og oh mx mi oi oj mz ok bi translated">3.柱状图</h2><p id="1404" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated">直方图与条形图非常相似，只是它将值分组到连续的范围内。直方图表示被划分为不同范围的变量值的频率。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="0d11" class="nz mk it oq b gy ou ov l ow ox">hist(airquality$Solar.R)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/103bf0898620b93a6db5360e486599e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pQak66I376OkwAcl.png"/></div></div></figure><p id="93cd" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">我们得到了<strong class="lf iu">太阳的直方图。R </strong>值。通过给<strong class="lf iu">颜色</strong>参数一个合适的值，我们也可以得到一个彩色直方图。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="9bac" class="nz mk it oq b gy ou ov l ow ox">hist(airquality$Solar.R, main = 'Solar Radiation values in air',xlab = 'Solar rad.', col='red')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/f73167a9d376043d3e8e746c13b43de9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*C40BfadYeyWnMNmw.png"/></div></div></figure><h2 id="127c" class="nz mk it bd ml oa ob dn mp oc od dp mt mg oe of mv mh og oh mx mi oi oj mz ok bi translated">4.箱线图</h2><p id="6b3d" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated">我们已经看到 R 中的<code class="fe oz pa pb oq b">summary()</code>命令如何显示数据集中每个变量的描述性统计数据。Boxplot 做了同样的事情，尽管是以四分位数的形式。在 r 中绘制箱线图也非常简单。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="e3db" class="nz mk it oq b gy ou ov l ow ox">#Single box plot<br/>boxplot(airquality$Solar.R)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/4a1d01dcfdc8f3748dece4d789761758.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2ywLmd7_DakGUrd7.png"/></div></div></figure><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="7712" class="nz mk it oq b gy ou ov l ow ox"># Multiple box plots<br/>boxplot(airquality[,0:4], main='Multiple Box plots')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/a5363c830eaff465a58f8f52e77839b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Ay00jnKnYdFPNqvl.png"/></div></div></figure><h2 id="8d15" class="nz mk it bd ml oa ob dn mp oc od dp mt mg oe of mv mh og oh mx mi oi oj mz ok bi translated">5.图表网格</h2><p id="7095" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated">R 中有一个非常有趣的特性，可以让我们一次绘制多个图表。这在 EDA 过程中非常方便，因为不再需要一个接一个地绘制多个图形。<br/>绘制网格时，第一个参数应指定某些属性，如网格的边距(<code class="fe oz pa pb oq b">mar)</code>、行数和列数(<code class="fe oz pa pb oq b">mfrow</code>)、是否包含边框(<code class="fe oz pa pb oq b">bty</code>)以及标签的位置(<code class="fe oz pa pb oq b">las</code> : 1 表示水平，<code class="fe oz pa pb oq b">las</code> : 0 表示垂直)。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="2561" class="nz mk it oq b gy ou ov l ow ox">par(mfrow=c(3,3), mar=c(2,5,2,1), las=1, bty="n")<br/>plot(airquality$Ozone)<br/>plot(airquality$Ozone, airquality$Wind)<br/>plot(airquality$Ozone, type= "c")<br/>plot(airquality$Ozone, type= "s")<br/>plot(airquality$Ozone, type= "h")<br/>barplot(airquality$Ozone, main = 'Ozone Concenteration in air',xlab = 'ozone levels', col='green',horiz = TRUE)<br/>hist(airquality$Solar.R)<br/>boxplot(airquality$Solar.R)<br/>boxplot(airquality[,0:4], main='Multiple Box plots')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/2ff3cee12e1de93a6b3804ae7603d18e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EIp3mHNkE-wVm3bZ.png"/></div></div></figure><blockquote class="kz la lb"><p id="a6e2" class="lc ld le lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">注意:通过键入<code class="fe oz pa pb oq b">?plot name</code>，您可以使用函数文档来了解关于给定函数的更多信息。另外，<code class="fe oz pa pb oq b">example(plot)</code>直接在控制台中运行绘图演示。</p></blockquote></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="0689" class="mj mk it bd ml mm nr mo mp mq ns ms mt jz nt ka mv kc nu kd mx kf nv kg mz na bi translated">R 中的可视化库</h1><p id="67c5" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated">r 配备了功能强大的复杂可视化库。让我们仔细看看一些常用的。</p><p id="2885" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">在本节中，我们将使用内置的<a class="ae ky" href="https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/mtcars.html" rel="noopener ugc nofollow" target="_blank"> mtcars 数据集</a>来展示各种库的用法。该数据集摘自 1974 年的《汽车趋势》美国杂志。</p><h2 id="f79e" class="nz mk it bd ml oa ob dn mp oc od dp mt mg oe of mv mh og oh mx mi oi oj mz ok bi translated">点阵图形</h2><p id="fb79" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated"><a class="ae ky" href="https://stat.ethz.ch/R-manual/R-devel/library/lattice/html/Lattice.html" rel="noopener ugc nofollow" target="_blank"> Lattice </a>包本质上是对 R Graphics 包的改进，用于可视化多元数据。晶格使得能够使用<em class="le"> t </em> <strong class="lf iu"> <em class="le"> rellis 图形</em> </strong>。格子图展示了依赖于一个或多个变量的变量之间的关系。让我们从安装和加载软件包开始。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="7be1" class="nz mk it oq b gy ou ov l ow ox"># Installing &amp; Loading the package<br/>install.packages("lattice")<br/>library(lattice)  </span><span id="bd1a" class="nz mk it oq b gy oy ov l ow ox">#Loading the dataset<br/>attach(mtcars)</span></pre><p id="ae12" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated"><strong class="lf iu"> attach </strong>函数将数据库附加到<strong class="lf iu"> R </strong>搜索路径，这样数据库中的对象只需给出它们的名称就可以被访问。(详见<code class="fe oz pa pb oq b">?attach()</code>)</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="a139" class="nz mk it oq b gy ou ov l ow ox"># Exploring the dataset</span><span id="c025" class="nz mk it oq b gy oy ov l ow ox">head(mtcars)<br/>                       mpg cyl disp  hp drat    wt  qsec vs am gear carb<br/>Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4<br/>Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4<br/>Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1<br/>Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1<br/>Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2<br/>Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</span></pre><p id="e37e" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">在继续使用 lattice 包之前，让我们对数据做一些预处理。在我们的 mtcars 数据集中有两列，即<strong class="lf iu">齿轮</strong>和<strong class="lf iu">气缸</strong>，它们本质上是分类的。我们需要分解它们，使它们更有意义。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="a235" class="nz mk it oq b gy ou ov l ow ox">gear_factor&lt;-factor(gear,levels=c(3,4,5),<br/>labels=c("3gears","4gears","5gears")) <br/>   <br/>cyl_factor &lt;-factor(cyl,levels=c(4,6,8),<br/>labels=c("4cyl","6cyl","8cyl"))</span></pre><p id="e179" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated"><em class="le">注意:由于我们已经附加了数据集 mtcars，我们不需要指定</em> <code class="fe oz pa pb oq b"><em class="le">mtcars$gear</em></code> <em class="le">或</em> <code class="fe oz pa pb oq b"><em class="le">mtcars$cyl</em></code> <em class="le">。</em></p><p id="ecd8" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">现在让我们看看如何使用<strong class="lf iu"> lattice </strong>包在 r 中创建一些基本的情节。</p><ul class=""><li id="4487" class="nb nc it lf b lg lh lj lk mg ol mh om mi on ly ni nj nk nl bi translated"><strong class="lf iu">内核密度图</strong></li></ul><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="5d0d" class="nz mk it oq b gy ou ov l ow ox">densityplot(~mpg, main="Density Plot",  xlab="Miles per Gallon")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pl"><img src="../Images/cc3230f65caeb29d08d3eb072e38a161.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/format:webp/0*9vlu17axqs78NVU4.png"/></div></figure><p id="f936" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">使用点阵库非常简单。人们只需要插入想要绘图的列。</p><ul class=""><li id="af92" class="nb nc it lf b lg lh lj lk mg ol mh om mi on ly ni nj nk nl bi translated"><strong class="lf iu">散点图矩阵</strong></li></ul><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="30c8" class="nz mk it oq b gy ou ov l ow ox">splom(mtcars[c(1,3,4,5,6)], main="MTCARS Data")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pl"><img src="../Images/16ae2426f6cbf872de60c1c8c5085618.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/format:webp/0*6gGyoEfXpKMaFyFw.png"/></div></figure><ul class=""><li id="f3bf" class="nb nc it lf b lg lh lj lk mg ol mh om mi on ly ni nj nk nl bi translated"><strong class="lf iu">描绘两个因素组合的散点图</strong></li></ul><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="2980" class="nz mk it oq b gy ou ov l ow ox">xyplot(mpg~wt|cyl_factor*gear_factor,  <br/>main="Scatterplots : Cylinders and Gears",  <br/>ylab="Miles/Gallon", xlab="Weight of Car")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pl"><img src="../Images/0f497405e0830622cd58ecad5cf1a7b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/format:webp/0*bTtgi8NZAWkkyx2J.png"/></div></figure><h2 id="db26" class="nz mk it bd ml oa ob dn mp oc od dp mt mg oe of mv mh og oh mx mi oi oj mz ok bi translated">2.ggplot2</h2><p id="5055" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated">ggplot2 包是 r 中使用最广泛的可视化包之一。它使用户能够使用图形的<strong class="lf iu">语法用很少的代码创建复杂的可视化。图形的<a class="ae ky" href="https://en.wikipedia.org/wiki/Ggplot2" rel="noopener ugc nofollow" target="_blank">语法</a>是一个数据可视化的通用方案，它将图形分解成语义成分，如比例和层。</strong></p><p id="308a" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">近年来，ggplot2 的受欢迎程度大大增加，因为它可以以非常简单的方式创建包含单变量和多变量数据的图表。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="c28f" class="nz mk it oq b gy ou ov l ow ox">#Installing &amp; Loading the package <br/>   <br/>install.packages(“ggplot2”) <br/>library(ggplot2)<br/>   <br/>#Loading the dataset<br/>attach(mtcars)<br/></span><span id="2bb8" class="nz mk it oq b gy oy ov l ow ox"># create factors with value labels <br/> <br/>mtcars$gear &lt;- factor(mtcars$gear,levels=c(3,4,5),  <br/>labels=c("3gears", "4gears", "5gears"))  <br/>mtcars$am &lt;- factor(mtcars$am,levels=c(0,1),  <br/>labels=c("Automatic","Manual"))  <br/>mtcars$cyl &lt;- factor(mtcars$cyl,levels=c(4,6,8),  <br/>labels=c("4cyl","6cyl","8cyl"))</span></pre><p id="e692" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated"><strong class="lf iu"> <em class="le">让我们创造几个情节来了解 ggplot2 </em> </strong>的能力</p><ul class=""><li id="59a3" class="nb nc it lf b lg lh lj lk mg ol mh om mi on ly ni nj nk nl bi translated"><strong class="lf iu">散点图</strong></li></ul><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="6c34" class="nz mk it oq b gy ou ov l ow ox">ggplot(data = mtcars, mapping = aes(x = wt, y = mpg)) + geom_point()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/b37531a2b1a493983ac30bd8633c1f23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/0*B0vvhuQ5MvHb_HU9.png"/></div></figure><p id="c86f" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated"><code class="fe oz pa pb oq b">geom_point()</code>用于创建散点图，geom 可以有多种变化，如<code class="fe oz pa pb oq b">geom_jitter()</code>、<code class="fe oz pa pb oq b">geom_count()</code>等</p><ul class=""><li id="b133" class="nb nc it lf b lg lh lj lk mg ol mh om mi on ly ni nj nk nl bi translated"><strong class="lf iu">根据因子设计散点图的样式</strong></li></ul><p id="3e28" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">我们知道数据集 mtcars 由某些以因子形式存在的变量组成。我们可以利用这个属性来分割数据集</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="740c" class="nz mk it oq b gy ou ov l ow ox">ggplot(data = mtcars, mapping = aes(x = wt, y = mpg, color = as.factor(cyl))) + geom_point()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/0b61f6217e5706f898499e37170e3a86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/0*dv54t1g4wowuHFbA.png"/></div></figure><p id="4c48" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">颜色参数用于区分 cyl 变量的不同因子级别。</p><ul class=""><li id="ff85" class="nb nc it lf b lg lh lj lk mg ol mh om mi on ly ni nj nk nl bi translated"><strong class="lf iu">根据大小设定散点图样式</strong></li></ul><p id="dbb3" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">ggplot2 的另一个有用的特性是，它可以根据属性的大小来设置样式。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="b1b3" class="nz mk it oq b gy ou ov l ow ox">ggplot(data = mtcars, mapping = aes(x = wt, y = mpg, size = qsec)) + geom_point()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/1bf5dcf6a0ce0c217ce1cfade59d0883.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/0*ZMVw-BzdcnAfAHNU.png"/></div></figure><p id="c41c" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">在上面的例子中，<code class="fe oz pa pb oq b">qsec</code>的值表示决定点大小的加速度。</p><ul class=""><li id="6e4b" class="nb nc it lf b lg lh lj lk mg ol mh om mi on ly ni nj nk nl bi translated"><strong class="lf iu">不同尺寸的不同符号</strong></li></ul><p id="c4e5" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">使用 ggplot2，还可以通过将不同大小的多个点分层来创建独特而有趣的形状</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="caa2" class="nz mk it oq b gy ou ov l ow ox">p  &lt;-  ggplot(mtcars,aes(mpg, wt, shape  =  factor(cyl)))<br/>  p + geom_point(aes(colour  =  factor(cyl)), size  =  4) + geom_point(colour  =  "grey90", size  =  1.5)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/a9f223638c2290860eecbfc4d3223187.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/0*pLoIj2XSsu8la36G.png"/></div></figure><h2 id="761f" class="nz mk it bd ml oa ob dn mp oc od dp mt mg oe of mv mh og oh mx mi oi oj mz ok bi translated">3.Plotly</h2><p id="faaa" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated"><a class="ae ky" href="https://github.com/ropensci/plotly#readme" rel="noopener ugc nofollow" target="_blank"> Plotly </a>是一个 R 包，通过开源的 JavaScript 图形库<a class="ae ky" href="http://plot.ly/javascript" rel="noopener ugc nofollow" target="_blank"> plotly.js </a>创建交互式的基于 web 的图形。它还可以轻松地将“ggplot2”图翻译成基于网络的版本。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="5b06" class="nz mk it oq b gy ou ov l ow ox">#Installing &amp; Loading the package <br/> <br/> install.packages(“plotly”)  <br/> library(plotly)</span></pre><p id="3d02" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">现在让我们看看我们如何利用情节来创造互动的视觉化。我们将使用点阵图形演示中使用的相同 mtcars 数据集。</p><ul class=""><li id="d044" class="nb nc it lf b lg lh lj lk mg ol mh om mi on ly ni nj nk nl bi translated"><strong class="lf iu">基本散点图</strong></li></ul><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="ecf6" class="nz mk it oq b gy ou ov l ow ox">p &lt;- plot_ly(data = mtcars, x = ~hp, y = ~wt)<br/>p</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/ee848bc73d0116dd69b2c187623f6a45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/0*H473TpsQyHgEsoFp.png"/></div></figure><p id="ff90" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">上面的图也可以以网页的形式导出，以保持其交互性。</p><ul class=""><li id="fe78" class="nb nc it lf b lg lh lj lk mg ol mh om mi on ly ni nj nk nl bi translated"><strong class="lf iu">样式散点图</strong></li></ul><p id="44f1" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">散点图可以通过给定适当的颜色代码来设计。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="44dd" class="nz mk it oq b gy ou ov l ow ox">p &lt;- plot_ly(data = mtcars, x = ~hp, y = ~wt, marker = list(size = 10, color = 'rgba(255, 182, 193, .9)', line = list(color = 'rgba(152, 0, 0, .8)', width = 2)))</span><span id="7f4b" class="nz mk it oq b gy oy ov l ow ox">p</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/94dd4f1f9146ce0be1adea5a81a4ca18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/0*ULccqQ9HQNr_NYCl.png"/></div></figure><ul class=""><li id="d615" class="nb nc it lf b lg lh lj lk mg ol mh om mi on ly ni nj nk nl bi translated"><strong class="lf iu">标记和线条</strong></li></ul><p id="ca32" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">也可以用 plotly 在同一个图形中绘制标记和线条。在这里，我们将创建一个任意数据框来展示此功能。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="1ae1" class="nz mk it oq b gy ou ov l ow ox">data1 &lt;- rnorm(100, mean = 10)   <br/>data2 &lt;- rnorm(100, mean = 0)   <br/>data3 &lt;- rnorm(100, mean = -10)   <br/>x &lt;- c(1:100)</span><span id="3392" class="nz mk it oq b gy oy ov l ow ox">data &lt;- data.frame(x, data1, data2, data3)</span><span id="7920" class="nz mk it oq b gy oy ov l ow ox">p &lt;- plot_ly(data, x = ~x)%&gt;%   <br/>    <br/>add_trace(y = ~data1, name = 'data1',mode = 'lines')%&gt;%             <br/>add_trace(y = ~data2, name = 'data2', mode = 'lines+markers')%&gt;% <br/>add_trace(y = ~data3, name = 'data3', mode = 'markers')</span><span id="65eb" class="nz mk it oq b gy oy ov l ow ox">p</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/edd9cbbd6326306d9765b9dce1546f44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/0*sWTShPcHqPJcd-CJ.png"/></div></figure><p id="b4a7" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated"><strong class="lf iu">添加颜色和大小映射</strong></p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="0f52" class="nz mk it oq b gy ou ov l ow ox">p &lt;- plot_ly(data = mtcars, x =~hp, y = ~wt,color = ~hp, size = ~hp )<br/>p</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/f6b3aa58104bbb1c283eefe545260246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/0*B-CJ5u5RyTM7zkNZ.png"/></div></figure><p id="1821" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated"><em class="le">虽然这不是 R 中用于可视化的包的完整列表，但是这些应该足够让你开始了。</em></p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="e672" class="mj mk it bd ml mm nr mo mp mq ns ms mt jz nt ka mv kc nu kd mx kf nv kg mz na bi translated">在 R 中可视化地理数据</h1><p id="4d11" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated">地理数据(<strong class="lf iu">地理数据</strong>)与基于位置的数据相关。它主要描述物体在空间中的关系。数据通常以坐标的形式存储。以地图的形式看到一个州或一个国家更有意义，因为它提供了更真实的概览。在下一节中，我们将简要概述 R 在地理数据可视化方面的能力。</p><h2 id="cc81" class="nz mk it bd ml oa ob dn mp oc od dp mt mg oe of mv mh og oh mx mi oi oj mz ok bi translated">地理地图</h2><p id="d6f9" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated">我们将使用 ABC 公司<a class="ae ky" href="https://github.com/parulnith/Data-Visualisation-with-R/blob/master/Visualisation%20geographical%20data/ABC_locations.csv" rel="noopener ugc nofollow" target="_blank"><strong class="lf iu"/></a>的超市数据集样本。该数据集由他们在美国的商店位置组成。让我们加载数据并检查它的列。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="f8ee" class="nz mk it oq b gy ou ov l ow ox">data &lt;- read.csv('ABC_locations.csv', sep=",")</span><span id="30b7" class="nz mk it oq b gy oy ov l ow ox">head(data)<br/>                    Address       City   State   Zip.Code Latitude  Longitude<br/>1  1205 N. Memorial Parkway Huntsville Alabama 35801-5930 34.74309  -86.60096<br/>2      3650 Galleria Circle     Hoover Alabama 35244-2346 33.37765  -86.81242<br/>3    8251 Eastchase Parkway Montgomery Alabama      36117 32.36389  -86.15088<br/>4 5225 Commercial Boulevard     Juneau  Alaska 99801-7210 58.35920 -134.48300<br/>5      330 West Dimond Blvd  Anchorage  Alaska 99515-1950 61.14327 -149.88422<br/>6          4125 DeBarr Road  Anchorage  Alaska 99508-3115 61.21081 -149.80434</span></pre><h2 id="6c52" class="nz mk it bd ml oa ob dn mp oc od dp mt mg oe of mv mh og oh mx mi oi oj mz ok bi translated">plot()函数</h2><p id="fff3" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated">我们将简单地通过纬度和经度列创建一个粗略的地图。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="07ae" class="nz mk it oq b gy ou ov l ow ox">plot(data$Longitude,data$Latitude)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi po"><img src="../Images/687de44d08ac554ec965d8110c5cb7cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/format:webp/1*7lwjsq8P0swxk-wwinIRtA.png"/></div></figure><p id="9760" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">输出不是精确的地图，但它给出了美国边界的模糊轮廓。</p><h2 id="007d" class="nz mk it bd ml oa ob dn mp oc od dp mt mg oe of mv mh og oh mx mi oi oj mz ok bi translated">map()函数</h2><p id="99bc" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated">地图包在绘制地理数据时非常有用而且非常简单。</p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="b2b9" class="nz mk it oq b gy ou ov l ow ox"># Install package <br/>install.packages("maps", dependencies=TRUE)</span><span id="a3c5" class="nz mk it oq b gy oy ov l ow ox"># Loading the installed maps package<br/>library(maps)</span></pre><p id="c70a" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated"><strong class="lf iu">使用 map()函数绘制美国底图</strong></p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="c249" class="nz mk it oq b gy ou ov l ow ox">map(database="state")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pp"><img src="../Images/72366f8ea0363f617eb314c1a0ef6e91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/0*nTAbZJWiMwjf8AqU.png"/></div></figure><p id="ca25" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated"><strong class="lf iu">使用 symbols()函数在基础地图上构建一个点地图</strong></p><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="26c6" class="nz mk it oq b gy ou ov l ow ox">symbols(data$Longitude, data$Latitude, squares =rep(1, length(data$Longitude)), inches=0.03, add=TRUE)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pp"><img src="../Images/2a4f59bc26f16d94645ec3f4f9b3c16a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/0*_97Cf0t40Icup-7P.png"/></div></figure><h2 id="a3bc" class="nz mk it bd ml oa ob dn mp oc od dp mt mg oe of mv mh og oh mx mi oi oj mz ok bi translated"><strong class="ak">赋予符号颜色</strong></h2><pre class="kj kk kl km gt op oq or os aw ot bi"><span id="d0c3" class="nz mk it oq b gy ou ov l ow ox">symbols(data$Longitude, data$Latitude,bg = 'red', fg = 'red', squares =rep(1, length(data$Longitude)), inches=0.03, add=TRUE)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pp"><img src="../Images/806034fb7aaca37022b4e23f032deed5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/0*BUquGLvtWO_QCeQp.png"/></div></figure><p id="64f4" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">与 map 函数一起使用的命令是不言自明的。然而，你可以在他们的文档页面上了解更多。</p><p id="35f5" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mg ln lo lp mh lr ls lt mi lv lw lx ly im bi translated">当数据由位置组成时，地理数据可视化非常重要。人们可以很容易地想象出确切的地点和区域，并传达出更好的画面。</p><h1 id="8b3f" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">5.结论</h1><p id="63d7" class="pw-post-body-paragraph lc ld it lf b lg nd ju li lj ne jx ll mg nw lo lp mh nx ls lt mi ny lw lx ly im bi translated">我们已经看到使用 r 开始可视化是多么的简单和容易。你可以选择从头开始创建可视化或者使用预先构建的包。无论你选择什么，很明显 R 的可视化能力是无穷无尽的。</p></div></div>    
</body>
</html>