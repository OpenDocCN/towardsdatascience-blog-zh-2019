<html>
<head>
<title>Alternative Ways to Recommend Airbnb Listings Using Natural Language Processing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用自然语言处理推荐 Airbnb 房源的替代方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/alternative-ways-to-recommend-airbnb-listings-using-natural-language-processing-40fce2f1b553?source=collection_archive---------28-----------------------#2019-09-09">https://towardsdatascience.com/alternative-ways-to-recommend-airbnb-listings-using-natural-language-processing-40fce2f1b553?source=collection_archive---------28-----------------------#2019-09-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="410b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个项目来源于我对 Airbnb 的热爱。如果你花足够的时间搜索，你可以找到价格合理的独特的地方。这个项目的目标是提高你的 Airbnb 搜索能力。我正计划去奥斯汀旅行，我意识到我没有那里附近的任何信息，我不会在那里有车，我也不想花很多时间使用公共交通。我想住在一个凉爽的社区，在那里我可以在步行距离内找到我喜欢的地方。</p><p id="a5dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对我来说不幸的是，Airbnb 目前不允许根据住宿地点和特定事物的接近程度来搜索住宿。这里是 Airbnb 的界面。你可以按日期、客人、出差等进行过滤。，但是如果我喜欢酒吧和咖啡店附近的时髦地区，我不知道该住在哪里。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/0c888e7f531162fbae381e4c8dc86951.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dh-z3TwTlHj-LjRQV1afAw.png"/></div></div></figure><p id="3e2d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我决定做一个数据科学项目，以满足我对 Airbnb 搜索特异性的渴望。</p><h1 id="d8a5" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">数据</strong></h1><p id="86a2" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">Airbnb 包含禁止自动代理未经授权抓取数据的使用条款，但你可以在 insidearbnb.com 找到现成的最大城市的数据集。</p><p id="4a9e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我决定使用西雅图的房源及其评论的数据集，因为我更熟悉我居住的城市。我还为这个项目使用了两个不同的数据集，以开发两种生成推荐的替代方法，下面的小节将分别介绍这两种方法。</p><h1 id="10eb" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">第一部分</strong></h1><p id="9091" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated"><strong class="jp ir">推荐系统#1 </strong></p><p id="9bfa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我这部分的目标是为 Airbnb 创建更多个性化的推荐，以满足特定的需求。举个例子，如果我想在酒吧和咖啡店附近的时尚街区找一套单间公寓，该怎么办？</p><p id="7791" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于第一个推荐系统，我使用了一个数据集，其中详细描述了西雅图的列表。该数据集包括每个房源的邻居、主人、便利设施、评论分数、可用性、价格和位置等信息。</p><p id="5d28" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我使用了一个简单的余弦相似度技巧，它允许我根据自己的请求找到列表。我能够在一个功能和几个步骤中完成它:</p><ul class=""><li id="53d0" class="ma mb iq jp b jq jr ju jv jy mc kc md kg me kk mf mg mh mi bi translated">使用计数矢量化对数据框的文本内容进行符号化</li><li id="9e71" class="ma mb iq jp b jq mj ju mk jy ml kc mm kg mn kk mf mg mh mi bi translated">将符号化的文本列转换成矩阵</li><li id="6c8a" class="ma mb iq jp b jq mj ju mk jy ml kc mm kg mn kk mf mg mh mi bi translated">转换个性化请求，该请求是函数的文本输入。</li><li id="cfca" class="ma mb iq jp b jq mj ju mk jy ml kc mm kg mn kk mf mg mh mi bi translated">找到请求矩阵和数据帧内容之间的余弦相似性</li><li id="1913" class="ma mb iq jp b jq mj ju mk jy ml kc mm kg mn kk mf mg mh mi bi translated">选择具有最高余弦相似性的五行</li></ul><p id="205e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是函数:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mo"><img src="../Images/888065ad30d3c149b01f55676cfe709a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JQbrSIRmm6Gmb952Hy4hcQ.png"/></div></div></figure><p id="99b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这很棒，但此时，代码存储在我的 Jupyter 笔记本中，没有人可以使用它。幸运的是，我可以将我的代码部署到一个<a class="ae mp" href="https://palletsprojects.com/p/flask/" rel="noopener ugc nofollow" target="_blank"> Flask app </a>中，并通过<a class="ae mp" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku </a>创建一个网站，这是一个免费的网络托管服务，它将允许其他人使用这一搜索功能。</p><p id="7714" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">将模型部署到 Flask APP → Heroku </strong></p><ul class=""><li id="8105" class="ma mb iq jp b jq jr ju jv jy mc kc md kg me kk mf mg mh mi bi translated">这个过程的第一步是将主函数的属性保存到 pickle 中。🥒</li><li id="cbcc" class="ma mb iq jp b jq mj ju mk jy ml kc mm kg mn kk mf mg mh mi bi translated">接下来，我用我的主函数(web API)创建了一个 py 文件</li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mq"><img src="../Images/974e70eec4ecf4de01863c835ce96a58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i47m5XuJWXlPZvj6rLqnBQ.png"/></div></div></figure><ul class=""><li id="1085" class="ma mb iq jp b jq jr ju jv jy mc kc md kg me kk mf mg mh mi bi translated">另一个。py 文件包含 Flask 应用程序的后端</li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mr"><img src="../Images/67da04ca73eaa80d9d227915b7df0e8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1aU_Ka3-VTAqDnqTufsLDA.png"/></div></div></figure><ul class=""><li id="ab49" class="ma mb iq jp b jq jr ju jv jy mc kc md kg me kk mf mg mh mi bi translated">最后，这里是一个简单的前端界面的 HTML。</li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ms"><img src="../Images/66bf1e90b670a0716e6916b97195a326.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jWVFmw0IIqdvRzBemD_LdQ.png"/></div></div></figure><p id="1869" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦我能够通过我的终端调用工作应用程序，我就开始通过 Heroku 部署它。我用一个简单的<a class="ae mp" href="https://dev.to/lucysuddenly/easy-step-by-step-guide-to-deploying-on-heroku-3m9p" rel="noopener ugc nofollow" target="_blank">指南</a>在 Heroku 中部署我的应用程序。</p><p id="50cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">看看下面的结果吧！(还有对不起原始的前端接口。)</p><div class="mt mu gp gr mv mw"><a href="https://obscure-depths-25051.herokuapp.com/" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd ir gy z fp nb fr fs nc fu fw ip bi translated">Heroku 应用程序根据您的搜索提供 5 个推荐</h2><div class="nd l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">obscure-depths-25051.herokuapp.com</p></div></div><div class="ne l"><div class="nf l ng nh ni ne nj kv mw"/></div></div></a></div><h1 id="cee9" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">第二部分</strong></h1><p id="9c92" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated"><strong class="jp ir">推荐系统#2 </strong></p><p id="9567" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该项目的第二部分的目标是创建一个协同过滤推荐引擎，根据 Airbnb 列出的过去喜欢的具有相似品味和偏好的人，向用户提供推荐。这种方法通过使用用户之间的相似性作为参考来预测每个用户的自定义评级。</p><p id="73c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于第二个推荐系统，我使用的 Airbnb 数据集包括我在第一部分中使用的数据集中的房源评论、评论者 ID 和房源 ID。</p><p id="4aac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">让我们回顾一下我的流程:</strong></p><p id="7dcb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我的数据集不包括评论的评级或情绪，因此为了了解评论的情绪，我使用了<a class="ae mp" href="https://www.programcreek.com/python/example/100005/nltk.sentiment.vader.SentimentIntensityAnalyzer" rel="noopener ugc nofollow" target="_blank"> NLTK 的软件包 SentimentIntensityAnalyzer，</a>，它允许我计算第一部分数据集中每个列表的每个评论的情绪得分。在下面，您可以看到在最右侧的<em class="nk">极性</em>列中生成的每个评论(行)的情绪得分。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nl"><img src="../Images/678c7e4624cfe3719ca2ea2f6e200d7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TBhJzeZPIPVeBgVSHDlaIg.png"/></div></div></figure><p id="48f5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是所有 Airbnb 用户评论的情感分数分布图。请注意，大多数评论都有积极的情感价值。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nm"><img src="../Images/ccae1db9cc309e0d06da8fc0dcafd3ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*sa0Y2gooLDbJhAMC_FxQcg.png"/></div></div></figure><p id="3306" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在将情感分数拟合到模型中之前，我必须转换它，因此分数是正态分布的。下图显示了正态分布。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/54139683bd70c20c76320c7611a741af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*nC2PZ4MxjUYcHjley9NjTw.png"/></div></figure><p id="9846" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了创建一个健壮的推荐模型，我使用了<a class="ae mp" href="http://surpriselib.com/" rel="noopener ugc nofollow" target="_blank">surprise</a>库。该图书馆由 Nicolas Hug 在 PyParis 2017 上赠送。需要明确的是，Surpise 不是一个推荐引擎。这是一个允许我创建使用以下算法的基准的库:</p><ul class=""><li id="2779" class="ma mb iq jp b jq jr ju jv jy mc kc md kg me kk mf mg mh mi bi translated">网格搜索 CV 以找到最佳参数</li><li id="ef39" class="ma mb iq jp b jq mj ju mk jy ml kc mm kg mn kk mf mg mh mi bi translated">SVD(奇异值分解),以基于评级的历史来预测用户项目对的评级</li></ul><p id="15eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我用 RMSE 作为我的准确度指标。</p><p id="4e57" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">网格搜索 CV 能够使用最佳参数确定 0.0995 的最佳 RMSE 分数，如下所示。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi no"><img src="../Images/ca861fe36207b9d6b84be7249b4219d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JJWjrfpGhYgn8ylLQPJxOA.png"/></div></div></figure><p id="e236" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我有了最好的分数，下一步是编写一个函数，为每个用户提供三个清单推荐，如下所示。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi np"><img src="../Images/837b8553a3d97b45042084baac05d186.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tDh_kxynggU-n7UasF0DPw.png"/></div></div></figure><p id="e86b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我创建了一个新的数据集，并将上述函数应用于所有用户。以下是包含三项建议的最终数据集:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/853d6fe6170c4b587aac75ff3724eb88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*S2an64ymoAtkxiWmxNoxrQ.png"/></div></figure><h1 id="9483" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">总结</strong></h1><p id="5841" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">我最终得到了两个有用的推荐系统。我使用第一个推荐系统来计划我的奥斯汀之旅，因为它可以根据我的特定需求给我提供最好的 Airbnb。第二个推荐系统是基于相似用户偏好的更标准的推荐系统，被网飞、Airbnb、亚马逊等公司广泛使用。</p><h1 id="11ab" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">参考文献:</strong></h1><p id="4291" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">为了了解惊喜库的复杂性，我看了下面这个视频:<a class="ae mp" href="https://www.youtube.com/watch?v=z0dx-YckFko" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=z0dx-YckFko</a></p><p id="f05d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我还引用了这位了不起的数据科学博主 Susan Li:<a class="ae mp" rel="noopener" target="_blank" href="/building-and-testing-recommender-systems-with-surprise-step-by-step-d4ba702ef80b">https://towards data science . com/building-and-testing-recommender-systems-with-surprise-step-step-d4ba 702 ef 80 b</a></p><p id="9c18" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Github 库:<a class="ae mp" href="https://github.com/AisOmar/Airbnb_recommendation" rel="noopener ugc nofollow" target="_blank">https://github.com/AisOmar/Airbnb_recommendation</a></p></div></div>    
</body>
</html>