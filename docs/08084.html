<html>
<head>
<title>Add Image Recognition to your Chatbot with Google Dialogflow and Vision API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Google Dialogflow 和 Vision API 为您的聊天机器人添加图像识别功能</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/add-image-recognition-to-your-chatbot-with-google-dialogflow-and-vision-api-fd45cd0bdd45?source=collection_archive---------7-----------------------#2019-11-06">https://towardsdatascience.com/add-image-recognition-to-your-chatbot-with-google-dialogflow-and-vision-api-fd45cd0bdd45?source=collection_archive---------7-----------------------#2019-11-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="io ip gp gr iq ir gh gi paragraph-image"><div class="ab gu cl is"><img src="../Images/0ce271a472c661469ef6014bdb33929e.png" data-original-src="https://miro.medium.com/v2/format:webp/0*MURSwMzWpbJt5pTV.png"/></div></figure><div class=""/><p id="594b" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">对话式人工智能的使用案例多种多样。它们包括客户支持、电子商务、控制物联网设备、企业生产力等等。用非常简单的术语来说，这些用例涉及用户问一个特定的问题(意图)，以及对话体验(或聊天机器人)通过调用后端系统(如 CRM、数据库或 API)来响应该问题。这些“意图”通过利用自然语言处理(NLP)和机器学习(ML)来识别。</p><p id="d407" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">事实证明，这些用例中的一些可以通过允许用户上传图像来丰富。在这种情况下，您会希望对话体验基于该图像中的确切内容采取行动。</p><p id="618f" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">让我们想象一个电子商务客户支持示例:如果您提供自动退款，那么您会要求用户上传收据的图像，将图像发送到预先训练的 ML 模型，从图像中提取文本，从文本中识别购买日期，查看它是否符合退款窗口，然后处理退款或拒绝退款。</p><p id="1867" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">让我们想象另一个支持示例:您的硬件产品要求客户遵循一些设置步骤，如果他们遇到问题，他们会求助于聊天机器人，聊天机器人会要求他们上传设备的图像，图像会被发送到预先训练的 ML 模型，该模型会识别问题可能是什么，并通过聊天机器人将其反馈给用户。</p><h1 id="6f11" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">介绍</h1><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi lq"><img src="../Images/ce23c8610b8a96d6c9f2c2a2ae7ec668.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sUv_Tte3qQz3R4hS.png"/></div></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk">The chat experience that you will build as a part of this tutorial</figcaption></figure><p id="8460" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在本教程中，您将学习如何将 Dialogflow 与 Vision API 集成在一起，以便对用户提供的图像输入做出丰富的、动态的基于 ML 的响应。您将创建一个简单的聊天机器人应用程序，该应用程序将图像作为输入，在 Vision API 中对其进行处理，并将识别出的地标返回给用户。见下图。</p><ul class=""><li id="ab79" class="md me ix jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">您将创建一个 Dialogflow 代理</li><li id="a050" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">实现一个 django 前端来上传文件</li><li id="b54f" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">实现 Dialogflow fulfillment 以针对上传的图像调用 vision API。就像下图一样。</li></ul><p id="6c0d" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><a class="ae mr" href="https://www.youtube.com/watch?v=4wS3Wkjols4&amp;list=PLIivdWyY5sqK5SM34zbkitWLOV-b3V40B&amp;index=13&amp;t=0s" rel="noopener ugc nofollow" target="_blank">这里的</a>是解释接下来步骤的视频。</p><figure class="lr ls lt lu gt ir"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h1 id="1a57" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">架构概述</h1><p id="0d3d" class="pw-post-body-paragraph ju jv ix jw b jx mu jz ka kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr ij bi translated">我们正在创建一个自定义 Django 前端的对话体验，并将其与 Vision API 集成。我们将使用 Django-framework 构建前端，在本地运行并测试它，然后在 Google App Engine 上部署它。前端将如下所示:</p><p id="52eb" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请求流将是:</p><ol class=""><li id="a6b3" class="md me ix jw b jx jy kb kc kf mf kj mg kn mh kr mz mj mk ml bi translated">用户将通过这个前端发送一个请求。</li><li id="050e" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mz mj mk ml bi translated">这将触发对 Dialogflow DetectIntent API 的调用，以将用户的话语映射到正确的意图。</li><li id="a9a1" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mz mj mk ml bi translated">一旦检测到“探索地标”意图，Dialogflow fulfillment 将向 Vision API 发送请求，接收返回的响应并将其发送回用户。</li></ol><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi na"><img src="../Images/9c0a23d68b7b8bf13ac49468b06ba7a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iaehov7L6H8lR-F4CG6RKQ.png"/></div></div></figure><p id="7ff1" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">整体架构:</p><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi nb"><img src="../Images/da9d7f16cd86d081c12b705bc14e47f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dkkjRZWtVA3qpPos_nzyXg.png"/></div></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk">Architectural Overview</figcaption></figure><h1 id="14ea" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">什么是谷歌云视觉 API？</h1><p id="e1fe" class="pw-post-body-paragraph ju jv ix jw b jx mu jz ka kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr ij bi translated">谷歌云视觉 API 是一个预先训练好的机器学习模型，有助于从图像中获得洞察力。您可以获得包括图像标记、人脸和地标检测、光学字符识别(OCR)和明确内容标记在内的洞察。<a class="ae mr" href="https://cloud.google.com/vision/" rel="noopener ugc nofollow" target="_blank">此处是链接</a>,以更具体地了解 Vision API。</p><h1 id="2ad2" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">创建对话流代理</h1><ol class=""><li id="72c6" class="md me ix jw b jx mu kb mv kf nc kj nd kn ne kr mz mj mk ml bi translated">转到<a class="ae mr" href="https://console.dialogflow.com/api-client/" rel="noopener ugc nofollow" target="_blank">对话流控制台</a>。</li><li id="fb3c" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mz mj mk ml bi translated">登录，如果你是第一次使用，然后使用您的电子邮件注册</li><li id="42c3" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mz mj mk ml bi translated">接受条款和条件，您将进入控制台</li><li id="1241" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mz mj mk ml bi translated">创建一个<strong class="jw iy">代理。</strong>要创建<strong class="jw iy">，</strong>单击左侧窗格中的下拉菜单，以查看“<strong class="jw iy">创建新代理</strong></li><li id="8e04" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mz mj mk ml bi translated">称之为“VisionAPI”</li><li id="decf" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mz mj mk ml bi translated">Dialogflow 为你创建了一个 Google Cloudproject 来访问日志，云功能等。您也可以选择一个现有的项目。</li><li id="51a6" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mz mj mk ml bi translated">准备好后，点击<strong class="jw iy">创建</strong>。</li><li id="f8e0" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mz mj mk ml bi translated">作为代理的一部分，Dialogflow 创建了两个默认意图。默认欢迎意图有助于问候您的用户。默认的回退意图有助于捕捉机器人不理解的所有问题。</li></ol><p id="5ec3" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在这一点上，我们有一个向用户问候的功能性机器人。但是我们需要稍微更新一下，让用户知道他们可以上传一张图片来探索地标。</p><h1 id="058d" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">更新默认欢迎意向以通知用户上传图像</h1><ol class=""><li id="aa26" class="md me ix jw b jx mu kb mv kf nc kj nd kn ne kr mz mj mk ml bi translated">点击“默认欢迎意向”</li><li id="abc8" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mz mj mk ml bi translated">将“回复”更新为“嗨！可以上传一张图探索地标。”</li></ol><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi nf"><img src="../Images/a26e62fdc1741e2757410bdcff38cdf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cVFjrDC4jsPXR2Kb"/></div></div></figure><h1 id="bc7f" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">创建实体</h1><ol class=""><li id="2d0e" class="md me ix jw b jx mu kb mv kf nc kj nd kn ne kr mz mj mk ml bi translated">点击“实体”</li><li id="409e" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mz mj mk ml bi translated">创建一个新实体，命名为“文件名”和“保存”。</li></ol><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ng"><img src="../Images/9d7643536a2f2db99ecfd9582219051a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AXRhJRWp2gf5_vFj"/></div></div></figure><h1 id="fae8" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">创建新意图</h1><ul class=""><li id="eb8c" class="md me ix jw b jx mu kb mv kf nc kj nd kn ne kr mi mj mk ml bi translated">点击“意图”</li><li id="9b53" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">将其命名为“探索上传的图像”</li><li id="7169" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">点击“训练短语”，添加“文件是 demo.jpg”和“文件是 taj.jpeg”，以@filename 作为实体。</li></ul><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi nh"><img src="../Images/2d485574ef2c1d8533bb6ee736bcc877.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EvHjC4h25wlyXqbx"/></div></div></figure><ul class=""><li id="dc15" class="md me ix jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">点击“回复”并添加“评估文件”作为文本回复</li><li id="e7ea" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">点击“履行”并切换“为此目的启用 webhook 调用”</li></ul><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ni"><img src="../Images/bdf7c2e79ee1652c48a8dac6a9ae35d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2N13p6AotLC-v6EX"/></div></div></figure><h1 id="ca43" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">设置实施以与 Vision API 集成</h1><ul class=""><li id="6d2b" class="md me ix jw b jx mu kb mv kf nc kj nd kn ne kr mi mj mk ml bi translated">导航到对话流代理“VisionAPI”并单击“<a class="ae mr" href="https://console.dialogflow.com/api-client/#/agent//fulfillment" rel="noopener ugc nofollow" target="_blank">实现</a></li><li id="16db" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated"><strong class="jw iy">通过切换开关启用</strong>内联代码编辑器。</li><li id="b8ec" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">用下面的代码更新 index.js 文件，并用您的存储桶的名称更新您的-BUCKET-NAME。</li><li id="90ce" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">单击 package.json 并粘贴以下内容以替换其内容。</li><li id="a19c" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">点击页面底部的<strong class="jw iy">部署</strong>。</li></ul><figure class="lr ls lt lu gt ir"><div class="bz fp l di"><div class="nj mt l"/></div></figure><h1 id="6e54" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">下载并运行前端应用程序</h1><ul class=""><li id="43f0" class="md me ix jw b jx mu kb mv kf nc kj nd kn ne kr mi mj mk ml bi translated">将此存储库克隆到您的本地机器:<a class="ae mr" href="https://github.com/priyankavergadia/visionapi-dialogflow.git" rel="noopener ugc nofollow" target="_blank">https://github . com/priyankavergadia/vision API-dialog flow . git</a></li><li id="8e42" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">转到包含代码/的目录。或者，您可以下载 zip 格式的示例并解压缩。</li></ul><h1 id="d475" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">设置您的本地环境</h1><p id="973b" class="pw-post-body-paragraph ju jv ix jw b jx mu jz ka kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr ij bi translated">部署时，您的应用程序使用内置于应用程序引擎环境中的云 SQL 代理与您的云 SQL 实例进行通信。但是，要在本地测试您的应用程序，您必须在您的开发环境中安装并使用云 SQL 代理的本地副本。点击了解更多关于云 SQL 代理<a class="ae mr" href="https://cloud.google.com/sql/docs/mysql/sql-proxy" rel="noopener ugc nofollow" target="_blank">的信息。要在云 SQL 实例上执行基本的管理任务，可以使用 MySQL 客户端。</a></p><p id="9f63" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw iy">注意:</strong>您必须认证 gcloud 才能使用代理从本地机器连接</p><h1 id="fd68" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">安装云 SQL 代理</h1><p id="f244" class="pw-post-body-paragraph ju jv ix jw b jx mu jz ka kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr ij bi translated">下载并安装云 SQL 代理。云 SQL 代理用于在本地运行时连接到您的云 SQL 实例。</p><p id="8790" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">下载代理服务器:</p><pre class="lr ls lt lu gt nk nl nm nn aw no bi"><span id="3620" class="np kt ix nl b gy nq nr l ns nt">curl -o cloud_sql_proxy <a class="ae mr" href="https://dl.google.com/cloudsql/cloud_sql_proxy.darwin.amd64" rel="noopener ugc nofollow" target="_blank">https://dl.google.com/cloudsql/cloud_sql_proxy.darwin.amd64</a></span></pre><p id="6960" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">使代理可执行:</p><pre class="lr ls lt lu gt nk nl nm nn aw no bi"><span id="6915" class="np kt ix nl b gy nq nr l ns nt">chmod +x cloud_sql_proxy</span></pre><h1 id="8188" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">创建云 SQL 实例</h1><ul class=""><li id="9273" class="md me ix jw b jx mu kb mv kf nc kj nd kn ne kr mi mj mk ml bi translated">为 MySQL 二代实例创建一个云 SQL。命名实例<em class="nu">“民意测验实例”</em>或类似。实例准备就绪可能需要几分钟时间。实例准备好后，它应该在实例列表中可见。请确保创建第二代实例。</li><li id="c439" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">现在使用 Cloud SDK 运行以下命令，其中[YOUR_INSTANCE_NAME]表示您的云 SQL 实例的名称。记下为 connectionName 显示的值，以供下一步使用。connectionName 值的格式为<strong class="jw iy">【项目名称】:【区域名称】:【实例名称】</strong></li></ul><pre class="lr ls lt lu gt nk nl nm nn aw no bi"><span id="0e10" class="np kt ix nl b gy nq nr l ns nt">gcloud sql instances describe [YOUR_INSTANCE_NAME]</span></pre><ul class=""><li id="f7bd" class="md me ix jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">或者，您可以通过单击实例从控制台获得<strong class="jw iy">连接名称</strong></li></ul><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi nv"><img src="../Images/0e4af3e1be681c6b3afee106f18e6696.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dzfvnlZoag0ntNd-"/></div></div></figure><h1 id="9f8e" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">初始化您的云 SQL 实例</h1><ul class=""><li id="9433" class="md me ix jw b jx mu kb mv kf nc kj nd kn ne kr mi mj mk ml bi translated">使用上一步中的 connectionName 启动云 SQL 代理。</li></ul><pre class="lr ls lt lu gt nk nl nm nn aw no bi"><span id="54a3" class="np kt ix nl b gy nq nr l ns nt">./cloud_sql_proxy -instances=”[YOUR_INSTANCE_CONNECTION_NAME]”=tcp:3306</span></pre><ul class=""><li id="d1a6" class="md me ix jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">将[您的实例连接名称]替换为您在上一步中记录的连接名称的值。</li><li id="f7a3" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">这一步建立了从本地计算机到云 SQL 实例的连接，用于本地测试。在本地测试应用的整个过程中，保持云 SQL 代理运行。</li></ul><p id="17c9" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">接下来，创建一个新的云 SQL 用户和数据库。</p><ul class=""><li id="8b71" class="md me ix jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">使用 Google CloudConsole 为您的云 SQL 实例 polls-instance 创建一个新数据库。例如，您可以使用名称民意测验。</li></ul><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi nw"><img src="../Images/4017ae66c771b04af4c1f2cc7bfe5b36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MGFGKLe3M0KRwWFl"/></div></div></figure><ul class=""><li id="6095" class="md me ix jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">使用 Google CloudConsole 为您的云 SQL 实例 polls-instance 创建一个新用户。</li></ul><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi nw"><img src="../Images/5ba72a6c261e242eb0c509d0c39cf1a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tGxId4UMG5Ojqd0P"/></div></div></figure><h1 id="2b26" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">配置数据库设置</h1><ul class=""><li id="e38f" class="md me ix jw b jx mu kb mv kf nc kj nd kn ne kr mi mj mk ml bi translated">打开 mysite/settings-changeme.py 进行编辑。</li><li id="9a08" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">将该文件重命名为 setting.py</li><li id="d474" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">在两个地方，将[您的用户名]和[您的密码]替换为您之前在步骤“创建云 SQL 实例”中创建的数据库用户名和密码。这有助于为 App Engine 部署和本地测试建立到数据库的连接。</li><li id="9c93" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">在“HOST”行中，“cloud SQL/[项目名称]:[区域名称]:[实例名称]”用您在上一步中获取的实例名称替换[项目名称]:[区域名称]:[实例名称]。</li><li id="dfb1" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">运行以下命令。为下一步复制输出的 connectionName 值。</li></ul><pre class="lr ls lt lu gt nk nl nm nn aw no bi"><span id="6dfa" class="np kt ix nl b gy nq nr l ns nt">gcloud sql instances describe [YOUR_INSTANCE_NAME]</span></pre><ul class=""><li id="8338" class="md me ix jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">将[您的连接名称]替换为上一步中的连接名称</li><li id="e1be" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">用您在“初始化您的云 SQL 实例”步骤中选择的名称替换[您的数据库],然后关闭并保存 settings.py</li></ul><pre class="lr ls lt lu gt nk nl nm nn aw no bi"><span id="e772" class="np kt ix nl b gy nq nr l ns nt"># [START db_setup]</span><span id="d762" class="np kt ix nl b gy nx nr l ns nt">if os.getenv(‘GAE_APPLICATION’, None):</span><span id="66c9" class="np kt ix nl b gy nx nr l ns nt"># Running on production App Engine, so connect to Google Cloud SQL using</span><span id="4c8a" class="np kt ix nl b gy nx nr l ns nt"># the unix socket at /cloudsql/&lt;your-cloudsql-connection string&gt;</span><span id="e0d5" class="np kt ix nl b gy nx nr l ns nt">DATABASES = {</span><span id="5981" class="np kt ix nl b gy nx nr l ns nt">‘default’: {</span><span id="e5e7" class="np kt ix nl b gy nx nr l ns nt">‘ENGINE’: ‘django.db.backends.mysql’,</span><span id="4f35" class="np kt ix nl b gy nx nr l ns nt">‘HOST’: ‘/cloudsql/[PROJECT_NAME]:[REGION_NAME]:[INSTANCE_NAME]’,</span><span id="8f45" class="np kt ix nl b gy nx nr l ns nt">‘USER’: ‘[YOUR-USERNAME]’,</span><span id="b5e1" class="np kt ix nl b gy nx nr l ns nt">‘PASSWORD’: ‘[YOUR-PASSWORD]’,</span><span id="8f49" class="np kt ix nl b gy nx nr l ns nt">‘NAME’: ‘[YOUR-DATABASE]’,</span><span id="b7ff" class="np kt ix nl b gy nx nr l ns nt">}</span><span id="b807" class="np kt ix nl b gy nx nr l ns nt">}</span><span id="efe1" class="np kt ix nl b gy nx nr l ns nt">else:</span><span id="edee" class="np kt ix nl b gy nx nr l ns nt"># Running locally so connect to either a local MySQL instance or connect to</span><span id="5301" class="np kt ix nl b gy nx nr l ns nt"># Cloud SQL via the proxy. To start the proxy via command line:</span><span id="4c70" class="np kt ix nl b gy nx nr l ns nt"># $ cloud_sql_proxy -instances=[INSTANCE_CONNECTION_NAME]=tcp:3306</span><span id="8b16" class="np kt ix nl b gy nx nr l ns nt"># See <a class="ae mr" href="https://cloud.google.com/sql/docs/mysql-connect-proxy" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/sql/docs/mysql-connect-proxy</a></span><span id="0c08" class="np kt ix nl b gy nx nr l ns nt">DATABASES = {</span><span id="12c0" class="np kt ix nl b gy nx nr l ns nt">‘default’: {</span><span id="47c8" class="np kt ix nl b gy nx nr l ns nt">‘ENGINE’: ‘django.db.backends.mysql’,</span><span id="0c3f" class="np kt ix nl b gy nx nr l ns nt">‘HOST’: ‘127.0.0.1’,</span><span id="de99" class="np kt ix nl b gy nx nr l ns nt">‘PORT’: ‘3306’,</span><span id="03ef" class="np kt ix nl b gy nx nr l ns nt">‘NAME’: ‘[YOUR-DATABASE]’,</span><span id="c514" class="np kt ix nl b gy nx nr l ns nt">‘USER’: ‘[YOUR-USERNAME]’,</span><span id="7a17" class="np kt ix nl b gy nx nr l ns nt">‘PASSWORD’: ‘[YOUR-PASSWORD]’</span><span id="7e4f" class="np kt ix nl b gy nx nr l ns nt">}</span><span id="3e29" class="np kt ix nl b gy nx nr l ns nt">}</span><span id="ac96" class="np kt ix nl b gy nx nr l ns nt"># [END db_setup]</span></pre><h1 id="7a13" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">设置服务帐户</h1><ul class=""><li id="e984" class="md me ix jw b jx mu kb mv kf nc kj nd kn ne kr mi mj mk ml bi translated">在 Dialogflow 的控制台中，进入设置⚙，在常规选项卡下，你会看到谷歌项目部分。单击服务帐户。这将打开谷歌云控制台。</li></ul><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi nw"><img src="../Images/1a97eccc398d12aaed84d1ccfe20d980.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*a8ctqKJrLs-Ig5Lb"/></div></div></figure><ul class=""><li id="fc82" class="md me ix jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">在 Google Cloudconsole 中，呈现的网页会显示 Dialogflow 服务账号。点击最右边的“<strong class="jw iy">动作</strong>部分的 3 个点，然后点击“<strong class="jw iy">创建键</strong></li></ul><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi nw"><img src="../Images/7da3963bebb23254a96139b6967adad5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*b6VWcDEZtqvBMW3N"/></div></div></figure><ul class=""><li id="c57e" class="md me ix jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">一个 JSON 文件将被下载到您的计算机上，您将需要在下面的设置部分。</li></ul><h1 id="809b" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">设置要从应用程序调用的 Dialogflow DetectIntent 端点</h1><ul class=""><li id="012b" class="md me ix jw b jx mu kb mv kf nc kj nd kn ne kr mi mj mk ml bi translated">在聊天文件夹内，用自己的凭证 json 文件替换<strong class="jw iy"> <em class="nu"> key-sample.json </em> </strong>，并将其命名为<strong class="jw iy"> <em class="nu"> key.json </em> </strong>。</li><li id="ed2b" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">在聊天文件夹的 views.py 中，将 GOOGLE_PROJECT_ID = " <your_project_id>"更改为您的项目 ID</your_project_id></li></ul><h1 id="71e9" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">创建 GCS 存储桶</h1><h2 id="7a75" class="np kt ix bd ku ny nz dn ky oa ob dp lc kf oc od lg kj oe of lk kn og oh lo oi bi translated">为前端静态对象创建 GCS 存储桶</h2><ul class=""><li id="cc87" class="md me ix jw b jx mu kb mv kf nc kj nd kn ne kr mi mj mk ml bi translated">导航到 Google CloudProject，从汉堡菜单中点击存储</li></ul><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi oj"><img src="../Images/6ee1cc74e08970d415468fd33031d5a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5LGGu4fHbvaDxW6f"/></div></div></figure><ul class=""><li id="4b8d" class="md me ix jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">点击“创建新存储桶”</li><li id="340a" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">提供名称—这必须是一个全局唯一的名称</li></ul><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ok"><img src="../Images/0234031dd1b439a4fe5833b0b95a61ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3nbL1pZ0k4ky32zD"/></div></div></figure><ul class=""><li id="2ae4" class="md me ix jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">选择存储数据的位置—选择“区域”并选择最适合您需求的位置。</li><li id="ddf3" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">选择数据的默认存储类别为“标准”</li></ul><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ol"><img src="../Images/fab84bbec55160a34ccd6180e5db9a58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1D-G7I9udTsVFvpl"/></div></div></figure><ul class=""><li id="4318" class="md me ix jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">选择如何控制对对象的访问，如“在存储桶级别统一设置权限”,然后继续创建存储桶。</li></ul><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi om"><img src="../Images/3df20d048aecb6f1acc739c9a772d6ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LpI5JUMZC2Zbdfyc"/></div></div></figure><ul class=""><li id="9dca" class="md me ix jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">一旦创建了 bucket，单击“Browser”并找到您刚刚创建的 bucket。</li><li id="0ecd" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">单击右侧对应于存储桶的三个点，然后单击“编辑存储桶权限”</li></ul><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div class="gh gi on"><img src="../Images/be1d219a4b902d6a3b0058de6695c8d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/0*lUXjXgDqn2W6MH_x"/></div></figure><ul class=""><li id="9280" class="md me ix jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">在显示的侧面板中，单击“添加成员”，然后添加新成员“<em class="nu"> allUsers </em>”，然后单击“选择角色”，添加“<em class="nu">存储对象查看器</em>”角色。我们这样做是为了向所有用户提供对静态前端文件的查看访问。对于文件来说，这不是理想的安全设置，但对于这个特定的实验来说，这是可行的。</li></ul><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi oo"><img src="../Images/0ce38e91c572f2b69f9815b034df841a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TRB9Y_6JzbJ4okXU"/></div></div></figure><h1 id="51ac" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">为用户上传的图像创建 GCS 存储桶</h1><p id="6a4b" class="pw-post-body-paragraph ju jv ix jw b jx mu jz ka kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr ij bi translated">按照相同的说明，创建一个单独的存储桶来上传用户图像。</p><p id="03ab" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">将权限设置为“所有用户”，并将角色设置为“存储对象创建者”和“存储对象查看者”</p><h1 id="04ef" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">在前端应用程序中配置 GCS 存储桶</h1><h2 id="06ef" class="np kt ix bd ku ny nz dn ky oa ob dp lc kf oc od lg kj oe of lk kn og oh lo oi bi translated">在 settings.py 中配置 GCS 存储桶</h2><ul class=""><li id="5a9a" class="md me ix jw b jx mu kb mv kf nc kj nd kn ne kr mi mj mk ml bi translated">打开 mysite/setting.py</li><li id="2507" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">找到 GCS_BUCKET 变量，并用您的 GCS 静态 BUCKET 替换"<your-gcs-bucket-name>"</your-gcs-bucket-name></li><li id="1dd7" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">找到 GS_MEDIA_BUCKET_NAME 变量，并用图像的 GCS 存储桶名称替换“<your-gcs-bucket-name-media>”。</your-gcs-bucket-name-media></li><li id="43ab" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">找到 GS_STATIC_BUCKET_NAME 变量，并用静态文件的 GCS 存储桶名称替换“<your-gcs-bucket-name-static>”。</your-gcs-bucket-name-static></li><li id="d38f" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">保存文件。</li></ul><pre class="lr ls lt lu gt nk nl nm nn aw no bi"><span id="6442" class="np kt ix nl b gy nq nr l ns nt">GCS_BUCKET = ‘&lt;YOUR-GCS-BUCKET-NAME&gt;’</span><span id="18d1" class="np kt ix nl b gy nx nr l ns nt">GS_MEDIA_BUCKET_NAME = ‘&lt;YOUR-GCS-BUCKET-NAME-MEDIA&gt;’</span><span id="2c61" class="np kt ix nl b gy nx nr l ns nt">GS_STATIC_BUCKET_NAME = ‘&lt;YOUR-GCS-BUCKET-NAME-STATIC&gt;’</span></pre><h1 id="3268" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">在 home.html 配置 GCS 存储桶</h1><ul class=""><li id="bb44" class="md me ix jw b jx mu kb mv kf nc kj nd kn ne kr mi mj mk ml bi translated">打开聊天-&gt;模板-&gt; home-changeme.html</li><li id="c227" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">将其重命名为 home.html</li><li id="6366" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">查找<your-gcs-bucket-name-media>,并将其替换为您希望保存用户上传文件的位置的 bucket 名称。我们这样做是为了不将用户上传的文件存储在前端，并将静态资产全部保存在 GCS bucket 中。Vision API 调用 GCS bucket 来获取文件并进行预测。</your-gcs-bucket-name-media></li></ul><h1 id="7ab5" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">在本地构建并运行应用程序</h1><ul class=""><li id="ddf4" class="md me ix jw b jx mu kb mv kf nc kj nd kn ne kr mi mj mk ml bi translated">要在本地计算机上运行 Django 应用程序，您需要设置一个 Python 开发环境，包括 Python、pip 和 virtualenv。有关说明，请参见<a class="ae mr" href="https://cloud.google.com/python/setup" rel="noopener ugc nofollow" target="_blank">为谷歌云平台</a>设置 Python 开发环境。</li><li id="ea47" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">创建一个独立的 Python 环境，并安装依赖项:</li></ul><pre class="lr ls lt lu gt nk nl nm nn aw no bi"><span id="3a87" class="np kt ix nl b gy nq nr l ns nt">virtualenv env</span><span id="6987" class="np kt ix nl b gy nx nr l ns nt">source env/bin/activate</span><span id="0cfb" class="np kt ix nl b gy nx nr l ns nt">pip install -r requirements.txt</span></pre><ul class=""><li id="82de" class="md me ix jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">运行 Django 迁移来设置您的模型:</li></ul><pre class="lr ls lt lu gt nk nl nm nn aw no bi"><span id="7f8d" class="np kt ix nl b gy nq nr l ns nt">python3 manage.py makemigrations</span><span id="9ef5" class="np kt ix nl b gy nx nr l ns nt">python3 manage.py makemigrations polls</span><span id="3ae5" class="np kt ix nl b gy nx nr l ns nt">python3 manage.py migrate</span></pre><ul class=""><li id="1649" class="md me ix jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">启动本地 web 服务器:</li></ul><pre class="lr ls lt lu gt nk nl nm nn aw no bi"><span id="393b" class="np kt ix nl b gy nq nr l ns nt">python3 manage.py runserver</span></pre><ul class=""><li id="4546" class="md me ix jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">在你的网络浏览器中，输入这个地址<a class="ae mr" href="http://localhost:8000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8000/ </a>你应该会看到一个简单的网页，上面有文本:“Dialogflow”文本框和提交按钮。</li></ul><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi op"><img src="../Images/8484bbda7c17abaa0769a0eb7ffdf0be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rtI6kHpbFVgXyhR5"/></div></div></figure><p id="84bd" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">示例应用程序页面由运行在您计算机上的 Django web 服务器提供。当您准备好继续前进时，按 Ctrl+C 停止本地 web 服务器。</p><h1 id="f61a" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">将应用部署到应用引擎标准环境</h1><p id="480e" class="pw-post-body-paragraph ju jv ix jw b jx mu jz ka kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr ij bi translated">将所有静态内容收集到一个文件夹中。该命令将应用程序的所有静态文件移动到 settings.py 中 STATIC_ROOT 指定的文件夹中:</p><pre class="lr ls lt lu gt nk nl nm nn aw no bi"><span id="78d6" class="np kt ix nl b gy nq nr l ns nt">python3 manage.py collectstatic</span></pre><p id="1a94" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">通过在 app.yaml 文件所在的应用程序目录中运行以下命令来上传应用程序:</p><pre class="lr ls lt lu gt nk nl nm nn aw no bi"><span id="e89f" class="np kt ix nl b gy nq nr l ns nt">gcloud app deploy</span></pre><p id="4a4f" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">等待通知您更新已完成的消息。</p><h1 id="27d8" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">测试在云中运行的前端应用程序</h1><p id="f863" class="pw-post-body-paragraph ju jv ix jw b jx mu jz ka kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr ij bi translated">在您的 web 浏览器中，输入以下地址:</p><pre class="lr ls lt lu gt nk nl nm nn aw no bi"><span id="363e" class="np kt ix nl b gy nq nr l ns nt">https://&lt;your_project_id&gt;.appspot.com</span></pre><p id="1b87" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这一次，您的请求由运行在 App Engine 标准环境中的 web 服务器提供服务。</p><p id="9bef" class="pw-post-body-paragraph ju jv ix jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">该命令按照 app.yaml 中的描述部署应用程序，并将新部署的版本设置为默认版本，使其为所有新流量提供服务。</p><h1 id="fe8e" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">生产</h1><p id="85c3" class="pw-post-body-paragraph ju jv ix jw b jx mu jz ka kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr ij bi translated">当您准备好在生产中提供内容时，在 mysite/settings.py 中，将 DEBUG 变量更改为 False。</p><h1 id="bb5b" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">测试你的聊天机器人！</h1><p id="1fbe" class="pw-post-body-paragraph ju jv ix jw b jx mu jz ka kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr ij bi translated">让我们用下面的提示来测试我们的聊天机器人</p><ol class=""><li id="993a" class="md me ix jw b jx jy kb kc kf mf kj mg kn mh kr mz mj mk ml bi translated">用户:“嗨”</li><li id="d57a" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mz mj mk ml bi translated">聊天机器人回应:“嗨！可以上传一张图探索地标。”</li><li id="705f" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mz mj mk ml bi translated">用户:上传图像。</li><li id="1c06" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mz mj mk ml bi translated">下载一张带有地标的图片，命名为“demo.jpg”</li><li id="5283" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mz mj mk ml bi translated">聊天机器人回应:“文件正在处理中，这里是结果:XXXX <whatever landmark="" is="" in="" your="" image="">”</whatever></li><li id="f441" class="md me ix jw b jx mm kb mn kf mo kj mp kn mq kr mz mj mk ml bi translated">总体来说，应该是这样的。</li></ol><figure class="lr ls lt lu gt ir gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi oq"><img src="../Images/9dcc061fe696f2ef241a781f21c0811d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bV1UdPxtBH6Gl_Vs"/></div></div></figure><h1 id="8f1c" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">清除</h1><p id="ed08" class="pw-post-body-paragraph ju jv ix jw b jx mu jz ka kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr ij bi translated">确保删除 Google Cloud 项目和 Dialogflow 代理，以避免产生任何费用。</p><h1 id="0abb" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">资源和后续步骤</h1><p id="f9ab" class="pw-post-body-paragraph ju jv ix jw b jx mu jz ka kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr ij bi translated">查看我的视频系列<a class="ae mr" href="https://www.youtube.com/playlist?list=PLIivdWyY5sqK5SM34zbkitWLOV-b3V40B" rel="noopener ugc nofollow" target="_blank"> <em class="nu">解构聊天机器人</em> </a>，在这里我分享如何开始使用 Dialogflow 和谷歌云工具建立对话体验。</p><h1 id="151c" class="ks kt ix bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">参考</h1><p id="6e17" class="pw-post-body-paragraph ju jv ix jw b jx mu jz ka kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr ij bi translated">Appengine 上的<a class="ae mr" href="https://cloud.google.com/dialogflow/" rel="noopener ugc nofollow" target="_blank"> Dialogflow </a>，<a class="ae mr" href="https://cloud.google.com/python/django/appengine" rel="noopener ugc nofollow" target="_blank">Django app</a>，<a class="ae mr" href="https://github.com/vkosuri/django-dialogflow" rel="noopener ugc nofollow" target="_blank">https://github.com/vkosuri/django-dialogflow</a></p></div></div>    
</body>
</html>