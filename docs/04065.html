<html>
<head>
<title>AI generating football video game commentary</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">人工智能生成足球视频游戏解说</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/ai-generating-football-video-game-commentary-271f56f45bf?source=collection_archive---------13-----------------------#2019-06-26">https://towardsdatascience.com/ai-generating-football-video-game-commentary-271f56f45bf?source=collection_archive---------13-----------------------#2019-06-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cb60" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我使用 GPT 2 语言模型为谷歌足球环境实时生成动态评论的方法。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9a5b953cc5f6981f3912431b38050960.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*cYWJNId0aV_X0I0EReWbCQ.gif"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Sample kickoff commentary generated in real-time by the model trained on commentary lines from the FIFA video game series.</figcaption></figure><p id="8811" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你已经玩了 FIFA 系列视频游戏很多年了，你可能已经在游戏的解说中听过很多次了</p><blockquote class="lu lv lw"><p id="9f7f" class="ky kz lx la b lb lc ju ld le lf jx lg ly li lj lk lz lm ln lo ma lq lr ls lt im bi translated">“大家好，马丁·泰勒和阿兰·史密斯在这里，我们今天的比赛来自英超联赛。”</p><p id="5ed0" class="ky kz lx la b lb lc ju ld le lf jx lg ly li lj lk lz lm ln lo ma lq lr ls lt im bi translated">"他已经看出了那里的对手进行拦截的意图。"</p><p id="9656" class="ky kz lx la b lb lc ju ld le lf jx lg ly li lj lk lz lm ln lo ma lq lr ls lt im bi translated">“嗯，我们可以得到一些关于伤势的消息。我认为杰夫·史瑞夫斯正在调查此案。”</p></blockquote><p id="4d08" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些相同的短语和台词在游戏中出现如此频繁的原因是因为它们是在视频游戏的开发过程中预先录制的，并在比赛的特定事件中根据记忆回放。在游戏系列中，大多数新台词都是每隔几年才录制和发布一次，这使得评论相当重复和乏味，尤其是如果你像我一样经常玩这个游戏的话(不幸的是，比我应该玩的多得多)。</p><p id="650f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我接下这个项目的目的是探索一个人工智能是否可以在游戏中每次发生相同事件时帮助生成动态的即兴台词。希望这能让游戏更真实，更接近真实足球比赛的解说。</p><h2 id="90ff" class="mb mc it bd md me mf dn mg mh mi dp mj lh mk ml mm ll mn mo mp lp mq mr ms mt bi translated">游戏环境</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/89aa467a0bde07e5493449766eec0147.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gH2A8JGnq24oOzgTRnIhSw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Google Research Football Environment [<a class="ae mv" href="https://ai.googleblog.com/2019/06/introducing-google-research-football.html" rel="noopener ugc nofollow" target="_blank">source</a>]</figcaption></figure><p id="9828" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于这个项目，我正在使用谷歌人工智能团队最近发布的一个<a class="ae mv" href="https://ai.googleblog.com/2019/06/introducing-google-research-football.html" rel="noopener ugc nofollow" target="_blank">足球模拟环境</a>。虽然它是为了训练强化学习代理而引入的，但我们也可以将它用于其他目的，比如生成评论。启动并运行环境就像编写下面的代码一样简单。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mw mx l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Running random actions on an 11-vs-11 instance of the environment. [<a class="ae mv" href="https://github.com/google-research/football/blob/master/paper.pdf" rel="noopener ugc nofollow" target="_blank">source</a>]</figcaption></figure><p id="e121" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个环境的美妙之处在于它允许我们一步一步地玩游戏，在每一步它都使用<a class="ae mv" href="https://gym.openai.com/" rel="noopener ugc nofollow" target="_blank"> OpenAI 的 gym API </a>给我们关于游戏状态的完整信息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi my"><img src="../Images/6baabd80db72be9f17528f6771f12af6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*kxcmWdSStg8URv_pndGaNQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">State Observations available through the API. See full list <a class="ae mv" href="https://github.com/google-research/football#observations" rel="noopener ugc nofollow" target="_blank">here</a>.</figcaption></figure><p id="4b94" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">像进球、黄牌、当前游戏模式(任意球、射门)等信息。)以及 python 代码中的更多内容。这使得推断比赛事件并将其提供给语言模型以在游戏中讲述这些特定事件变得非常容易。</p><h2 id="1025" class="mb mc it bd md me mf dn mg mh mi dp mj lh mk ml mm ll mn mo mp lp mq mr ms mt bi translated">文本生成器</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8da4a9c37cfbceaf44e14a6e94a41f77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WUg7fGtRiTlkYUeGtM0mdg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">[<a class="ae mv" href="https://www.eyerys.com/articles/news/gpt-2-ai-could-have-significant-societal-impacts-openai-scared" rel="noopener ugc nofollow" target="_blank">image source</a>]</figcaption></figure><p id="2659" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这让我想到了这个项目的评论生成部分。我使用的是<a class="ae mv" href="https://openai.com/blog/better-language-models/" rel="noopener ugc nofollow" target="_blank"> OpenAI 的 GPT-2 </a>语言模型，这是我在<a class="ae mv" rel="noopener" target="_blank" href="/openai-gpt-2-writes-alternate-endings-for-game-of-thrones-c9be75cd2425">之前的文章</a>中提到过的，以防你有兴趣了解更多。基本上，给定一个关于某个主题的小文本提示，这个神经网络可以生成关于该主题的长而随机的句子，这使得它非常适合我们在这个项目中的用例。通过将游戏信息作为提示输入这个模型，我们可以让它生成其余的评论。</p><h2 id="0a25" class="mb mc it bd md me mf dn mg mh mi dp mj lh mk ml mm ll mn mo mp lp mq mr ms mt bi translated">收集培训数据</h2><p id="c207" class="pw-post-body-paragraph ky kz it la b lb mz ju ld le na jx lg lh nb lj lk ll nc ln lo lp nd lr ls lt im bi translated">我从 YouTube 上下载了关于<a class="ae mv" href="https://www.youtube.com/watch?v=795ttHjcuNA" rel="noopener ugc nofollow" target="_blank"> FIFA </a>和<a class="ae mv" href="https://www.youtube.com/watch?v=eH2rVkeLdQw" rel="noopener ugc nofollow" target="_blank"> PES </a>比赛的视频的英文注释，这给了我一个标准足球评论的语料库。不幸的是，这些注释错误百出，而且没有任何标点符号。我能想到的唯一纠正方法是手动编辑语料库，这占用了我在这个项目中的大部分时间！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/dd12684d5a15612d0c63e599028719a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tcBACyulh7DyVF9XvfX0Tw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">YouTube auto-generated captions available via <a class="ae mv" href="https://pypi.org/project/youtube_dl/" rel="noopener ugc nofollow" target="_blank">YouTube API</a>.</figcaption></figure><h2 id="4038" class="mb mc it bd md me mf dn mg mh mi dp mj lh mk ml mm ll mn mo mp lp mq mr ms mt bi translated">培训和结果</h2><p id="e8e2" class="pw-post-body-paragraph ky kz it la b lb mz ju ld le na jx lg lh nb lj lk ll nc ln lo lp nd lr ls lt im bi translated">接下来，我<a class="ae mv" href="https://github.com/ChintanTrivedi/football_ai_commentary/blob/master/src/train_commentary_gpt2.ipynb" rel="noopener ugc nofollow" target="_blank">在这个数据集上微调了预训练的 345M 版 GPT-2 </a>模型。使用这个，我们可以将足球环境中的比赛信息作为输入提供给这个模型，并让它完成其余的评论文本，如下面的示例格式所示。</p><blockquote class="lu lv lw"><p id="d8cb" class="ky kz lx la b lb lc ju ld le lf jx lg ly li lj lk lz lm ln lo ma lq lr ls lt im bi translated">输入:这是这一方的目标！</p><p id="3eea" class="ky kz lx la b lb lc ju ld le lf jx lg ly li lj lk lz lm ln lo ma lq lr ls lt im bi translated">输出:好吧，如果你继续进入那种区域，球就会落向你，而对他来说，它完美地落下了。这对任何人来说都是一个教训，有助于保持在 18 码区和 6 码区的位置，你就会得分！</p></blockquote><p id="d58c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了在玩游戏时重现实时评论体验，我使用了一个名为<a class="ae mv" href="https://pypi.org/project/pyttsx3/" rel="noopener ugc nofollow" target="_blank"> pyttsx3 </a>的 python 文本到语音引擎来读出 GPT-2 模型的输出。实时音频评论结果显示在下面嵌入的视频中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf mx l"/></div></figure><h2 id="c8a7" class="mb mc it bd md me mf dn mg mh mi dp mj lh mk ml mm ll mn mo mp lp mq mr ms mt bi translated">最后的想法</h2><p id="d052" class="pw-post-body-paragraph ky kz it la b lb mz ju ld le na jx lg lh nb lj lk ll nc ln lo lp nd lr ls lt im bi translated">根据我使用这种方法的经验，我注意到/了解到以下几点</p><ol class=""><li id="6b10" class="ng nh it la b lb lc le lf lh ni ll nj lp nk lt nl nm nn no bi translated">GPT-2 每次都产生动态和变化的句子，但是这些句子中的许多短语是重复的，因为大模型很容易记住小训练数据集。我试图通过尽早结束训练过程来限制这个问题，以防止它过度适应输入。然而，理想的解决方案是大规模增加训练集的大小，有望使模型的输出更加动态。</li><li id="7bbf" class="ng nh it la b lb np le nq lh nr ll ns lp nt lt nl nm nn no bi translated">我们需要提供更多的上下文作为模型的输入，如长期的比赛总结(比赛时间，比分等。)以及发生了什么事件的更简明的短期细节(谁进球了，以什么方式进球——头球还是远射，等等)。).有了更多的背景，这个模型将有望描述事件的细节，而不是像我这样只是随意猜测。</li></ol><p id="eaef" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">虽然解决这些限制超出了这项工作的范围，但我仍然对这个人工智能目前能够做的事情感到有趣。它展示了人工智能语言模型在彻底改造视频游戏叙事方面的巨大潜力！</p></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><p id="02b4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请随意在下面链接的 GitHub 资源库中查看该项目的源代码，如果您能改进这些结果，请告诉我！:)</p><div class="ob oc gp gr od oe"><a href="https://github.com/ChintanTrivedi/football_ai_commentary" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">ChintanTrivedi/足球 _ ai _ 解说</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">人工智能生成实时足球评论。贡献给 ChintanTrivedi/football _ ai _ 解说开发由…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">github.com</p></div></div><div class="on l"><div class="oo l op oq or on os ks oe"/></div></div></a></div><p id="0f74" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我还要感谢 Jonathan 在 YouTube 注释上就训练 GPT-2 模型以及如何改进结果进行了有益的讨论。</p></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><p id="a874" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢您的阅读。如果你喜欢这篇文章，你可以在<a class="ae mv" href="https://medium.com/@chintan.t93" rel="noopener">媒体</a>、<a class="ae mv" href="https://github.com/ChintanTrivedi" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上关注我的更多作品，或者订阅我的<a class="ae mv" href="http://youtube.com/c/DeepGamingAI" rel="noopener ugc nofollow" target="_blank"> YouTube 频道</a>。</p></div></div>    
</body>
</html>