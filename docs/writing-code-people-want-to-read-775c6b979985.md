# 编写人们想阅读的代码

> 原文：<https://towardsdatascience.com/writing-code-people-want-to-read-775c6b979985?source=collection_archive---------30----------------------->

![](img/9b1f3677e0a525cdab1dc9e8e1c0d38e.png)

Image courtesy of P[ixabay](https://pixabay.com/photos/coffee-glass-beverage-coffee-mug-1583550/)

## 或者如何写出不会让你想揪头发的代码！

那是 5 年前，我第一次创建我的第一个编程项目。我是一个毫无头绪的大一新生，正在学习 C++编程入门课程。我很想撒谎说我是一个天生的程序员，但是我的第一个项目的一个片段是这样的:

```
int main()
{
    string a;
    string b; getline(cin, a);
    getline(cin, b); if ((a == 'g') || (b == 'c')
    {
        ...
        if (condition#2)
        {
            ...
            if (condition#3)
            {
                ...
            }
            else if (condition#4)
            {
                ...
            }
    }    return 0;
}
```

耶克斯。我希望我能说筑巢就此停止。

提醒你，我的程序成功了。我曾经认为，只要程序产生适当的输出，它内部看起来如何并不重要。反正没有人会去读它。*错*。

> 事实上，花在阅读和写作上的时间比远远超过 10 比 1。作为编写新代码工作的一部分，我们不断地阅读旧代码。…[因此，]让它容易阅读，就更容易写作。罗伯特·马丁

事实是，人们花在阅读代码上的时间比写代码的时间还多。乍一看，这似乎并不明显，但是无论你是在浏览文档、调试旧程序，还是仅仅想出要写的下一行代码，*你都在阅读代码*。

这里有一个简单的练习:找一个你不久前写的程序，试着理解它做什么。真正投入进去。注意你如何命名你的变量和函数，缩进每一行，形成每一个`if`语句。检查哪个函数调用哪个函数，以及为什么程序是这样构造的。目标是确定您是否可以在不运行程序的情况下重新创建程序*的逻辑流。*

*准备好了？走吧。*

![](img/4bf54121940c10959b069dd3f009ad23.png)

Image courtesy of [Pixabay](https://pixabay.com/photos/doors-choices-choose-decision-1767562/)

很难，不是吗？即使您的代码是平滑和干净的，您仍然必须努力尝试重新创建逻辑流程，因为您必须及时倒回，并记住您做出的导致您的代码的决策。

现在想象一下:如果是另一个人写的代码会怎么样？你需要付出更多的努力来理解它，因为你不知道代码是如何创建的。你所拥有的只是写在你面前的东西。如果那个人写了糟糕的代码呢？*如果我写在上面的代码中有一个 bug(很可能有),而你的任务是调试它，你会有什么感觉？*

这是另一个练习。下面是做完全相同事情的三段代码(注意，这些代码不是用特定的语言编写的)。看看哪个最容易理解:

What?

I can at least understand it

Aha!

在功能上，这三个代码片段是相同的。当你把它喂给这个假想语言的假想编译器(和 Python 没关系，*我保证*)时，它们都会产生同样的程序，你可以保证函数的所有输出都是一样的。

但是，很明显，第三个片段要好看得多。这本书不仅可读，而且读起来很有乐趣。它不会让人挠头或产生歧义。事情就是这样。通过简单地阅读它，你可以毫无疑问地确定这个函数是做什么的:它计算一个圆柱体的体积。如果你能一直这样写代码，那你就可以自我表扬了。*你有伟大的代码*。

虽然我承认这是一个简单的演示，但它包含了深刻的思想，可以帮助您轻松提高代码的可读性:

*   **抓紧时间起名字，起好名字**。这适用于变量、函数、文件名、包等等。确保你写的是自己的意思，写的是自己的意思。如果只有一种合理的方式来解释你的代码，那么你就降低了任何人(包括你自己)误解你的逻辑的风险。
*   **注释解释代码是好的。解释代码的代码是最好的。评论的普遍问题是它们经常被忽视。当带有注释的代码被重构时，注释很有可能不会随之更新。曾经有用的评论现在变成了彻头彻尾的谎言。[自文档化代码](https://en.wikipedia.org/wiki/Self-documenting_code)(例如上面的第三个片段)提供了与上面第一点相同的好处:减少了歧义和误解的机会(另外，看起来更清晰！).**

作为奖励，我从我的第一个项目中学到了一课:

*   **委托:使函数更短**。把你的代码想象成一门生意。企业由不同的部门组成，每个部门都被期望执行特定的任务，并可能返回从这些任务中获得的结果。如果你在一个巨大的函数中运行所有的代码，你就像一个没有明确边界的公司；也许在开始时你能妥善管理，但一旦公司扩大，肯定会有问题，而且你不知道谁该负责。制作更短的函数。将特定的任务委派给这些职能部门，只让主要职能部门负责协调每项任务。他是头儿，那是他的工作。如果你的代码出现任何问题，你将确切地知道它发生在哪里以及为什么会发生。

![](img/a8debfc53e57689e8aefe29e203ba3de.png)

Image courtesy of [Pixabay](https://pixabay.com/photos/pets-dog-corgi-cute-4415649/)

虽然这绝不是一个全面的指南列表，您可以做这些来使您的代码更具可读性和更令人愉快(事实上，它只是触及了表面)，但是采用这三个简单的原则可以显著提高代码的质量。再次:**适当命名，委派任务，让代码自己说话**。

> 任何傻瓜都能写出计算机能理解的代码。优秀的程序员编写人类能够理解的代码。—马丁·福勒

记住:程序员不像作者。我们*是*作者。我们的工作不仅仅是编写功能性代码，还包括编写能够向他人传达我们的意图、独创性和创造力的代码，即其他人想要阅读的代码。

## **延伸阅读**

*   编写干净代码的最高权威，鲍伯·马丁叔叔。他的名为 [Clean Code](https://amzn.to/320MrFh) 的书是任何程序员的必读之作。
*   [设计原则和设计模式](https://web.archive.org/web/20150906155800/http://www.objectmentor.com/resources/articles/Principles_and_Patterns.pdf) —这是鲍勃大叔介绍面向对象编程的[坚实](https://www.baeldung.com/solid-principles)原则的论文。
*   [设计图案](https://amzn.to/30ZrGZh)出自著名的[四人组](https://en.wikipedia.org/wiki/Design_Patterns)
*   关于设计模式的一站式网站。

**阅读更多我的作品**

*   [Python 初学者指南及其怪癖](/beginners-guide-to-python-quirks-and-jargon-8dfcf8ebd590)
*   [熊猫黑客:read_clipboard()](/pandas-hacks-read-clipboard-94a05c031382)

# 关于阿德里安·佩雷亚

*兼职数据科学家，兼职科技作家，全职书呆子。我在教授机器学习和可管理的编程中找到乐趣，* ***字节*** *大小的块。是的，我也很搞笑。咖啡上瘾者。数据可视化的吸盘。愿意为下一个最好的树状图付出我的 1 和 0。*

*关注我上*[*Twitter*](https://twitter.com/adrianmarkperea)*和*[*LinkedIn*](https://www.linkedin.com/in/adrian-perea/)*。*