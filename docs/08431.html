<html>
<head>
<title>Unleash the power of Visual Studio Code (VSCode) on Google Cloud Platform Virtual Machine</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在谷歌云平台虚拟机上释放 Visual Studio 代码(VSCode)的威力</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/unleash-the-power-of-visual-studio-code-vscode-on-google-cloud-platform-virtual-machine-f75f78f49aee?source=collection_archive---------2-----------------------#2019-11-16">https://towardsdatascience.com/unleash-the-power-of-visual-studio-code-vscode-on-google-cloud-platform-virtual-machine-f75f78f49aee?source=collection_archive---------2-----------------------#2019-11-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="61d1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在您的远程虚拟机上获得成熟的本地 IDE 体验！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/842d3dcda3e4e9cf75e6750ce1e323e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dqFo8lwMrp4JyPd4"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@joshuaearle?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Joshua Earle</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f846" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Visual Studio Code(简称 VSCode)是一个强大的、多平台的、免费的代码编辑器，支持多种编程语言[1]。在过去的两年里，它的受欢迎程度有了惊人的增长，这可以从它的谷歌搜索趋势的迅速上升中看出。在这篇文章中，我将分享一种使用安装在本地计算机上的 VSCode 来编辑和运行位于 Google Cloud 虚拟机上的代码的方法。但是首先…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/ef75858396d7e8e359432c9e12d524fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:588/format:webp/1*ol2RRK9jjO8bfmRl_kJKYQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Google Trends comparison between VSCode, Sublime, and Atom from Jan 2016 to Nov 2019.</figcaption></figure><h1 id="184f" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">我有 Jupyter 为什么还要 VSCode？</h1><p id="4af4" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">作为一名数据科学家，当你拥有 Jupyter 笔记本[2]的便利时，为什么还要使用 VSCode？如果你像我一样，那么你的日常数据科学工作包括两个方面。第一个方面是使用著名的 Jupyter 笔记本进行实验。Jupyter 非常适合数据科学项目早期阶段所涉及的那种迭代的、实验性的工作流。一旦您有了想要在生产中运行的产品(每天运行数千次或数百万次)，数据科学家工作的第二个方面就开始了。在许多组织中，您没有专门的制作团队。即使您有这种奢侈，在将代码传递给生产团队之前重构代码也是一个好的实践，以确保产品在部署后能按预期工作。这就是 VSCode 在数据科学工作流中的闪光点！使用 VSCode 从 Jupyter 笔记本中重构代码的细节值得一篇独立的帖子来公正地对待。然而，[3]很好地概述了 VSCode 中可用的重构工具。一个简单的例子是“重命名符号”，它只允许你重命名一个变量一次，但是会自动更新你代码中出现的所有变量！超级得心应手！</p><h1 id="5759" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">先决条件</h1><p id="c38d" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">现在让我们进入这篇文章的细节。既然你正在阅读这篇文章，我假设你已经运行了一个 GCP 计算引擎 VM，并且你的个人电脑上也安装了 VSCode。如果你没有这两个，那么参考<a class="ae ky" href="https://cloud.google.com/compute/docs/quickstart-linux" rel="noopener ugc nofollow" target="_blank">【4】</a>关于如何设置 GCP 计算引擎 VM 和<a class="ae ky" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank">【1】</a>下载并安装 VSCode 到你的本地计算机上。<strong class="lb iu">更新:您还必须安装 gcloud sdk，并按照</strong><a class="ae ky" href="https://cloud.google.com/sdk/install" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">【9】</strong></a>中的说明在您的系统上运行 gcloud init</p><h1 id="c760" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">详细步骤</h1><p id="cc41" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">Mac 和 Linux 用户可以直接跳到这篇文章的<em class="mt">部分，使用内置终端从第 1 步开始。Windows 用户需要注意以下几点:</em></p><p id="e82f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">仅适用于 Windows 用户:</strong></p><ul class=""><li id="2129" class="mu mv it lb b lc ld lf lg li mw lm mx lq my lu mz na nb nc bi translated">从开始菜单，启动<em class="mt"> Windows Powershell </em></li><li id="9143" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">对于这篇文章的<em class="mt">为所有用户</em>部分下的所有剩余步骤，请遵循参考网页上<em class="mt"> Linux 和 MACOS </em>部分下的说明。但是，请记住删除出现的下列内容:<code class="fe ni nj nk nl b">~/.ssh/</code></li><li id="9d68" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">例如，如果参考网页的<em class="mt"> Linux 和 MACOS </em>部分显示:</li></ul><pre class="kj kk kl km gt nm nl nn no aw np bi"><span id="1cb5" class="nq lx it nl b gy nr ns l nt nu">ssh-keygen -t rsa -f ~/.ssh/[KEY_FILENAME] -C [USERNAME]</span></pre><p id="d39c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">改为在<em class="mt"> Windows Powershell </em>中键入:</p><pre class="kj kk kl km gt nm nl nn no aw np bi"><span id="9239" class="nq lx it nl b gy nr ns l nt nu">ssh-keygen -t rsa -f [KEY_FILENAME] -C [USERNAME]</span></pre><p id="0737" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">重要！不要按照网页的 Windows 部分的说明操作，因为我还不能让它在我的 Windows10 桌面上运行。</strong></p><p id="373c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">适用于所有用户:</strong> <br/>遵循以下网页的<em class="mt"> Linux 和 MACOS </em>部分的说明，即使您是 Windows 用户(请阅读上面的<em class="mt">部分，仅适用于 Windows 用户</em>)</p><ol class=""><li id="8182" class="mu mv it lb b lc ld lf lg li mw lm mx lq my lu nv na nb nc bi translated">按照<a class="ae ky" href="https://cloud.google.com/compute/docs/instances/adding-removing-ssh-keys#createsshkeys" rel="noopener ugc nofollow" target="_blank">【5】</a>中的说明，在您的本地计算机上设置 SSH 密钥。Windows 用户，记得去掉<code class="fe ni nj nk nl b">~/.ssh/</code></li><li id="59c1" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu nv na nb nc bi translated">按照<a class="ae ky" href="https://cloud.google.com/compute/docs/instances/adding-removing-ssh-keys#locatesshkeys" rel="noopener ugc nofollow" target="_blank">【6】</a>中的说明，在本地计算机上找到并复制您的 SSH 密钥。Windows 用户，默认情况下你的密钥保存在<code class="fe ni nj nk nl b">C:\Users\your-windows-username</code></li><li id="dce6" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu nv na nb nc bi translated">您必须将此 SSH 密钥(从您的计算机)添加到您的 Google cloud platform 帐户。您可以按照<a class="ae ky" href="https://cloud.google.com/compute/docs/instances/adding-removing-ssh-keys#project-wide" rel="noopener ugc nofollow" target="_blank">【7】</a>的指示插入整个项目的密钥，也可以按照<a class="ae ky" href="https://cloud.google.com/compute/docs/instances/adding-removing-ssh-keys#instance-only" rel="noopener ugc nofollow" target="_blank">【8】</a>的指示插入特定虚拟机的密钥。我个人倾向于将它添加到特定的虚拟机中，以便进行组织。记住，您需要复制的公共 SSH 密钥是。pub 文件。Windows 用户，最好在记事本中打开此文件并复制其内容。</li><li id="bc1c" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu nv na nb nc bi translated">现在，在本地计算机上打开 VSCode。在 Windows 上按<em class="mt"> Ctrl+Shift+x </em>打开 VSCode 中的扩展管理器。在搜索框中，键入<em class="mt"> remote-ssh，</em>并安装这个扩展。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/2c6da470536378da8e6476f1d91b9ea4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MoWRvdouxEs7A00XZXXC0g.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Install Remote-SSH extension in VSCode on your local computer</figcaption></figure><p id="39b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">5.安装完成后，在电脑上按<em class="mt"> Ctrl+Shift+p </em>(或者在 Mac 上按<em class="mt"> Cmd+Shift+p </em>调出命令面板，键入<em class="mt"> remote-ssh </em>。应该会出现一组选项，如下图所示。单击<em class="mt">添加新的 SSH 主机… </em>选项。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/aa547d764fbcffdc32796530677e9ba7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*DBlF_DKukebyonkg2hwlGg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Add New SSH Host… is the second option</figcaption></figure><p id="b963" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">6.在弹出的 Enter SSH Connection 命令提示符下，键入:<code class="fe ni nj nk nl b">ssh -i ~/.ssh/[KEY_FILENAME] [USERNAME]@[External IP]</code>并按 Enter 键。KEY_FILENAME 和 USERNAME 是您在步骤#1 中键入的内容。外部 IP 可以在您的 GCP 计算引擎虚拟机实例页面中找到，并且对每个虚拟机都是唯一的。又弹出一个提示，要求您<em class="mt">选择 SSH 配置文件来更新</em>。只需点击第一个，您应该会看到<em class="mt">主机已添加！</em>在 VSCode 窗口的右下角。</p><p id="8f74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">对 Windows 用户很重要！</strong>，而不是~/。ssh/[KEY_FILENAME]，您必须键入带有\\ "的完整路径。例如，<code class="fe ni nj nk nl b">ssh -i C:\\Users\\your-windows-username\\[KEY_FILENAME] [USERNAME]@[External IP]</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/c3cf1c3b875f5be117b0dd57d6c55658.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*cz1rvsbK5mbUDtfPtdhrvw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Select the first option</figcaption></figure><p id="5255" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">7.按下<em class="mt"> Ctrl+Shift+p </em>(或者 Mac 上的<em class="mt"> Cmd+Shift+p </em>)打开命令面板，再次键入 remote-ssh。这次点击<em class="mt">连接到主机</em>。然后从弹出的列表中选择虚拟机的 IP 地址。如果您再次看到关于指纹的弹出窗口，请点按“继续”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/c25ceb832cb36dfb3569acf8eec1a629.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*JS9hFC0NUCTQBmwe8WbWpA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Connect to Host is the fifth option above</figcaption></figure><p id="a0f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">8.就是这样！您的本地 Visual Studio 代码现在已经连接到您的 GCP 虚拟机了！您可以单击打开文件夹或打开文件，这将显示虚拟机中的文件，可以直接从本地计算机上运行的 VSCode 编辑这些文件。</p><h2 id="aeb6" class="nq lx it bd ly nz oa dn mc ob oc dp mg li od oe mi lm of og mk lq oh oi mm oj bi translated">常见问题</h2><p id="9427" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">我已经在 Mac、Linux 和 Windows10 桌面上测试了上述步骤。因此，如果您在此过程中遇到任何错误，很可能您犯了以下常见错误之一:</p><ul class=""><li id="98e7" class="mu mv it lb b lc ld lf lg li mw lm mx lq my lu mz na nb nc bi translated">您的 GCP 虚拟机已停止。启动 GCP 虚拟机，然后重试。</li><li id="8fce" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">在第 6 步中，您要么提供了错误的 KEY_FILENAME 位置，要么提供了错误的用户名或错误的外部 IP。请记住，如果您没有为 GCP 虚拟机设置静态 IP，那么您可能需要在每次停止和启动虚拟机时执行第 6 步，因为外部 IP 地址可能会发生变化。始终提供正在运行的虚拟机的当前外部 IP。</li><li id="a010" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">您按照[5]、[6]、[7]和[8]下的网页中的 Windows 说明进行了操作。DONT！回过头来，按照 Linux 和 MACOS 下的说明重做所有步骤，并做我上面提到的小修改</li></ul><p id="0304" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这篇文章对你有所帮助。如果有，请在下面告诉我。编码快乐！</p></div><div class="ab cl ok ol hx om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="im in io ip iq"><p id="8321" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">参考资料:<br/>【1】下载 vs code:<a class="ae ky" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank">https://code.visualstudio.com/</a><br/>【2】下载 Anaconda 使用 Jupyter 笔记本:<a class="ae ky" href="https://www.anaconda.com/distribution/" rel="noopener ugc nofollow" target="_blank">https://www.anaconda.com/distribution/</a><br/>【3】vs code 中的重构选项:<a class="ae ky" href="https://code.visualstudio.com/docs/editor/refactoring" rel="noopener ugc nofollow" target="_blank">https://code.visualstudio.com/docs/editor/refactoring</a><br/>【4】启动一个 GCP 计算实例 VM:<a class="ae ky" href="https://cloud.google.com/compute/docs/quickstart-linux" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/compute/docs/quickstart-linux</a><br/>【5】在本地计算机上创建 SSH 密钥:<a class="ae ky" href="https://cloud.google.com/compute/docs/instances/adding-removing-ssh-keys#createsshkeys" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/Compute/docs/instances/add-removed-SSH-keys</a></p></div></div>    
</body>
</html>