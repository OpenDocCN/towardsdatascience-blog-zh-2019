<html>
<head>
<title>Plotly Express Yourself</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">巧妙地表达自己</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/plotly-express-yourself-98366e35ad0f?source=collection_archive---------9-----------------------#2019-05-13">https://towardsdatascience.com/plotly-express-yourself-98366e35ad0f?source=collection_archive---------9-----------------------#2019-05-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="304c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用 Python 中的 Plotly Express 快速浏览基本可视化。</h2></div><p id="c705" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我最近发现了<a class="ae lb" href="https://medium.com/@plotlygraphs/introducing-plotly-express-808df010143d" rel="noopener"> Plotly Express </a>，我非常兴奋地将它添加到我的工具箱中，因为它的潜力。</p><p id="4854" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于那些不熟悉 Plotly 的人(或者更困惑为什么会有一个<strong class="kh ir"> express </strong>版本的<em class="lc"> need </em>)，让我们让你了解一下。</p><p id="7137" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Plotly 是一个<a class="ae lb" href="https://plot.ly/graphing-libraries/" rel="noopener ugc nofollow" target="_blank">可视化库</a>，可以在许多平台上使用，包括 Java、Python 和 R(这是我个人过去使用 Plotly 的经验，尽管有限)以及 Plotly(组织)<a class="ae lb" href="https://plot.ly/feed/#/" rel="noopener ugc nofollow" target="_blank">的商业产品</a>。Plotly 很棒，因为你可以创建高度互动的可视化，而不是通过<code class="fe ld le lf lg b">matplotlib</code>或<code class="fe ld le lf lg b">seaborn</code> ( <code class="fe ld le lf lg b">matplotlib</code>更酷的兄弟)的静态可视化。例如:</p><figure class="li lj lk ll gt lm gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/b073eda31db72a66c28fa2173a784022.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*RACV7j01g2RBZGO36tuZpw.gif"/></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk"><a class="ae lb" href="https://mangrobang.shinyapps.io/Project_Draft_AV/" rel="noopener ugc nofollow" target="_blank">https://mangrobang.shinyapps.io/Project_Draft_AV/</a></figcaption></figure><p id="7053" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是不利的一面(至少对我来说)是，在 Plotly 中完成任何事情总让人感觉有很多代码行。例如，前面绘图的代码如下所示(为了简洁起见，没有包括一些数据设置):</p><pre class="li lj lk ll gt lt lg lu lv aw lw bi"><span id="16bc" class="lx ly iq lg b gy lz ma l mb mc">p &lt;- plot_ly(draft<br/>                 , x = ~Rnd<br/>                 , y = ~First4AV<br/>                 , type = "scatter"<br/>                 , mode = "markers"</span><span id="a421" class="lx ly iq lg b gy md ma l mb mc">, color = ~draft$Position.Standard<br/>                 , colors = brewer.pal(8, "Spectral")<br/>                 , marker = list(size = 10, opacity = .25 )<br/>    ) %&gt;%<br/>      # Plot the average for each draft round<br/>      layout(title = "Accumulated AV over First 4 Years of Player Careers by Draft Round, Yrs 1994-2012") %&gt;%<br/>      layout(xaxis = xx, yaxis = yy) %&gt;%<br/>      add_trace( data=avg.4.AV, x = ~Rnd, y = ~avg.F4.AV, type = "scatter"<br/>              , name = "Avg 4-Yr AV", color=I("lightpink"), mode="lines" ) %&gt;%<br/>      # Plot the predicted value<br/>      add_trace(x = input.rnd, y = mod.draft.pred(), type = "scatter"<br/>              , mode = "markers"<br/>              , marker = list(symbol='x',size=15, color='black')) %&gt;%<br/>      layout(annotations = jj) %&gt;%<br/>      layout(annotations = pr)</span><span id="52f1" class="lx ly iq lg b gy md ma l mb mc">p</span></pre><p id="f7f4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意上面是用 R 写的，不是 Python，因为我过去用 Plotly 的大部分经验都是用 R 写的。但是我在 Python 中看到和使用的似乎在语法复杂性上是相似的。</p><p id="d6fb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Plotly Express 所做的是围绕基本 Plotly 代码创建一个更高级别的包装器，因此语法更简单。对我来说，这意味着更容易学习，更容易建立编码肌肉记忆。减少从旧项目中复制和粘贴代码或堆栈溢出！</p><p id="8c48" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了测试它，我认为这将是有用的，通过一些标准的勘探地块运行。当我们完成时，我们希望最终能为 Plotly Express 提供一个方便的备忘单！</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h2 id="703e" class="lx ly iq bd ml mm mn dn mo mp mq dp mr ko ms mt mu ks mv mw mx kw my mz na nb bi translated">准备！(和前言思想)</h2><ol class=""><li id="2b6b" class="nc nd iq kh b ki ne kl nf ko ng ks nh kw ni la nj nk nl nm bi translated">对于我们的测试数据，我在 Kaggle 上找到了这个关于超级英雄的有趣数据集(嘿，我刚看了复仇者联盟 4：终局之战！):</li></ol><figure class="li lj lk ll gt lm gh gi paragraph-image"><div role="button" tabindex="0" class="no np di nq bf nr"><div class="gh gi nn"><img src="../Images/4aadd116d14117035570f3ddf206addd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vVi3nUMpi-Uf3iY84V4_AA.png"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">Multiple Spider-Men and Captains America? Yes, the multiverse exists!</figcaption></figure><p id="81cf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2.获取和清理数据的代码以及下面的片段可以在这个<a class="ae lb" href="https://github.com/MangrobanGit/blog_px/blob/master/blog_2.ipynb" rel="noopener ugc nofollow" target="_blank"> jupyter 笔记本这里</a>找到。</p><p id="23a1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">3.如果您尚未安装或导入它:</p><pre class="li lj lk ll gt lt lg lu lv aw lw bi"><span id="8466" class="lx ly iq lg b gy lz ma l mb mc"># Install<br/>pip install plotly_express</span><span id="e0ee" class="lx ly iq lg b gy md ma l mb mc"># Import<br/>import plotly_express as px</span></pre><p id="74aa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">4.我们假设您对下面显示的图有一些概念上的熟悉，所以我们不会深究每个图的优缺点。但是我们也会在可能的时候添加一些想法和参考。</p><p id="6c78" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">5.以下情节的外观变化很大，因为我很好奇各种内置模板(即主题)的外观和感觉。所以，如果这很烦人，我很抱歉，但就像我提到的，我正在努力弯曲所有的肌肉。</p><h2 id="20fa" class="lx ly iq bd ml mm mn dn mo mp mq dp mr ko ms mt mu ks mv mw mx kw my mz na nb bi translated">绘制单变量数据</h2><p id="7dfa" class="pw-post-body-paragraph kf kg iq kh b ki ne jr kk kl nf ju kn ko ns kq kr ks nt ku kv kw nu ky kz la ij bi translated">让我们来看几个经典的方法来对<strong class="kh ir">连续</strong>变量进行单变量探索:直方图和箱线图。</p><p id="23e9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">直方图(单变量)</strong>:</p><pre class="li lj lk ll gt lt lg lu lv aw lw bi"><span id="62e4" class="lx ly iq lg b gy lz ma l mb mc">px.histogram(data_frame=heroes_clean<br/>     , x="Strength"<br/>     , title="Strength Distribution : Count of Heroes"<br/>     , template='plotly'<br/>     )</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/a686bff9b1aa1357abf92abb19eadc21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*VZfYFVz8perywrKGvpg7qw.gif"/></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">Not the prettiest histogram.</figcaption></figure><p id="6800" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以在这里阅读更多关于直方图有多酷的信息。</p><p id="7f03" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">箱线图(单变量):</strong></p><p id="f97b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">…以及箱线图。简单中透着优雅。</p><pre class="li lj lk ll gt lt lg lu lv aw lw bi"><span id="0631" class="lx ly iq lg b gy lz ma l mb mc">px.box(data_frame=heroes<br/>    , y="Speed"<br/>    , title="Distribution of Heroes' Speed Ratings"<br/>    , template='presentation'<br/>    )</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/58334e499d1ef95574bfd712e2411e0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*owNlBjH6A8DxL8aGpwZXBA.gif"/></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">Boxplot.</figcaption></figure><p id="a78f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">更多信息可在箱线图<a class="ae lb" href="https://medium.com/@hussein.sajid7/data-visualization-box-plot-989b69967834?sk=97e0c9969b829920eb6b3d6fdb6db411" rel="noopener">此处</a>、箱线图<a class="ae lb" href="https://dev.to/annalara/deconstructing-the-box-and-whisker-plot-11f3" rel="noopener ugc nofollow" target="_blank">此处</a>和箱线图<a class="ae lb" href="https://medium.com/@larrychewy/the-box-and-the-bees-7d0b6ded65db" rel="noopener">此处</a>中找到。但是如果你觉得盒子情节有点方，也许小提琴情节也可以？</p><p id="e43a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">小提琴剧情</strong></p><pre class="li lj lk ll gt lt lg lu lv aw lw bi"><span id="7bf8" class="lx ly iq lg b gy lz ma l mb mc">px.violin(data_frame=heroes<br/>          , y="Speed"<br/>          , box=True<br/>          , title="Distribution of Heroes' Speed Ratings"<br/>          , template='presentation'<br/>         )</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/9b225f4638df7769e87ded56bf2ed4ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*EjWgpjZ3CPosoUU7SbGOHg.gif"/></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">More of an upright bass plot.</figcaption></figure><p id="0a19" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lb" href="https://en.wikipedia.org/wiki/Violin_plot" rel="noopener ugc nofollow" target="_blank">小提琴情节</a>越来越受欢迎。我喜欢把它们看作 boxplot 更酷、更帅的兄弟姐妹。哎哟。</p><p id="2ee3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，如果您想要探究的变量或特征是<strong class="kh ir">分类的</strong>，而不是连续的，该怎么办呢？在这种情况下，您可能希望从一个条形图开始，以获得对数值计数的感觉。</p><p id="d89d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">条形图(单变量)</strong></p><pre class="li lj lk ll gt lt lg lu lv aw lw bi"><span id="8caf" class="lx ly iq lg b gy lz ma l mb mc">px.bar(data_frame=heroes_publisher<br/>       , x='publisher'<br/>       , y='counts'<br/>       , template='plotly_white'<br/>       , title='Count of Heroes by Publisher'<br/>      )</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/9b1064e3bcdb6364e1664728f18a77ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*SU3VA5w6c7FQxULrePzi0A.gif"/></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">Remember when NBC’s Heroes was cool?</figcaption></figure><p id="cb21" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里有一个关于<a class="ae lb" href="https://medium.com/@Infogram/the-dos-and-donts-of-bar-charts-bd2df09e5cd1" rel="noopener">条形图</a>的快速入门。</p><p id="aa4a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">单变量分析很好，但实际上，我们通常希望将变量与其他变量进行比较，试图梳理出有趣的关系，这样我们就可以建立模型。因此，让我们继续在一些二元技术的例子上建立我们的<code class="fe ld le lf lg b">plotly-express</code>超能力。</p><h2 id="4c94" class="lx ly iq bd ml mm mn dn mo mp mq dp mr ko ms mt mu ks mv mw mx kw my mz na nb bi translated">绘制二元数据</h2><p id="2293" class="pw-post-body-paragraph kf kg iq kh b ki ne jr kk kl nf ju kn ko ns kq kr ks nt ku kv kw nu ky kz la ij bi translated">让我们从比较<strong class="kh ir">连续</strong>变量<strong class="kh ir">和连续</strong>变量开始。</p><p id="e38a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">散点图</strong></p><pre class="li lj lk ll gt lt lg lu lv aw lw bi"><span id="d83c" class="lx ly iq lg b gy lz ma l mb mc">px.scatter(data_frame=heroes<br/>           , x="Strength"<br/>           , y="Intelligence"<br/>           , trendline='ols'<br/>           , title='Heroes Comparison: Strength vs Intelligence'<br/>           , hover_name='Name'<br/>           , template='plotly_dark'<br/>          )</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/174716ddc55ecd86dab656be648c598a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*zMJ7vnB8F_UXx-M0ZXkx_g.gif"/></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">If a theoretical character has 0 Strength, they at least rate 57 in Intelligence. Hmm.</figcaption></figure><p id="6382" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lb" href="https://medium.com/@mia.iseman/in-praise-of-scatterplots-and-bubble-charts-e1f39548ee84" rel="noopener">散点图</a>是比较两个连续(数字)变量的可靠方法。这是快速评估两个变量之间是否存在关系的好方法。</p><p id="9f5e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的例子中，我们通过添加一条<a class="ae lb" href="https://en.wikipedia.org/wiki/Ordinary_least_squares" rel="noopener ugc nofollow" target="_blank">趋势线</a>来进一步帮助自己确定关系。看来在<code class="fe ld le lf lg b">Strength</code>和<code class="fe ld le lf lg b">Intelligence</code>之间存在微弱的正相关。</p><p id="5d3b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">线条图</strong></p><pre class="li lj lk ll gt lt lg lu lv aw lw bi"><span id="a758" class="lx ly iq lg b gy lz ma l mb mc">px.line(data_frame=heroes_first_appear_year<br/>        ,x='Year'<br/>        ,y='Num_Heroes'<br/>        ,template='ggplot2'<br/>        ,title="Number of Heroes by Year of First Appearance"<br/>        ,labels={"Num_Heroes":"Number of Heroes"}<br/>       )</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/579d9d9a16168298782941f36dda55b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*ZtMFuL9T13sla35MsB0X-A.gif"/></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">The early ’60s was a big turning point in comic superheroes.</figcaption></figure><p id="415d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">连续与连续比较的一个特例是<strong class="kh ir">时间序列</strong>。经典的方法是用<a class="ae lb" href="https://medium.com/@patrickbfuller/line-plot-7b4068a3a9fc" rel="noopener">线图</a>。几乎总是日期/时间变量沿着 x 轴，而另一个连续变量沿着 y 轴测量。现在你可以看到它是如何随着时间的推移而变化的！</p><p id="e36e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们想要<strong class="kh ir">比较分类变量和连续变量</strong>呢？事实证明，我们可以只使用单变量技术，但只是“重复”它们！我最喜欢的方法之一是使用堆叠直方图。我们可以为连续变量，分类变量的每个值做一个直方图，然后把它们叠加起来！</p><p id="49da" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，让我们再看一下之前在<code class="fe ld le lf lg b">Strength</code>上的直方图，但是这次我们想看看由<code class="fe ld le lf lg b">Gender</code>分离出来的数据。</p><p id="486b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">堆积直方图</strong></p><pre class="li lj lk ll gt lt lg lu lv aw lw bi"><span id="e223" class="lx ly iq lg b gy lz ma l mb mc">px.histogram(data_frame=heroes[~heroes.Gender.isna()]<br/>             , x="Strength"<br/>             , color='Gender'<br/>             , labels={'count':'Count of Heroes'}<br/>             , title="Strength Distribution : Count of Heroes"<br/>             , template='plotly'<br/>            )</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/d15dc4c3b0bd708793b4b8121239d978.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*VDfpxIs_xpYXkg--INdsVg.gif"/></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">I’m guessing the big bar for 10–19 is non-superpowered characters, like Batman. Nerd.</figcaption></figure><p id="2f01" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">可能堆栈让您感到困惑，您只想看到按媒体夹分组的条形:</p><p id="31d3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">堆积直方图(分组仓)</strong></p><pre class="li lj lk ll gt lt lg lu lv aw lw bi"><span id="c8e1" class="lx ly iq lg b gy lz ma l mb mc">px.histogram(data_frame=heroes[~heroes.Gender.isna()]<br/>             , x="Strength"<br/>             , color='Gender'<br/>             , barmode = 'group'<br/>             , labels={'count':'Count of Heroes'}<br/>             , title="Strength Distribution : Count of Heroes"<br/>             , template='plotly'<br/>            )</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div role="button" tabindex="0" class="no np di nq bf nr"><div class="gh gi nv"><img src="../Images/59886bf8d41aaead00e804d77e39f9e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*If6o48ZZ36IsIlfEA1ZIPQ.gif"/></div></div></figure><p id="49a1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">…或者，如果这两种外观中的任何一种在视觉上对您来说都太过繁忙，那么您可能只想为每个类别值绘制一个图。你会看到这有时被称为刻面(或者至少我是这样称呼它的)。</p><p id="b81b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">多面直方图</strong></p><pre class="li lj lk ll gt lt lg lu lv aw lw bi"><span id="fe93" class="lx ly iq lg b gy lz ma l mb mc">px.histogram(data_frame=heroes[~heroes.Gender.isna()]<br/>             , x="Strength"<br/>             , color='Gender'<br/>             , facet_row='Gender'<br/>             , labels={'count':'Count of Heroes'}<br/>             , title="Strength Distribution"<br/>             , template='plotly'<br/>             )</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/93a919f178711e34c56045f9ef1d6fc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*djbefzmm7pjAW20eu1mUfg.gif"/></div></figure><p id="f302" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">哇，我被历史淘汰了。让我们看看如何将相同的分面/分割概念应用于盒状图。</p><p id="0d60" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">分割方框图</strong></p><pre class="li lj lk ll gt lt lg lu lv aw lw bi"><span id="84b5" class="lx ly iq lg b gy lz ma l mb mc">px.box(data_frame=heroes[~heroes.Gender.isna()]<br/>        , y="Speed"<br/>        , color="Gender"<br/>        , title="Distribution of Heroes' Speed Ratings"<br/>        , template='presentation'<br/>        )</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/485c1b3372d3c8d715b088cc20275983.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*SJ5PSLN82ddKehzWDR5RHQ.gif"/></div></figure><p id="38a8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">无论盒子情节可以做什么，小提琴情节也可以！</p><p id="c2dd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">分裂小提琴剧情</strong></p><pre class="li lj lk ll gt lt lg lu lv aw lw bi"><span id="b532" class="lx ly iq lg b gy lz ma l mb mc">px.violin(heroes[~heroes.Gender.isna()]<br/>        , y="Speed"<br/>        , color="Gender"<br/>        , box=True<br/>        , title="Distribution of Heroes' Speed Ratings"<br/>        , template='presentation'<br/>       )</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/d96b7289bd9c68ec9535f2383a905a15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*lRgV1RvJMvP363CNn6_ljg.gif"/></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">‘Agender’ characters have higher median (and likely mean) Speed.</figcaption></figure><p id="ac18" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么，如果你只想比较<strong class="kh ir">分类值和</strong>分类值呢？如果是这种情况，你通常想看看相对计数。所以堆积条形图是个不错的选择:</p><p id="a7a5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">堆积条形图(分类对比分类)</strong></p><pre class="li lj lk ll gt lt lg lu lv aw lw bi"><span id="9516" class="lx ly iq lg b gy lz ma l mb mc">px.histogram(data_frame=heroes<br/>             ,x="Publisher"<br/>             ,y="Name"<br/>             ,color="Alignment"<br/>             ,histfunc="count"<br/>             ,title="Distribution of Heroes, by Publisher | Good-Bad-Neutral"<br/>             ,labels={'Name':'Characters'}<br/>             ,template='plotly_white'<br/>            )</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/c3700e38b71656a8c65284c3ef1be3be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*hXO4hKJVxjfQs_0dTqBMfw.gif"/></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">Marvel and DC Comics are pretty top heavy with ‘Good’ characters.</figcaption></figure><p id="448a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">题外话:事实证明，使用<code class="fe ld le lf lg b">.histogram</code>的堆叠条形图更容易，因为它提供了对<code class="fe ld le lf lg b">histfunc</code>的访问，这允许您对直方图应用函数。这省去了必须先进行汇总的步骤(您可能已经注意到，上面的条形图就是这样做的)。</p><h2 id="4d7f" class="lx ly iq bd ml mm mn dn mo mp mq dp mr ko ms mt mu ks mv mw mx kw my mz na nb bi translated">绘制三个或更多变量</h2><p id="b548" class="pw-post-body-paragraph kf kg iq kh b ki ne jr kk kl nf ju kn ko ns kq kr ks nt ku kv kw nu ky kz la ij bi translated">我们可能感觉到了一种模式。通过使用另一种视觉元素，比如颜色，我们可以将任何一元可视化转换成二元(或多元)可视化；或者通过沿着类别值分面/分割。</p><p id="ff4d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们探索添加一个第三变量<strong class="kh ir">。一种常见的技术是使用<strong class="kh ir">颜色</strong>将<strong class="kh ir">分类变量</strong>添加到散点图中。</strong></p><p id="e166" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">彩色散点图</strong></p><pre class="li lj lk ll gt lt lg lu lv aw lw bi"><span id="528b" class="lx ly iq lg b gy lz ma l mb mc">px.scatter(data_frame=heroes[~heroes.Gender.isna()]<br/>           , x="Strength"<br/>           , y="Intelligence"<br/>           , color="Alignment"<br/>           , trendline='ols'<br/>           , title='Heroes Comparison: Strength vs Intelligence'<br/>           , hover_name='Name'<br/>           , opacity=0.5<br/>           , template='plotly_dark'<br/>           )</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/be4268c9f15f1b7996e6c232d7683637.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*HPzGIAOd-y4R9ScYCcjngA.gif"/></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">Similar relationships across Alignments.</figcaption></figure><p id="c6e8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">也许<em class="lc">这些</em>数据对于添加的类别来说并不那么有趣，但是当你找到正确的模式时，类别真的会脱颖而出，例如经典的<a class="ae lb" href="https://archive.ics.uci.edu/ml/datasets/iris" rel="noopener ugc nofollow" target="_blank">虹膜数据集</a>…就像这样:</p><figure class="li lj lk ll gt lm gh gi paragraph-image"><div role="button" tabindex="0" class="no np di nq bf nr"><div class="gh gi nw"><img src="../Images/5f0ecbae6dc188956f86a6605e609a88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W3hG5XoTr4QZbg3SeqpQRA.png"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">credit: <a class="ae lb" href="https://www.plotly.express/" rel="noopener ugc nofollow" target="_blank">https://www.plotly.express/</a></figcaption></figure><p id="f7c4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是回到我们最初的带颜色的散点图，如果我们想添加一个第三连续变量<strong class="kh ir">会怎么样呢？如果我们把它绑在我们的马克笔的<strong class="kh ir">尺寸</strong>上怎么样？</strong></p><p id="6f84" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">散点图，带颜色和大小</strong></p><p id="c52d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面我们添加连续的<code class="fe ld le lf lg b">Power</code>变量作为标记的<strong class="kh ir">大小</strong>。</p><pre class="li lj lk ll gt lt lg lu lv aw lw bi"><span id="b6d3" class="lx ly iq lg b gy lz ma l mb mc">px.scatter(data_frame=heroes[~heroes.Gender.isna()]<br/>           , x="Strength"<br/>           , y="Intelligence"<br/>           , color="Alignment"<br/>           , size="Power"<br/>           , trendline='ols'<br/>           , title='Heroes Comparison: Strength vs Intelligence'<br/>           , hover_name='Name'<br/>           , opacity=0.5<br/>           , template='plotly_dark'<br/>          )</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div role="button" tabindex="0" class="no np di nq bf nr"><div class="gh gi nv"><img src="../Images/c3c7693b48d276a874d962c62b47209a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*1QkG515_X3QYSURiSEzBxA.gif"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">Wow, Galactus is tops in <code class="fe ld le lf lg b">Strength</code>, <code class="fe ld le lf lg b">Intelligence</code>, and <code class="fe ld le lf lg b">Power</code>!</figcaption></figure><p id="5e3d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我注意到的一件事是，图例不会自动为<strong class="kh ir">尺寸</strong>添加图例。这有点烦人。我能说什么呢，Plotly Express 已经在这篇文章中宠坏了我！</p><p id="8cde" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">根据我在文档中所看到的，我们仅仅开始触及可能的表面。我们可以继续下去，但是让我们以更多的例子来结束我们的探索。</p><p id="aa5d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">散布矩阵</strong></p><p id="a1a3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">散点图矩阵在一组连续变量上执行<strong class="kh ir">成对散点图</strong>，然后您可以用<strong class="kh ir">颜色、符号等对其进行定制。代表分类变量</strong>。</p><pre class="li lj lk ll gt lt lg lu lv aw lw bi"><span id="7d4c" class="lx ly iq lg b gy lz ma l mb mc">px.scatter_matrix(data_frame=heroes[~heroes['Gender'].isna()]<br/>                  , dimensions=["Strength", "Speed", "Power"] <br/>                  , color="Alignment"<br/>                  , symbol="Gender" <br/>                  , title='Heroes Attributes Comparison'<br/>                  , hover_name='Name'<br/>                  , template='seaborn'<br/>                 )</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/fde369852b35bb0433a0750bde05f3bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*Y9zbKXmKYB1wwlv_GQAblQ.gif"/></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">Maybe a future release will have the option to toggle the diagonal plots into a histogram (or some other univariate plot).</figcaption></figure><p id="32d9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">带边际图的散点图</strong></p><p id="db75" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这很简洁，但是下一个我真的很喜欢它的简洁。这个想法是，你可以将我们已经讨论过的<strong class="kh ir"/><strong class="kh ir">单变量图</strong>添加到散点图的<strong class="kh ir">边缘。</strong></p><pre class="li lj lk ll gt lt lg lu lv aw lw bi"><span id="cf4b" class="lx ly iq lg b gy lz ma l mb mc">px.scatter(data_frame=heroes[~heroes.Gender.isna()]<br/>           , x="Strength"<br/>           , y="Speed"<br/>           , color="Alignment"<br/>           , title='Strength vs Speed | by Alignment'<br/>           , marginal_x='histogram'<br/>           , marginal_y='box'<br/>           , hover_name='Name'<br/>           , opacity=0.2<br/>           , template='seaborn'<br/>          )</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/25f4371161205e072cd6cfc9ab3d166a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*v2KDLTqivG5BhmSsioKYEA.gif"/></div></figure></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><p id="52c8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">咻！那…太多了。但是我认为这是一个很好的开始，可以创建一个更常见的绘图技术的快速参考，全部使用<strong class="kh ir"> plotly express </strong>。我真的很挖掘我到目前为止所看到的(我们在这个帖子中所做的一切从技术上来说都是一句话！)并期待他们未来的更新！感谢阅读。</p><p id="d0f8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lc">请随意伸手！|</em>T41】LinkedIn|<a class="ae lb" href="https://github.com/MangrobanGit" rel="noopener ugc nofollow" target="_blank">GitHub</a></p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><p id="2eba" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">来源:</strong></p><p id="091e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lb" href="https://www.plotly.express/" rel="noopener ugc nofollow" target="_blank">https://www.plotly.express/</a></p><p id="eb8a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">普洛特利。介绍 Plotly Express，2019 年 3 月 20 日，<a class="ae lb" href="https://medium.com/@plotlygraphs/introducing-plotly-express-808df010143d" rel="noopener">https://medium . com/@ Plotly graphs/introducing-Plotly-Express-808 df 010143d</a>。2019 年 5 月 11 日访问。</p></div></div>    
</body>
</html>