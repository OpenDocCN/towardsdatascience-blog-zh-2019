<html>
<head>
<title>How Fast Numpy Really is and Why?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Numpy 到底有多快，为什么？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-fast-numpy-really-is-e9111df44347?source=collection_archive---------4-----------------------#2019-12-16">https://towardsdatascience.com/how-fast-numpy-really-is-e9111df44347?source=collection_archive---------4-----------------------#2019-12-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d004" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">与标准 Python 列表的比较。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/55606d4b23b5f5b260c4fe995d5005fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tlpwRmRNc6cU6ayGb7_8Ig.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@goumbik?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Lukas</a> on <a class="ae ky" href="https://unsplash.com/s/photos/time?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="36af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最初<strong class="lb iu"> Python </strong>不是为数值计算而设计的。随着人们开始使用 python 完成各种任务，对快速数值计算的需求也随之增加。一群人在 2005 年创建了<strong class="lb iu"> Numpy </strong>来应对这一挑战。</p><p id="962e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在人工智能时代的今天，如果没有 Numpy 这样的快速数字库，就不可能训练机器学习算法。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="87a9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是 Numpy 速度快背后的主要原因。</p><ul class=""><li id="fc06" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated">Numpy 数组是密集存储在内存中的相似数据类型的集合。一个 Python 列表可以有不同的数据类型，这在对其进行计算时会带来很多额外的约束。</li><li id="bce0" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated">Numpy 能够将一个任务分成多个子任务，并并行处理它们。</li><li id="0f8f" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated">Numpy 函数是用 c 实现的，这也使得它比 Python 列表更快。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="9410" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇博客中，我们将对 Numpy 数组和 Python 列表执行以下计算，并比较两者所用的时间。</p><ul class=""><li id="97e3" class="mc md it lb b lc ld lf lg li me lm mf lq mg lu mh mi mj mk bi translated"><strong class="lb iu">添加标量</strong></li><li id="b26d" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated"><strong class="lb iu">点积</strong></li><li id="e466" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated"><strong class="lb iu">串联</strong></li><li id="0618" class="mc md it lb b lc ml lf mm li mn lm mo lq mp lu mh mi mj mk bi translated"><strong class="lb iu">删除</strong></li></ul><p id="1755" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们先导入 Numpy 包。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="d34b" class="mv mw it mr b gy mx my l mz na">import numpy as np</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="76ed" class="nb mw it bd nc nd ne nf ng nh ni nj nk jz nl ka nm kc nn kd no kf np kg nq nr bi translated">添加缩放器</h1><p id="ed37" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">让我们创建一个包含 10000 个元素的 Python 列表，并为列表中的每个元素添加一个标量。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/5707999a7678ce7f212d90708be7a66d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*flT3XB5nhZ4ndLb8_S863A.png"/></div></div></figure><p id="864c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在创建一个包含 10000 个元素的 Numpy 数组，并为数组的每个元素添加一个标量。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/f49c94697e1733cc68dd6bb2ce08e578.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*T7IH6pBVnr2vsVUWMdmFeQ.png"/></div></figure><p id="cf00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这种计算，Numpy 的执行速度比 Python list 快 5 倍。</p><p id="f584" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个计算是在一个大小为 10000 的数组上执行的。让我们看看不同大小的阵列的时间是如何变化的。下图显示了 Numpy 数组在不同数组大小下速度更快的次数。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/aec25c130b845c9768b93c944a29d7b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*8l-ak8WAcmGQuN4wSi5-tw.png"/></div></figure><p id="5084" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当数组大小接近 5，000，000 时，Numpy 的速度提高了大约 120 倍。随着数组大小的增加，Numpy 能够执行更多的并行操作，从而加快计算速度。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="87cf" class="nb mw it bd nc nd ne nf ng nh ni nj nk jz nl ka nm kc nn kd no kf np kg nq nr bi translated">点积</h1><p id="a8aa" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">点积是机器学习算法中最重要和最常见的运算之一。特别是在神经网络训练中，我们需要做大量的矩阵乘法。</p><p id="250e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们来比较一下点积的速度。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/dc25125223979b88de44b699055d81cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*X8ihnYLDSRryF7yOKiXb4A.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/cc1e4f54d76676e0168a9f0a6a42f909.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*HkeEOsLd32hozdNyH7oWbw.png"/></div></figure><p id="1eef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Numpy 大约快 10 倍。让我们画出不同阵列大小的速度。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/ef502e717f84a64317a968a6ef1c1855.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*mw7cUXtY_YId3QHTSucyew.png"/></div></figure><p id="e1bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到点积更快。这大约是我们转向大型阵列时的 140 倍。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="cf8c" class="nb mw it bd nc nd ne nf ng nh ni nj nk jz nl ka nm kc nn kd no kf np kg nq nr bi translated">串联</h1><p id="1809" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">现在我们连接两个数组。我们来对比一下速度。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/7b3dfdad98920edd86edb2cdd373169a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*rBa20bEechQmkqfWYZln7A.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/518bbb33b0aa610561ebc1c0f646682e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*xyVGQD4ik-InvUWRPVJQkA.png"/></div></figure><p id="8089" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们看到连接速度几乎是相似的。即使对于不同的数组大小，连接所用的时间也几乎是相似的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/9185495e2a381e212c4d6be6a35ccb8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*ckjCEnWfgbVLRvfEE9Lvrw.png"/></div></figure><p id="8223" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python 列表可以通过附加一个或多个列表来扩展。但是我们不能扩展现有的 Numpy 数组。当我们连接 2 个 Numpy 数组时，一个新的结果数组被初始化。所以在 python 列表中拼接操作相对更快。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b4d7" class="nb mw it bd nc nd ne nf ng nh ni nj nk jz nl ka nm kc nn kd no kf np kg nq nr bi translated">删除</h1><p id="ea99" class="pw-post-body-paragraph kz la it lb b lc ns ju le lf nt jx lh li nu lk ll lm nv lo lp lq nw ls lt lu im bi translated">我们在这里花点时间，猜猜在执行删除操作的时候哪个东西会更快？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/d5fb6f772cd79e1f88a91503ad2d758c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*jeTnBgvl4BXA9NK5XmXYfA.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/2018fa56a0e7e87e256e1bfe4bfdcf0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*vd8RdLie7BiE6S3PrG-NtQ.png"/></div></figure><p id="48cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">即使对于删除操作，Numpy 数组也更快。随着数组大小的增加，Numpy 比 Python List 快 30 倍左右。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/2cdea8d23d3789787cf1afc612458be3.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*3Ue20IaWb5AjfXjs6hro7g.png"/></div></figure><p id="a1b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为 Numpy 数组由于其同构类型而被密集地打包在内存中，所以它也可以更快地释放内存。</p><p id="fd58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，总的来说，在 Numpy 中执行的任务比标准 python 列表快 5 到 100 倍，这在速度上是一个巨大的飞跃。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="0cc6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下一篇文章中，我将解释 Numpy 数据中的轴和维度。</p><div class="od oe gp gr of og"><a rel="noopener follow" target="_blank" href="/understanding-axes-and-dimensions-numpy-pandas-606407a5f950"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">了解轴和维度| Numpy |熊猫</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">知道如何沿数据的不同轴应用函数。</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">towardsdatascience.com</p></div></div><div class="op l"><div class="oq l or os ot op ou ks og"/></div></div></a></div></div></div>    
</body>
</html>