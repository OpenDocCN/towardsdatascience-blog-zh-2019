<html>
<head>
<title>Python’s One Liner graph creation library with animations Hans Rosling Style</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 的一个线性图形创建库，带有汉斯·罗斯林风格的动画</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/pythons-one-liner-graph-creation-library-with-animations-hans-rosling-style-f2cb50490396?source=collection_archive---------8-----------------------#2019-05-05">https://towardsdatascience.com/pythons-one-liner-graph-creation-library-with-animations-hans-rosling-style-f2cb50490396?source=collection_archive---------8-----------------------#2019-05-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="d717" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">形象化</h2><div class=""/><div class=""><h2 id="4d52" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">动画，单线图。它拥有一切</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/0aa1c867b2902a49151568d856522dac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*smzZRfV0tsw9KDLLzg5jVA.png"/></div></div></figure><p id="a710" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi lz translated"><span class="l ma mb mc bm md me mf mg mh di">我</span>清楚的记得<a class="ae mi" rel="noopener" target="_blank" href="/3-awesome-visualization-techniques-for-every-dataset-9737eecacbe8">海风</a>来的时候。我真的受够了 Matplotlib。为了创建甚至简单的图形，我不得不运行这么多的 StackOverflow 线程。</p><p id="3050" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我本可以花在思考如何呈现数据的好主意上的时间却被用来处理 Matplotlib。这很令人沮丧。 </p><p id="bdc5" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">Seaborn 比 Matplotlib 好得多，但它也需要大量代码才能得到一个简单的“好看”的图形。</p><p id="8bf4" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">当 Plotly 出现时，它试图解决这个问题。当加上熊猫时，plotly 是一个很好的工具。</p><p id="0e06" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">仅仅使用<code class="fe mk ml mm mn b">iplot</code>函数，你就可以用 Plotly 做这么多事情。</p><p id="abb3" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd"> <em class="mj">但还是，不是很直观。至少对我来说不是。</em>T12】</strong></p><p id="1ce1" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我仍然没有切换到 Plotly，只是因为我已经花了足够多的时间与 Seaborn 一起“快速”地做事情，我不想再花更多的时间去学习一个新的可视化库。我在 Seaborn 中创建了自己的函数来创建我最需要的可视化效果。然而这仍然是一种变通办法。我已经放弃了拥有更好的东西的希望。 </p><p id="631d" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd"> <em class="mj">绘声绘色地表达</em>图中的</strong>。是不是很棒？</p><p id="2f75" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">根据 Plotly Express 的创作者(显然也创作了 Plotly)，<strong class="lf jd"> <em class="mj"> Plotly Express 之于 Plotly，犹如 Seaborn 之于 Matplotlib。</em> </strong></p><blockquote class="mo"><p id="fb4c" class="mp mq it bd mr ms mt mu mv mw mx ly dk translated">围绕 Plotly.py 的简洁、一致的高级包装器，用于快速数据浏览和图形生成。</p></blockquote><p id="6d80" class="pw-post-body-paragraph ld le it lf b lg my kd li lj mz kg ll lm na lo lp lq nb ls lt lu nc lw lx ly im bi translated">我只是想尝试一下。</p><p id="72df" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">创造者们让人们开始尝试它变得容易了吗？</p><p id="8e1e" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd"> <em class="mj">为所欲为的俏皮话？</em> </strong> ✅</p><p id="9d1d" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd"> <em class="mj">标准化功能？学会创建散点图，你就差不多学会了这个工具——✅</em></strong></p><p id="a4c7" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">互动图表？✅</strong></p><p id="d328" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">动画？</strong>赛车条形图、时间散点图、—✅地图</p><p id="633d" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">免费开源？</strong> ✅</p><p id="ed6e" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">只是先睹为快，看看在这篇文章结束时我们将能够创造什么(以及更多)。<strong class="lf jd"> <em class="mj">使用单行代码。</em>T44】</strong></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nd"><img src="../Images/44c660aead41c4c2994d896ce002723b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*aGUUCJGEE05DrkfEG5uMPQ.gif"/></div></div></figure><p id="cac0" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">好了，谈够了，让我们开始吧。</p><h1 id="4a8f" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">首先是数据集——有趣、令人沮丧又令人振奋</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nw"><img src="../Images/a9bcf3e0a7a33f9cf472bef609affbf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VL1Vl8hJk7Kfka5atIzH8Q.png"/></div></div></figure><p id="c635" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我们将使用我从 Kaggle 获得的<a class="ae mi" href="https://www.kaggle.com/russellyates88/suicide-rates-overview-1985-to-2016" rel="noopener ugc nofollow" target="_blank">自杀数据集</a>。这个数据集是根据来自联合国、世界银行和世界卫生组织的数据汇编而成的。<strong class="lf jd"> <em class="mj">数据集积累了预防自杀的灵感。我总是支持对数据的这种良好利用。</em> </strong></p><p id="8422" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">你可以找到这篇文章的所有代码，并在这个<a class="ae mi" href="https://www.kaggle.com/mlwhiz/plotly-express/" rel="noopener ugc nofollow" target="_blank"> Kaggle 内核</a>中运行它</p><p id="9e34" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">首先，我将进行一些数据清理，以添加大陆信息和国家 ISO 代码，因为它们在以后会有所帮助:</p><pre class="ks kt ku kv gt nx mn ny nz aw oa bi"><span id="d313" class="ob nf it mn b gy oc od l oe of">import pandas as pd<br/>import numpy as np<br/>import plotly_express as px</span><span id="7a25" class="ob nf it mn b gy og od l oe of"># Suicide Data<br/>suicides = pd.read_csv("../input/suicide-rates-overview-1985-to-2016/master.csv")<br/>del suicides['HDI for year']<br/>del suicides['country-year']</span><span id="1889" class="ob nf it mn b gy og od l oe of"># Country ISO Codes<br/>iso_country_map = pd.read_csv("../input/countries-iso-codes/wikipedia-iso-country-codes.csv")<br/>iso_country_map = iso_country_map.rename(columns = {'English short name lower case':"country"})</span><span id="4b38" class="ob nf it mn b gy og od l oe of"># Load Country Continents file<br/>concap =pd.read_csv("../input/country-to-continent/countryContinent.csv", encoding='iso-8859-1')[['code_3', 'continent', 'sub_region']]<br/>concap = concap.rename(columns = {'code_3':"Alpha-3 code"})</span><span id="60d2" class="ob nf it mn b gy og od l oe of">correct_names = {'Cabo Verde': 'Cape Verde', 'Macau': 'Macao', 'Republic of Korea': "Korea, Democratic People's Republic of" , <br/> 'Russian Federation': 'Russia',<br/> 'Saint Vincent and Grenadines':'Saint Vincent and the Grenadines' <br/> , 'United States': 'United States Of America'}</span><span id="1fa4" class="ob nf it mn b gy og od l oe of">def correct_country(x):<br/>    if x in correct_names:<br/>        return correct_names[x]<br/>    else:<br/>        return x</span><span id="19d8" class="ob nf it mn b gy og od l oe of">suicides['country'] = suicides['country'].apply(lambda x : correct_country(x))</span><span id="dedf" class="ob nf it mn b gy og od l oe of">suicides = pd.merge(suicides,iso_country_map,on='country',how='left')<br/>suicides = pd.merge(suicides,concap,on='Alpha-3 code',how='left')</span><span id="f77e" class="ob nf it mn b gy og od l oe of">suicides['gdp'] = suicides['gdp_per_capita ($)']*suicides['population']</span></pre><p id="e88e" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">让我们看看自杀数据:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oh"><img src="../Images/2c90f7b2a44804daec5f25d23baafd53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a4CGz4c26NkAH-Te-QaI6g.png"/></div></div></figure><p id="7c2a" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我还会按大洲对数据进行分组。老实说，我这样做只是为了展示这个库的威力，因为这篇文章的主要目标仍然是创建令人敬畏的可视化效果。</p><pre class="ks kt ku kv gt nx mn ny nz aw oa bi"><span id="1567" class="ob nf it mn b gy oc od l oe of">suicides_gby_Continent = suicides.groupby(['continent','sex','year']).aggregate(np.sum).reset_index()</span><span id="a302" class="ob nf it mn b gy og od l oe of">suicides_gby_Continent['gdp_per_capita ($)'] = suicides_gby_Continent['gdp']/suicides_gby_Continent['population']</span><span id="64f3" class="ob nf it mn b gy og od l oe of">suicides_gby_Continent['suicides/100k pop'] = suicides_gby_Continent['suicides_no']*1000/suicides_gby_Continent['population']</span><span id="4d84" class="ob nf it mn b gy og od l oe of"># 2016 data is not full<br/>suicides_gby_Continent=suicides_gby_Continent[suicides_gby_Continent['year']!=2016]<br/><br/>suicides_gby_Continent.head()</span></pre><p id="2539" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我们创建的最终数据:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oi"><img src="../Images/6d2c105c92197fa78c1d2d4d2db4285a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZLjhIHcG92VJQIh_fPc48A.png"/></div></div></figure><h1 id="cca9" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">简单易用</h1><p id="366c" class="pw-post-body-paragraph ld le it lf b lg oj kd li lj ok kg ll lm ol lo lp lq om ls lt lu on lw lx ly im bi translated">我们准备好可视化我们的数据。<strong class="lf jd">来时<em class="mj">隐晦地表达</em>到</strong>的时间。我可以通过一个简单的:</p><pre class="ks kt ku kv gt nx mn ny nz aw oa bi"><span id="f45a" class="ob nf it mn b gy oc od l oe of">pip install <strong class="mn jd">plotly_express</strong></span></pre><p id="7a30" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">并将其导入为:</p><pre class="ks kt ku kv gt nx mn ny nz aw oa bi"><span id="d0bd" class="ob nf it mn b gy oc od l oe of">import plotly_express as px</span></pre><p id="6345" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">现在让我们用它创建一个简单的散点图。</p><pre class="ks kt ku kv gt nx mn ny nz aw oa bi"><span id="5f7e" class="ob nf it mn b gy oc od l oe of">suicides_gby_Continent_2007 = suicides_gby_Continent[suicides_gby_Continent['year']==2007]</span><span id="014a" class="ob nf it mn b gy og od l oe of">px.scatter(suicides_gby_Continent_2007,x = 'suicides/100k pop', y = 'gdp_per_capita ($)')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/1461a1a41d886c11d0b2c4951c57abca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PUiqdiqDMUARkDj9EXDaaQ.png"/></div></figure><p id="f749" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">不太鼓舞人心。没错。让我们一步一步地做得更好。让我们按洲给点上色。</p><pre class="ks kt ku kv gt nx mn ny nz aw oa bi"><span id="48ef" class="ob nf it mn b gy oc od l oe of">px.scatter(suicides_gby_Continent_2007,x = 'suicides/100k pop', y = 'gdp_per_capita ($)',color='continent')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/1167fecc813fdcf2edd36e744980add8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yczsZTZZmT1xHN2Q1gOlzw.png"/></div></figure><p id="3f21" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">好但不励志。还没有。</strong></p><p id="825e" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">点看起来好小</strong>。没错。让我们增加点的大小。怎么会？参数可能是什么…</p><pre class="ks kt ku kv gt nx mn ny nz aw oa bi"><span id="97c5" class="ob nf it mn b gy oc od l oe of">px.scatter(suicides_gby_Continent_2007,x = 'suicides/100k pop', y = 'gdp_per_capita ($)',color='ContinentName',size ='suicides/100k pop')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/b54f336efd96d5df6d6c1632fbcbc317.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bT5LcyAV5GWCG6exCn9S0w.png"/></div></figure><p id="9e59" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">你能看出每个洲都有两个点吗？它们代表男性和女性。让我在图表中展示一下。我们可以用几种方法来说明这种区别。<strong class="lf jd"> <em class="mj">我们可以用不同的</em> </strong> <code class="fe mk ml mm mn b"><strong class="lf jd"><em class="mj">symbol</em></strong></code> <strong class="lf jd"> <em class="mj">或者用不同的</em> </strong> <code class="fe mk ml mm mn b"><strong class="lf jd"><em class="mj">facets</em></strong></code> <strong class="lf jd"> <em class="mj">来表示男女</em> </strong></p><p id="1b44" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">让我给他们两个看看。</p><pre class="ks kt ku kv gt nx mn ny nz aw oa bi"><span id="2e78" class="ob nf it mn b gy oc od l oe of">px.scatter(suicides_gby_Continent_2007,x = 'suicides/100k pop', y = 'gdp_per_capita ($)', size = 'suicides/100k pop', color='ContinentName',symbol='sex')</span><span id="a9b8" class="ob nf it mn b gy og od l oe of">Or</span><span id="cda8" class="ob nf it mn b gy og od l oe of">px.scatter(suicides_gby_Continent_2007,x = 'suicides/100k pop', y = 'gdp_per_capita ($)', size = 'suicides/100k pop', color='continent',facet_col='sex')</span></pre><div class="ks kt ku kv gt ab cb"><figure class="op kw oq or os ot ou paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><img src="../Images/a7996f36476e0d93e43db8b3cb94235a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*H12_tRVLrX8znkb7WWicvw.png"/></div></figure><figure class="op kw oq or os ot ou paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><img src="../Images/1ef3d74eb97d836e54268ce27e1b0a6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*yth9xSWh4c__n2GfAXaykQ.png"/></div><figcaption class="ov ow gj gh gi ox oy bd b be z dk oz di pa pb">Fig1: Symbol, Fig2: Facets</figcaption></figure></div><p id="5356" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在符号图中，三角形代表男性，圆形代表女性。我们已经开始从图表中看到一些好的信息。以为例:</p><ul class=""><li id="b6d7" class="pc pd it lf b lg lh lj lk lm pe lq pf lu pg ly ph pi pj pk bi translated">至少在 2007 年的数据中，男性和女性的自杀率存在显著差异。</li><li id="885f" class="pc pd it lf b lg pl lj pm lm pn lq po lu pp ly ph pi pj pk bi translated"><strong class="lf jd"><em class="mj">2007 年欧洲男性极易自杀？</em> </strong></li><li id="74cf" class="pc pd it lf b lg pl lj pm lm pn lq po lu pp ly ph pi pj pk bi translated">收入差距似乎对自杀率没有太大影响。亚洲的人均 GDP 比欧洲低，自杀率也比欧洲低。</li><li id="98f6" class="pc pd it lf b lg pl lj pm lm pn lq po lu pp ly ph pi pj pk bi translated">男性和女性之间似乎没有收入差距。 </li></ul><p id="7bfc" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">还不励志？嗯。<strong class="lf jd"> <em class="mj">让我们添加一些动画</em> </strong>。这应该不难。我会添加更多的参数，</p><ul class=""><li id="39a8" class="pc pd it lf b lg lh lj lk lm pe lq pf lu pg ly ph pi pj pk bi translated">它指定了我们的动画维度。</li><li id="9ed0" class="pc pd it lf b lg pl lj pm lm pn lq po lu pp ly ph pi pj pk bi translated">使用<code class="fe mk ml mm mn b">range_y</code>和<code class="fe mk ml mm mn b">range_x</code>的 x 和 y 值范围</li><li id="8a50" class="pc pd it lf b lg pl lj pm lm pn lq po lu pp ly ph pi pj pk bi translated"><code class="fe mk ml mm mn b">text</code>用大洲标注所有点。有助于更好地可视化数据</li></ul><pre class="ks kt ku kv gt nx mn ny nz aw oa bi"><span id="ed93" class="ob nf it mn b gy oc od l oe of">px.scatter(suicides_gby_Continent,x = 'suicides/100k pop', y = 'gdp_per_capita ($)',color='continent',<br/>           size='suicides/100k pop',symbol='sex',animation_frame='year', animation_group='continent',range_x = [0,0.6],<br/>          range_y = [0,70000],text='continent')</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nd"><img src="../Images/44c660aead41c4c2994d896ce002723b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*aGUUCJGEE05DrkfEG5uMPQ.gif"/></div></div></figure><p id="5310" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">等待 gif 图显示。</strong></p><p id="53d5" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在 Jupyter 笔记本中，你将能够停止可视化，悬停在点上，只需查看特定的大陆，并通过交互做更多的事情。</p><p id="3243" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">一个命令就能提供如此多的信息。我们可以看到:</p><ul class=""><li id="0aec" class="pc pd it lf b lg lh lj lk lm pe lq pf lu pg ly ph pi pj pk bi translated">从 1991 年到 2001 年，欧洲男性的自杀率非常低。</li><li id="168c" class="pc pd it lf b lg pl lj pm lm pn lq po lu pp ly ph pi pj pk bi translated">大洋洲即使有相当高的人均国内生产总值，它仍然容易发生自杀事件。</li><li id="b28c" class="pc pd it lf b lg pl lj pm lm pn lq po lu pp ly ph pi pj pk bi translated">与其他国家相比，非洲的自杀率较低。</li><li id="1946" class="pc pd it lf b lg pl lj pm lm pn lq po lu pp ly ph pi pj pk bi translated">就美洲而言，自杀率一直在逐渐上升。</li></ul><p id="b51b" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我以上所有的观察都需要更多的分析。但这就是在一张图上有这么多信息的意义所在。它会帮助你提出很多假设。 </p><p id="e236" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">以上剧情风格被称为<strong class="lf jd">汉斯·罗斯林剧情</strong>以其创始人命名。</p><p id="7c0b" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在这里，我想让你们看看这个来自汉斯·罗斯林的演示，他使用 Gapminder 数据来解释收入和寿命是如何随着时间的推移而出现的。看到了。太棒了。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pq pr l"/></div><figcaption class="ov ow gj gh gi ox oy bd b be z dk">Hans Rosling Gapminder Visualization….</figcaption></figure><h1 id="d768" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">功能标准化</h1><p id="bec7" class="pw-post-body-paragraph ld le it lf b lg oj kd li lj ok kg ll lm ol lo lp lq om ls lt lu on lw lx ly im bi translated">到目前为止，我们已经了解了散点图。花了这么多时间去学一门图表课。在我的帖子的开始，我告诉你这个库有一种标准化的功能。</p><p id="5aa1" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">让我们具体看看欧洲的数据，因为我们看到欧洲男性的自杀率很高。</p><pre class="ks kt ku kv gt nx mn ny nz aw oa bi"><span id="6e96" class="ob nf it mn b gy oc od l oe of">european_suicide_data = suicides[suicides['continent'] =='Europe']<br/>european_suicide_data_gby = european_suicide_data.groupby(['age','sex','year']).aggregate(np.sum).reset_index()<br/>european_suicide_data_gby['suicides/100k pop'] = european_suicide_data_gby['suicides_no']*1000/european_suicide_data_gby['population']<br/></span><span id="51b2" class="ob nf it mn b gy og od l oe of"># A single line to create an animated Bar chart too.<br/>px.bar(european_suicide_data_gby,x='age',y='suicides/100k pop',facet_col='sex',animation_frame='year', <br/>       animation_group='age', <br/>       category_orders={'age':['5-14 years', '15-24 years', '25-34 years', '35-54 years', <br/>       '55-74 years', '75+ years']},range_y=[0,1])</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ps"><img src="../Images/1e8a28ee0670a33578d5a950e0d03461.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*F1AvmKFQdWB3uswpj2Au_g.gif"/></div></div></figure><p id="9a5a" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">就这样，我们也学会了如何制作条形图的动画。在上面的函数中，我为轴提供了一个<code class="fe mk ml mm mn b">category_order</code>来强制分类的顺序，因为它们是有序的。其余的一切还是老样子。</p><p id="2a60" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><em class="mj">我们可以看到，从 1991 年到 2001 年，75 岁以上男性的自杀率非常高。这可能会增加男性的整体自杀率。</em></p><p id="87ef" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd"> <em class="mj">想使用地图查看一个国家的自杀率是如何降低的？这就是我们在数据中获得国家 ISO 代码的原因。</em></strong></p><p id="a902" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这需要多少行？你猜对了。一个。</p><pre class="ks kt ku kv gt nx mn ny nz aw oa bi"><span id="e225" class="ob nf it mn b gy oc od l oe of">suicides_map = suicides.groupby(['year','country','Alpha-3 code']).aggregate(np.sum).reset_index()[['country','Alpha-3 code','suicides_no','population','year']]</span><span id="0420" class="ob nf it mn b gy og od l oe of">suicides_map["suicides/100k pop"]=suicides_map["suicides_no"]*1000/suicides_map["population"]</span><span id="8df7" class="ob nf it mn b gy og od l oe of">px.choropleth(suicides_map, locations="Alpha-3 code", color="suicides/100k pop", hover_name="country", animation_frame="year",<br/>             color_continuous_scale=px.colors.sequential.Plasma)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ps"><img src="../Images/78bf77922ec406e69ec03d76705f82d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*YOKJJFQGWnZ9QDb_TjRY-Q.gif"/></div></div></figure><p id="af39" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">上图显示了不同国家的自杀率随时间的变化，根据我们从图中得到的信息，所需的编码工作是最小的。我们可以看到:</p><ul class=""><li id="a250" class="pc pd it lf b lg lh lj lk lm pe lq pf lu pg ly ph pi pj pk bi translated">很多国家都不见了</li><li id="87bd" class="pc pd it lf b lg pl lj pm lm pn lq po lu pp ly ph pi pj pk bi translated">非洲国家的数据很少</li><li id="ce73" class="pc pd it lf b lg pl lj pm lm pn lq po lu pp ly ph pi pj pk bi translated">几乎整个亚洲都不见了。</li></ul><p id="f63b" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">只要看到上面的图表，我们就能很好地理解我们的数据。</p><p id="16b3" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd"> <em class="mj">时间轴上的动画也增加了很多价值，因为我们能够使用一个图表来查看所有数据。</em> </strong></p><p id="5a6c" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这可以帮助我们发现数据中隐藏的模式。你不得不承认，它看起来也很酷。</p><h1 id="7e1b" class="ne nf it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">结论</h1><p id="eec8" class="pw-post-body-paragraph ld le it lf b lg oj kd li lj ok kg ll lm ol lo lp lq om ls lt lu on lw lx ly im bi translated">这只是 Plotly Express 的一个预览。您可以使用这个库做许多其他事情。</p><p id="2a71" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我喜欢这个库的主要原因是它试图简化图形创建的方式。以及这些图表开箱后看起来有多酷。</p><p id="3ee6" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">想想在 Seaborn 或 Matplotlib 甚至 Plotly  中创建相同的图形需要多长时间。你将会更加感激图书馆所提供的力量。</p><p id="6af6" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">Plotly 的这个项目缺少一些文档，但是我发现这些函数都有很好的文档记录。在 Jupyter 中，您可以看到使用<code class="fe mk ml mm mn b">Shift+Tab</code>的函数定义。</p><p id="1f41" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">同样根据它的公告文章:“Plotly Express 是<em class="mj">完全免费的</em>:凭借其许可的开源 MIT 许可证，你可以按照你喜欢的方式使用它(是的，甚至在商业产品中！)."</p><p id="0a30" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">因此，现在没有借口推迟这一设想。开始吧…</p><p id="dff1" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">你可以找到这篇文章的所有代码，并在这个<a class="ae mi" href="https://www.kaggle.com/mlwhiz/plotly-express/" rel="noopener ugc nofollow" target="_blank"> Kaggle 内核</a>中运行它</p></div><div class="ab cl pt pu hx pv" role="separator"><span class="pw bw bk px py pz"/><span class="pw bw bk px py pz"/><span class="pw bw bk px py"/></div><div class="im in io ip iq"><p id="8d27" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">如果你想了解创建可视化的最佳策略，我想从密歇根大学调用一门关于<a class="ae mi" href="https://coursera.pxf.io/e45JOX" rel="noopener ugc nofollow" target="_blank"> <strong class="lf jd">数据可视化和应用绘图</strong> </a>的优秀课程，它是一个很好的<a class="ae mi" href="https://coursera.pxf.io/e45JOX" rel="noopener ugc nofollow" target="_blank"> <strong class="lf jd">数据科学专业的一部分，Python </strong> </a>本身就是其中之一。一定要去看看</p><p id="29c2" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">将来我也会写更多初学者友好的帖子。关注我在<a class="ae mi" href="https://medium.com/@rahul_agarwal" rel="noopener"> <strong class="lf jd">媒体</strong> </a>或者订阅我的<a class="ae mi" href="https://mlwhiz.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lf jd">博客</strong> </a>了解他们。一如既往，我欢迎反馈和建设性的批评，可以通过 Twitter <a class="ae mi" href="https://twitter.com/MLWhiz" rel="noopener ugc nofollow" target="_blank"> @mlwhiz </a>联系到我</p></div></div>    
</body>
</html>