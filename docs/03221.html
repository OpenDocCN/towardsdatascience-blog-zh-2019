<html>
<head>
<title>Deploying a Flask Application on AWS Elastic Beanstalk via CLI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过 CLI 在 AWS Elastic Beanstalk 上部署一个烧瓶应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/deploying-a-flask-application-on-aws-elastic-beanstalk-via-cli-c0e93548472e?source=collection_archive---------8-----------------------#2019-05-23">https://towardsdatascience.com/deploying-a-flask-application-on-aws-elastic-beanstalk-via-cli-c0e93548472e?source=collection_archive---------8-----------------------#2019-05-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d7cd" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><strong class="ak">使用带有烧瓶和弹性豆茎的易于使用的 API 展示后端数据分析。</strong></h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/38ab9fcd4b136a4e4dc02e1415b1daaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5f2g_X7SGLy7KbDDob5EuA.png"/></div></div></figure><p id="5f28" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">可以在 AWS 上用<strong class="kt ir"> EC2 </strong>实例托管商业级烧瓶应用程序。启动 EC2 实例很容易，但是资源管理是一项开销。为了更好地利用资源，<strong class="kt ir"> Lambda 和 API Gateway </strong>是一个替代方案。但是它带来了资源配置开销。</p><p id="83e6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">AWS <strong class="kt ir">弹性豆茎</strong> (EB)在不限制选择或控制的情况下降低了管理复杂性。我们需要做的只是上传应用程序，EB 本身会处理以下细节:</p><ul class=""><li id="3c16" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">容量供应</li><li id="6e0b" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">负载平衡</li><li id="3cfc" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">缩放比例</li><li id="efcd" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">应用健康监控</li></ul><p id="8028" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">AWS 确实提供了关于 EB 的详细<a class="ae mb" href="https://docs.aws.amazon.com/elastic-beanstalk/index.html" rel="noopener ugc nofollow" target="_blank">文档</a>。浏览这些页面是很棘手的，通常不会提到陷阱。在这里，我分享使用 EB CLI 设置和启动<strong class="kt ir"> Flask </strong>应用程序的过程。</p><h2 id="c073" class="mc md iq bd me mf mg dn mh mi mj dp mk la ml mm mn le mo mp mq li mr ms mt mu bi translated">先决条件:</h2><ul class=""><li id="a1d0" class="ln lo iq kt b ku mv kx mw la mx le my li mz lm ls lt lu lv bi translated">我使用运行 Python 3.7 的 Linux 系统，假设你有类似的设置。</li><li id="b34a" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">AWS 的工作知识。</li><li id="4df0" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">烧瓶的工作知识。</li></ul><h2 id="1618" class="mc md iq bd me mf mg dn mh mi mj dp mk la ml mm mn le mo mp mq li mr ms mt mu bi translated">步骤 1:安装 EB CLI</h2><p id="26a9" class="pw-post-body-paragraph kr ks iq kt b ku mv jr kw kx mw ju kz la na lc ld le nb lg lh li nc lk ll lm ij bi translated">按照<a class="ae mb" href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-install-virtualenv.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">中提到的步骤，在虚拟环境中安装 EB CLI。</strong>T15】</a></p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="2061" class="mc md iq ne b gy ni nj l nk nl"><strong class="ne ir"># Quick Reference</strong></span><span id="00f9" class="mc md iq ne b gy nm nj l nk nl"><strong class="ne ir">$ pip install</strong> <strong class="ne ir">— user virtualenv</strong></span><span id="66b5" class="mc md iq ne b gy nm nj l nk nl"><strong class="ne ir">$ virtualenv <em class="nn">~/ebtest</em></strong></span><span id="2db8" class="mc md iq ne b gy nm nj l nk nl"><strong class="ne ir">$ source</strong> <strong class="ne ir"><em class="nn">~/ebtest</em>/bin/activate</strong></span><span id="e8c0" class="mc md iq ne b gy nm nj l nk nl"><strong class="ne ir">$ pip install awsebcli — upgrade</strong></span><span id="c6a0" class="mc md iq ne b gy nm nj l nk nl"><strong class="ne ir">$ eb — version</strong></span></pre><h2 id="8e00" class="mc md iq bd me mf mg dn mh mi mj dp mk la ml mm mn le mo mp mq li mr ms mt mu bi translated">第二步:烧瓶应用</h2><p id="24f2" class="pw-post-body-paragraph kr ks iq kt b ku mv jr kw kx mw ju kz la na lc ld le nb lg lh li nc lk ll lm ij bi translated">您可以按照下面提到的过程创建一个测试瓶应用程序。</p><p id="fe40" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae mb" href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-flask.html#python-flask-setup-venv" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">用 Flask 建立 Python 虚拟环境</strong> </a></p><p id="07df" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae mb" href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-flask.html#python-flask-create-app" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">创建烧瓶应用</strong> </a></p><p id="fc78" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">EB 默认期望文件名为<strong class="kt ir"> application.py </strong>。如果您使用任何其他名称，应用程序加载将会失败。此外，EB 希望 flask 应用程序对象实例是应用程序。要更改这些默认值，您需要使用 EB 配置。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="5e65" class="mc md iq ne b gy ni nj l nk nl"><strong class="ne ir"># Quick Reference</strong></span><span id="e1ea" class="mc md iq ne b gy nm nj l nk nl"><strong class="ne ir">$ pip install flask==1.0.2</strong></span><span id="d414" class="mc md iq ne b gy nm nj l nk nl"><strong class="ne ir">$ pip freeze &gt; requirements.txt</strong></span><span id="9461" class="mc md iq ne b gy nm nj l nk nl"><strong class="ne ir">$ python application.py</strong></span></pre><p id="faf0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在 EB 上部署 flask 应用程序之前，确保在其上执行本地测试。</p><h2 id="e40e" class="mc md iq bd me mf mg dn mh mi mj dp mk la ml mm mn le mo mp mq li mr ms mt mu bi translated">步骤 3: AWS API 密钥和机密</h2><p id="9953" class="pw-post-body-paragraph kr ks iq kt b ku mv jr kw kx mw ju kz la na lc ld le nb lg lh li nc lk ll lm ij bi translated">从 AWS 控制台的<strong class="kt ir">我的安全凭证</strong>下获取 API 密钥和密码。将 API 密钥和密码放在手边，以便配置 EB。</p><p id="38fa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">注意:</strong>请确保这些信息的安全。</p><p id="3f23" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">EB 配置会将这些信息存储在<strong class="kt ir"> ~/下。aws/config </strong>如下所示。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="6331" class="mc md iq ne b gy ni nj l nk nl"><strong class="ne ir">[profile eb-cli]</strong></span><span id="6570" class="mc md iq ne b gy nm nj l nk nl"><strong class="ne ir">aws_access_key_id = KEY</strong></span><span id="ab23" class="mc md iq ne b gy nm nj l nk nl"><strong class="ne ir">aws_secret_access_key = SECRET</strong></span></pre><h2 id="62d8" class="mc md iq bd me mf mg dn mh mi mj dp mk la ml mm mn le mo mp mq li mr ms mt mu bi translated">步骤 4:在弹性豆茎上部署烧瓶应用程序</h2><p id="8e38" class="pw-post-body-paragraph kr ks iq kt b ku mv jr kw kx mw ju kz la na lc ld le nb lg lh li nc lk ll lm ij bi translated">按照<a class="ae mb" href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-flask.html#python-flask-deploy" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">中提到的步骤，使用 EB CLI </strong> </a>部署您的站点</p><p id="63bb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用<strong class="kt ir">。ebignore </strong>文件，避免上传不需要的文件。创造这些<strong class="kt ir">。<strong class="kt ir">下的 config </strong>文件。ebextensions </strong>在 EB 上设置环境变量。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="154e" class="mc md iq ne b gy ni nj l nk nl"><strong class="ne ir"># Quick Reference</strong></span><span id="dcf9" class="mc md iq ne b gy nm nj l nk nl"><strong class="ne ir">$ eb init -p python-3.6 flask-tutorial — region us-east-2</strong></span><span id="e3f9" class="mc md iq ne b gy nm nj l nk nl"><strong class="ne ir">$ eb init</strong></span><span id="aaef" class="mc md iq ne b gy nm nj l nk nl"><strong class="ne ir">$ eb create flask-env</strong></span><span id="9e61" class="mc md iq ne b gy nm nj l nk nl"><strong class="ne ir">$ eb open</strong></span></pre><h2 id="7085" class="mc md iq bd me mf mg dn mh mi mj dp mk la ml mm mn le mo mp mq li mr ms mt mu bi translated">步骤 5:在弹性豆茎上使用端瓶</h2><p id="398e" class="pw-post-body-paragraph kr ks iq kt b ku mv jr kw kx mw ju kz la na lc ld le nb lg lh li nc lk ll lm ij bi translated">为此，您可以使用 Beanstalk 控制台或 EB CLI。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="95cb" class="mc md iq ne b gy ni nj l nk nl"><strong class="ne ir"># Quick Reference</strong></span><span id="a5f8" class="mc md iq ne b gy nm nj l nk nl"><strong class="ne ir">$ eb terminate flask-env</strong></span></pre><h2 id="1edc" class="mc md iq bd me mf mg dn mh mi mj dp mk la ml mm mn le mo mp mq li mr ms mt mu bi translated">学分:</h2><p id="6989" class="pw-post-body-paragraph kr ks iq kt b ku mv jr kw kx mw ju kz la na lc ld le nb lg lh li nc lk ll lm ij bi translated">这篇博文是<a class="ae mb" href="https://livesafe.netlify.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> LiveSafe </strong> </a>项目的成果。Live Safe 汇集了美国特定地区灾害风险的相关信息，以帮助潜在房主做出购买和租赁决定。</p><p id="cec6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae mb" href="https://medium.com/u/e0146ea95834" rel="noopener"> Manjula Mishra </a>、<a class="ae mb" href="https://medium.com/u/ad7a35c0a5e" rel="noopener"> Daniel Martin-Alarcon </a>和我一起从事该项目的数据科学部分。你可以在这里找到数据科学相关的代码<a class="ae mb" href="https://github.com/labs12-should-i-live-here/DS" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>