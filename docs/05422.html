<html>
<head>
<title>Interactive Choropleth Maps With Plotly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">与 Plotly 的交互式 Choropleth 地图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/interactive-choropleth-maps-with-plotly-46c34fba0e48?source=collection_archive---------3-----------------------#2019-08-11">https://towardsdatascience.com/interactive-choropleth-maps-with-plotly-46c34fba0e48?source=collection_archive---------3-----------------------#2019-08-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="995c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何从 Api 读取数据，匹配地理和非空间数据并创建交互式地图</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f2964e073d57373190546fc535bb777f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*dNFacmyvun6fZPkibuZxfg.gif"/></div></div></figure><p id="2184" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="lq">最近，我想可视化上次联邦选举的数据。我住在德国的杜塞尔多夫，我想知道哪个政党在哪个地区有相对优势。<br/>令人惊讶的是，这比预期的要难一点。因此，我想在这里分享我的经验。我们将一起经历以下步骤:</em></p><p id="9410" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">0.准备工作<br/> 1。通过 Api 读取 GeoJSON 和 JSON 格式的数据<br/> 2。从 GeoJSON 数据中提取相关特征<br/> 3。用色标和鼠标悬停定制我们的地图。将所有东西放在一起，增加互动性</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h2 id="74c0" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">0.准备</h2><p id="ba0d" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">您可以按照本教程使用自己的数据集来创建自己的地图。最简单的方法是使用 GeoJSON 或 JSON 格式的数据。在这里，您可以看看本教程中的数据:</p><p id="41f7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae mw" href="https://opendata.duesseldorf.de/api/action/datastore/search.json?resource_id=6893a12e-3d75-4b2f-bb8b-708982bea7b7" rel="noopener ugc nofollow" target="_blank">https://open data . dueseldorf . de/API/action/datastore/search . JSON？resource _ id = 6893 a12e-3d 75-4b2f-bb8b-708982 bea 7b 7</a></p><p id="53c6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae mw" href="https://opendata.duesseldorf.de/sites/default/files/Stadtteile_WGS84_4326.geojson" rel="noopener ugc nofollow" target="_blank">https://open data . Dusseldorf . de/sites/default/files/stadt teil _ WGS 84 _ 4326 . geo JSON</a></p><div class="kj kk kl km gt ab cb"><figure class="mx kn my mz na nb nc paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/82e38d98319b308f2effd92e94e883d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/1*Eb91upLLmJ_92mldc8I18Q.png"/></div></figure><figure class="mx kn nd mz na nb nc paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/21d9e5ecc74672eafc3d5d4ea38a8cd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*jBEQOiwvyV7whCXZ0lG5JA.png"/></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk ni di nj nk">Fig. 1: GeoJSON- And Geo-Data</figcaption></figure></div><p id="c56a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于本教程，您还需要一个 mapbox 帐户。Mapbox 提供了灵活的地理数据 API。使用 Mapbox API，我们可以将个人数据映射到可缩放的世界地图上。你可以在 www.mapbox.com 开一个账户。您需要一个单独的令牌来使用 mapbox 服务，该服务可在帐户设置下找到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/6ef659865c03b6a0da17203714e22445.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ry0cIm75goIAQTb4aIB9Jg.png"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">Fig. 2: Mapbox Account Settings</figcaption></figure><h2 id="f7d1" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated"><strong class="ak"> 1。通过 Api 读取 GeoJSON 和 JSON 格式的数据</strong></h2><p id="8f9a" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">GeoJSON 是地理要素的开放标准格式。在这个标准中，数据的存储遵循特定的结构。要素可以是点、线、面，甚至是这三种类型的组合。例如，多边形(特定房间内的封闭区域)可能如下所示:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="f17a" class="ly lz it nn b gy nr ns l nt nu">{<br/>"type": "Polygon",<br/>"coordinates": [<br/>[[35, 10], [45, 45], [15, 40], [10, 20], [35, 10]],<br/>[[20, 30], [35, 35], [30, 20], [20, 30]]<br/>]<br/>}</span></pre><p id="f368" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在我们的示例中，我们还将访问 GeoJSON 数据，并将其与 JSON 数据相结合。网站上有杜塞尔多夫地区的地理数据和选举数据。但是，数据是分离的，我们必须在以后合并它们。</p><p id="31f4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">首先，我们导入所有必需的库:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="5aca" class="ly lz it nn b gy nr ns l nt nu">import pandas as pd<br/>import numpy as np<br/>import urllib.request, json<br/>import requests</span></pre><p id="3e3c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们可以读取 URL 的内容了:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="c57b" class="ly lz it nn b gy nr ns l nt nu">url_wahl_2017 = 'https://opendata.duesseldorf.de/api/action/datastore/search.json?resource_id=6893a12e-3d75-4b2f-bb8b-708982bea7b7'<br/>url_stadtteile = 'https://opendata.duesseldorf.de/sites/default/files/Stadtteile_WGS84_4326.geojson'</span><span id="6c23" class="ly lz it nn b gy nv ns l nt nu">geo_data = requests.get(url_stadtteile).json()<br/>data_wahl = requests.get(url_wahl_2017).json()</span></pre><p id="5f54" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这两个数据源现在都可以作为嵌套字典使用。使用<code class="fe nw nx ny nn b">data_wahl['result']['records']</code>可以显示各个选区的选举结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/a7d9b407dfd8a7e0291b31d9c3650f37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9rFajToOhWvI-D8hUWZxuQ.png"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">Fig. 3: Election results of the individual districts</figcaption></figure><p id="a32a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们现在可以将字典中的相关选举数据导入到 pandas 数据框架中:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="3de5" class="ly lz it nn b gy nr ns l nt nu">df_wahl = pd.DataFrame.from_dict(data_wahl['result']['records'])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/33e4456b6bdbe6e7b7ffd2ea80b05a35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AB__tmyhkvGjQWiiXke6lA.png"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">Fig. 4: Election results as dataframe</figcaption></figure><h2 id="799f" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">2.从 GeoJSON 数据中提取相关特征</h2><p id="3c14" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">现在我们来看看地理数据。为了使用 Plotly 进行进一步处理，我们现在从地理数据请求中提取相关要素:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="001c" class="ly lz it nn b gy nr ns l nt nu">sources=[{"type": "FeatureCollection", 'features': [feat]} for feat in geo_data['features']]</span></pre><p id="61cb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">列表<code class="fe nw nx ny nn b">sources</code>包含城市所有部分的坐标。我们稍后将把这个列表交给<code class="fe nw nx ny nn b">Mapbox</code>对象，以便呈现各个地区。地区的 id 也从地理数据中提取:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="8f47" class="ly lz it nn b gy nr ns l nt nu">tx_ids=[geo_data['features'][k]['properties']['Stadtteil'] for k in range(len(geo_data['features']))]</span></pre><p id="0885" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们稍后需要 id 来为每个政党和每个地区分配正确的色阶。</p><h2 id="f067" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">3.用色标和鼠标悬停定制我们的地图</h2><p id="eeff" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">为了以后能够动态地给城市的各个部分着色，我们需要每一方各自的百分比范围。最亮的阴影被指定为最低值，最暗的阴影被指定为最高值。为此，我们为每个政党和每个地区确定最低和最高值:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="ff33" class="ly lz it nn b gy nr ns l nt nu">parties = ['Wahlsieger_proz','CDU_Proz','SPD_Proz','DIE LINKE_Proz','GRÜNE_Proz','AfD_Proz','FDP_Proz']</span><span id="1a47" class="ly lz it nn b gy nv ns l nt nu">for n in range(0,len(rate_list)):</span><span id="91cd" class="ly lz it nn b gy nv ns l nt nu">dct[rate_list[n]] = [df.loc[stadtteil, parties[n]] for stadtteil in tx_ids]</span><span id="a0de" class="ly lz it nn b gy nv ns l nt nu">dct_min[mins_list[n]] = min(dct[rate_list[n]])</span><span id="3caa" class="ly lz it nn b gy nv ns l nt nu">dct_max[maxs_list[n]] = max(dct[rate_list[n]])</span></pre><p id="62ec" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们为每一方创建它自己的色标。最重要的是，我关注的是派对的颜色:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="eda7" class="ly lz it nn b gy nr ns l nt nu">#Winner<br/>pl_colorscale= [[0.0, ‘rgb(255, 255, 204)’],<br/>[0.35, ‘rgb(161, 218, 180)’],<br/>[0.5, ‘rgb(65, 182, 196)’],<br/>[0.6, ‘rgb(44, 127, 184)’],<br/>[0.7, ‘rgb(8, 104, 172)’],<br/>[1.0, ‘rgb(37, 52, 148)’]]</span><span id="8cd2" class="ly lz it nn b gy nv ns l nt nu">#CDU<br/>cdu_colorscale= [[0.0, ‘rgb(224, 224, 224)’],<br/>[0.35, ‘rgb(192, 192, 192)’],<br/>[0.5, ‘rgb(160, 160, 160)’],<br/>[0.6, ‘rgb(128, 128, 128)’],<br/>[0.7, ‘rgb(96, 96, 96)’],<br/>[1.0, ‘rgb(64, 64, 64)’]]</span><span id="aa25" class="ly lz it nn b gy nv ns l nt nu">#SPD<br/>spd_colorscale= [[0.0, ‘rgb(255, 153, 153)’],<br/>[0.35, ‘rgb(255, 102, 102)’],<br/>[0.5, ‘rgb(255, 51, 51)’],<br/>[0.6, ‘rgb(255, 0, 0)’],<br/>[0.7, ‘rgb(204, 0, 0)’],<br/>[1.0, ‘rgb(153, 0, 0)’]]</span><span id="b4a8" class="ly lz it nn b gy nv ns l nt nu">#Die Grünen<br/>gruene_colorscale= [[0.0, ‘rgb(153, 255, 204)’],<br/>[0.35, ‘rgb(102, 255, 178)’],<br/>[0.5, ‘rgb(51, 255, 153)’],<br/>[0.6, ‘rgb(0, 255, 128)’],<br/>[0.7, ‘rgb(0, 204, 102)’],<br/>[1.0, ‘rgb(0, 153, 76)’]]</span><span id="59d7" class="ly lz it nn b gy nv ns l nt nu">#Die Linke<br/>linke_colorscale= [[0.0, ‘rgb(255, 153, 204)’],<br/>[0.35, ‘rgb(255, 102, 178)’],<br/>[0.5, ‘rgb(255, 51, 153)’],<br/>[0.6, ‘rgb(255, 0, 128)’],<br/>[0.7, ‘rgb(204, 0, 102)’],<br/>[1.0, ‘rgb(153, 0, 76)’]]</span><span id="24d5" class="ly lz it nn b gy nv ns l nt nu">#AFD<br/>afd_colorscale= [[0.0, ‘rgb(153, 255, 255)’],<br/>[0.35, ‘rgb(102, 255, 255)’],<br/>[0.5, ‘rgb(51, 255, 255)’],<br/>[0.6, ‘rgb(0, 255, 255)’],<br/>[0.7, ‘rgb(0, 204, 204)’],<br/>[1.0, ‘rgb(0, 153, 153)’]]</span><span id="5571" class="ly lz it nn b gy nv ns l nt nu">#FDP<br/>fdp_colorscale=[[0.0, ‘rgb(255, 255, 204)’],<br/>[0.35, ‘rgb(255, 255, 153)’],<br/>[0.5, ‘rgb(255, 255, 102)’],<br/>[0.6, ‘rgb(255, 255, 51)’],<br/>[0.7, ‘rgb(255, 255, 0)’],<br/>[1.0, ‘rgb(204, 204, 0)’]]</span></pre><p id="a76d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面这个函数是我从一个<a class="ae mw" href="https://plot.ly/~empet/14692/mapbox-choropleth-that-works-with-plotly/#/" rel="noopener ugc nofollow" target="_blank">教程</a>里拿来的，强烈推荐:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="2885" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，我们将该函数用于之前创建的迷你和最大字典，以创建单独的色阶:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="5b3e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们希望在一张卡片上标明各自的选举获胜者，在另一张卡片上标明各个政党。为此，我们改编鼠标悬停文本:</p><pre class="kj kk kl km gt nm nn no np aw nq bi"><span id="05c5" class="ly lz it nn b gy nr ns l nt nu">text_win=[c+’&lt;br&gt;Election winner was the ‘+ w + ‘ with ‘ + ‘{:0.2f}’.format(r)+’%’ for c, r, w in zip(counties, dct[rate_list[0]], wahlsieger_c)]</span><span id="c069" class="ly lz it nn b gy nv ns l nt nu">text_cdu=[c+’&lt;br&gt;The CDU had ‘ + ‘{:0.2f}’.format(r)+’%’ for c, r in zip(counties, dct[rate_list[1]])]</span><span id="5169" class="ly lz it nn b gy nv ns l nt nu">text_spd=[c+’&lt;br&gt;The SPD had ‘ + ‘{:0.2f}’.format(r)+’%’ for c, r in zip(counties, dct[rate_list[2]])]</span><span id="7f61" class="ly lz it nn b gy nv ns l nt nu">text_linke=[c+’&lt;br&gt;The Linke had ‘ + ‘{:0.2f}’.format(r)+’%’ for c, r in zip(counties, dct[rate_list[3]])]</span><span id="db8c" class="ly lz it nn b gy nv ns l nt nu">text_gruene=[c+’&lt;br&gt;The Grünen had ‘ + ‘{:0.2f}’.format(r)+’%’ for c, r in zip(counties, dct[rate_list[4]])]</span><span id="7c48" class="ly lz it nn b gy nv ns l nt nu">text_afd=[c+’&lt;br&gt;The AfD had ‘ + ‘{:0.2f}’.format(r)+’%’ for c, r in zip(counties, dct[rate_list[5]])]</span><span id="ba5d" class="ly lz it nn b gy nv ns l nt nu">text_fdp=[c+’&lt;br&gt;The FDP had ‘ + ‘{:0.2f}’.format(r)+’%’ for c, r in zip(counties, dct[rate_list[6]])]</span></pre><h2 id="c028" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">4.将所有东西放在一起，增加互动性</h2><p id="59ac" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">我们现在必须注意以下几点。<code class="fe nw nx ny nn b">data</code>包括代表地区形状的地理数据和鼠标悬停文本。但我们希望灵活的色阶取决于下拉菜单中的选择和每个地区政党的相对实力。这些色阶由<code class="fe nw nx ny nn b">layer</code>表示。可以将数据分配给一个列表。根据下拉列表的选择，我们将列表中各个元素的可见性设置为<code class="fe nw nx ny nn b">True</code>或<code class="fe nw nx ny nn b">False</code>。例如，如果我们有一个包含三条记录的列表，并且想要呈现第一条记录，我们给出一个条目列表<code class="fe nw nx ny nn b">[True,False,False]</code>作为<code class="fe nw nx ny nn b">visible</code>的参数。</p><p id="bdba" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们首先创建<code class="fe nw nx ny nn b">data</code>列表。我们提取每个地区的经度和纬度元素，并将它们添加到列表中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="af2f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">图层也收集在一个列表中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="e612" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们添加下拉菜单。首先，我们将完成条目的标签和相应的可见条件。最后，我们提交数据和图层列表:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="a533" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe nw nx ny nn b">visible</code>列表中，我们定义显示<code class="fe nw nx ny nn b">data</code>列表的哪个元素。为了让色阶相应地适应，我们还必须在<code class="fe nw nx ny nn b">"mapbox.layers"</code>下定义我们的<code class="fe nw nx ny nn b">layers</code>列表。</p><p id="9ef0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果我们将所有内容放在一起，我们会得到以下代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="7003" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你想运行代码，你需要修改第 10 行的<code class="fe nw nx ny nn b">mapbox_access_token</code>。</p><p id="2e38" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您的结果应该如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f2964e073d57373190546fc535bb777f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*dNFacmyvun6fZPkibuZxfg.gif"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">Fig. 5: Final Plot With Interactivity</figcaption></figure></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h2 id="5f2e" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">结论和最终想法</h2><p id="897a" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">用 Python 处理 GeoJSON 和 JSON 格式非常容易。使用 Plotly，您可以根据地理信息创建美丽的 Choropleth 地图。如果你想使用下拉菜单增加交互性，那就有点棘手了，因为你需要为每一层添加单独的色阶。然而，<code class="fe nw nx ny nn b">args</code>提供了所需的灵活性。在下一步中，添加一个单独的 colorbar 图例还是不错的。此外，说明更多的社会人口特征也很有意思。所以要有创意！</p><h2 id="3070" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">开源代码库</h2><p id="5790" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">笔记本:<br/><a class="ae mw" href="https://github.com/bd317/geodata/blob/master/API-Duesseldorf-Github%20(1).ipynb" rel="noopener ugc nofollow" target="_blank">https://Github . com/BD 317/geodata/blob/master/API-Duesseldorf-Github % 20(1)。ipynb </a></p><h2 id="f1e0" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">进一步的信息</h2><p id="64a6" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">choropleth 绘图的一般文档:</p><p id="ad0c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae mw" href="https://plot.ly/python/choropleth-maps/" rel="noopener ugc nofollow" target="_blank">https://plot.ly/python/choropleth-maps/</a></p><p id="3e6a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">恩培特的一本伟大的笔记本，作为 Plotly choropleth 地图的介绍；</p><div class="od oe gp gr of og"><a href="https://plot.ly/~empet/14692/mapbox-choropleth-that-works-with-plotly/#/" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">' b '与 Plotly | empet | Plotly 一起工作地图箱 choropleth '</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">编辑描述</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">plot.ly</p></div></div></div></a></div><p id="2c93" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">同一用户对新 Plotly trace-type choroplethmapbox 的更新:</p><div class="od oe gp gr of og"><a href="https://plot.ly/~empet/15237/choroplethmapbox-with-dropdown-menu/#/" rel="noopener  ugc nofollow" target="_blank"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd iu gy z fp ol fr fs om fu fw is bi translated">b '带有下拉菜单的 choroplethmapbox | empet | Plotly '</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">编辑描述</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">plot.ly</p></div></div></div></a></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/b54e9b8e5ba51afefd7c07e069cea630.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*SA5Oump1hrudJKXfzGojNg.gif"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk">Fig. 6: New trace type — Choroplethmapbox</figcaption></figure></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><p id="1f09" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae mw" href="https://medium.com/@droste.benedikt/membership" rel="noopener">如果您喜欢中级和高级数据科学，并且还没有注册，请随时使用我的推荐链接加入社区。</a></p></div></div>    
</body>
</html>