<html>
<head>
<title>The Basics of Indexing and Slicing Python Lists</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 列表索引和切片的基础</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-basics-of-indexing-and-slicing-python-lists-2d12c90a94cf?source=collection_archive---------2-----------------------#2019-09-15">https://towardsdatascience.com/the-basics-of-indexing-and-slicing-python-lists-2d12c90a94cf?source=collection_archive---------2-----------------------#2019-09-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3652" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">初学者指南，由初学者编写</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ac549e8ba329842e51249065a278a4d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J5E4ye-wQ8WRN-GThgsnVg.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@igormiske?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Igor Miske</a> on <a class="ae kv" href="https://unsplash.com/search/photos/slice?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7c6d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">几天前，我正准备向一群 Python 初学者演示索引和切片列表，我被一些看起来很基本的用例卡住了。所以，为了摆脱困境，我四处逛了逛，觉得值得分享一下我学到的东西。</p><p id="990a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">访问列表中的条目(以及其他<a class="ae kv" href="https://stackoverflow.com/questions/9884132/what-exactly-are-iterator-iterable-and-iteration" rel="noopener ugc nofollow" target="_blank">可条目</a>中的条目，如元组和字符串)是 Python 程序员的一项基本技能，许多 Python 工具都遵循类似的索引和切片约定(例如<code class="fe ls lt lu lv b">numpy Arrays</code>和<code class="fe ls lt lu lv b">pandas DataFrames</code>)。所以熟悉一下来龙去脉还是值得的。</p><h1 id="07c2" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">定义和舞台设置</h1><p id="f677" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">“索引”是指通过元素在可迭代对象中的位置来引用可迭代对象的元素。“切片”意味着根据索引从 iterable 中获取元素的子集。</p><p id="b18e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打个比方，我最近被召集去做陪审员，他们给每个潜在的陪审员分配了一个号码。你可能会说我的陪审员号是我的索引。当他们说，“42 号陪审员；请站起来，”我知道他们在和我说话。当他们说，“37 号到 48 号陪审员，请在下午 3:30 回来报到，”那一大群人中的<em class="mt">片</em>集体叹了口气，去吃午饭了。</p><p id="8269" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们首先创建一个列表，我们可以使用<a class="ae kv" rel="noopener" target="_blank" href="/python-basics-list-comprehensions-631278f22c40">列表理解</a>来处理它:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="8bc3" class="my lx iq lv b gy mz na l nb nc">my_list = [_ for _ in 'abcdefghi']<br/>my_list</span><span id="2b69" class="my lx iq lv b gy nd na l nb nc">['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i']</span></pre><h1 id="50a6" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">索引</h1><p id="7356" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">为了检索列表中的元素，我们使用了<em class="mt">索引操作符</em> ( <code class="fe ls lt lu lv b">[]</code>):</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="d992" class="my lx iq lv b gy mz na l nb nc">my_list[0]</span><span id="5656" class="my lx iq lv b gy nd na l nb nc">'a'</span></pre><p id="e6cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">列表是“零索引”的，所以<code class="fe ls lt lu lv b">[0]</code>返回列表中的第零个(<em class="mt">即</em>最左边的)，而<code class="fe ls lt lu lv b">[1]</code>返回第一个(<em class="mt">即</em>第零个右边的一个)。由于我们的列表中有 9 个元素(<code class="fe ls lt lu lv b">[0]</code>到<code class="fe ls lt lu lv b">[8]</code>)，尝试访问<code class="fe ls lt lu lv b">my_list[9]</code>会抛出一个<code class="fe ls lt lu lv b">IndexError: list index out of range</code>，因为它实际上是在尝试获取第 10 个元素，而实际上并没有。</p><p id="7eac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Python 还允许使用负数从列表的<em class="mt">结尾</em>开始索引，其中<code class="fe ls lt lu lv b">[-1]</code>返回最后一个元素。这非常有用，因为这意味着您不必通过编程来找出 iterable 的长度，以便处理它末尾的元素。<code class="fe ls lt lu lv b">my_list</code>的索引和反向索引如下:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="b85a" class="my lx iq lv b gy mz na l nb nc">  0    1    2    3    4    5    6    7    8<br/>  ↓    ↓    ↓    ↓    ↓    ↓    ↓    ↓    ↓<br/>['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i']<br/>  ↑    ↑    ↑    ↑    ↑    ↑    ↑    ↑    ↑<br/> -9   -8   -7   -6   -5   -4   -3   -2   -1</span></pre><h1 id="ad85" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">限幅</h1><p id="ec1c" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">一个<em class="mt">片</em>是列表元素的子集。在列表的情况下，单个切片总是由连续的元素组成。切片符号采用以下形式</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="3f32" class="my lx iq lv b gy mz na l nb nc">my_list[<em class="mt">start</em>:<em class="mt">stop</em>]</span></pre><p id="46cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">其中<code class="fe ls lt lu lv b"><em class="mt">start</em></code>是要包含的第一个元素的索引，<code class="fe ls lt lu lv b"><em class="mt">stop</em></code>是要在<em class="mt">处停止但不包含在切片</em>中的项目的索引。于是<code class="fe ls lt lu lv b">my_list[1:5]</code>返回<code class="fe ls lt lu lv b">['b', 'c', 'd', 'e']</code>:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="d13c" class="my lx iq lv b gy mz na l nb nc">  0    <strong class="lv ir"><em class="mt">1    2    3    4    5</em></strong>    6    7    8<br/>  ×    <strong class="lv ir">↓    ↓    ↓    ↓ </strong>   ×    ×    ×    ×<br/>['a', <strong class="lv ir"><em class="mt">'b', 'c', 'd', 'e'</em>,</strong> 'f', 'g', 'h', 'i']</span></pre><p id="5750" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将任一切片边界留空意味着从列表的末尾开始(或转到列表的末尾)。例如:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="c071" class="my lx iq lv b gy mz na l nb nc">my_list[5:]</span><span id="4bac" class="my lx iq lv b gy nd na l nb nc">['f', 'g', 'h', 'i']<br/></span><span id="8840" class="my lx iq lv b gy nd na l nb nc">my_list[:4]</span><span id="b7c8" class="my lx iq lv b gy nd na l nb nc">['a', 'b', 'c', 'd']</span></pre><p id="d1d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用负索引器将设置相对于它们从列表的<em class="mt">端</em>的位置的开始/停止界限，因此<code class="fe ls lt lu lv b">my_list[-5:-2]</code>返回<code class="fe ls lt lu lv b">['e', 'f', 'g']</code>:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="35d0" class="my lx iq lv b gy mz na l nb nc">['a', 'b', 'c', 'd', <strong class="lv ir"><em class="mt">'e', 'f', 'g',</em></strong> 'h', 'i']<br/>  ×    ×    ×    ×    <strong class="lv ir">↑    ↑    ↑</strong>    ×    ×<br/> -9   -8   -7   -6   <strong class="lv ir"><em class="mt">-5   -4   -3   -2</em></strong>   -1</span></pre><p id="0312" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意，如果你尝试<code class="fe ls lt lu lv b">my_list[-2:-5]</code>，你会得到一个空列表。这是我犯的一个错误，但是事情是这样的:为了包含在切片中，一个元素必须在<code class="fe ls lt lu lv b"><em class="mt">start</em></code>边界的右边和<code class="fe ls lt lu lv b"><em class="mt">stop</em></code>边界的左边。因为<code class="fe ls lt lu lv b">-2</code>已经在<code class="fe ls lt lu lv b">-5</code>的<em class="mt">右侧</em>，所以切片器在将任何值填充到切片中之前停止。</p><p id="edd6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个<code class="fe ls lt lu lv b">for</code>循环的工作方式完全相同；下面的第一个循环没有输出，但第二个有输出:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="c118" class="my lx iq lv b gy mz na l nb nc">for i in range(-2,-5):<br/>    print(i)</span><span id="479a" class="my lx iq lv b gy nd na l nb nc">for i in range(-5,-2):<br/>    print(i)</span><span id="f5a1" class="my lx iq lv b gy nd na l nb nc">-5<br/>-4<br/>-3</span></pre><h1 id="97bd" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">步进</h1><p id="32d9" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">切片器可以接受可选的第三个参数，该参数设置切片中包含元素的间隔。所以<code class="fe ls lt lu lv b">my_list[::2]</code>返回<code class="fe ls lt lu lv b">['a', 'c', 'e', 'g', 'i']</code>:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="6cf6" class="my lx iq lv b gy mz na l nb nc"><strong class="lv ir"><em class="mt">  0    1    2    3    4    5    6    7    8<br/></em></strong>  <strong class="lv ir">↓</strong>    ×¹<strong class="lv ir">   ↓</strong>²<strong class="lv ir">   </strong>×¹<strong class="lv ir">   ↓</strong>²   ×¹<strong class="lv ir">   ↓</strong>²   ×¹<strong class="lv ir">   ↓</strong>²<br/>[<strong class="lv ir"><em class="mt">'a',</em></strong> 'b', <strong class="lv ir"><em class="mt">'c',</em></strong> 'd', <strong class="lv ir"><em class="mt">'e',</em></strong> 'f', <strong class="lv ir"><em class="mt">'g',</em></strong> 'h', <strong class="lv ir"><em class="mt">'i'</em></strong>]</span></pre><p id="2605" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">并且<code class="fe ls lt lu lv b">my_list[1::2]</code>返回<code class="fe ls lt lu lv b">['b', 'd', 'f', 'h']</code>:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="fdd8" class="my lx iq lv b gy mz na l nb nc">  0<strong class="lv ir"><em class="mt">    1    2    3    4    5    6    7    8<br/></em></strong>  ×    <strong class="lv ir">↓    </strong>×¹<strong class="lv ir">   ↓</strong>²<strong class="lv ir">   </strong>×¹<strong class="lv ir">   ↓</strong>²   ×¹<strong class="lv ir">   ↓</strong>²   ×¹<br/>['a', <strong class="lv ir"><em class="mt">'b'</em></strong>, 'c', <strong class="lv ir"><em class="mt">'d'</em></strong>, 'e', <strong class="lv ir"><em class="mt">'f'</em></strong>, 'g', <strong class="lv ir"><em class="mt">'h'</em></strong>, 'i']</span></pre><p id="183d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">负步长值反转切片器遍历原始列表的方向:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="ad61" class="my lx iq lv b gy mz na l nb nc">my_list[::-1]</span><span id="6a31" class="my lx iq lv b gy nd na l nb nc">['i', 'h', 'g', 'f', 'e', 'd', 'c', 'b', 'a']</span></pre><p id="08d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">列表元素的索引位置不会改变，但是元素返回的顺序会改变。<code class="fe ls lt lu lv b"><em class="mt">start</em></code>和<code class="fe ls lt lu lv b"><em class="mt">stop</em></code>边界的意义也是相反的，所以<code class="fe ls lt lu lv b"><em class="mt">start</em></code>值应该在切片的最右边，而<code class="fe ls lt lu lv b"><em class="mt">stop</em></code>值应该在它的左边。所以<code class="fe ls lt lu lv b">my_list[5:3:-1]</code>给了我们<code class="fe ls lt lu lv b">[‘f’, ‘e’]</code>:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="decf" class="my lx iq lv b gy mz na l nb nc">&lt;----&lt;----&lt;----&lt;----&lt;----&lt;----&lt;----&lt;----&lt;--<br/>  0    1    2    <strong class="lv ir"><em class="mt">3    4    5</em></strong>    6    7    8<br/>  ×    ×    ×    ×<strong class="lv ir">    ↓    ↓ </strong>   ×    ×    ×<br/>['a', 'b', 'c', 'd', <strong class="lv ir"><em class="mt">'e', 'f'</em></strong>, 'g', 'h', 'i']</span></pre><p id="8367" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样，<code class="fe ls lt lu lv b">my_list[-2:-5:-1]</code>给了我们<code class="fe ls lt lu lv b">['h', 'g', 'f']</code>:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="3191" class="my lx iq lv b gy mz na l nb nc">['a', 'b', 'c', 'd', 'e', <strong class="lv ir"><em class="mt">'f', 'g', 'h',</em></strong> 'i']<br/>  ×    ×    ×    ×    ×    <strong class="lv ir">↑</strong>    <strong class="lv ir">↑</strong>   <strong class="lv ir"> ↑ </strong>   ↑<br/> -9   -8   -7   -6   <strong class="lv ir"><em class="mt">-5   -4   -3   -2</em></strong>   -1<br/>&lt;----&lt;----&lt;----&lt;----&lt;----&lt;----&lt;----&lt;----&lt;--</span></pre><p id="479c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">而<code class="fe ls lt lu lv b">my_list[-1:-8:-3]</code>给了我们<code class="fe ls lt lu lv b">['i', 'f', 'c']</code>:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="9c33" class="my lx iq lv b gy mz na l nb nc">['a', 'b', <strong class="lv ir"><em class="mt">'c',</em></strong> 'd', 'e', <strong class="lv ir"><em class="mt">'f',</em></strong> 'g', 'h', <strong class="lv ir"><em class="mt">'i'</em></strong>]<br/>  ×    ×¹   <strong class="lv ir">↑</strong>³   ×²   ×¹   <strong class="lv ir">↑</strong>³   ×²  <strong class="lv ir"> </strong>×¹   ↑<br/> -9   <strong class="lv ir"><em class="mt">-8   -7   -6   -5   -4   -3   -2   -1</em></strong><br/>&lt;----&lt;----&lt;----&lt;----&lt;----&lt;----&lt;----&lt;----&lt;--</span></pre></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="b68a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这能为您省去一些我在索引和切片工作中遇到的困惑，尤其是对于负步骤。</p></div></div>    
</body>
</html>