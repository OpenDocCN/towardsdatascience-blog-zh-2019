# 内生性介绍

> 原文：<https://towardsdatascience.com/endogeneity-the-reason-why-we-should-know-about-data-part-i-80ec33df66ae?source=collection_archive---------4----------------------->

## 为什么我们应该了解我们的数据

## 描述不同类型内生性的例子

一个冰淇淋小贩在海滩上卖冰淇淋。他收集了两年的总销售额(Y)和销售价格(X)的数据。他将数据交给数据科学家，请他找出最佳销售价格。数据科学家拟合一个线性回归模型，Y = alpha+beta X+error，通过对利润函数=(X-cost)(alpha+beta X)求微分找到最优。

然而，冰淇淋供应商过去常常随着需求的增加而提高冰淇淋的价格。他忘了向数据科学家提及他的定价策略。线性回归认为，随着销售价格的增加，销售额增加(β> 0)或者斜率没有预期的那么负。因此，该模型得出的最优售价至少是次优的(如果对业务无害的话)。

*一家商店给顾客赠送定制的优惠券。有不同的优惠券(有不同的优惠)。商店收集顾客反馈数据，即他们是否使用优惠券(Y)和优惠券详情(X)。他们想知道每张优惠券的有效性，以便将来可以定制并发送给不同的客户。*

数据科学家拟合一个模型来预测每个客户从每张优惠券购买(下个月或接下来几个月)的概率。同样，商店有一个策略，他们发送优惠券给谁，他们发送什么优惠券(而不是随机优惠券)。例如，如果他们认为顾客即使没有优惠券也会购买，他们就不会发送优惠券，或者如果他们认为某人**可能**会购买，他们就会发送更多的优惠券。这一策略没有向数据科学家公开。如果将更多优惠券发送给具有更高购买机会的顾客，也可能给出有偏见的优惠券“有效性”。

*富人变得更富，穷人变得更穷(概念上类似于后面解释的示例 2，但此示例旨在表明内生性不仅限于数据科学)。这在社会学上也叫马修效应。努力工作帮助电影艺术家赢得奖项。制片人希望与获奖的艺术家建立联系，因为他们将奖项与表演质量联系在一起，因此他们获得了更好的机会，从而获得了更多的认可和更多的奖项(同样，富人变得更富)。*

所有这些例子**都违背了**实验设计的基本原则之一——**随机化**。很多时候，一个公司无法承担随机化。在现场实验中，受试者被随机分配到不同的处理水平(或者我们应该随机设置自变量的值并观察因变量)。但是在上面的例子中，这被违反了(因为独立变量依赖于特定的策略——由冰淇淋供应商/商品商店/电影制片人)。

换句话说，独立预测变量(X)应该是*外生*而不是*内生*。外生变量不受其他因素驱动(可观察或不可观察)。在第一个例子中，价格由温度决定。在第二个例子中，优惠券是由过去的销售推动的)。**内生变量与误差项相关，我们来解构一下。**

模型中的响应(Y)应该用独立变量(X)来解释，所有不能用 X 来解释的都包括在误差项中。(*我们知道线性回归中多重共线性的问题和不利影响——在多重共线性的情况下，X1 由 X2* 解释)。如果有一个因素可以解释 Y 但没有被观察到，比如 Z，它就包含在误差中。但是如果 Z 可以解释任何 X(在例 1 中，Z =温度，X =价格)，误差项与 X 相关(因此，价格是内生变量)。因此，当我们有一个与 Y 相关的 Z，但它也与 X 相关，并且不包括在模型中时，内生性问题就出现了。

内生性有多种来源——如果供应商根据时间改变位置会怎样，如果供应商根据队列改变价格会怎样。内生性的来源可以大致分为:

1.  **省略变量**(如冰激凌示例所解释的，价格是内生变量，温度是省略变量)。
2.  s **同态性**(例 2)其中 X 引起 Y，Y 引起 X，这是最常见的，也是最难的一个。在省略变量的情况下，如果结构信息是已知的，那就很简单了(这将在本博客的第 2 部分中讨论)。示例 2 是优惠券导致销售和销售导致给顾客更多优惠券的同时性的示例。在例 1 中，如果卖方基于队列长度改变作为控制的价格(在动态规划或顺序控制理论中研究的*),这是队列导致价格和价格导致队列的同时性。同时也可能是*自选造成的。**
3.  **选择偏差**(例 3)如果取样有偏差，我们无法确定治疗对受试者的影响。例如，如果我们收集周末或高档社区的冰淇淋销售数据。如果我们的样本主要包括获奖者，我们会高估演员的表演质量。赫克曼博士就此课题获得了诺贝尔经济学奖(此处)。

修订一些定义:

1.  P(X=x，Y=y)是一个联合分布
2.  P(X=x|Y=y)是给定 Y 时 X 的条件分布
3.  P(X=x) = sum [ P(X=x|Y=y)P(Y=y)除以所有 y]是 X 的边际
4.  如果 P(X=x，Y=y) = P(X=x)P(Y=y)，那么 X 独立于 Y

我希望下面的陈述现在更有意义(简单地说就是自变量被战略性地设定或者其中自变量是内生的):

> *当自变量的边际分布不独立于因变量的条件分布时，内生性就产生了。*

**如果不考虑内生性呢？**

1.  这些例子说明了两个原因:首先，模型中自变量的实际影响可能被低估或高估。其次，基于模型推断的决策可能是次优的。
2.  当数据科学家在不考虑内生性的情况下拟合模型时，模型拟合更好(增加了对错误事物的信心)。第二部分解释了这项索赔。

内容大量取自[这里](https://link.springer.com/referenceworkentry/10.1007%2F978-3-319-05542-8_8-1)和[这里](https://link.springer.com/referenceworkentry/10.1007%2F978-3-319-05542-8_8-1)。[此处](https://medium.com/@ashutoshnayakkgp/endogeneity-the-reason-why-we-should-know-about-data-part-ii-c1487d69aeed)，我们将在处浏览[所讨论的冰淇淋供应商案例。](https://link.springer.com/referenceworkentry/10.1007%2F978-3-319-05542-8_8-1)[这里](https://medium.com/@ashutoshnayakkgp/endogeneity-the-reason-why-we-should-know-about-data-part-iii-50380e0d996e)将介绍同时性和本文中使用的参考文献。

![](img/a083728fb0a4d6a8c26f166da0658d3f.png)

*原载于 2019 年 6 月 2 日 https://medium.com**T21*[。](https://medium.com/@ashutoshnayakkgp/endogeneity-the-reason-why-we-should-know-about-data-part-i-95d4f4f423d2)