<html>
<head>
<title>Setting up PostgreSQL in Debian-based Linux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在基于 Debian 的 Linux 中设置 PostgreSQL</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/setting-up-postgresql-in-debian-based-linux-e4985b0b766f?source=collection_archive---------26-----------------------#2019-12-17">https://towardsdatascience.com/setting-up-postgresql-in-debian-based-linux-e4985b0b766f?source=collection_archive---------26-----------------------#2019-12-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/293c4f36fbc8d384f5ca1b81d4e7d076.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6tKH3Jh9nIsZ0x0vJlUuBQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Linux Mint, PostgreSQL, Ubuntu</figcaption></figure><p id="e444" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在尝试在我的 Linux 机器上安装 PostgreSQL 服务器来练习 SQL 命令的过程中，我遇到了一些困难，所以我决定为我未来的自己编写这个教程，以防我需要再次安装。在安装了基本系统之后，我还能够从一个小的测试数据库中获得一个转储，以供练习之用…所以我还包含了我用来加载这个数据库文件的命令。</p><p id="787a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">注:这个过程是在 2019 年 11 月左右在 Linux Mint 19 Tara 和 Ubuntu 18.04 上测试的。</p><p id="bbd3" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">下面的许多步骤都是从这篇不错的 Wixel 帖子中获得的:<a class="ae ld" href="https://wixelhq.com/blog/how-to-install-postgresql-on-ubuntu-remote-access" rel="noopener ugc nofollow" target="_blank">https://wixelhq . com/blog/how-to-install-PostgreSQL-on-Ubuntu-remote-access</a></p><p id="09e1" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu">准备和安装</strong></p><p id="dd8a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">Ubuntu 和 Mint(以及其他)的默认库有 Postgres 包，所以我们可以使用 apt 来安装。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="cd20" class="ln lo it lj b gy lp lq l lr ls">$ sudo apt update</span><span id="a6f7" class="ln lo it lj b gy lt lq l lr ls">$ sudo apt install postgresql postgresql-contrib</span></pre><p id="a50f" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu">角色设置</strong></p><p id="1d05" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">postgres 的安装会创建一个用户 postgres，该用户可以访问默认的 Postgres 数据库。通过首先切换到 postgres 用户并运行<code class="fe lu lv lw lj b">psql</code>来访问它。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="9a1d" class="ln lo it lj b gy lp lq l lr ls">$ sudo -i -u postgres</span><span id="4add" class="ln lo it lj b gy lt lq l lr ls">postgres@server:~$ psql</span></pre><p id="634f" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">您现在可以直接访问默认的 postgres 数据库。注意“<code class="fe lu lv lw lj b">\q</code>”允许您退出 Postgres 提示符。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="c98e" class="ln lo it lj b gy lp lq l lr ls">postgres=# \q</span></pre><p id="b5d3" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在您已经确认了 Postgres 的功能，是时候设置角色了。仍然在 postgres 帐户中，执行以下命令。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="d5b0" class="ln lo it lj b gy lp lq l lr ls">postgres@server:~$ createuser --interactive</span></pre><p id="63e7" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这将引导您完成设置新用户的过程。关于其他标志的更多细节可以在<code class="fe lu lv lw lj b">createuser</code>手册页中找到。</p><p id="3e3a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">注意:首先创建一个与您的用户帐户同名的角色作为超级用户可能会很有用。</p><p id="130c" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在运行<code class="fe lu lv lw lj b">psql</code>(作为与您刚刚创建的角色同名的用户名)将导致一个错误。虽然您已经创建了一个角色，但是每个角色的默认数据库都是与该角色同名的数据库。因此，有必要提供您希望连接的数据库的名称，或者创建一个相应的数据库，这将在下面的部分中讨论。</p><p id="f12a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu">访问特定数据库</strong></p><p id="6a6b" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">假设您的角色(您的用户名)已经被授权访问一个数据库<code class="fe lu lv lw lj b">{dbname}</code>，您可以简单地从您的命令提示符下运行以下命令。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="044e" class="ln lo it lj b gy lp lq l lr ls">$ psql {dbname}</span></pre><p id="e7f6" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">您也可以指定一个角色<code class="fe lu lv lw lj b">{role}</code>而不是您的用户名，如下所示。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="282f" class="ln lo it lj b gy lp lq l lr ls">$ psql -U {role} {dbname}</span></pre><p id="8db2" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu">创建新数据库</strong></p><p id="9385" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">作为 postgres 用户，执行以下命令。注意:将<code class="fe lu lv lw lj b">{dbname}</code>替换为所需数据库的名称，通常是上面创建的角色的名称。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="5e0d" class="ln lo it lj b gy lp lq l lr ls">postgres@server:~$ createdb {dbname}</span></pre><p id="96f7" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu">加载数据库</strong></p><p id="2038" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如果您得到了一个数据库的转储，这里用<code class="fe lu lv lw lj b">{filename}.sql</code>表示，下面将在 PostgreSQL 服务器中创建数据库，并将文件数据加载到数据库中。注意:将<code class="fe lu lv lw lj b">{username}</code>替换为 PostgreSQL 服务器中现有的角色，将<code class="fe lu lv lw lj b">{dbname}</code>替换为 PostgreSQL 服务器中现有数据库的名称，将<code class="fe lu lv lw lj b">{filename}</code>替换为。sql 文件。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="c385" class="ln lo it lj b gy lp lq l lr ls">$ createdb -U {username} {dbname}</span><span id="0d60" class="ln lo it lj b gy lt lq l lr ls">$ psql {dbname} &lt; {filename}.sql<br/></span></pre><p id="0cca" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在你已经准备好<code class="fe lu lv lw lj b">SELECT something FROM your_tables</code>了。</p><p id="0ff7" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">PSQLing 快乐！</p></div></div>    
</body>
</html>