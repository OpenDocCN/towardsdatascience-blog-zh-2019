<html>
<head>
<title>Deploy your RShiny App on AWS Series — Lightsail</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 AWS 系列— Lightsail 上部署您的 RShiny 应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/deploy-your-rshiny-app-on-aws-series-lightsail-d56a05f85ad9?source=collection_archive---------40-----------------------#2019-11-25">https://towardsdatascience.com/deploy-your-rshiny-app-on-aws-series-lightsail-d56a05f85ad9?source=collection_archive---------40-----------------------#2019-11-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="eeda" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">快速轻松地部署您的 RShiny 应用程序</h2></div><p id="e153" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您正在考虑为您的<a class="ae lb" href="https://shiny.rstudio.com/" rel="noopener ugc nofollow" target="_blank"> RShiny </a>应用选择哪种部署场景，请不要再犹豫了！我已经为您计划了一整个系列的各种部署选项，以及为什么您应该选择每一个。</p><p id="8060" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你像我一样，喜欢看视频而不是看博客，那就去我的<a class="ae lb" href="https://youtu.be/CtYEGPt-PCw" rel="noopener ugc nofollow" target="_blank"> YouTube </a>频道看看这篇文章吧！</p><h1 id="2bbf" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">为什么应该使用 AWS Lightsail 进行 RShiny 部署？</h1><p id="1df6" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">部署场景像雪花一样。没有两个人是完全一样的！；-)对于不同的部署场景，您需要不同级别的电源和控制。这里我们将讨论 RShiny 部署，但它适用于几乎所有情况。</p><p id="6f64" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Lightsail 是整个 AWS 部署生态系统中相对较新的成员。与其他一些更强大的解决方案相比，它使部署 web 应用程序变得更加简单和高效。</p><p id="ce05" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果符合以下条件，Lightsail 将是您部署的好选择:</p><ul class=""><li id="a5cc" class="lz ma iq kh b ki kj kl km ko mb ks mc kw md la me mf mg mh bi translated">部署 web 应用程序或配置 web 服务器(Apache、NGINX)会让你感觉不舒服。</li><li id="bb14" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la me mf mg mh bi translated">你可以配置 web 服务器，但是你需要一些快速简单的东西。</li><li id="3d49" class="lz ma iq kh b ki mi kl mj ko mk ks ml kw mm la me mf mg mh bi translated">你有一个很小的应用程序，你不希望流量出现大的峰值。</li></ul><p id="9001" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，每一点都有其例外。对我自己来说，我知道如何配置 web 服务器，但我仍然喜欢让我的生活更轻松的工具。如果我需要一个快速启动并运行的演示，或者一个不会存在很长时间的小应用程序，我不会花时间去计划一些复杂的部署场景，这些场景包含可伸缩的节点。虽然这很有趣，但也有点矫枉过正。</p><p id="a061" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">简单地说，许多 AWS 部署工具是弹性的或自动伸缩的，这意味着您可以根据需求进行伸缩。Lightsail 非常简单，没有任何弹性。</p><h1 id="f74a" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">不使用 AWS Lightsail 部署 RShiny 应用程序的理由</h1><p id="4478" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">如果预计流量会出现大峰值，您就不要使用 Lightsail。那么您将需要一个具有自动扩展能力的更强大的解决方案。更强大通常意味着更复杂。由于 Lightsail 将创建您的 EC2 实例，您可以随时从 Lightsail 开始，然后在需要更多功能时进行迁移。</p><h1 id="ed74" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">创建您的 RShiny 基本实例</h1><p id="91ad" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">本教程的其余部分将假设您有一个 AWS 帐户。</p><p id="31ea" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">前往<a class="ae lb" href="https://lightsail.aws.amazon.com/ls/webapp/home" rel="noopener ugc nofollow" target="_blank">AWS light sail 主页。</a></p><p id="3887" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">选择实例位置和实例类型。我建议选择 NGINX 来证明你未来的生活。这可能是不必要的，取决于你的设置，但我喜欢它。更多关于 NGINX vs 无 NGINX 的稍后！</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi mn"><img src="../Images/dbeca27da484f8abe728ab1eb7176b24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IZO9BBLgP1y8ofuq.png"/></div></div></figure><p id="313f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来点击 Change SSH key pair 来下载您的 SSH key pair。我知道它奇怪的措辞，但只要点击它。</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi mz"><img src="../Images/e5519a7d7ac634a1012311e55cb61a78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0zNR6d8sZpPKcgNR.png"/></div></div></figure><p id="acdc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦你点击它，你可以选择改变密钥对或者下载默认的。选择其中一个场景，并确保保存它！</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi na"><img src="../Images/37132189761cc111f4a2f4721c69402c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NQZWvKWUL_DuOGm6.png"/></div></div></figure><p id="423a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，为您的实例命名，然后单击“创建实例”。</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nb"><img src="../Images/b004e71ceee6cab7ea72c920077c947a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lSRs7oe04ZBcZz8d.png"/></div></div></figure><p id="f931" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在您已经准备好了实例，我们可以进入下一部分，实际上是运行 RShiny！</p><h1 id="4a66" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">连接到您的 RShiny 实例</h1><p id="9683" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">点击左上角返回 AWS Lightsail 主页。从那里，您将有一个实例列表。找到您之前创建的实例。我的名字叫 RShiny。</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nc"><img src="../Images/34187de43bec132192f935eb6268c618.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*py4wB0IGjhkpzbsk.png"/></div></div></figure><h1 id="d2c1" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">使用 web 界面连接</h1><p id="85de" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">实际上，您可以单击 3 个垂直的橙色点，然后单击 connect，这将在 web 浏览器中显示一个终端。相当整洁！只需按连接，你的浏览器将启动一个终端。</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nd"><img src="../Images/494476a369f84c49635ce5ee1dbf420c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BKnxEVPA6PwOv1JI.png"/></div></div></figure><h1 id="7a78" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">使用终端连接</h1><p id="8f9e" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">你也可以使用终端连接，这也是我想做的。我对自己的热键很挑剔！在该框的第二行中，它应该在左侧显示“正在运行”,并在右侧显示 IP 地址。IP 地址是您的公共 IP 地址。</p><pre class="mo mp mq mr gt ne nf ng nh aw ni bi"><span id="fb71" class="nj ld iq nf b gy nk nl l nm nn">chmod 600 ~/.ssh/LightsailDefaultKey-us-east-1.pem ssh -i ~/.ssh/LightsailDefaultKey-us-east-1.pem <a class="ae lb" href="mailto:bitnami@54.163.72.140" rel="noopener ugc nofollow" target="_blank">bitnami@54.163.72.140</a></span></pre><p id="5c3d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">确保使用 ssh 密钥和实例的 IP 地址。我总是把我的从下载移到~/.ssh。</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi no"><img src="../Images/b67ecba4e55b327623fd8aee6933a722.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RpgfvnhCpa66FU0I.png"/></div></div></figure><h1 id="95e7" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">安装 RShiny 并运行一个示例</h1><p id="02fe" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">现在，我用康达安装了几乎所有的科学软件。如果你有其他的安装方法，那就试试吧。只要你把它安装好，你就万事俱备了！</p><pre class="mo mp mq mr gt ne nf ng nh aw ni bi"><span id="bab1" class="nj ld iq nf b gy nk nl l nm nn">wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh chmod 777 *sh ./Miniconda3-latest-Linux-x86_64.sh -b</span><span id="5859" class="nj ld iq nf b gy np nl l nm nn">export PATH=$HOME/miniconda3/bin:$PATH # Conda forge has sooooo many packages conda config --add channels conda-forge # Create a conda environment called r-shiny and install the package r-shiny (add whatever packages you want here too) conda create -y -n r-shiny r-shiny</span></pre><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nq"><img src="../Images/808cafcf513e16a5ffd7276ecdc81270.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6QBTircl-hynZEpO.png"/></div></div></figure><p id="c682" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">完成所有这些后，您应该会看到类似这样的内容。现在，如果您使用-b 安装了 Miniconda3，您将没有正确的 shell 别名来运行“conda activate”。使用旧的“source activate”语法，你就可以了。</p><pre class="mo mp mq mr gt ne nf ng nh aw ni bi"><span id="7e0f" class="nj ld iq nf b gy nk nl l nm nn">source activate r-shiny</span></pre><p id="4695" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就是这样。现在我们准备开始玩一些代码！</p><h1 id="ab4e" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">从一个例子开始</h1><p id="d211" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">即使你已经准备好了一个现实世界的应用程序，我还是建议你从最简单的场景开始。然后，当事情出错时，你就知道是哪里出错了。</p><p id="b334" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这段代码主要摘自<a class="ae lb" href="https://github.com/rstudio/shiny-examples/blob/master/001-hello/app.R" rel="noopener ugc nofollow" target="_blank">闪亮的 github repo 示例。</a></p><pre class="mo mp mq mr gt ne nf ng nh aw ni bi"><span id="b12e" class="nj ld iq nf b gy nk nl l nm nn"><strong class="nf ir">#!/usr/bin/env Rscript</strong><br/>library(shiny)<br/><br/># Define UI for app that draws a histogram ----<br/>ui &lt;- fluidPage(<br/><br/>  # App title ----<br/>  titlePanel("Hello Shiny!"),<br/><br/>  # Sidebar layout with input and output definitions ----<br/>  sidebarLayout(<br/><br/>    # Sidebar panel for inputs ----<br/>    sidebarPanel(<br/><br/>      # Input: Slider for the number of bins ----<br/>      sliderInput(inputId = "bins",<br/>                  label = "Number of bins:",<br/>                  min = 1,<br/>                  max = 50,<br/>                  value = 30)<br/><br/>    ),<br/><br/>    # Main panel for displaying outputs ----<br/>    mainPanel(<br/><br/>      # Output: Histogram ----<br/>      plotOutput(outputId = "distPlot")<br/><br/>    )<br/>  )<br/>)<br/># Define server logic required to draw a histogram ----<br/>server &lt;- function(input, output) {<br/><br/>  # Histogram of the Old Faithful Geyser Data ----<br/>  # with requested number of bins<br/>  # This expression that generates a histogram is wrapped in a call<br/>  # to renderPlot to indicate that:<br/>  #<br/>  # 1. It is "reactive" and therefore should be automatically<br/>  #    re-executed when inputs (input$bins) change<br/>  # 2. Its output type is a plot<br/>  output$distPlot &lt;- renderPlot({<br/><br/>    x    &lt;- faithful$waiting<br/>    bins &lt;- seq(min(x), max(x), length.out = input$bins + 1)<br/><br/>    hist(x, breaks = bins, col = "#75AADB", border = "white",<br/>         xlab = "Waiting time to next eruption (in mins)",<br/>         main = "Histogram of waiting times")<br/><br/>    })<br/><br/>}<br/># If you want to automatically reload the app when your codebase changes - should be turned off in production<br/>options(shiny.autoreload = TRUE)<br/>options(shiny.host = '0.0.0.0')<br/>options(shiny.port = 8080)<br/># Create Shiny app ---- <br/>shinyApp(ui = ui, server = server)</span></pre><p id="30e9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我创建了一个文件夹` ~/rshiny-app/`并将这段代码粘贴到 app.R. chmod 777 你的应用程序中。r 文件并运行它！</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nr"><img src="../Images/41acc6d43096ffb220c8946104cc6e60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4qVcL2PbJBHst1Sk.png"/></div></div></figure><h1 id="1cf8" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">打开端口</h1><p id="9701" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">如果你在端口 8080 上访问你的公共 IP 地址，它将不起作用，如果你不习惯 AWS 默认锁定端口，这将非常令人沮丧。</p><p id="949d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你要做的是进入你的 Lightsail 主页，点击右上角的 3 个垂直的橙色圆点。然后单击管理。</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ns"><img src="../Images/4cc262989947c8382c541c7a25a4b2f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*v-BPpvAS8n7G_IKJ.png"/></div></div></figure><p id="45e5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦有点击网络。</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nt"><img src="../Images/59e09ab8dc74abbed8203a07918e4a50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HEzAtVDSIk-wVSYV.png"/></div></div></figure><p id="6f6f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在防火墙下，单击添加另一个并添加端口 8080。确保点击保存！</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nu"><img src="../Images/e7a838b3a56ece7be200111299007e30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6xAFcZjP-pgFd7dc.png"/></div></div></figure><p id="999d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">给它几秒钟然后去公-ip:8080。</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nv"><img src="../Images/47581892775c8309b9ac0ef07de16729.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EB0SC-24G4K6GIR-.png"/></div></div></figure><p id="6000" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您应该看到您的 RShiny 实例启动并运行了！</p><h1 id="5d52" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">后续步骤</h1><p id="44cf" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">根据您的需要，本教程的下一步是完全可选的。如果我正在部署一个演示，或者甚至是一个内部使用的非常小的应用程序，我可能会在这里停止它。</p><h1 id="a3ee" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">在 PM2 的进程管理器下运行你的应用</h1><p id="572a" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">如果你以前从未使用过进程管理器，它听起来很像。流程管理器是你的应用程序的包装器，在这里是我们的应用程序。R RShiny 应用程序。它负责启动、停止、记录等等。</p><p id="ec22" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我最喜欢的进程管理器是<a class="ae lb" href="https://pm2.keymetrics.io/docs/usage/quick-start/" rel="noopener ugc nofollow" target="_blank"> pm2 </a>。它最初是为 Node.js 应用程序编写的，但实际上它适用于所有应用程序。我已经将它用于 bash 脚本(是的，我知道)、perl、python 和 R 以及 Node.js 应用程序。</p><p id="9037" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">顺便提一下，我认为学习一些可以跨多个部署场景使用的工具是非常有益的。我知道 RShiny 有自己的部署策略，但是我真的不想为每一种应用程序类型都学习一种新方法。我部署了很多应用程序，这对我来说不是一个合理的目标。相反，我知道如何使用一些不同的工具，主要是 pm2 和 NGINX，来运行我的 web 应用程序。(好了我说完了我和我的观点！)</p><p id="8a7d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Ctrl / Cmd + C 才能杀死你的 app.R。</p><pre class="mo mp mq mr gt ne nf ng nh aw ni bi"><span id="e14f" class="nj ld iq nf b gy nk nl l nm nn">conda install -y nodejs npm install -g pm2 </span><span id="21c3" class="nj ld iq nf b gy np nl l nm nn">pm2 start --name rshiny-example-app app.R --interpreter="Rscript"</span></pre><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nv"><img src="../Images/d8075a48fd9f0b0d8b38873725490e9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Dooygu9PZlwYRQmX.png"/></div></div></figure><p id="c5f8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你运行“pm2 日志应用程序名称”,你会看到你的日志</p><pre class="mo mp mq mr gt ne nf ng nh aw ni bi"><span id="538d" class="nj ld iq nf b gy nk nl l nm nn">pm2 logs rshiny-example-app</span></pre><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nw"><img src="../Images/ebec1a22e8a510edb53e98e3785c740c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SbEB8bcZtZuq5JtW.png"/></div></div></figure><p id="01ef" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以做许多其他有趣的事情，甚至将您的应用程序集群化以运行多个实例，以及创建启动脚本。PM2 甚至可以检测你在什么系统上，并相应地创建一个启动脚本！</p><h1 id="0df4" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">使用 NGINX 服务您的应用</h1><p id="41c4" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">一旦我们的 RShiny 应用程序在我们的流程管理器下运行良好，就该用 NGINX 来服务它了。</p><p id="02f3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在各种网络服务器下配置你的 RShiny 应用的最终权力(据我所知)是这里的<a class="ae lb" href="https://support.rstudio.com/hc/en-us/articles/213733868-Running-Shiny-Server-with-a-Proxy" rel="noopener ugc nofollow" target="_blank">。</a>这里我只讨论一个 NGINX 场景。</p><pre class="mo mp mq mr gt ne nf ng nh aw ni bi"><span id="7b4a" class="nj ld iq nf b gy nk nl l nm nn">sudo su - <br/># Or nano or whatever you want<br/>vi /opt/bitnami/nginx/conf/bitnami/bitnami.conf</span></pre><p id="55ec" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在“服务器”块的正上方放入这段代码</p><pre class="mo mp mq mr gt ne nf ng nh aw ni bi"><span id="1e4a" class="nj ld iq nf b gy nk nl l nm nn">map $http_upgrade $connection_upgrade { default upgrade; '' close; }</span></pre><p id="7fb7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，在您的服务器块中，放置以下位置块:</p><pre class="mo mp mq mr gt ne nf ng nh aw ni bi"><span id="f765" class="nj ld iq nf b gy nk nl l nm nn">location / { <br/>   proxy_set_header Host $host; <br/>   proxy_set_header X-Real-IP $remote_addr; <br/>   proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; <br/>   proxy_set_header X-Forwarded-Proto $scheme; <br/>   proxy_set_header Host $http_host;</span><span id="5a84" class="nj ld iq nf b gy np nl l nm nn">   proxy_pass http://localhost:8080/; </span><span id="2a4f" class="nj ld iq nf b gy np nl l nm nn">   proxy_redirect / $scheme://$http_host/; <br/>   proxy_http_version 1.1; <br/>   proxy_set_header Upgrade $http_upgrade; <br/>   proxy_set_header Connection $connection_upgrade; <br/>   proxy_read_timeout 20d; proxy_buffering off; <br/>}</span></pre><p id="66e7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这就是它看起来的样子。</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nx"><img src="../Images/fa7b2d2b4ce09ddb1c4b544108e62ade.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hO71bkOXNrUtBU24.png"/></div></div></figure><p id="40d9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">重新启动 bitnami nginx 服务。</p><pre class="mo mp mq mr gt ne nf ng nh aw ni bi"><span id="57bf" class="nj ld iq nf b gy nk nl l nm nn">/opt/bitnami/ctlscript.sh restart nginx</span></pre><p id="d5fa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">去你的公共 IP 地址没有端口，你会看到你闪亮的应用！</p><h1 id="27c6" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">总结性的新闻报导</h1><p id="0e7c" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">这个帖子到此为止！在本系列即将发布的文章中，我将介绍如何使用更复杂的 RShiny 部署方法，包括 EC2、使用自动伸缩组、Swarm 和 Kubernetes。</p></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><p id="ca04" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">【https://www.dabbleofdevops.com】最初发表于<a class="ae lb" href="https://www.dabbleofdevops.com/blog/deploy-your-rshiny-app-on-aws-series-lightsail" rel="noopener ugc nofollow" target="_blank"><em class="of"/></a><em class="of">。</em></p></div></div>    
</body>
</html>