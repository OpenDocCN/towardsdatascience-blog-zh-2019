<html>
<head>
<title>Time series forecasting: from naive to ARIMA and beyond</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">时间序列预测:从天真到 ARIMA 及以后</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/time-series-forecasting-from-naive-to-arima-and-beyond-ef133c485f94?source=collection_archive---------7-----------------------#2019-12-28">https://towardsdatascience.com/time-series-forecasting-from-naive-to-arima-and-beyond-ef133c485f94?source=collection_archive---------7-----------------------#2019-12-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4e27" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">简单和复杂的商业决策预测技术</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2f8c7ab3d739f5bf12484eb9a74bc742.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_WCxWketMeD67hlb"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@aronvisuals?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Aron Visuals</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><ul class=""><li id="0352" class="kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">在未来五年内再建一座发电厂需要预测未来的需求；</li><li id="c03c" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">下周在呼叫中心安排员工需要预测下周的呼叫量；</li><li id="bb51" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm ln lo lp lq bi translated">储存零售存货需要预测存货需求。</li></ul><p id="18c6" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">事实上，短期和中期预测是各行各业商业决策的重要组成部分。历史数据是这一预测过程的重要输入。</p><p id="c35f" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">时间序列数据集是<em class="mj">在任何业务中最广泛生成和使用的数据。它们既用于理解过去，也用于预测未来。在本文中，我将通过相关的案例研究和示例来讨论如何将各种预测方法应用于时间序列数据集。这篇文章的目的不是评价哪个模型是好是坏，而是展示我们在实践中可以做预测的许多不同的方法。本文分为两大部分:</em></p><blockquote class="mk ml mm"><p id="b6fc" class="lw lx mj lb b lc ld ju ly le lf jx lz mn ma mb mc mo md me mf mp mg mh mi lm im bi translated">(1)首先，我将概述时间序列数据以及如何分解不同的时间序列成分；</p><p id="903b" class="lw lx mj lb b lc ld ju ly le lf jx lz mn ma mb mc mo md me mf mp mg mh mi lm im bi translated">(2)然后我将提供不同预测技术的例子以及相关的实现方法</p></blockquote></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h2 id="c35e" class="mx my it bd mz na nb dn nc nd ne dp nf lg ng nh ni li nj nk nl lk nm nn no np bi translated"><strong class="ak">理解和分解时间序列数据</strong></h2><p id="4a04" class="pw-post-body-paragraph lw lx it lb b lc nq ju ly le nr jx lz lg ns mb mc li nt me mf lk nu mh mi lm im bi translated">那么什么是时间序列数据呢？时间序列是在离散时间点记录的一系列观察值。它们可以以每小时(如气温)、每天(如 DJI 平均)、每月(如销售额)或每年(如国内生产总值)的时间间隔记录。时间序列广泛应用于所有学科，包括统计学、数学、天文学和工程学。时间序列绘图是在数据科学和分析的探索性数据分析(EDA)阶段实施的最基本的绘图练习之一。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/a05340839e6cd3c189f85052b49017e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*uXhI-nlDZDm3hgFQ6HXGJw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Time series data: Daily Dow Jones Industrial (DJI) averages over 6 months</figcaption></figure><p id="7fab" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">我们来看看下图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/ffc706c8f7889f643ccfa85a50b3b6cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*WqeRxzlH0a58AzYkK0UszQ.png"/></div></figure><p id="6970" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">即使用肉眼也很少有明显的特性:</p><ol class=""><li id="4160" class="kz la it lb b lc ld le lf lg lh li lj lk ll lm nx lo lp lq bi translated">这是一个时间序列图</li><li id="6b7e" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm nx lo lp lq bi translated">有上升的趋势</li><li id="4f1d" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm nx lo lp lq bi translated">观察值具有季节性(在固定的时间间隔内起伏)</li></ol><p id="ae50" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">事实上，如果我们分解这些数据，我们会看到这些组件，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/39f0ca8190e953850746818a32fc2fb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/format:webp/1*UFcALbP7mGrS0udG48V3NQ.png"/></div></figure><h2 id="108b" class="mx my it bd mz na nb dn nc nd ne dp nf lg ng nh ni li nj nk nl lk nm nn no np bi translated">时间序列数据的预测技术</h2><p id="6c96" class="pw-post-body-paragraph lw lx it lb b lc nq ju ly le nr jx lz lg ns mb mc li nt me mf lk nu mh mi lm im bi translated">预测未来可以简单到外推历史观察的趋势，应用复杂的算法。在这里，我介绍了商业应用程序中最常用的不同技术。我使用两个统计和可视化包在 R 环境中演示这些技术:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="f035" class="mx my it oa b gy oe of l og oh"># install packages<br/>library("forecast")<br/>library("ggplot2")</span></pre><p id="a17c" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在导入数据(零售销售数据集)并将其转换为时间序列对象后，它看起来是这样的。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="ef26" class="mx my it oa b gy oe of l og oh"># import dataset<br/>retaildata = readxl::read_excel("../retail.xlsx", skip=1)</span><span id="9c50" class="mx my it oa b gy oi of l og oh"># convert dataset into a time series object<br/>retailts = ts(retaildata, start = c(1982,4), frequency = 12 )</span><span id="7133" class="mx my it oa b gy oi of l og oh"># plot the time series object with autoplot() function that comes with forecast() package<br/>autoplot(retailts)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/46f04fa87137d5a00683be70d57b85f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*pGXIutQQ4vDGSSmk8NQL_g.png"/></div></figure><p id="8681" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">首先我将解释一些简单的技术来预测这个时间序列对象。虽然这些简单的技术在实践中不经常使用，但知道它们是如何产生的是很好的，然后我们将进入更复杂的技术。</p><h2 id="6a10" class="mx my it bd mz na nb dn nc nd ne dp nf lg ng nh ni li nj nk nl lk nm nn no np bi translated">简单的预测技术</h2><p id="1052" class="pw-post-body-paragraph lw lx it lb b lc nq ju ly le nr jx lz lg ns mb mc li nt me mf lk nu mh mi lm im bi translated">简单的预测技术被用作基准。它们提供了对历史数据的一般理解，并建立直觉，在此基础上增加额外的层复杂性。几种这样的技术在文献中很常见，如:均值模型、简单预测、随机游走、漂移法等。例如，均值模型采用以前观察值的均值，并将其用于预测。那就是:</p><blockquote class="mk ml mm"><p id="62dd" class="lw lx mj lb b lc ld ju ly le lf jx lz mn ma mb mc mo md me mf mp mg mh mi lm im bi translated">预测值=训练数据的平均值</p></blockquote><p id="c1b4" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">另一方面，随机游走将预测下一个值，ŷ(t，它等于前一个值加上一个常数变化。</p><p id="8094" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">ŷ(t)= y(t-1)+α</p><p id="3c4e" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">初始预测的值是基于最后一次观察的值设置的。和其他简单的方法一样，它提供了一个大概的数字作为初步估计，直到进一步的研究完成。下面是季节性朴素预测模型的实现。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="edc9" class="mx my it oa b gy oe of l og oh"># subsetting train and test data using window()function <br/>retailtstrain = window(retailts, end = c(2010,3))<br/>retailtstest = window(retailts, start = c(2010,4))</span><span id="e29f" class="mx my it oa b gy oi of l og oh"># model building<br/>retailtstrain_snaive = snaive(retailtstrain, h=50)</span><span id="ce0f" class="mx my it oa b gy oi of l og oh"># ploting<br/>autoplot(retailts)+<br/>autolayer(retailtstrain_snaive, series = "S Naive", PI = FALSE)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/ef4d66fedb53e5641c4d81413761ceb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*SOFI16T-M-TKn20wJOxN5A.png"/></div></figure><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="6eb2" class="mx my it oa b gy oe of l og oh"># Accuracy test<br/>accuracy(retailtstrain_snaive, retailtstest)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/600348f230a3014059a6d196b92cd540.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*47w_iNS8uPriMlF541o2Tg.png"/></div></figure><h2 id="cce2" class="mx my it bd mz na nb dn nc nd ne dp nf lg ng nh ni li nj nk nl lk nm nn no np bi translated">指数平滑法</h2><p id="5497" class="pw-post-body-paragraph lw lx it lb b lc nq ju ly le nr jx lz lg ns mb mc li nt me mf lk nu mh mi lm im bi translated">根据数据类型的不同，指数平滑几乎没有变化。简单的指数平滑法用于没有明确趋势的非季节性数据，而霍尔特-温特法用于有趋势和季节性的数据。它应用于平稳时间序列，其中平滑由参数 alpha (0~1)控制，其中较低的值意味着对最近观察值的较低权重。下面是使用相同数据集的霍尔特-温特指数平滑的实现。</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="004a" class="mx my it oa b gy oe of l og oh"># Holt Winter Exponential Smoothing<br/># Two variations: additive for roughly constant seasonal variation, otherwise multiplicative method</span><span id="65e7" class="mx my it oa b gy oi of l og oh">data = window(retailts, start=2000)<br/>data_add = hw(data, seasonal="additive")<br/>data_mult = hw(data, seasonal="multiplicative")</span><span id="347c" class="mx my it oa b gy oi of l og oh">autoplot(data, series = "original data")+<br/>autolayer(data_add, series = "additive", PI=FALSE)+<br/>autolayer(data_mult, series = "multiplicative", PI=FALSE)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/c9b0307474aa102d784e886f1638be25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*_eyADxnJZxbi2seXw5hxGw.png"/></div></figure><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="edb7" class="mx my it oa b gy oe of l og oh"># model summary and performance<br/>data_add[["model"]]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi om"><img src="../Images/fa7d1074294f34f39fa1bf08a9cf2d3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*ruFiynaictb6gxArXfVqlQ.png"/></div></figure><h2 id="0377" class="mx my it bd mz na nb dn nc nd ne dp nf lg ng nh ni li nj nk nl lk nm nn no np bi translated">ARIMA 家族</h2><p id="e0f4" class="pw-post-body-paragraph lw lx it lb b lc nq ju ly le nr jx lz lg ns mb mc li nt me mf lk nu mh mi lm im bi translated">自回归综合移动平均(ARIMA)可以说是最流行和最广泛使用的统计预测技术。顾名思义，这个技术家族有 3 个组成部分:a)一个“自回归”部分，它模拟序列和它的滞后观测值之间的关系；b)将预测建模为滞后预测误差的函数的“移动平均”模型；和 c)使系列静止的“集成”组件。</p><p id="17b2" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">该模型采用以下参数值:</p><blockquote class="mk ml mm"><p id="79e2" class="lw lx mj lb b lc ld ju ly le lf jx lz mn ma mb mc mo md me mf mp mg mh mi lm im bi translated">定义滞后数量的 p；</p><p id="3050" class="lw lx mj lb b lc ld ju ly le lf jx lz mn ma mb mc mo md me mf mp mg mh mi lm im bi translated"><em class="it"> d </em>指定使用的差异数；和</p><p id="75bb" class="lw lx mj lb b lc ld ju ly le lf jx lz mn ma mb mc mo md me mf mp mg mh mi lm im bi translated"><em class="it"> q </em>定义了移动平均窗口的大小</p></blockquote><p id="e977" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">使用时序对象进行预测的 ARIMA 模型的实现如下:</p><pre class="kj kk kl km gt nz oa ob oc aw od bi"><span id="5613" class="mx my it oa b gy oe of l og oh"># implementing auto.arima() to forecast<br/>retailts_arima = auto.arima(retailts, seasonal=TRUE, stepwise = FALSE, approximation = FALSE)<br/>retailts_arima %&gt;% forecast(h=10) %&gt;% autoplot()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/532b7ef9eb2e53ddc76cd7904bb64e59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*adMq3hnRdHg3oli2NO1Etg.png"/></div></figure><h2 id="b677" class="mx my it bd mz na nb dn nc nd ne dp nf lg ng nh ni li nj nk nl lk nm nn no np bi translated">更先进的技术</h2><p id="f7be" class="pw-post-body-paragraph lw lx it lb b lc nq ju ly le nr jx lz lg ns mb mc li nt me mf lk nu mh mi lm im bi translated">最后，还有一些盒子外的技术，如<a class="ae ky" href="https://en.wikipedia.org/wiki/Agent-based_model" rel="noopener ugc nofollow" target="_blank">基于代理的</a>和<a class="ae ky" href="https://www.systemdynamics.org/what-is-sd" rel="noopener ugc nofollow" target="_blank">系统动态</a>建模。系统动力学是 20 世纪 50 年代由麻省理工学院<a class="ae ky" href="https://mitsloan.mit.edu/faculty/academic-groups/system-dynamics/about-us" rel="noopener ugc nofollow" target="_blank">斯隆管理学院</a>开发的，是一种模拟复杂系统行为的方法，其中一个组件的变化会导致其他组件的变化。这种方法广泛应用于医疗保健、疾病研究、公共交通、商业管理和收入预测等行业。系统动力学最著名的应用可能是罗马俱乐部的增长极限模型。</p><p id="d14f" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">一个系统动态模型代表了一个复杂的系统，通过反馈循环来预测系统的行为。假设一个银行账户有 100 美元的“股票”。每月存入 20 美元(由“流程”1 表示)，每月提取 15 美元(由“流程”2 表示):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/51a6732608a5dd4fce43718b880481a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*zp6Rr04OCa4i1z24dAU2Xg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">System dynamic modeling workflow</figcaption></figure><p id="6172" class="pw-post-body-paragraph lw lx it lb b lc ld ju ly le lf jx lz lg ma mb mc li md me mf lk mg mh mi lm im bi translated">在这个例子中，股票的未来价值(即账户存款)被建模为未来流量(即存款和取款)的函数。<a class="ae ky" href="https://mpra.ub.uni-muenchen.de/27323/1/MPRA_paper_27323.pdf" rel="noopener ugc nofollow" target="_blank">本文</a>提供了在建筑行业实施系统动态预测模型的案例研究。</p><h2 id="de14" class="mx my it bd mz na nb dn nc nd ne dp nf lg ng nh ni li nj nk nl lk nm nn no np bi translated">额外资源</h2><ol class=""><li id="925f" class="kz la it lb b lc nq le nr lg oo li op lk oq lm nx lo lp lq bi translated">罗布·海德曼的网站<a class="ae ky" href="https://robjhyndman.com/" rel="noopener ugc nofollow" target="_blank">https://robjhyndman.com/</a>是 R 中所有预测问题的一站式解决方案。也可以查看开放存取书籍<a class="ae ky" href="https://otexts.com/fpp2/" rel="noopener ugc nofollow" target="_blank">https://otexts.com/fpp2/</a>中的理论讨论以及 R 实施示例。</li><li id="1d68" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm nx lo lp lq bi translated"><em class="mj">《R 对于时间序列的一个小本子》</em>什么都有简化形式。<em class="mj"/><a class="ae ky" href="http://www.calvin.edu/~stob/courses/m344/S15/a-little-book-of-r-for-time-series.pdf" rel="noopener ugc nofollow" target="_blank">http://www . Calvin . edu/~ stob/courses/m344/S15/a-little-book-of-r-for-time-series . pdf</a></li><li id="055f" class="kz la it lb b lc lr le ls lg lt li lu lk lv lm nx lo lp lq bi translated">如果你喜欢 Python，请点击下面的链接。还有一本关于时序的 python 实现的书的参考。<a class="ae ky" href="https://machinelearningmastery.com/time-series-forecasting-methods-in-python-cheat-sheet/" rel="noopener ugc nofollow" target="_blank">https://machinelementmastery . com/time-series-forecasting-methods-in-python-cheat-sheet/</a></li></ol></div></div>    
</body>
</html>