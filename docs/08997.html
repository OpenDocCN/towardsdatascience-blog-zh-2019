<html>
<head>
<title>Why You Are Using t-SNE Wrong</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么你错用了 SNE 霸王龙</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/why-you-are-using-t-sne-wrong-502412aab0c0?source=collection_archive---------2-----------------------#2019-12-01">https://towardsdatascience.com/why-you-are-using-t-sne-wrong-502412aab0c0?source=collection_archive---------2-----------------------#2019-12-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="92b6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以及如何避免常见的陷阱(带代码！)</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b234112576e347987ba393eef0c2bc74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qRMNwTB1RRK46r6gdZ4qAg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Source: <a class="ae ky" href="https://datascienceplus.com/multi-dimensional-reduction-and-visualisation-with-t-sne/" rel="noopener ugc nofollow" target="_blank">https://datascienceplus.com/multi-dimensional-reduction-and-visualisation-with-t-sne/</a></figcaption></figure><p id="3c6d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">t-SNE 已经成为一种非常流行的可视化高维数据的技术。从深度学习模型的内层提取特征，并使用 t-SNE 在二维空间中绘制它们以降低维度，这是非常常见的。不幸的是，大多数人只是使用 scikit-learn 的实现<strong class="lb iu">，而没有真正理解</strong>结果和<strong class="lb iu">曲解</strong>它们的意思。</p><p id="d46f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然 t-SNE 是一种降维技术，但它主要用于可视化，而不是数据预处理(就像 PCA 一样)。出于这个原因，你几乎总是用 t-SNE 把维数降低到 2，这样你就可以用二维来绘制数据。</p><p id="a20c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">t-SNE 常用于可视化的原因是，该算法的目标是获取高维数据，并在低维中正确地表示它-因此，在高维中接近的点在低维中应该保持接近。它以一种<strong class="lb iu">非线性和局部的方式</strong>实现这一点，因此不同区域的数据可以进行不同的转换。</p><p id="0b48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">t-SNE 有一个超级参数叫做<strong class="lb iu">困惑</strong>。困惑平衡了 SNE 霸王龙对数据的局部和全局方面的关注，并对结果图有很大影响。关于此参数的几点说明:</p><ul class=""><li id="51cb" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">这是对每个点的近邻数量的粗略猜测。因此，越密集的数据集通常需要越高的困惑值。</li><li id="c9b9" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">建议在 5 到 50 之间。</li><li id="62fe" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">它应该小于数据点的数量。</li></ul><p id="1887" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">人们在 t-SNE 问题上犯的最大错误是只使用一个值来表示困惑，而不测试结果如何随其他值变化。如果在 5 和 50 之间选择不同的值会显著改变您对数据的解释，那么您应该考虑其他方法来可视化或验证您的假设。</p><p id="eee0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还忽略了一点，由于 t-SNE 使用梯度下降，您还必须为您的学习速率和优化器的步骤数调整适当的值。关键是要确保算法运行足够长的时间来稳定。</p><p id="99e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有一篇关于 t-SNE 的非常好的<a class="ae ky" href="https://distill.pub/2016/misread-tsne/" rel="noopener ugc nofollow" target="_blank">文章，讨论了以上大部分内容以及您需要注意的以下几点:</a></p><ul class=""><li id="b2f5" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><strong class="lb iu">在 t-SNE 图中你看不到聚类的相对大小</strong>。理解这一点至关重要，因为 SNE 霸王龙会自然地扩大密集星团，缩小备用星团。我经常看到人们通过比较可视化中集群的相对大小来进行推断。不要犯这个错误。</li><li id="e6e4" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">t-SNE 图中分离良好的簇之间的距离可能没有任何意义。另一个常见的谬误。因此，如果你的“海滩”集群比“湖泊”集群更靠近“城市”集群，不要感到沮丧。</li><li id="b315" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><strong class="lb iu">一簇簇的点——尤其是具有小困惑值的点——可能只是噪声</strong>。因此，在使用小的困惑值时一定要小心。并且要记住总是测试许多困惑值的健壮性。</li></ul><p id="0782" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在——正如承诺的一些代码！这段代码的一些注意事项:</p><ul class=""><li id="8e65" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">在运行 t-SNE 之前，我首先使用主成分分析将维数减少到 50。我发现这是很好的实践(当有超过 50 个特性时),因为否则，t-SNE 将永远无法运行。</li><li id="0c06" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">我没有显示上面提到的各种困惑值。我将把它留给读者做练习。只需用不同的困惑值多运行几次 t-SNE 代码，并比较可视化效果。</li></ul><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="0deb" class="mo mp it mk b gy mq mr l ms mt">from sklearn.datasets import fetch_mldata<br/>from sklearn.manifold import TSNE<br/>from sklearn.decomposition import PCA<br/>import seaborn as sns<br/>import numpy as np<br/>import matplotlib.pyplot as plt </span><span id="06a9" class="mo mp it mk b gy mu mr l ms mt"># get mnist data<br/>mnist = fetch_mldata("MNIST original")<br/>X = mnist.data / 255.0<br/>y = mnist.target </span><span id="0ad3" class="mo mp it mk b gy mu mr l ms mt"># first reduce dimensionality before feeding to t-sne<br/>pca = PCA(n_components=50)<br/>X_pca = pca.fit_transform(X) </span><span id="9ae3" class="mo mp it mk b gy mu mr l ms mt"># randomly sample data to run quickly<br/>rows = np.arange(70000)<br/>np.random.shuffle(rows)<br/>n_select = 10000 </span><span id="0f5f" class="mo mp it mk b gy mu mr l ms mt"># reduce dimensionality with t-sne<br/>tsne = TSNE(n_components=2, verbose=1, perplexity=50, n_iter=1000, learning_rate=200)<br/>tsne_results = tsne.fit_transform(X_pca[rows[:n_select],:])</span><span id="ffd0" class="mo mp it mk b gy mu mr l ms mt"># visualize<br/>df_tsne = pd.DataFrame(tsne_results, columns=['comp1', 'comp2'])<br/>df_tsne['label'] = y[rows[:n_select]]sns.lmplot(x='comp1', y='comp2', data=df_tsne, hue='label', fit_reg=False)</span></pre><p id="2781" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是结果可视化:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/dbbd3d2335f595391046a6202e3970d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*avl3W_UY2EAcs-rVQV_E7A.png"/></div></figure><p id="7cdf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这是一个关于如何更有效地使用 t-SNE 和更好地理解其输出的有用指南！</p><p id="7f33" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你也可以在这里找到这篇文章<a class="ae ky" href="https://learningwithdata.com/posts/tylerfolkman/why-you-are-using-t-sne-wrong-502412aab0c0/" rel="noopener ugc nofollow" target="_blank"/>。</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><p id="8cda" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">加入我的</strong> <a class="ae ky" href="https://upscri.be/lg7gvt" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">邮箱列表</strong> </a> <strong class="lb iu">保持联系。</strong></p></div></div>    
</body>
</html>