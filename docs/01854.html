<html>
<head>
<title>Jupyter Notebook Best Practices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jupyter 笔记本最佳实践</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/jupyter-notebook-best-practices-f430a6ba8c69?source=collection_archive---------5-----------------------#2019-03-27">https://towardsdatascience.com/jupyter-notebook-best-practices-f430a6ba8c69?source=collection_archive---------5-----------------------#2019-03-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8c59" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">更有效地使用 Jupyter 笔记本的简明建议。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/dbb70527f4e6023b979468f48682b519.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CXz0JwDBjuoQVIeO"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@spacex?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">SpaceX</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8061" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">警告:本文中的建议指的是 Jupyter 的原始笔记本。虽然许多建议可以适用于 JupyterLab，但流行的笔记本扩展不能。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="4117" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">目录</h2><p id="a119" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated"><a class="ae ky" href="https://medium.com/p/f430a6ba8c69#87fc" rel="noopener"> 1。构建你的笔记本</a></p><p id="40e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://medium.com/p/f430a6ba8c69#f5af" rel="noopener"> 2。重构&amp;外包代码到模块</a></p><p id="1f2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://medium.com/p/f430a6ba8c69#e75a" rel="noopener"> 3。对生产力技巧保持好奇</a></p><p id="46e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://medium.com/p/f430a6ba8c69#dfd1" rel="noopener"> 4。拥抱再现性</a></p><p id="6b98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://medium.com/p/f430a6ba8c69#cafb" rel="noopener"> 5。延伸阅读</a></p><p id="acd4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://medium.com/p/f430a6ba8c69#2d44" rel="noopener">结论</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="87fc" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">1.构建您的笔记本</h2><ul class=""><li id="d9f1" class="na nb it lb b lc mv lf mw li nc lm nd lq ne lu nf ng nh ni bi translated">给你的笔记本一个<strong class="lb iu">标题</strong> (H1 标题)和一个有意义的<strong class="lb iu">序言</strong>来描述它的目的和内容。</li><li id="64a1" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">在 Markdown 单元格中使用<strong class="lb iu">标题和文档</strong>来构建您的笔记本并解释您的工作流程步骤。记住:你这样做不仅是为了你的同事或你的继任者，也是为了你未来的自己。</li><li id="7114" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated"><a class="ae ky" href="https://jupyter-contrib-nbextensions.readthedocs.io/en/latest/nbextensions/toc2/README.html" rel="noopener ugc nofollow" target="_blank"> toc2 </a>扩展可以在侧边栏(可选的浮动窗口)和 markdown 单元格中自动创建标题编号和<strong class="lb iu">目录</strong>。突出显示表示您在文档中的当前位置，这将有助于您在长笔记本中保持方向。</li><li id="4242" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated"><a class="ae ky" href="https://jupyter-contrib-nbextensions.readthedocs.io/en/latest/nbextensions/collapsible_headings/readme.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">可折叠标题</strong> </a>扩展允许您隐藏整个代码段，从而让您专注于当前的工作流程阶段。</li><li id="9dc3" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/set-your-jupyter-notebook-up-right-with-this-extension-24921838a332">这个<strong class="lb iu">默认模板</strong>扩展</a>导致笔记本不是空的，而是具有默认结构和公共导入。还有，它会反复要求你把名字从<code class="fe no np nq nr b">Untitled.ipynb</code>改成有意义的。</li><li id="f715" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">Jupyter <a class="ae ky" href="https://jupyter-contrib-nbextensions.readthedocs.io/en/latest/nbextensions/snippets/README.html" rel="noopener ugc nofollow" target="_blank"> snippets </a>扩展允许您方便地<strong class="lb iu">插入经常需要的代码块</strong>，例如您的典型导入语句。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl ns"><img src="../Images/f86c4cf74e1cc6851ca8527e011a4f74.png" data-original-src="https://miro.medium.com/v2/format:webp/1*QTp1c_ODrL7GiqsiIOeOzA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Using a Jupyter notebook template (which sets up default imports and structure) and the Table of Contents (toc2) extension, which automatically numbers headings. The Collapsible Headings extension enables hiding of section contents by clicking the grey triangles next to the headings.</figcaption></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="f5af" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">2.将代码重构和外包到模块中</h2><ul class=""><li id="bc17" class="na nb it lb b lc mv lf mw li nc lm nd lq ne lu nf ng nh ni bi translated">在你已经在单元格中编写了简单的代码以快速前进之后，养成这样的习惯:将稳定的代码转化为 T2 函数，并将它们转移到一个专门的模块中。这使得你的笔记本更具可读性，并且在生产你的工作流程时非常有帮助。这个:</li></ul><pre class="kj kk kl km gt nt nr nu nv aw nw bi"><span id="a3d3" class="mc md it nr b gy nx ny l nz oa">df = pd.read_csv(filename)<br/>df.drop( ...<br/>df.query( ...<br/>df.groupby( ...</span></pre><p id="07da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">变成了这样:</p><pre class="kj kk kl km gt nt nr nu nv aw nw bi"><span id="d29c" class="mc md it nr b gy nx ny l nz oa">def load_and_preprocess_data(filename):<br/>   """DOCSTRING"""<br/>   # do stuff<br/>   # ...<br/>   return df</span></pre><p id="b9e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后是这个:</p><pre class="kj kk kl km gt nt nr nu nv aw nw bi"><span id="6852" class="mc md it nr b gy nx ny l nz oa">import dataprep<br/>df = dataprep.load_and_preprocess_data(filename)</span></pre><ul class=""><li id="a5f3" class="na nb it lb b lc ld lf lg li ob lm oc lq od lu nf ng nh ni bi translated">如果编辑一个模块文件，Jupyter 的<a class="ae ky" href="https://ipython.readthedocs.io/en/stable/config/extensions/autoreload.html" rel="noopener ugc nofollow" target="_blank">自动重新加载</a>扩展<strong class="lb iu">重新加载导入的模块</strong>:</li></ul><pre class="kj kk kl km gt nt nr nu nv aw nw bi"><span id="7c10" class="mc md it nr b gy nx ny l nz oa">%load_ext autoreload<br/>%autoreload</span></pre><ul class=""><li id="05a1" class="na nb it lb b lc ld lf lg li ob lm oc lq od lu nf ng nh ni bi translated">使用<a class="ae ky" href="https://pypi.org/project/ipytest/" rel="noopener ugc nofollow" target="_blank"> ipytest </a>在笔记本内部进行<strong class="lb iu">测试</strong>。</li><li id="762a" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">使用合适的<strong class="lb iu"> IDE </strong>，例如<a class="ae ky" href="https://www.jetbrains.com/pycharm/" rel="noopener ugc nofollow" target="_blank"> PyCharm </a>。了解其高效调试、重构和测试的特性。</li><li id="ad18" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated"><strong class="lb iu">坚持好编码的标准</strong> —思考<strong class="lb iu"> <em class="oe">干净代码</em>原则</strong>和<a class="ae ky" href="https://www.python.org/dev/peps/pep-0008/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> PEP8 </strong> </a>。使用有意义的变量名和函数名，合理地注释，模块化你的代码，不要懒得重构。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="e75a" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">3.对生产力黑客保持好奇</h2><ul class=""><li id="ff72" class="na nb it lb b lc mv lf mw li nc lm nd lq ne lu nf ng nh ni bi translated">学习<a class="ae ky" href="https://www.cheatography.com/weidadeyue/cheat-sheets/jupyter-notebook" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> Jupyter 键盘快捷键</strong> </a>。将清单打印出来，挂在你屏幕旁边的墙上。</li><li id="5331" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">了解<strong class="lb iu"> Jupyter 扩展:</strong> <a class="ae ky" href="https://jupyter-contrib-nbextensions.readthedocs.io/en/latest/nbextensions/codefolding/readme.html" rel="noopener ugc nofollow" target="_blank"> Codefolding </a>，<a class="ae ky" href="https://jupyter-contrib-nbextensions.readthedocs.io/en/latest/nbextensions/hide_input_all/readme.html" rel="noopener ugc nofollow" target="_blank"> Hide input all </a>，<a class="ae ky" href="https://jupyter-contrib-nbextensions.readthedocs.io/en/latest/nbextensions/varInspector/README.html" rel="noopener ugc nofollow" target="_blank"> Variable Inspector </a>，<a class="ae ky" href="https://jupyter-contrib-nbextensions.readthedocs.io/en/latest/nbextensions/splitcell/readme.html" rel="noopener ugc nofollow" target="_blank"> Split Cells Notebook，</a> zenmode 和<a class="ae ky" href="https://jupyter-contrib-nbextensions.readthedocs.io/en/latest/nbextensions.html" rel="noopener ugc nofollow" target="_blank">more more</a>。</li><li id="5dd0" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated"><a class="ae ky" href="https://ipywidgets.readthedocs.io/en/stable/examples/Widget%20Basics.html" rel="noopener ugc nofollow" target="_blank"> Jupyter Widgets </a>(滑块、按钮、下拉菜单……)允许你构建<strong class="lb iu">交互式 GUI</strong>。</li><li id="31be" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated"><a class="ae ky" href="https://github.com/tqdm/tqdm#ipython-jupyter-integration" rel="noopener ugc nofollow" target="_blank"> tqdm </a>库提供了一个方便的<strong class="lb iu">进度条</strong>。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="dfd1" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">4.拥抱再现性</h2><ul class=""><li id="cde0" class="na nb it lb b lc mv lf mw li nc lm nd lq ne lu nf ng nh ni bi translated">版本控制:学习使用 git——有很多很棒的教程。</li><li id="6c34" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">根据您的项目和目的，使用移除笔记本输出的<a class="ae ky" href="https://github.com/kynan/nbstripout" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> git 预提交钩子可能是合理的。这将使提交和差异更具可读性，但可能会丢弃输出(绘图等)。)你其实是想储存。</strong></a></li><li id="0e3f" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">在<strong class="lb iu">专用(conda)环境中运行您的笔记本电脑</strong>。将<code class="fe no np nq nr b">requirements.txt</code>文件存储在您的笔记本和模块旁边的 git 存储库中。这将有助于您重现工作流程，并有助于过渡到生产环境。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="cafb" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">5.进一步阅读</h2><ul class=""><li id="cabb" class="na nb it lb b lc mv lf mw li nc lm nd lq ne lu nf ng nh ni bi translated"><a class="ae ky" href="https://florianwilhelm.info/2018/11/working_efficiently_with_jupyter_lab/" rel="noopener ugc nofollow" target="_blank">使用 JupyterLab 笔记本电脑高效工作</a></li><li id="e29a" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/bringing-the-best-out-of-jupyter-notebooks-for-data-science-f0871519ca29">为数据科学带来 Jupyter 笔记本电脑的最佳性能</a></li><li id="61a6" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/jupyter-notebook-hints-1f26b08429ad">提高您的 Jupyter 笔记本电脑的工作效率</a></li><li id="f3f1" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">…当然还有乔尔·格鲁著名的<a class="ae ky" href="https://docs.google.com/presentation/d/1n2RlMdmv1p25Xy5thJUhkKGvjtV-dkAIsUXP-AL4ffI/" rel="noopener ugc nofollow" target="_blank">我不喜欢笔记本</a></li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="2d44" class="of md it bd me og oh oi mh oj ok ol mk jz om ka mn kc on kd mq kf oo kg mt op bi translated">结论</h1><p id="6dea" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">良好的软件工程实践、构建和记录您的工作流程以及根据您的个人喜好定制 Jupyter 将提高您的笔记本电脑生产力和可持续性。</p><p id="3a00" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我很高兴在评论中听到你自己的建议和反馈。</p></div></div>    
</body>
</html>