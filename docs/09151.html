<html>
<head>
<title>6 More Evaluation Metrics Data Scientists Should Be Familiar with — Lessons from A High-rank Kagglers’ New Book</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">6 更多评估指标数据科学家应该熟悉——来自高级卡格勒新书的教训</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/6-more-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-d7756611efc4?source=collection_archive---------24-----------------------#2019-12-04">https://towardsdatascience.com/6-more-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-d7756611efc4?source=collection_archive---------24-----------------------#2019-12-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="99c6" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">《赢得 KAGGLE 的数据分析技术》一书</h2><div class=""/><div class=""><h2 id="2aaf" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">多类分类和推荐的评价指标</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/e349cc73548a23f87fec533144302b7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*i4Oj2ecBSgp0WNG1"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by <a class="ae le" href="https://unsplash.com/@aleskrivec?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ales Krivec</a> on <a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="78dc" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这是另一篇文章，介绍了新书<em class="mb">“赢得 Kaggle 的数据分析技术”，</em>中介绍的技巧，作者是三位高级 kaggler(不包括我自己，因此这不是个人提升！:) )</p><p id="701f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这是<strong class="lh ja">第二篇关于 ML 评估指标</strong>的帖子。<a class="ae le" rel="noopener" target="_blank" href="/11-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-kagglers-8596f75e58a7">这里是第一个帖子</a>。从第一篇文章开始，指标编号从#12 开始！</p><p id="dc91" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">关于这本书的完整目录，请看我的<a class="ae le" href="https://medium.com/@daydreamersjp/a-new-book-data-analysis-techniques-to-win-kaggle-is-a-current-best-and-complete-for-table-data-4af66a88388" rel="noopener">另一篇文章</a>。</p></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h1 id="2ba9" class="mj mk iq bd ml mm mn mo mp mq mr ms mt kf mu kg mv ki mw kj mx kl my km mz na bi translated">目录:</h1><h2 id="429a" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lo ng nh mv ls ni nj mx lw nk nl mz iw bi translated"><a class="ae le" rel="noopener" target="_blank" href="/6-more-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-d7756611efc4#a650">多类分类任务</a></h2><p id="6be9" class="pw-post-body-paragraph lf lg iq lh b li nm ka lk ll nn kd ln lo no lq lr ls np lu lv lw nq ly lz ma ij bi translated"><a class="ae le" rel="noopener" target="_blank" href="/6-more-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-d7756611efc4#c858">单标签多类分类与多标签多类分类</a></p><h2 id="5c58" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lo ng nh mv ls ni nj mx lw nk nl mz iw bi translated"><a class="ae le" rel="noopener" target="_blank" href="/6-more-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-d7756611efc4#db92">单标签多类分类的评价指标</a></h2><p id="893b" class="pw-post-body-paragraph lf lg iq lh b li nm ka lk ll nn kd ln lo no lq lr ls np lu lv lw nq ly lz ma ij bi translated"><a class="ae le" rel="noopener" target="_blank" href="/6-more-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-d7756611efc4#17f2"> #12 —多类精度</a></p><p id="6aa5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><a class="ae le" rel="noopener" target="_blank" href="/6-more-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-d7756611efc4#7422"> #13 —多级分类的平衡精度</a></p><p id="f8ae" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><a class="ae le" rel="noopener" target="_blank" href="/6-more-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-d7756611efc4#e795"> #14 —多类日志丢失</a></p><h2 id="1caa" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lo ng nh mv ls ni nj mx lw nk nl mz iw bi translated"><a class="ae le" rel="noopener" target="_blank" href="/6-more-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-d7756611efc4#7087">多标签多类别分类的评估指标</a></h2><p id="46f9" class="pw-post-body-paragraph lf lg iq lh b li nm ka lk ll nn kd ln lo no lq lr ls np lu lv lw nq ly lz ma ij bi translated"><a class="ae le" rel="noopener" target="_blank" href="/6-more-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-d7756611efc4#63fc"> #15 —平均 F1、宏观 F1、微观 F1 </a></p><p id="d3f0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><a class="ae le" rel="noopener" target="_blank" href="/6-more-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-d7756611efc4#c6b6"> #16 —二次加权κ</a></p><h2 id="8760" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lo ng nh mv ls ni nj mx lw nk nl mz iw bi translated"><a class="ae le" rel="noopener" target="_blank" href="/6-more-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-d7756611efc4#0dc3">推荐任务中的评估指标</a></h2><p id="942c" class="pw-post-body-paragraph lf lg iq lh b li nm ka lk ll nn kd ln lo no lq lr ls np lu lv lw nq ly lz ma ij bi translated"><a class="ae le" rel="noopener" target="_blank" href="/6-more-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-d7756611efc4#840b"> #17 —地图@K </a></p><h2 id="b194" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lo ng nh mv ls ni nj mx lw nk nl mz iw bi translated"><a class="ae le" rel="noopener" target="_blank" href="/6-more-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-d7756611efc4#9eb7">结论</a></h2></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h1 id="a650" class="mj mk iq bd ml mm mn mo mp mq mr ms mt kf mu kg mv ki mw kj mx kl my km mz na bi translated">多类分类任务</h1><p id="afc6" class="pw-post-body-paragraph lf lg iq lh b li nm ka lk ll nn kd ln lo no lq lr ls np lu lv lw nq ly lz ma ij bi translated">二元分类是一项任务，其中目标变量属于两类中的任何一类——正类或负类。<strong class="lh ja">另一方面，多类分类是一项任务，其中目标变量可能属于两个以上的类</strong>；更简单的例子是在图像识别，图像显示猫，狗，鸭…等。</p></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h2 id="c858" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lo ng nh mv ls ni nj mx lw nk nl mz iw bi translated">单标签多类分类与多标签多类分类</h2><p id="9622" class="pw-post-body-paragraph lf lg iq lh b li nm ka lk ll nn kd ln lo no lq lr ls np lu lv lw nq ly lz ma ij bi translated"><strong class="lh ja">单标签多类分类</strong>和<strong class="lh ja">多标签多类分类</strong>是多类分类的子集。在单标签多类分类中，目标变量只有一个类赋值，而在多标签多类分类中，目标变量可以有多个类赋值。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/9ba470aea77caea88170cc375d4f1e58.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*kcBxF8FD85JlUq4U4TqRkA.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Single-label multiclass classification vs. multi-label multiclass classification</figcaption></figure><p id="990e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">显然，单标签情况和多标签情况需要单独的建模策略和评估策略。我在这里不讨论建模策略，但是将讨论评估度量。</p></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h1 id="db92" class="mj mk iq bd ml mm mn mo mp mq mr ms mt kf mu kg mv ki mw kj mx kl my km mz na bi translated">单标签多类分类的评价指标</h1><h2 id="17f2" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lo ng nh mv ls ni nj mx lw nk nl mz iw bi translated">#12—多类精度</h2><p id="2250" class="pw-post-body-paragraph lf lg iq lh b li nm ka lk ll nn kd ln lo no lq lr ls np lu lv lw nq ly lz ma ij bi translated"><em class="mb">(用于 Kaggle 比赛】</em> <a class="ae le" href="https://www.kaggle.com/c/tensorflow-speech-recognition-challenge/overview/evaluation" rel="noopener ugc nofollow" target="_blank"> <em class="mb"> TensorFlow 语音识别挑战赛</em></a><em class="mb">)</em></p><p id="5f59" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这是二进制分类任务中<a class="ae le" rel="noopener" target="_blank" href="/11-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-kagglers-8596f75e58a7#c637">精度的扩展版本。</a></p><p id="3a04" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">二元类分类的准确度是<a class="ae le" rel="noopener" target="_blank" href="/11-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-kagglers-8596f75e58a7#c637">混淆矩阵</a>中两个对角元素之和占总数据量的比例。多类版本在混淆矩阵中有两个以上的行和列，多类精度在对对角线元素求和并除以总计数的方式上是相似的。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/e2447ee672252bf5641833282f4adead.png" data-original-src="https://miro.medium.com/v2/resize:fit:856/format:webp/1*QytcnpSAGtDbVcsvXPC1JQ.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Illustration of multiclass accuracy (4 class-classification version)</figcaption></figure><ul class=""><li id="d3ab" class="nt nu iq lh b li lj ll lm lo nv ls nw lw nx ma ny nz oa ob bi translated">精确度范围从 0 到 1，越高越好。</li><li id="be5a" class="nt nu iq lh b li oc ll od lo oe ls of lw og ma ny nz oa ob bi translated">还是那句话，阶级分布不均衡的时候不合适。</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oh oi l"/></div></figure></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h2 id="7422" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lo ng nh mv ls ni nj mx lw nk nl mz iw bi translated">#13 —多级分类的平衡精度</h2><p id="d66c" class="pw-post-body-paragraph lf lg iq lh b li nm ka lk ll nn kd ln lo no lq lr ls np lu lv lw nq ly lz ma ij bi translated">这与<a class="ae le" rel="noopener" target="_blank" href="/11-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-kagglers-8596f75e58a7#96e3">二元分类平衡精度</a>的内容没有变化。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/17fb5afb0b8065e9fffafa1a05a806d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/0*N536QnDFQKfglHU0.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Formula for balanced accuracy in multiclass classification</figcaption></figure><p id="fe56" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">其中，<em class="mb"> M </em>:类别数，<em class="mb"> n_m </em>:数据大小属于类别 M，<em class="mb"> r_m </em>:准确预测属于类别 M 的数据数</p><p id="9bc4" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这些属性就像我们在二进制类版本中看到的一样:</p><ul class=""><li id="b5f2" class="nt nu iq lh b li lj ll lm lo nv ls nw lw nx ma ny nz oa ob bi translated">介于 0 和 1 之间的值，越高越好。</li><li id="22ec" class="nt nu iq lh b li oc ll od lo oe ls of lw og ma ny nz oa ob bi translated">对较小类别的准确预测赋予较高的权重，因此<strong class="lh ja">适用于不平衡数据</strong>。</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oh oi l"/></div></figure></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h2 id="e795" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lo ng nh mv ls ni nj mx lw nk nl mz iw bi translated">#14—多类对数损失</h2><p id="c0dd" class="pw-post-body-paragraph lf lg iq lh b li nm ka lk ll nn kd ln lo no lq lr ls np lu lv lw nq ly lz ma ij bi translated"><em class="mb">(用于 Kaggle 比赛中的</em> <a class="ae le" href="https://www.kaggle.com/c/two-sigma-connect-rental-listing-inquiries/overview/evaluation" rel="noopener ugc nofollow" target="_blank"> <em class="mb">两个适马连接:租赁清单查询</em></a><em class="mb">)</em></p><p id="aa28" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这是我在<a class="ae le" rel="noopener" target="_blank" href="/11-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-kagglers-8596f75e58a7#e1bc">二进制分类案例</a>中包含的另一个多类版本。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/b73657e84edb345e6f8c38c721a4b10c.png" data-original-src="https://miro.medium.com/v2/resize:fit:862/format:webp/1*HPPke5nvslvQpPYAmXIZyg.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Formula of multiclass logloss</figcaption></figure><p id="161a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">其中<em class="mb"> N </em>:数据个数，<em class="mb"> M </em>:类个数，<em class="mb"> y_i，m </em>:如果数据<em class="mb"> i </em>属于类<em class="mb"> m </em>则为 1，否则为 0，<em class="mb"> p_i，m </em>:数据<em class="mb"> i </em>属于类<em class="mb"> m </em>的预测概率。</p><p id="cf7c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">正如二进制对数损失:</p><ul class=""><li id="0ba6" class="nt nu iq lh b li lj ll lm lo nv ls nw lw nx ma ny nz oa ob bi translated">这是<em class="mb">损失</em>，越高越糟糕。</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oh oi l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ol"><img src="../Images/014373062a538eb292ba72e97543bc2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6nbCGOkTNgrkz2D2"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by <a class="ae le" href="https://unsplash.com/@franckinjapan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Franck V.</a> on <a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h1 id="7087" class="mj mk iq bd ml mm mn mo mp mq mr ms mt kf mu kg mv ki mw kj mx kl my km mz na bi translated">多标签多类分类的评价指标</h1><h2 id="63fc" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lo ng nh mv ls ni nj mx lw nk nl mz iw bi translated">#15 —平均值 F1、宏观 F1、微观 F1</h2><p id="aa3c" class="pw-post-body-paragraph lf lg iq lh b li nm ka lk ll nn kd ln lo no lq lr ls np lu lv lw nq ly lz ma ij bi translated"><em class="mb">(平均值-F1 用于 Kaggle 比赛】</em> <a class="ae le" href="https://www.kaggle.com/c/instacart-market-basket-analysis/overview/evaluation" rel="noopener ugc nofollow" target="_blank"> <em class="mb"> Instacart 购物篮分析</em></a><em class="mb">)</em></p><p id="2739" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><em class="mb"> (Macro-F1 用于 Kaggle 竞赛】</em> <a class="ae le" href="https://www.kaggle.com/c/human-protein-atlas-image-classification/overview/evaluation" rel="noopener ugc nofollow" target="_blank"> <em class="mb">人类蛋白质图谱图像分类</em></a><em class="mb">)</em></p><p id="d9c4" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在多标签多类分类的情况下，标签应如下所示。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi om"><img src="../Images/91530cb339bf1c41aee951fc3f837021.png" data-original-src="https://miro.medium.com/v2/resize:fit:404/format:webp/1*vZyoXJ2-Low6dfNPlK_o2Q.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Illustration of multi-label classification with three classes</figcaption></figure><p id="a8eb" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">有三种<a class="ae le" rel="noopener" target="_blank" href="/11-evaluation-metrics-data-scientists-should-be-familiar-with-lessons-from-a-high-rank-kagglers-8596f75e58a7#0213"> F1 分数的变体</a>来评估这种预测:</p><ul class=""><li id="ea0d" class="nt nu iq lh b li lj ll lm lo nv ls nw lw nx ma ny nz oa ob bi translated"><strong class="lh ja">平均值-F1: </strong>计算每个 ID 的 F1 分数，并取所有 ID 的平均值。</li><li id="75ae" class="nt nu iq lh b li oc ll od lo oe ls of lw og ma ny nz oa ob bi translated"><strong class="lh ja">宏 F1: </strong>计算每个类别的 F1 分数(假设我们看到每个类别和其余类别之间有三个独立的二进制分类)，并取所有类别的平均值。</li><li id="c6d8" class="nt nu iq lh b li oc ll od lo oe ls of lw og ma ny nz oa ob bi translated"><strong class="lh ja"> Micro-F1: </strong>通过处理每个 ID 和每个类作为独立数据点的组合，立即计算总体 F1 分数。</li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi on"><img src="../Images/453d0ae69b5fd3253e8e85833f4dc934.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/1*YtmDerQX3sOKyyd_MznfUg.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Illustration of Mean-F1, Macro-F1, Micro-F1</figcaption></figure><ul class=""><li id="6ce0" class="nt nu iq lh b li lj ll lm lo nv ls nw lw nx ma ny nz oa ob bi translated">每个 F1 的范围从 0 到 1，越高越好。</li><li id="a8ad" class="nt nu iq lh b li oc ll od lo oe ls of lw og ma ny nz oa ob bi translated">在三个 F1 分数中的选择是基于我们的兴趣:平均 F1 平等地对待每个 ID，宏观 F1 平等地对待每个职业，微观 F1 平等地对待每个 ID 和职业的组合。</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oh oi l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oo"><img src="../Images/7165b2cad90c45617a25c9ef92a12068.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*v5CEBsW9gAxwxpQs"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by <a class="ae le" href="https://unsplash.com/@echaparro?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Edgar Chaparro</a> on <a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h1 id="7fb8" class="mj mk iq bd ml mm mn mo mp mq mr ms mt kf mu kg mv ki mw kj mx kl my km mz na bi translated">单标签有序多类分类的评价指标</h1><p id="61ce" class="pw-post-body-paragraph lf lg iq lh b li nm ka lk ll nn kd ln lo no lq lr ls np lu lv lw nq ly lz ma ij bi translated">这里又是单标签多类分类，但是<strong class="lh ja">中的类也是有序的</strong>，比如 A 比 B 好，B 比 C 好，等等。</p><p id="a481" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们可以在医学研究中更多地看到这一点，例如，模型预测患者“可能”&gt;“未知”&gt;“不太可能”感染某种疾病。</p><p id="86e5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在这种情况下，很多比赛中都可以看到二次加权 Kappa。</p><h2 id="c6b6" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lo ng nh mv ls ni nj mx lw nk nl mz iw bi translated">#16 —二次加权卡帕值</h2><p id="840e" class="pw-post-body-paragraph lf lg iq lh b li nm ka lk ll nn kd ln lo no lq lr ls np lu lv lw nq ly lz ma ij bi translated"><em class="mb">(用于 Kaggle 竞赛中)</em> <a class="ae le" href="https://www.kaggle.com/c/prudential-life-insurance-assessment/overview/evaluation" rel="noopener ugc nofollow" target="_blank"> <em class="mb">保诚人寿保险评估</em></a><em class="mb"/><a class="ae le" href="https://www.kaggle.com/c/crowdflower-search-relevance/overview/evaluation" rel="noopener ugc nofollow" target="_blank"><em class="mb">众筹搜索结果关联</em></a><em class="mb">”</em></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi op"><img src="../Images/e69a6035761ec53b13199d4b9ab7da72.png" data-original-src="https://miro.medium.com/v2/resize:fit:352/format:webp/1*QSR__b3SrxOo0xQl0M9RkQ.png"/></div></figure><p id="8cf0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">其中<em class="mb"> i，j </em>:真实类和预测类的指标，<em class="mb"> w </em>:误预测的权重，<em class="mb"> O </em>:实际观测计数，<em class="mb"> E </em>:期望计数。</p><p id="7ff5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">仅仅看公式可能看起来很复杂，所以这里有一个如何在 Excel 上计算的演练。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oq"><img src="../Images/e4a128880dee44a5b06e2df26e1d9242.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n3Y1Vl2LzL4_j17E2HitJA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">How to calculate quadratic weighted Kappa on Excel.</figcaption></figure><p id="5a81" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们也可以说这是<a class="ae le" href="http://www.real-statistics.com/reliability/interrater-reliability/weighted-cohens-kappa/" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja">加权的【科恩的】Kappa </strong> </a>的‘二次加权版’，这里的权重通常是类间的绝对距离，而不是它的平方。</p><p id="6d5c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这表明<strong class="lh ja">权重的定义取决于您</strong>，不一定必须是二次的，这为您根据性能调整它们留下了一些空间。</p><ul class=""><li id="6491" class="nt nu iq lh b li lj ll lm lo nv ls nw lw nx ma ny nz oa ob bi translated">二次加权 Kappa 范围在 0 和 1 之间。越高越好，0 表示预测是随机的。</li><li id="a22c" class="nt nu iq lh b li oc ll od lo oe ls of lw og ma ny nz oa ob bi translated">灵活设置权重，允许权重矩阵中特定单元格的权重更高/更低。</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oh oi l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi or"><img src="../Images/16795061eabcc400f7f1da4d7abd1116.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7zDdZ6Ub7llT6r68"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by <a class="ae le" href="https://unsplash.com/@micheile?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Micheile Henderson @micheile010 // Visual Stories [nl]</a> on <a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h1 id="0dc3" class="mj mk iq bd ml mm mn mo mp mq mr ms mt kf mu kg mv ki mw kj mx kl my km mz na bi translated">推荐任务中的评估指标</h1><p id="49ac" class="pw-post-body-paragraph lf lg iq lh b li nm ka lk ll nn kd ln lo no lq lr ls np lu lv lw nq ly lz ma ij bi translated">推荐的特点是:</p><ul class=""><li id="4820" class="nt nu iq lh b li lj ll lm lo nv ls nw lw nx ma ny nz oa ob bi translated">这是多标签多类分类任务。</li><li id="88f4" class="nt nu iq lh b li oc ll od lo oe ls of lw og ma ny nz oa ob bi translated">预测的类别具有顺序，即推荐的顺序；第一个预测为客户最有可能购买，第二个预测为下一个，依此类推。有了这个订单，公司可以在一些物理或财务限制内保持他们的推广，例如在网络广告页面的空间内或在有限数量的直接邮件内等。</li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi os"><img src="../Images/ac72dbaf75215ca4c462dcf841df7d60.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*B8UFdiFAvFnaO4ABnS6mag.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Order of class in recommendation task</figcaption></figure><p id="76c9" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在这种情况下，在很多比赛中都可以看到<strong class="lh ja"> MAP@K </strong>。</p><h2 id="840b" class="nb mk iq bd ml nc nd dn mp ne nf dp mt lo ng nh mv ls ni nj mx lw nk nl mz iw bi translated">#17 —地图@K</h2><p id="1d1c" class="pw-post-body-paragraph lf lg iq lh b li nm ka lk ll nn kd ln lo no lq lr ls np lu lv lw nq ly lz ma ij bi translated"><em class="mb">(用于 Kaggle 比赛】</em> <a class="ae le" href="https://www.kaggle.com/c/santander-product-recommendation/overview/evaluation" rel="noopener ugc nofollow" target="_blank"> <em class="mb">桑坦德产品推荐</em></a><em class="mb">)</em></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/645cb4ffc48d03347edae5ff1d173b6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*xnBdEluSkz2kbDXC95AftA.png"/></div></figure><p id="59c7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">其中<em class="mb"> N </em>:数据数量，<em class="mb"> K: </em>作为预测提供并纳入评估的推荐数量，<em class="mb"> m_i </em>:真实类数据数量<em class="mb"> i </em>属于(在购买推荐上下文中，个人实际购买的数量<em class="mb"> i </em>)，<em class="mb"> P_i(k) </em>:由数据<em class="mb">I</em>的推荐 1 至<em class="mb"> k </em>精确</p><p id="fea5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这并不像听起来那么复杂。下面举例说明。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/9193184a4d3d80ada85efc30bb099d85.png" data-original-src="https://miro.medium.com/v2/resize:fit:894/format:webp/1*xNl3NsXQ-Za_YuwQCfhStw.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">How to calculate MAP@K ?</figcaption></figure><p id="0f2c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">对记录中的每个客户重复这一过程并取平均值。</p><ul class=""><li id="81fe" class="nt nu iq lh b li lj ll lm lo nv ls nw lw nx ma ny nz oa ob bi translated">MAP@K 的范围是 0 到 1，越高越好。</li><li id="491b" class="nt nu iq lh b li oc ll od lo oe ls of lw og ma ny nz oa ob bi translated">预测的顺序很重要，正如上面讨论的那样，这具有商业意义。</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oh oi l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ov"><img src="../Images/3c628a22d7cdea12f60f00f03c8dd842.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8Abp9lS7VR83NneB"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by <a class="ae le" href="https://unsplash.com/@christianw?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Christian Wiediger</a> on <a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h1 id="9eb7" class="mj mk iq bd ml mm mn mo mp mq mr ms mt kf mu kg mv ki mw kj mx kl my km mz na bi translated">结论</h1><p id="fddf" class="pw-post-body-paragraph lf lg iq lh b li nm ka lk ll nn kd ln lo no lq lr ls np lu lv lw nq ly lz ma ij bi translated">我们看到有一些度量可以专门处理多类分类(单标签、多标签)和推荐预测。</p><p id="adaf" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">理解每个度量的属性，并在最佳情况下使用它，对于构建高性能模型非常重要。</p></div></div>    
</body>
</html>