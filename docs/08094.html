<html>
<head>
<title>Analyzing English Premier League Data with Python and Visualization using Tableau</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Python 分析英超数据及用 Tableau 可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/analyzing-english-premier-league-data-with-python-and-visualization-using-tableau-21d343bc57dd?source=collection_archive---------17-----------------------#2019-11-06">https://towardsdatascience.com/analyzing-english-premier-league-data-with-python-and-visualization-using-tableau-21d343bc57dd?source=collection_archive---------17-----------------------#2019-11-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/17cddeace59fe4a00c6ca84f5d82c142.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*E2YkpnViVMhBNI2V"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/es/@nathanjayrog?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Nathan Rogers</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4dfb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由 M.P.Karthick、<a class="ae kc" href="https://medium.com/@janmejay23" rel="noopener"> Janmejay Singh </a>和<a class="ae kc" href="https://medium.com/@pritam.iifm" rel="noopener"> Pritam Kumar Patro </a>出版</p><p id="c570" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">数据科学家和数据本身一样优秀。因此，为了获得可操作的见解，使用正确格式的数据集和正确的变量非常重要。体育分析是一个新兴领域，其中数据驱动的见解用于制定战略。在本教程中，我们将探索使用 Python 的数据分析和使用 Tableau 的可视化。我们将使用的 python 库是 pandas、os、glob 和 regex。</p><p id="2f56" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将使用的数据集是发布在 http://www.football-data.co.uk/<a class="ae kc" href="http://www.football-data.co.uk/" rel="noopener ugc nofollow" target="_blank">的英超联赛数据集。我们分析了从 2009 年 10 月到 2018 年 19 月的 10 个 EPL 赛季的数据。使用这些数据集将帮助我们学习数据整理和转换过程，这在 iris 和 mpg 等内置数据集上是不可能的。</a></p><p id="9bed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">提问:</strong></p><p id="7be8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们希望从数据集中了解并得出以下见解:</p><p id="5f1e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如何追加不同季节的数据，创建主数据集？</p><p id="980c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如何整理和转换主数据集？</p><p id="80d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">曼联各个赛季的进攻表现如何？</p><p id="7f0d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">曼联各个赛季的防守表现如何？</p><p id="57af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">曼联在不同的主教练手下表现如何？</p><p id="874d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在穆里尼奥的领导下，曼联是一支防守型球队吗？</p><p id="0167" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">加载库和模块:</strong></p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="a647" class="lk ll iq lg b gy lm ln l lo lp">import pandas as pd</span><span id="c5f2" class="lk ll iq lg b gy lq ln l lo lp">import os</span><span id="8135" class="lk ll iq lg b gy lq ln l lo lp">import glob</span><span id="b383" class="lk ll iq lg b gy lq ln l lo lp">import re</span></pre><p id="ffd6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> Pandas </a>是一个开源库，为 python 编程语言提供了易于使用的数据结构和数据分析工具。python 中的<strong class="kf ir"> OS </strong>模块提供了与操作系统交互的功能。这个模块属于 python 的标准实用程序模块。该模块有助于提供一种使用操作系统相关功能的<a class="ae kc" href="https://docs.python.org/2/library/os.html" rel="noopener ugc nofollow" target="_blank">便携方式</a>。</p><p id="0110" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> glob </strong>模块根据 UNIX shell 使用的规则找到所有与指定模式匹配的<a class="ae kc" href="https://docs.python.org/2/library/glob.html" rel="noopener ugc nofollow" target="_blank">路径名。但是，这些结果以任意顺序返回。正则表达式是构成搜索模式</a>的<a class="ae kc" href="https://www.w3schools.com/python/python_regex.asp" rel="noopener ugc nofollow" target="_blank">字符序列。Python 通过库支持正则表达式。正则表达式模式通过 Python 中的<strong class="kf ir"> re </strong>模块导入。RegEx 可用于检查字符串是否包含指定的搜索模式。</a></p><p id="0cbd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">数据整理和转换</strong></p><p id="ad5f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在将数据集导入 Python 环境之前，我们将确保 CSV 格式的 10 个季节的数据表位于运行 Python 程序的同一个文件夹中。</p><p id="a022" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们发现数据集中缺少我们分析所需的两个重要变量。我们需要“赛季”变量来产生赛季洞察力，需要“经理”变量来理解曼联在不同经理下的表现。我们从<a class="ae kc" href="https://www.premierleague.com/" rel="noopener ugc nofollow" target="_blank">英超</a>网站上获得了这 10 个赛季的主教练名单，数据集已经按赛季排列好了。因此，我们将把这两列添加到数据集中，稍后将它们追加到一个数据表中。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="0c34" class="lk ll iq lg b gy lm ln l lo lp">man=["SAF","SAF","SAF","SAF","DM","VG","VG","JM","JM","OS"]</span><span id="f186" class="lk ll iq lg b gy lq ln l lo lp">a=glob.glob("season*.csv")</span><span id="6ea3" class="lk ll iq lg b gy lq ln l lo lp">b=[]</span><span id="c861" class="lk ll iq lg b gy lq ln l lo lp">for i in a:</span><span id="b5fd" class="lk ll iq lg b gy lq ln l lo lp">c=re.search(r"\d{2,}",i).group()</span><span id="23f4" class="lk ll iq lg b gy lq ln l lo lp">b.append(c)</span></pre><p id="df64" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">追加数据集:</strong></p><p id="a6ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">EPL 的数据集是季节性的。当我们对数据集进行初步观察时，我们没有发现任何缺失值。当我们跨赛季匹配变量时，从 2012-13 赛季开始出现了新的变量。我们只保留了我们在分析和可视化方面感兴趣的变量。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="59b3" class="lk ll iq lg b gy lm ln l lo lp">count=0</span><span id="1fe5" class="lk ll iq lg b gy lq ln l lo lp">for i,j,k in zip(a,b,man):</span><span id="43fb" class="lk ll iq lg b gy lq ln l lo lp">dataL=pd.read_csv(i)</span><span id="49f8" class="lk ll iq lg b gy lq ln l lo lp">dataL.insert(0,"season",j)</span><span id="999a" class="lk ll iq lg b gy lq ln l lo lp">dataL.insert(0,"manager",k)</span><span id="7413" class="lk ll iq lg b gy lq ln l lo lp">if count==0:</span><span id="30c8" class="lk ll iq lg b gy lq ln l lo lp">data.to_csv("dataL.csv",mode="a",index=False)</span><span id="ca4d" class="lk ll iq lg b gy lq ln l lo lp">count=count+1</span><span id="7535" class="lk ll iq lg b gy lq ln l lo lp">else:</span><span id="7fdb" class="lk ll iq lg b gy lq ln l lo lp">dataL.to_csv("dataL.csv",mode="a",index=False,header=False)</span></pre><p id="ce73" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用上面的代码，我们在工作文件夹中得到一个名为 dataL.csv 的数据表，其中包含所有 10 个赛季，包括赛季和经理列。</p><p id="a4e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于我们只分析与曼联相关的数据，我们删除了所有与其他俱乐部相关的数据。因此，我们已经使用 python 成功地清理和转换了数据，现在可以进行可视化了。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="d7cb" class="lk ll iq lg b gy lm ln l lo lp">dataMU1=pd.read_csv(“dataL.csv”)</span><span id="0105" class="lk ll iq lg b gy lq ln l lo lp">dataMU2=dataMU1.loc[(dataMU1[‘HomeTeam’] == ‘Man United’) | (dataMU1[‘AwayTeam’] == ‘Man United’)]</span><span id="badb" class="lk ll iq lg b gy lq ln l lo lp">dataMU2.to_csv(“finaldataManUtd.csv”)</span></pre><p id="7bc5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">创建 Tableau 仪表板</strong></p><p id="f57c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Tableau 是一个强大的数据可视化工具，有助于以仪表板和工作表的形式创建可视化效果。tableau 的好处是它有点击和拖动的选项，这使得编程技能较低的人可以制作出令人惊叹的可视化效果。我们开发的 tableau 仪表板非常具有交互性，让您挑选感兴趣的见解。我们只分析了数据集中的一些变量。还有更多变数，比如犯规次数，黄牌数量等等。如果你感兴趣的话，可以去探索一下。</p><div class="lr ls gp gr lt lu"><a href="https://public.tableau.com/profile/pritam.kumar.patro#!/vizhome/ManUnitedComparison/Dashboard9" rel="noopener  ugc nofollow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd ir gy z fp lz fr fs ma fu fw ip bi translated">Tableau 公共</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">编辑描述</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">public.tableau.com</p></div></div></div></a></div><p id="f9a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">对比曼联各个赛季的进攻表现</strong></p><p id="49b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">很多参数可以用来评估一支球队的进攻表现。我们使用进球数(主客场)、总射门数和目标变量进行分析。当我们绘制跨赛季的进球时，我们可以看到，自从 2012-13 赛季结束弗格森爵士退役以来，曼联的进攻表现已经不一样了。弗格森爵士执教下(2009-10 赛季至 2012-13 赛季)的平均主场进球是 49.5 个，相比之下，范加尔和穆里尼奥分别为 34.0 和 32.0 个。类似的趋势也可以在客场进球中观察到。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi md"><img src="../Images/9a71d0fdbcf30e4a5071234a7ad48f3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qzWuzCI0MH3ndURfs_eCaw.png"/></div></div></figure><p id="782d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">投篮命中率(命中目标的投篮次数/总投篮次数)是决定一个队能否赢得比赛的重要因素之一。另一项<a class="ae kc" href="https://bitterandblue.sbnation.com/2013/1/17/3880454/a-look-at-shots-on-target-epl" rel="noopener ugc nofollow" target="_blank">分析</a>显示，与那些仅仅比对手创造更多投篮机会的球队相比，命中率更高的球队获胜的概率明显增加。我们的分析表明，自从弗格森爵士退役以来，曼联的射门准确率明显下降，从未越过 50%。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi me"><img src="../Images/7a5930636ed1ec69ea60a580829917a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vvC51ucOqIDO-pjDQK0nKA.png"/></div></div></figure><p id="2134" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">对比曼联各个赛季的防守表现</strong></p><p id="b671" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与进攻表现不同的是，防守表现对于不同主帅手下的曼联来说差别并不大。上赛季(2018–19)出现了近 10 个赛季以来最差的防守表现。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/dcbc9e9d3d76c881960c9f29e5e8eca2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H4mCDclwdMh1oZY2Y-uR0A.png"/></div></div></figure><p id="337b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">曼联在不同主帅手下表现如何？</strong></p><p id="adf9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">毫无疑问，曼联在弗格森爵士手下的表现是最好的。比较整个赛季的联赛积分和联赛排名给了我们清晰的叙述。在弗格森爵士之后，下一个最佳教练是穆里尼奥，81 分，2017-18 赛季亚军。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi md"><img src="../Images/26052ae16ec2cec2a6ca7abe2b789580.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yppbg5BfHr6eLyiYkN4osQ.png"/></div></div></figure><p id="81de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">曼联在穆里尼奥手下是防守型球队吗？</strong></p><p id="73fb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">何塞·穆里尼奥的足球哲学与其他顶级教练不同。他的比赛风格已经被证明能够在对抗最好的球队时取得好成绩。但它也被认为是防御性的和无聊的。这篇博客还认为，随着职业生涯的发展，他变得更加具有防御性。如爆炸图所示。在穆里尼奥的带领下，曼联的防守表现比其他教练都要好。当我们比较进攻表现的时候，这和其他曼联经理类似，比如大卫·莫耶斯和路易斯·范加尔。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mg"><img src="../Images/a8854e9e352cec8da5584765695b6464.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-k2hHryR3nxQFO2FlEhsNQ.png"/></div></div></figure><p id="f122" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">希望这能帮助你对你喜欢的体育相关数据进行基本的分析和可视化。Python 语法非常简明易懂。Tableau 是最好的用户友好的可视化工具之一。上面给出的所有可视化都可以用 python 来完成，但是我们想讨论一下这两个神奇的工具，并展示使用它们是多么容易！</p></div></div>    
</body>
</html>