<html>
<head>
<title>Cleaning Missing Values in a Pandas Dataframe</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">清除熊猫数据帧中的缺失值</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/cleaning-missing-values-in-a-pandas-dataframe-a88b3d1a66bf?source=collection_archive---------9-----------------------#2019-11-06">https://towardsdatascience.com/cleaning-missing-values-in-a-pandas-dataframe-a88b3d1a66bf?source=collection_archive---------9-----------------------#2019-11-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="2a68" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用 Python 可视化缺失数据的方法以及如何处理它们。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/f629284aa0c60403e2ccd081543faaf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8xA0eQ-a96kOxNAa"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo by <a class="ae lb" href="https://unsplash.com/@jankolar?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jan Kolar / VUI Designer</a> on <a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5e65" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在分析数据时，您可能会遇到丢失的数据(也称为空值或 NaNs)。数据清理是数据分析管道的重要组成部分，确保数据清理干净将使您的分析更加有力。</p><h1 id="acbc" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">确定缺失值</h1><p id="00cd" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">您需要导入的唯一库是 pandas:</p><pre class="km kn ko kp gt mf mg mh mi aw mj bi"><span id="bc28" class="mk ld iq mg b gy ml mm l mn mo">import pandas as pd</span></pre><p id="ac95" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您正在使用 Python 中的 pandas 库，并且经常处理具有缺失值的数据，并且需要更快地进行数据分析，那么这里有一个快速函数，它会输出一个数据帧，告诉您每列中有多少缺失值及其百分比:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mp"><img src="../Images/d2536ea2629e27fe8ae59c7921395b8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-lZ7JeaiHLHuAKeb.png"/></div></div></figure><p id="caa4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">可读性稍差的版本，但是您可以将它复制粘贴到您的代码中:</p><pre class="km kn ko kp gt mf mg mh mi aw mj bi"><span id="e0cc" class="mk ld iq mg b gy ml mm l mn mo">def assess_NA(data):<br/>    """<br/>    Returns a pandas dataframe denoting the total number of NA values and the percentage of NA values in each column.<br/>    The column names are noted on the index.<br/>    <br/>    Parameters<br/>    ----------<br/>    data: dataframe<br/>    """<br/>    # pandas series denoting features and the sum of their null values<br/>    null_sum = data.isnull().sum()# instantiate columns for missing data<br/>    total = null_sum.sort_values(ascending=False)<br/>    percent = ( ((null_sum / len(data.index))*100).round(2) ).sort_values(ascending=False)<br/>    <br/>    # concatenate along the columns to create the complete dataframe<br/>    df_NA = pd.concat([total, percent], axis=1, keys=['Number of NA', 'Percent NA'])<br/>    <br/>    # drop rows that don't have any missing data; omit if you want to keep all rows<br/>    df_NA = df_NA[ (df_NA.T != 0).any() ]<br/>    <br/>    return df_NA</span></pre><p id="f944" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您需要传递的唯一参数是 dataframe 对象。这里有一个例子，我们在名为<code class="fe mq mr ms mg b">training</code>的丢失数据的数据帧上调用函数<code class="fe mq mr ms mg b">assess_NA()</code>，然后输出数据帧:<code class="fe mq mr ms mg b">df_NA</code>。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/24577ac52c945669510329e6dfb54ab2.png" data-original-src="https://miro.medium.com/v2/resize:fit:774/format:webp/0*MM9SyT4_FFvTmABg.png"/></div></figure><p id="ffb1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">行表示数据框的要素，列提供关于缺失数据的信息。如果没有丢失的值，那么它将只输出一个空的数据帧。</p><h1 id="0ae6" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">清除丢失数据的方法</h1><p id="f511" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">了解了这一点，您就可以更好地了解如何处理空值，例如:</p><ol class=""><li id="a33a" class="mu mv iq jp b jq jr ju jv jy mw kc mx kg my kk mz na nb nc bi translated"><strong class="jp ir">删除</strong>行</li><li id="3c4a" class="mu mv iq jp b jq nd ju ne jy nf kc ng kg nh kk mz na nb nc bi translated"><strong class="jp ir">使用平均值、中值、0、假、真等进行估算</strong>。</li></ol><h2 id="8d3e" class="mk ld iq bd le ni nj dn li nk nl dp lm jy nm nn lq kc no np lu kg nq nr ly ns bi translated">删除包含空值的行</h2><p id="b6fb" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">这个方法是处理丢失值的一种简单但混乱的方式，因为除了删除这些值之外，它还可能删除不为空的数据。您可以在整个数据帧或特定列上调用<code class="fe mq mr ms mg b">dropna()</code>:</p><pre class="km kn ko kp gt mf mg mh mi aw mj bi"><span id="3dfe" class="mk ld iq mg b gy ml mm l mn mo"># Drop rows with null values<br/>df = df.dropna(axis=0)</span><span id="e9cf" class="mk ld iq mg b gy nt mm l mn mo"># Drop column_1 rows with null values<br/>df['column_1'] = df['column_1'].dropna(axis=0)</span></pre><p id="a151" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">轴参数决定了函数将作用的尺寸。<code class="fe mq mr ms mg b">axis=0</code>删除所有包含空值的行。<code class="fe mq mr ms mg b">axis=1</code>做了几乎相同的事情，只是它删除了列。</p><h2 id="94ca" class="mk ld iq bd le ni nj dn li nk nl dp lm jy nm nn lq kc no np lu kg nq nr ly ns bi translated">输入空值</h2><p id="5a4d" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">插补不是丢弃缺失数据的值，而是用另一个值替换这些值，通常是特定列的平均值或中值。使用任何一种都有好处。例如，如果该列有许多异常值，中位数可能会更有用，因为它更能抵抗这些异常值。通过这种方式，我们试图保留数据的某些方面。为此，我们可以在 dataframe 列上调用<code class="fe mq mr ms mg b">fillna()</code>函数，并将<code class="fe mq mr ms mg b">mean()</code>或<code class="fe mq mr ms mg b">median()</code>指定为参数:</p><pre class="km kn ko kp gt mf mg mh mi aw mj bi"><span id="13ba" class="mk ld iq mg b gy ml mm l mn mo"># Impute with mean on column_1<br/>df['column_1'] = df['column_1'].fillna( df['column_1'].mean() )</span><span id="fca1" class="mk ld iq mg b gy nt mm l mn mo"># Impute with median on column_1<br/>df['column_1'] = df['column_1'].fillna( df['column_1'].median() )</span></pre><p id="e109" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">除了平均值和中值之外，在某些情况下，用 0 来输入缺失数据也是一个好主意:</p><pre class="km kn ko kp gt mf mg mh mi aw mj bi"><span id="0ae3" class="mk ld iq mg b gy ml mm l mn mo"># Impute with value 0 on column_1<br/>df['column_1'] = df['column_1'].fillna(0)</span></pre></div><div class="ab cl nu nv hu nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ij ik il im in"><p id="0b7a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">知道在处理丢失的数据时采取什么途径很大程度上取决于领域知识和您的直觉告诉您的关于数据的信息。这是一步一步来的，通过使用数据集，你可以问一些有意义的问题。</p></div></div>    
</body>
</html>