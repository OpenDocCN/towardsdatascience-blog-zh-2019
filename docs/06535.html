<html>
<head>
<title>Code Legibly or Be Hated</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">清晰地编码或者被憎恨</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/psa-code-legibly-or-be-hated-a3cdeb993f38?source=collection_archive---------23-----------------------#2019-09-18">https://towardsdatascience.com/psa-code-legibly-or-be-hated-a3cdeb993f38?source=collection_archive---------23-----------------------#2019-09-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="16b9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">代码被读取的次数比它被写入的次数多</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ko"><img src="../Images/77ec574062d60eb1021ca3218f7e56e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*ZFdEKJa2vdyU2gVgi85TlA.png"/></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">Source: Imgur</figcaption></figure><p id="2f37" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi la translated"><span class="l lb lc ld bm le lf lg lh li di"> T </span>这是面向所有数据科学家的公共服务公告。请清晰地编码。如果不是为了你的合作者的理智，那也是为了你自己的理智<em class="lj"> x </em>月/年后。</p><h1 id="f7cf" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated"><strong class="ak">个人趣闻</strong></h1><p id="dbc1" class="pw-post-body-paragraph jq jr it js b jt mi jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn im bi la translated">作为全国最佳贝叶斯统计项目的一名硕士生，我被勤奋、磨砺的头脑和富有挑战性的问题所包围。但可以说，我项目中最累人的部分是在我在那里的两年时间里给 1000 多名本科生的 R 代码评分。</p><p id="da58" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我在寒冷、黑暗的房间里度过了许多漫长的周五夜晚，试图编译和执行他们的代码。当它们不可避免地失败，又一个新的错误信息出现时，我会低声吟唱来安慰自己:</p><blockquote class="mo mp mq"><p id="2c22" class="jq jr lj js b jt ju jv jw jx jy jz ka mr kc kd ke ms kg kh ki mt kk kl km kn im bi translated"><em class="it">“我们能行，我们能行，我们能行。”</em></p></blockquote><p id="db40" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是一次创伤性的经历，经常把我的助教们逼到精神崩溃的边缘……甚至更远。</p><p id="3f46" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="lj">当然，给我们的代码打分的上层博士们要糟糕得多。我们的 12-15 名硕士生有编码作业，有时每个作业会产生 50 多页的输出...每周一次。我还记得我们的 TA 和他的眼泪。我听说他还在走廊里找人帮他给我们的作业打分。</em></p><h1 id="adb1" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated"><strong class="ak">要点</strong></h1><p id="c062" class="pw-post-body-paragraph jq jr it js b jt mi jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn im bi la translated">没有什么比看到两位数的 HiveQL/SQL 子查询嵌套和不考虑行字符最大值更糟糕的了。在阅读这些代码时，我几乎淹没在从我布满血丝的眼睛流出的红宝石般的血流中。</p><blockquote class="mu"><p id="0b1e" class="mv mw it bd mx my mz na nb nc nd kn dk translated">毕竟，你能想象在任何语言中阅读一段由数百行组成的段落是多么痛苦吗？每一行都有不同的字符长度，没有清晰的模式，每行的最大字数是冗长的，缺少标点符号，没有证据</p><p id="cb83" class="mv mw it bd mx my mz na nb nc nd kn dk translated"><em class="ne">关于白色 s p a c e <br/>压痕的清晰图案？</em></p></blockquote><figure class="ng nh ni nj nk kt gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/c50ab55d6370c62175c171a10bd05d21.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*S7_qlQc26hIlSRdcyt5wsQ.jpeg"/></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">The best metric for code assessment: WTFs per Minute (WTFM), averaged (weighted or unweighted) across multiple reviewers. (Image source: Thom Holwerda, <a class="ae mn" href="https://www.osnews.com/story/19266/wtfsm/" rel="noopener ugc nofollow" target="_blank">https://www.osnews.com/story/19266/wtfsm/</a>)</figcaption></figure><p id="03a6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">好的编码保证了产品的连续性。文档就更好了。虽然文档并不令人兴奋，也不总是有回报，但它使其他人能够继续你的工作，并享受这样做。结果是更好的软件更容易维护。</p><p id="f8d7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">好的编码是细致入微的:有些东西可能太多或太少，比如空白。这里有几个例子突出了优秀编码的复杂细微差别:</p><h1 id="4cfc" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">示例:空白太少</h1><p id="d0c8" class="pw-post-body-paragraph jq jr it js b jt mi jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn im bi la translated">我认为这些图片已经足够说明问题了。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi nl"><img src="../Images/e8a136013f6a4a47de41266979f83f70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Oe5z7ioUAXC9vEQTwrD6yw.jpeg"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">A comically illustrative example of poor white space utilization.</figcaption></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi nq"><img src="../Images/4b1bf89e78599b7dc5cca25e17bf1974.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6ZT7dx2ZFwsjeh4r9rHqiw.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">I wrote this as an example of poorly formatted HiveQL code. It is too dense and there is no logical separation of ideas/clauses in the code that allows for a quick and seamless reading.</figcaption></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/32276c73e1409d6bf95811bc977db94b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*77_ka3uBvIb0J-Lp9vig3g.jpeg"/></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">The original query. Image source: <a class="ae mn" href="https://image.slidesharecdn.com/usinghive-151001173243-lva1-app6892/95/using-apache-hive-with-high-performance-44-638.jpg?cb=1443721144" rel="noopener ugc nofollow" target="_blank">https://image.slidesharecdn.com/usinghive-151001173243-lva1-app6892/95/using-apache-hive-with-high-performance-44-638.jpg?cb=1443721144</a></figcaption></figure><h1 id="9966" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">示例:空白太多</h1><p id="c5db" class="pw-post-body-paragraph jq jr it js b jt mi jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn im bi la translated">当你不能一次看到所有相关的部分时，ode 就更难理解了。通过在大多数行之间插入一个空行，您可以看到的代码量减少了一半，并且可能没有充分利用宝贵的屏幕空间。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="nm nn di no bf np"><div class="gh gi ns"><img src="../Images/e3612f032a57febdd2c5fced583da654.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*StOwTLXb4lLeoZKg.png"/></div></div></figure><h1 id="0d22" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">例子:没有普遍的规则</h1><p id="d852" class="pw-post-body-paragraph jq jr it js b jt mi jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn im bi la translated">有时，没有一个单一的规则被多种语言所接受。例如，像每行最大字符数这样简单的事情在不同的语言中有不同的标准:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nt nu l"/></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">Max line length/character limits by language.\</figcaption></figure><h1 id="973d" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">结论</h1><p id="e039" class="pw-post-body-paragraph jq jr it js b jt mi jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn im bi la translated">风格的一致性是编码项目的最高目标。只要一致，项目遵循哪些特定的惯例并不太重要。如果不处理不同代码段的不同缩进模式、命名约定和习惯用法，就很难理解大型系统。《Python》的作者 Guido Van Rossum 说得好:</p><blockquote class="mo mp mq"><p id="62bb" class="jq jr lj js b jt ju jv jw jx jy jz ka mr kc kd ke ms kg kh ki mt kk kl km kn im bi translated">风格指南是关于一致性的。与本风格指南保持一致非常重要。项目内部的一致性更重要。一个模块或功能内的一致性是最重要的。</p><p id="b3d8" class="jq jr lj js b jt ju jv jw jx jy jz ka mr kc kd ke ms kg kh ki mt kk kl km kn im bi translated">然而，要知道什么时候不一致——有时候风格指南的建议并不适用。当有疑问时，使用你最好的判断。看看其他例子，决定什么是最好看的。不要犹豫地问！</p></blockquote><p id="e2fb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">总之，遵循风格规则，直到你有足够的经验和合理的理由去打破它们！</p></div><div class="ab cl nv nw hx nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="im in io ip iq"><p id="f689" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以下是数据科学家常用语言的一些风格指南:</p><p id="eabe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> Python </strong></p><ul class=""><li id="eca1" class="oc od it js b jt ju jx jy kb oe kf of kj og kn oh oi oj ok bi translated"><a class="ae mn" href="https://docs.python.org/2.0/ref/indentation.html" rel="noopener ugc nofollow" target="_blank">https://docs.python.org/2.0/ref/indentation.html</a></li></ul><p id="c606" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> R </strong></p><ul class=""><li id="7ebe" class="oc od it js b jt ju jx jy kb oe kf of kj og kn oh oi oj ok bi translated"><a class="ae mn" href="https://google.github.io/styleguide/Rguide.xml" rel="noopener ugc nofollow" target="_blank">https://google.github.io/styleguide/Rguide.xml</a></li></ul><p id="f0fa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">通用编码样式</strong></p><ul class=""><li id="8f8f" class="oc od it js b jt ju jx jy kb oe kf of kj og kn oh oi oj ok bi translated"><a class="ae mn" href="https://en.wikipedia.org/wiki/Indentation_style" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Indentation_style</a></li></ul><p id="1cb9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> Reddit </strong></p><ul class=""><li id="4192" class="oc od it js b jt ju jx jy kb oe kf of kj og kn oh oi oj ok bi translated"><a class="ae mn" href="https://www.reddit.com/r/badcode/" rel="noopener ugc nofollow" target="_blank">https://www.reddit.com/r/badcode/</a>(针对用户提交的糟糕代码的例子)</li></ul><p id="f514" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">参考文献</strong></p><p id="3d18" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">[1]<a class="ae mn" href="https://www.codereadability.com/maximum-line-length/" rel="noopener ugc nofollow" target="_blank">https://www.codereadability.com/maximum-line-length/</a><br/>【2】<a class="ae mn" href="https://www.python.org/dev/peps/pep-0008/#a-foolish-consistency-is-the-hobgoblin-of-little-minds" rel="noopener ugc nofollow" target="_blank">https://www . python . org/dev/peps/pep-0008/# a-foody-consistency-is-the-hobby-the-goblin-of-little-minds</a></p></div></div>    
</body>
</html>