<html>
<head>
<title>Mastering the art of web scraping with Selenium and Python [Part 1/2]</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Selenium 和 Python 掌握 web 抓取艺术(第 1/2 部分)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/mastering-the-art-of-web-scraping-with-selenium-and-python-part-1-2-90a216199873?source=collection_archive---------24-----------------------#2019-09-11">https://towardsdatascience.com/mastering-the-art-of-web-scraping-with-selenium-and-python-part-1-2-90a216199873?source=collection_archive---------24-----------------------#2019-09-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e2c6" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Selenium 是与网站进行高级交互的强大工具:登录、点击…让我们用它来抓取网页</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/1bf05b6be6633cb88fec09f1659351a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*nh2olbFgTLJY9hPm.png"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">Using Selenium to do web scraping requires a specific strategy to access the data you seek</figcaption></figure><p id="5277" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi ln translated">或者 90%的网站，你不需要硒。事实上，简单的<strong class="kt ir">请求</strong>和<strong class="kt ir">美丽组合</strong>组合就能完成任务。我写了一篇关于如何做到这一点的文章。</p><p id="ba35" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是如果网站要求你在访问它的内容之前登录呢？如果您想要抓取的页面没有特定的 url，而您需要点击按钮并触发 javascript 操作才能到达正确的页面，该怎么办？</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/95cbf74a5ac609627c34d798cfe9d30b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*VU-oY0qiSurxBWz1.gif"/></div></figure><p id="4664" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这就是本文的目标:在不简单抓取的网站上实现网页抓取。</p></div><div class="ab cl ly lz hu ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ij ik il im in"><h1 id="d3aa" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">安装 Selenium</h1><p id="c302" class="pw-post-body-paragraph kr ks iq kt b ku mx jr kw kx my ju kz la mz lc ld le na lg lh li nb lk ll lm ij bi translated">Selenium 模拟 web 浏览器。实际上，你不仅可以模仿 Chrome，还可以模仿 Firefox、Safari 和 Edge。你需要在这里安装需要的组件<a class="ae lw" href="https://selenium-python.readthedocs.io/installation.html#drivers" rel="noopener ugc nofollow" target="_blank"/>。在本文的其余部分，我将使用 Chrome 模拟器。</p><p id="00ca" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用以下内容安装 Python 包:</p><blockquote class="nc nd ne"><p id="850c" class="kr ks nf kt b ku kv jr kw kx ky ju kz ng lb lc ld nh lf lg lh ni lj lk ll lm ij bi translated"><strong class="kt ir">pip</strong>T12】安装硒</p></blockquote><h1 id="5a24" class="mf mg iq bd mh mi nj mk ml mm nk mo mp jw nl jx mr jz nm ka mt kc nn kd mv mw bi translated">用 Python 运行 Selenium</h1><p id="837b" class="pw-post-body-paragraph kr ks iq kt b ku mx jr kw kx my ju kz la mz lc ld le na lg lh li nb lk ll lm ij bi translated">好了，现在让我们打开一个 Jupyter 笔记本，尝试运行以下代码:</p><blockquote class="nc nd ne"><p id="56d0" class="kr ks nf kt b ku kv jr kw kx ky ju kz ng lb lc ld nh lf lg lh ni lj lk ll lm ij bi translated"><strong class="kt ir">从</strong>硒<strong class="kt ir">导入</strong> webdriver</p><p id="f4a8" class="kr ks nf kt b ku kv jr kw kx ky ju kz ng lb lc ld nh lf lg lh ni lj lk ll lm ij bi translated">浏览器= webdriver。chrome(executable _ path = '/usr/local/bin/chrome driver ')<br/>browser . get(URL = " https://www . Facebook . com ")</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/5099a0418c6f141db9e3a16867a3d83a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*FCmZqjMOkPOCEJ__LwxFMQ.gif"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">Selenium opens a new Chrome window and goes to facebook.com</figcaption></figure><p id="95ab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请注意，<em class="nf">'/usr/local/bin/chrome driver '</em>可能会为您而改变，无论您是在 Mac、PC 等设备上。</p><p id="4115" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们登录:</p><blockquote class="nc nd ne"><p id="bdd9" class="kr ks nf kt b ku kv jr kw kx ky ju kz ng lb lc ld nh lf lg lh ni lj lk ll lm ij bi translated">browser . find _ element _ by _ XPath("//input[@ type = ' email ']")。send _ keys('<strong class="kt ir">your _ email _ address _ here</strong>')<br/>browser . find _ element _ by _ XPath("//input[@ type = ' password ']")。send _ keys('<strong class="kt ir">your _ password _ here</strong>')<br/>browser . find _ element _ by _ id(" log in button ")。单击()</p></blockquote><p id="d2c7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这应该很好！如果弹出窗口出现，您可以在以后使用以下命令禁用它。</p><p id="18ce" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">替换</p><blockquote class="nc nd ne"><p id="9dbb" class="kr ks nf kt b ku kv jr kw kx ky ju kz ng lb lc ld nh lf lg lh ni lj lk ll lm ij bi translated">浏览器= webdriver。chrome(executable _ path = '/usr/local/bin/chrome driver ')</p></blockquote><p id="ad87" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">与以下内容</p><blockquote class="nc nd ne"><p id="b464" class="kr ks nf kt b ku kv jr kw kx ky ju kz ng lb lc ld nh lf lg lh ni lj lk ll lm ij bi translated">选项=网络驱动程序。chrome options()<br/>option . add _ experimental _ option(" prefs "，{ " profile . default _ content _ setting _ values . notifications ":2 })<br/>browser = web driver。chrome(executable _ path = '/usr/local/bin/chrome driver '<strong class="kt ir">，chrome_options=option </strong>)</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="np nq di nr bf ns"><div class="gh gi no"><img src="../Images/9b08cf8967959b19b129204a11fecc30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-70EPE7yiEFSiVmvtSMXPA.png"/></div></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">There can be a notification just after you logged in. You can automatically disable pop-ups with Selenium.</figcaption></figure><h1 id="bbb2" class="mf mg iq bd mh mi nj mk ml mm nk mo mp jw nl jx mr jz nm ka mt kc nn kd mv mw bi translated">结论</h1><p id="265a" class="pw-post-body-paragraph kr ks iq kt b ku mx jr kw kx my ju kz la mz lc ld le na lg lh li nb lk ll lm ij bi translated">硒入门没那么难。棘手的是提前准备好网页抓取方案。在下一篇文章中，我们将关注一个真实的 web 抓取用例，并设计一个具体的方案来实现它。</p></div><div class="ab cl ly lz hu ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ij ik il im in"><h1 id="1b27" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">奖金</h1><h2 id="c844" class="nt mg iq bd mh nu nv dn ml nw nx dp mp la ny nz mr le oa ob mt li oc od mv oe bi translated">几个关于我如何使用 Selenium + Python 的例子</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi of"><img src="../Images/6b7578906df52a8f41b51f34b28a560a.png" data-original-src="https://miro.medium.com/v2/resize:fit:384/1*7Tw7myZWNlWy4R4nxZXMRg.gif"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">Selenium posting on Facebook</figcaption></figure><p id="deb5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">= &gt;我自动在 70 多个脸书小组上发表了关于机器学习的文章。不幸的是，我最近重新运行了代码，发现脸书更新了网站以避免这种行为:/</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi of"><img src="../Images/d349b015a638bb03ba77553216c92830.png" data-original-src="https://miro.medium.com/v2/resize:fit:384/1*nRrng63p7qdDvsWh0MsygQ.gif"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk">Selenium filling an online quiz</figcaption></figure><p id="9759" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">= &gt;我完成了之前公司的在线培训(约 40 次培训，每次约 120 个不同的问题)，并在排行榜上获得第一名</p><p id="2976" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">= &gt;我收集了多个网站的在线电影评论(千兆字节的文本数据，真的很酷，可以训练 ML 模型！)</p><p id="ff32" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">而这只是冰山一角。你还可以做很多其他很酷的事情。</p></div></div>    
</body>
</html>