<html>
<head>
<title>How to Set Up a PostgreSQL Database on Amazon RDS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在 Amazon RDS 上建立 PostgreSQL 数据库</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-set-up-a-postgresql-database-on-amazon-rds-64e8d144179e?source=collection_archive---------13-----------------------#2019-12-10">https://towardsdatascience.com/how-to-set-up-a-postgresql-database-on-amazon-rds-64e8d144179e?source=collection_archive---------13-----------------------#2019-12-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/8b7327f28f8ad54ab894721941e065ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*73f33DTb5XsNfE1R7CIY0g.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">LPhoto by <a class="ae kf" href="https://unsplash.com/@sortino?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Joshua Sortino</a> on <a class="ae kf" href="https://unsplash.com/s/photos/data?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="86b7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://www.postgresql.org/about/" rel="noopener ugc nofollow" target="_blank"> <strong class="ki iu"> PostgreSQL </strong> </a> <strong class="ki iu">是一个开源的对象关系数据库系统，使用 SQL 语言进行交互和维护。它已经被证明是一个高度可扩展的数据库解决方案，因为它允许您管理万亿字节的数据，并且可以处理许多并发用户。PostgreSQL 也是符合 ACID 的，以确保出错时的有效性。</strong></p><p id="b5b6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当您需要创建关系数据库时，您应该<strong class="ki iu">选择 PostgreSQL 数据库，</strong>其中<strong class="ki iu"> </strong>数据被组织到一个或多个由列和行组成的表中，使用唯一的键来标识每一行。一个表中的行通常使用该唯一键链接到其他表中的行。</p><p id="dc5f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">虽然有许多地方<a class="ae kf" href="https://www.postgresql.org/about/servers/" rel="noopener ugc nofollow" target="_blank"/>可以托管您的 PostgreSQL 数据库，但是<strong class="ki iu">本文特别关注在</strong> <a class="ae kf" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Welcome.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ki iu">亚马逊关系数据库服务</strong> </a> <strong class="ki iu">(亚马逊 RDS) </strong>上托管您的数据库。Amazon RDS 允许在 AWS 云中设置关系数据库，非常容易使用。</p><p id="6a05" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您刚刚开始使用所有 AWS 服务，希望您会发现这很有帮助！在本文的大部分时间里，我将介绍 AWS 上的 PostgreSQL 设置，然后介绍如何执行一些其他有用的数据库操作。如果您已经建立了数据库，请随意跳过！⏭⏭</p><p id="9cb4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">这篇文章涵盖了哪些内容:</strong></p><ul class=""><li id="a525" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated">如何在 Amazon RDS 中创建 PostgreSQL 数据库</li><li id="8007" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">如何从外部连接到 PostgreSQL 数据库</li><li id="d8b9" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">如何使用 SQL 在数据库中创建表</li><li id="eee4" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">如何使用 SQL 将数据插入数据库的表中</li><li id="bd5a" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">如何使用 SQL 删除数据库中的表</li></ul><h1 id="f208" class="ls lt it bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">在 Amazon RDS 中创建 PostgreSQL 数据库</h1><p id="cb1d" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">要在 AWS 中创建 Postgres 数据库，首先登录您的帐户并在 AWS 管理控制台中搜索<code class="fe mv mw mx my b">RDS</code>。点击左边工具条上的<code class="fe mv mw mx my b">Databases</code>，你将被带到一个如下所示的页面。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/6bbf5cc274aafd11f886d9970961d96f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xhHM-pl7TjanEvUS-KsCWg.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">RDS Databases View</figcaption></figure><p id="fd10" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">点击右上角的橙色<code class="fe mv mw mx my b">Create database</code>按钮，现在你可以开始为你的新数据库选择选项了。</p><h2 id="d64c" class="ne lt it bd lu nf ng dn ly nh ni dp mc kr nj nk mg kv nl nm mk kz nn no mo np bi translated"><strong class="ak">选择一种数据库创建方法</strong></h2><p id="ac99" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">选择<code class="fe mv mw mx my b">Standard Create</code>以便您可以定制数据库配置。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nq"><img src="../Images/19d5dca0b697c352473e07a05bffa55b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d1zWGG4Nm0Ze4gfqJKqtWg.png"/></div></div></figure><h2 id="e256" class="ne lt it bd lu nf ng dn ly nh ni dp mc kr nj nk mg kv nl nm mk kz nn no mo np bi translated"><strong class="ak">选择发动机选项</strong></h2><p id="ee19" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">我们正在创建 Postgres 数据库，因此选择 PostgreSQL 并保留默认版本 11.5-R1。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nr"><img src="../Images/52a87eb1339a090c58991090185e75e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8jgxLJCPWzdH_GxNGJmPzQ.png"/></div></div></figure><h2 id="ce6b" class="ne lt it bd lu nf ng dn ly nh ni dp mc kr nj nk mg kv nl nm mk kz nn no mo np bi translated"><strong class="ak">为您的用例选择一个模板</strong></h2><p id="96fd" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">因为我们正在测试，所以我选择了免费层！</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ns"><img src="../Images/a397a2c289d05ba842351811c27cd85b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZbdxkBfAc2G1vw2cGB35yQ.png"/></div></div></figure><h2 id="f621" class="ne lt it bd lu nf ng dn ly nh ni dp mc kr nj nk mg kv nl nm mk kz nn no mo np bi translated"><strong class="ak">自定义设置</strong></h2><p id="4a79" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">您可以更改<code class="fe mv mw mx my b">DB instance identifier</code>和<code class="fe mv mw mx my b">Master username</code>或保留默认值。我把我的用户名改成了<code class="fe mv mw mx my b">test-db</code>和，并保留了默认用户名<code class="fe mv mw mx my b">postgres</code>。您也可以让 Amazon RDS 为您生成一个密码，或者您可以指定自己的密码。在这个例子中，我指定了我自己的。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nt"><img src="../Images/853fedfa8d1fecc87ce0f0e91d752f59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pb0Opvh4vixng7tkPRqkkw.png"/></div></div></figure><h2 id="3215" class="ne lt it bd lu nf ng dn ly nh ni dp mc kr nj nk mg kv nl nm mk kz nn no mo np bi translated"><strong class="ak">数据库实例大小</strong></h2><p id="0018" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">DB instance 类决定 Amazon RDS DB 实例的计算和内存容量。您需要的 DB 实例类取决于您的处理能力和内存需求(<a class="ae kf" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.DBInstanceClass.html" rel="noopener ugc nofollow" target="_blank"> Amazon 文档</a>)</p><p id="76b3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是您希望选择满足内存需求的实例的地方。对于免费层，我们只有<code class="fe mv mw mx my b">Burstable classes</code>作为选项，我将这部分保留为默认的<code class="fe mv mw mx my b">db.t2.micro</code>。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nu"><img src="../Images/7ceb4615c300272418faf6bd58ee5e3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3p0xoRw-nKn_TZ8W925CuA.png"/></div></div></figure><h2 id="91a4" class="ne lt it bd lu nf ng dn ly nh ni dp mc kr nj nk mg kv nl nm mk kz nn no mo np bi translated"><strong class="ak">存储大小</strong></h2><p id="42b6" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">您可以在这里指定数据库的存储要求。您还可以选择启用存储自动扩展，以便您的数据库是动态的，可以自动扩展🙂</p><p id="652f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，我只是保留了<code class="fe mv mw mx my b">storage type</code>、<code class="fe mv mw mx my b">allocated storage</code>、<code class="fe mv mw mx my b">maximum storage threshold</code>的默认值，并保留了<code class="fe mv mw mx my b">enable storage autoscaling</code>选中的✅</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nu"><img src="../Images/c144a926859030f2da7ac5a91a37743d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NQluhDO0BuGzPHXSac7yeQ.png"/></div></div></figure><h2 id="a41a" class="ne lt it bd lu nf ng dn ly nh ni dp mc kr nj nk mg kv nl nm mk kz nn no mo np bi translated"><strong class="ak">可用性&amp;耐用性</strong></h2><p id="2fae" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">该选项用于创建一个备用数据库，以防停机，这样您的数据库就可以一直正常运行。该选项在空闲层不可用。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nv"><img src="../Images/8e98958d8abd82e8e8508fd8089f0bb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hyhqV8GNFmK4R8gWdGtHgg.png"/></div></div></figure><h2 id="fae9" class="ne lt it bd lu nf ng dn ly nh ni dp mc kr nj nk mg kv nl nm mk kz nn no mo np bi translated">连通性</h2><p id="6fc9" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">您可以在这里指定以下连接配置:</p><ul class=""><li id="196f" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated"><strong class="ki iu"> VPC </strong> —为该数据库实例定义虚拟网络环境的 VPC</li><li id="e72b" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><strong class="ki iu">子网组</strong> —定义数据库实例可以使用哪些子网和 IP 范围的子网组</li><li id="2c7c" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><strong class="ki iu">公共可访问性</strong> —数据库是否可公开访问</li><li id="542c" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><strong class="ki iu"> VPC 安全组</strong> —允许 VPC 之外的流量进入的安全组</li><li id="230c" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><strong class="ki iu">可用性区域</strong> —通过将故障与其他可用性区域隔离来提高高可用性</li><li id="e6c1" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><strong class="ki iu">数据库端口</strong> —数据库实例将用于应用程序连接的 TCP/IP 端口</li></ul><p id="b6a8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我保留了除<code class="fe mv mw mx my b">Publicly accessible</code>部分之外的所有默认值，我将它改为<code class="fe mv mw mx my b">Yes</code>，这样我的数据库就可以在 VPC 之外访问，就像从 Jupyter 笔记本上访问一样。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nw"><img src="../Images/38dc55311de67092239873539f9cf29b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EImw_CmxeWsFYNaw1mLwCg.png"/></div></div></figure><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nx"><img src="../Images/4501f14e8c052359ea2a00f59bd84eef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oFF7g9JvLJUo4W6h4tZmsQ.png"/></div></div></figure><h2 id="9a94" class="ne lt it bd lu nf ng dn ly nh ni dp mc kr nj nk mg kv nl nm mk kz nn no mo np bi translated">数据库认证</h2><p id="6ec2" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">在此部分中，您可以从以下选项中选择如何验证您的数据库凭据:</p><ul class=""><li id="7d3f" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated"><strong class="ki iu">密码认证</strong> —通过 DB 引擎的本机密码认证特性管理您的数据库用户凭证。</li><li id="d7df" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><strong class="ki iu">密码和 IAM 数据库认证</strong> —通过 DB 引擎的本机密码认证功能和 IAM 用户和角色管理您的数据库用户凭证。</li><li id="66f8" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><strong class="ki iu">密码和 Kerberos 认证</strong> — <strong class="ki iu"> </strong>通过 DB 引擎的原生密码认证特性和 AWS 目录服务创建的 AWS 托管 Microsoft AD 管理您的数据库用户凭证。这样，您可以集中存储和管理用户凭证，而不是为每个数据库实例单独存储和管理。</li></ul><p id="488e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们和<code class="fe mv mw mx my b">Password authentication</code>一起去吧。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ny"><img src="../Images/7f5d5536b33c1d13ad29d4832a12e652.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ddx6IGLRexyWf-c7e_59pA.png"/></div></div></figure><h2 id="01bc" class="ne lt it bd lu nf ng dn ly nh ni dp mc kr nj nk mg kv nl nm mk kz nn no mo np bi translated">创建数据库</h2><p id="f5ee" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">最后，单击底部的<code class="fe mv mw mx my b">create database</code>开始创建数据库，您应该会在页面上看到以下消息。这需要几分钟时间！</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nz"><img src="../Images/c67fbd78c6e8c9e9233f43651c1a3bf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mBWWYCV7GvqZY37cSjVdiw.png"/></div></div></figure><h1 id="9d57" class="ls lt it bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">连接到 AWS RDS 中的 PostgreSQL 数据库</h1><blockquote class="oa ob oc"><p id="84de" class="kg kh od ki b kj kk kl km kn ko kp kq oe ks kt ku of kw kx ky og la lb lc ld im bi translated">下载<a class="ae kf" href="https://github.com/Cryptolytic-app/cryptolytic/blob/master/medium_articles/postgres_setup.ipynb" rel="noopener ugc nofollow" target="_blank"> Jupyter 笔记本</a>跟随</p></blockquote><p id="fd38" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将使用 psycopg2 库在 Jupyter 笔记本中本地连接到 postgres 数据库(您也可以从 IDE 或终端连接)。继续使用<code class="fe mv mw mx my b">!pip install psycopg2-binary</code>安装 psycopg2，然后可以运行下面的代码进行连接。</p><p id="548b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu"> <em class="od">注意</em> </strong> <em class="od">:对于</em> <code class="fe mv mw mx my b"><em class="od">POSTGRES_DBNAME</em></code> <em class="od">，当我放入真正的数据库名时，它实际上从来没有工作过，在这种情况下我将其命名为 test-db，我必须放入</em> <code class="fe mv mw mx my b"><em class="od">postgres</em></code> <em class="od">来代替。如果它最终不能使用您给定的数据库名称，尝试默认的</em> <code class="fe mv mw mx my b"><em class="od">postgres</em></code> <em class="od">它可能会工作。</em></p><pre class="na nb nc nd gt oh my oi oj aw ok bi"><span id="9145" class="ne lt it my b gy ol om l on oo">import psycopg2 as ps</span><span id="52b2" class="ne lt it my b gy op om l on oo"># define credentials <br/>credentials = {'POSTGRES_ADDRESS' : '', # change to your endpoint<br/>               'POSTGRES_PORT' : '', # change to your port<br/>               'POSTGRES_USERNAME' : '', # change to your username<br/>               'POSTGRES_PASSWORD' : '', # change to your password<br/>               'POSTGRES_DBNAME' : ''} # change to your db name</span><span id="6989" class="ne lt it my b gy op om l on oo"># create connection and cursor    <br/>conn = ps.connect(host=credentials['POSTGRES_ADDRESS'],<br/>                  database=credentials['POSTGRES_DBNAME'],<br/>                  user=credentials['POSTGRES_USERNAME'],<br/>                  password=credentials['POSTGRES_PASSWORD'],<br/>                  port=credentials['POSTGRES_PORT'])</span><span id="cd29" class="ne lt it my b gy op om l on oo">cur = conn.cursor()</span></pre><p id="c2bf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你没有得到一个错误，你已经成功地连接到你的 postgres 数据库！🎊</p><h1 id="0b61" class="ls lt it bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">在 Postgres 数据库中创建表</h1><p id="732e" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">既然您已经成功地创建了一个 postgres 数据库，让我们在其中创建一个表。</p><p id="74a6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，验证数据库中有什么—应该什么都没有。您可以使用以下返回空列表的代码进行检查。</p><pre class="na nb nc nd gt oh my oi oj aw ok bi"><span id="9123" class="ne lt it my b gy ol om l on oo">query = """SELECT * FROM pg_catalog.pg_tables<br/>            WHERE schemaname != 'pg_catalog'<br/>            AND schemaname != 'information_schema';"""</span><span id="3c66" class="ne lt it my b gy op om l on oo">cur.execute(query)<br/>cur.fetchall()</span></pre><p id="9951" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu"> <em class="od">注意:</em> </strong> <em class="od">如果您跳过了本文的部分内容，请先确保您已经连接到了数据库(见上文)😀</em></p><p id="375e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以通过运行以下代码来创建您的第一个表:</p><pre class="na nb nc nd gt oh my oi oj aw ok bi"><span id="edaa" class="ne lt it my b gy ol om l on oo">cur.execute("""CREATE TABLE table_1<br/>                (column_1 integer, <br/>                column_2 float,<br/>                column_3 varchar(50),<br/>                column_4 boolean);""")</span><span id="14de" class="ne lt it my b gy op om l on oo"># Commit table creation<br/>conn.commit()</span></pre><p id="58b7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将创建一个名为<code class="fe mv mw mx my b">table_1</code>的表，包含 4 列。我已经包含了一些常见的 SQL 数据类型，因此您可以将它们更改为您的表的数据类型。</p><p id="039e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们运行上面的代码来检查数据库中的表，我们会得到下面的响应，可以看到 table_1 现在在数据库中:</p><pre class="na nb nc nd gt oh my oi oj aw ok bi"><span id="d3c4" class="ne lt it my b gy ol om l on oo">[(‘public’, ‘table_1’, ‘postgres’, None, False, False, False, False)]</span></pre><p id="09d5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">好处:</strong>如果您想要系统地创建一组给定了表名列表的表，您可以使用下面的代码:</p><pre class="na nb nc nd gt oh my oi oj aw ok bi"><span id="a65c" class="ne lt it my b gy ol om l on oo">table_list = [] # a list of string table names</span><span id="21c5" class="ne lt it my b gy op om l on oo">for table_name in table_list:<br/>    cur.execute("""CREATE TABLE {table_name}<br/>                (column_1 float,<br/>                column_2 float,<br/>                column_3 float,<br/>                column_4 float);""".format(table_name=table_name))</span><span id="66ff" class="ne lt it my b gy op om l on oo"># Commit table creation<br/>conn.commit()</span></pre><h1 id="dad2" class="ls lt it bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">将数据插入 PostgreSQL 数据库的表中</h1><p id="a24e" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">现在 postgres 数据库中有了一个表，可以开始输入数据了。</p><p id="adb7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">若要插入一行数据，请运行以下代码:</p><pre class="na nb nc nd gt oh my oi oj aw ok bi"><span id="1fc3" class="ne lt it my b gy ol om l on oo">data = [1, 2.2, 'three', True]<br/>insert_query = """INSERT INTO table_8<br/>                   (column_1, column_2, column_3, column_4)<br/>                   VALUES (%s, %s, %s, %s);"""</span><span id="c7eb" class="ne lt it my b gy op om l on oo"># execute insert<br/>cur.execute(insert_query, data)<br/>            <br/># commit data insert<br/>conn.commit()</span></pre><p id="4f75" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我将数据放入一个列表中，确保数据类型与为表中的列选择的数据类型相匹配。确保自定义正在创建的表，以匹配将要插入的数据类型。然后，我编写了将该列表插入到表中的查询，执行该查询，并将它提交到表中。如果不提交执行，您的数据将不会保存到表中。</p><p id="bf66" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通过从表中提取数据来验证数据是否已保存:</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/6a0cd1e0bb6454e63f9791ad5f770a4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*ITOZrqydeU2mvqwzE1pbog.png"/></div></figure><p id="6fa6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">select 语句返回我们插入的数据，所以我们知道它是有效的！</p><p id="f9d2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要在表中插入多行数据，请运行以下代码:</p><pre class="na nb nc nd gt oh my oi oj aw ok bi"><span id="41f5" class="ne lt it my b gy ol om l on oo">data = [[5, 5.5, 'five', True], [5, 5.5, 'five', True], [5, 5.5, 'five', True]]<br/>insert_query = """INSERT INTO table_1<br/>                   (column_1, column_2, column_3, column_4)<br/>                   VALUES (%s, %s, %s, %s);"""</span><span id="b258" class="ne lt it my b gy op om l on oo"># execute multiple inserts<br/>cur.executemany(insert_query, data)<br/>            <br/># commit data insert<br/>conn.commit()</span></pre><p id="73f3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里的区别在于，变量<code class="fe mv mw mx my b">data</code>是一个包含要插入的数据的列表列表。我们还使用<code class="fe mv mw mx my b">cur.executemany</code>而不是<code class="fe mv mw mx my b">cur.execute</code>来遍历我们的数据列表并插入所有的输入。</p><p id="f578" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，您可以使用简单的 select 语句验证是否插入了三行新数据:</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div class="gh gi or"><img src="../Images/9fcd2a0199c597cb9fae70fa3ba3cec9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*RxkAmvRuhvlLw9gVhRRWAw.png"/></div></figure><p id="32d2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，您可以看到 select 语句返回了使用前面的 insert 语句添加的 3 个新行。</p><h1 id="8fb6" class="ls lt it bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">删除/删除 SQL 中的表</h1><p id="bb0b" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">你最终会想要删除这个测试表，开始你真正的工作——或者你可能像我一样搞砸了一些事情🙃</p><p id="58ba" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用 SQL 命令<code class="fe mv mw mx my b">DROP TABLE</code>删除 postgres 数据库中的一个表:</p><pre class="na nb nc nd gt oh my oi oj aw ok bi"><span id="200b" class="ne lt it my b gy ol om l on oo">cur.execute("""DROP TABLE table_1""")<br/>conn.commit()</span></pre><p id="7e93" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">确保您确实提交了，否则您的表不会被删除！使用我们之前用来检查的代码来验证您的数据库包含的表。</p></div><div class="ab cl os ot hx ou" role="separator"><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox"/></div><div class="im in io ip iq"><p id="3390" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就是这样！现在，您可以在 AWS 上建立自己的 PostgreSQL 数据库，创建表，添加数据，并删除任何不需要的表。如果你按照教程学习并发现任何错误，请让我知道，这样我可以修复它！</p><p id="8576" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您还可以使用更好的用户界面来管理 PostgreSQL。我推荐 pgAdmin，这里<a class="ae kf" href="https://www.pgadmin.org/download/" rel="noopener ugc nofollow" target="_blank">可以免费下载</a>。</p><p id="b542" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这篇文章最终将成为我和我的团队在从事一个名为 Cryptolytic 的项目时所学到的经验的系列文章的一部分(文章将很快写出来并链接到这里)。这是我们在进行项目时希望拥有的指南。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oz"><img src="../Images/85f111ba2c9569145f0e12a4926e8228.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7ZPuBgGuzjdhmrnRI96FGw.png"/></div></div></figure><p id="8a86" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">包含本文中使用的所有代码的笔记本可以在这里</strong><a class="ae kf" href="https://github.com/Cryptolytic-app/cryptolytic/blob/master/medium_articles/postgres_setup.ipynb" rel="noopener ugc nofollow" target="_blank"><strong class="ki iu"/></a><strong class="ki iu"/>找到，这是我们的密码破解项目的回购文件中的内容——所以如果你很好奇，可以去看看！</p><p id="22d1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在 twitter <a class="ae kf" href="http://www.twitter.com/elizabethets" rel="noopener ugc nofollow" target="_blank"> @elizabethets </a>上找到我或者在<a class="ae kf" href="https://www.linkedin.com/in/elizabethts/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系我！</p></div><div class="ab cl os ot hx ou" role="separator"><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox"/></div><div class="im in io ip iq"><p id="d913" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">来源:</p><div class="pa pb gp gr pc pd"><a href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Welcome.html" rel="noopener  ugc nofollow" target="_blank"><div class="pe ab fo"><div class="pf ab pg cl cj ph"><h2 class="bd iu gy z fp pi fr fs pj fu fw is bi translated">什么是亚马逊关系数据库服务(Amazon RDS)？</h2><div class="pk l"><h3 class="bd b gy z fp pi fr fs pj fu fw dk translated">Amazon 关系数据库服务(Amazon RDS)是一个 web 服务，它使设置、操作和扩展关系数据库变得更加容易</h3></div><div class="pl l"><p class="bd b dl z fp pi fr fs pj fu fw dk translated">docs.aws.amazon.com</p></div></div><div class="pm l"><div class="pn l po pp pq pm pr jz pd"/></div></div></a></div><div class="pa pb gp gr pc pd"><a href="https://www.postgresql.org/about/" rel="noopener  ugc nofollow" target="_blank"><div class="pe ab fo"><div class="pf ab pg cl cj ph"><h2 class="bd iu gy z fp pi fr fs pj fu fw is bi translated">关于</h2><div class="pk l"><h3 class="bd b gy z fp pi fr fs pj fu fw dk translated">PostgreSQL 是一个强大的、开源的对象关系数据库系统，它使用并扩展了 SQL 语言和</h3></div><div class="pl l"><p class="bd b dl z fp pi fr fs pj fu fw dk translated">www.postgresql.org</p></div></div></div></a></div><div class="pa pb gp gr pc pd"><a href="https://github.com/Cryptolytic-app/cryptolytic" rel="noopener  ugc nofollow" target="_blank"><div class="pe ab fo"><div class="pf ab pg cl cj ph"><h2 class="bd iu gy z fp pi fr fs pj fu fw is bi translated">密码破解-app/密码破解</h2><div class="pk l"><h3 class="bd b gy z fp pi fr fs pj fu fw dk translated">你可以在 Cryptolytic 找到这个项目。Trello 板产品 Canvas Cryptolytic 是一个为初学者修修补补的平台…</h3></div><div class="pl l"><p class="bd b dl z fp pi fr fs pj fu fw dk translated">github.com</p></div></div><div class="pm l"><div class="ps l po pp pq pm pr jz pd"/></div></div></a></div><div class="pa pb gp gr pc pd"><a href="https://en.wikipedia.org/wiki/Relational_database" rel="noopener  ugc nofollow" target="_blank"><div class="pe ab fo"><div class="pf ab pg cl cj ph"><h2 class="bd iu gy z fp pi fr fs pj fu fw is bi translated">关系数据库</h2><div class="pk l"><h3 class="bd b gy z fp pi fr fs pj fu fw dk translated">关系数据库是基于数据关系模型的数字数据库，由 E. F. Codd 于 1970 年提出。一个…</h3></div><div class="pl l"><p class="bd b dl z fp pi fr fs pj fu fw dk translated">en.wikipedia.org</p></div></div><div class="pm l"><div class="pt l po pp pq pm pr jz pd"/></div></div></a></div><div class="pa pb gp gr pc pd"><a href="https://en.wikipedia.org/wiki/ACID" rel="noopener  ugc nofollow" target="_blank"><div class="pe ab fo"><div class="pf ab pg cl cj ph"><h2 class="bd iu gy z fp pi fr fs pj fu fw is bi translated">酸</h2><div class="pk l"><h3 class="bd b gy z fp pi fr fs pj fu fw dk translated">在计算机科学中，ACID(原子性、一致性、隔离性、持久性)是数据库的一组属性…</h3></div><div class="pl l"><p class="bd b dl z fp pi fr fs pj fu fw dk translated">en.wikipedia.org</p></div></div><div class="pm l"><div class="pu l po pp pq pm pr jz pd"/></div></div></a></div></div></div>    
</body>
</html>