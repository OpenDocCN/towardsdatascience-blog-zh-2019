<html>
<head>
<title>Practical Guide to Outlier Detection Methods</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">异常值检测方法实用指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/practical-guide-to-outlier-detection-methods-6b9f947a161e?source=collection_archive---------13-----------------------#2019-09-12">https://towardsdatascience.com/practical-guide-to-outlier-detection-methods-6b9f947a161e?source=collection_archive---------13-----------------------#2019-09-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2cd7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何系统地检测单变量数据集中的异常值</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/81bcbbcec1d4e342e0f44538f1d5b97c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bxIXZz4ds3MEw_Yq"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@tomrico?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tom Paolini</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ddb9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将讨论在<strong class="lb iu"> R Studio </strong>中实现的四种异常检测方法的细节。我将提到异常值是什么，为什么它很重要，为什么会出现异常值。这些方法如下:</p><ol class=""><li id="91a6" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><em class="me">图基的方法</em></li><li id="b1ee" class="lv lw it lb b lc mf lf mg li mh lm mi lq mj lu ma mb mc md bi translated"><em class="me">推特异常检测</em></li><li id="c6c1" class="lv lw it lb b lc mf lf mg li mh lm mi lq mj lu ma mb mc md bi translated">z 分数法</li><li id="e44d" class="lv lw it lb b lc mf lf mg li mh lm mi lq mj lu ma mb mc md bi translated"><em class="me">平均绝对偏差(MADe)法</em></li></ol><p id="b09e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简而言之，离群值是指与数据集中的其他值有很大差异(远远小于或大于)的数据点。异常值可能是因为随机变化，或者可能证明了一些科学上有趣的事情。无论如何，在仔细调查之前，我们不应该简单地排除无关的观察。理解它们以及它们在正确的学习环境中的出现对于能够处理它们是很重要的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/2b20c1b985c35c921252549d968ab0ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*aqJI-qjIdfSxhoUV-oDblA.jpeg"/></div></figure><p id="bcb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="me">为什么会出现离群值？</em>T11】</strong></p><p id="1c80" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">离群值有几个原因:<br/> 1。样本中的一些观察结果是极端的；<br/> 2。数据被不恰当地缩放；<br/> 3。数据输入出错。</p><blockquote class="ml mm mn"><p id="a947" class="kz la me lb b lc ld ju le lf lg jx lh mo lj lk ll mp ln lo lp mq lr ls lt lu im bi translated"><strong class="lb iu">数据集和预处理</strong></p></blockquote><p id="55af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的公共数据集显示了该公司从 2014 年到 2017 年的每周销售额，它提供了“年”、“周”和“销售额”列，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/70822be726b64e1e66e06c3031d84a39.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*HpkkmZVVDAU3MOOKVxAmQg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><strong class="bd ms">Figure 1:</strong> Original Dataset</figcaption></figure><p id="2e3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">数据集的维度是 201 x 3，数据包括 NA 值。我查看了空白值的那一周，然后通过取与数据集中的空白值相同的那一周的观察值的平均值来填补空白。</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="cce4" class="my mz it mu b gy na nb l nc nd">dim(sales_data)<br/>[1] 201   3</span><span id="bf70" class="my mz it mu b gy ne nb l nc nd">sum(is.na(sales_data$Sales))<br/>[1] 4</span></pre><p id="4e37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该曲线图指出了 2014 年至 2017 年土耳其的饮料销售额。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/317580df982efed04677904f00fe851d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*Au33qBKwLFtxTIrYJQceNA.jpeg"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><strong class="bd ms">Figure 2:</strong> Time Series Analysis</figcaption></figure><p id="5882" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，是时候深入研究异常检测方法了。</p></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><ol class=""><li id="68e9" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><strong class="lb iu"> <em class="me">图基氏法(盒须)</em> </strong></li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ca"><img src="../Images/bd76ac22c145c32e69c4cc3c72bdef85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U-rRNlThLDzdpYqnI0RA1w.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><strong class="bd ms">Figure 3: </strong>Box and Whiskers</figcaption></figure><ol class=""><li id="1d0a" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><strong class="lb iu">最小值:</strong>数据集中的最小值(<strong class="lb iu">Q1–1.5 * IQR</strong>)</li><li id="908f" class="lv lw it lb b lc mf lf mg li mh lm mi lq mj lu ma mb mc md bi translated"><strong class="lb iu">第一个四分位数:</strong>低于该值的 25%的数据包含在内(<strong class="lb iu"> Q1 </strong>)</li><li id="ca0b" class="lv lw it lb b lc mf lf mg li mh lm mi lq mj lu ma mb mc md bi translated"><strong class="lb iu">中值:</strong>数字范围中的中间数(<strong class="lb iu"> Q2 </strong>)</li><li id="eb56" class="lv lw it lb b lc mf lf mg li mh lm mi lq mj lu ma mb mc md bi translated"><strong class="lb iu">第三个四分位数:</strong>包含高于该值的 25%的数据(<strong class="lb iu"> Q3 </strong>)</li><li id="d99c" class="lv lw it lb b lc mf lf mg li mh lm mi lq mj lu ma mb mc md bi translated"><strong class="lb iu">最大值:</strong>数据集中的最大值(<strong class="lb iu"> Q3+1.5*IQR </strong>)</li><li id="4f2e" class="lv lw it lb b lc mf lf mg li mh lm mi lq mj lu ma mb mc md bi translated"><strong class="lb iu">四分位范围(IQR): </strong>数据集中的观察范围(<strong class="lb iu"> Q3-Q1 </strong>)</li></ol><p id="c274" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这种方法对于指示分布是否<em class="me">偏斜</em>以及数据集中是否存在潜在的异常观察非常有用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/03bc6517c8382907ebbcf0f207cd6913.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*0JVe712u-NsJUCw4oy9I2Q.jpeg"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><strong class="bd ms">Figure 4: </strong>Box plot of sales dataset</figcaption></figure><p id="9fad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="me">“gg plot”</em>是 R 中功能强大的数据可视化软件包之一；于是我用<em class="me">【gg plot】</em>包来画销售箱线图。如上所示，蓝点表示异常值，红点表示数据集的中值。<strong class="lb iu"> <em class="me">的数据是左倾的。</em> </strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/9d17d17c680bc563331d3137b0e2d218.png" data-original-src="https://miro.medium.com/v2/resize:fit:316/format:webp/1*QU8z61GNk_zaMKz0q6lHFA.png"/></div></figure><p id="8ab6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如左表所示，模型在数据集中检测到<strong class="lb iu"> <em class="me"> 8 个异常值</em> </strong>。我可以明确地说，这些数据点不同于数据集的其余部分。事实上，离群点的销售值在 11.5 万以上。</p><p id="1f8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="me"> 2。推特异常检测</em> </strong></p><p id="5e32" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">AnomalyDetection 是一个开源的 R 包，用于检测异常情况，从统计的角度来看，在存在季节性和潜在趋势的情况下，它是健壮的。AnomalyDetection 包可用于多种环境，如新软件发布、用户参与帖子和金融工程问题。称为季节性混合 ESD 的基本算法建立在用于检测异常的通用 ESD 测试的基础上。它可用于发现全局和<strong class="lb iu">局部异常。</strong></p><p id="8b76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面可以看到，我实现了 Twitter 异常，然后模型通过取 alpha 值为 0.05，与 Tukey 的方法比较，在数据集中发现了<strong class="lb iu"> <em class="me"> 6 个异常值</em> </strong>。异常点在表格中被标识为一个圆圈。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/ccfe9b76573e548803cf0ec8361a85a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FUS7THZGWF7Bo2lfus48Sw.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><strong class="bd ms">Figure 5:</strong> Twitter Anomalies</figcaption></figure><p id="b639" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下表显示了哪些数据点被标记为异常值。该指数累计显示了销售的周数。这些异常值通常属于 2014 年和 2015 年。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/14501a15350238bffc85352929f680dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:456/format:webp/1*lliV8Ixbpy6n4yHxwOgY_Q.png"/></div></figure><p id="d2e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="me"> 3。z 值法</em> </strong></p><p id="37a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Z-score 查找平均值为 0 且标准差为 1 的数据分布。Z 得分法依靠数据的平均值和标准偏差来衡量集中趋势和分散程度。由于平均值和标准偏差受到异常值<strong class="lb iu"><em class="me"/></strong>的严重影响，这在很多情况下是有问题的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/443baf404849e3b9c2ee43ccc06058a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:364/format:webp/1*Yycdr4L3s3B-Gvwdl3wt9A.png"/></div></figure><p id="8239" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从统计学的角度来看，使用 1.96 的临界值将得到 p = 0.05 的等价 p 值。结果，该方法在 201 次观察中检测到 8 个极值点。Z-score 方法在这个数据集上符合盒须现象。这些点大多出现在 2014 年。</p><p id="5d6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="me"> 4。制作方法</em> </strong></p><p id="c662" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在统计学中，<strong class="lb iu">中位数绝对偏差</strong> ( <strong class="lb iu"> MAD </strong>)是单变量数据可变性的稳健度量。此外，MAD 类似于标准偏差，但与标准偏差相比，它对数据中的极值不太敏感。</p><p id="6fab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我首先计算了中值，然后对于每个数据点，我计算了该值和中值之间的距离。MAD 被定义为这些距离的中间值。然后，这个量(MAD)需要乘以 1.4826，以确保它接近实际标准偏差。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/a772b69f3a9107d1b5acc3d6653c2fa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CwoV1SEHpIFU4xRqnGYdEA.png"/></div></div></figure><p id="1481" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过应用下面的公式，使用中位数和 MADe 来检测异常值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/5b96626efa69e6e9922f3d3cb30fce96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TFXSo05shSo-4RmwzRUnGA.jpeg"/></div></div></figure><p id="b33c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">作为该方法的结果，如上所示，发现了 9 个异常值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/4495e3ebd3cfe0c2acc5f7867f29d2d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:556/format:webp/1*VaoL260cd_NXMlnqbBnQuw.png"/></div></figure></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><blockquote class="ml mm mn"><p id="2a8d" class="kz la me lb b lc ld ju le lf lg jx lh mo lj lk ll mp ln lo lp mq lr ls lt lu im bi translated"><strong class="lb iu">期末笔记</strong></p></blockquote><p id="a2a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我执行了四种异常值检测方法，每种方法可能在数据集上产生不同的结果。因此，你必须<em class="me">选择其中一个来观察异常值</em> <strong class="lb iu">或者</strong> <em class="me">可以将所有方法中最常见的点标注为极值点</em>。在这种情况下，在我上面提到的方法中有 6 个共同的极端点。</p><p id="7c33" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一步，在预测建模之前，将通过考虑不同的方式来转换离群点。这将产生更准确的预测模型。</p><p id="a945" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="me">你可以在这里看到所有代码</em></strong><a class="ae ky" href="https://github.com/abdullahsaka/OutlierDetection" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"><em class="me"/></strong></a><strong class="lb iu"><em class="me">下一个故事即将到来……</em></strong></p></div></div>    
</body>
</html>