<html>
<head>
<title>Precision and recall — a simplified view</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">精确度和召回率—一个简化的视图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/precision-and-recall-a-simplified-view-bc25978d81e6?source=collection_archive---------8-----------------------#2019-12-02">https://towardsdatascience.com/precision-and-recall-a-simplified-view-bc25978d81e6?source=collection_archive---------8-----------------------#2019-12-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="a0ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">理解精确度和召回率对于完善任何机器学习模型都是至关重要的。这是微调模型以产生准确结果所需的技能。少数型号需要更高的精度，而少数型号可能需要更高的召回率。在文章的最后，我们还将讨论我们需要什么。这篇文章旨在减少苹果和橘子的精确度和召回率。我是认真的，所以让我们举一个苹果分类器的例子。其主要目的是对苹果和橘子进行分类。</p><p id="1c2c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">假设有一个巨大的农场，里面种满了苹果树和橘子树。农场的主人想要建立一个能够正确预测苹果和橙子的分类器，这样他就可以对它们进行分类并出售。此外，与橙子相比，苹果的价格要高得多，因此他特别希望构建一个能够检测苹果的分类器。在这一过程中，他建造了一个能够对苹果和橘子进行分类的探测器，并随机抽取了 13 种水果样本进行分类。因为他更专注于预测苹果(因为它们很贵)，该模型将苹果归类为阳性，将橙子归类为阴性。</p><p id="0f55" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">他制作了如下图表来检查模型的表现:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi kl"><img src="../Images/444a549b0160d7493c6bb2a4286125ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*-cqybX62YNR0ttlvJshfsw.jpeg"/></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk">confusion matrix</figcaption></figure><p id="57a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">真正的肯定:这些是模型正确预测的苹果。</p><p id="3c8c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kx">误报:有模型预测为苹果的橙子。</em></p><p id="2210" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kx">假阴性:有模型预测为橙子的苹果。</em></p><p id="f8a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">真正的否定:有模型正确预测的橙子。</p><h1 id="0d45" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">从图表中我们可以得出以下推论:</h1><ol class=""><li id="77a4" class="lw lx iq jp b jq ly ju lz jy ma kc mb kg mc kk md me mf mg bi translated">模型将两个橙子归类为苹果</li><li id="dfef" class="lw lx iq jp b jq mh ju mi jy mj kc mk kg ml kk md me mf mg bi translated">模型把 3 个苹果归类为橘子</li><li id="18fe" class="lw lx iq jp b jq mh ju mi jy mj kc mk kg ml kk md me mf mg bi translated">模型正确地分类了 5 个苹果</li><li id="fc0b" class="lw lx iq jp b jq mh ju mi jy mj kc mk kg ml kk md me mf mg bi translated">模型正确地分类了三个橙子</li></ol></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="026a" class="ky kz iq bd la lb mt ld le lf mu lh li lj mv ll lm ln mw lp lq lr mx lt lu lv bi translated">让我们修改图表，以理解精确度并正确回忆</h1><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi my"><img src="../Images/519760407ff110d4b8737eac8c0b4f97.png" data-original-src="https://miro.medium.com/v2/resize:fit:602/format:webp/1*UW6nGdJ_NNMq_clh4U8hsg.jpeg"/></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk">modified confusion matrix</figcaption></figure><p id="4b1f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">图像的左侧包含实际苹果的预测结果。图像的右侧包含实际橙子的预测结果。</p><p id="8b51" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上图帮助我们从不同的角度了解模型的预测:</p><ol class=""><li id="df94" class="lw lx iq jp b jq jr ju jv jy mz kc na kg nb kk md me mf mg bi translated">在它归类为苹果的 8 个价值中，只有 5 个是真正的苹果，3 个是橙子。</li><li id="55b0" class="lw lx iq jp b jq mh ju mi jy mj kc mk kg ml kk md me mf mg bi translated">在它归类为橙子的 5 个值中，只有 2 个是真正的橙子，3 个是苹果。</li></ol><p id="8d4f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们深入精确地回忆一下。关于上图。</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="fa1a" class="ky kz iq bd la lb mt ld le lf mu lh li lj mv ll lm ln mw lp lq lr mx lt lu lv bi translated">精确</h1><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/8be2f088b4cd07f6227b28bd54f0d4bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/1*02BZdT7NmQxjb4WzSiGpyw.png"/></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk">precision</figcaption></figure><p id="e185" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是模型做出的正确预测的数量。简单来说，就是:</p><p id="5671" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">模型预测正确的苹果数量/模型预测正确的苹果和橙子数量</p><p id="e827" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它不考虑模型所做的错误预测。</p><p id="4186" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">精度公式:</p><p id="ac1a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">真阳性数/(真阳性数+假阳性数)</p><p id="9965" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">苹果预测值的精度:5/(5+2) = 5/7 = 0.714</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="87bd" class="ky kz iq bd la lb mt ld le lf mu lh li lj mv ll lm ln mw lp lq lr mx lt lu lv bi translated">回忆</h1><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nc"><img src="../Images/8c7b96117700c93457ed4330192e3d19.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/1*GpHkA5UtKHptaSvumsom7A.png"/></div></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk">recall</figcaption></figure><p id="f984" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它是模型对当前正值总数做出的正确预测的数量。简单来说，就是:</p><p id="5f0b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">模型正确预测的苹果数量/苹果总数</p><p id="ca88" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">苹果总数是发送到系统的苹果数量，即 8 个。</p><p id="3a8c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它考虑了模型做出的错误预测。召回的公式:</p><p id="1c72" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">真阳性数/(假阴性数+真阳性数)</p><p id="36d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于上面的例子，它是:5/(5+3) = 5/8 = 0.625</p><p id="57ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，我们知道农场主人创建的模型精度高，但召回率低！</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="bace" class="ky kz iq bd la lb mt ld le lf mu lh li lj mv ll lm ln mw lp lq lr mx lt lu lv bi translated">什么时候我们需要高精度或者高召回率？</h1><p id="8f42" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy nh ka kb kc ni ke kf kg nj ki kj kk ij bi translated">当您需要对输出敏感的预测时，模型需要高召回率。例如，预测癌症或预测恐怖分子需要高召回率，换句话说，你也需要覆盖假阴性。如果非癌性肿瘤被标记为癌性，这是可以的，但是癌性肿瘤不应该被标记为非癌性的。</p><p id="b5b4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">同样，在推荐引擎、垃圾邮件检测等地方，我们也需要高精度。你不在乎假阴性，而是更关注真阳性和假阳性。如果垃圾邮件进入收件箱文件夹是可以的，但是真正重要的邮件不应该进入垃圾邮件文件夹。</p><p id="2c38" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">关于开头提到的例子，为了使农场主人的利润最大化，他不应该让苹果被误归类为橘子。所以，模型需要苹果的高召回率。</p><h1 id="bbb7" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">如何调优一个机器学习模型来调整到高精度或者召回？</h1><p id="1ea9" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy nh ka kb kc ni ke kf kg nj ki kj kk ij bi translated">如果它是一个神经网络，分配一个适当的损失函数，该函数对变化敏感，不会对值进行不必要的舍入。主要关键是您分配给神经网络最后一层的阈值。如果是二元分类的情况，阈值需要以最大化召回或精确度的方式设置，无论哪种需要。如果您想最大化召回率，请将阈值设置为低于 0.5，即大约 0.2。比如大于 0.3 是苹果，0.1 不是苹果。这样会增加系统的召回。为了精确起见，可以将阈值设置为更高的值，例如 0.6 或 0.7。这样你就可以调整神经网络的精确度和召回率。</p><p id="9e11" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果是任何其他机器学习模型，您需要调整超参数和概率阈值，以实现更高的精度或召回率。</p><p id="0819" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢您的阅读！☺</p></div></div>    
</body>
</html>