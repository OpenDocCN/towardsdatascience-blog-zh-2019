<html>
<head>
<title>Building a WiFi spots Map of networks around you with WiGLE and R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 WiGLE 和 R 建立一个你周围网络的 WiFi 点地图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/building-a-wifi-spots-map-of-networks-around-you-with-wigle-and-r-d01a73b1172d?source=collection_archive---------25-----------------------#2019-02-19">https://towardsdatascience.com/building-a-wifi-spots-map-of-networks-around-you-with-wigle-and-r-d01a73b1172d?source=collection_archive---------25-----------------------#2019-02-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/40e5c5d93b4bac2c5388c8d4b74251e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8hx8mZ2H4UnsnfIGMRUq4Q.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Map generated using the below code</figcaption></figure><p id="bc1e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">探索我们周围的世界总是很有趣——当你以数据科学家的<strong class="ke ir"> <em class="la">视角</em> </strong>探索世界时，那就更有趣了。</p><p id="352b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在此分析中，我们将确定我们周围开放的 WiFi 网络，并将它们映射到交互式地图上。</p><h1 id="8784" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">工具包</h1><ul class=""><li id="87a8" class="lz ma iq ke b kf mb kj mc kn md kr me kv mf kz mg mh mi mj bi translated"><a class="ae mk" href="https://github.com/hrbrmstr/wiglr" rel="noopener ugc nofollow" target="_blank"><em class="la">wig lr</em></a><em class="la"/>R 包，用于与 WiGLE API 接口</li><li id="8f36" class="lz ma iq ke b kf ml kj mm kn mn kr mo kv mp kz mg mh mi mj bi translated">用于数据收集的 WiGLE API</li><li id="5a74" class="lz ma iq ke b kf ml kj mm kn mn kr mo kv mp kz mg mh mi mj bi translated"><a class="ae mk" href="https://www.tidyverse.org/" rel="noopener ugc nofollow" target="_blank"><em class="la">tidy verse</em></a><em class="la"/>R 包用于数据分析&amp;操纵</li><li id="d683" class="lz ma iq ke b kf ml kj mm kn mn kr mo kv mp kz mg mh mi mj bi translated"><a class="ae mk" href="https://rstudio.github.io/leaflet/" rel="noopener ugc nofollow" target="_blank"> <em class="la">传单</em> </a> <em class="la"> </em> R 用于绘制互动地图的包(界面为 fleet . js)</li></ul><p id="a836" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">wiglr 是由<em class="la"> Bob Rudis </em>开发的 R 包，他的名字是<a class="ae mk" href="https://rud.is/b/about/" rel="noopener ugc nofollow" target="_blank"> hrbrmstr </a>。他是 R 的超级用户之一，同时也积极参与开发新的 R 包并写博客。</p><h1 id="50a3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">先决条件</h1><p id="d6b7" class="pw-post-body-paragraph kc kd iq ke b kf mb kh ki kj mc kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated">在我们开始编码之前(不管怎样，只是一堆代码)，我们需要做两件重要的事情。</p><h2 id="2246" class="mt lc iq bd ld mu mv dn lh mw mx dp ll kn my mz lp kr na nb lt kv nc nd lx ne bi translated">安装所有需要的 R 包</h2><p id="6ad3" class="pw-post-body-paragraph kc kd iq ke b kf mb kh ki kj mc kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated"><code class="fe nf ng nh ni b">wiglr</code>在 CRAN 上尚不可用，因此必须根据您的喜好从 Github/Gitlab 安装。下面是代码，你如何使用<code class="fe nf ng nh ni b">devtools</code>包从 Github 安装它</p><pre class="nj nk nl nm gt nn ni no np aw nq bi"><span id="8f6e" class="mt lc iq ni b gy nr ns l nt nu"># install.packages('devtools') # install devtools if not available<br/>devtools::install_github(“hrbrmstr/wiglr”)</span></pre><p id="ebe1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">上面提到的其他实用程序包:</p><pre class="nj nk nl nm gt nn ni no np aw nq bi"><span id="235d" class="mt lc iq ni b gy nr ns l nt nu">install.packages('tidyverse') # ideally dplyr is what we'd need<br/>install.packages('leaflet') </span></pre><h2 id="599e" class="mt lc iq bd ld mu mv dn lh mw mx dp ll kn my mz lp kr na nb lt kv nc nd lx ne bi translated">正在获取 WiGLE API 令牌</h2><ul class=""><li id="fdc2" class="lz ma iq ke b kf mb kj mc kn md kr me kv mf kz mg mh mi mj bi translated">在 wigle.net<a class="ae mk" href="https://wigle.net/" rel="noopener ugc nofollow" target="_blank">创建您的账户</a></li><li id="157e" class="lz ma iq ke b kf ml kj mm kn mn kr mo kv mp kz mg mh mi mj bi translated">登录后，从<a class="ae mk" href="https://wigle.net/account" rel="noopener ugc nofollow" target="_blank">你的账户页面</a>获取你的 API 令牌(点击<em class="la">显示令牌</em>)</li><li id="2fa2" class="lz ma iq ke b kf ml kj mm kn mn kr mo kv mp kz mg mh mi mj bi translated">打开 RStudio，将您的(<em class="la"> "Encoded for use" </em> ) API 令牌设置为环境变量，如下所示:</li></ul><pre class="nj nk nl nm gt nn ni no np aw nq bi"><span id="12f9" class="mt lc iq ni b gy nr ns l nt nu">Sys.setenv(WIGLE_API_KEY = "here_goes_my_encoded_token")</span></pre><p id="1350" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">至此，我们已经具备了先决条件，可以开始了！</p><h1 id="fbfb" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">起飞</h1><h2 id="4a31" class="mt lc iq bd ld mu mv dn lh mw mx dp ll kn my mz lp kr na nb lt kv nc nd lx ne bi translated">加载库</h2><p id="0c77" class="pw-post-body-paragraph kc kd iq ke b kf mb kh ki kj mc kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated">和其他 R 项目一样，第一步是加载所有需要的库。</p><pre class="nj nk nl nm gt nn ni no np aw nq bi"><span id="a0f6" class="mt lc iq ni b gy nr ns l nt nu">library(wiglr)<br/>library(tidyverse)<br/>library(leaflet)</span></pre><h2 id="e22f" class="mt lc iq bd ld mu mv dn lh mw mx dp ll kn my mz lp kr na nb lt kv nc nd lx ne bi translated">我们周围景点的一般统计数据</h2><p id="f89a" class="pw-post-body-paragraph kc kd iq ke b kf mb kh ki kj mc kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated">在这一步，我们将给出边界框(以纬度和经度的形式)并提取我们周围的 WiFi 网络的细节。</p><pre class="nj nk nl nm gt nn ni no np aw nq bi"><span id="10c8" class="mt lc iq ni b gy nr ns l nt nu"># This is for Bengaluru, India - change it according to where you're<br/>wifi_box &lt;- wigle_bbox_search(12.7585, 13.1105, 77.5477, 77.8431) </span></pre><p id="81e4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">样本输出</strong></p><pre class="nj nk nl nm gt nn ni no np aw nq bi"><span id="94d7" class="mt lc iq ni b gy nr ns l nt nu">&gt; wifi_box<br/>$success<br/>[1] TRUE</span><span id="a28b" class="mt lc iq ni b gy nv ns l nt nu">$totalResults<br/>[1] 252098</span><span id="06a6" class="mt lc iq ni b gy nv ns l nt nu">$search_after<br/>[1] 552772</span><span id="c6a2" class="mt lc iq ni b gy nv ns l nt nu">$first<br/>[1] 1</span><span id="4995" class="mt lc iq ni b gy nv ns l nt nu">$last<br/>[1] 100</span><span id="b071" class="mt lc iq ni b gy nv ns l nt nu">$resultCount<br/>[1] 100</span><span id="69b6" class="mt lc iq ni b gy nv ns l nt nu">$results<br/># A tibble: 100 x 25<br/>   trilat trilong ssid    qos transid channel firsttime lasttime lastupdt housenumber<br/> *  &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt;     &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;      <br/> 1   12.9    77.6 oakd…     0 201701…       6 2017-01-… 2017-01… 2017-01… 305, 1st M…<br/> 2   12.9    77.6 Sham…     0 201606…      11 2001-01-… 2016-06… 2016-06… ""         <br/> 3   13.0    77.7 PPAN…     0 201303…       1 2013-03-… 2013-03… 2013-03… ""</span></pre><p id="38f2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">它只是一个列表(JSON 响应的输出),包含实际结果和一些元数据。正如您在上面的示例输出中看到的，我们的关注点是<code class="fe nf ng nh ni b">results</code>。</p><h1 id="1d5e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">巡航</h1><p id="c84a" class="pw-post-body-paragraph kc kd iq ke b kf mb kh ki kj mc kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated">说完了，就该画我们承诺要画的交互图了(本文开头)。</p><p id="f282" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">下面是我们从<code class="fe nf ng nh ni b">wifi_box</code>中取出<code class="fe nf ng nh ni b">results</code>并创建一个新变量<code class="fe nf ng nh ni b">labs</code>的代码(它将在弹出标签的后续行中使用)。这些数据被进一步输入<code class="fe nf ng nh ni b">leaflet()</code>进行地图创建，我们添加一个基础图层，然后在给定的经度和纬度添加圆形标记。</p><p id="aca9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">颜色编码是为了让我们表示 WiFi 网络的安全性是<em class="la">无</em>(无安全性)—红色、<em class="la">未知— </em>黄色和其他(如 WEP、WPA) —蓝色。</p><pre class="nj nk nl nm gt nn ni no np aw nq bi"><span id="4083" class="mt lc iq ni b gy nr ns l nt nu">wifi_box$results %&gt;% <br/>  mutate(labs = sprintf("SSID: &lt;code&gt;%s&lt;/code&gt;&lt;br/&gt;Encryption: %s", ssid, encryption)) %&gt;% <br/>  leaflet() %&gt;% <br/>  #addTiles() %&gt;% <br/>  addProviderTiles(providers$Stamen.Toner) %&gt;% <br/>  #addProviderTiles(providers$OpenStreetMap, options = providerTileOptions(opacity = 0.4)) %&gt;% <br/>  addCircleMarkers(~trilong, ~trilat, <br/>                   radius = 10, <br/>                   popup = ~labs, <br/>                   color = ifelse(<br/>                     wifi_box$results$encryption == "none","red",<br/>                                  ifelse(<br/>                                    wifi_box$results$encryption == "unknown",<br/>                                    "yellow","blue")))</span></pre><p id="8ca4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这给了我们这个漂亮的情节(当你在 RStudio 中绘图时，它实际上是交互式的)</p><figure class="nj nk nl nm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/40e5c5d93b4bac2c5388c8d4b74251e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8hx8mZ2H4UnsnfIGMRUq4Q.png"/></div></div></figure><p id="ef35" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">你可以使用不同的<code class="fe nf ng nh ni b">names(providers)</code>值来选择你喜欢的基层/地图主题。</p><h1 id="2f58" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">安全着陆</h1><p id="d367" class="pw-post-body-paragraph kc kd iq ke b kf mb kh ki kj mc kl km kn mq kp kq kr mr kt ku kv ms kx ky kz ij bi translated">这样，我们就成功地绘制了我们周围的 WiFi 网络——以及它的 SSID 和安全加密。这在检测和通知可能被恶意方攻击的没有安全性的开放网络时非常有用。</p><h1 id="ccc6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">参考</h1><ul class=""><li id="f670" class="lz ma iq ke b kf mb kj mc kn md kr me kv mf kz mg mh mi mj bi translated"><a class="ae mk" href="https://rud.is/b/2019/02/18/in-dev-wigle-your-way-into-a-hotspot-with-wiglr/" rel="noopener ugc nofollow" target="_blank">在开发中:使用 wiglr 进入热点</a></li><li id="d0ad" class="lz ma iq ke b kf ml kj mm kn mn kr mo kv mp kz mg mh mi mj bi translated">我的 github 上使用的完整代码<a class="ae mk" href="https://github.com/amrrs/blogpost_codes/blob/master/analyse_wifi_networks.R" rel="noopener ugc nofollow" target="_blank"/></li><li id="77b2" class="lz ma iq ke b kf ml kj mm kn mn kr mo kv mp kz mg mh mi mj bi translated"><a class="ae mk" href="https://wigle.net/" rel="noopener ugc nofollow" target="_blank">威格尔官方网站</a></li></ul><p id="692e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">结束语:</strong> <em class="la">如果您对开源感兴趣，请</em> <a class="ae mk" href="https://github.com/hrbrmstr/wiglr" rel="noopener ugc nofollow" target="_blank"> <em class="la">贡献此包</em> </a> <em class="la">以成功部署在 CRAN 上，使其能够面向大众</em></p></div></div>    
</body>
</html>