<html>
<head>
<title>Easily Web Scrape and Summarize News Articles Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 轻松抓取和总结新闻文章</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/easily-scrape-and-summarize-news-articles-using-python-dfc7667d9e74?source=collection_archive---------11-----------------------#2019-07-14">https://towardsdatascience.com/easily-scrape-and-summarize-news-articles-using-python-dfc7667d9e74?source=collection_archive---------11-----------------------#2019-07-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/6589210d600acd115588e340889b4632.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eIRJ7hOFhrfyftvgTKKcQg.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">There’s lots of news to read and lots of coffee to drink!</figcaption></figure><p id="155d" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在今天的数字世界中，我们被无尽的信息轰炸。我们有无限滚动的社交媒体和 24 小时新闻循环。因此，有大量的新闻需要关注，我们必须能够快速消化！</p><p id="691d" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">因此，让我们来做一个练习，将新闻文章压缩到更容易理解的大小。</p><p id="5cba" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们将使用<em class="ld"> requests </em>和<em class="ld"> BeautifulSoup </em>包抓取一篇示例文章，然后我们将使用优秀的<em class="ld"> gensim </em>库对其进行总结。你可以通过在我的 Github 上下载<a class="ae le" href="https://github.com/chaimgluck/blog-posts/blob/master/scrape-news/scraping-and-summarizing-news-articles.ipynb" rel="noopener ugc nofollow" target="_blank">这个 Jupyter 笔记本</a>来参与互动。</p><p id="33d2" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">让我们开始吧！</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="32ad" class="lv lw it lr b gy lx ly l lz ma"># Imports<br/>import requests<br/>from bs4 import BeautifulSoup<br/>from gensim.summarization import summarize</span></pre><p id="a4f7" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在我们来挑选一篇有趣的文章:</p><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mb"><img src="../Images/624fae21ffaf91b99f61b1b102e5f771.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h6ZMsw4FDctfmP_B6beQNg.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk"><a class="ae le" href="https://www.npr.org/2019/07/10/740387601/university-of-texas-austin-promises-free-tuition-for-low-income-students-in-2020" rel="noopener ugc nofollow" target="_blank">Link - I want to read it. But I bet it’s TOO long!</a></figcaption></figure><p id="006c" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在我们有了一篇文章，我们将检索它的内容:</p><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="73a1" class="lv lw it lr b gy lx ly l lz ma"># Retrieve page text<br/>url = '<a class="ae le" href="https://www.npr.org/2019/07/10/740387601/university-of-texas-austin-promises-free-tuition-for-low-income-students-in-2020" rel="noopener ugc nofollow" target="_blank">https://www.npr.org/2019/07/10/740387601/university-of-texas-austin-promises-free-tuition-for-low-income-students-in-2020</a>'<br/>page = requests.get(url).text</span></pre></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h2 id="96be" class="lv lw it bd mc md me dn mf mg mh dp mi kq mj mk ml ku mm mn mo ky mp mq mr ms bi translated">网页抓取:</h2><p id="faa5" class="pw-post-body-paragraph kf kg it kh b ki mt kk kl km mu ko kp kq mv ks kt ku mw kw kx ky mx la lb lc im bi translated">现在我们刮吧！</p><p id="4799" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">首先，我们将把页面内容转换成一个 BeautifulSoup 对象，这将允许我们解析 HTML 标签。</p><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="0f9b" class="lv lw it lr b gy lx ly l lz ma"># Turn page into BeautifulSoup object to access HTML tags<br/>soup = BeautifulSoup(page)</span></pre><p id="7f01" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">然后，我们需要找出哪些 HTML 标签包含文章的标题和正文。对于一个伟大的 HTML 入门，看看<a class="ae le" href="https://html.com/" rel="noopener ugc nofollow" target="_blank">HTML.com</a>。</p><p id="fa74" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">为此，我们将使用 Google Chrome 出色的<em class="ld"> Inspect </em>工具。在<a class="ae le" href="https://www.npr.org/2019/07/10/740387601/university-of-texas-austin-promises-free-tuition-for-low-income-students-in-2020" rel="noopener ugc nofollow" target="_blank">新标签</a>中打开我们选择的新闻文章，在页面上点击右键，从下拉菜单中选择<em class="ld"> Inspect </em>。这将调出<em class="ld">检查</em>工具，如下所示:</p><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/71d3c305f3f6889862186eec7559579a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_SB5emkwgHiT-IkNwV0Ymg.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">If for some reason you’re not using Chrome, now’s the time to start</figcaption></figure><p id="3083" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">单击上面概述的小按钮，找到与您在页面上看到的任何内容相对应的 HTML 标签。</p><p id="a5e9" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">当您将鼠标悬停在页面上您想要选择的文本上时，在本例中是文章的标题和正文，您将看到哪些 HTML 标签用于标识该文本。</p><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/e68ec07416cd93dac1eb775f4e6d6702.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o1hXorX-W6iwTHhz37KO8Q.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Headline is identified with the &lt;h1&gt; tag</figcaption></figure><p id="c9e2" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">文章标题被<h1>标签包围。我们将选择页面上的第一个<h1>标签，如下所示:</h1></h1></p><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="12ab" class="lv lw it lr b gy lx ly l lz ma"># Get headline<br/>headline = soup.find('h1').get_text()</span></pre><p id="301f" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">文章的正文由<p>标签包围。这一次我们必须找到页面上包含的&lt; p &gt;标签中的所有标签，因为文章的每个段落都包含在一个&lt; p &gt;标签中。</p></p><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="0820" class="lv lw it lr b gy lx ly l lz ma"># Get text from all &lt;p&gt; tags.<br/>p_tags = soup.find_all('p’)<br/># Get the text from each of the “p” tags and strip surrounding whitespace.<br/>p_tags_text = [tag.get_text().strip() for tag in p_tags]</span></pre><p id="68d8" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如果您检查我们在'<em class="ld"> p_tags_text' </em>变量中检索到的文本，您会注意到有些文本不是来自主文章，比如作者的名字和一些图像标题。因为它们也是用&lt; p &gt;标签描述的，所以我们也选择了它们。为了清理我们所拥有的文本，我们可以使用一些快速列表理解来过滤掉我们所知道的不属于主要文章的文本类型。</p><p id="5627" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在本文中，图像标题包含换行符'<em class="ld"> \n </em>'来添加空格。因为我们知道文章中的实际句子不会有随机的换行符，所以我们可以安全地删除它们。类似地，我们可以删除不包含句号的文本，因为我们知道文章中任何合适的句子都会包含句号。这将漏掉作者的名字和其他一些不相关的信息。</p><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="ecae" class="lv lw it lr b gy lx ly l lz ma"># Filter out sentences that contain newline characters '\n' or don't contain periods.<br/>sentence_list = [sentence for sentence in p_tags_text if not '\n' in sentence]<br/>sentence_list = [sentence for sentence in sentence_list if '.' in sentence]<br/># Combine list items into string.<br/>article = ' '.join(sentence_list)</span></pre></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h2 id="12db" class="lv lw it bd mc md me dn mf mg mh dp mi kq mj mk ml ku mm mn mo ky mp mq mr ms bi translated">总结:</h2><p id="2651" class="pw-post-body-paragraph kf kg it kh b ki mt kk kl km mu ko kp kq mv ks kt ku mw kw kx ky mx la lb lc im bi translated">现在我们有了文章的正文，我们可以对它进行总结了。</p><p id="3f24" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><em class="ld"> Gensim </em>是<em class="ld"> </em>一个用于各种 NLP 任务的优秀 Python 包。它包括一个相当强大的摘要功能，易于使用。它是基于<a class="ae le" href="https://arxiv.org/pdf/1602.03606.pdf" rel="noopener ugc nofollow" target="_blank">本文</a> ( <a class="ae le" href="https://radimrehurek.com/gensim/summarization/summariser.html" rel="noopener ugc nofollow" target="_blank">文档</a>)的发现的<a class="ae le" href="https://web.eecs.umich.edu/~mihalcea/papers/mihalcea.emnlp04.pdf" rel="noopener ugc nofollow" target="_blank"> TextRank 算法</a>的变体。正如您将看到的，我们可以在一行代码中使用它:</p><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="de9b" class="lv lw it lr b gy lx ly l lz ma">summary = summarize(article_text, ratio=0.3)</span></pre><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/282fc8d8b777f103244a73b85f17198c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LTVl8N1L5JstcnWBkOIcZg.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">That’s pretty good!</figcaption></figure><p id="05fc" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">你有它！我们已经检索了文章的标题，并创建了内容摘要。现在你可以用大约 1/3 的时间理解文章的主旨，然后继续你的一天。</p><p id="3442" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在我的下一篇文章中，我将通过创建一个命令行实用程序来扩展这个功能，该实用程序可以抓取和总结一篇文章，并自动将摘要通过电子邮件发送给您自己。敬请期待！</p></div></div>    
</body>
</html>