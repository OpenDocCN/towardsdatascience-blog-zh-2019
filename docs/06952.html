<html>
<head>
<title>Making Artistic Maps with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Python 制作艺术地图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/making-artistic-maps-with-python-9d37f5ea8af0?source=collection_archive---------8-----------------------#2019-10-02">https://towardsdatascience.com/making-artistic-maps-with-python-9d37f5ea8af0?source=collection_archive---------8-----------------------#2019-10-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="6234" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">PYTHON 地图</h2><div class=""/><div class=""><h2 id="3b9d" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">岩石粉笔 Jayhawk！</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/b79fc50ba4c09fbbcccfcbcf3167248d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zPaZ3PZBbgs5QRGVr9CQZA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Streets of Lawrence, Kansas colored by their length.</figcaption></figure><p id="72d9" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">目的:</strong>我们将学习如何使用来自<a class="ae md" href="http://download.geofabrik.de/" rel="noopener ugc nofollow" target="_blank"> OpenStreetMap </a>的数据用 Python 构建地图。</p><p id="ad95" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">材料和方法:</strong>为了获取我们的数据，我们将使用<a class="ae md" href="https://github.com/gboeing/osmnx" rel="noopener ugc nofollow" target="_blank"> OSMNX </a> Python 包。然后，我们将对检索到的数据进行解包，并根据街道的长度为每条街道分配一种颜色。然后使用 OSMNX 功能将数据可视化。最后，我们应用某些调整，使地图美观。</p><p id="10ba" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">注意:</strong>如果你是从零开始，我会建议你按照这篇<a class="ae md" href="https://medium.com/i-want-to-be-the-very-best/installing-keras-tensorflow-using-anaconda-for-machine-learning-44ab28ff39cb" rel="noopener">文章</a>安装所有必要的库。这篇文章的全部内容可以在我的<a class="ae md" href="https://github.com/frank-ceballos/MakingArtisticMapsWithPython" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。欢迎你来叉它。最后，为了更好地理解这篇文章，请在 PC 或 Mac 上用大显示器查看，这样你就可以看到地图的细节。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi me"><img src="../Images/a3bf26eafb80e97c61869724f87fb908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*b8GEhMFGnOn3lW9i.png"/></div></div></figure><h1 id="5cc4" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">作者的一句话</h1><p id="3ae2" class="pw-post-body-paragraph lh li it lj b lk mx kd lm ln my kg lp lq mz ls lt lu na lw lx ly nb ma mb mc im bi translated"><a class="ae md" href="https://github.com/gboeing/osmnx" rel="noopener ugc nofollow" target="_blank"> OSMNX </a> Python 包由 Geoff Boeing 编写，可用于从<a class="ae md" href="http://download.geofabrik.de/" rel="noopener ugc nofollow" target="_blank"> OpenStreetMap </a>中检索、建模、分析和可视化街道网络和其他空间数据。</p><p id="b81c" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">您可以尝试使用 Anaconda 安装 OSMNX 包，但是，您最终可能会获得一个旧版本的 OSMNX，并且本文中的所有代码都将无法工作。我建议你访问 Geoff Boeing Github <a class="ae md" href="https://github.com/gboeing/osmnx" rel="noopener ugc nofollow" target="_blank">这里</a>并下载这个包的最新版本到你的机器上。完成后，将 OSMNX 文件夹放在工作目录中。您的工作目录应该如下所示:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/5ee92dd6d9c975117922b44978c79a1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*ocfCeCGj9802RKKxRloDag.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><strong class="bd nd">Figure 1 </strong>— Working directory with the OSMNX package.</figcaption></figure><p id="5945" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果你比我聪明，并且能够使用 conda 或 pip 命令安装 OS mnx 0.11 版，请发表评论。我想把这一步从流程中去掉。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi me"><img src="../Images/a3bf26eafb80e97c61869724f87fb908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*b8GEhMFGnOn3lW9i.png"/></div></div></figure><h1 id="c87d" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">导入库</h1><p id="5745" class="pw-post-body-paragraph lh li it lj b lk mx kd lm ln my kg lp lq mz ls lt lu na lw lx ly nb ma mb mc im bi translated">让我们从导入我们需要的所有库开始。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ne nf l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><strong class="ak">Script 1</strong> — Importing libraries.</figcaption></figure><p id="a0ed" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果你有任何问题，让我们用 Anaconda 安装缺失的包来解决。我将只讨论不常用的包，因为很可能你已经安装了 Pandas、Matplotlib 和其他广泛使用的包。</p><p id="7853" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">打开 Anaconda 提示符并导航到所需的 conda 环境。</p><p id="f4d6" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">要安装用于创建、操作和研究复杂网络的网络，请运行:</p><p id="6f03" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe ng nh ni nj b">conda install -c anaconda networkx</code></p><p id="49c7" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">要安装<a class="ae md" href="http://geopandas.org/" rel="noopener ugc nofollow" target="_blank"> GeoPandas </a>这是一个开源包，它通过允许对几何类型运行空间操作来扩展 Pandas 数据框的功能:</p><p id="cdc1" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe ng nh ni nj b">conda install geopandas</code></p><p id="ca0e" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">安装<a class="ae md" href="https://pillow.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> PIL </a>一个用于图像处理的 Python 包:</p><p id="a580" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe ng nh ni nj b">conda install -c anaconda pillow</code></p><p id="ec2b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">应该可以了。在我们继续之前，让我们运行一个健全性检查，以确保我们使用的是相同版本的包:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ne nf l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><strong class="ak">Scrip 2 </strong>— Checking version of packages.</figcaption></figure><p id="09bf" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">脚本 2 </strong>的输出为:</p><pre class="ks kt ku kv gt nk nj nl nm aw nn bi"><span id="e7ac" class="no mg it nj b gy np nq l nr ns">The NetworkX package is version 2.3<br/>The OSMNX package is version 0.11dev<br/>The Request package is version 2.22.0<br/>The PIL package is version 6.1.0</span></pre><p id="cd9b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">您可能使用这些包的不同版本而逃脱，但是如果您稍后得到一个讨厌的错误，罪魁祸首可能是您正在使用的不同的包。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi me"><img src="../Images/a3bf26eafb80e97c61869724f87fb908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*b8GEhMFGnOn3lW9i.png"/></div></div></figure><h1 id="087e" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">获取我们的数据</h1><p id="ab9b" class="pw-post-body-paragraph lh li it lj b lk mx kd lm ln my kg lp lq mz ls lt lu na lw lx ly nb ma mb mc im bi translated">我们将为堪萨斯州的劳伦斯市制作一张地图——一个我所热爱的城市。</p><p id="df1d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">为了制作地图，我们需要一些空间数据。您可以通过访问此<a class="ae md" href="http://download.geofabrik.de/" rel="noopener ugc nofollow" target="_blank">站点</a>下载 OpenStreetMap 数据。然而，我发现的最简单的方法是使用 OSMNX 包。让我告诉你这有多简单:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ne nf l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><strong class="ak">Script 3</strong> — Grabbing spatial data.</figcaption></figure><p id="8d02" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">因此，通过两行代码，您可以提取任何城市的网络。<code class="fe ng nh ni nj b">network_type</code>变量用来描述你要抓取的网络类型。在<strong class="lj jd">脚本 3 </strong>中，我们将<code class="fe ng nh ni nj b">network_type</code>变量设置为“全部”。这意味着我们将获取人行道、街道、高速公路等的数据。为了获取可行驶街道的相关数据，将<strong class="lj jd">脚本 3 </strong>第 8 行的<code class="fe ng nh ni nj b">network_type</code>变量设置为“行驶”。如果您想获取人行道的数据，请将<code class="fe ng nh ni nj b">network_type</code>设置为“步行”。</p><p id="0eca" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">旁白</strong>:如果您想提取德克萨斯州达拉斯和德克萨斯州阿灵顿的数据，您可以运行以下脚本:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ne nf l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><strong class="ak">Script 3</strong>a— Grabbing spatial data for two cities.</figcaption></figure><p id="1eaf" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">脚本 3a 可能需要一些时间来运行，因为达拉斯地区很大。如果您想要更多城市的数据，只需将它们添加到<code class="fe ng nh ni nj b">places</code>列表中。我建议您访问 OSMNX <a class="ae md" href="https://github.com/gboeing/osmnx-examples/tree/master/notebooks" rel="noopener ugc nofollow" target="_blank">示例 Jupyter 笔记本</a>来了解关于这个包的更多功能——在本文中我几乎没有展示它的功能。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi me"><img src="../Images/a3bf26eafb80e97c61869724f87fb908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*b8GEhMFGnOn3lW9i.png"/></div></div></figure><h1 id="bdeb" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">拆开我们的数据</h1><p id="7ff5" class="pw-post-body-paragraph lh li it lj b lk mx kd lm ln my kg lp lq mz ls lt lu na lw lx ly nb ma mb mc im bi translated"><code class="fe ng nh ni nj b">ox.graph_from_place()</code>方法返回的<code class="fe ng nh ni nj b">G</code>是来自 NetworkX 类的一个<code class="fe ng nh ni nj b">MultiDiGraph</code>对象。我们可以使用<code class="fe ng nh ni nj b">ox.plot_graph()</code>方法来制作地图，但首先让我们打开它，这样我们就可以为网络中的每条线段分配颜色和宽度。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ne nf l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><strong class="ak">Script 4 </strong>— Unpacks the data from the G MultiDiGraph object.</figcaption></figure><p id="b384" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">纸条 4 </strong>拆包<code class="fe ng nh ni nj b">G</code>。我们感兴趣的是保存在名为<code class="fe ng nh ni nj b">data</code>的列表中。<code class="fe ng nh ni nj b">data</code>中的每个元素都包含一个字典，该字典指定了一个段的属性，例如唯一 id、街道名称、最大速度、段的长度以及其他规范。下面是存储在<code class="fe ng nh ni nj b">data</code>中的第一个字典的例子:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/560c14a191aa22ac714ebb4004496397.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*sBvUiqzocx0Sy1NttR_whQ.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><strong class="bd nd">Figure 2 </strong>— The first element of the list named data.</figcaption></figure><p id="40c2" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你可以看到第一段是一条名为佛蒙特街的住宅双向街，长 81.54 米。当路段类型为人行道/小道时，公路关键字的值将为“人行道”。人行道类型的线段可能没有名称。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi me"><img src="../Images/a3bf26eafb80e97c61869724f87fb908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*b8GEhMFGnOn3lW9i.png"/></div></div></figure><h1 id="7604" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">为网络中的每个线段指定颜色和线宽</h1><p id="ee83" class="pw-post-body-paragraph lh li it lj b lk mx kd lm ln my kg lp lq mz ls lt lu na lw lx ly nb ma mb mc im bi translated">在我们制作地图之前，我们将为每一段指定一种颜色。为此，我们将遍历<code class="fe ng nh ni nj b">data</code>的元素。对于每个元素/片段，我们将根据其长度指定一种颜色。然后我们将这个颜色添加到一个名为<code class="fe ng nh ni nj b">roadColors</code>的列表中，这个列表稍后将作为变量传递给制作地图的方法。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ne nf l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><strong class="ak">Script 5 — </strong>Assigning colors to each segment based on their length. The length is in meters.</figcaption></figure><p id="1528" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这里是你发挥创造力的地方。例如，您可以更改颜色，添加更多 if 语句，更改每个 if 语句的条件，根据段名或速度限制分配颜色。</p><p id="ccaa" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">最后，我们还将创建一个列表，用于定义每个线段的线条粗细。为此，我们将遍历<code class="fe ng nh ni nj b">data</code>的每个元素。数据中的项目是包含“高速公路”关键字的字典。我们将使用它来确定我们拥有的细分市场的类型。如果“highway”关键字的值是“footway ”,这意味着该线段用于步行，因此我们将为该元素指定线宽 1。任何不是“人行道”的部分，我们将指定 2.5 的线宽。根据你的地图的大小，你需要使用这个值来创建一个好看的地图。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ne nf l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><strong class="ak">Script 6</strong> — Assign each segment a line width.</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi me"><img src="../Images/a3bf26eafb80e97c61869724f87fb908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*b8GEhMFGnOn3lW9i.png"/></div></div></figure><h1 id="91ad" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">制作地图</h1><p id="3a78" class="pw-post-body-paragraph lh li it lj b lk mx kd lm ln my kg lp lq mz ls lt lu na lw lx ly nb ma mb mc im bi translated">我们终于准备好制作地图了。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ne nf l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><strong class="ak">Script 7 </strong>—Making a map for Lawrence, Kansas.</figcaption></figure><p id="0503" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">制作这张地图似乎需要做很多工作，但让我来解释一下<strong class="lj jd">脚本 7 </strong>中发生了什么:</p><p id="910b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">第 4–6 行</strong>:这里我们指定堪萨斯州劳伦斯市的纬度和经度。这是地图的中心。你可以把地图放在任何你想要的纬度和经度的中心。</p><p id="fc66" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">第 8–12 行</strong>:这里我们决定了地图的边界。您应该使用这条线来控制在地图上显示什么。例如，您可以通过向第 4–6 行中定义的纬度和经度分配较小的偏移量来关注城市中较小的区域，如市中心。</p><p id="1644" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">第 14–18 行</strong>:这里我们使用 OSMNX 包的<code class="fe ng nh ni nj b">ox.plot_graph()</code>方法制作地图。我建议您阅读 OSMNX 软件包文档，查看所有可用的输入。我将只讨论我在这里使用的。</p><p id="e2d6" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe ng nh ni nj b">G</code>:这是我们在<strong class="lj jd">脚本 3 </strong>中执行的<code class="fe ng nh ni nj b">ox.graph_from_place()</code>方法的输出。</p><p id="251a" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe ng nh ni nj b">bbox</code>:这是一个设置地图边界的元组。下面应该是语法(北界，南界，东界，西界)。</p><p id="b5bb" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe ng nh ni nj b">fig_height</code>和<code class="fe ng nh ni nj b">fig_width</code>:图形的高度和宽度，单位为英寸。</p><p id="889c" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe ng nh ni nj b">dpi</code>:每英寸点数。</p><p id="e8dc" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe ng nh ni nj b">bgcolor</code>:用于地图的背景色。默认为白色。</p><p id="e049" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe ng nh ni nj b">save</code>:布尔型。如果是，将图形作为图像文件保存到磁盘。我们将此设置为 false，因为我们还没有准备好保存该数字。</p><p id="ef74" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe ng nh ni nj b">edge_colors</code>:线段的颜色。我们把这个设为等于<code class="fe ng nh ni nj b">roadColors</code>。你也可以只传递你想要的颜色的字符串。</p><p id="4315" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe ng nh ni nj b">edge_linewidth</code>:各线段的粗细。我们将其设为等于<code class="fe ng nh ni nj b">roadWidths</code>。你也可以只传递一个你想要的线条粗细的浮点数。</p><p id="97ab" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">第 21–47 行</strong>:这些行组成一个自定义图例。如果你熟悉 Matplotlib，你应该不会感到陌生。</p><p id="2c2f" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">第 49–50 行</strong>:我们在这里保存图形。</p><p id="c60a" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果您为堪萨斯州的劳伦斯市制作一张地图，其中每条线段的长度都用颜色进行了编码，那么您应该会看到以下内容:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/534361e7cb5ec94216fbb79309cee51e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gn1kn0_yTNK1QdrcdIQBbg.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Figure 3 — Map of Lawrence, Kansas where each segment is colored by length.</figcaption></figure><p id="69f8" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">结果真的很酷。诀窍是选择正确的颜色、线条粗细、地图边界和背景色来制作一幅好看的地图。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi me"><img src="../Images/a3bf26eafb80e97c61869724f87fb908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*b8GEhMFGnOn3lW9i.png"/></div></div></figure><h1 id="bb2a" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">向地图添加边框和文本</h1><p id="1bb8" class="pw-post-body-paragraph lh li it lj b lk mx kd lm ln my kg lp lq mz ls lt lu na lw lx ly nb ma mb mc im bi translated">我们基本上完成了地图。然而，我想添加一个边界和一些文字地图，使它看起来更艺术一点。我们将首先定义一些我在 StackOverflow 中发现的助手函数:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ne nf l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><strong class="ak">Script 8</strong> — Helper functions to add border to map.</figcaption></figure><p id="fcef" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们现在准备给图像添加一个边框。我们将只添加一个底部边框图像，但如果你愿意，你可以选择在顶部、左侧、右侧和底部添加边框。阅读 helper 函数的 docstring 以获得更多关于如何做的细节。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ne nf l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><strong class="ak">Script 9</strong>— Adding border to map.</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/aa75eec7bfea120db66a0e15dc7f4b31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OWXdQKLm_xkVnSn2XYlVUQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><strong class="bd nd">Figure 4 </strong>— Map of Lawrence, Kansas with a bottom border.</figcaption></figure><p id="c14d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">那看起来真的很好；).</p><p id="3c12" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">最后，让我们添加一些文本到图像的底部边框。为此，我们首先需要下载字体。游览<a class="ae md" href="https://www.wfonts.com/font/microsoft-sans-serif" rel="noopener ugc nofollow" target="_blank">ShareFonts.net</a>，搜索“PMINGLIU”。下载字体并将其内容解压缩到您的工作目录中。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ne nf l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Script 10 — Add text to the map. The font type and size are define in line 9. The position, the text, font color, and type of font are define in line 12.</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/2274c938a46c51480dd6e8f093821ff1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uDAw6JMnhfzxUq_uE1JzLw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Figure 5 — Map of Lawrence, Kansas.</figcaption></figure><p id="cfa6" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们到此为止。)</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi me"><img src="../Images/a3bf26eafb80e97c61869724f87fb908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*b8GEhMFGnOn3lW9i.png"/></div></div></figure><h1 id="05ed" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">结束语</h1><p id="79ce" class="pw-post-body-paragraph lh li it lj b lk mx kd lm ln my kg lp lq mz ls lt lu na lw lx ly nb ma mb mc im bi translated">为你的家乡制作地图，修改<strong class="lj jd">剧本 3 </strong>中的第 5 行和<strong class="lj jd">剧本 7 </strong>中的<strong class="lj jd">第 5 行和第 6 行。为了给你的城市创建一个好看的地图，你必须调整地图的边界和线条的粗细。如果你不喜欢我用的颜色，欢迎你更换。我很想看看你制作的任何地图。这里是我的 GitHub 的链接，这样你就可以获得这篇文章的全部内容。</strong></p><p id="f2ae" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">欢迎您在 LinkedIn 上与联系。直到下一次，每天编码！</p></div></div>    
</body>
</html>