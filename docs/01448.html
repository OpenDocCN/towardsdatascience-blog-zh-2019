<html>
<head>
<title>Using neural nets to predict tomorrow’s electric consumption</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用神经网络预测明天的用电量</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/using-neural-nets-to-predict-tomorrows-electric-consumption-cc1ae3ae7cc2?source=collection_archive---------9-----------------------#2019-03-07">https://towardsdatascience.com/using-neural-nets-to-predict-tomorrows-electric-consumption-cc1ae3ae7cc2?source=collection_archive---------9-----------------------#2019-03-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/64f19fb1d71ef9fd28c097f76e217477.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LFUU1EYkYZ3M6kfKPmhZRg.png"/></div></div></figure><h2 id="8ca6" class="jc jd je bd b dl jf jg jh ji jj jk dk jl translated" aria-label="kicker paragraph">神经网络调峰:第一部分</h2><div class=""/><div class=""><h2 id="97de" class="pw-subtitle-paragraph kk jn je bd b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dk translated">最小的错误都会在一天内造成数千美元的损失。神经网络可以帮助确保这种情况不会发生。</h2></div></div><div class="ab cl lc ld hx le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="im in io ip iq"><p id="19fd" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated"><em class="mf">研究会同</em> <a class="ae mg" href="http://omf.coop" rel="noopener ugc nofollow" target="_blank"> <em class="mf">开放建模框架</em></a><em class="mf">【OMF】</em></p><p id="989b" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated"><em class="mf">这是关于神经网络调峰的三部分系列文章的第一部分。考虑一下另外两个:</em></p><div class="is it gp gr iu mh"><a href="https://www.kmcelwee.com/load-forecasting/" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd jo gy z fp mm fr fs mn fu fw jn bi translated">基于神经网络的⚡️负荷预测和调峰</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">提高日前负荷预测的准确性可以为电力公司节省数万美元。下面，我已经…</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">www.kmcelwee.com</p></div></div></div></a></div></div><div class="ab cl lc ld hx le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="im in io ip iq"><p id="8dab" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">电力分销商可以通过降低高峰需求费用来节省数十万美元。一些人试图在高峰时段将电池放电或关闭客户的热水器或空调，以减少他们的需求。但是，这些努力的有效性取决于公用事业公司预测当天能源消耗的能力。</p><p id="0f6c" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">最小的误差可能意味着数万美元之间的差异——在不正确的负荷预测下实施调峰策略甚至会<em class="mf">增加</em>需求成本。谢天谢地，深度学习和神经网络的进步可以为公用事业公司提供第二天能源消耗的令人难以置信的准确图片。开放建模框架(OMF)和我已经使用神经网络创建了一个日前负荷预测模型，可以很容易地实施，以通知调度决策。</p><h1 id="4ad4" class="mq mr je bd ms mt mu mv mw mx my mz na kt nb ku nc kw nd kx ne kz nf la ng nh bi translated">为什么不简单点呢？</h1><p id="7951" class="pw-post-body-paragraph lj lk je ll b lm ni ko lo lp nj kr lr ls nk lu lv lw nl ly lz ma nm mc md me im bi translated">我们最初用 python 包 sci-kit learn 创建了一个线性回归模型。尽管这个更简单的模型达到了 10%的平均绝对误差(MAPE)，但它还不足以准确可靠地降低峰值。</p><p id="8179" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">最大的障碍是冬季和夏季的日峰值不同。冬季月份每天出现两次高峰，夏季月份在中午出现高峰。线性模型不能同时创建这两种每日负荷形状。虽然线性回归可以找到简单的关系(因为是星期一，所以+500 千瓦，-100 千瓦，因为是三月)，但神经网络可以计算更复杂的关系(因为是四月的星期一下午 3 点，所以+5100 千瓦，-1500 千瓦，因为是感恩节的凌晨 5 点)。这将我们的训练误差减少到大约 3.5 MAPE，这相当于节省了数万美元。</p><figure class="no np nq nr gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nn"><img src="../Images/9f5e6319d46d8956a8add38e0215fb80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XsWXrwwZ-3Hs-WxC"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk">Load prediction captures both single and double peak behavior (from OMF’s “Virtual Battery Dispatch” model)</figcaption></figure><h1 id="fc3a" class="mq mr je bd ms mt mu mv mw mx my mz na kt nb ku nc kw nd kx ne kz nf la ng nh bi translated">软件详情</h1><p id="85c0" class="pw-post-body-paragraph lj lk je ll b lm ni ko lo lp nj kr lr ls nk lu lv lw nl ly lz ma nm mc md me im bi translated">为了将负荷预测软件整合到 OMF 数据库中，我们的模型是用 Python 编写的。我们使用 pandas 包来操作数据，我们已经实现了 Tensorflow 的 Keras(谷歌的机器学习软件)来创建神经网络。<a class="ae mg" href="https://github.com/kmcelwee/load-forecasting/" rel="noopener ugc nofollow" target="_blank">这里有一个到存储库的链接</a>。该代码易于使用:</p><pre class="no np nq nr gt nw nx ny nz aw oa bi"><span id="0aef" class="ob mr je nx b gy oc od l oe of">import loadForecast as fc<br/>import pandas as pd</span><span id="bd1e" class="ob mr je nx b gy og od l oe of">df = pd.read_csv('test.csv')<br/>all_X = fc.makeUsefulDf(df)<br/>all_y = df[‘load’]<br/>predictions, accuracy = fc.neural_net_predictions(all_X, all_y)</span></pre><p id="4498" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">为了我们最初的测试目的，<code class="fe oh oi oj nx b">neural_net_predictions</code>简单地返回最后一年的预测；但是，它可以快速更新，以便实时为公用事业服务。</p><h1 id="1b69" class="mq mr je bd ms mt mu mv mw mx my mz na kt nb ku nc kw nd kx ne kz nf la ng nh bi translated">结构</h1><p id="4fe5" class="pw-post-body-paragraph lj lk je ll b lm ni ko lo lp nj kr lr ls nk lu lv lw nl ly lz ma nm mc md me im bi translated">当我们寻找更准确和有效的方法时，神经网络的结构在不断更新；然而，我们目前已经选定了一个五层全连接网络，其中每层包含 71 个节点。我们在每一层使用一个 ReLU 函数，并最小化均方误差。</p><h1 id="7e27" class="mq mr je bd ms mt mu mv mw mx my mz na kt nb ku nc kw nd kx ne kz nf la ng nh bi translated">输入</h1><p id="5bb4" class="pw-post-body-paragraph lj lk je ll b lm ni ko lo lp nj kr lr ls nk lu lv lw nl ly lz ma nm mc md me im bi translated">我们建议模型至少训练三年的数据。该模型将 CSV 作为输入，其中每一行列出给定年、月、日和小时的负载和天气。如果公用事业公司没有可用的温度数据，OMF 还提供了“天气预报”，这是一个可以很容易地收集并返回给定邮政编码的每小时天气的程序。如果有任何空的温度值，负荷预测函数使用“向前填充”方法，其中空值被最后一个非空值替换。例如，“38，39，41，NaN，NaN，38，NaN，32”将读作“38，39，41，41，41，38，38，32”</p><h1 id="faba" class="mq mr je bd ms mt mu mv mw mx my mz na kt nb ku nc kw nd kx ne kz nf la ng nh bi translated">特征</h1><p id="2fbf" class="pw-post-body-paragraph lj lk je ll b lm ni ko lo lp nj kr lr ls nk lu lv lw nl ly lz ma nm mc md me im bi translated">虽然每个训练示例都包含日期、温度和天气数据，但我们将这三列扩展为 72 个对机器学习模型有用的功能。以下是所有功能的列表:</p><ul class=""><li id="e2d9" class="ok ol je ll b lm ln lp lq ls om lw on ma oo me op oq or os bi translated">自 2000 年以来的年份*</li><li id="cd48" class="ok ol je ll b lm ot lp ou ls ov lw ow ma ox me op oq or os bi translated">从 24 小时前加载*</li><li id="8c04" class="ok ol je ll b lm ot lp ou ls ov lw ow ma ox me op oq or os bi translated">一天中的小时(凌晨 12 点，凌晨 1 点，…晚上 11 点)</li><li id="1355" class="ok ol je ll b lm ot lp ou ls ov lw ow ma ox me op oq or os bi translated">一周中的某一天(是星期日，是星期一，…是星期六)</li><li id="e37e" class="ok ol je ll b lm ot lp ou ls ov lw ow ma ox me op oq or os bi translated">一年中的月份(一月，二月，…十二月)</li><li id="49c6" class="ok ol je ll b lm ot lp ou ls ov lw ow ma ox me op oq or os bi translated">温度* **</li><li id="14ba" class="ok ol je ll b lm ot lp ou ls ov lw ow ma ox me op oq or os bi translated">温度***</li><li id="7b64" class="ok ol je ll b lm ot lp ou ls ov lw ow ma ox me op oq or os bi translated">前一天的负载*(前一天的 12 点，前一天的 1 点，…前一天的 11 点)</li><li id="2b29" class="ok ol je ll b lm ot lp ou ls ov lw ow ma ox me op oq or os bi translated">节假日(NERC6 节假日)**** (isNewYears，isMemorialDay…isChristmas)</li></ul><p id="1112" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">*这些特征通过减去平均值并除以标准偏差进行归一化，这有助于收集接近零的所有数据点。通过除以标准差而不是范围(正如一些数据科学家所建议的)，我们将准确度提高了 1%。</p><p id="f66d" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">**国家气象局估计他们的前一天每小时天气预报通常在 2.5 度以内。为了复制这一点，我们在训练和测试温度数据中创建噪声，方法是添加一个以零为中心的标准偏差为 2.5 的高斯分布。当这个噪音被加入时，模型的准确性下降了百分之一。</p><p id="a272" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">***如果您绘制负荷与温度的关系图，您会发现负荷与温度成正比——加热器用于最冷的温度，空调用于最热的温度。通过添加温度特征，我们可以使这种关系对模型更加明显。</p><p id="a4be" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">****观察到的节假日也是“1”(或“真”)。例如，2015 年的独立日是星期六，所以它是在 7 月 3 日星期五庆祝的。对于“isIndependenceDay”功能，2015 年的 7 月 3 日和 7 月 4 日都标记为“1”。</p><h1 id="4519" class="mq mr je bd ms mt mu mv mw mx my mz na kt nb ku nc kw nd kx ne kz nf la ng nh bi translated">结果</h1><p id="93f2" class="pw-post-body-paragraph lj lk je ll b lm ni ko lo lp nj kr lr ls nk lu lv lw nl ly lz ma nm mc md me im bi translated">我们根据 from 2002 年至 2017 年的休斯顿数据训练了这个神经网络，并针对 2018 年的负载测试了该模型。我们达到了大约 96.5%的准确率(3.5 MAPE)。整个程序通常在 10 分钟内运行。我们在一个需求减少模型上部署了这个神经网络，其中一个公用事业公司使用电池转移负载来减少需求，并发现我们节省了 40%的最佳解决方案(例如，如果一切运行完美，公用事业公司将在按需充电方面节省 95，000 美元，但由于预测不完美，它节省了大约 40，000 美元。这假设了典型的 20 美元/千瓦的需求费用。在其他值中，需求费用是我们成本效益模型的一个输入，我们正在将这些结果扩展到其他公用事业。)</p><p id="6d50" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">鉴于最小的改进可能对公共事业的底线产生如此深远的影响，我们目前正在追求更复杂的机器学习结构。</p><p id="ae99" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">此外，对这些大型电池进行充电和放电需要成本，一些公用事业公司可以在有限的天数内控制客户的空调。我们研究的下一步是最好地预测一个月中的哪一天调度这些方法(假设需求费用是每月的)，以便公用事业公司可以尽可能保守。</p></div><div class="ab cl lc ld hx le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="im in io ip iq"><p id="f1d1" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">你发现错误了吗？你有什么问题吗？联系我，查看更多项目在 <a class="ae mg" href="http://www.kmcelwee.com" rel="noopener ugc nofollow" target="_blank"> <em class="mf">我的网站</em> </a> <em class="mf">。</em></p></div></div>    
</body>
</html>