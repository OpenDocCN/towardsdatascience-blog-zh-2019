<html>
<head>
<title>Linear regression: the basics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">线性回归:基础</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/linear-regression-the-basics-4daad1aeb845?source=collection_archive---------19-----------------------#2019-05-26">https://towardsdatascience.com/linear-regression-the-basics-4daad1aeb845?source=collection_archive---------19-----------------------#2019-05-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="e441" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">了解线性回归技术的基础</p><p id="45b2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">回归技术帮助您测量变量的相关程度。例如，它们允许你说“房子每平方米要多花 6000 美元”(在这种情况下，这些变量是房子的面积和价格)。</p><p id="f20e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">线性回归是当关系是线性时我们所做的回归类型。在我们的例子中，情况可能是这样的:额外的平方米总会或多或少地增加房价。现在让我们考虑一下每间浴室的房价:虽然给你的房子增加第二间浴室会增加它的价格，但第 12 间浴室不太可能对一间已经有 11 间浴室的房子有多大影响。</p><p id="e1e5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在回归技术中，我们总是有我们的目标数值变量(Y)和我们的解释变量(X1，X2，…).在这种情况下，由于我们试图解释房价，这就是我们的 y。在第一个例子中，我们的 X 是房屋面积，在第二个例子中，它是浴室的数量。我们也可能有多个 X(例如，如果我们取面积、浴室数量和最近一次翻新的年份)。</p><p id="3f8e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在让我们使用 r 进行第一次回归。我们将使用来自美国金县房屋销售数据的公共数据集，此处<a class="ae ko" href="https://www.kaggle.com/harlfoxem/housesalesprediction/downloads/housesalesprediction.zip/1" rel="noopener ugc nofollow" target="_blank">提供</a>。然后我们可以加载它，看看变量:</p><pre class="kp kq kr ks gt kt ku kv kw aw kx bi"><span id="2f13" class="ky kz it ku b gy la lb l lc ld"><strong class="ku iu">IN:</strong><br/>path = 'insert you file path here'<br/>data = read.csv(paste(path,'kc_house_data.csv', sep = ""))<br/>colnames(data)</span><span id="6bb0" class="ky kz it ku b gy le lb l lc ld"><strong class="ku iu">OUT:</strong><br/> [1] "id"            "date"          "price"         "bedrooms"      "bathrooms"     "sqft_living"  <br/> [7] "sqft_lot"      "floors"        "waterfront"    "view"          "condition"     "grade"        <br/>[13] "sqft_above"    "sqft_basement" "yr_built"      "yr_renovated"  "zipcode"       "lat"          <br/>[19] "long"          "sqft_living15" "sqft_lot15"</span></pre><p id="83ca" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所以这里有<em class="lf">价格</em>和<em class="lf">平方英尺 _ 居住面积</em>(居住面积平方英尺)。让我们来看看这两个变量的共同表现:</p><pre class="kp kq kr ks gt kt ku kv kw aw kx bi"><span id="4384" class="ky kz it ku b gy la lb l lc ld"><strong class="ku iu">IN:</strong><br/>attach(data)<br/>plot(sqft_living,price)</span></pre><figure class="kp kq kr ks gt lh gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/9b463089cc3e1c6803e9fc12e2054a29.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*elxXMs_ppveA9DFo8TBcHA.png"/></div></figure><p id="4268" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里我们有一个散点图，每个点代表一栋房子，X 轴是它的面积，Y 轴是它的价格。不出所料，看起来房子越大越贵。此外，这种关系看起来或多或少是线性的。我们的第一个线性回归方程如下所示:</p><p id="07c3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="lf"> Y = a + b*X </em></p><p id="2c45" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">其中<strong class="js iu"> Y </strong>是房价(<em class="lf"> price </em>)，<strong class="js iu"> X </strong>是其面积(<em class="lf"> sqft_living </em>)，<strong class="js iu"> a </strong>是基准值，是房子的最低价格，不管它有多小，<strong class="js iu"> b </strong>是解释两个变量之间关系的系数(“f <em class="lf">或房子的每平方米，将多花</em>美元</p><p id="4937" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们建立第一个线性模型:</p><pre class="kp kq kr ks gt kt ku kv kw aw kx bi"><span id="ffd6" class="ky kz it ku b gy la lb l lc ld"><strong class="ku iu">IN:</strong><br/>model1 = lm(price ~ sqft_living, data = data)<br/>summary(model1)</span><span id="e811" class="ky kz it ku b gy le lb l lc ld"><strong class="ku iu">OUT:</strong><br/>Call:<br/>lm(formula = price ~ sqft_living, data = data)</span><span id="5d95" class="ky kz it ku b gy le lb l lc ld">Residuals:<br/>     Min       1Q   Median       3Q      Max <br/>-1476062  -147486   -24043   106182  4362067</span><span id="4c56" class="ky kz it ku b gy le lb l lc ld">Coefficients:<br/>              Estimate Std. Error t value Pr(&gt;|t|)    <br/>(Intercept) -43580.743   4402.690  -9.899   &lt;2e-16 ***<br/>sqft_living    280.624      1.936 144.920   &lt;2e-16 ***<br/>---<br/>Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span><span id="3ff5" class="ky kz it ku b gy le lb l lc ld">Residual standard error: 261500 on 21611 degrees of freedom<br/>Multiple R-squared:  0.4929, Adjusted R-squared:  0.4928 <br/>F-statistic: 2.1e+04 on 1 and 21611 DF,  p-value: &lt; 2.2e-16</span></pre><p id="8a10" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="lf"> lm() </em>函数允许我们构建模型，而<em class="lf"> summary() </em>函数允许我们查看模型的结果。现在让我们试着解释这些结果:</p><p id="991e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">残差</strong>:显示残差的分布，残差是模型估计的价格与实际观察到的价格之间的差异。显然，我们希望我们的估计尽可能接近真实值，这意味着非常小的残差。理想情况下，它们将非常接近零，并且对称分布。</p><p id="3f8d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">系数</strong>:“估计”字段从我们的模型中给出了<strong class="js iu"> a </strong>和<strong class="js iu"> b </strong>，其中“截距”是<strong class="js iu"> a </strong>而“平方英尺生活”是<strong class="js iu"> b </strong>(在我们的例子中，每平方英尺的居住面积意味着房价增加了 280 美元)。另一个相关字段是“Pr( &gt; |t|)”，它给出了各自的 p 值。粗略地说，p 值意味着我们对估计的系数有多大的把握。p 值为 5%意味着我们对结果有 95%的信心。所以 p 值越小越好。通常情况下，如果小于 5%或 1%，这是令人满意的。在我们的例子中，p 值比这小得多，所以我们可以认为我们的系数是重要的。</p><p id="152f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> R 平方</strong>:它告诉我们目标变量(价格)的变化有多少是由我们的模型解释的，从 0 到 1。显然，越多越好。然而，有一个警告:当我们考虑一个以上的解释变量时，我们应该看一下<strong class="js iu">调整的</strong> r 平方。在我们的例子中，它大约是 0.49，这意味着我们的模型解释了大约一半的房价变化。</p><p id="8690" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们看看这个模型产生的线:</p><figure class="kp kq kr ks gt lh gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/afa425f3dea53f78df42c6944ddf996b.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*8SkEchMf0UrcstHFrbfMog.png"/></div></figure><p id="eb4f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这条线显示，对于任何给定的房屋面积，根据我们的模型，它的估计价格。看起来没什么印象吧？现在我们知道如何阅读我们的模型摘要，让我们尝试改进它。我们可以尝试添加更多的变量，比如浴室的数量，例如:</p><pre class="kp kq kr ks gt kt ku kv kw aw kx bi"><span id="e9b0" class="ky kz it ku b gy la lb l lc ld"><strong class="ku iu">IN</strong>:<br/>model2 = lm(price ~ sqft_living + bathrooms, data = data)<br/>summary(model2)</span><span id="0214" class="ky kz it ku b gy le lb l lc ld"><strong class="ku iu">OUT</strong>:<br/>Call:<br/>lm(formula = price ~ sqft_living + bathrooms, data = data)</span><span id="195c" class="ky kz it ku b gy le lb l lc ld">Residuals:<br/>     Min       1Q   Median       3Q      Max <br/>-1483123  -147387   -24190   105951  4359876</span><span id="7a2a" class="ky kz it ku b gy le lb l lc ld">Coefficients:<br/>              Estimate Std. Error t value Pr(&gt;|t|)    <br/>(Intercept) -39456.614   5223.129  -7.554 4.38e-14 ***<br/>sqft_living    283.892      2.951  96.194  &lt; 2e-16 ***<br/>bathrooms    -5164.600   3519.452  -1.467    0.142    <br/>---<br/>Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span><span id="abd2" class="ky kz it ku b gy le lb l lc ld">Residual standard error: 261400 on 21610 degrees of freedom<br/>Multiple R-squared:  0.4929, Adjusted R-squared:  0.4929 <br/>F-statistic: 1.05e+04 on 2 and 21610 DF,  p-value: &lt; 2.2e-16</span></pre><p id="37c4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正如我们所见，调整后的 R 平方几乎保持不变，浴室系数的 p 值太大，这意味着这个变量似乎无法解释房价。然后，让我们尝试第三个模型，去掉浴室，并添加其他可能相关的变量:</p><pre class="kp kq kr ks gt kt ku kv kw aw kx bi"><span id="77c7" class="ky kz it ku b gy la lb l lc ld"><strong class="ku iu">IN</strong>:<br/>model3 = lm(price ~ sqft_living + floors + yr_built, data = data)<br/>summary(model3)</span><span id="7f64" class="ky kz it ku b gy le lb l lc ld"><strong class="ku iu">OUT</strong>:<br/>Call:<br/>lm(formula = price ~ sqft_living + floors + yr_built, data = data)</span><span id="9485" class="ky kz it ku b gy le lb l lc ld">Residuals:<br/>     Min       1Q   Median       3Q      Max <br/>-1669759  -134816   -16331   102089  4092350</span><span id="8c8f" class="ky kz it ku b gy le lb l lc ld">Coefficients:<br/>              Estimate Std. Error t value Pr(&gt;|t|)    <br/>(Intercept)  5.595e+06  1.304e+05   42.92   &lt;2e-16 ***<br/>sqft_living  2.948e+02  2.018e+00  146.10   &lt;2e-16 ***<br/>floors       7.517e+04  3.731e+03   20.15   &lt;2e-16 ***<br/>yr_built    -2.933e+03  6.767e+01  -43.35   &lt;2e-16 ***<br/>---<br/>Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span><span id="d14f" class="ky kz it ku b gy le lb l lc ld">Residual standard error: 250800 on 21609 degrees of freedom<br/>Multiple R-squared:  0.5335, Adjusted R-squared:  0.5334 <br/>F-statistic:  8237 on 3 and 21609 DF,  p-value: &lt; 2.2e-16</span></pre><p id="2afe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这一次，我们将调整后的 R 平方提高到 0.53，所有系数都是相关的。请注意，<em class="lf"> sqft_living </em>的系数已经改变:现在大约是 294。yr _ build 的系数也很有趣，因为它是负的。这意味着你建造的的价值越大，也就是说，房子越新，花费就越少。换句话说，旧房子往往更贵。</p><p id="cadc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">好吧，那下一步是什么？我们如何使用这个模型？嗯，我们可以用它来估计一栋新房子的销售价格，这不在我们的数据库中:</p><pre class="kp kq kr ks gt kt ku kv kw aw kx bi"><span id="a6ac" class="ky kz it ku b gy la lb l lc ld"><strong class="ku iu">IN</strong>:<br/>new_house = data.frame(<br/>  sqft_living = 2080, floors = 1, yr_built = 1997<br/>  )<br/>predict(model3,newdata = new_house)</span><span id="fc69" class="ky kz it ku b gy le lb l lc ld"><strong class="ku iu">OUT</strong>:<br/>1 <br/>426715.9</span></pre><p id="3970" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，对于一栋建于 1997 年的房子，有 2080 平方英尺的居住空间和一层楼，我们预计它的价格约为 426716 美元。</p><p id="32de" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，我们已经了解了如何创建线性模型，如何评估和改进它，以及如何使用它进行预测。我们的模型仍然有许多改进的机会，我们将在下一个线性回归教程中解决，例如修复异方差(我发誓这仍然是英语)和多重共线性，但现在我们对这些模型如何工作以及如何使用它们有了基本的了解。</p></div><div class="ab cl lk ll hx lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="im in io ip iq"><p id="ede4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可以在这里访问完整的 R 脚本<a class="ae ko" href="https://github.com/arthurmello/statistics/tree/master/1.%20Linear%20regression" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>