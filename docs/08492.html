<html>
<head>
<title>One Graph To Rule Them All — The Lord of The Rings Network Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一张图来统治他们所有人——指环王网络分析</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/lord-of-the-rings-analysis-8a246643bf45?source=collection_archive---------19-----------------------#2019-11-17">https://towardsdatascience.com/lord-of-the-rings-analysis-8a246643bf45?source=collection_archive---------19-----------------------#2019-11-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="2113" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated"><strong class="jt iu">链接到最终结果→</strong><a class="ae kp" href="https://alon-cohen-gordon.wixsite.com/lotr-graph" rel="noopener ugc nofollow" target="_blank">T3】链接 T5】</a></p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="kv kw l"/></div></figure><p id="f1ad" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">我第一次看《指环王》是在 2001 年，我觉得我的生活永远改变了。从 2001 年到现在已经过去很长时间了，但直到今天我还能享受看加长三部曲的乐趣。由于电影看多了，我决定做点不一样的，把魔戒和数据分析的世界结合起来。</p><p id="780d" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">魔戒和数据分析如何结合？这是个好问题…</p><p id="11f4" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">与所有数据分析项目一样，一切都始于数据。</p><p id="0225" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">我在网上快速搜索了一下，找到了一个网站<a class="ae kp" href="https://lotr.fandom.com/wiki/Main_Page" rel="noopener ugc nofollow" target="_blank">一个统治一切的维基</a>，一个充当 J. R. R .托尔金图书百科全书的网站。幸运的是，该网站包含数千页关于人物、地点、种族和历史小说事件的详细信息。</p><p id="9933" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">此外，它允许任何人使用爬虫抓取它的页面。我怎么知道？因为在每个站点<em class="kx">“robots . txt/”</em>都可以添加到 URL 中，检查站点是否允许抓取，以及在什么条件下。(<a class="ae kp" href="https://lotr.fandom.com/robots.txt" rel="noopener ugc nofollow" target="_blank">链接到该网站的 robots.txt </a>，<a class="ae kp" href="https://support.google.com/webmasters/answer/6062608?hl=en" rel="noopener ugc nofollow" target="_blank">进一步了解 robots.txt </a>)</p><p id="9142" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">首先，我必须到达网站并抓取所有页面。我决定只刮去几页文字，并把注意力集中在它们上面。</p><p id="32d2" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">可以刮出哪些数据？</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi ky"><img src="../Images/de7fe5d722638aae911f091605b287e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QR0RNy1ZrjhgpgfT"/></div></div></figure><p id="2354" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">每一页都包含文本、照片、链接，在许多情况下还有传记资料。我对传记数据特别感兴趣，因为我假设它包含的字段在所有页面中都是相似的，所以我可以将它安排到一个数据框中。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="lf kw l"/></div></figure><p id="1cf3" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">先说传记资料。</p><p id="753a" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">在抓取了所有的字符页之后，这就是数据框的样子:(使用<a class="ae kp" href="https://github.com/ResidentMario/missingno" rel="noopener ugc nofollow" target="_blank"> missingno </a>绘制数据框)</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi lg"><img src="../Images/9a2630b264339666ed01790ece6dafd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*csWl7SowpVdIYOX3"/></div></div></figure><p id="7523" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">如你所见，有许多列，但大多数都是半满或几乎是空的。在对数据进行清理和重新整理后，我对以下领域进行了分析:武器、领域、种族、性别、文化。</p><p id="11b0" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated"><strong class="jt iu">传记资料</strong></p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi lh"><img src="../Images/0f97eea9e659586324d6b64136051ab5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bqi2L8_IM_13KotKy755aA.png"/></div></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi li"><img src="../Images/200e667211aa1639bd7785b4ed68237d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0LElMTxljKAJDUpjsIfEKA.png"/></div></div></figure><p id="a5c7" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">上面的图表显示了人物种族和出身的分布。如种族图所示，男性最常见，然后是霍比特人、精灵、矮人、兽人等等。在分析过程中，我遇到了一些我不知道的人物。例如，你知道有 3 个不同的角色属于巴罗格种族吗？</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi lj"><img src="../Images/cd33722b9bdf9689be7a382f2f84a370.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WhDGDg9OX56ly6uXA8tP-A.png"/></div></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi li"><img src="../Images/cfe86f29e3ec2dea32981c888a583e51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uoRJe-Yj-lED8FjCjIF9BA.png"/></div></div></figure><p id="6feb" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">在文化图表中，不出所料，最常见的文化是男性文化，而刚铎和洛汗文化位于顶部。这个图表与种族图表相关联，它讲述了同样的故事。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/02d7c8e67b3c1780c7224f7294bb2a47.png" data-original-src="https://miro.medium.com/v2/resize:fit:578/format:webp/1*8X4AMSfGtTtoWby_wHYOMg.png"/></div></figure><p id="f07c" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">性别图表显示，男性比女性多得多(几乎多 5 倍)。更有可能的是，如果这些书是在我们这个时代而不是在 20 世纪写的，那么图表会更加平衡。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi lh"><img src="../Images/474b399a728824ee29b594523a3bd798.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7wNXgTqueHlZnVomccxtjw.png"/></div></div></figure><p id="028a" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">最后一张图显示了武器的分布情况。为了创建这个图表，我必须将武器的名称标准化。在大多数情况下，一种武器有几种版本。例如，在“剑”类别下，有“国王之剑”、“精灵之剑”、“罗希里姆之剑”等等。</p><p id="b9d7" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated"><strong class="jt iu">正文</strong></p><p id="926d" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">NLP 是一个迷人的世界，人们可以使用各种算法从文本中提取洞察力。因为我想保持专注，所以我决定只创建一个强调文本力量的图表。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi ll"><img src="../Images/4a3a500684f1527c3040c6cf92da5c42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*I3XgESw4NtrXL572"/></div></div></figure><p id="f47d" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">上图是用<a class="ae kp" href="https://lotr.fandom.com/wiki/Gandalf" rel="noopener ugc nofollow" target="_blank">甘道夫的页面</a>中的文字制作的。单词排列成环形，它们的大小与它们在文本中的出现频率有关。</p><p id="096f" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated"><strong class="jt iu">链接</strong></p><p id="0a41" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">链接可能看起来不像一个强大的数据源，但在我看来，这将是一个低估。使用链接分析，我们可以指出几点见解。例如:A)一个角色有多受欢迎，B)角色之间有什么联系和关系。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi lh"><img src="../Images/e904e98167a099a667c95d9150a79443.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DvCWjzlKhhvWYa-4maCnGg.png"/></div></div></figure><p id="6325" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">这个图表非常有趣，因为它告诉我们，提到最多的人物不一定是中心人物。索伦和甘道夫是重要的角色，但在我看来，他们没有佛罗多重要。尽管如此，弗罗多最终排名第九，而索伦和甘道夫则分列第一和第二。等级并没有告诉我们故事的中心地位，但是它告诉了我们角色之间的联系。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi lm"><img src="../Images/a424440b5c477d4658fee55ba1399c4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*09XpqmLua4EoLs8IwvVLhw.png"/></div></div></figure><p id="6fcf" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">在网络理论中，<a class="ae kp" href="https://www.sciencedirect.com/topics/computer-science/degree-centrality" rel="noopener ugc nofollow" target="_blank">中心度</a>是用来衡量网络中节点中心性的度量。指向你的节点越多，你就越居中。上图与上图不同，因为它通过唯一链接的数量而不是简单链接的数量来衡量角色的中心性。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi lm"><img src="../Images/b7a2a3f91177b6b3ad4b46593324f353.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RogaEQQmC1zpuWHSOD4PDg.png"/></div></div></figure><p id="77b7" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">另一个让我们了解节点重要性的指标是<a class="ae kp" href="https://www.sciencedirect.com/topics/computer-science/betweenness-centrality" rel="noopener ugc nofollow" target="_blank">中间中心度</a>。该指标衡量节点对网络中最短路径的重要性。例如，布鲁克林大桥不是一个中心位置，因为人们参观它，而是因为人们在去其他地方的路上走过它。</p><p id="8210" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">为了获得关于字符连接的一些见解，有几种社区检测算法。在下一个示例中，图表显示了使用 Louvain 算法检测到的社区所着色的字符。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi ln"><img src="../Images/f9e0e5a0d1ea3c16cb56721180d0f355.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KdZGowkutnbauMthx_uRQg.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk">Top 100 Characters Network</figcaption></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi ls"><img src="../Images/305002418ec3b4c35875c7d2aea6ab1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NQbE3PwjYKzOgKcCLv-NXg.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk">Louvain Detected Communities (Top 100)</figcaption></figure><p id="f2cc" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">由于我搜集的数据已经包含了角色的许多细节，我认为这些复杂的模型在我们的案例中没有任何用处。这些角色可以根据他们的种族或文化来划分。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="lf kw l"/></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi lt"><img src="../Images/8590b5f1fec841dd9c0706d216f3f3f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9OikV1wfbrP2D89jBEIcCg.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk">Lord of The Rings Network</figcaption></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi lu"><img src="../Images/262aab19596914d01b9570e299d7c381.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FB4BroQ6BgryGfp-7dUqTQ.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk">Characters Details</figcaption></figure><p id="e26b" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated"><a class="ae kp" href="https://alon-cohen-gordon.wixsite.com/lotr-graph" rel="noopener ugc nofollow" target="_blank"> <strong class="jt iu">链接到一个交互图形</strong> </a></p><p id="17f9" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">在上图中，你可以看到网络图中人物之间的联系。在这个互动网络(使用<a class="ae kp" href="https://pyvis.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> pyvis </a>制作)中，当鼠标悬停在每个节点上时，角色的传记数据就会显示出来。当鼠标悬停在边缘时，引用的数量会显示出来，这可以告诉我们字符之间的连接质量。节点的大小与它们的中心度有关，它们的位置是使用<a class="ae kp" href="https://en.wikipedia.org/wiki/Barnes%E2%80%93Hut_simulation" rel="noopener ugc nofollow" target="_blank">Barnes–Hut simulation</a>算法基于它们的连接来计算的。</p><p id="957f" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">感谢大家阅读我的文章，如果你有任何问题，意见或改进的想法，请在下面留下评论！</p><p id="a4d6" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated"><a class="ae kp" href="https://github.com/aloncohen1/My-Projects/blob/master/lord%20of%20the%20rings%20analysis.ipynb" rel="noopener ugc nofollow" target="_blank">代号</a> <br/> <a class="ae kp" href="https://www.linkedin.com/in/alon-cohen-67459988/" rel="noopener ugc nofollow" target="_blank"> <em class="kx">阿龙科恩</em> </a></p></div></div>    
</body>
</html>