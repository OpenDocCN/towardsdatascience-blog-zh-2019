<html>
<head>
<title>Running with Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用数据运行</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/running-with-data-ed78d8853ee?source=collection_archive---------21-----------------------#2019-10-09">https://towardsdatascience.com/running-with-data-ed78d8853ee?source=collection_archive---------21-----------------------#2019-10-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7f8d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">2019 波士顿马拉松赛分析</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/0b6fc796f4fe0da2a8a5e758c7bb79d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/0*F_jy9bXTi5q80nDe.jpg"/></div></figure><p id="9cdb" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">距离 TCS 纽约市马拉松还有不到一个月的时间，这让我们这些跑步者开始思考我们为穿越五个区的 26.2 英里旅程做了多少准备。虽然我们都在分析课程，继续训练，并对比赛日的天气感到压力，但我想对 2019 年波士顿马拉松赛进行统计分析。我选择这场马拉松有 3 个原因:这是世界上最大的马拉松之一，2019 年 4 月 15 日的结果已经公布，很多波士顿马拉松选手来自纽约(你会在下面看到)。</p><p id="00b3" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">美国每年大约有 570 场马拉松比赛。波士顿马拉松是世界上最古老的马拉松，始于 1897 年。我想从统计分析开始这个项目。分析包括图表和描述，随后是数据的结论。</p></div><div class="ab cl lm ln hx lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="im in io ip iq"><h2 id="360b" class="lt lu it bd lv lw lx dn ly lz ma dp mb kz mc md me ld mf mg mh lh mi mj mk ml bi translated"><strong class="ak">网页抓取</strong></h2><p id="89cf" class="pw-post-body-paragraph kq kr it ks b kt mm ju kv kw mn jx ky kz mo lb lc ld mp lf lg lh mq lj lk ll im bi translated">我从网上收集数据开始这个项目。用来抓取比赛结果的来源是 https://www.baa.org/races/boston-marathon/results.的<a class="ae mr" href="https://www.baa.org/races/boston-marathon/results." rel="noopener ugc nofollow" target="_blank"/></p><p id="d5d2" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我使用 python 库 Beautiful Soup 将结果放入 list/dataframe。然后对数据进行了统计。</p><h2 id="7736" class="lt lu it bd lv lw lx dn ly lz ma dp mb kz mc md me ld mf mg mh lh mi mj mk ml bi translated">统计观测结果</h2><p id="6c94" class="pw-post-body-paragraph kq kr it ks b kt mm ju kv kw mn jx ky kz mo lb lc ld mp lf lg lh mq lj lk ll im bi translated">在 26647 名跑步者中，平均年龄为 42 岁，平均正式时间为 3 小时 53 分 2 秒。年龄最大的选手是 83 岁，年龄最小的选手是 18 岁。</p><p id="7b62" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">下图显示了每个年龄组的参与者。你会发现 40 到 50 岁之间的年龄相当高。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/a969354e9729b6c4bc01fd53cba07a5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/1*7OYwGHBmRQoeFkjmOZkP3Q.png"/></div></figure><p id="8623" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">下图中橙色的男性通常比参加 2019 年马拉松比赛的女性年龄大。男性平均年龄约为 45 岁，而女性平均年龄约为 40 岁。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/17bfe64d400bae633ddc61baa5015667.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*tMT4_ynNU3ZKyY5_8Bto_Q.png"/></div></figure><p id="0bf5" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">下面的最后一张图表显示了居民来自的前 20 个城市。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi mu"><img src="../Images/26c327d748231af987349a9cdc61b8ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zrI1BCdkhYt7yedUQCts-w.png"/></div></div></figure></div><div class="ab cl lm ln hx lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="im in io ip iq"><h2 id="22ed" class="lt lu it bd lv lw lx dn ly lz ma dp mb kz mc md me ld mf mg mh lh mi mj mk ml bi translated">年龄反映了跑步者的总体排名吗？</h2><p id="3176" class="pw-post-body-paragraph kq kr it ks b kt mm ju kv kw mn jx ky kz mo lb lc ld mp lf lg lh mq lj lk ll im bi translated">让我们来看看…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/fc8d4b348af01b0d3fb8eca35f070a28.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*u2NY0SJDNPCfw4-JGVUHvg.png"/></div></figure><p id="1af5" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">你可以看到我们 42 岁时正常化前的分布。标准化后显示为粉红色。我们希望将官方时间转换为秒，以便查看年龄和时间之间是否存在相关性。</p><p id="125d" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">重要的是要注意我们的自变量和因变量。自变量是独立的变量，不能被其他变量改变。在这种情况下，我们的独立变量是跑步者的年龄。因变量是依赖于自变量的值的变量。在这种情况下，我们认为官方时间取决于跑步者的年龄。</p><ul class=""><li id="60fd" class="na nb it ks b kt ku kw kx kz nc ld nd lh ne ll nf ng nh ni bi translated">官方时间。应用(lambda x: x.total_seconds()/3600)</li><li id="0ed6" class="na nb it ks b kt nj kw nk kz nl ld nm lh nn ll nf ng nh ni bi translated">lr_model = ols(公式= '年龄~官方 _ 时间'，数据=df2)。适合()</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gh gi no"><img src="../Images/81c6ca460a7ce41dfada55e4f23c3f3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uoEHPx7XYs9vL_X_HZ-zSQ.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk">y = 3.16 + 0.017x</figcaption></figure><p id="3389" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">你可以看到我们有一个极低的 R 平方值。这可能是因为我们的数据集非常大(超过 26，000)。所以我们想通过绘制两个变量的相关性来进一步挖掘。</p><h2 id="139c" class="lt lu it bd lv lw lx dn ly lz ma dp mb kz mc md me ld mf mg mh lh mi mj mk ml bi translated">相互关系</h2><p id="a53a" class="pw-post-body-paragraph kq kr it ks b kt mm ju kv kw mn jx ky kz mo lb lc ld mp lf lg lh mq lj lk ll im bi translated">我想分析年龄变量与参与者的总体排名之间的相关性有多强。我对此的想法是，年龄越大，速度越慢，这意味着整体排名越高。我们的总体排名和年龄之间的相关性= 0.3，这意味着这两个变量具有正的但低的相关性。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/f8328ed16a7a11914ea137ebbaf517b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*f77EE-vbTlT_2h4EnAOOqw.png"/></div><figcaption class="np nq gj gh gi nr ns bd b be z dk">y = 3.16 + 0.017x</figcaption></figure><p id="5fe8" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">如你所见，在我们的分析中有许多观察结果。穿过观测值的线称为回归线。这条线符合我们所有的观察。回归线基于<strong class="ks iu">最小二乘法</strong>。</p><p id="827e" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">请注意，y 轴截距为 3.16，斜率为 0.017(这就是为什么我们的回归线略有倾斜。我们的线性方程表明，y(因变量)是跑步者年龄的结果。</p><pre class="kj kk kl km gt nu nv nw nx aw ny bi"><span id="b248" class="lt lu it nv b gy nz oa l ob oc">Mean Age - 42<br/>Mean Official Time - 3.88</span><span id="8423" class="lt lu it nv b gy od oa l ob oc">(42, 3.88) is the point at which the X and Y cross</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/8b0bfa8d88b43d03cab7faeb8a169d28.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*4V0GUw6um3MUMeRJi9hsaQ.png"/></div></figure><p id="9069" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">上面的 Q-Q(分位数-分位数)图是一个概率图，这是一种通过绘制两个概率分布的分位数来比较它们的图形方法。这是根据要求的分布对数据的整体形状进行的直观检查。</p><h2 id="f349" class="lt lu it bd lv lw lx dn ly lz ma dp mb kz mc md me ld mf mg mh lh mi mj mk ml bi translated">结论</h2><p id="64c1" class="pw-post-body-paragraph kq kr it ks b kt mm ju kv kw mn jx ky kz mo lb lc ld mp lf lg lh mq lj lk ll im bi translated">我们可以在上面的图表中看到，跑步者的年龄和跑步者的官方时间之间存在正相关关系。我们有低相关性和低 r 平方，这可能是因为我们有超过 26，000 个观察值。</p><p id="e5c3" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我是一名顾问，试图找出公司对这些数据感兴趣的原因。当分析一个公司的营销组合时，你用 4 P 制定战略:产品、价格、促销和地点。</p><p id="f416" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">假设你是一家刚起步的服装公司，你想在大城市的跑步者中有效地推广你的产品(产品)。根据上面分析的研究，我建议春天在波士顿地区(地点/促销)设立一个 popup 位置。如上所述，波士顿马拉松是美国最古老和最著名的马拉松之一。让你的目标市场年龄组在 40-50 岁之间，你的定价策略要针对这个年龄段(价格)。</p></div></div>    
</body>
</html>