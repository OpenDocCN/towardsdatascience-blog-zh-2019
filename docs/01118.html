<html>
<head>
<title>Learning Languages From ABCs to SQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习语言从基础知识到 SQL</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/learning-languages-from-abcs-to-sql-c1843d6853a3?source=collection_archive---------29-----------------------#2019-02-20">https://towardsdatascience.com/learning-languages-from-abcs-to-sql-c1843d6853a3?source=collection_archive---------29-----------------------#2019-02-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a89c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">除了基本的 SELECT 和 FROM 命令之外的 SQL 查询。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/64aaa672f20b6daa5ff280b564a466b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yXfblA5UqlKfsiclcW00aQ.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><em class="ky">Photo via </em><a class="ae kz" href="https://www.pexels.com/photo/toys-letters-pay-play-48898/" rel="noopener ugc nofollow" target="_blank"><em class="ky">Pexels</em></a></figcaption></figure><p id="249d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如果你能理解我的头衔，我想教你一些基本的<code class="fe lw lx ly lz b">SELECT</code>和<code class="fe lw lx ly lz b">FROM</code>命令之外的 SQL 查询命令，你可能会在工作描述中看到这些命令。我将编写代码，您可以使用这些代码通过<a class="ae kz" href="https://cloud.google.com/public-datasets/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iu"> Google BigQuery 公共数据集</strong> </a>查询<a class="ae kz" href="https://console.cloud.google.com/bigquery?p=bigquery-public-data&amp;d=stackoverflow&amp;page=dataset" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iu"> StackOverflow 数据集</strong> </a>。每月最多可以免费查询 1TB 的这些数据。</p><p id="6bb8" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">对于下面的示例查询，我们将使用<code class="fe lw lx ly lz b">users</code>和<code class="fe lw lx ly lz b">badges</code>表。下面的所有查询都将包含<code class="fe lw lx ly lz b">SELECT</code>和<code class="fe lw lx ly lz b">FROM</code>命令，因此当我们向查询中添加新命令时，部分标题将会显示出来。</p><h1 id="ad65" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">选择，从，限制</h1><pre class="kj kk kl km gt ms lz mt mu aw mv bi"><span id="26c4" class="mw mb it lz b gy mx my l mz na">SELECT *<br/>FROM `bigquery-public-data.stackoverflow.users`<br/>LIMIT 5;</span></pre><p id="2a6c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">结果:从<code class="fe lw lx ly lz b">users</code>表中返回所有列<code class="fe lw lx ly lz b">*</code>，并将其限制为五行。</p><pre class="kj kk kl km gt ms lz mt mu aw mv bi"><span id="49dc" class="mw mb it lz b gy mx my l mz na">SELECT id, display_name<br/>FROM `bigquery-public-data.stackoverflow.users`<br/>LIMIT 5;</span></pre><p id="b453" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">结果:从<code class="fe lw lx ly lz b">users</code>表中返回<code class="fe lw lx ly lz b">id</code>和<code class="fe lw lx ly lz b">display_name</code>列，将其限制为五行。</p><pre class="kj kk kl km gt ms lz mt mu aw mv bi"><span id="c1da" class="mw mb it lz b gy mx my l mz na">SELECT u.id, u.display_name<br/>FROM `bigquery-public-data.stackoverflow.users` AS u<br/>LIMIT 5;</span></pre><p id="4b03" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">结果:这是与前一个查询相同的查询。</p><p id="dba2" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们现在看到<code class="fe lw lx ly lz b">u.</code>被添加到我们的列中，而<code class="fe lw lx ly lz b">AS u</code>被添加到我们的第二行代码中。这叫做命名空间；这样我们可以给我们的表一个临时的别名。当从多个表中查询时，用表的别名作为列的前缀非常有用，我们将在后面看到。同样值得注意的是，第二行代码没有<code class="fe lw lx ly lz b">AS</code>也会工作，像这样:<code class="fe lw lx ly lz b">FROM `bigquery-public-data.stackoverflow.users` u</code>。</p><h1 id="3f0a" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">不同，排序依据</h1><pre class="kj kk kl km gt ms lz mt mu aw mv bi"><span id="7bc9" class="mw mb it lz b gy mx my l mz na">SELECT DISTINCT u.id, u.display_name as name<br/>FROM `bigquery-public-data.stackoverflow.users` u<br/>ORDER BY u.display_name ASC<br/>LIMIT 5;</span></pre><p id="049e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">结果:从<code class="fe lw lx ly lz b">users</code>表中返回<code class="fe lw lx ly lz b">id</code>和<code class="fe lw lx ly lz b">display_name</code>列的五个唯一行(<code class="fe lw lx ly lz b">DISTINCT</code>)。它按照<code class="fe lw lx ly lz b">display_name</code>列的升序(或字母顺序)对它们进行排序。我们还可以看到<code class="fe lw lx ly lz b">display_name</code>列已经被临时别名为“name”。</p><h1 id="dbbe" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">哪里，和，或者</h1><pre class="kj kk kl km gt ms lz mt mu aw mv bi"><span id="cf8e" class="mw mb it lz b gy mx my l mz na">SELECT *<br/>FROM `bigquery-public-data.stackoverflow.users` u<br/>WHERE u.up_votes &gt;= 500 AND u.reputation &gt;= 100<br/>LIMIT 10;</span></pre><p id="f3b6" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">第三行的<code class="fe lw lx ly lz b">AND</code>可以用<code class="fe lw lx ly lz b">OR</code>代替，下面我用其中一个解释结果。</p><p id="8a25" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">带有<code class="fe lw lx ly lz b">AND</code>的结果:返回<code class="fe lw lx ly lz b">users</code>表中的所有列(*)，限制为十个结果，<strong class="lc iu">其中</strong>的投票数等于或大于 500<strong class="lc iu">且</strong>的信誉分数等于或大于 100。</p><p id="5736" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">使用<code class="fe lw lx ly lz b">OR</code>的结果:返回<code class="fe lw lx ly lz b">users</code>表中的所有列(*)，限制为十个结果，<strong class="lc iu">其中</strong>支持票数等于或大于 500<strong class="lc iu">或</strong>信誉分数等于或大于 100。</p><h1 id="1bb6" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">喜欢，我喜欢</h1><pre class="kj kk kl km gt ms lz mt mu aw mv bi"><span id="4cf2" class="mw mb it lz b gy mx my l mz na">SELECT u.display_name, u.location <br/>FROM `bigquery-public-data.stackoverflow.users` u<br/>WHERE u.location LIKE 'United%'<br/>LIMIT 10;</span></pre><p id="c0e0" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">结果:从<code class="fe lw lx ly lz b">users</code>表中返回 display_name 和 location 列，将其限制为十行，其中位置名称<strong class="lc iu">以</strong>“United”开头。所以我们会看到居住在美国、英国等地的用户。在我们的结果中。或者，<code class="fe lw lx ly lz b">WHERE u.location LIKE ‘%United’</code>将返回位置名称<strong class="lc iu">以</strong>结尾的用户。因此，我们可能会看到用户在位置字段中输入错误，如“美国”。</p><p id="174f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">需要注意四点:</p><ul class=""><li id="8821" class="nb nc it lc b ld le lg lh lj nd ln ne lr nf lv ng nh ni nj bi translated">百分号(%)是通配符</li><li id="6f86" class="nb nc it lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated">你可以用<code class="fe lw lx ly lz b">NOT LIKE</code>否定一个<code class="fe lw lx ly lz b">LIKE</code></li><li id="ed14" class="nb nc it lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated"><code class="fe lw lx ly lz b">LIKE</code>区分大小写，因此大写很重要</li><li id="013b" class="nb nc it lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated"><code class="fe lw lx ly lz b">ILIKE</code>不区分大小写<code class="fe lw lx ly lz b">LIKE</code>，因此大小写无关紧要</li></ul><h1 id="dd1c" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">内部连接</h1><p id="8f63" class="pw-post-body-paragraph la lb it lc b ld np ju lf lg nq jx li lj nr ll lm ln ns lp lq lr nt lt lu lv im bi translated">通常需要在一个查询中组合多个表中的数据。我们可以通过连接表来实现这一点。有几种类型的联接，但最常见的是内部联接，如下所示。</p><pre class="kj kk kl km gt ms lz mt mu aw mv bi"><span id="c410" class="mw mb it lz b gy mx my l mz na">SELECT b.name, b.class, u.display_name<br/>FROM `bigquery-public-data.stackoverflow.badges` b<br/>INNER JOIN `bigquery-public-data.stackoverflow.users` u<br/>ON b.user_id = u.id<br/>WHERE b.class = 1 <br/>LIMIT 5;</span></pre><p id="c1f6" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">结果:返回徽章的名称和类别以及用户的关联显示名称，其中类别等于 1，结果限制为 5 个。</p><h1 id="3d0c" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">分组依据，AVG</h1><p id="6583" class="pw-post-body-paragraph la lb it lc b ld np ju lf lg nq jx li lj nr ll lm ln ns lp lq lr nt lt lu lv im bi translated">有时我们需要将数据分组，然后运行聚合函数。一些常用的聚合函数有<code class="fe lw lx ly lz b">COUNT</code>、<code class="fe lw lx ly lz b">MIN</code>和<code class="fe lw lx ly lz b">MAX</code> —我们在下面的例子中重点关注<code class="fe lw lx ly lz b">AVG</code>。</p><pre class="kj kk kl km gt ms lz mt mu aw mv bi"><span id="7100" class="mw mb it lz b gy mx my l mz na">SELECT b.name, AVG(u.reputation)<br/>FROM `bigquery-public-data.stackoverflow.badges` b<br/>INNER JOIN `bigquery-public-data.stackoverflow.users` u<br/>ON b.user_id = u.id <br/>GROUP BY b.name<br/>LIMIT 5;</span></pre><p id="4906" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">结果:回答此问题—每个徽章的平均用户声誉得分是多少？</p></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><p id="1dee" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我希望这个指南能成为一个有用的资源，让你轻松地进行 SQL 查询。要了解更多关于这种语言的知识，我推荐查看 Connor Leech 的这个伟大的<a class="ae kz" href="https://medium.com/employbl/know-sql-in-2018-da375106fc4f" rel="noopener"> <strong class="lc iu">资源</strong> </a>。如果你有任何问题，你喜欢/不喜欢什么，或者想在下面的评论中看到更多，请告诉我！</p></div></div>    
</body>
</html>