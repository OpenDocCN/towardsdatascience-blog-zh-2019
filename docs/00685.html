<html>
<head>
<title>PyViz: Simplifying the Data Visualisation process in Python.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PyViz:简化 Python 中的数据可视化过程。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/pyviz-simplifying-the-data-visualisation-process-in-python-1b6d2cb728f1?source=collection_archive---------0-----------------------#2019-02-01">https://towardsdatascience.com/pyviz-simplifying-the-data-visualisation-process-in-python-1b6d2cb728f1?source=collection_archive---------0-----------------------#2019-02-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="45ab" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">PyViz 生态系统概述，使 Python 中的数据可视化更容易使用、学习和更强大。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://www.kdnuggets.com/2019/07/top-stories-2019-jun.html"><div class="gh gi ki"><img src="../Images/9730731e8efb7d7a1240a70cd161d252.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sU4a8jsFMa7BBaNPhniCCg.png"/></div></a></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kq"><img src="../Images/974e48242504043c3c1e269a926b986c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*f-0YDR2PoEVgFboF"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Photo by <a class="ae kz" href="https://unsplash.com/@isaacmsmith?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Isaac Smith</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><blockquote class="la"><p id="f344" class="lb lc it bd ld le lf lg lh li lj lk dk translated">可视化的目的是洞察力，而不是图片。本·施奈德曼</p></blockquote><p id="7311" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf lk im bi translated">如果你和数据打交道，那么数据可视化就是你日常工作的一个重要部分。如果您使用 Python 进行分析，您应该会被数据可视化库形式的大量选择所淹没。一些像 Matplotlib 这样的库用于最初的基本探索，但对于显示数据中的复杂关系并不那么有用。有一些可以很好地处理大型数据集，而还有一些主要关注 3D 渲染。事实上，没有一个可视化库可以称得上是最好的。一个比另一个有某些特征，反之亦然。简而言之，有很多选择，不可能学会并尝试所有的选择，或者让它们一起工作。那么我们如何完成我们的工作呢？PyViz 可能有答案</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="5de9" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">Python 当前的可视化前景</h1><p id="add5" class="pw-post-body-paragraph ll lm it ln b lo nf ju lq lr ng jx lt lu nh lw lx ly ni ma mb mc nj me mf lk im bi translated">现有的 Python 数据可视化系统似乎是一个混乱的网格。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nk"><img src="../Images/c8d43733ea17a1e18e541a4c1927af44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K8q5e6QuHTGSPtObumouVQ.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk"><a class="ae kz" href="http://pyviz.org/tutorial/01_Workflow_Introduction.html" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure><p id="1afb" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated">现在，从所有这些工具中选择最适合我们工作的工具有点棘手和令人困惑。PyViz 试图堵住这种情况。它有助于简化在 web 浏览器中处理小型和大型数据集(从几个点到几十亿)的过程，无论是进行探索性分析、制作简单的基于小部件的工具还是构建功能全面的仪表板</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="16d5" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">PyViz 生态系统</h1><p id="aae0" class="pw-post-body-paragraph ll lm it ln b lo nf ju lq lr ng jx lt lu nh lw lx ly ni ma mb mc nj me mf lk im bi translated">PyViz 是一个协调的努力，使 Python 中的数据可视化更容易使用、学习和更强大。PyViz 由一组开源 Python 包组成，可以在 web 浏览器中轻松处理大小数据集。PyViz 只是像 EDA 这样简单的东西或者像创建一个支持小部件的仪表板这样复杂的东西的选择。</p><blockquote class="nq nr ns"><p id="679d" class="ll lm nt ln b lo nl ju lq lr nm jx lt nu nn lw lx nv no ma mb nw np me mf lk im bi translated"><strong class="ln iu">这是 Python 使用 PyViz 的可视化景观。</strong></p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nk"><img src="../Images/58b90d27abd1f216f173e2b03f998832.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QlF69QpvfTQsf2pulCj1og.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk"><a class="ae kz" href="http://pyviz.org/tutorial/01_Workflow_Introduction.html" rel="noopener ugc nofollow" target="_blank">source</a></figcaption></figure><h1 id="7046" class="mn mo it bd mp mq nx ms mt mu ny mw mx jz nz ka mz kc oa kd nb kf ob kg nd ne bi translated">PyViz 目标</h1><p id="283a" class="pw-post-body-paragraph ll lm it ln b lo nf ju lq lr ng jx lt lu nh lw lx ly ni ma mb mc nj me mf lk im bi translated">Pyviz 的一些重要目标是:</p><ul class=""><li id="7ad0" class="oc od it ln b lo nl lr nm lu oe ly of mc og lk oh oi oj ok bi translated">重点应该放在没有编码的任何大小的数据上</li><li id="40bb" class="oc od it ln b lo ol lr om lu on ly oo mc op lk oh oi oj ok bi translated">完整的功能和交互性应该可以在浏览器(而不是桌面)中获得</li><li id="08e9" class="oc od it ln b lo ol lr om lu on ly oo mc op lk oh oi oj ok bi translated">重点应该更多地放在 Python 用户而不是 web 程序员身上。</li><li id="0bc5" class="oc od it ln b lo ol lr om lu on ly oo mc op lk oh oi oj ok bi translated">再次强调，我们应该更多地关注 2D，而不是 3D。</li><li id="c1ea" class="oc od it ln b lo ol lr om lu on ly oo mc op lk oh oi oj ok bi translated">利用 Python 用户已经熟悉的通用 SciPy/PyData 工具。</li></ul><h1 id="45ae" class="mn mo it bd mp mq nx ms mt mu ny mw mx jz nz ka mz kc oa kd nb kf ob kg nd ne bi translated">图书馆</h1><p id="5c6c" class="pw-post-body-paragraph ll lm it ln b lo nf ju lq lr ng jx lt lu nh lw lx ly ni ma mb mc nj me mf lk im bi translated">构成 PyViz 的开源<a class="ae kz" href="http://pyviz.org/background.html" rel="noopener ugc nofollow" target="_blank">库</a>有:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/b5c9b9e36c1ac4abe8463e195e6a62dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*Tw1LzNLwcmpJPVI0v1ZsVA.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi or"><img src="../Images/44a7f5ce038411dc56c2bbd8f9262f4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:368/format:webp/1*I-xXZpedIymi1cP3RRrhHw.png"/></div></div></figure><ul class=""><li id="a238" class="oc od it ln b lo nl lr nm lu oe ly of mc og lk oh oi oj ok bi translated"><a class="ae kz" href="http://holoviews.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ln iu"/></a>:用于即时可视化数据的声明性对象，从方便的高级规范构建散景图</li><li id="543c" class="oc od it ln b lo ol lr om lu on ly oo mc op lk oh oi oj ok bi translated"><a class="ae kz" href="http://geo.holoviews.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ln iu">【geo views】</strong></a>:可与 HoloViews 对象混合匹配的可视化地理数据</li><li id="b403" class="oc od it ln b lo ol lr om lu on ly oo mc op lk oh oi oj ok bi translated"><a class="ae kz" href="http://bokeh.pydata.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln iu">散景</strong></a>:web 浏览器中的交互式绘图，运行 JavaScript 但受 Python 控制</li><li id="0c1f" class="oc od it ln b lo ol lr om lu on ly oo mc op lk oh oi oj ok bi translated"><a class="ae kz" href="http://panel.pyviz.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln iu">面板</strong> </a>:将许多不同库中的对象组装到一个布局或应用程序中，无论是在 Jupyter 笔记本中还是在独立的可服务仪表板中</li><li id="9daa" class="oc od it ln b lo ol lr om lu on ly oo mc op lk oh oi oj ok bi translated"><a class="ae kz" href="http://datashader.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln iu"> Datashader </strong> </a>:将庞大的数据集快速栅格化为固定大小的图像</li><li id="5526" class="oc od it ln b lo ol lr om lu on ly oo mc op lk oh oi oj ok bi translated"><a class="ae kz" href="http://hvplot.pyviz.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln iu"> hvPlot </strong> </a>:从你的熊猫、Xarray 或其他数据结构中快速返回交互式全息视图或地理视图对象</li><li id="2283" class="oc od it ln b lo ol lr om lu on ly oo mc op lk oh oi oj ok bi translated"><a class="ae kz" href="http://param.pyviz.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln iu"> Param </strong> </a>:声明与用户相关的参数，使得在笔记本上下文内外使用小部件变得简单</li></ul><p id="9e49" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated">除此之外，PyViz 核心工具可以与以下库无缝协作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi os"><img src="../Images/f224f3b7aa29ffc90260e72c24c49ff7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vLyOZJcgq3gqBGpW8uColA.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ot"><img src="../Images/2c90504c7cc50695f568ae116225e4b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j5qy-a0cCwgOeeWjdf6Ztw.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/03cd8f553aec8b5b4ac538aa4e26e80d.png" data-original-src="https://miro.medium.com/v2/resize:fit:188/format:webp/1*b9F0BvlcRt9fXfzOQ52YOg.png"/></div></figure><p id="0f95" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated">此外，几乎所有其他绘图库中的对象都可以与<a class="ae kz" href="https://panel.pyviz.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln iu">面板</strong> </a>一起使用，包括对这里列出的所有对象的特定支持，以及任何可以生成 HTML、PNG 或 SVG 的对象。<strong class="ln iu"> HoloViews </strong>也支持<a class="ae kz" href="https://plot.ly/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln iu"> Plotly </strong> </a>进行 3D 可视化。</p><h1 id="63f0" class="mn mo it bd mp mq nx ms mt mu ny mw mx jz nz ka mz kc oa kd nb kf ob kg nd ne bi translated">资源</h1><p id="c405" class="pw-post-body-paragraph ll lm it ln b lo nf ju lq lr ng jx lt lu nh lw lx ly ni ma mb mc nj me mf lk im bi translated">PyViz 提供了示例、演示和培训材料，记录了如何解决可视化问题。本教程为解决您自己的可视化问题提供了起点。整个教程材料也存放在他们的<a class="ae kz" href="https://github.com/pyviz/pyviz" rel="noopener ugc nofollow" target="_blank"> Github 仓库</a>中。</p><div class="ov ow gp gr ox oy"><a href="http://pyviz.org/tutorial/index.html#" rel="noopener  ugc nofollow" target="_blank"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd iu gy z fp pd fr fs pe fu fw is bi translated">PyViz 教程— PyViz 0.9.13a3 文档</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">如何用 Python 工具解决可视化问题？</h3></div><div class="pg l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">pyviz.org</p></div></div><div class="ph l"><div class="pi l pj pk pl ph pm ko oy"/></div></div></a></div></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="0e2e" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">装置</h1><p id="fd31" class="pw-post-body-paragraph ll lm it ln b lo nf ju lq lr ng jx lt lu nh lw lx ly ni ma mb mc nj me mf lk im bi translated">请咨询<a class="ae kz" href="https://pyviz.org" rel="noopener ugc nofollow" target="_blank">pyviz.org</a>获取这些教程中使用的软件安装的完整说明。假设你已经下载并安装了<a class="ae kz" href="https://www.anaconda.com/download" rel="noopener ugc nofollow" target="_blank"> Anaconda </a>或<a class="ae kz" href="https://conda.io/miniconda.html" rel="noopener ugc nofollow" target="_blank"> Miniconda </a>，以下是这些指令的精简版:</p><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="a1db" class="ps mo it po b gy pt pu l pv pw"><strong class="po iu">conda create -n pyviz-tutorial python=3.6<br/>conda activate pyviz-tutorial<br/>conda install -c pyviz/label/dev pyviz<br/>pyviz examples<br/>cd pyviz-examples<br/>jupyter notebook</strong></span></pre><p id="d444" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated">一旦安装完毕，下面的单元格应该会显示“1.11.0a4”或更高版本:</p><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="9467" class="ps mo it po b gy pt pu l pv pw"><strong class="po iu">import</strong> <strong class="po iu">holoviews</strong> <strong class="po iu">as</strong> <strong class="po iu">hv</strong><br/>hv.__version__</span><span id="e020" class="ps mo it po b gy px pu l pv pw">'1.11.0a11'</span><span id="93eb" class="ps mo it po b gy px pu l pv pw">hv.extension('bokeh', 'matplotlib')<br/>#should see the HoloViews, Bokeh, and Matplotlib logos</span><span id="df3b" class="ps mo it po b gy px pu l pv pw"><strong class="po iu">#Import necessary libraries<br/>import</strong> <strong class="po iu">pandas</strong><br/><strong class="po iu">import</strong> <strong class="po iu">datashader</strong><br/><strong class="po iu">import</strong> <strong class="po iu">dask</strong><br/><strong class="po iu">import</strong> <strong class="po iu">geoviews</strong><br/><strong class="po iu">import</strong> <strong class="po iu">bokeh</strong></span></pre><p id="3edf" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated">如果它没有错误地完成，您的环境应该准备好了。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="6c2b" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">使用 PyViz 探索数据</h1><p id="8664" class="pw-post-body-paragraph ll lm it ln b lo nf ju lq lr ng jx lt lu nh lw lx ly ni ma mb mc nj me mf lk im bi translated">在这一节中，我们将看到不同的库如何有效地从数据中获得不同的见解，它们的结合确实有助于以更好的方式分析数据。</p><h2 id="325d" class="ps mo it bd mp py pz dn mt qa qb dp mx lu qc qd mz ly qe qf nb mc qg qh nd qi bi translated">资料组</h2><p id="9851" class="pw-post-body-paragraph ll lm it ln b lo nf ju lq lr ng jx lt lu nh lw lx ly ni ma mb mc nj me mf lk im bi translated">正在使用的数据集与美国各州每 10 万人中记录的<a class="ae kz" href="http://graphics.wsj.com/infectious-diseases-and-vaccines/#b02g20t20w15" rel="noopener ugc nofollow" target="_blank">麻疹和百日咳病例数</a>有关。数据集预装在 PyViz 教程中。</p><h2 id="6781" class="ps mo it bd mp py pz dn mt qa qb dp mx lu qc qd mz ly qe qf nb mc qg qh nd qi bi translated">熊猫的数据探索</h2><p id="2dc5" class="pw-post-body-paragraph ll lm it ln b lo nf ju lq lr ng jx lt lu nh lw lx ly ni ma mb mc nj me mf lk im bi translated">在任何数据科学项目中，从熊猫开始探索是很自然的。让我们导入并显示数据集的前几行。</p><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="083d" class="ps mo it po b gy pt pu l pv pw"><strong class="po iu">import</strong> <strong class="po iu">pandas</strong> <strong class="po iu">as</strong> <strong class="po iu">pd</strong></span><span id="82e2" class="ps mo it po b gy px pu l pv pw">diseases_data = pd.read_csv('../data/diseases.csv.gz')<br/>diseases_data.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi qj"><img src="../Images/de07d2ff5a64f5f298cc3f90265e9d2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*Ejqm_7P1kCRHIX4403Ud8w.png"/></div></div></figure><p id="13bd" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated">数字是好的，但图表会让我们对数据中的模式有更好的了解。</p><h2 id="1c64" class="ps mo it bd mp py pz dn mt qa qb dp mx lu qc qd mz ly qe qf nb mc qg qh nd qi bi translated">使用 Matplotlib 进行数据探索</h2><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="07a6" class="ps mo it po b gy pt pu l pv pw"><strong class="po iu">%matplotlib inline</strong></span><span id="df97" class="ps mo it po b gy px pu l pv pw"><strong class="po iu">diseases_data.plot();</strong></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qk"><img src="../Images/79b21e41e8863b85f4061e153f999dc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*H63xRbfdlKapKKaEYfDM5g.png"/></div></figure><p id="4b91" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated">这个传达的不多。让我们对熊猫进行一些操作，以获得有意义的结果。</p><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="7f08" class="ps mo it po b gy pt pu l pv pw"><strong class="po iu">import numpy as np</strong></span><span id="2a12" class="ps mo it po b gy px pu l pv pw"><strong class="po iu">diseases_by_year = diseases_data[["Year","measles"]].groupby("Year").aggregate(np.sum)</strong></span><span id="fd69" class="ps mo it po b gy px pu l pv pw"><strong class="po iu">diseases_by_year.plot();</strong></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ql"><img src="../Images/748208117f9d4698c805b3afa68a69a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/1*7HNhHq15hKe7Fj6EQlEfrg.png"/></div></figure><p id="38ee" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated">这更有意义。在这里，我们可以清楚地推断出，在 1970 年左右，发生了一些事情，使麻疹发病率下降到几乎为零。这是事实，因为麻疹疫苗在 1963 年左右被引入美国</p><h2 id="e83c" class="ps mo it bd mp py pz dn mt qa qb dp mx lu qc qd mz ly qe qf nb mc qg qh nd qi bi translated">使用 HVPlot 和散景进行数据探索</h2><p id="39bd" class="pw-post-body-paragraph ll lm it ln b lo nf ju lq lr ng jx lt lu nh lw lx ly ni ma mb mc nj me mf lk im bi translated">上面的图传达了正确的信息，但没有提供交互性。这是因为它们是静态图，没有 web 浏览器中的平移、悬停或缩放功能。然而，我们可以通过简单地导入<code class="fe qm qn qo po b"><strong class="ln iu"> hvplot</strong></code>包来实现这种交互功能。</p><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="d1b3" class="ps mo it po b gy pt pu l pv pw"><strong class="po iu">import hvplot.pandas</strong></span><span id="42ee" class="ps mo it po b gy px pu l pv pw"><strong class="po iu">diseases_by_year.hvplot()</strong></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qp"><img src="../Images/5dfaf2dcebe4951ed5af6927330e3f35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/1*rwEJnxATIJDnI1OkCOTGqQ.gif"/></div></figure><p id="2782" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated">该调用返回的内容被称为一个<a class="ae kz" href="http://holoviews.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln iu">全息视图</strong> </a>对象(此处为全息视图<a class="ae kz" href="http://holoviews.org/reference/elements/bokeh/Curve.html" rel="noopener ugc nofollow" target="_blank">曲线</a>),其中<em class="nt">将</em>显示为散景图。Holoviews 图丰富得多，在探索数据时很容易捕捉到您的理解。</p><p id="743c" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated">让我们看看 HoloViews 还能做些什么:</p><h2 id="bf42" class="ps mo it bd mp py pz dn mt qa qb dp mx lu qc qd mz ly qe qf nb mc qg qh nd qi bi translated">捕捉情节本身的要点</h2><p id="2edc" class="pw-post-body-paragraph ll lm it ln b lo nf ju lq lr ng jx lt lu nh lw lx ly ni ma mb mc nj me mf lk im bi translated">1963 年对麻疹来说很重要，我们把这一点记录在图表上怎么样。这也将有助于我们比较接种疫苗前后的麻疹病例数。</p><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="a049" class="ps mo it po b gy pt pu l pv pw"><strong class="po iu">import holoviews as hv<br/>vline = hv.VLine(1963).options(color='red')</strong></span><span id="46f2" class="ps mo it po b gy px pu l pv pw"><strong class="po iu">vaccination_introduced = diseases_by_year.hvplot() * vline * \<br/>    hv.Text(1963, 27000, "Measles Vaccine Introduced", halign='left')</strong></span><span id="b6fc" class="ps mo it po b gy px pu l pv pw"><strong class="po iu">vaccination_introduced</strong></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qq"><img src="../Images/d2376b0af4f024dc93ae30ed822ff7e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*NebOYPn7QpWXVlT9UxEhKQ.png"/></div></figure><p id="46d9" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated">与其他绘图库不同，Holoviews 对象保留原始数据。例如，可以访问表格格式的原始数据。</p><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="758a" class="ps mo it po b gy pt pu l pv pw"><strong class="po iu">print(vaccination_introduced)<br/>vaccination_introduced.Curve.I.data.head()</strong></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qr"><img src="../Images/775bc954de0b413629b0db3b77f406d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*_MDbOOEuPqY4yzm6F1CJXQ.png"/></div></figure><p id="3ebf" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated">在这里，我们能够使用用于绘制图表的数据。此外，现在很容易以多种不同的方式分解数据。</p><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="f031" class="ps mo it po b gy pt pu l pv pw"><strong class="po iu">measles_agg = diseases_data.groupby(['Year', 'State'])['measles'].sum()<br/>by_state = measles_agg.hvplot('Year', groupby='State', width=500, dynamic=False)</strong></span><span id="be03" class="ps mo it po b gy px pu l pv pw"><strong class="po iu">by_state * vline</strong></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qs"><img src="../Images/06b2d48bdd47aab7d6f6d18fe1cc8005.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/1*e06bgLCzgyKmhXb1BD2bow.gif"/></div></figure><p id="9366" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated">为了更好地比较，我们可以将图表并排放置，而不是下拉列表。</p><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="d37c" class="ps mo it po b gy pt pu l pv pw"><strong class="po iu">by_state["Alabama"].relabel('Alabama') + by_state["Florida"].relabel('Florida')</strong></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi qt"><img src="../Images/9a5e7e998505754a7b6d5a2b97b59de4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cmvpwPEKLS7AFEuTJBWwlQ.png"/></div></div></figure><p id="c9e5" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated">我们也可以改变图的类型，比如说条形图。让我们比较四个州从 1980 年到 1985 年的麻疹模式。</p><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="6d99" class="ps mo it po b gy pt pu l pv pw"><strong class="po iu">states = ['New York', 'Alabama', 'California', 'Florida']<br/>measles_agg.loc[1980:1990, states].hvplot.bar('Year', by='State', rot=90)</strong></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qu"><img src="../Images/1fd01095266e4f5127f56d132b10c389.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WrKtmUqKyPPD7A4nOz4PUA.png"/></div></figure><p id="3278" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated">从上面的例子中可以明显看出，通过选择<strong class="ln iu">全息视图+散景</strong>图，我们能够在浏览器中探索数据，具有完全的交互性和最少的代码。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h2 id="1bff" class="ps mo it bd mp py pz dn mt qa qb dp mx lu qc qd mz ly qe qf nb mc qg qh nd qi bi translated">用 PyViz 可视化大型数据集</h2><p id="e1ef" class="pw-post-body-paragraph ll lm it ln b lo nf ju lq lr ng jx lt lu nh lw lx ly ni ma mb mc nj me mf lk im bi translated">PyViz 还支持轻松处理非常大的数据集。对于这样的数据集，PyViz 套件的其他成员也参与进来。</p><ul class=""><li id="0e03" class="oc od it ln b lo nl lr nm lu oe ly of mc og lk oh oi oj ok bi translated"><a class="ae kz" href="http://geoviews.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln iu">地景</strong> </a></li><li id="06cf" class="oc od it ln b lo ol lr om lu on ly oo mc op lk oh oi oj ok bi translated"><a class="ae kz" href="http://datashader.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln iu">数据着色器</strong> </a></li><li id="b3e8" class="oc od it ln b lo ol lr om lu on ly oo mc op lk oh oi oj ok bi translated"><a class="ae kz" href="https://panel.pyviz.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln iu">面板</strong> </a></li><li id="49df" class="oc od it ln b lo ol lr om lu on ly oo mc op lk oh oi oj ok bi translated"><a class="ae kz" href="https://param.pyviz.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln iu">参数</strong> </a></li><li id="2a0e" class="oc od it ln b lo ol lr om lu on ly oo mc op lk oh oi oj ok bi translated"><a class="ae kz" href="https://colorcet.pyviz.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln iu">色彩</strong> </a> <strong class="ln iu">用于</strong>感知上统一的大数据色彩映射表</li></ul><p id="caaa" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated">为了向您展示这些库在处理大量数据时的能力，让我们使用 NYC taxi 数据集，该数据集包含与多达 1000 万次出租车出行相关的数据。这个数据已经在教程中提供了。</p><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="c894" class="ps mo it po b gy pt pu l pv pw"><strong class="po iu">#Importing the necessary libraries</strong></span><span id="b6c1" class="ps mo it po b gy px pu l pv pw">import dask.dataframe as dd, geoviews as gv, cartopy.crs as crs<br/>from colorcet import fire<br/>from holoviews.operation.datashader import datashade<br/>from geoviews.tile_sources import EsriImagery</span></pre><p id="382c" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated"><a class="ae kz" href="http://docs.dask.org/en/latest/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln iu"> Dask </strong> </a>是 Python 中一个灵活的并行计算库。Dask 数据帧是一个大型并行数据帧，由许多较小的 Pandas 数据帧组成，沿索引拆分。这些 Pandas 数据帧可能存在于磁盘上，用于单台机器或集群中许多不同机器上的大内存计算。一个 Dask 数据帧操作触发对组成 Pandas 数据帧的许多操作。</p><p id="c9ef" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated"><a class="ae kz" href="https://scitools.org.uk/cartopy/docs/latest/" rel="noopener ugc nofollow" target="_blank"> <strong class="ln iu"> Cartopy </strong> </a>是一个 Python 包，设计用于地理空间数据处理，以生成地图和其他地理空间数据分析。</p><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="f6e7" class="ps mo it po b gy pt pu l pv pw"><strong class="po iu">topts = dict(width=700, height=600, bgcolor='black', xaxis=None, yaxis=None, show_grid=False)<br/>tiles = EsriImagery.clone(crs=crs.GOOGLE_MERCATOR).options(**topts)</strong></span><span id="1338" class="ps mo it po b gy px pu l pv pw"><strong class="po iu">dopts = dict(width=1000, height=600, x_sampling=0.5, y_sampling=0.5)</strong></span></pre><p id="d37e" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated">读入并绘制数据:</p><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="7b4a" class="ps mo it po b gy pt pu l pv pw"><strong class="po iu">taxi  = dd.read_parquet('../data/nyc_taxi_wide.parq').persist()<br/>pts   = hv.Points(taxi, ['pickup_x', 'pickup_y'])<br/>trips = datashade(pts, cmap=fire, **dopts)</strong></span><span id="9eb9" class="ps mo it po b gy px pu l pv pw"><strong class="po iu">tiles * trips</strong></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qv"><img src="../Images/eb6c447915f26da9d19c373baa977a4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/1*QPdAJWd3nQAOfasfe9wNNQ.gif"/></div></figure><p id="6333" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated">我们还可以添加<a class="ae kz" href="http://pyviz.org/tutorial/01_Workflow_Introduction.html" rel="noopener ugc nofollow" target="_blank">小部件</a>来控制选择。这既可以在笔记本中完成，也可以在独立的服务器中完成，方法是用<code class="fe qm qn qo po b">.servable()</code>标记可服务对象，然后运行。ipynb 文件或通过散景服务器提取代码到一个单独的。py 文件并做同样的事情:</p><pre class="kj kk kl km gt pn po pp pq aw pr bi"><span id="3a1f" class="ps mo it po b gy pt pu l pv pw"><strong class="po iu">import param, panel as pn<br/>from colorcet import palette</strong></span><span id="4af3" class="ps mo it po b gy px pu l pv pw"><strong class="po iu">class NYCTaxi(param.Parameterized):<br/>    alpha = param.Magnitude(default=0.75, doc="Map tile opacity")<br/>    cmap = param.ObjectSelector('fire', objects=['fire','bgy','bgyw','bmy','gray','kbc'])<br/>    location = param.ObjectSelector(default='dropoff', objects=['dropoff', 'pickup'])</strong></span><span id="e414" class="ps mo it po b gy px pu l pv pw"><strong class="po iu">    def make_view(self, **kwargs):<br/>        pts   = hv.Points(taxi, [self.location+'_x', self.location+'_y'])<br/>        trips = datashade(pts, cmap=palette[self.cmap], **dopts)<br/>        return tiles.options(alpha=self.alpha) * trips</strong></span><span id="6cc5" class="ps mo it po b gy px pu l pv pw"><strong class="po iu">explorer = NYCTaxi(name="Taxi explorer")<br/>pn.Row(explorer.param, explorer.make_view).servable()</strong></span></pre><p id="a370" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated"><strong class="ln iu">出租车探险家</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi qw"><img src="../Images/5e952985eea046a79be4a7d4e7c1dfae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*adgG8UgiPXCSjksZtdBiDQ.gif"/></div></div></figure><p id="98e4" class="pw-post-body-paragraph ll lm it ln b lo nl ju lq lr nm jx lt lu nn lw lx ly no ma mb mc np me mf lk im bi translated">所有运行代码的笔记本可以从<a class="ae kz" href="https://github.com/parulnith/Data-Visualisation-libraries/tree/master/Data%20Visualisation%20with%20PyViz" rel="noopener ugc nofollow" target="_blank">这里</a>访问。然而，交互性并没有在 GitHub 上表现出来，但是你仍然可以访问笔记本并在本地运行。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h1 id="9926" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">结论</h1><p id="f5f9" class="pw-post-body-paragraph ll lm it ln b lo nf ju lq lr ng jx lt lu nh lw lx ly ni ma mb mc nj me mf lk im bi translated">PyViz 工具可以帮助我们用少量的代码创建漂亮的可视化效果。PyViz 工具捆绑在一起构建高性能、可伸缩、灵活和可部署的可视化、应用程序和仪表板，而无需显式使用 JavaScript 或其他 web 技术。本文只是对多用途 PyViz 生态系统的简单介绍。浏览整个教程，了解不同类型数据的复杂性及其用法。</p></div></div>    
</body>
</html>