<html>
<head>
<title>Bollinger Bands Statistics in Trading</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">交易中的布林线统计</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/bollinger-bands-statistics-in-trading-dcc8783a8f88?source=collection_archive---------15-----------------------#2019-09-06">https://towardsdatascience.com/bollinger-bands-statistics-in-trading-dcc8783a8f88?source=collection_archive---------15-----------------------#2019-09-06</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><p id="4776" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">有很多交易者使用<strong class="jq is">布林线</strong>。我也喜欢布林线。它使用统计数据，并将统计数据带入交易世界。但是有多准确呢？在时间序列中使用标准差是正确的方法吗？一起来了解一下吧！</p><figure class="kn ko kp kq gu kr gi gj paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gi gj km"><img src="../Images/cd35c49894bfd0dceae1d927694a132d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BA80ewZ9viNxKx8EWiUBgA.png"/></div></div><figcaption class="ky kz gk gi gj la lb bd b be z dk">Bollinger Bands</figcaption></figure><blockquote class="lc"><p id="11a7" class="ld le ir bd lf lg lh li lj lk ll kl dk translated">没有领先指标</p></blockquote><p id="019a" class="pw-post-body-paragraph jo jp ir jq b jr lm jt ju jv ln jx jy jz lo kb kc kd lp kf kg kh lq kj kk kl ik bi translated">作为交易者，我们大多数人使用 OHLC 蜡烛图/条形图(开盘-盘高-盘低-收盘)。这张图表向我们展示了过去发生的事情。我们可以清楚地看到一家酒吧在哪里开业、搬迁和关闭。我们使用许多指标。它们都告诉我们过去发生了什么。对我来说；<strong class="jq is">没有领先指标。</strong>过去的就过去了！然而，这是有可能的。如果我们有足够的过去的数据，我们将有足够的基础资产的统计数据。</p><blockquote class="lc"><p id="7cf7" class="ld le ir bd lf lg lr ls lt lu lv kl dk translated">数据数据数据…</p></blockquote><p id="fb4d" class="pw-post-body-paragraph jo jp ir jq b jr lm jt ju jv ln jx jy jz lo kb kc kd lp kf kg kh lq kj kk kl ik bi translated">我们需要数据！数据是关键。数据就是一切。我们需要从可靠的来源获取数据。在本文中，我将向您展示如何使用 Python 免费下载数据。我要用 AlphaVantage。</p><p id="414b" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">首先；请在<a class="ae lw" href="http://alphavantage.co/" rel="noopener ugc nofollow" target="_blank"> AlphaVantage </a>网站注册一把免费钥匙。请注意，我不隶属于他们。</p><p id="b142" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">现在让我们使用 Python 下载数据。</p><pre class="kn ko kp kq gu lx ly lz ma aw mb bi"><span id="3106" class="mc md ir ly b gz me mf l mg mh">def load_data(sym="EUR", to_sym="USD", interval="5min", dtype=2, intraday=False, outputsize="full"):<br/>    key = "ENTER_YOUR_KEY"<br/>    if dtype == 1: # Download stock<br/>        if intraday:<br/>            url = "<a class="ae lw" href="https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&amp;interval={}&amp;symbol={}&amp;apikey={}&amp;datatype=csv&amp;outputsize={" rel="noopener ugc nofollow" target="_blank">https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&amp;interval={}&amp;symbol={}&amp;apikey={}&amp;datatype=csv&amp;outputsize={</a>}".format(interval, sym, key, outputsize)<br/>        else:<br/>            url = "<a class="ae lw" href="https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&amp;symbol={}&amp;apikey={}&amp;datatype=csv&amp;outputsize={" rel="noopener ugc nofollow" target="_blank">https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&amp;symbol={}&amp;apikey={}&amp;datatype=csv&amp;outputsize={</a>}".format(sym, key, outputsize)<br/>    elif dtype == 2: # Download forex<br/>        print("FX")<br/>        if intraday:<br/>            url = "<a class="ae lw" href="https://www.alphavantage.co/query?function=FX_INTRADAY&amp;interval={}&amp;from_symbol={}&amp;to_symbol={}&amp;apikey={}&amp;datatype=csv&amp;outputsize={" rel="noopener ugc nofollow" target="_blank">https://www.alphavantage.co/query?function=FX_INTRADAY&amp;interval={}&amp;from_symbol={}&amp;to_symbol={}&amp;apikey={}&amp;datatype=csv&amp;outputsize={</a>}".format(interval, sym, to_sym, key, outputsize)<br/>        else:<br/>            url = "<a class="ae lw" href="https://www.alphavantage.co/query?function=FX_DAILY&amp;from_symbol={}&amp;to_symbol={}&amp;apikey={}&amp;datatype=csv&amp;outputsize={" rel="noopener ugc nofollow" target="_blank">https://www.alphavantage.co/query?function=FX_DAILY&amp;from_symbol={}&amp;to_symbol={}&amp;apikey={}&amp;datatype=csv&amp;outputsize={</a>}".format(sym, to_sym, key, outputsize)<br/>    elif dtype == 3: # Download Crypto<br/>        url = "<a class="ae lw" href="https://www.alphavantage.co/query?function=DIGITAL_CURRENCY_DAILY&amp;symbol={}&amp;market={}&amp;apikey={}&amp;datatype=csv&amp;outputsize={" rel="noopener ugc nofollow" target="_blank">https://www.alphavantage.co/query?function=DIGITAL_CURRENCY_DAILY&amp;symbol={}&amp;market={}&amp;apikey={}&amp;datatype=csv&amp;outputsize={</a>}".format(sym, to_sym, key, outputsize)<br/>    print("Downloading", url)<br/>    print("---")<br/>    df = pd.read_csv(url)</span><span id="17c2" class="mc md ir ly b gz mi mf l mg mh"># rename columns<br/>    if dtype == 3:<br/>        df.rename(columns={'timestamp': 'Date', 'open (USD)': 'Open', 'high (USD)': 'High', 'low (USD)': 'Low', 'close (USD)': 'Close', 'volume': 'Volume'}, inplace=True)<br/>    else:<br/>        df.rename(columns={'timestamp': 'Date', 'open': 'Open', 'high': 'High', 'low': 'Low', 'close': 'Close', 'volume': 'Volume'}, inplace=True)<br/>    df.sort_values(by="Date", ascending=True, inplace=True)<br/>    print("Data loaded:", len(df), "rows")<br/>    return df</span><span id="5a6b" class="mc md ir ly b gz mi mf l mg mh"># Options<br/>sym = "EUR"<br/>to_sym = "USD" # only for fx and cryptocurrency<br/>intraday = False # False: Daily<br/>interval = "5min" # 1min 5min 15min 30min 60min - only if intraday is set to True<br/>dtype = 2 # 1: stock 2: fx 3: crypto</span><span id="966c" class="mc md ir ly b gz mi mf l mg mh"># load data<br/>df = load_data(sym, to_sym, interval, dtype, intraday)</span></pre><p id="fb1c" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">我们已经下载了我们的数据，下面是它的样子。</p><pre class="kn ko kp kq gu lx ly lz ma aw mb bi"><span id="3db4" class="mc md ir ly b gz me mf l mg mh">df['Close'].plot(figsize=(15, 10))</span></pre><figure class="kn ko kp kq gu kr gi gj paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gi gj mj"><img src="../Images/2a5fc532238273e8fdf486ad43328864.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SY5l4yUeCAA-OdsiZGIwgg.png"/></div></div><figcaption class="ky kz gk gi gj la lb bd b be z dk">EURUSD Daily Closing Prices</figcaption></figure><p id="60da" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">这是欧元兑美元的日线图。现在我们需要做的是在图表上添加<strong class="jq is">布林线</strong>并计算统计数据。</p><pre class="kn ko kp kq gu lx ly lz ma aw mb bi"><span id="0e13" class="mc md ir ly b gz me mf l mg mh">def add_bb(df, dev=2, lb=20, col="Close", lines=100):<br/>    df['MA'] = df[col].rolling(lb).mean()<br/>    df['STD'] = df[col].rolling(lb).std()<br/>    df['OVB'] = df['MA'] + df['STD'] * dev<br/>    df['OVS'] = df['MA'] - df['STD'] * dev<br/>    plot_candles(df, lines=lines)<br/>    get_stats(df, dev=dev)</span></pre><p id="102c" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">请注意，我添加了两个新函数。第一个绘制蜡烛线，第二个计算并打印出布林线过去的统计数据。让我们快速定义这些函数。</p><pre class="kn ko kp kq gu lx ly lz ma aw mb bi"><span id="4d5c" class="mc md ir ly b gz me mf l mg mh">def plot_candles(df, lines=100):<br/>    df['Bar'] = df['High'] - df['Low']<br/>    df['Body'] = abs(df['Close'] - df['Open'])<br/>    df['Up'] = df['Close'] &gt; df['Open']<br/>    df['Color'] = np.where(df['Up'], "g", "r")<br/>    if lines &gt; 0:<br/>        db = df[-lines:].reset_index(drop=True).reset_index()<br/>    else:<br/>        db = df.reset_index(drop=True).reset_index()<br/>    plt.figure(figsize=(15, 10))<br/>    plt.bar(db['index'], bottom=db['Low'], height=db['Bar'], color="#000000", width=0.2)<br/>    plt.bar(db['index'], bottom=np.where(db['Up'], db['Open'], db['Close']), height=db['Body'], color=db['Color'], width=0.9)<br/>    plt.plot(db['OVB'], color="b")<br/>    plt.plot(db['OVS'], color="b")<br/>    plt.show()</span><span id="63fa" class="mc md ir ly b gz mi mf l mg mh">def get_stats(df, high_col="Close", low_col="Close", high_dev="OVB", low_dev="OVS", dev=2):<br/>    total = len(df)<br/>    inside = len(df[(df[high_col]&lt;=df[high_dev]) &amp; (df[low_col]&gt;=df[low_dev])])<br/>    upside = len(df[df[high_col]&gt;=df[high_dev]])<br/>    downside = len(df[df[low_col]&lt;=df[low_dev]])<br/>    i = np.round(inside / total * 100, 2)<br/>    u = np.round(upside / total * 100, 2)<br/>    d = np.round(downside / total * 100, 2)<br/>    # Print the stats<br/>    print("Total bars:", total)<br/>    print("Deviation", dev)<br/>    print("Inside: ", i, "%", sep="")<br/>    print("Up side: ", u, "%", sep="")<br/>    print("Down side: ", d, "%", sep="")</span></pre><p id="a5f0" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">现在让我们继续运行 add_bb()函数，看看结果</p><pre class="kn ko kp kq gu lx ly lz ma aw mb bi"><span id="2eea" class="mc md ir ly b gz me mf l mg mh">dev = 2 # standard deviation<br/>lb = 20 # simple moving average (SMA) of last 20 bars including the final bar<br/>lines = 500 # plot last 500 bars only<br/>add_bb(df, dev=dev, lb=lb, lines=lines)</span></pre><figure class="kn ko kp kq gu kr gi gj paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gi gj mk"><img src="../Images/9d814b62a8d2abda7a2484ac4e903ed7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0ey5RI7imFnhNAAdzhK5dQ.png"/></div></div><figcaption class="ky kz gk gi gj la lb bd b be z dk">EURUSD Candlestick chart with Bollinger Bands</figcaption></figure><p id="c645" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">非常好的烛台图表在一个棘手的方式！这是布林线在两个标准差内的统计数据:</p><pre class="kn ko kp kq gu lx ly lz ma aw mb bi"><span id="ba0e" class="mc md ir ly b gz me mf l mg mh">Total bars: 5000<br/>Deviation 2<br/>Inside: 89.96%<br/>Up side: 5.3%<br/>Down side: 4.36%</span></pre><p id="8b70" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">内意味着，总棒线收在 2 个标准差之间；上边意味着，总棒线收在上边带之上，下边意味着，总棒线收在下边带之下。</p><p id="5343" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">现在我们看到的是标准<strong class="jq is">布林线</strong>的“过去”统计数据。请随意更改设置。例如，您可以用 200 SMA 设置一个标准差。</p><h1 id="6104" class="ml md ir bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">布林线准确吗？</h1><p id="6ee4" class="pw-post-body-paragraph jo jp ir jq b jr ni jt ju jv nj jx jy jz nk kb kc kd nl kf kg kh nm kj kk kl ik bi translated">如果你有统计学背景，你应该知道，标准差在正态分布数据中更有效。然而，收盘价不是正态分布的。您可以很容易地看到，运行下面的代码:</p><pre class="kn ko kp kq gu lx ly lz ma aw mb bi"><span id="56e2" class="mc md ir ly b gz me mf l mg mh">df['Close'].hist(bins=500, figsize=(15, 10))</span></pre><figure class="kn ko kp kq gu kr gi gj paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gi gj nn"><img src="../Images/078711bac2954ba57e28956b9f15e008.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KYb8UzT7I2MTDKxJTm_22A.png"/></div></div><figcaption class="ky kz gk gi gj la lb bd b be z dk">EURUSD closing prices histogram</figcaption></figure><p id="3a80" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">你可能认为这看起来像正态分布，但我可以很容易地说，它不是。它应该是这样的:</p><figure class="kn ko kp kq gu kr gi gj paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gi gj no"><img src="../Images/13fc3aadc55bca8e8f87b674ec84b913.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X4FeqKfRb5moE96IKp8EXg.png"/></div></div><figcaption class="ky kz gk gi gj la lb bd b be z dk">Normal distribution</figcaption></figure><p id="9ae0" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">这就是我所说的完美钟形曲线。如果你有这样的直方图，你可以有更好的统计，告诉你更多。波段之间的距离不会像布林线一样宽。</p><h1 id="f7ed" class="ml md ir bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">标准差告诉我们什么？</h1><p id="77fb" class="pw-post-body-paragraph jo jp ir jq b jr ni jt ju jv nj jx jy jz nk kb kc kd nl kf kg kh nm kj kk kl ik bi translated">标准差表示:68.26%的数据落在平均值的一个标准差内，95.44%的数据落在平均值的两个标准差内，99.74%的数据落在平均值的三个标准差内。然而，如果我们使用一个标准偏差进行测试，结果如下:</p><pre class="kn ko kp kq gu lx ly lz ma aw mb bi"><span id="38b7" class="mc md ir ly b gz me mf l mg mh">Total bars: 5000<br/>Deviation 1<br/>Inside: 44.96%<br/>Up side: 28.96%<br/>Down side: 25.7%</span></pre><p id="0075" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">可以尝试股票、外汇、加密货币；它们都给你相似的结果。在我看来，这一点也不准确！</p></div><div class="ab cl np nq hv nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ik il im in io"><h1 id="2a65" class="ml md ir bd mm mn nw mp mq mr nx mt mu mv ny mx my mz nz nb nc nd oa nf ng nh bi translated">结论</h1><p id="e27f" class="pw-post-body-paragraph jo jp ir jq b jr ni jt ju jv nj jx jy jz nk kb kc kd nl kf kg kh nm kj kk kl ik bi translated">从统计学上来说，<strong class="jq is">布林线</strong>可能无法满足你的需求。然而，你可以使用你最喜欢的交易策略，仍然可以获利！</p><p id="0feb" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated"><strong class="jq is">T5】免责声明 T7】</strong></p><p id="1d21" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">我不是专业的财务顾问。这篇文章和代码，分享仅用于教育目的，而不是财务建议。你要对自己的输赢负责。</p><p id="5112" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated"><em class="ob">本文的全部代码可以在这个资源库中找到:</em></p><div class="oc od gq gs oe of"><a href="https://github.com/atillayurtseven/TheCurve/blob/master/Bollinger%20Bands%20Statistics.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fp"><div class="oh ab oi cl cj oj"><h2 class="bd is gz z fq ok fs ft ol fv fx iq bi translated">atillayurtseven/TheCurve</h2><div class="om l"><h3 class="bd b gz z fq ok fs ft ol fv fx dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="on l"><p class="bd b dl z fq ok fs ft ol fv fx dk translated">github.com</p></div></div><div class="oo l"><div class="op l oq or os oo ot kw of"/></div></div></a></div><p id="0ad7" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated"><strong class="jq is">啊也；记得在以下社交渠道关注我:</strong></p><p id="40da" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated"><a class="ae lw" href="https://medium.com/@atillayurtseven" rel="noopener">中等</a> <br/> <a class="ae lw" href="https://twitter.com/atillayurtseven" rel="noopener ugc nofollow" target="_blank">推特</a> <br/> <a class="ae lw" href="https://www.tradingview.com/u/AtillaYurtseven/" rel="noopener ugc nofollow" target="_blank">交易视图</a></p><p id="ea1f" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">直到下次；保持安全，交易安全！！！</p><p id="2655" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">阿蒂拉·尤尔特塞文</p><p id="17d9" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated"><strong class="jq is"> <em class="ob">来自《走向数据科学》编辑的注释:</em> </strong> <em class="ob">虽然我们允许独立作者根据我们的</em> <a class="ae lw" rel="noopener" target="_blank" href="/questions-96667b06af5"> <em class="ob">规则和指导方针</em> </a> <em class="ob">发表文章，但我们不认可每个作者的贡献。你不应该在没有寻求专业建议的情况下依赖一个作者的作品。详见我们的</em> <a class="ae lw" rel="noopener" target="_blank" href="/readers-terms-b5d780a700a4"> <em class="ob">读者术语</em> </a> <em class="ob">。</em></p></div></div>    
</body>
</html>