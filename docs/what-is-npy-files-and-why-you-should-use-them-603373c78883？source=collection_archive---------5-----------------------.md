# ä»€ä¹ˆæ˜¯ã€‚npy æ–‡ä»¶ä»¥åŠä¸ºä»€ä¹ˆåº”è¯¥ä½¿ç”¨å®ƒä»¬â€¦

> åŸæ–‡ï¼š<https://towardsdatascience.com/what-is-npy-files-and-why-you-should-use-them-603373c78883?source=collection_archive---------5----------------------->

## ä¸ºä»€ä¹ˆä½ åº”è¯¥æ€»æ˜¯ä¿å­˜ä½ çš„æ•°æ®ã€‚npy è€Œä¸æ˜¯ã€‚æˆ˜æ–—æ”¯æ´è½¦

![](img/9804906d1d7558bcdf821be2f7f6e439.png)

An accurate depiction of the feeling you get when loading data from .npy files.

# ä»‹ç»

é¦–å…ˆï¼Œéå¸¸æ„Ÿè°¢æˆ‘çš„ç²‰ä¸ä»¬åœ¨è¿‡å»çš„å‡ ä¸ªæœˆé‡Œä¸€ç›´æ”¯æŒæˆ‘ï¼Œæˆ‘ä¸€ç›´éå¸¸å¿™ï¼Œæ²¡æœ‰å¤ªå¤šçš„æ—¶é—´æ¥å†™æ–‡ç« ã€‚æˆ‘å†³å®šå¯¹æ­¤çš„éƒ¨åˆ†è¡¥æ•‘æ–¹æ³•æ˜¯åšä¸€äº›æ›´çŸ­æ›´å®¹æ˜“æ¶ˆåŒ–çš„æ–‡ç« ï¼Œè¿™æ ·æ›´å®¹æ˜“äº§ç”Ÿï¼å› æ­¤ï¼Œè¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å°è¯•å†™ä¸€ç¯‡ç®€çŸ­æ‰¼è¦çš„æ–‡ç« ã€‚
å¸Œæœ›ä½ è§‰å¾—æœ‰ç”¨ï¼

å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« å¹¶æƒ³çœ‹æ›´å¤šï¼Œè¯·åŠ¡å¿… [**å…³æ³¨æˆ‘çš„ç®€ä»‹**](https://medium.com/@peter.nistrup) ï¼

# TLï¼›åšå£«:

ä»å­˜å‚¨å™¨ä¸­è¯»å–ä¸€åƒä¸‡ä¸ªæ•°æ®ç‚¹æ–‡ä»¶:

![](img/6f0e4504feb780318d7f4a062aef2011.png)

The results speak for themselves.

## ğŸ¥‡ç¬¬ä¸€å:ã€‚npy æ–‡ä»¶ç”¨æ—¶:0.13 ç§’

è¿™æ˜¯ç›®å‰æœ€å¿«çš„æ•°æ®åŠ è½½æ–¹æ³•ã€‚

## ğŸ¥ˆç¬¬äºŒå:ã€‚csv æ–‡ä»¶ç”¨æ—¶:2.66 ç§’

ç†ŠçŒ«è¯æ˜äº†è¿™ä¸€ç‚¹ã€‚csv æ–‡ä»¶ä¸æ˜¯æ²¡ç”¨ï¼Œä½†è¿˜æ˜¯é€Ÿåº¦ä¸å¤Ÿã€‚

## ğŸ¥‰ç¬¬ä¸‰å:ã€‚txt æ–‡ä»¶ç”¨æ—¶:9.67 ç§’

å’Œå…¶ä»–çš„ç›¸æ¯”ï¼Œè¿™ä¸ªå¤ªæ…¢äº†ï¼Œå¾ˆç—›è‹¦ã€‚

# ä¸ºä»€ä¹ˆã€‚npy å’Œ Numpyï¼Ÿ

å¦‚æœä½ æ›¾ç»ç”¨ Python åšè¿‡ä»»ä½•ç±»å‹çš„æ•°æ®å¤„ç†ï¼Œä½ è‚¯å®šä¼šé‡åˆ° **Numpy** å’Œ **Pandas** ã€‚è¿™äº›æ˜¯ Python ä¸­**æ•°æ®ç§‘å­¦çš„å·¨äººï¼Œæ˜¯è®¸å¤šå…¶ä»–åŒ…çš„åŸºç¡€ï¼Œä¹Ÿå°±æ˜¯è¯´ **Numpy** æä¾›äº†åƒ **Scikit-Learn** å’Œ **Tensorflow** æ‰€ä½¿ç”¨çš„åŸºæœ¬å¯¹è±¡ï¼**

é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆæˆ‘è¦è°ˆè®ºè¿™äº›åŒ…ï¼Œä¸ºä»€ä¹ˆç‰¹åˆ«æ˜¯ **Numpy** å‘¢ï¼Ÿä½ å¯èƒ½çŸ¥é“ï¼Œå…³äºæ•°æ®æ–‡ä»¶çš„è¡Œä¸šæ ‡å‡†æ˜¯*ã€‚csv* æ–‡ä»¶ã€‚ç°åœ¨ï¼Œè™½ç„¶å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯ä¸å…¶ä»–é€‰æ‹©ç›¸æ¯”ï¼Œè¿™äº›æ–‡ä»¶å·²ç»é«˜åº¦ä¼˜åŒ–äº†ï¼Œæ¯”å¦‚ T31ã€‚npy æ–‡ä»¶ç”± **Numpy æä¾›ã€‚**

> â€œç®¡ä»–å‘¢ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä»£ç å’Œè¯æ®ï¼â€

å¥½å§ï¼Œç»§ç»­è¡¨æ¼”ï¼

# ä»£ç 

é¦–å…ˆï¼Œæˆ‘ä»¬ç®€å•åœ°åˆ›å»º 1000 ä¸‡ä¸ªéšæœºæ•°æ®ç‚¹ï¼Œå¹¶å°†å…¶ä¿å­˜ä¸ºé€—å·åˆ†éš”å€¼:

ç°åœ¨ï¼Œè®©æˆ‘ä»¬é€šè¿‡ä¼ ç»Ÿæ–¹å¼åŠ è½½ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œç®€å•çš„æ•´å½¢:

è¿™æ˜¯æˆ‘å¾—åˆ°çš„è¾“å‡º:

![](img/92b5b22e5c757090d8485e5bfb054ae0.png)

**Almost 10 seconds to load!**

ç°åœ¨ï¼Œæ‚¨å¯èƒ½ä¼šè®¤ä¸ºæ•´å½¢ä¼šé˜»æ­¢æ›´å¿«çš„åŠ è½½ï¼Œä½†å³ä½¿æˆ‘ä»¬ä¸åšä»»ä½•æ•´å½¢ï¼Œæˆ‘ä»¬ä¹Ÿä¼šå¾—åˆ°ç±»ä¼¼çš„æ—¶é—´ï¼

## ç°åœ¨æˆ‘ä»¬æœ‰äº† 10000 ä¹˜ 1000 çš„æ•°ç»„ï¼Œè®©æˆ‘ä»¬ç»§ç»­å°†å®ƒä¿å­˜ä¸ºã€‚npy æ–‡ä»¶:

```
np.save('data.npy', data_array)
```

å¯¹ï¼Œé‚£å¾ˆç®€å•ï¼Œå¯¹å§ï¼Ÿç°åœ¨æˆ‘ä»¬æœ‰äº†æ•°ç»„ã€‚npy æ ¼å¼è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬èƒ½ä»¥å¤šå¿«çš„é€Ÿåº¦é˜…è¯»å®ƒ:

è¿™ç»™äº†æˆ‘ä»¥ä¸‹è¾“å‡º:

![](img/3cef32f9de9d0d0cab7ba4e3d92accc4.png)

**Wow! More than 70x faster!**

å¿«å¾—å¤šï¼Œè¿˜è¦æ³¨æ„ï¼Œæˆ‘ä»¬ä¸éœ€è¦é‡å¡‘æ•°æ®ï¼Œå› ä¸ºè¯¥ä¿¡æ¯åŒ…å«åœ¨ã€‚npy æ–‡ä»¶ã€‚

![](img/91b85b61a74bd6c1569e9097bd5f9d0a.png)

ä½¿ç”¨çš„å¦ä¸€ä¸ªâ€œæ¬¡è¦â€ç‰¹æ€§ã€‚npy files æ˜¯æ–‡ä»¶å ç”¨çš„å‡å°‘çš„å­˜å‚¨ç©ºé—´ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒçš„å¤§å°å‡å°‘äº† 50%ä»¥ä¸Šã€‚è¿™å¯ä»¥è­¦æƒ•å¾ˆå¤šï¼Œä½†ä¸€èˆ¬æ¥è¯´ã€‚npy æ–‡ä»¶æ›´æ˜“äºå­˜å‚¨ã€‚

> â€œç†ŠçŒ«å’Œå®ƒä»¬çš„åä»£æ€ä¹ˆæ ·ï¼Ÿcsv å¤„ç†ï¼Ÿâ€

## è®©æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹ï¼

é¦–å…ˆè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåˆé€‚çš„ã€‚csv æ–‡ä»¶ä¾›ç†ŠçŒ«é˜…è¯»ï¼Œè¿™å°†æ˜¯æœ€æœ‰å¯èƒ½çš„ç°å®ç”Ÿæ´»åœºæ™¯ã€‚

```
data = pd.DataFrame(data_array)
data.to_csv('data.csv', index = None)
```

è¿™åªæ˜¯å°†æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„â€œdata_arrayâ€ä¿å­˜ä¸ºä¸€ä¸ªæ ‡å‡†ã€‚æ²¡æœ‰ç´¢å¼•çš„ csv æ–‡ä»¶ã€‚

ç°åœ¨è®©æˆ‘ä»¬åŠ è½½å®ƒï¼Œçœ‹çœ‹æˆ‘ä»¬å¾—åˆ°äº†ä»€ä¹ˆæ ·çš„æ—¶é—´:

è¿™ç»™äº†æˆ‘ä»¥ä¸‹è¾“å‡º:

![](img/00cb7aa8358644424cba08220d8abea5.png)

2.66 seconds.. Faster than the standard .txt read but still snails pace compared to the .npy file!

ç°åœ¨ä½ å¯èƒ½ä¼šè®¤ä¸ºè¿™æ˜¯ä½œå¼Šï¼Œå› ä¸ºæˆ‘ä»¬ä¹Ÿåœ¨åŠ è½½ä¸€ä¸ªç†ŠçŒ«æ•°æ®å¸§ï¼Œä½†äº‹å®è¯æ˜ï¼Œå¦‚æœæˆ‘ä»¬åƒè¿™æ ·è¯»å–ï¼Œæ—¶é—´æŸå¤±å¯ä»¥å¿½ç•¥ä¸è®¡:

```
data_array = np.load('data.npy')
data = pd.DataFrame(data_array)
```

å’Œæ—¶é—´ï¼Œæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹ç»“æœ:

![](img/a9f8f1c09050a6738aedfee4a76e3f7c.png)

Almost no different from loading without a DataFrame.

# å¤–å–

æ‚¨å¯èƒ½ä¹ æƒ¯äºå°†æ•°æ®åŠ è½½å’Œä¿å­˜ä¸ºã€‚ä½†æ˜¯ä¸‹æ¬¡ä½ åšæ•°æ®ç§‘å­¦é¡¹ç›®çš„æ—¶å€™ï¼Œè¯•ç€å…»æˆåŠ è½½å’Œä¿å­˜çš„ä¹ æƒ¯ã€‚æ”¹ä¸º npy æ–‡ä»¶ï¼å½“ä½ ç­‰å¾…å†…æ ¸åŠ è½½ä½ çš„æ–‡ä»¶çš„æ—¶å€™ï¼Œå®ƒä¼šå¸®ä½ èŠ‚çœå¾ˆå¤šåœæœºæ—¶é—´å’Œçƒ¦æ¼ï¼

![](img/6f0e4504feb780318d7f4a062aef2011.png)

# ç»“æŸè¯­

æˆ‘å¸Œæœ›è¿™ç¯‡çŸ­æ–‡å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼

å¦‚æœä½ æƒ³å¤šçœ‹å¤šå­¦ï¼Œä¸€å®šè¦ [**è·Ÿç€æˆ‘ä¸Šåª’**](https://medium.com/@peter.nistrup) ğŸ”å’Œ [**ç¢ç¢å¿µ**](https://twitter.com/peternistrup) ğŸ¦

[](https://medium.com/@peter.nistrup) [## å½¼å¾—Â·å°¼æ–¯ç‰¹é²æ™®-ä¸­ç­‰

### é˜…è¯»å½¼å¾—Â·å°¼æ–¯ç‰¹æ‹‰æ™®åœ¨åª’ä»‹ä¸Šçš„ä½œå“ã€‚æ•°æ®ç§‘å­¦ã€ç»Ÿè®¡å’Œäººå·¥æ™ºèƒ½...æ¨ç‰¹:@PeterNistrupï¼ŒLinkedInâ€¦

medium.com](https://medium.com/@peter.nistrup)