<html>
<head>
<title>How to deploy your website to a custom domain using Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用 Heroku 将您的网站部署到自定义域</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-deploy-your-website-to-a-custom-domain-8cb23063c1ff?source=collection_archive---------12-----------------------#2019-01-20">https://towardsdatascience.com/how-to-deploy-your-website-to-a-custom-domain-8cb23063c1ff?source=collection_archive---------12-----------------------#2019-01-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="deba" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这篇博客记录了使用<a class="ae ko" href="https://heroku.com" rel="noopener ugc nofollow" target="_blank"> Heroku </a>和<a class="ae ko" href="https://namecheap.com" rel="noopener ugc nofollow" target="_blank"> NameCheap </a>将一个用 Python 和<a class="ae ko" href="http://flask.pocoo.org/" rel="noopener ugc nofollow" target="_blank"> Flask </a>框架编写的网站部署到一个定制域所需的步骤。Flask 是一个微框架，它允许我们在后端使用 Python 与 HTML/CSS 或 Javascript 中的前端代码进行交互，以构建网站。人们也为此使用其他框架，比如 Django，但是我最喜欢的是 Flask，因为它很容易上手。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/184b3a92cec44a609c400c053da76875.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ck1v3bK-HSgaoWi4XuZDbA.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Having your website can help you stand out</figcaption></figure><p id="f96a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一个小 Flask 网站可以通过创建一个新的 repo 来创建，通过创建一个 Python 文件，如<a class="ae ko" href="http://flask.pocoo.org/" rel="noopener ugc nofollow" target="_blank"> this </a>:</p><pre class="kq kr ks kt gt lf lg lh li aw lj bi"><span id="7d9b" class="lk ll it lg b gy lm ln l lo lp"># app.py <br/>from flask import Flask<br/>app = Flask(__name__)<br/><br/>@app.route("/")<br/>def hello():<br/>    return "Hello World!"</span><span id="ab32" class="lk ll it lg b gy lq ln l lo lp"><strong class="lg iu">if </strong>__name__ == <strong class="lg iu">"__main__"</strong>:<br/>    app.run(port=5000)</span></pre><p id="7e46" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一个典型的 Flask 应用程序有文件夹<code class="fe lr ls lt lg b">static</code>存放所有的 CSS 和 JS 文件以及图片等。和一个用于 HTML 文件的<code class="fe lr ls lt lg b">templates</code>文件夹。我不会在这里说太多细节，但是在米格尔·格林伯格的<a class="ae ko" href="https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world" rel="noopener ugc nofollow" target="_blank">教程中可以找到关于这方面的精彩信息。</a></p><p id="2080" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当运行上面的文件<code class="fe lr ls lt lg b">python app.py</code>时，它会在本地打开网站，显示“Hello World！”用 HTML 写的。</p><p id="9e3c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们如何将这个网站部署到一个自定义域，让每个人都可以看到？</p><h2 id="c02f" class="lk ll it bd lu lv lw dn lx ly lz dp ma kb mb mc md kf me mf mg kj mh mi mj mk bi translated">1.创建一个 Heroku 帐户</h2><p id="fe76" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">去 Heroku <a class="ae ko" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank">网站</a>注册一个账号。Heroku 将允许我们将网站部署到以<code class="fe lr ls lt lg b">herokuapp.com</code>结尾的域中。我们将使用这个网站，并部署到自定义域。我们本可以使用亚马逊网络服务来部署网站，但是我发现这比使用像 Heroku 这样的解决方案要复杂得多。AWS 是基础设施即服务(IaaS)，Heroku 是平台即服务(PaaS)。因此，我们不需要担心 Heroku 的具体基础设施细节！这使得它更容易使用。</p><p id="cabd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，到这个<a class="ae ko" href="https://devcenter.heroku.com/articles/getting-started-with-python#set-up" rel="noopener ugc nofollow" target="_blank">链接</a>并下载命令行的<code class="fe lr ls lt lg b">heroku</code>。如果您的机器上有自制软件，您可以使用<code class="fe lr ls lt lg b">brew install heroku/brew/heroku</code>将其安装到您的机器上。下次运行<code class="fe lr ls lt lg b">heroku login</code>输入您的 Heroku 凭证。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mq"><img src="../Images/593a961ee737c8a9755e82cec703a48c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2DnvLpPb3ZjdZ28QSKa_JQ.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Heroku is used to deploy our local website to cloud</figcaption></figure><h2 id="ae78" class="lk ll it bd lu lv lw dn lx ly lz dp ma kb mb mc md kf me mf mg kj mh mi mj mk bi translated">2.将您的应用部署到 Heroku</h2><p id="6833" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated"><strong class="js iu"> a)制作一个 Procfile: </strong> <br/>要将你的 app 部署到 Heroku，首先创建一个<code class="fe lr ls lt lg b">Procfile</code>，保存在与<code class="fe lr ls lt lg b">app.py</code>相同的文件夹中。请注意，Procfile 的<strong class="js iu">而</strong>没有任何扩展名，如<code class="fe lr ls lt lg b">txt</code>等。该 Procfile 将包含内容<code class="fe lr ls lt lg b">web: gunicorn app:app</code>该语句将允许 Heroku 运行 gunicorn 作为该应用程序的 web 服务器。确保你的虚拟环境中安装了<code class="fe lr ls lt lg b">gunicorn</code>。</p><p id="0e91" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> b)制作 requirements.txt: </strong> <br/>还有，用<code class="fe lr ls lt lg b">pip freeze &gt; requirements.txt</code>把这个项目的所有需求写成一个文件。Heroku 将使用它在云中安装所有必要的软件包来运行您的应用程序。</p><p id="bae9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> c)【可选】Make runtime.txt: </strong> <br/>如果你想指定 Heroku 应该在云端使用哪个 Python 版本来运行你的 app，在这个文件里就提为<code class="fe lr ls lt lg b">python-3.6.6</code>就可以了。</p><p id="fb66" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> d)部署到 Heroku: <br/> </strong>运行<code class="fe lr ls lt lg b">heroku create &lt;app-name&gt;</code>其中<code class="fe lr ls lt lg b">&lt;app-name&gt;</code>是你喜欢的名字。如果你的应用程序名称是<code class="fe lr ls lt lg b">calm-river</code>，那么 Heroku 会将你的网站部署到<code class="fe lr ls lt lg b">calm-river.herokuapp.com</code>。确保<code class="fe lr ls lt lg b">git</code>安装在你的命令行上。<br/>运行<code class="fe lr ls lt lg b">git init</code>将当前文件夹初始化为 git 存储库。接下来，运行<code class="fe lr ls lt lg b">git add .</code>，然后运行<code class="fe lr ls lt lg b">git commit -m "first commit"</code>，将所有文件提交给<code class="fe lr ls lt lg b">git</code>。最后运行<code class="fe lr ls lt lg b">git push heroku master</code>将你的应用部署到 Heroku~ <br/>如果一切顺利，你可以在<code class="fe lr ls lt lg b">&lt;app-name&gt;.herokuapp.com</code>访问你的网站</p><h2 id="def9" class="lk ll it bd lu lv lw dn lx ly lz dp ma kb mb mc md kf me mf mg kj mh mi mj mk bi translated"><strong class="ak"> 3。链接到 Heroku 上的自定义域名:</strong></h2><p id="ec60" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">接下来，我们需要从 NameCheap 或 GoDaddy 购买一个自定义域名。假设您购买了域名，<code class="fe lr ls lt lg b">example.com</code> <br/>接下来，运行<code class="fe lr ls lt lg b">heroku domains:add <a class="ae ko" href="http://www.calm-river.com" rel="noopener ugc nofollow" target="_blank">w</a>ww.example.com</code>将这个自定义域名添加到您的 Heroku 应用程序中。它会给你一个 DNS 目标类型和 DNS 目标名称。这个目标类型应该是<code class="fe lr ls lt lg b">CNAME</code>。我们需要将这个<code class="fe lr ls lt lg b">CNAME</code>记录链接到你域名的设置控制台。</p><h2 id="ca7a" class="lk ll it bd lu lv lw dn lx ly lz dp ma kb mb mc md kf me mf mg kj mh mi mj mk bi translated">4.将 CNAME 记录添加到您的自定义域:</h2><p id="d1ab" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">进入 Namecheap 设置控制台，然后进入<code class="fe lr ls lt lg b">Advanced DNS</code>。将<code class="fe lr ls lt lg b">CNAME</code>记录添加到主机目标，其中<code class="fe lr ls lt lg b">Type</code>为<code class="fe lr ls lt lg b">CNAME</code>,<code class="fe lr ls lt lg b">Host</code>为<code class="fe lr ls lt lg b">www</code>,<code class="fe lr ls lt lg b">Value</code>为您将域添加到 Heroku 时收到的 DNS 目标名称。</p><h2 id="eca6" class="lk ll it bd lu lv lw dn lx ly lz dp ma kb mb mc md kf me mf mg kj mh mi mj mk bi translated">5.将 URL 重定向记录添加到您的自定义域:</h2><p id="c210" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">添加 CNAME 记录后，添加<code class="fe lr ls lt lg b">URL Redirect record</code>，主机为<code class="fe lr ls lt lg b">@</code>，设置<code class="fe lr ls lt lg b">Unmasked</code>为<code class="fe lr ls lt lg b"><a class="ae ko" href="http://www.example.com" rel="noopener ugc nofollow" target="_blank">http://www.example.com</a></code>。</p><p id="ca2f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">允许 30 分钟来传播这些设置，您的网站应该在您的自定义域上运行！希望这些步骤对你寻求与世界分享你的工作有用。<a class="ae ko" href="https://devcenter.heroku.com/articles/custom-domains" rel="noopener ugc nofollow" target="_blank">更多细节</a>可以在 Heroku 网站上找到这些步骤。<br/>希望能看到你的网站转转！</p><p id="a074" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">附注:我正在创建一个名为<br/>“查询理解技术概述”</strong>的新课程。<br/>本课程将涵盖信息检索技术、文本挖掘、查询理解技巧和诀窍、提高精确度、召回率和用户点击量的方法。有兴趣的请在这里报名<a class="ae ko" href="https://sanketgupta.teachable.com/p/query-understanding-techniques/" rel="noopener ugc nofollow" target="_blank">！这种兴趣展示将允许我优先考虑和建立课程。</a></p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/11a0a9419ef0c239a2529bb5b76d4b1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:488/format:webp/1*qM_eG38deCf8mIOJ_wwELQ.png"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk"><a class="ae ko" href="https://sanketgupta.teachable.com/p/query-understanding-techniques" rel="noopener ugc nofollow" target="_blank">My new course: Overview of Query Understanding Techniques</a></figcaption></figure><p id="be2a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你有任何问题，请给我的<a class="ae ko" href="https://www.linkedin.com/in/sanketgupta107/" rel="noopener ugc nofollow" target="_blank"> LinkedIn 个人资料</a>留言，或者给我发电子邮件到 sanket@omnilence.com。感谢阅读！</p></div></div>    
</body>
</html>