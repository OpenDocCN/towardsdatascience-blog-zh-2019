<html>
<head>
<title>Tutorial: Google Vision API with Python and Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">教程:使用 Python 和 Heroku 的 Google Vision API</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/tutorial-google-vision-api-with-python-and-heroku-3b8d3ff5f6ef?source=collection_archive---------5-----------------------#2019-10-24">https://towardsdatascience.com/tutorial-google-vision-api-with-python-and-heroku-3b8d3ff5f6ef?source=collection_archive---------5-----------------------#2019-10-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3074" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何使用 Google Vision API</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bbf21173b75c9c8f68913ba0e039fdf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sO3HcMpihPDBKkcu_uCUnQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Image by author</figcaption></figure><p id="ee04" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正如我们之前了解到的，谷歌视觉人工智能可以分为两个部分，<strong class="la iu"> AutoML 视觉和视觉 API </strong>。对于 Vision API 参考，这里是以前的帖子，讨论 Vision API 可以做什么，如何创建 API 键，然后用<strong class="la iu"> curl </strong>查询它。</p><div class="lu lv gp gr lw lx"><a rel="noopener follow" target="_blank" href="/ml-study-jam-detect-labels-faces-and-landmarks-in-images-with-the-cloud-vision-api-a80e89feb66f"><div class="ly ab fo"><div class="lz ab ma cl cj mb"><h2 class="bd iu gy z fp mc fr fs md fu fw is bi translated">ML Study Jam — Vision API</h2><div class="me l"><h3 class="bd b gy z fp mc fr fs md fu fw dk translated">使用云视觉 API 检测图像中的标签、人脸和地标</h3></div><div class="mf l"><p class="bd b dl z fp mc fr fs md fu fw dk translated">towardsdatascience.com</p></div></div><div class="mg l"><div class="mh l mi mj mk mg ml ks lx"/></div></div></a></div><p id="6dda" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">今天，我们将学习如何在<strong class="la iu"> Python </strong>中使用它。然后我们可以在将来的项目中使用它。</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><p id="3cea" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我们开始之前，我想和你分享一下官方教程。</p><div class="lu lv gp gr lw lx"><a href="https://codelabs.developers.google.com/codelabs/cloud-vision-api-python/index.html?index=..%2F..index#0" rel="noopener  ugc nofollow" target="_blank"><div class="ly ab fo"><div class="lz ab ma cl cj mb"><h2 class="bd iu gy z fp mc fr fs md fu fw is bi translated">通过 Python 使用 Vision API</h2><div class="me l"><h3 class="bd b gy z fp mc fr fs md fu fw dk translated">谷歌云视觉 API 允许开发人员轻松地将视觉检测功能集成到应用程序中…</h3></div><div class="mf l"><p class="bd b dl z fp mc fr fs md fu fw dk translated">codelabs.developers.google.com</p></div></div><div class="mg l"><div class="mt l mi mj mk mg ml ks lx"/></div></div></a></div><p id="c544" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在接下来的段落中有一个快速教程，但是如果你想在阅读之后了解更多的细节，你仍然可以从 Google Codelabs 中学习。太好了，现在我们开始吧。</p><h1 id="5d1a" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">步骤概述</h1><ol class=""><li id="99fc" class="nm nn it la b lb no le np lh nq ll nr lp ns lt nt nu nv nw bi translated">建立一个 Vision API 项目。</li><li id="0ede" class="nm nn it la b lb nx le ny lh nz ll oa lp ob lt nt nu nv nw bi translated">启用 Vision API。</li><li id="f897" class="nm nn it la b lb nx le ny lh nz ll oa lp ob lt nt nu nv nw bi translated">验证 API 请求并下载<code class="fe oc od oe of b">keyFile.json</code>。</li><li id="96b7" class="nm nn it la b lb nx le ny lh nz ll oa lp ob lt nt nu nv nw bi translated">用<code class="fe oc od oe of b">keyFile.json</code>设置<code class="fe oc od oe of b">GOOGLE_APPLICATION_CREDENTIALS</code>。</li><li id="f563" class="nm nn it la b lb nx le ny lh nz ll oa lp ob lt nt nu nv nw bi translated">安装谷歌客户端视觉 API 客户端库。</li><li id="8df8" class="nm nn it la b lb nx le ny lh nz ll oa lp ob lt nt nu nv nw bi translated">编写 Python 代码来查询 Vision API。</li><li id="20d9" class="nm nn it la b lb nx le ny lh nz ll oa lp ob lt nt nu nv nw bi translated">将代码推至<a class="ae og" href="https://dashboard.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku </a>。</li></ol></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="863b" class="mu mv it bd mw mx oh mz na nb oi nd ne jz oj ka ng kc ok kd ni kf ol kg nk nl bi translated">第一步。建立一个 Vision API 项目。</h1><ol class=""><li id="83f8" class="nm nn it la b lb no le np lh nq ll nr lp ns lt nt nu nv nw bi translated">登录到<a class="ae og" href="http://console.cloud.google.com" rel="noopener ugc nofollow" target="_blank">谷歌云平台控制台</a>并创建一个新项目。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/43798df1b0c1aea59aba2b517b7ecc8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DAdD8pE5eMEXrx7rEa72-Q.png"/></div></div></figure><p id="e5fe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">2.命名项目并点击<strong class="la iu">创建</strong>按钮。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/9282b6aa73aa1e75223d2219f2648f13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QVne3dQyAvRmhWgevukNrQ.png"/></div></div></figure><p id="5a92" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">3.点击<strong class="la iu">主动云壳</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/c8e21773b350e030ec1ded7cf08cd858.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*UNVNw9bQjw7hJ616UY-3ug.png"/></div></figure><p id="3d60" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">4.然后底部会出现一个控制台外壳。<br/>运行<code class="fe oc od oe of b">$ gcloud auth list</code>以确认您已通过身份验证。<code class="fe oc od oe of b"><br/></code>并运行<code class="fe oc od oe of b">$ gcloud config list project</code>确认项目 id。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/1ca58dc2d80f22fbca5d1dcdcafd4393.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RmKJZYwTUa7P6hv_tDnolg.png"/></div></div></figure><h1 id="f6d2" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">第二步。启用 Vision API。</h1><p id="7c93" class="pw-post-body-paragraph ky kz it la b lb no ju ld le np jx lg lh oq lj lk ll or ln lo lp os lr ls lt im bi translated">运行命令行<code class="fe oc od oe of b">$ gcloud services enable vision.googleapis.com</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/9c796a09ff48ffe9daf3db067939035c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IKjZ4ptzlxtWqDGoyV-rhA.png"/></div></div></figure><h1 id="9e01" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">第三步。验证 API 请求并下载<code class="fe oc od oe of b">keyFile.json.</code></h1><p id="6135" class="pw-post-body-paragraph ky kz it la b lb no ju ld le np jx lg lh oq lj lk ll or ln lo lp os lr ls lt im bi translated">根据 Google Codelabs 教程，我们需要创建一个服务帐户和一个访问 Vision API 的密钥。</p><blockquote class="ou ov ow"><p id="0cb5" class="ky kz ox la b lb lc ju ld le lf jx lg oy li lj lk oz lm ln lo pa lq lr ls lt im bi translated">为了向 Vision API 发出请求，您需要使用一个<em class="it">服务帐户</em>。一个<em class="it">服务帐户</em>是一个属于你的项目的帐户，它被 Google 客户端 Python 库用来发出 Vision API 请求。</p></blockquote><p id="24dc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">单击下面的链接，并按照<code class="fe oc od oe of b">Setting up authentication</code> GCP 控制台的步骤操作。</p><div class="lu lv gp gr lw lx"><a href="https://cloud.google.com/vision/docs/libraries#client-libraries-usage-python" rel="noopener  ugc nofollow" target="_blank"><div class="ly ab fo"><div class="lz ab ma cl cj mb"><h2 class="bd iu gy z fp mc fr fs md fu fw is bi translated">Vision API 客户端库|云 Vision API 文档| Google 云</h2><div class="me l"><h3 class="bd b gy z fp mc fr fs md fu fw dk translated">本页显示了如何开始使用 Cloud Vision API 的云客户端库。阅读有关客户端的更多信息…</h3></div><div class="mf l"><p class="bd b dl z fp mc fr fs md fu fw dk translated">cloud.google.com</p></div></div></div></a></div><ol class=""><li id="efea" class="nm nn it la b lb lc le lf lh pb ll pc lp pd lt nt nu nv nw bi translated"><a class="ae og" href="https://console.cloud.google.com/apis/credentials/serviceaccountkey?_ga=2.195063340.-1201461484.1549874559&amp;_gac=1.261428863.1571476113.Cj0KCQjw6KrtBRDLARIsAKzvQIGBUmJ3lHgLrzXidQ7oxbLau9FsbWI-CLXE2b6cvEbkQj_aE0z4dM8aApSoEALw_wcB" rel="noopener ugc nofollow" target="_blank">转到创建服务帐户密钥页面</a></li><li id="175a" class="nm nn it la b lb nx le ny lh nz ll oa lp ob lt nt nu nv nw bi translated">从<strong class="la iu">服务账户</strong>列表中，选择<strong class="la iu">新服务账户</strong>。</li><li id="63ee" class="nm nn it la b lb nx le ny lh nz ll oa lp ob lt nt nu nv nw bi translated">在<strong class="la iu">服务帐户名称</strong>字段中，输入一个名称。</li><li id="3e28" class="nm nn it la b lb nx le ny lh nz ll oa lp ob lt nt nu nv nw bi translated">不要从<strong class="la iu">角色</strong>列表中选择值。访问此服务不需要任何角色。</li></ol><p id="1c5a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果所有设置都设置正确，用户界面将如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/8084d0ccc7d94f8231e8184ddc16ef45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*GUKYGj927e69PjgWNzykYw.png"/></div></figure><p id="8882" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">5.点击<strong class="la iu">创建</strong>。将出现一条注释，警告此服务帐户没有角色。</p><p id="5545" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">6.点击<strong class="la iu">创建无角色</strong>。一个 JSON 文件，包含你下载到你电脑上的密钥。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/b0303535c5a8b74e775f0572b38e556d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*avUeNYf2V0sLrCZk1y9JGA.png"/></div></figure><h1 id="c815" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">第四步。用<code class="fe oc od oe of b">keyFile.json</code>设置<code class="fe oc od oe of b">GOOGLE_APPLICATION_CREDENTIALS</code></h1><p id="3580" class="pw-post-body-paragraph ky kz it la b lb no ju ld le np jx lg lh oq lj lk ll or ln lo lp os lr ls lt im bi translated">将 JSON 文件重命名为<code class="fe oc od oe of b">keyFile.json</code>。然后用文件设置<code class="fe oc od oe of b">GOOGLE_APPLICATION_CREDENTIALS</code>。</p><pre class="kj kk kl km gt pg of ph pi aw pj bi"><span id="5af8" class="pk mv it of b gy pl pm l pn po">export GOOGLE_APPLICATION_CREDENTIALS=~/Desktop/keyFile.json</span></pre><h1 id="4b54" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">第五步。安装谷歌客户端视觉 API 客户端库。</h1><ol class=""><li id="7afb" class="nm nn it la b lb no le np lh nq ll nr lp ns lt nt nu nv nw bi translated">运行<code class="fe oc od oe of b">pip freeze | grep google-cloud-vision</code>来检查库是否已经安装。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pp"><img src="../Images/83143c365f70e2819fde5b3c1ed9eacc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*40eTBDTSjgfL_W6dcqEm6g.png"/></div></div></figure><p id="ccb9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">2.如果您没有设置环境，请运行<code class="fe oc od oe of b">pip install --upgrade google-cloud-vision</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pq"><img src="../Images/30ecc2763c36b272faeee62578aba084.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R4XBSemiQjRKdlI7RNahnA.png"/></div></div></figure><h1 id="ac52" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">第六步。编写 Python 代码来查询 Vision API。</h1><p id="3b12" class="pw-post-body-paragraph ky kz it la b lb no ju ld le np jx lg lh oq lj lk ll or ln lo lp os lr ls lt im bi translated">将以下代码复制并保存为 Python 文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pr ps l"/></div></figure><p id="478d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">运行 Python 文件来测试是否正确设置了所有环境设置。</p><pre class="kj kk kl km gt pg of ph pi aw pj bi"><span id="7451" class="pk mv it of b gy pl pm l pn po">/usr/local/opt/python/bin/python3.7 [path/to/your/filename.py]</span></pre><p id="2d4a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们上传了两位巨星的照片，并使用 Vision API 中的人脸检测来获取他们的人脸边界和情感。</p><p id="8988" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输入数据:</p><div class="kj kk kl km gt ab cb"><figure class="pt kn pu pv pw px py paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/ebfee83efd2c19a600189d82f32b10c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/0*iUJ8Z9ZqhwRHSfeZ.jpg"/></div></figure><figure class="pt kn pz pv pw px py paragraph-image"><img src="../Images/592f62d4baad6eab4d84deb8a2f211ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/format:webp/0*EthbAugeqrwSuIE2.png"/><figcaption class="ku kv gj gh gi kw kx bd b be z dk qa di qb qc">images from <a class="ae og" href="https://commons.wikimedia.org/wiki/File:Robert_Downey_Junior.jpg" rel="noopener ugc nofollow" target="_blank">WikiMedia</a> and <a class="ae og" href="https://www.pinterest.com/pin/565342559452130279/" rel="noopener ugc nofollow" target="_blank">Pinterest</a></figcaption></figure></div><p id="7930" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是输出:</p><pre class="kj kk kl km gt pg of ph pi aw pj bi"><span id="77b1" class="pk mv it of b gy pl pm l pn po">=========================================================</span><span id="40b2" class="pk mv it of b gy qd pm l pn po">File: {pic}</span><span id="2162" class="pk mv it of b gy qd pm l pn po">Face surprised: VERY_UNLIKELY</span><span id="11b1" class="pk mv it of b gy qd pm l pn po">Face bounds: (207,54),(632,54),(632,547),(207,547)</span><span id="533f" class="pk mv it of b gy qd pm l pn po">=========================================================</span><span id="5bc3" class="pk mv it of b gy qd pm l pn po">File: {pic}</span><span id="02bc" class="pk mv it of b gy qd pm l pn po">Face surprised: LIKELY</span><span id="9050" class="pk mv it of b gy qd pm l pn po">Face bounds: (16,38),(323,38),(323,394),(16,394)</span></pre><p id="3bdf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">恭喜你！这意味着我们已经成功查询了 Vision API。尝试官方教程中的其他 Vision APIs。</p><div class="lu lv gp gr lw lx"><a href="https://cloud.google.com/vision/docs/tutorials" rel="noopener  ugc nofollow" target="_blank"><div class="ly ab fo"><div class="lz ab ma cl cj mb"><h2 class="bd iu gy z fp mc fr fs md fu fw is bi translated">教程|云视觉 API 文档|谷歌云</h2><div class="me l"><h3 class="bd b gy z fp mc fr fs md fu fw dk translated">无论您的企业是刚刚踏上数字化转型之旅，还是已经走上数字化转型之路，谷歌云的解决方案…</h3></div><div class="mf l"><p class="bd b dl z fp mc fr fs md fu fw dk translated">cloud.google.com</p></div></div></div></a></div><h1 id="12d0" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">第七步。将代码推至<a class="ae og" href="https://dashboard.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku </a>。</h1><blockquote class="ou ov ow"><p id="2e32" class="ky kz ox la b lb lc ju ld le lf jx lg oy li lj lk oz lm ln lo pa lq lr ls lt im bi translated"><strong class="la iu">注:根据</strong><a class="ae og" href="https://medium.com/@mandarvaze/please-do-not-recommend-committing-keyfile-json-8de574c17d3a" rel="noopener"><strong class="la iu">Mandar Vaze</strong></a><strong class="la iu">的建议，我们不应该将个人</strong> <code class="fe oc od oe of b"><strong class="la iu"><em class="it">keyFile.json</em></strong></code> <strong class="la iu">上传到公共空间。如果您对安全问题有所顾虑，请参考</strong> <a class="ae og" href="https://learnings.desipenguin.com/post/goog-cred-heroku/" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">本帖</strong> </a> <strong class="la iu">寻求解决方案。</strong></p></blockquote><p id="e318" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你还是不太了解 Heroku，请先看看之前的帖子。</p><div class="lu lv gp gr lw lx"><a href="https://medium.com/better-programming/line-bot-with-python-and-heroku-tutorial-e8c296f3816f" rel="noopener follow" target="_blank"><div class="ly ab fo"><div class="lz ab ma cl cj mb"><h2 class="bd iu gy z fp mc fr fs md fu fw is bi translated">教程:使用 Python 和 Heroku 的 LINE Bot</h2><div class="me l"><h3 class="bd b gy z fp mc fr fs md fu fw dk translated">从头开始，建立你的线机器人</h3></div><div class="mf l"><p class="bd b dl z fp mc fr fs md fu fw dk translated">medium.com</p></div></div><div class="mg l"><div class="qe l mi mj mk mg ml ks lx"/></div></div></a></div><p id="3cd5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在第 6 步中，该项目在本地运行良好，但我们需要将其构建为应用程序或 web 使用的在线服务。</p><ol class=""><li id="2da3" class="nm nn it la b lb lc le lf lh pb ll pc lp pd lt nt nu nv nw bi translated">下面是代码示例，请下载并在下面的步骤中学习如何在线推送。</li></ol><p id="110b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae og" href="https://github.com/mutant0113/Google_Vision_API_sample/blob/master/medium-google-vision-api.zip" rel="noopener ugc nofollow" target="_blank">https://github . com/mutant 0113/Google _ Vision _ API _ sample/blob/master/medium-Google-Vision-API . zip</a></p><p id="04e4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">2.将你自己的谷歌服务账号<code class="fe oc od oe of b">keyFile.json</code>添加到文件夹<code class="fe oc od oe of b">medium-google-vision-api/config/</code></p><p id="a973" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">3.创建一个新的 Heroku 项目。</p><pre class="kj kk kl km gt pg of ph pi aw pj bi"><span id="151b" class="pk mv it of b gy pl pm l pn po">heroku login<br/>heroku create [your/project/name] --buildpack heroku/python</span></pre><p id="3965" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">4.链接项目并将代码推送到主分支。</p><pre class="kj kk kl km gt pg of ph pi aw pj bi"><span id="7959" class="pk mv it of b gy pl pm l pn po">cd [path/to/your/local/project/download/from/step1]<br/>heroku git:remote -a [your/project/name]<br/>git push heroku master</span></pre><p id="7af7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">5.将<code class="fe oc od oe of b">GOOGLE_APPLICATION_CREDENTIALS</code>和<code class="fe oc od oe of b">keyFile.json</code>设定在 Heroku 上。</p><pre class="kj kk kl km gt pg of ph pi aw pj bi"><span id="8ff6" class="pk mv it of b gy pl pm l pn po">heroku config:set GOOGLE_APPLICATION_CREDENTIALS='config/keyFile.json'</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qf"><img src="../Images/2c292d1e7889c15bdd8d8a22f65016a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EvFzjTdAT6vIzzosRxgSIg.png"/></div></div></figure><p id="fc1b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">6.确保至少有一个应用程序实例正在运行。</p><pre class="kj kk kl km gt pg of ph pi aw pj bi"><span id="07b1" class="pk mv it of b gy pl pm l pn po">heroku ps:scale web=1</span></pre><p id="ea98" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">7.打开 Heroku 网站</p><pre class="kj kk kl km gt pg of ph pi aw pj bi"><span id="801d" class="pk mv it of b gy pl pm l pn po">heroku open</span></pre><p id="1fee" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果一切都设置正确，您应该会看到网站的内容像图片一样。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qg"><img src="../Images/1589bdccdacbe8f7b9525e551ac8be4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:916/format:webp/1*gI1YZn2BklCOHnXdW8njhA.png"/></div></figure><p id="d8d5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">8.您可以在 hello/views.py 和 hello/vision_api.py 中编辑代码</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><p id="a25c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">今天到此为止。我们现在可以开始使用 Google Vision API 编写代码了。希望这篇文章能帮助你更多地了解 Google Vision API。</p><p id="3931" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如有任何问题或建议，欢迎在本文下方留言评论。再见。</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="c667" class="mu mv it bd mw mx oh mz na nb oi nd ne jz oj ka ng kc ok kd ni kf ol kg nk nl bi translated">参考</h1><p id="f17a" class="pw-post-body-paragraph ky kz it la b lb no ju ld le np jx lg lh oq lj lk ll or ln lo lp os lr ls lt im bi translated">云愿景 API 定价</p><div class="lu lv gp gr lw lx"><a href="https://cloud.google.com/vision/pricing" rel="noopener  ugc nofollow" target="_blank"><div class="ly ab fo"><div class="lz ab ma cl cj mb"><h2 class="bd iu gy z fp mc fr fs md fu fw is bi translated">定价|云愿景 API 文档|谷歌云</h2><div class="me l"><h3 class="bd b gy z fp mc fr fs md fu fw dk translated">云视觉 API 提供了一组用于分析图像的功能。在这些情况下，我们让您只需支付…</h3></div><div class="mf l"><p class="bd b dl z fp mc fr fs md fu fw dk translated">cloud.google.com</p></div></div></div></a></div><p id="33cd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们的 Heroku 代码基于官方样本代码。</p><div class="lu lv gp gr lw lx"><a href="https://devcenter.heroku.com/articles/getting-started-with-python" rel="noopener  ugc nofollow" target="_blank"><div class="ly ab fo"><div class="lz ab ma cl cj mb"><h2 class="bd iu gy z fp mc fr fs md fu fw is bi translated">使用 Python 开始使用 Heroku</h2><div class="me l"><h3 class="bd b gy z fp mc fr fs md fu fw dk translated">本教程将让你在几分钟内部署一个 Python 应用程序(一个简单的 Django 应用程序)。再坚持几分钟…</h3></div><div class="mf l"><p class="bd b dl z fp mc fr fs md fu fw dk translated">devcenter.heroku.com</p></div></div><div class="mg l"><div class="qh l mi mj mk mg ml ks lx"/></div></div></a></div><p id="84ad" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Node.js 版本的另一个教程。</p><div class="lu lv gp gr lw lx"><a href="https://medium.com/@naz_islam/how-to-authenticate-google-cloud-services-on-heroku-for-node-js-app-dda9f4eda798" rel="noopener follow" target="_blank"><div class="ly ab fo"><div class="lz ab ma cl cj mb"><h2 class="bd iu gy z fp mc fr fs md fu fw is bi translated">如何在 Heroku for Node.js App 上认证谷歌云服务</h2><div class="me l"><h3 class="bd b gy z fp mc fr fs md fu fw dk translated">在这篇文章中，我将讨论如何授权各种谷歌云服务，如数据存储、云存储…</h3></div><div class="mf l"><p class="bd b dl z fp mc fr fs md fu fw dk translated">medium.com</p></div></div><div class="mg l"><div class="qi l mi mj mk mg ml ks lx"/></div></div></a></div></div></div>    
</body>
</html>