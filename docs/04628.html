<html>
<head>
<title>5 easy tips for switching from Python 2 to 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从 Python 2 切换到 Python 3 的 5 个简单技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/5-easy-tips-for-switching-from-python-2-to-3-6100f717610f?source=collection_archive---------16-----------------------#2019-07-15">https://towardsdatascience.com/5-easy-tips-for-switching-from-python-2-to-3-6100f717610f?source=collection_archive---------16-----------------------#2019-07-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c44f368f5526b12172842e2be93679ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hz7eNtfczTRAd15e1dlVnQ.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk"><a class="ae kc" href="https://pixabay.com/photos/person-mountain-top-achieve-1245959/" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure><blockquote class="kd ke kf"><p id="1329" class="kg kh ki kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">我为学习者写了一份名为《强大的知识》的时事通讯。每一期都包含链接和最佳内容的关键课程，包括引文、书籍、文章、播客和视频。每一个人都是为了学习如何过上更明智、更快乐、更充实的生活而被挑选出来的。<a class="ae kc" href="https://mighty-knowledge.ck.page/b2d4518f88" rel="noopener ugc nofollow" target="_blank"> <strong class="kj ir">在这里报名</strong> </a>。</p></blockquote><p id="6275" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">末日即将来临……</p><p id="4d6b" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">不，这不是世界末日…..是 Python 2 的<a class="ae kc" href="https://pythonclock.org/" rel="noopener ugc nofollow" target="_blank">结尾！</a></p><p id="b222" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">Python 2 将正式退役，2020 年 1 月 1 日之后<strong class="kj ir"/><strong class="kj ir">将不再维护</strong>。这个消息对一些人(老一代 Python 2 用户)来说是可怕的，但对另一些人(酷的 Python 3 用户)来说却是巨大的安慰。</p><p id="b5f6" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">那么这对那些用 Python 编码的人来说意味着什么呢？你是被迫切换到 Python 3 的吗？</p><p id="41cb" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">实际上，答案是肯定的<em class="ki">是的</em>。</p><p id="46fa" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">许多主要的 Python 项目已经签署了一份保证书，承诺完全迁移到 Python 3，放弃 Python 2。我们讨论的是一些非常常见的应用中的真正重量级产品:</p><ul class=""><li id="331e" class="li lj iq kj b kk kl ko kp lf lk lg ll lh lm le ln lo lp lq bi translated"><strong class="kj ir">数据科学</strong>:熊猫、Numpy、Scipy 等</li><li id="c471" class="li lj iq kj b kk lr ko ls lf lt lg lu lh lv le ln lo lp lq bi translated"><strong class="kj ir">机器学习</strong> : TensorFlow、Scikit-Learn、XGBoost 等</li><li id="4440" class="li lj iq kj b kk lr ko ls lf lt lg lu lh lv le ln lo lp lq bi translated"><strong class="kj ir">网</strong>:请求，龙卷风</li><li id="29cc" class="li lj iq kj b kk lr ko ls lf lt lg lu lh lv le ln lo lp lq bi translated"><a class="ae kc" href="https://python3statement.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kj ir">多多多</strong> </a></li></ul><p id="2995" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">不用说，随着所有这些主要库全面转向 Python 3，更新您的代码库变得非常必要。</p><p id="d967" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">在本文中，我将与您分享从 Python 2 转换到 Python 3 的 5 个简单技巧，这将使转换平稳进行。</p><h1 id="8ea1" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">⑴进口</h1><p id="4cb8" class="pw-post-body-paragraph kg kh iq kj b kk mu km kn ko mv kq kr lf mw ku kv lg mx ky kz lh my lc ld le ij bi translated">Python 2 使用相对导入，而 Python 3 现在使用绝对导入来使事情更加明确。</p><p id="d383" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">考虑以下示例文件夹结构:</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="5a7d" class="ni lx iq ne b gy nj nk l nl nm">py_package<br/>├── main_code.py<br/>└── helper_code.py</span></pre><p id="ade7" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">对于 Python 2 的相对导入，import 语句是相对于当前文件编写的。例如，如果我们想在主代码中导入一些助手代码，我们可以这样做:</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="3c33" class="ni lx iq ne b gy nj nk l nl nm">from helper_code import help_function</span></pre><p id="7583" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">Python 3 不再支持这种风格的导入，因为它不明确您想要“相对”还是“绝对”<code class="fe nn no np ne b">helper_code</code>。如果你的计算机上安装了一个名为<code class="fe nn no np ne b">helper_code</code>的 Python 包，你可能会得到错误的包！</p><p id="9124" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">Python 3 现在要求您使用<em class="ki"> explicit imports </em>，它明确指定了您想要使用的模块的位置，相对于您当前的工作目录。因此，导入您的助手代码如下所示:</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="7f0f" class="ni lx iq ne b gy nj nk l nl nm">from .helper_code import help_function</span></pre><p id="c316" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">注意包名旁边的新<code class="fe nn no np ne b">.</code>,它指定包驻留在当前文件夹中。你也可以做类似于<code class="fe nn no np ne b">..helper_code</code>的事情，它告诉 Python<code class="fe nn no np ne b">helper_code</code>包比当前的<code class="fe nn no np ne b">main_code.py</code>包高一个目录。要点是 Python 3 要求您指定确切的包位置。</p><h1 id="82d9" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">(2)打印报表</h1><p id="0368" class="pw-post-body-paragraph kg kh iq kj b kk mu km kn ko mv kq kr lf mw ku kv lg mx ky kz lh my lc ld le ij bi translated">可怕的 Python 打印语句！</p><p id="aa92" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">我们大多数人都曾遇到过与 Python 打印语句相关的错误。这一改变将 100%要求任何使用 Python 2 打印语句的人切换到 Python 3 风格。</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="441b" class="ni lx iq ne b gy nj nk l nl nm"># Python 2 style<br/>print "Hello, World!"</span><span id="e6f7" class="ni lx iq ne b gy nq nk l nl nm"># Python 3 style <br/>print("Hello, World!")</span></pre><p id="265a" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">基本上，你必须在你所有的代码中为所有的打印语句加上括号。幸运的是，一旦你的 print 语句有了括号，它们就可以在 Python 2 和 3 中使用了。</p><h1 id="18bd" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">(3)整数除法</h1><p id="04b3" class="pw-post-body-paragraph kg kh iq kj b kk mu km kn ko mv kq kr lf mw ku kv lg mx ky kz lh my lc ld le ij bi translated">在 Python 2 中，您可以使用<code class="fe nn no np ne b">/</code>操作符对整数进行除法运算，结果会四舍五入到最接近的整数。如果你希望结果是一个浮点数，你首先要把数字转换成浮点数，然后<em class="ki">执行除法。</em></p><p id="9b3c" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">Python 3 通过使用两种不同的操作符:<code class="fe nn no np ne b">/</code>用于浮点除法，<code class="fe nn no np ne b">//</code>用于整数除法，从而避免了必须进行显式转换以转换成浮点的需要。</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="06ee" class="ni lx iq ne b gy nj nk l nl nm">### Python 2<br/>a = 3 // 2                   # Result is 1<br/>b = 3 / 2                    # Result is 1<br/>c = float(3) / float(2)      # Result is 1.5</span><span id="6911" class="ni lx iq ne b gy nq nk l nl nm">### Python 3<br/>a = 3 // 2                   # Result is 1<br/>b = 3 / 2                    # Result is 1.5</span></pre><p id="0179" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">Python 3 中显式操作符的使用使得代码更加简洁，可读性更好——我们确切地知道<code class="fe nn no np ne b">//</code>是整数,<code class="fe nn no np ne b">/</code>是浮点数，而不必进行显式类型转换。</p><p id="17e6" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">新的除法运算符肯定是要小心的。如果您在从 Python 2 到 3 的过程中忘记了从<code class="fe nn no np ne b">/</code>转换到<code class="fe nn no np ne b">//</code>进行整数除法运算，那么您将在原来拥有整数的地方得到浮点数！</p><h1 id="f4f6" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">(4)字符串格式</h1><p id="525f" class="pw-post-body-paragraph kg kh iq kj b kk mu km kn ko mv kq kr lf mw ku kv lg mx ky kz lh my lc ld le ij bi translated">在 Python 3 中，字符串格式的语法更加清晰。在 Python 2 中，您可以像这样使用<code class="fe nn no np ne b">%</code>符号:</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="55f6" class="ni lx iq ne b gy nj nk l nl nm">"%d %s" % (int_number, word)<br/>"%d / %d = %f" % (10, 5, 10 / 5)</span></pre><p id="4f16" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">关于那些 Python 2 语句，有一些事情需要注意:</p><ul class=""><li id="4155" class="li lj iq kj b kk kl ko kp lf lk lg ll lh lm le ln lo lp lq bi translated">变量的类型是显式指定的(%d 表示 int，%s 表示 string，%f 表示 float)</li><li id="9d81" class="li lj iq kj b kk lr ko ls lf lt lg lu lh lv le ln lo lp lq bi translated">字符串语句和变量是分开编写的，并排放在一起</li><li id="70d4" class="li lj iq kj b kk lr ko ls lf lt lg lu lh lv le ln lo lp lq bi translated">风格本身和 Python 2 印花很像；没有括号，插入变量的%符号等</li></ul><p id="ccf9" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">Python 3 现在使用所谓的<em class="ki">字符串格式化程序</em>，它包含在 Python 字符串类<code class="fe nn no np ne b">str.format()</code>中。字符串格式化程序允许您通过位置格式化将字符串中的元素连接在一起。</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="fa23" class="ni lx iq ne b gy nj nk l nl nm">"{} {}".format(<!-- -->int_number, word<!-- -->)<br/>"{} / {} = {}".format(10, 5, 10 / 5)</span></pre><p id="2c28" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">有了新的<code class="fe nn no np ne b">format()</code>函数，根本不需要指定类型，一切都写在一个干净的语句中。你所要做的就是确保这些变量是有序的，一切都会顺利进行。</p><h1 id="0bdb" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">(5)返回可迭代对象而不是列表</h1><p id="7430" class="pw-post-body-paragraph kg kh iq kj b kk mu km kn ko mv kq kr lf mw ku kv lg mx ky kz lh my lc ld le ij bi translated">在 Python 3 中，许多内置函数现在返回一个<em class="ki">迭代器</em>而不是一个列表。这种变化的主要原因是迭代器通常比列表更有效地消耗内存。</p><p id="bca3" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">当你使用迭代器时，元素是在需要的基础上<em class="ki">创建并存储在内存中</em>。这意味着，如果你必须使用迭代器创建 10 亿个浮点数，你只能一次一个地将它们存储在内存中。如果你想创建一个有 10 亿浮点数的列表，你必须确保你有足够的内存，因为数据会被一次性存储在内存中。</p><p id="bf95" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">在许多情况下，使用迭代器和列表的行为是一样的。这方面的一个例子是当循环通过<code class="fe nn no np ne b">range()</code>函数的输出时。</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="3663" class="ni lx iq ne b gy nj nk l nl nm"># Python 2 range() function returns a list<br/>for i in range(10):<br/>    print(i)</span><span id="b799" class="ni lx iq ne b gy nq nk l nl nm"># Python 3 range() function returns an iterator<br/>for i in range(10):<br/>    print(i)</span></pre><p id="20c8" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">注意语法是完全相同的，即使当我们使用 Python 3 时，我们有一个迭代器。需要注意的一点是，如果你确实特别想要一个列表，你所要做的就是直接转换类型:<code class="fe nn no np ne b">list(range(10))</code>。</p><p id="02ce" class="pw-post-body-paragraph kg kh iq kj b kk kl km kn ko kp kq kr lf kt ku kv lg kx ky kz lh lb lc ld le ij bi translated">Python 3 中一些更常用的返回迭代器而不是列表的函数和方法有:</p><ul class=""><li id="6137" class="li lj iq kj b kk kl ko kp lf lk lg ll lh lm le ln lo lp lq bi translated">zip()</li><li id="1bfc" class="li lj iq kj b kk lr ko ls lf lt lg lu lh lv le ln lo lp lq bi translated">地图()</li><li id="cd56" class="li lj iq kj b kk lr ko ls lf lt lg lu lh lv le ln lo lp lq bi translated">过滤器()</li><li id="b4c2" class="li lj iq kj b kk lr ko ls lf lt lg lu lh lv le ln lo lp lq bi translated">Python dict()的方法:<code class="fe nn no np ne b">.keys()</code>、<code class="fe nn no np ne b">.values(),</code>、T5】</li></ul></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><h1 id="07ad" class="lw lx iq bd ly lz ny mb mc md nz mf mg mh oa mj mk ml ob mn mo mp oc mr ms mt bi translated">喜欢学习？</h1><p id="83fa" class="pw-post-body-paragraph kg kh iq kj b kk mu km kn ko mv kq kr lf mw ku kv lg mx ky kz lh my lc ld le ij bi translated">在 twitter 上关注我，我会在这里发布所有最新最棒的人工智能、技术和科学！也在 LinkedIn<a class="ae kc" href="https://www.linkedin.com/in/georgeseif/" rel="noopener ugc nofollow" target="_blank">上与我联系</a>！</p></div></div>    
</body>
</html>