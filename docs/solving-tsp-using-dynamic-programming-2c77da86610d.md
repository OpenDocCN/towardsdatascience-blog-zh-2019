# ç”¨åŠ¨æ€è§„åˆ’æ³•æ±‚è§£ TSP

> åŸæ–‡ï¼š<https://towardsdatascience.com/solving-tsp-using-dynamic-programming-2c77da86610d?source=collection_archive---------7----------------------->

![](img/cbe7f41e67b62e0e549f6c1b25c9c69e.png)

## æ˜¯çš„ï¼Œå› ä¸ºæ²¡æœ‰è¶³å¤Ÿçš„è§£å†³æ–¹æ¡ˆ

å½“æˆ‘åœ¨ä¸ºæˆ‘çš„è¿è¾“ç³»åˆ—ä¸­çš„å¦ä¸€ç¯‡æ–‡ç« ( [I](https://medium.com/hackernoon/yats-yet-another-tsp-solution-6a71aeabe1f8) ã€ [II](/bounded-clustering-7ac02128c893) ï¼Œæ•¬è¯·å…³æ³¨ III)è¿›è¡Œç ”ç©¶æ—¶ï¼Œæˆ‘æ­£åœ¨ä¸º[æ—…è¡Œé”€å”®å‘˜é—®é¢˜](https://en.wikipedia.org/wiki/Travelling_salesman_problem) (TSP)å¯»æ‰¾ä¸€ä¸ª[åŠ¨æ€è§„åˆ’](https://en.wikipedia.org/wiki/Dynamic_programming)è§£å†³æ–¹æ¡ˆã€‚

æˆ‘ç¡®å®æ‰¾åˆ°äº†è®¸å¤šèµ„æºï¼Œä½†æ˜¯æ²¡æœ‰ä¸€ä¸ªæ˜¯æˆ‘å–œæ¬¢çš„ã€‚è¦ä¹ˆæ˜¯å®ƒä»¬å¤ªæŠ½è±¡ï¼Œå¤ªç†è®ºåŒ–ï¼Œå‡ºç°åœ¨ä¸€ä¸ªæˆ‘ä¸å–œæ¬¢çœ‹çš„é•¿è§†é¢‘é‡Œï¼Œæˆ–è€…ï¼Œä½ çŸ¥é“ï¼Œä¸æ˜¯æˆ‘çš„é£æ ¼ã€‚å¥½åƒæˆ‘ä¸æ˜ç™½å…¶ä¸­çš„é€»è¾‘ã€‚

æ‰€ä»¥è¯´å®è¯ï¼Œæˆ‘ç”šè‡³ä¸æƒ³å†™è¿™ç¯‡æ–‡ç« ï¼Œå› ä¸ºæˆ‘è®¤ä¸ºå®ƒå·²ç»è¢«å†™äº†ä¸€åƒéäº†ã€‚ä½†æ˜¯ï¼Œç”Ÿæ´»éš¾é“ä¸ä»¤äººæƒŠè®¶å—ï¼Ÿ

![](img/1a2b02fb249a0857536248b026e290bc.png)

> **å…³äºè¿™ç¯‡æ–‡ç« åé¢çš„å®Œæ•´ä»£ç ï¼Œä½ å¯ä»¥å»** [**è¿™é‡Œ**](https://github.com/DalyaG/CodeSnippetsForPosterity/tree/master/SolvingTSPUsingDynamicProgramming) **ã€‚**

# èƒŒæ™¯

ä½ å¯ä»¥åœ¨æœ¬å¸–ä¸­è¯»åˆ°ä¸€ä¸ªæ›´å¥½ã€æ›´ä»¤äººæ„‰å¿«çš„ç‰ˆæœ¬ï¼Œä½†è¦ç‚¹å¦‚ä¸‹ã€‚æˆ‘ä»¬åœ¨ä¸€ä¸ªå¹³é¢ä¸Šæœ‰`n`ä¸ªç‚¹ï¼Œæˆ‘ä»¬å¸Œæœ›æ‰¾åˆ°æ°å¥½è®¿é—®æ¯ä¸ªç‚¹ä¸€æ¬¡çš„æœ€çŸ­è·¯å¾„ã€‚

![](img/58bdf2b9430650ed47d8ce49635a77e9.png)

Yup, this is already a spoiler with the solution! Did I mention I wasnâ€™t planning on writing this post?

# DP é€Ÿæˆç­

å®é™…ä¸Šï¼Œæˆ‘çœŸæ­£æƒ³è¯´çš„æ˜¯ï¼Œè¿™æ˜¯**è€Œä¸æ˜¯**DP é€Ÿæˆç­ğŸ˜‡

å¦‚æœæ‚¨ä¸ä¹ æƒ¯åŠ¨æ€ç¼–ç¨‹çš„æ¦‚å¿µï¼Œæˆ‘æ¨èä¸€ä¸ªæ¯”æˆ‘æ›´å¥½çš„ä»‹ç»ï¼Œä»‹ç»è¿™ä¸ªæ¼‚äº®çš„æ–¹æ³•ã€‚å¹¸è¿çš„æ˜¯ï¼Œä¸€ä¸ªæœ‰è¶£ä¸”ç›´è§‚çš„å·¥å…·å·²ç»å­˜åœ¨äº†ï¼è¯·è®¿é—® Siraj Raval çš„ç²¾å½©è§†é¢‘ï¼ŒåŠ å…¥æˆ‘ä»¬çš„è®¨è®ºğŸ¤“

# æ„å»º DP æ ‘

åœ¨åŠ¨æ€ç¼–ç¨‹(DP)ä¸­ï¼Œæˆ‘ä»¬è¾¹èµ°è¾¹æ„å»ºè§£å†³æ–¹æ¡ˆã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬çš„åˆå§‹çŠ¶æ€å°†æ˜¯ä»»ä½•è¦è®¿é—®çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç„¶åæˆ‘ä»¬é€šè¿‡æ·»åŠ æ¯ä¸ªå¯èƒ½çš„èŠ‚ç‚¹æ¥æ‰©å±•æ¯ä¸ªçŠ¶æ€ï¼Œä»¥å½¢æˆå¤§å°ä¸º 2 çš„è·¯å¾„ï¼Œç­‰ç­‰ã€‚æ¯æ¬¡æˆ‘ä»¬è®¿é—®ä»¥å‰è®¿é—®è¿‡çš„éƒ¨åˆ†è§£å†³æ–¹æ¡ˆæ—¶ï¼Œæˆ‘ä»¬åªä¿ç•™æœ€å¥½çš„åˆ†æ•°ã€‚

å•Šå“ˆï¼
ä½†æ˜¯ä½ é—®ä»€ä¹ˆæ˜¯â€œå·²è®¿é—®éƒ¨åˆ†è§£å†³æ–¹æ¡ˆâ€ï¼Ÿ
è€Œä¸”ä½ é—®çš„æ²¡é”™ï¼
å¼„æ¸…æ¥šä»€ä¹ˆåº”è¯¥â€œä¿ç•™åœ¨å†…å­˜ä¸­â€æ˜¯æˆåŠŸçš„ DP è§£å†³æ–¹æ¡ˆçš„å…³é”®è¦ç´ ä¹‹ä¸€ã€‚ç»è¿‡åå¤è¯•éªŒï¼Œæˆ‘å†³å®šåœ¨å†…å­˜ä¸­ä¿ç•™æ¯ä¸ªéƒ¨åˆ†è§£å†³æ–¹æ¡ˆçš„æœ€åä¸€ä¸ªçš„*å’Œå€’æ•°ç¬¬äºŒä¸ª*çš„*èŠ‚ç‚¹ã€‚*

![](img/1acbab149586f5dd70f42ad4cd66ec97.png)

For the partial solution [1,2,3,4], where 4 in the last node visited, we ask ourselves â€” what is the best way to get there? We can either come from 3 and have a total cost of 1.8, or come from 2 and have a total cost of 1.5.

ä¸€æ—¦ä½ ç¡®å®šäº†ä½ æƒ³åœ¨å†…å­˜ä¸­ä¿å­˜ä»€ä¹ˆï¼Œä»£ç å°±éå¸¸ç®€å•äº†ï¼Œè€Œä¸”å¯¹äºä¸åŒçš„é—®é¢˜ï¼Œåœ¨ä¸åŒçš„ DP å®ç°ä¹‹é—´å‡ ä¹æ²¡æœ‰å˜åŒ–:

# å›æº¯æœ€çŸ­è·¯å¾„

ä¸€æ—¦æˆ‘ä»¬åˆ°è¾¾äº†æ ‘çš„æœ«ç«¯ï¼Œæ„å‘³ç€æˆ‘ä»¬åœ¨å¤‡å¿˜å½•ä¸­ä¿å­˜çš„è·¯å¾„æ˜¯å®Œæ•´çš„ï¼Œé‚£ä¹ˆâ€œå‰©ä¸‹çš„ä¸€åˆ‡â€å°±æ˜¯æŠ˜å›æˆ‘ä»¬çš„æ­¥éª¤ä»¥æ‰¾åˆ°æœ€ä½³è·¯å¾„ã€‚

å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬è®°ä½äº†æ¯ä¸ªéƒ¨åˆ†è·¯å¾„ä¸­çš„æœ€åä¸€ä¸ªå’Œå€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼

![](img/ba37a0ba222485475769799dfbda095b.png)

Our optimal path in pink: [4,1,2,3]

å› æ­¤ï¼Œç¬¬ä¸€æ­¥å°†æ˜¯æŸ¥çœ‹æœ€åä¸€å±‚ï¼ŒåŒ…æ‹¬æ‰€æœ‰å®Œæ•´è·¯å¾„ï¼Œå¹¶é€‰æ‹©æ€»æˆæœ¬æœ€ä½çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ã€‚

ä»é‚£é‡Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹æ¥è¿½æº¯æˆ‘ä»¬çš„æ­¥éª¤ã€‚

# ä¸å¯å‘å¼è§£å†³æ–¹æ¡ˆç›¸æ¯”

å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬æœ‰äº† TSP é—®é¢˜çš„æœ€ä¼˜è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒåšä»€ä¹ˆå‘¢ï¼Ÿ

å—¯ï¼Œäº‹æƒ…æ˜¯â€¦é‚£ä¸å¤šâ€¦

![](img/482eb55b15e7bbdde896c488b2634ba9.png)

TSP æ˜¯ä¸€ä¸ª [NP å®Œå…¨](https://en.wikipedia.org/wiki/NP-completeness)é—®é¢˜ï¼Œæ±‚è§£åˆ°æœ€ä¼˜æ˜¯é«˜åº¦ä¸å¯ä¼¸ç¼©çš„ã€‚å¹¸è¿çš„æ˜¯ï¼Œåœ¨[ä¹‹å‰çš„å¸–å­](https://medium.com/hackernoon/yats-yet-another-tsp-solution-6a71aeabe1f8)ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å¿«é€Ÿå¯å‘å¼æ–¹æ³•è§£å†³äº† TSP é—®é¢˜ã€‚åœ¨é‚£ç¯‡æ–‡ç« ä¹‹åï¼Œä½ ä»¬ä¸­çš„è®¸å¤šäººé—®æˆ‘â€”â€”è¿™ä¸ªè§£å†³æ–¹æ¡ˆä¸æœ€ä¼˜æ–¹æ¡ˆç›¸æ¯”å¦‚ä½•ï¼Ÿè€Œæˆ‘ç»ˆäºå¯ä»¥å›ç­”äº†ï¼

![](img/6485bc21530f78b1bb43376266687f06.png)

å“‡ï¼ï¼è¿™å°±æ˜¯æŒ‡æ•°å¢é•¿çš„æ ·å­ï¼ï¼ğŸ˜¨

æ’‡å¼€å¤æ‚æ€§ä¸è°ˆï¼Œå¯å‘å¼çš„è§£å†³æ–¹æ¡ˆæ€»æ˜¯è®©å®ƒæ¥è¿‘æœ€ä¼˜è§£ğŸ˜…

å¯¹äºè¿™ä¸ªå®éªŒä¸­çš„æœ€å¤§è¾“å…¥ï¼Œå³ä½¿æˆ‘ä»¬çœ‹æœ€ç»ˆç»“æœï¼Œå®ƒçœ‹èµ·æ¥ä¹Ÿéå¸¸ç›¸ä¼¼ğŸ¯

![](img/c604ee4805a56f6d67cbca30cacce084.png)

# AAAAï¼Œé‚£æ˜¯æ‰€æœ‰çš„äººï¼æ•¬è¯·æœŸå¾…æˆ‘ä»¬çš„ä¸‹ä¸€æ¬¡å†’é™©ï¼

> **è¿™ç¯‡æ–‡ç« åé¢çš„å®Œæ•´ä»£ç ä½ å¯ä»¥å»** [**è¿™é‡Œ**](https://github.com/DalyaG/CodeSnippetsForPosterity/tree/master/SolvingTSPUsingDynamicProgramming) **ã€‚**

![](img/5e6e5015fe97410b1236c9ab84dd486b.png)