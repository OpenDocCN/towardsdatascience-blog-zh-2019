<html>
<head>
<title>Introduction to FPGA and its Architecture</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">FPGA 及其架构介绍</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/introduction-to-fpga-and-its-architecture-20a62c14421c?source=collection_archive---------6-----------------------#2019-11-20">https://towardsdatascience.com/introduction-to-fpga-and-its-architecture-20a62c14421c?source=collection_archive---------6-----------------------#2019-11-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/61585d712140cbf05221947199da9cb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ub9iZhNwZzraR5acX4E0kA.png"/></div></div></figure><p id="b427" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不久以前，大多数软件都是和它们各自的硬件一起永久发布的，没有办法改变它。但是随着技术的成熟，制造商找到了在现有硬件上增加新功能的方法。</p><p id="5182" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，想象一下硬件更新也成为可能的未来——这难道不令人着迷吗？</p><p id="a13b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这种可编程硬件的子系统配置甚至可以在制造后修改，属于可重构系统的范畴。而支持可重构计算的最主要的集成电路是<strong class="ka ir"> FPGA </strong>，是<strong class="ka ir">F</strong>field<strong class="ka ir">P</strong>可编程<strong class="ka ir"> G </strong> ate <strong class="ka ir"> A </strong> rray 的缩写。</p><p id="119b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">FPGA 使您能够对产品功能进行编程，适应新标准，并针对特定应用重新配置硬件，即使产品已经现场安装——因此有术语“<em class="kw">现场可编程</em>”。而“<em class="kw">门阵列</em>指的是其架构中存在的二维逻辑门阵列。</p><p id="2b87" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所有现代个人计算机，包括台式机、笔记本电脑、智能手机和平板电脑，都是通用计算机的例子。通用计算结合了“冯·诺依曼”方法，该方法指出取指令和数据操作不能同时发生。因此，作为顺序机器，它们的性能也是有限的。</p><p id="eb08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另一方面，我们有专用集成电路(ASICs ),它们是为特定任务定制的，如数字录音机或高效比特币挖矿机。ASIC 使用空间方法仅实现一个应用程序，并提供最佳性能。但是，除了最初设计的任务之外，它不能用于其他任务。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/226fa7da8479d4d9e5820813c006fe92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*eM89GSRiU2OdeteaYBEzdQ.png"/></div></figure><p id="f432" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">那么，如何用 ASICs 的性能换取通用处理器的灵活性呢？</p><blockquote class="lc"><p id="69c4" class="ld le iq bd lf lg lh li lj lk ll kv dk translated">嗯…</p><p id="8772" class="ld le iq bd lf lg lh li lj lk ll kv dk translated">FPGAs 充当了这两种架构模式之间的中间地带！</p></blockquote><p id="7c39" class="pw-post-body-paragraph jy jz iq ka b kb lm kd ke kf ln kh ki kj lo kl km kn lp kp kq kr lq kt ku kv ij bi translated">话虽如此，FPGAs 与 ASICs 相比能效较低，也不适合大批量生产。然而，与 ASIC 相比，它们是可重新编程的，并且具有较低的 NRE 成本。</p><p id="bfeb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你看，ASICs 和 FPGAs 有不同的价值主张。大多数器件制造商通常更倾向于使用 FPGAs 进行原型开发，使用 ASICs 进行大批量生产。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lr"><img src="../Images/723632117a1bb9a071e41cdadadf68b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cp3KVC-7losdjFVZmxZIaA.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk">Photo by <a class="ae lw" href="https://numato.com/help/wp-content/uploads/2018/07/How-to-select-the-best-FPGA1-2.png" rel="noopener ugc nofollow" target="_blank">numato.com</a></figcaption></figure><p id="f707" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">过去，FPGA 常常被选择用于较低的速度和复杂的设计，但现在 FPGA 可以轻松超过 500 MHz 的性能基准。</p><h1 id="c23c" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">FPGA 的内部架构</h1><p id="11fb" class="pw-post-body-paragraph jy jz iq ka b kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr mz kt ku kv ij bi translated">1985 年，一家名为<a class="ae lw" href="https://www.xilinx.com/" rel="noopener ugc nofollow" target="_blank"> Xilinx </a>的半导体制造公司发明了第一个商业上可行的 FPGA——xc 2064。另一家公司<a class="ae lw" href="https://en.wikipedia.org/wiki/Altera" rel="noopener ugc nofollow" target="_blank"> Altera </a>，于 2015 年被<a class="ae lw" href="https://www.intel.com/" rel="noopener ugc nofollow" target="_blank">英特尔</a>收购，也与 Xilinx 一起推动了这个市场的发展。</p><p id="ebd4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">FPGA 源于相对简单的技术，如可编程只读存储器(PROM)和可编程逻辑器件(PLD)，如 PAL、PLA 或复杂 PLD (CPLD)。</p><p id="25a3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它由三个主要部分组成:</p><ul class=""><li id="c1bc" class="na nb iq ka b kb kc kf kg kj nc kn nd kr ne kv nf ng nh ni bi translated"><em class="kw">可配置逻辑块</em>——实现逻辑功能。</li><li id="9305" class="na nb iq ka b kb nj kf nk kj nl kn nm kr nn kv nf ng nh ni bi translated"><em class="kw">可编程互连</em>——实现路由。</li><li id="68f2" class="na nb iq ka b kb nj kf nk kj nl kn nm kr nn kv nf ng nh ni bi translated"><em class="kw">可编程</em> <em class="kw"> I </em> / <em class="kw"> O 块</em>——与外部元件连接。</li></ul><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi no"><img src="../Images/1b89fcc4876d1373ad433971e9ab773a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*Hlk7qgZ5juCtTfZ9a0DfYA.png"/></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk">The basic architecture of an FPGA</figcaption></figure><p id="1d09" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">逻辑模块实现设计所需的逻辑功能，由晶体管对、查找表(lut)、触发器和多路复用器等各种元件组成。</p><p id="b059" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以将逻辑块视为独立的模块，就像可以并行操作的乐高积木一样。与乐高积木不同，逻辑积木是可配置的，即其内部状态可以控制，您可以通过对互连进行编程来将它们连接在一起，以便构建有意义的东西。</p><p id="5ef7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这种可编程互连的层次结构用于在可配置逻辑块(clb)之间分配资源；其中布线路径包含可以通过反熔丝或基于存储器的技术连接的不同长度的线段。</p><p id="1438" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">每个 CLB 都连接到一个交换矩阵，以访问通用路由结构。开关矩阵提供可编程多路复用器，用于选择给定路由通道中的信号，从而连接垂直和水平线路。</p><p id="86d9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，I/O 模块(iob)用于将 clb 和路由架构与外部元件连接。</p><p id="c570" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在早期的 FPGAs 中，没有处理器来运行任何软件；因此，实现应用意味着从头开始设计电路。因此，我们可以将 FPGA 配置为像或门一样简单，或者像多核处理器一样复杂。</p><p id="c16d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是，自 XC2064 以来，我们已经取得了长足的进步，基本 FPGA 架构已经通过添加更专业的可编程功能模块得到了发展，如 alu、块 RAM、多路复用器、DSP-48 和微处理器。</p><h1 id="5038" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">FPGA 设计流程</h1><p id="3da9" class="pw-post-body-paragraph jy jz iq ka b kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr mz kt ku kv ij bi translated">设计流程说明了在物理板上实现和编程任何给定逻辑的流水线。我选择将这个设计流程命名为 FPGA 开发生命周期或 FDLC，因为它类似于 SDLC。</p><p id="0869" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">FPGA 架构设计流程包括设计输入、逻辑综合、设计实现、器件编程和设计验证。然而，具体步骤因制造商而异。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi np"><img src="../Images/333f662732275020e42b8480ebfa6fe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*EEBywHyWNPV8lufqqb8BlQ.png"/></div></figure><h2 id="1f0e" class="nq ly iq bd lz nr ns dn md nt nu dp mh kj nv nw ml kn nx ny mp kr nz oa mt ob bi translated">设计条目</h2><p id="de7d" class="pw-post-body-paragraph jy jz iq ka b kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr mz kt ku kv ij bi translated">可以使用原理图编辑器、有限状态机(FSM)编辑器或硬件描述语言(HDL)来描述逻辑。这是通过从给定库中选择组件并提供设计功能到所选计算模块的直接映射来实现的。</p><p id="bd7f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当具有大量功能的设计变得难以图形化管理时，HDL 可以用于以结构或行为的方式捕获设计。除了 VHDL 和 Verilog 这两种最成熟的 HDL 之外，还有几种类似 C 的语言可用，比如 Handel-C、Impulse C 和 SystemC。</p><h2 id="64ee" class="nq ly iq bd lz nr ns dn md nt nu dp mh kj nv nw ml kn nx ny mp kr nz oa mt ob bi translated">逻辑综合</h2><p id="3502" class="pw-post-body-paragraph jy jz iq ka b kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr mz kt ku kv ij bi translated">该过程将上述 VHDL 代码翻译成用于描述具有逻辑元件的完整电路的设备网表格式。综合包括检查代码语法和分析设计架构的层次结构。接下来，代码随着优化被编译，生成的网表被保存为<strong class="ka ir"> <em class="kw">。ngc </em> </strong>文件。</p><h2 id="f06c" class="nq ly iq bd lz nr ns dn md nt nu dp mh kj nv nw ml kn nx ny mp kr nz oa mt ob bi translated">设计实施</h2><p id="1f61" class="pw-post-body-paragraph jy jz iq ka b kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr mz kt ku kv ij bi translated">设计实施过程包括以下步骤:</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/b4eaf10e2dbecbeabee8167666a8e9cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*6TjZmSjMfGvY9bM5ohlgVA.jpeg"/></div></figure><ul class=""><li id="1bdf" class="na nb iq ka b kb kc kf kg kj nc kn nd kr ne kv nf ng nh ni bi translated"><strong class="ka ir">翻译</strong>:该过程将所有输入的网表合并成逻辑设计文件，保存为<strong class="ka ir"> <em class="kw">。ngd </em>文件</strong>文件。这里，用户约束文件将端口分配给物理元素。</li></ul><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/6a4af1d65e8e0a736c19cc870ebf5d9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*ntLwJ4FEN8TXeONxWsOa2w.jpeg"/></div></figure><ul class=""><li id="3714" class="na nb iq ka b kb kc kf kg kj nc kn nd kr ne kv nf ng nh ni bi translated"><strong class="ka ir">映射</strong>:这包括映射由。ngd 文件转换成 FPGA 的组件然后生成一个<strong class="ka ir"> <em class="kw">。ncd </em>文件</strong>文件。</li></ul><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/5813d311f82972b0afaff1f7b0cede18.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*i2wMQfskSitx6TWhGedW5A.jpeg"/></div></figure><ul class=""><li id="e8b9" class="na nb iq ka b kb kc kf kg kj nc kn nd kr ne kv nf ng nh ni bi translated"><strong class="ka ir">放置和布线</strong>:这里的布线根据约束将上述过程中的子模块放置到逻辑模块中，然后连接这些模块。</li></ul><h2 id="c112" class="nq ly iq bd lz nr ns dn md nt nu dp mh kj nv nw ml kn nx ny mp kr nz oa mt ob bi translated">设备编程</h2><p id="1fdc" class="pw-post-body-paragraph jy jz iq ka b kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr mz kt ku kv ij bi translated">上述布线设计必须被加载并转换成 FPGA 支持的格式。于是，被击溃的<strong class="ka ir"> <em class="kw">。ncd </em> </strong>文件交给 BitGen 程序，BitGen 程序生成包含 FPGA 所有编程信息的比特流文件。</p><h2 id="2eb1" class="nq ly iq bd lz nr ns dn md nt nu dp mh kj nv nw ml kn nx ny mp kr nz oa mt ob bi translated">设计验证</h2><p id="0ea5" class="pw-post-body-paragraph jy jz iq ka b kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr mz kt ku kv ij bi translated">这与设计流程一起完成，以确保逻辑行为符合预期。这一过程涉及以下模拟:</p><ul class=""><li id="c3f7" class="na nb iq ka b kb kc kf kg kj nc kn nd kr ne kv nf ng nh ni bi translated"><strong class="ka ir">行为模拟(RTL 模拟)</strong></li><li id="0c1e" class="na nb iq ka b kb nj kf nk kj nl kn nm kr nn kv nf ng nh ni bi translated"><strong class="ka ir">功能模拟</strong></li><li id="9d8e" class="na nb iq ka b kb nj kf nk kj nl kn nm kr nn kv nf ng nh ni bi translated"><strong class="ka ir">静态时序模拟</strong></li></ul><p id="bda7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">进行这些模拟是为了通过向设计的输入提供测试模式并观察输出来仿真组件的行为。</p><h1 id="180c" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">FPGA 的未来</h1><p id="de97" class="pw-post-body-paragraph jy jz iq ka b kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr mz kt ku kv ij bi translated">行业趋势正在推动 FPGAs 在异构计算模式中发挥重要作用。在这里，异构计算指的是使用多种类型的处理器来执行专门处理功能的系统。所有这些不同的处理器，包括 FPGAs，都可以通过 OpenCL 进行编程，OpenCL 是一个行业标准开发平台。</p><p id="e1e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">事实上，FPGA 提供了经济高效的并行计算能力，这使得它适合快速原型制作。在测试神经网络时，有些情况下 FPGA 也优于 GPU。虽然 GPU 可能适合训练，但当涉及到实时应用时，FPGA 更具适应性。事实上，微软已经在通过微软 Azure 云服务来加速人工智能。</p><blockquote class="lc"><p id="60a3" class="ld le iq bd lf lg lh li lj lk ll kv dk translated">🔌简而言之…</p><p id="0bc2" class="ld le iq bd lf lg lh li lj lk ll kv dk translated">从汽车到加密，从芯片开发到人工智能推理模型，FPGAs 提供了一定的通用性，吸引了广泛的用户，从而使未来看起来更光明！</p></blockquote></div></div>    
</body>
</html>