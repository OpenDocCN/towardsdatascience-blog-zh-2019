<html>
<head>
<title>Learn Web Scraping using Python in under 5 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 在 5 分钟内学会网络抓取</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/web-scraping-using-python-4cb2faade338?source=collection_archive---------2-----------------------#2019-02-01">https://towardsdatascience.com/web-scraping-using-python-4cb2faade338?source=collection_archive---------2-----------------------#2019-02-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/11eb57b961b2e29e46bee151d580abe2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*67wEMv9W-oaHhUEXwxsRUg.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Figure 1: Image Source- <a class="ae kf" href="https://www.thedataschool.co.uk/manuela-marolla/web-scraping-101-a-short-introduction/" rel="noopener ugc nofollow" target="_blank">The Data School</a></figcaption></figure><h1 id="535a" class="kg kh it bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">什么是网页抓取？</h1><p id="cdf5" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">网页抓取是从网页中获取或提取想要的信息。</p><h1 id="16e2" class="kg kh it bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">使用 BeautifulSoup 刮擦</h1><p id="4a63" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">对于网络抓取，我们将使用非常流行的 Python 库<code class="fe mc md me mf b">BeautifulSoup</code>。对于网络抓取，你首先需要有一些关于 HTML 标签的基本知识。HTML 中使用的一些标签如下所示。</p><figure class="mg mh mi mj gt ju"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="3287" class="pw-post-body-paragraph le lf it lg b lh mm lj lk ll mn ln lo lp mo lr ls lt mp lv lw lx mq lz ma mb im bi translated">有关 HTML 标签的更多信息，请参考<a class="ae kf" href="https://www.w3schools.com/tags/" rel="noopener ugc nofollow" target="_blank">https://www.w3schools.com/tags/</a>。</p><h1 id="6f7a" class="kg kh it bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">入门指南</h1><p id="68ce" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">要开始使用 scraping，请确保您的系统上安装了 Python(第 3 版)和 BeautifulSoup。如果您没有安装 BeautifulSoup，那么只需在终端/命令提示符下键入以下命令-</p><pre class="mg mh mi mj gt mr mf ms mt aw mu bi"><span id="8e40" class="mv kh it mf b gy mw mx l my mz">pip<strong class="mf iu"> </strong>install<strong class="mf iu"> </strong>beautifulsoup4</span></pre><h1 id="b6d3" class="kg kh it bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">我们刮吧！</h1><h2 id="50ea" class="mv kh it bd ki na nb dn km nc nd dp kq lp ne nf ku lt ng nh ky lx ni nj lc nk bi translated">检查</h2><p id="b4c4" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">抓取的第一步是选择你想要抓取数据的网站并检查它。在本教程中，我们将尝试从<a class="ae kf" href="https://www.bbc.com/sport/football/46897172" rel="noopener ugc nofollow" target="_blank">BBC</a><a class="ae kf" href="https://www.bbc.com/sport" rel="noopener ugc nofollow" target="_blank">上发表的这篇</a>文章中搜集信息。</p><p id="40f0" class="pw-post-body-paragraph le lf it lg b lh mm lj lk ll mn ln lo lp mo lr ls lt mp lv lw lx mq lz ma mb im bi translated">要检查网站，请右键单击页面上的任意位置，然后选择“检查元素”/“查看页面源代码”。要查看网页上特定实体(如文本或图像)的位置，请选择网页上的该部分，然后右键单击并选择“检查元素”/“查看页面源代码”。</p><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nl"><img src="../Images/5fd6166309522811639f4dfe6d5823b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uFbOiHAOj8wDW_qKVbenkw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Figure 2: Webpage to be scraped</figcaption></figure><p id="a805" class="pw-post-body-paragraph le lf it lg b lh mm lj lk ll mn ln lo lp mo lr ls lt mp lv lw lx mq lz ma mb im bi translated">检查完网页后，会弹出一个窗口，显示所选内容在网页 HTML 代码中的确切位置，如下所示。</p><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nl"><img src="../Images/1365990a95e5231d617560bf01318700.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O1ej0-DheSCrNaf74zYhzA.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Figure 3: HTML code of the webpage</figcaption></figure><p id="c20d" class="pw-post-body-paragraph le lf it lg b lh mm lj lk ll mn ln lo lp mo lr ls lt mp lv lw lx mq lz ma mb im bi translated">因为我们的目标是提取文章的全部内容，所以记下包含文章全部文本的标签<code class="fe mc md me mf b">&lt;div&gt;</code>是很重要的。现在让我们仔细看看网页，并识别出<code class="fe mc md me mf b">&lt;div&gt;</code>标签。</p><figure class="mg mh mi mj gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nm"><img src="../Images/fa75b1b1a07a054041a71585eb82873e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*njb8TQ6htj31txXD1GUoNg.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Figure 4: HTML code showing the required tags</figcaption></figure><p id="9c75" class="pw-post-body-paragraph le lf it lg b lh mm lj lk ll mn ln lo lp mo lr ls lt mp lv lw lx mq lz ma mb im bi translated">正如我们所看到的，<code class="fe mc md me mf b">&lt;div class=”story-body sp-story-body gel-body-copy”&gt;</code>是我们正在寻找的标签。现在，我们已经得到了我们所需要的一切，所以让我们直接进入代码并做一些整理吧！</p><h2 id="5660" class="mv kh it bd ki na nb dn km nc nd dp kq lp ne nf ku lt ng nh ky lx ni nj lc nk bi translated">从语法上分析</h2><p id="bba8" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">现在我们可以开始解析网页，并使用<code class="fe mc md me mf b">BeautifulSoup</code>搜索我们需要的特定元素。为了连接到网站并获取 HTML，我们将使用 Python 的<code class="fe mc md me mf b">urllib</code>。让我们导入所需的库-</p><pre class="mg mh mi mj gt mr mf ms mt aw mu bi"><span id="a943" class="mv kh it mf b gy mw mx l my mz">from urllib.request import urlopen<br/>from bs4 import BeautifulSoup</span></pre><p id="f114" class="pw-post-body-paragraph le lf it lg b lh mm lj lk ll mn ln lo lp mo lr ls lt mp lv lw lx mq lz ma mb im bi translated">获取网址-</p><pre class="mg mh mi mj gt mr mf ms mt aw mu bi"><span id="ba3e" class="mv kh it mf b gy mw mx l my mz">url = "<a class="ae kf" href="https://www.bbc.com/sport/football/46897172" rel="noopener ugc nofollow" target="_blank">https://www.bbc.com/sport/football/46897172</a>"</span></pre><p id="79b3" class="pw-post-body-paragraph le lf it lg b lh mm lj lk ll mn ln lo lp mo lr ls lt mp lv lw lx mq lz ma mb im bi translated">连接到网站-</p><pre class="mg mh mi mj gt mr mf ms mt aw mu bi"><span id="845e" class="mv kh it mf b gy mw mx l my mz"># We use try-except incase the request was unsuccessful because of <br/># wrong URL<br/>try:<br/>   page = urlopen(url)<br/>except:<br/>   print("Error opening the URL")</span></pre><p id="2f9f" class="pw-post-body-paragraph le lf it lg b lh mm lj lk ll mn ln lo lp mo lr ls lt mp lv lw lx mq lz ma mb im bi translated">创建一个 BeautifulSoup 对象用于解析-</p><pre class="mg mh mi mj gt mr mf ms mt aw mu bi"><span id="c6be" class="mv kh it mf b gy mw mx l my mz">soup = BeautifulSoup(page, 'html.parser')</span></pre><h2 id="4f18" class="mv kh it bd ki na nb dn km nc nd dp kq lp ne nf ku lt ng nh ky lx ni nj lc nk bi translated">提取所需的元素</h2><p id="9588" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我们现在使用 BeautifulSoup 的<code class="fe mc md me mf b">soup.find()</code>方法来搜索包含我们感兴趣的文章文本的标签<code class="fe mc md me mf b">&lt;div class=”story-body sp-story-body gel-body-copy”&gt;</code>。</p><pre class="mg mh mi mj gt mr mf ms mt aw mu bi"><span id="646a" class="mv kh it mf b gy mw mx l my mz">content = soup.find('div', {"class": "story-body sp-story-body gel-      body-copy"})</span></pre><p id="dd1f" class="pw-post-body-paragraph le lf it lg b lh mm lj lk ll mn ln lo lp mo lr ls lt mp lv lw lx mq lz ma mb im bi translated">我们现在遍历<code class="fe mc md me mf b">content</code>来找到其中所有的<code class="fe mc md me mf b">&lt;p&gt;</code>(段落)标签，从而得到文章的整个正文。</p><pre class="mg mh mi mj gt mr mf ms mt aw mu bi"><span id="887e" class="mv kh it mf b gy mw mx l my mz">article = ''<br/>for i in content.findAll('p'):<br/>    article = article + ' ' +  i.text</span></pre><h2 id="a702" class="mv kh it bd ki na nb dn km nc nd dp kq lp ne nf ku lt ng nh ky lx ni nj lc nk bi translated">保存解析的文本</h2><p id="0efb" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我们可以将搜集到的信息保存在<code class="fe mc md me mf b">.txt</code>或<code class="fe mc md me mf b">.csv</code>文件中。</p><pre class="mg mh mi mj gt mr mf ms mt aw mu bi"><span id="c761" class="mv kh it mf b gy mw mx l my mz">with open('scraped_text.txt', 'w') as file:<br/>    file.write(article)</span></pre><p id="66eb" class="pw-post-body-paragraph le lf it lg b lh mm lj lk ll mn ln lo lp mo lr ls lt mp lv lw lx mq lz ma mb im bi translated">整个代码-</p><figure class="mg mh mi mj gt ju"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="1323" class="pw-post-body-paragraph le lf it lg b lh mm lj lk ll mn ln lo lp mo lr ls lt mp lv lw lx mq lz ma mb im bi translated">输出-</p><pre class="mg mh mi mj gt mr mf ms mt aw mu bi"><span id="e55d" class="mv kh it mf b gy mw mx l my mz"> Cristiano Ronaldo’s header was enough for Juventus to beat AC Milan and claim a record eighth Supercoppa Italiana in a game played in Jeddah, Saudi Arabia. The Portugal forward nodded in Miralem Pjanic’s lofted pass in the second half to settle a meeting between Italian football’s two most successful clubs. It was Ronaldo’s 16th goal of the season for the Serie A leaders. Patrick Cutrone hit the crossbar for Milan, who had Ivorian midfielder Franck Kessie sent off. Gonzalo Higuain, reportedly the subject of interest from Chelsea, was introduced as a substitute by Milan boss Gennaro Gattuso in Italy’s version of the Community Shield. But the 31-year-old Argentina forward, who is currently on loan from Juventus, was unable to deliver an equalising goal for the Rossoneri, who were beaten 4–0 by Juve in the Coppa Italia final in May.</span></pre><h1 id="7b72" class="kg kh it bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">结论</h1><p id="448d" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">当您想要从多个来源收集数据以进行分析或研究时，Web 抓取非常有用。</p><p id="2b41" class="pw-post-body-paragraph le lf it lg b lh mm lj lk ll mn ln lo lp mo lr ls lt mp lv lw lx mq lz ma mb im bi translated">BeautifulSoup 是一个优秀的网页抓取库，可用于小型项目，但对于大型项目，其他库如 Scrapy 更适合。</p><p id="f697" class="pw-post-body-paragraph le lf it lg b lh mm lj lk ll mn ln lo lp mo lr ls lt mp lv lw lx mq lz ma mb im bi translated">希望你已经理解了网页抓取的概念，现在可以根据你的需要从不同的网站抓取数据。</p><p id="4b37" class="pw-post-body-paragraph le lf it lg b lh mm lj lk ll mn ln lo lp mo lr ls lt mp lv lw lx mq lz ma mb im bi translated">感谢阅读。刮的开心！😊</p></div></div>    
</body>
</html>