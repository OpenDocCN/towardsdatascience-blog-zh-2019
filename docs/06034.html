<html>
<head>
<title>How short-term forecasting with neural nets can inform long-term decisions.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">神经网络的短期预测如何影响长期决策。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-short-term-forecasting-with-neural-nets-can-inform-long-term-decisions-9f65eba6fb7e?source=collection_archive---------16-----------------------#2019-09-02">https://towardsdatascience.com/how-short-term-forecasting-with-neural-nets-can-inform-long-term-decisions-9f65eba6fb7e?source=collection_archive---------16-----------------------#2019-09-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/2789f995a6c1c8c656504cfc3715f63f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hzjPFZB6hs_pHlehRvnnKg.png"/></div></div></figure><h2 id="ccf3" class="jc jd je bd b dl jf jg jh ji jj jk dk jl translated" aria-label="kicker paragraph">神经网络调峰:第二部分</h2><div class=""/><div class=""><h2 id="d713" class="pw-subtitle-paragraph kk jn je bd b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dk translated">电力公司只需三天的天气预报就能探测到每月的高峰。</h2></div></div><div class="ab cl lc ld hx le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="im in io ip iq"><p id="da09" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated"><em class="mf">与</em> <a class="ae mg" href="http://omf.coop" rel="noopener ugc nofollow" target="_blank">合作研究<em class="mf">开放建模框架</em> </a> <em class="mf">。</em></p><p id="9bc0" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated"><em class="mf">这是关于神经网络调峰的三部分系列文章中的第二部分。考虑一下另外两个:</em></p><div class="is it gp gr iu mh"><a href="https://www.kmcelwee.com/load-forecasting/" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd jo gy z fp mm fr fs mn fu fw jn bi translated">基于神经网络的⚡️负荷预测和调峰</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">预测技术给了公用事业单位一个机会来拉平他们的负荷曲线，提出了一个全新的家庭…</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">www.kmcelwee.com</p></div></div></div></a></div></div><div class="ab cl lc ld hx le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="im in io ip iq"><p id="89d3" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">对于电力公司来说，减少每月的需求费用可以获得巨大的利润。然而，每天实施调峰策略可能成本高昂。如果公用事业公司使用直接负荷控制(付费给客户关闭空调、热水器等)。)，如果他们这样做得太频繁，可能会让客户感到沮丧。如果公用事业公司使用存储，过度使用可能会迫使他们不必要地频繁更换昂贵的电池。因此，不仅预测第二天的负荷形状很重要，预测当月的峰值也很重要。在理想情况下，按月收费的公用事业公司需要每月削峰一天。</p><p id="0b6a" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">不幸的是，与天气预测类似，负荷预测在几天后变得不可靠。在过去三天的预测中，我们的预测平均绝对误差为 10%(MAPE)。由于一整个月的日峰值落在 10 MAPE 范围内并不罕见，因此找到月峰值很快就变成了猜测。</p><p id="72fd" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">令人欣慰的是，通过结合一些统计技术，我们可以将明天的预测放在上下文中，并大大减少我们派遣的天数。</p><h1 id="bf61" class="mq mr je bd ms mt mu mv mw mx my mz na kt nb ku nc kw nd kx ne kz nf la ng nh bi translated">设置</h1><p id="b6f1" class="pw-post-body-paragraph lj lk je ll b lm ni ko lo lp nj kr lr ls nk lu lv lw nl ly lz ma nm mc md me im bi translated">我们被一个简单的问题所激励:明天是这个月的高峰吗？</p><p id="e261" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">我们知道我们不可能有 30 天的预测，但是通过查看三天的预测、本月已经发生的情况以及历史峰值，我们可以回答两个较小的问题:</p><ul class=""><li id="1649" class="nn no je ll b lm ln lp lq ls np lw nq ma nr me ns nt nu nv bi translated">明天会是局部高峰吗？</li><li id="4185" class="nn no je ll b lm nw lp nx ls ny lw nz ma oa me ns nt nu nv bi translated">这个月明天的负荷特别高吗？</li></ul><p id="33bd" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">最后，我们将结合这些答案，为我们的激励问题提供信息。</p><h2 id="b2d6" class="ob mr je bd ms oc od dn mw oe of dp na ls og oh nc lw oi oj ne ma ok ol ng jk bi translated">明天会是局部高峰吗？</h2><p id="cf72" class="pw-post-body-paragraph lj lk je ll b lm ni ko lo lp nj kr lr ls nk lu lv lw nl ly lz ma nm mc md me im bi translated">“本地峰值”将意味着明天是三天预测中最高的，也高于本月已经看到的任何负载。在我们的 web 应用程序的测试版中，它是这样表示的:</p><figure class="on oo op oq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi om"><img src="../Images/f8f22a3b681f7afba1a8358de10176a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zY1JScgpPuJcEz3Z1zwPig.png"/></div></div></figure><p id="e354" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">以上是 2018 年 12 月 20 日德克萨斯州中北部地区的天气预报。因为“明天的预测峰值”比目前看到的最高峰值低得多，所以电力公司不会在 12 月 20 日实施调峰策略。</p><p id="0c69" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">考虑到模型的预测可能在正态分布附近是准确的，我们可以为明天将是局部峰值的统计可能性分配一个数字。它由这个公式给出:</p><figure class="on oo op oq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi or"><img src="../Images/f74ab118fa11f3253d3ab48276605b28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hhCLHm4yEn2wXpf-54ehOA.png"/></div></div></figure><figure class="on oo op oq gt iv gh gi paragraph-image"><div class="gh gi os"><img src="../Images/e14430463430b0f2c0829f66087f3863.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/format:webp/1*CRZJ3d-3iB04N8jlgmcUZw.png"/></div><figcaption class="ot ou gj gh gi ov ow bd b be z dk">Given two normal distributions (subscripts 1 and 2, defined by their mean and standard deviation), what is the likelihood that the sample X₁ will be greater than the sample X₂.</figcaption></figure><p id="89b9" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">如果你对细节感兴趣，<a class="ae mg" href="https://math.stackexchange.com/questions/40224/probability-of-a-point-taken-from-a-certain-normal-distribution-will-be-greater" rel="noopener ugc nofollow" target="_blank">这里有一个链接</a>可以找到完整的解释。下面是我们如何扩展该公式并将其翻译成 python:</p><figure class="on oo op oq gt iv"><div class="bz fp l di"><div class="ox oy l"/></div><figcaption class="ot ou gj gh gi ov ow bd b be z dk">Function used to determine likelihood that tomorrow is local peak.</figcaption></figure><p id="cd74" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">使用 12 月 20 日的示例并四舍五入到两位小数，明天的“局部峰值可能性”为 0.0%，主要是因为明天峰值的正态分布区域比迄今为止的最高峰值小得多。</p><h2 id="c17c" class="ob mr je bd ms oc od dn mw oe of dp na ls og oh nc lw oi oj ne ma ok ol ng jk bi translated">这个月明天的负荷特别高吗？</h2><p id="ea97" class="pw-post-body-paragraph lj lk je ll b lm ni ko lo lp nj kr lr ls nk lu lv lw nl ly lz ma nm mc md me im bi translated">这个问题比较容易回答。我们查看前几年的月度数据，并计算明天预测的百分位数。需要注意的是，我们计算的是每日峰值的百分比，而不是每小时的负载。</p><h2 id="e731" class="ob mr je bd ms oc od dn mw oe of dp na ls og oh nc lw oi oj ne ma ok ol ng jk bi translated">我们试图最小化什么？</h2><p id="de24" class="pw-post-body-paragraph lj lk je ll b lm ni ko lo lp nj kr lr ls nk lu lv lw nl ly lz ma nm mc md me im bi translated">我们有两个因素，“本地峰值可能性”和“峰值百分位数”，我们希望制定一个规则来最小化两个结果，“错过的峰值百分比”和“发出的百分比”</p><p id="8140" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">这两个结果是每个公用事业公司必须做出的权衡。如果他们希望确保每个峰值都被捕获(丢失的峰值百分比低)，他们必须每天进行调度(进行调度的百分比高)。反之亦然:如果他们想保守调度数量，他们就有错过高峰的风险。</p><p id="5d12" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">我们需要一个目标来最小化。因此，出于我们的目的，我们将简单地添加两个目标。在下面的热图中，最小化(右)的函数就是其他两个函数的和。自然地，考虑到电力公司的优先级，他们会以不同的方式权衡这个优化函数。由于这也有金钱方面的原因，适当的成本效益分析是必要的。但是这些计算对每个电力公司来说都是独特的。</p><h1 id="c564" class="mq mr je bd ms mt mu mv mw mx my mz na kt nb ku nc kw nd kx ne kz nf la ng nh bi translated">结果呢</h1><p id="4f9d" class="pw-post-body-paragraph lj lk je ll b lm ni ko lo lp nj kr lr ls nk lu lv lw nl ly lz ma nm mc md me im bi translated">我对 2002 年至 2018 年德克萨斯州各个地区的 ERCOT 数据进行了测试。我从 2008 年到 2018 年运行该计划，以便“峰值百分比”变量有一些后见之明。整个测试过程可以在<a class="ae mg" href="https://github.com/kmcelwee/load-forecasting/blob/main/notebooks/Efficacy%20of%20short-term%20forecasts%20for%20predicting%20monthly%20peaks.ipynb" rel="noopener ugc nofollow" target="_blank">这本 jupyter 笔记本</a>中找到。</p><p id="0a82" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">我假设我们对一天的预测有 97%的准确率，对两天的预测有 95%的准确率，对三天的预测有 92%的准确率——这些结果在学术文献中很常见，也反映在<a class="ae mg" href="https://www.kmcelwee.com/load-forecasting/simple-load-forecasting.html" rel="noopener ugc nofollow" target="_blank">我们自己的测试</a>中。</p><figure class="on oo op oq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oz"><img src="../Images/65936c7394feb090ad4ac1e293713271.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-0VDxIQkSvW7N4F28fTRUQ.png"/></div></div><figcaption class="ot ou gj gh gi ov ow bd b be z dk">Tests run on ERCOT’s SCENT data (San Antonio, Austin). Minimization of (% peaks missed + % dispatches made) for the two variables (“peak percentile threshold” and “local peak likelihood threshold”)</figcaption></figure><p id="9cc3" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">以上是德克萨斯州中南部地区的一个例子。请注意，在中心热图的顶部有一条明显的线。超过一半的每日峰值有 0%的机会成为局部峰值，这表明无论公用事业公司采用何种优化方法，这种方法都会立即将调度减少一半，同时很少错过峰值。该带在进行该试验的德克萨斯州的所有地区都出现。</p><figure class="on oo op oq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pa"><img src="../Images/48dd0ec0774a796d2e0df85fb2ef73d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EHUgBpGo2By02g7CcT3vLw.png"/></div></div><figcaption class="ot ou gj gh gi ov ow bd b be z dk">The regions of Texas used in testing.</figcaption></figure><p id="b395" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">需要特别注意的是，上面的图表和下面的结果在创建调度规则时使用了逻辑“and ”(例如，如果本地峰值的概率≥ 4%,并且明天≥99 %,则进行调度。)我还测试了逻辑“或”，但结果总是更糟。</p><p id="2f98" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">结果如下图所示。请注意，这些“规则”只有在事后才是准确的。每个电力公司都需要测试以前的政策在未来的负荷上的实施效果。正如人们可能预料的那样，在试图预测月度峰值时，没有一条规则适用于所有情况。然而，一致的趋势是，如果出现局部峰值的可能性大于个位数，并且如果预测的百分比相当高，就要调度。(北部的结果与德克萨斯州的其他地方截然不同，<a class="ae mg" href="https://github.com/kmcelwee/load-forecasting/blob/main/img/NORTH.png" rel="noopener ugc nofollow" target="_blank">这里有一个链接</a>指向它的热图。)</p><figure class="on oo op oq gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pb"><img src="../Images/4f360ffe17ad6b1cb98004b41ad3ec1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q-rp3i9gU-0BTxUzWsiASg.png"/></div></div></figure><p id="29d4" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">结果表明,“局部峰值似然性”变量在此函数中起了最大的作用，而百分位数因子有助于检测历史背景中明显的非峰值。</p><p id="ce77" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">我没有忘记，这种优化也可以通过分解每个月的规则来辅助，甚至可以应用某种机器学习算法；但是，由于未来的负载行为可能会因技术和消费模式的变化而不同于过去，因此这些流程很容易成为过度拟合的牺牲品。</p><p id="cae7" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">然而，公用事业公司有很大的机会利用机器学习和基本统计数据来更好地通知他们的调度决策，从而节省资金并在此过程中建立客户信任。</p></div><div class="ab cl lc ld hx le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="im in io ip iq"><p id="35a0" class="pw-post-body-paragraph lj lk je ll b lm ln ko lo lp lq kr lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated"><em class="mf">有问题吗？更正？数据科学笑话？联系我，查看更多项目在</em> <a class="ae mg" href="http://www.kmcelwee.com" rel="noopener ugc nofollow" target="_blank"> <em class="mf">我的网站</em> </a> <em class="mf">。</em></p></div></div>    
</body>
</html>