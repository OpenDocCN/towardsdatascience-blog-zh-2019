<html>
<head>
<title>The Agony and the Ecstasy of my First Open Source Contribution</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我第一次开源贡献的痛苦和狂喜</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/my-first-open-source-contribution-7698950895a9?source=collection_archive---------21-----------------------#2019-12-21">https://towardsdatascience.com/my-first-open-source-contribution-7698950895a9?source=collection_archive---------21-----------------------#2019-12-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="49e4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我的第一个开源贡献并不是一帆风顺的，但它肯定是完全值得的</h2></div><p id="73d8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在过去一年左右的时间里，我一直渴望为一个开源 R 包做贡献，但是像许多人一样，我发现处理这个任务的想法令人害怕。</p><p id="e409" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">虽然我每天都在一个非常动态和紧密的团队中工作，并且在远程存储库(Git)的世界中，我对这些远程存储库中的协作工作的接触非常有限…我们更倾向于在很大程度上独立完成项目，所以拉请求(PRs)、合并、分叉的概念…嗯，这都有点令人生畏。</p><p id="01f8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是旅程中的一瞥，将在本帖中解释:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/3d4004a4899a95f203c4c9ea74572caa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JFGzIujPWhxT2zYY.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">The journey I took</figcaption></figure><p id="c1a5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这篇文章不会是一个详尽的每个接触点的一步一步的指南，而是一个中高层次的总结。</p><blockquote class="lu lv lw"><p id="1171" class="ki kj lx kk b kl km ju kn ko kp jx kq ly ks kt ku lz kw kx ky ma la lb lc ld im bi translated">我的孩子，生活本不该是轻松的；但是鼓起勇气:这可能是令人愉快的。——乔治·萧伯纳</p></blockquote><p id="9558" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">记着乔治的话，我想是时候让自己跳进去了。</p><p id="8f91" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">浏览 Twitter(就像护理新生儿一样)，我看到一条关于我在<em class="lx">上的一些分析中使用的一个包的推文，不要责怪数据</em>说这个包现在在 CRAN 上直播(一个伟大的成就)。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi mb"><img src="../Images/8972077b903e02e606cea11f099971be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*npU5I6OzmPgKxzyc.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">The tweet that started everything</figcaption></figure><p id="5f69" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这很自然地把我带到了<a class="ae mc" href="https://github.com/jimmyday12/fitzRoy" rel="noopener ugc nofollow" target="_blank"> Github </a>上的仓库，在那里我注意到有一些公开的“问题”，其中之一是为任何回合创建一个梯子的函数。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h2 id="ee82" class="mk ml it bd mm mn mo dn mp mq mr dp ms kr mt mu mv kv mw mx my kz mz na nb nc bi translated">菲茨罗伊套餐</h2><p id="c0b1" class="pw-post-body-paragraph ki kj it kk b kl nd ju kn ko ne jx kq kr nf kt ku kv ng kx ky kz nh lb lc ld im bi translated">由<a class="ae mc" href="https://github.com/jimmyday12" rel="noopener ugc nofollow" target="_blank"> James Day </a>开发的 fitzRoy 软件包是一个旨在帮助 R 用户提取和分析澳大利亚足球联盟(AFL)男女比赛数据的软件包:</p><blockquote class="lu lv lw"><p id="0cc4" class="ki kj lx kk b kl km ju kn ko kp jx kq ly ks kt ku lz kw kx ky ma la lb lc ld im bi translated">fitzRoy 的目标是提供一套功能，使用户能够方便地访问来自 afltables.com 和 footywire.com 的 AFL 数据。还有一些工具可以处理和清理这些数据。</p></blockquote><p id="6a7d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">虽然我肯定没有在这一点上做任何广泛的分析，但我猜想所有 AFL 数据分析项目的大部分都是在这个软件包的帮助下完成的。</p><h2 id="4615" class="mk ml it bd mm mn mo dn mp mq mr dp ms kr mt mu mv kv mw mx my kz mz na nb nc bi translated">直接跳进来</h2><p id="1738" class="pw-post-body-paragraph ki kj it kk b kl nd ju kn ko ne jx kq kr nf kt ku kv ng kx ky kz nh lb lc ld im bi translated">所以，与其考虑做出贡献有多好，为什么不直接联系詹姆斯，主动提出解决这个公开的问题呢…</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ni"><img src="../Images/85bf49dd1c6c89fd9302ac4d98bb82a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*as-hRfaUVJba_DSZ.png"/></div></div></figure><p id="5fe3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">詹姆斯非常容易相处，而且他很乐于助人(对这个笨手笨脚的傻瓜很有耐心)。</p><p id="8287" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后是写函数的时候了。就像写函数一样。幸运的是，我已经为一个线性回归模型编写了这个函数，这个模型是我为预测 AFL 主客场比赛的上座率而构建的<a class="ae mc" href="https://www.dontblamethedata.com/blog/building-a-linear-regression-model-in-r-to-predict-afl-crowds/" rel="noopener ugc nofollow" target="_blank">这里是</a>。这个函数被恰当地命名为<code class="fe nj nk nl nm b">return_ladder()</code> …我是数据科学家，不是诗人。</p><p id="2344" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个函数做了一些修改，利用包中的<code class="fe nj nk nl nm b">get_match_results()</code>函数返回<code class="fe nj nk nl nm b">return_ladder</code>的起始数据帧。在编写这个函数的时候，我想解决这个需求，即梯子可以在任何回合返回，并且可以在 2011 赛季之前返回，这是另一个 API 已经提供的。</p><p id="b41d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">记住这一点，编写的函数接受三个参数，所有参数都可以选择为空，也可以指定:</p><ul class=""><li id="d8ef" class="nn no it kk b kl km ko kp kr np kv nq kz nr ld ns nt nu nv bi translated"><code class="fe nj nk nl nm b">match_results_df</code> -使用<code class="fe nj nk nl nm b">get_match_results()</code>提取的数据帧，</li><li id="01bc" class="nn no it kk b kl nw ko nx kr ny kv nz kz oa ld ns nt nu nv bi translated"><code class="fe nj nk nl nm b">season_round</code> -用户想要梯子的季节周期，</li><li id="de69" class="nn no it kk b kl nw ko nx kr ny kv nz kz oa ld ns nt nu nv bi translated"><code class="fe nj nk nl nm b">season</code> -需要梯子的季节。</li></ul><p id="73f8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果这些都留空，该函数将返回自 1897 赛季以来每个赛季每轮的阶梯。</p><p id="03d1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">编写函数是一回事，它还需要 roxygen 注释，这些注释在函数的帮助文档中返回给用户。哈德利的《R 包》一书很好地解释了这些。</p><h2 id="7b51" class="mk ml it bd mm mn mo dn mp mq mr dp ms kr mt mu mv kv mw mx my kz mz na nb nc bi translated">我准备好成为一名贡献者</h2><p id="32c7" class="pw-post-body-paragraph ki kj it kk b kl nd ju kn ko ne jx kq kr nf kt ku kv ng kx ky kz nh lb lc ld im bi translated">我已经编写了函数、帮助文档，并使用<code class="fe nj nk nl nm b">devtools::check()</code>检查了包，以确保我没有犯任何会导致包构建失败的错误……没有什么看起来令人担忧(嗯，有一些关于<em class="lx">没有全局变量</em>的可见绑定之类的警告，但我确信没有什么可担心的)，但对我来说一切都很好。</p><p id="94bc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我的本地更改已提交，公关也已完成，我准备好成为一名贡献者，然后嘭！<strong class="kk iu">codecov 失败</strong>！！那是什么？！给詹姆斯发了一封电子邮件，我被告知这是因为没有写测试。好的，我会写一些测试…什么是测试？！我如何编写这些测试？！我发现这个<a class="ae mc" href="https://katherinemwood.github.io/post/testthat/" rel="noopener ugc nofollow" target="_blank">帖子</a>真的很有帮助，还有哈德利在 R Packages 书中的测试。</p><p id="e81a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦这些测试被编写，我提交我的更改，我准备好成为一名贡献者，然后砰！我已经对我的 PR 中没有的母版进行了更改…好的，所以我需要将母版合并到我的 PR 中——很容易(对于某些人来说，我可能不知道)。谷歌一下，看起来很容易，但是在输入<code class="fe nj nk nl nm b">git merge origin/master</code>之后，我在终端中弹出了这个编辑器:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/311ad1df61c33809a172a725735613d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/0*2A53kEqnVGTz-1C0.png"/></div></figure><p id="fc0c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我最初的想法？这是什么？！</p><p id="c873" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有点谷歌，好吧，这是一个 VIM 编辑器。简单。写一个提交消息，然后一切都会好的…等等？！我如何离开这个屏幕？！再谷歌一下，输入<code class="fe nj nk nl nm b">:WQ</code>之后，我们就可以开始摇滚了。</p><h2 id="ac8c" class="mk ml it bd mm mn mo dn mp mq mr dp ms kr mt mu mv kv mw mx my kz mz na nb nc bi translated">什么？我是。一.在做什么？！！</h2><p id="cbd3" class="pw-post-body-paragraph ki kj it kk b kl nd ju kn ko ne jx kq kr nf kt ku kv ng kx ky kz nh lb lc ld im bi translated">好吧，事情看起来不错。我提交了我的修改，所有的检查都通过了，快乐的日子。</p><p id="9b32" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你知道我之前写的关于<em class="lx">的那一行吗？有一些关于‘全局变量没有可见绑定’之类的警告，但是我确信没有什么好担心的。？好吧，这一直困扰着我，因为正如詹姆斯建议的那样，当试图包含 CRAN 的更新时，这些会引起问题。所以我修改了那些，也更新了男士的小插图。在这一点上，我对自己做了什么有点模糊，但我所知道的是，我一定是把自己织进了一张 Git 网…</em></p><p id="bcad" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我的分叉回购的<code class="fe nj nk nl nm b">Master</code>比我的分支<code class="fe nj nk nl nm b">Ladder</code>晚两次提交，比<code class="fe nj nk nl nm b">Origin/Master</code>早五次提交。什么？我是。一.在做什么？！试错，试错。</p><h2 id="3809" class="mk ml it bd mm mn mo dn mp mq mr dp ms kr mt mu mv kv mw mx my kz mz na nb nc bi translated">成功！</h2><p id="c922" class="pw-post-body-paragraph ki kj it kk b kl nd ju kn ko ne jx kq kr nf kt ku kv ng kx ky kz nh lb lc ld im bi translated">在经历了很多心痛之后(我不能强调有多心痛)，最终，我把自己整理好了，创造了另一个公关和…成功！！！</p><p id="627a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，我可以说我已经成功地为一个开源项目做出了我的第一份贡献。我希望这个软件包的用户会发现这个功能很有用，并且像其他任何东西一样，可以找到改进的地方，使它变得更好。</p><p id="a939" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> <em class="lx">本帖原创，发布在不怪数据博客</em></strong><a class="ae mc" href="https://www.dontblamethedata.com/" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu"><em class="lx">https://www.dontblamethedata.com</em></strong></a><strong class="kk iu"><em class="lx">。去那里看看一些正在使用的新功能的例子。</em> </strong></p></div></div>    
</body>
</html>