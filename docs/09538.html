<html>
<head>
<title>Introducing the schrute Package: the Entire Transcripts From The Office</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">介绍 schrute 软件包:办公室的全部记录</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/introducing-the-schrute-package-the-entire-transcripts-from-the-office-cfc13fe1e769?source=collection_archive---------26-----------------------#2019-12-15">https://towardsdatascience.com/introducing-the-schrute-package-the-entire-transcripts-from-the-office-cfc13fe1e769?source=collection_archive---------26-----------------------#2019-12-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2f5f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">文本数据集的集锦</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5268059c2980a18cc4ed9ec45fd0bb61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gf6yzF9Zmy4NW5sIdT_8Gg.png"/></div></div></figure><p id="cf48" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://bradlindblad.github.io/schrute/" rel="noopener ugc nofollow" target="_blank"> Github 回购</a></p><p id="eb1f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是一个只有一件事的软件包:办公室<a class="ae ln" href="https://www.imdb.com/title/tt0386676/" rel="noopener ugc nofollow" target="_blank">所有剧集的完整副本！</a>(美版)。</p><p id="1bac" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用这个数据集来掌握自然语言处理或文本分析。让我们从茱莉亚·西尔格和大卫·罗宾逊所著的优秀的《用 R 进行文本挖掘的 T4》一书中的几个例子来了解一下这个主题。</p><p id="8a9e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，从 CRAN 安装软件包:</p><pre class="kg kh ki kj gt lo lp lq lr aw ls bi"><span id="0553" class="lt lu iq lp b gy lv lw l lx ly"># install.packages("schrute") <br/>library(schrute)</span></pre><p id="7178" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">schrute 包只有一个数据集；将它赋给一个变量</p><pre class="kg kh ki kj gt lo lp lq lr aw ls bi"><span id="4328" class="lt lu iq lp b gy lv lw l lx ly">mydata &lt;- schrute::theoffice</span></pre><p id="c45e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">看一下格式:</p><pre class="kg kh ki kj gt lo lp lq lr aw ls bi"><span id="e7e1" class="lt lu iq lp b gy lv lw l lx ly">dplyr::glimpse(mydata) </span><span id="b8c8" class="lt lu iq lp b gy lz lw l lx ly">#&gt; Observations: 55,130 #&gt; Variables: 7 <br/>#&gt; $ index &lt;int&gt; 1, 358, 715, 1072, 1429, 1786, 2143, 2500, 2857... #&gt; $ season &lt;chr&gt; "01", "01", "01", "01", "01", "01", "01", "01",... #&gt; $ episode &lt;chr&gt; "01", "01", "01", "01", "01", "01", "01", "01",... <br/>#&gt; $ episode_name &lt;chr&gt; " Pilot", " Pilot", " Pilot", " Pilot", " Pilot... <br/>#&gt; $ character &lt;chr&gt; "Michael", "Jim", "Michael", "Jim", "Michael", ... <br/>#&gt; $ text &lt;chr&gt; " All right Jim. Your quarterlies look very goo... #&gt; $ text_w_direction &lt;chr&gt; " All right Jim. Your quarterlies look very goo...</span><span id="2ae5" class="lt lu iq lp b gy lz lw l lx ly">mydata %&gt;% <br/>dplyr::filter(season == '01') %&gt;% <br/>dplyr::filter(episode == '01') %&gt;% <br/>dplyr::slice(1:3) %&gt;% <br/>knitr::kable()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ma"><img src="../Images/016eaff65d39432d45e43a55fe79d48d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vAGlKAbRvJJh8OoOXaJfMQ.png"/></div></div></figure><p id="229a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以我们有的是季节，集数和名字，人物，说的台词和跟舞台方向(cue)说的台词。</p><p id="e406" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以用 tidytext 包中的几行来标记所有的行:</p><pre class="kg kh ki kj gt lo lp lq lr aw ls bi"><span id="bcf6" class="lt lu iq lp b gy lv lw l lx ly">token.mydata &lt;- mydata %&gt;% <br/>tidytext::unnest_tokens(word, text)</span></pre><p id="fa6f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这将我们的数据集增加到 575146 条记录，其中每条记录包含脚本中的一个单词。</p><pre class="kg kh ki kj gt lo lp lq lr aw ls bi"><span id="00b4" class="lt lu iq lp b gy lv lw l lx ly">token.mydata %&gt;% <br/>dplyr::filter(season == '01') %&gt;% <br/>dplyr::filter(episode == '01') %&gt;% <br/>dplyr::slice(1:3) %&gt;% <br/>knitr::kable()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mb"><img src="../Images/956e1214c3b3fda5c6b99b80e021f801.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pEb7-s8AEDwTSDmxmW3m-A.png"/></div></div></figure><p id="9dea" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果我们想分析整个数据集，我们需要先删除一些停用词:</p><pre class="kg kh ki kj gt lo lp lq lr aw ls bi"><span id="9b5d" class="lt lu iq lp b gy lv lw l lx ly">stop_words &lt;- tidytext::stop_words tidy.token.mydata &lt;- token.mydata %&gt;% dplyr::anti_join(stop_words, by = "word")</span></pre><p id="d6b0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后看看最常见的单词是什么:</p><pre class="kg kh ki kj gt lo lp lq lr aw ls bi"><span id="3d1c" class="lt lu iq lp b gy lv lw l lx ly">tidy.token.mydata %&gt;% <br/>dplyr::count(word, sort = TRUE) <br/>#&gt; # A tibble: 19,225 x 2 <br/>#&gt;  word      n <br/>#&gt; &lt;chr&gt;    &lt;int&gt; <br/>#&gt; 1 yeah    2895 <br/>#&gt; 2 hey     2189 <br/>#&gt; 3 michael 2054 <br/>#&gt; 4 dwight  1540 <br/>#&gt; 5 uh      1433 <br/>#&gt; 6 gonna   1365 <br/>#&gt; 7 jim     1345 <br/>#&gt; 8 pam     1168 <br/>#&gt; 9 time    1129 <br/>#&gt; 10 guys   933 <br/>#&gt; # ... with 19,215 more rows</span><span id="31d5" class="lt lu iq lp b gy lz lw l lx ly">tidy.token.mydata %&gt;% <br/>dplyr::count(word, sort = TRUE) %&gt;% <br/>dplyr::filter(n &gt; 400) %&gt;% <br/>dplyr::mutate(word = stats::reorder(word, n)) %&gt;% ggplot2::ggplot(ggplot2::aes(word, n)) + <br/>ggplot2::geom_col() + <br/>ggplot2::xlab(NULL) + <br/>ggplot2::coord_flip() + <br/>ggplot2::theme_minimal()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mc"><img src="../Images/80fbf57131e31540d334a1fe18f064b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VBf-4A6EbIMZ7cIc.png"/></div></div></figure><p id="b779" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以继续这样做。现在你已经有了时间线(剧集，季节)和剧中每一行每一个词的角色，你可以进行无限的分析。一些想法:—逐角色感悟—逐角色感悟—逐季节自恋(咳咳..Nard Dog 第 8-9 季)——角色台词——等等。</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><p id="b8a4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="mk">原载于 2019 年 12 月 15 日</em><a class="ae ln" href="https://technistema.com/posts/introducing-the-schrute-package-the-entire-transcripts-from-the-office/" rel="noopener ugc nofollow" target="_blank"><em class="mk">https://technistema.com</em></a><em class="mk">。</em></p></div></div>    
</body>
</html>