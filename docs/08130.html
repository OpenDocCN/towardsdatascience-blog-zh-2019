<html>
<head>
<title>Separate Music Tracks with Deep Learning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用深度学习分离音乐曲目</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/separate-music-tracks-with-deep-learning-be4cf4a2c83?source=collection_archive---------7-----------------------#2019-11-07">https://towardsdatascience.com/separate-music-tracks-with-deep-learning-be4cf4a2c83?source=collection_archive---------7-----------------------#2019-11-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ad5f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何使用 Deezer 的 library spleeter 开始创建您的卡拉 ok。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/efbd4ef37cfe1b91659a74ff11c60509.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zy4zeU5OdwWGnknJhQG83Q.jpeg"/></div></div></figure><p id="3ab8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你是一名 DJ，一名音乐采样员或类似的人，通常你会花几个小时从原始音乐中创作歌曲，甚至花上几千美元购买软件来帮助你。这个过程中的一个步骤是能够分离人声和音乐，有时是人声、低音、鼓等等。</p><p id="3577" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Deezer 的出色人员刚刚发布了一个包，它将帮助您快速、轻松且免费地做到这一点！！</p><h1 id="5ea1" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">它是如何工作的</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mf"><img src="../Images/224f966be29f2c5d1c3885724ba53202.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ua9VP1MvGmTjFqJxzxcL-w.png"/></div></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk"><a class="ae mk" href="https://sigsep.github.io/" rel="noopener ugc nofollow" target="_blank">https://sigsep.github.io/</a></figcaption></figure><p id="a8c4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在论文<a class="ae mk" href="https://ieeexplore.ieee.org/document/8683555" rel="noopener ugc nofollow" target="_blank">“歌声分离:训练数据研究”</a>中，Deezer 的人员解释了使用深度神经网络分离音轨的过程。这是要点:</p><blockquote class="ml"><p id="b1ad" class="mm mn iq bd mo mp mq mr ms mt mu lm dk translated">在本文中，我们将重点放在深度神经网络来执行分离。我们选择的基准模型是 U-Net[……]U-Net 与卷积自动编码器采用相同的架构，具有额外的跳跃连接，可将编码阶段丢失的详细信息带回解码阶段。它在编码器中有 5 个步长 2D 卷积层，在解码器中有 5 个步长 2D 去卷积层。</p></blockquote><p id="cd67" class="pw-post-body-paragraph kr ks iq kt b ku mv jr kw kx mw ju kz la mx lc ld le my lg lh li mz lk ll lm ij bi translated">所以他们使用一个 U 型网络，看起来像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/bc9baab7b785a38cddd0aecead48a0ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zMQea-8Ww6sS-CjR1Mspjw.png"/></div></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk"><a class="ae mk" href="https://arxiv.org/pdf/1505.04597.pdf" rel="noopener ugc nofollow" target="_blank">https://arxiv.org/pdf/1505.04597.pdf</a></figcaption></figure><p id="9261" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个架构是由 Ronneberger 和其他人创建的，用于医学领域的图像分类任务，现在我们将它用于音乐和更多。该网络是从完全卷积网络中构思出来的，经过修改和扩展，它可以使用非常少的训练图像进行工作，并产生更精确的分割。</p><p id="caad" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">U-Net 架构还依赖于对数据扩充的大量使用，以便更有效地使用可用的带注释的样本。如果你没有那么多信息，这是很棒的。</p><p id="383d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Deezer 的人做的主要修改是集成立体声处理:</p><blockquote class="ml"><p id="8ea8" class="mm mn iq bd mo mp mq mr ms mt mu lm dk translated">我们使用 3D 张量(通道、时间步长、频率仓)作为网络的输入和输出。</p></blockquote><p id="f3c5" class="pw-post-body-paragraph kr ks iq kt b ku mv jr kw kx mw ju kz la mx lc ld le my lg lh li mz lk ll lm ij bi translated">用于训练网络的数据集:MUSBD 和 Bean。MUSDB 是用于源分离的最大和最新的公共数据集，而 Bean 是包含大部分流行/摇滚歌曲的私有数据集，并且包括作为独立录音的声乐和器乐音轨。</p><p id="a296" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后他们重建了数据集并做了一些数据扩充，具体来说他们做了:</p><ul class=""><li id="ee26" class="nb nc iq kt b ku kv kx ky la nd le ne li nf lm ng nh ni nj bi translated">频道交换。</li><li id="b31e" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm ng nh ni nj bi translated">时间拉伸。</li><li id="20b5" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm ng nh ni nj bi translated">音高移位</li><li id="cfee" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm ng nh ni nj bi translated">使再混合</li><li id="8b26" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm ng nh ni nj bi translated">逆高斯滤波</li><li id="a334" class="nb nc iq kt b ku nk kx nl la nm le nn li no lm ng nh ni nj bi translated">响度标度</li></ul><p id="2c57" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以及更多的组合。最后一句话:</p><blockquote class="ml"><p id="24e0" class="mm mn iq bd mo mp mq mr ms mt mu lm dk translated">预训练模型的性能非常接近已发布的技术水平，并且据作者所知，在即将公开发布的通用 musdb18 基准测试中，这是性能最好的 4 茎分离模型。Spleeter 的速度也非常快，因为它可以使用预训练的 4 茎模型在单个图形处理单元(GPU)上将混合音频文件分成 4 个茎，比实时 1 快 100 倍。</p></blockquote><h1 id="7a96" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw np jx lz jz nq ka mb kc nr kd md me bi translated">如何使用它</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/1a86b0568df61d801b0c4dcc814feccc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gzhyb3LdGGKsfV26r-PU_g.png"/></div></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk"><a class="ae mk" href="https://deezer.io/releasing-spleeter-deezer-r-d-source-separation-engine-2b88985e797e" rel="noopener ugc nofollow" target="_blank">https://deezer.io/releasing-spleeter-deezer-r-d-source-separation-engine-2b88985e797e</a></figcaption></figure><p id="5c16" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了使用这个包，我创建了一个 MatrixDS repo，这样你就可以试一试了:</p><div class="nt nu gp gr nv nw"><a href="https://community.platform.matrixds.com/community/project/5dc40ffa9550a3c2d251bcb8/files" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">MatrixDS |数据项目工作台</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">MatrixDS 是一个构建、共享和管理任何规模的数据项目的地方。</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">community.platform.matrixds.com</p></div></div></div></a></div><p id="1f00" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要开始使用该库，首先要做的是安装它:</p><pre class="kg kh ki kj gt of og oh oi aw oj bi"><span id="77bf" class="ok lo iq og b gy ol om l on oo">pip install --user spleeter</span></pre><p id="2a37" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对我来说，最好使用康达方式:</p><pre class="kg kh ki kj gt of og oh oi aw oj bi"><span id="9894" class="ok lo iq og b gy ol om l on oo">git clone https://github.com/deezer/spleeter<br/>conda env create -f spleeter/conda/spleeter-cpu.yaml<br/>conda activate spleeter-cpu</span></pre><p id="96d7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您还需要安装 ffmpeg:</p><pre class="kg kh ki kj gt of og oh oi aw oj bi"><span id="be74" class="ok lo iq og b gy ol om l on oo">sudo apt-get update<br/>sudo apt-get install ffmpeg</span></pre><p id="e018" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您正在运行 mac:</p><pre class="kg kh ki kj gt of og oh oi aw oj bi"><span id="b65b" class="ok lo iq og b gy ol om l on oo">brew install ffmpeg</span></pre><p id="1f90" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我将用这些歌曲来测试:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op oq l"/></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op oq l"/></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="3bdf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">免责声明:我不拥有这些歌曲的权利，版权属于官方音乐创作者和唱片公司。</p><p id="4158" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后对第一首歌这样做:</p><pre class="kg kh ki kj gt of og oh oi aw oj bi"><span id="36ab" class="ok lo iq og b gy ol om l on oo">spleeter separate -i songs/breath.mp3 -o output/</span></pre><p id="501f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这将下载用于分离人声和音乐的预训练模型。</p><p id="5b5d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于第一首歌，“你的每一次呼吸”，这些是分离人声和音乐的结果:</p><div class="nt nu gp gr nv nw"><a href="https://drive.google.com/file/d/1nQX9c_gkr0ulofnbF2aG2GNS0d8fHAm1/view?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">伴奏. wav</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">编辑描述</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">drive.google.com</p></div></div></div></a></div><div class="nt nu gp gr nv nw"><a href="https://drive.google.com/open?id=1tym_4LCTj0Jt6-cQ8Ui7GdyHK3pfk6td" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">vocals.wav</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">编辑描述</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">drive.google.com</p></div></div></div></a></div><p id="1e0d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以下是“懒歌”的搜索结果:</p><div class="nt nu gp gr nv nw"><a href="https://drive.google.com/file/d/1_Wkdnr4dpxndDAXv9e-zzkXnZf_3GRje/view?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">伴奏(1)。声音资源文件</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">编辑描述</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">drive.google.com</p></div></div></div></a></div><div class="nt nu gp gr nv nw"><a href="https://drive.google.com/file/d/1D62XMBDzvsGAdNfI0UuCj_3KTWSttxjZ/view?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">人声(1)。声音资源文件</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">编辑描述</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">drive.google.com</p></div></div></div></a></div><p id="8b41" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在让我们用“不要让我失望”这首歌的 4 茎模型来分离人声/低音/鼓/其他:</p><pre class="kg kh ki kj gt of og oh oi aw oj bi"><span id="4800" class="ok lo iq og b gy ol om l on oo">spleeter separate -i songs/dont.mp3 -o audio_output -p spleeter:4stems</span></pre><p id="daa9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这将下载用于分离所有音乐源的预训练模型。</p><p id="cc36" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以下是这首歌的结果:</p><div class="nt nu gp gr nv nw"><a href="https://drive.google.com/drive/folders/1qA3xsUf71qrk23pwdf65roWvGM_yhsm6?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">不要让我失望-谷歌驱动</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">编辑描述</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">drive.google.com</p></div></div><div class="or l"><div class="os l ot ou ov or ow kp nw"/></div></div></a></div><p id="5dd3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你会在那里找到足迹。</p><p id="2999" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个库的强大给我留下了非常深刻的印象，所有这些只需要几秒钟就可以运行，而且输出非常好。我知道可以改进，你也可以！因为代码是开源的，你可以去那里看看哪里可以让声音更清晰。你甚至可以用特定音乐来训练你自己的模型，这样它就能被更好地识别。</p><p id="1028" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所有相关信息都在这里:</p><div class="nt nu gp gr nv nw"><a href="https://github.com/deezer/spleeter" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">除雾器/分离器</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">Spleeter 是 Deezer 源分离库，具有用 Python 编写的预训练模型，并使用 Tensorflow。</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">github.com</p></div></div><div class="or l"><div class="ox l ot ou ov or ow kp nw"/></div></div></a></div><p id="a39a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">还有这里:</p><div class="nt nu gp gr nv nw"><a href="https://github.com/deezer/spleeter/wiki/2.-Getting-started" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">除雾器/分离器</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">Deezer 源分离库，包括预训练模型。- deezer/spleeter</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">github.com</p></div></div><div class="or l"><div class="oy l ot ou ov or ow kp nw"/></div></div></a></div></div><div class="ab cl oz pa hu pb" role="separator"><span class="pc bw bk pd pe pf"/><span class="pc bw bk pd pe pf"/><span class="pc bw bk pd pe"/></div><div class="ij ik il im in"><p id="7180" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢 Deezer 的出色人员发布了这个库。</p><p id="3ac6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你想更多地了解我并看到其他文章，请点击这里关注我:</p><div class="nt nu gp gr nv nw"><a href="https://twitter.com/FavioVaz" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">法维奥·巴斯克斯</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">Favio Vázquez 的最新推文(@FavioVaz)。数据科学家。物理学家和计算工程师。我有一个…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">twitter.com</p></div></div><div class="or l"><div class="pg l ot ou ov or ow kp nw"/></div></div></a></div></div></div>    
</body>
</html>