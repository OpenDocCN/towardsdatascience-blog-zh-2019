<html>
<head>
<title>A Music Taste Analysis Using Spotify API and Python.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Spotify API 和 Python 进行音乐品味分析。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-music-taste-analysis-using-spotify-api-and-python-e52d186db5fc?source=collection_archive---------3-----------------------#2019-08-17">https://towardsdatascience.com/a-music-taste-analysis-using-spotify-api-and-python-e52d186db5fc?source=collection_archive---------3-----------------------#2019-08-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="092a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">探索音频特征并构建机器学习方法</h2></div></div><div class="ab cl ki kj hx kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="im in io ip iq"><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/eabf568a5e359a5e5bb6996270c398e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5zuLFxdxqXDs5tqwvvfsDA.jpeg"/></div></div></figure><p id="9c7e" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi lx translated">几天前，我读了一篇非常有趣的文章，作者是我的一个朋友(<a class="ae mg" href="https://medium.com/mundo-ia/an%C3%A1lise-de-dados-de-uma-playlist-do-spotify-com-python-e-power-bi-bc848aa0880c" rel="noopener">鲁兹</a>)，他使用 API(应用编程接口)分析了他的 Spotify 播放列表。读完之后，我打开应用程序，看了看我的播放列表，意识到我一周甚至一整天都在听不同风格的音乐。我可能一分钟前还在听桑巴，过一会儿又开始听重金属。想到这一点，我决定不仅分析我的音乐品味，也分析我未婚妻的音乐品味，以弄清楚数据对此有何说明。</p><p id="5108" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">因此，为了做到这一点，我首先使用 Spotify 的 API 提取了我们在 Spotify 上听得最多的 10 位艺术家的音频特征，以便我能够进行音乐品味分析。除此之外，我训练了一个机器学习模型来预测一首歌更有可能属于的每个列表。</p><p id="b161" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">另一个值得注意的事实是，我有一些来自<a class="ae mg" href="https://minerandodados.com.br/curso-de-data-science/" rel="noopener ugc nofollow" target="_blank">数据科学做零</a>的参考资料，这是巴西一个著名的数据科学社区。</p><p id="20ad" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated"><strong class="ld iu"> <em class="mh">你可以在我的</em></strong><a class="ae mg" href="https://github.com/jmcabreira" rel="noopener ugc nofollow" target="_blank"><strong class="ld iu"><em class="mh">Github</em></strong></a><strong class="ld iu"><em class="mh">页面</em> </strong>上查看我开发的所有代码</p><h1 id="2034" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated"><strong class="ak">工具:</strong></h1><p id="b016" class="pw-post-body-paragraph lb lc it ld b le na ju lg lh nb jx lj lk nc lm ln lo nd lq lr ls ne lu lv lw im bi translated">- Spotify 库获取 Spotify 平台音乐数据<br/> - Seaborn 和 matplotlib 实现数据可视化<br/> - Pandas 和 numpy 实现数据分析<br/> - Sklearn 构建机器学习模型</p><h1 id="a575" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">Spotify 音频功能</h1><p id="1a45" class="pw-post-body-paragraph lb lc it ld b le na ju lg lh nb jx lj lk nc lm ln lo nd lq lr ls ne lu lv lw im bi translated">众所周知，Spotify 是全球最受欢迎的音频流媒体平台之一。同样，Twitter、Slack 和脸书也为开发者提供了一个 API 来探索他们的音乐数据库，并深入了解我们的收听习惯。</p><p id="37bd" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">基于此，我选择了十位我日常经常听的艺术家，并让我的未婚妻给我一张她最喜欢的艺术家的名单。有了艺术家列表后，我使用了<a class="ae mg" href="https://medium.com/@RareLoot/extracting-spotify-data-on-your-favourite-artist-via-python-d58bc92a4330" rel="noopener">稀有战利品</a>帖子作为参考来获取音频特征数据，以便进行分析。</p><p id="7d43" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">获得的第一个数据集包含 16 列，其中 1433 首歌曲来自我的列表，691 首来自 Emily 的 lit。因此，为了平衡歌曲的数量，我构建了一个函数，从我的列表中随机删除一些行。在删除过程之后，我们总共找到了 1394 首歌曲(703 首来自我的列表，691 首来自 Emily 的列表)。</p><p id="fab0" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">值得一提的是，我并没有使用所有的 16 列进行分析。相反，我只选择了那些与音频特性相关的栏目。您可以在下面找到每个功能的解释(过去/复制自 Spotify 网站)。</p><ul class=""><li id="def3" class="nf ng it ld b le lf lh li lk nh lo ni ls nj lw nk nl nm nn bi translated">声音:一种置信度，从 0.0 到 1.0，表示音轨是否是声音的。1.0 表示音轨是声学的高置信度。</li><li id="7433" class="nf ng it ld b le no lh np lk nq lo nr ls ns lw nk nl nm nn bi translated">可跳舞性:可跳舞性描述了一个曲目在音乐元素组合的基础上适合跳舞的程度，包括速度、节奏稳定性、节拍强度和整体规律性。值 0.0 最不适合跳舞，1.0 最适合跳舞。</li><li id="4087" class="nf ng it ld b le no lh np lk nq lo nr ls ns lw nk nl nm nn bi translated">能量:能量是一个从 0.0 到 1.0 的度量，代表强度和活动的感知度量。通常，高能轨道感觉起来很快，很响，很嘈杂。例如，死亡金属具有高能量，而巴赫前奏曲在音阶上得分较低。对该属性有贡献的感知特征包括动态范围、感知响度、音色、开始速率和一般熵。</li><li id="9185" class="nf ng it ld b le no lh np lk nq lo nr ls ns lw nk nl nm nn bi translated">乐器性:预测音轨是否不包含人声。“Ooh”和“aah”在这种情况下被视为乐器。Rap 或口语词轨道明显是“有声的”。乐器度值越接近 1.0，轨道不包含人声内容的可能性就越大。高于 0.5 的值旨在表示乐器轨道，但随着该值接近 1.0，置信度会更高。</li><li id="e9d7" class="nf ng it ld b le no lh np lk nq lo nr ls ns lw nk nl nm nn bi translated">活跃度:检测录音中是否有观众。较高的活跃度值表示音轨被现场执行的概率增加。高于 0.8 的值很有可能表示该音轨是实时的。</li><li id="ac12" class="nf ng it ld b le no lh np lk nq lo nr ls ns lw nk nl nm nn bi translated">响度:轨道的整体响度，以分贝(dB)为单位。响度值是整个轨道的平均值，可用于比较轨道的相对响度。响度是声音的质量，是与体力(振幅)相关的主要心理因素。值的典型范围在-60 和 0 db 之间。</li><li id="1d16" class="nf ng it ld b le no lh np lk nq lo nr ls ns lw nk nl nm nn bi translated">语速:语速检测音轨中是否存在口语单词。越是类似语音的录音(例如脱口秀、有声读物、诗歌)，属性值就越接近 1.0。高于 0.66 的值描述可能完全由口语单词组成的轨道。介于 0.33 和 0.66 之间的值描述可能包含音乐和语音的轨道，可以是分段的，也可以是分层的，包括说唱音乐。低于 0.33 的值很可能代表音乐和其他非语音类轨道。</li><li id="3396" class="nf ng it ld b le no lh np lk nq lo nr ls ns lw nk nl nm nn bi translated">配价:从 0.0 到 1.0 的一种量度，描述音轨所传达的音乐积极性。高价曲目听起来更积极(例如，快乐、愉快、欣快)，而低价曲目听起来更消极(例如，悲伤、沮丧、愤怒)。</li><li id="1893" class="nf ng it ld b le no lh np lk nq lo nr ls ns lw nk nl nm nn bi translated">速度:轨道的整体估计速度，单位为每分钟节拍数(BPM)。在音乐术语中，速度是给定作品的速度或节奏，直接来源于平均节拍持续时间。</li></ul><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nt"><img src="../Images/3905aefe292e817407923770329e6cc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xd1RtFERq4O4oqNscqkACQ.png"/></div></div><figcaption class="nu nv gj gh gi nw nx bd b be z dk">Features</figcaption></figure><h1 id="c66a" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">数据分析</h1><p id="0617" class="pw-post-body-paragraph lb lc it ld b le na ju lg lh nb jx lj lk nc lm ln lo nd lq lr ls ne lu lv lw im bi translated">在我决定做这篇文章之前，我从来没有真正考虑过我的音乐品味。事实上，在思考这个问题后，我意识到我没有一个每天都听的特定类型的音乐。其实那要看我的心情了…有些天我醒来听 pagode(来自里约热内卢的巴西风格音乐)，有些天起床后只想听一首真正有活力的歌比如铁娘子，等等。所以，我很好奇不仅调查我的，也调查 Emily 的 Spotify 音频功能。也就是说，让我们直接进入分析。我将首先绘制一个柱状图和一个雷达图，显示我们的特征，以便对它们进行比较。</p><p id="1f64" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">情节表明，在我的艺术家名单中，最突出的特征是<strong class="ld iu">活力</strong>——可能是因为 ACDC、铁娘子和摩托头乐队等摇滚乐。另一方面，观察 Emily 的特征，我们可以注意到<strong class="ld iu">可跳舞性</strong>和<strong class="ld iu">能量</strong>是她列表中普遍的音频属性。这真的很有道理，因为她喜欢听 Ludmila(巴西放克歌手)和 Rihanna 等艺术家的歌曲。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/eff378a3562ebb52c66fe58bdd71627a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*ZgADlauaJHRv96eaw-v-Qg.png"/></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/f97ee81eaf2e924304dd42702d91fdde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*zG5Z00WB66rgfDAw0Iyi1A.png"/></div></figure><p id="4ecf" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">速度是音乐分析的一个重要特征。它可以像旋律、和声或节奏一样重要，因为它代表了歌曲的速度和它唤起的情绪。例如，一首歌的 BPM 越高，这首歌的速度就越快，因此也就越令人振奋和快乐。另一方面，低 BPM 意味着歌曲较慢，这可能表明悲伤、浪漫或戏剧。</p><p id="cdfd" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">查看下图，我们可以看到我们的列表平均速度接近 120 BPM，这表明速度适中/较快。基于这一点，我认为这两种类型的赛道对那些喜欢快走和跑步的人都有兴趣，因为一首 120 BPM 的歌曲通常可以与一个人的步幅模式和他们的步伐同步，以使跑/走更难和更快。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi oa"><img src="../Images/6f07df599ec89cd80fec58164d7055ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5PbEUAkfG7Gz8SJped9eNQ.png"/></div></div></figure><p id="7dc7" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">为了比较音频特性，请务必查看下面的条形图。它显示了我的和 Emily 的歌单的每个属性的平均值之间的差异。</p><p id="e728" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">与此一致，我们可以清楚地看到，我的列表比她的更有活力，更生动，更具工具性。此外，我们还可以注意到在我们的<strong class="ld iu">语音</strong>变量上的微小差异，并且看到<strong class="ld iu">化合价、</strong>和<strong class="ld iu">声音</strong>在她这边占据首位。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ob"><img src="../Images/c64f750d5bbc623c6757d71002215fd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5DaGsWVR0VXoLJEfgrIMUg.png"/></div></div></figure><h1 id="f250" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">名单有多多样化？！</h1><p id="2ef3" class="pw-post-body-paragraph lb lc it ld b le na ju lg lh nb jx lj lk nc lm ln lo nd lq lr ls ne lu lv lw im bi translated">可以通过检查我们歌曲流派的差异来调查列表的多样性。如果大多数歌曲属于同一流派，我们会说它们变化不大。</p><p id="3848" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">问题是:我们如何分析这个问题？嗯，答案很简单:让我们检查每个音频变量的标准偏差，并对它们进行检查。</p><p id="3cbd" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">虽然音频特征本身的标准偏差不能给我们提供太多信息(正如我们在下面的图中看到的)，但我们可以将它们相加，并计算列表标准偏差的平均值。通过这样做，我们得到了“各种音频特性”图中表示的值，在我的列表中值为 0.22，在 Emily 的列表中值为 0.20。</p><p id="9a70" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我们该如何解释呢？！好吧，让我们说，我们可以有一些歌曲的某个特定特征的值很高，比如能量，而其他歌曲的相同属性的值很低。简而言之，这些数字表明我的歌曲比艾米丽的更多样化。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi oc"><img src="../Images/6e007e87f9584adae3b27e21f4d5df09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tLCMQI_ompB4wGhlKh0p0g.png"/></div></div><figcaption class="nu nv gj gh gi nw nx bd b be z dk">Variety of Audio Features</figcaption></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi gj"><img src="../Images/9da9ac69f7c314a6ec596f5670c4f71c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*73J9AHaUaTJsla-EliV-Ng.png"/></div></div><figcaption class="nu nv gj gh gi nw nx bd b be z dk">Standard Deviation of the Audio Features</figcaption></figure><h1 id="5f79" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">变量之间的相关性</h1><p id="b179" class="pw-post-body-paragraph lb lc it ld b le na ju lg lh nb jx lj lk nc lm ln lo nd lq lr ls ne lu lv lw im bi translated">我们还可以构建相关图，如散点图，来显示变量之间的关系。在我们的例子中，我们将把描述音乐积极性的特征效价与可舞性和能量联系起来。</p><p id="67c5" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">为了解释下面的情节，我们必须记住数字一(绿点)和数字零(灰点)分别代表我和艾米丽的歌曲。也就是说，让我们检查散点图。</p><h2 id="ae3a" class="od mj it bd mk oe of dn mo og oh dp ms lk oi oj mu lo ok ol mw ls om on my oo bi translated">化合价和能量</h2><p id="a23b" class="pw-post-body-paragraph lb lc it ld b le na ju lg lh nb jx lj lk nc lm ln lo nd lq lr ls ne lu lv lw im bi translated">配价和能量之间的相关性表明，有一个高能量和低水平的配价歌曲聚集。这意味着我的许多充满活力的歌曲听起来更消极，带有悲伤、愤怒和抑郁的感觉(NF 在这里占据特殊位置哈哈)。然而，当我们看灰色的点时，我们可以看到，随着积极情绪水平的增加，歌曲的能量也增加了。虽然她的数据是分裂的，但我们可以识别这种模式，表明变量之间存在某种“线性”相关性。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi op"><img src="../Images/567d823d11de8f1794cf990c7935239c.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/1*Z_1Pr3XNTm2n0dxsM4QUbw.png"/></div></figure><h2 id="1fa8" class="od mj it bd mk oe of dn mo og oh dp ms lk oi oj mu lo ok ol mw ls om on my oo bi translated">配价和可舞性</h2><p id="c1bf" class="pw-post-body-paragraph lb lc it ld b le na ju lg lh nb jx lj lk nc lm ln lo nd lq lr ls ne lu lv lw im bi translated">现在，看看化合价和可跳舞性之间的关系，我们可以看到 Emily 的歌曲在情节的第一和第二象限中具有高的可跳舞性值。另一方面，我的歌曲大多要么在第三象限，要么在第一象限，就这两个特征而言，表现出一种多样性。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi op"><img src="../Images/0ca288ee85026a8a4df370e1813b7fdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/1*DPO_iumr2feE33luQkKhqw.png"/></div></figure><h1 id="22fb" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">机器学习方法</h1><p id="4841" class="pw-post-body-paragraph lb lc it ld b le na ju lg lh nb jx lj lk nc lm ln lo nd lq lr ls ne lu lv lw im bi translated">好了，我们从数据中得到了一些启示。为了使这篇文章简短，让我们直接进入最好的部分(至少对我来说)，那就是机器学习(ML)算法。</p><p id="7d89" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">重要的是要记住，我并不是 100%关注模型的准确性。此外，我们将使用支持向量机(SVM ),因为它是我目前正在研究的。此外，我不会解释 SVM 是如何工作的。相反，让我们说它是一种监督的 ML 方法，用于分类和回归问题。此外，它的主要任务(分类)是通过定义一个区分它们的最佳超平面来分离所有的类。也就是说，让我们建立一个算法来预测一首歌更有可能属于我的列表还是 Emily 的列表。</p><h2 id="ecf7" class="od mj it bd mk oe of dn mo og oh dp ms lk oi oj mu lo ok ol mw ls om on my oo bi translated">移除功能</h2><p id="3998" class="pw-post-body-paragraph lb lc it ld b le na ju lg lh nb jx lj lk nc lm ln lo nd lq lr ls ne lu lv lw im bi translated">第一步是预处理我们的数据集，以便得到一个在所有列中都有数值的数据帧。因此，让我们首先删除所有与我们的模型不相关的特征，如 id、专辑、名称、URI、流行度和 track_number，并将目标(who 列)与我们的数据框架分开。我们可以通过构建函数 features_removal 轻松地做到这一点，该函数接收一个列表，其中包含我们希望作为参数删除的特性。</p><p id="6a63" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">请注意，在删除它之后，我们仍然有一个分类特征(艺术家)。所以，我们必须在第二步处理这个问题。另外，重要的是要提到我们有两个稍微平衡的类(who 列),这两个类表示这首歌属于谁的列表。简而言之，我的列表中有 703 首歌曲，她的列表中有 691 首，这种数量上的平衡对我们的模型很重要。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi oq"><img src="../Images/d1e9ec987a781037286670200da3a52d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rZrzZtk3p64z4WlQ8KKeJQ.png"/></div></div></figure><h2 id="4e8c" class="od mj it bd mk oe of dn mo og oh dp ms lk oi oj mu lo ok ol mw ls om on my oo bi translated">标签编码器</h2><p id="ca7b" class="pw-post-body-paragraph lb lc it ld b le na ju lg lh nb jx lj lk nc lm ln lo nd lq lr ls ne lu lv lw im bi translated">第二个任务是将所有分类数据(艺术家姓名)转换成数字数据。为何如此？ML 算法只接受数字数据，因此，我们必须使用 LabelEncoder 类将每个艺术家的名字编码成一个特定的数字。编码过程如下所示。</p><pre class="kq kr ks kt gt or os ot ou aw ov bi"><span id="a265" class="od mj it os b gy ow ox l oy oz">#Set Labels<br/>artist_label = enc.fit_transform(df_couple.artist)</span><span id="a2da" class="od mj it os b gy pa ox l oy oz">#Create column containing the labels<br/>df_couple['labels_artists'] = artist_label</span><span id="6584" class="od mj it os b gy pa ox l oy oz">#Remove colum artist (cathegorical data)<br/>features_removal(['artist'])<br/></span></pre><h2 id="f0cd" class="od mj it bd mk oe of dn mo og oh dp ms lk oi oj mu lo ok ol mw ls om on my oo bi translated">管道</h2><p id="1b71" class="pw-post-body-paragraph lb lc it ld b le na ju lg lh nb jx lj lk nc lm ln lo nd lq lr ls ne lu lv lw im bi translated">现在我们的数据集几乎准备好了，我们可以建立我们的模型。你可能想知道:准备好了吗？！当我们处理一些最大似然算法时，我们必须记住，其中一些算法需要特定范围或结构的数据。例如，有时我们不得不将数据转换到一个更高的维度，以便找到分类的界限，如下图所示。为了实现这一点，我们使用了一种叫做内核技巧的技术，这种技术提供了一种高效且成本较低的方法来实现这种映射。此外，它使用不同的函数(核)，其中最流行的是多项式，线性和径向基函数(RBF)。例如，最后一种方法需要以 0 为中心的特征，并且具有相同数量级的方差，这就是我们必须预处理数据的原因。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi pb"><img src="../Images/babf9bc31e0a4e64ef7fb869bb6d1617.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rHdrJUhqeuK8_QXVC20wbA.png"/></div></div><figcaption class="nu nv gj gh gi nw nx bd b be z dk">Kernel Trick</figcaption></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/ac519d66e6eb47917a98fe59634c2a8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*PRIUv_s4z_m5vqdhKbo9fQ.png"/></div><figcaption class="nu nv gj gh gi nw nx bd b be z dk">Radial Basis Function (RBF)</figcaption></figure><pre class="kq kr ks kt gt or os ot ou aw ov bi"><span id="1e5a" class="od mj it os b gy ow ox l oy oz"># Import libraries<br/>from sklearn.pipeline import Pipeline<br/>from sklearn.preprocessing import StandardScaler<br/>from sklearn.preprocessing import MinMaxScaler<br/>from sklearn.preprocessing import Normalizer</span><span id="6a89" class="od mj it os b gy pa ox l oy oz"># Cross-validation and accuracy of the model<br/>def accuracy(clf, data, target):<br/>    results = cross_val_predict(clf, data ,target ,cv = 10)<br/>    return metrics.accuracy_score(target,results)</span></pre><p id="3933" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">管道:</p><pre class="kq kr ks kt gt or os ot ou aw ov bi"><span id="e80c" class="od mj it os b gy ow ox l oy oz"># Pipelines <br/>pip_1 = Pipeline([('scaler',StandardScaler()),<br/>                  ('clf', svm.SVC())<br/>])</span><span id="d751" class="od mj it os b gy pa ox l oy oz">pip_2 = Pipeline([('scaler',StandardScaler()),<br/>                ('clf', svm.SVC(kernel = 'linear'))               <br/>])<br/><br/>pip_3 = Pipeline([('scaler', StandardScaler()),<br/>                ('clf', svm.SVC(kernel = 'poly'))                <br/> ])</span><span id="c321" class="od mj it os b gy pa ox l oy oz">pip_4 = Pipeline([('min_max_scaler', MinMaxScaler()),<br/>                 ('clf', svm.SVC())               <br/>])</span><span id="ee6a" class="od mj it os b gy pa ox l oy oz">pip_5 = Pipeline([('min_max_scaler', MinMaxScaler()),<br/>                 ('clf', svm.SVC(kernel= 'linear'))               <br/>])</span><span id="6e53" class="od mj it os b gy pa ox l oy oz">pip_6 = Pipeline([('min_max_scaler', MinMaxScaler()),<br/>                  ('clf', svm.SVC(kernel='poly'))               <br/>])</span><span id="cd50" class="od mj it os b gy pa ox l oy oz">pip_7 = Pipeline([('Normalize', Normalizer()),<br/>                  ('clf', svm.SVC() )    <br/>])</span><span id="7b1b" class="od mj it os b gy pa ox l oy oz">pip_8 = Pipeline([('Normalize', Normalizer()),<br/>                  ('clf', svm.SVC(kernel='linear') )    <br/>])</span><span id="4a4e" class="od mj it os b gy pa ox l oy oz">pip_9 = Pipeline([('Normalize', Normalizer()),<br/>                  ('clf', svm.SVC(kernel='poly') )    <br/>])</span></pre><p id="90a5" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">带有管道的列表:</p><pre class="kq kr ks kt gt or os ot ou aw ov bi"><span id="5a3e" class="od mj it os b gy ow ox l oy oz"># list with pipelines<br/>pip_list= []<br/>pip_list.append(('Scaler_rbf', pip_1))<br/>pip_list.append(('Scaler_linear', pip_2))<br/>pip_list.append(('Scaler_poly', pip_3))</span><span id="aa15" class="od mj it os b gy pa ox l oy oz">pip_list.append(('Min_max_scaler', pip_4))<br/>pip_list.append(('Min_max_scaler_linear', pip_5))<br/>pip_list.append(('Min_max_scaler_poly', pip_6))</span><span id="14c5" class="od mj it os b gy pa ox l oy oz">pip_list.append(('Normalizer', pip_7))<br/>pip_list.append(('Normalizer_linear', pip_8))<br/>pip_list.append(('Normalizer_poly', pip_9))</span><span id="97ed" class="od mj it os b gy pa ox l oy oz"># Function to build models<br/>def model_accuracy(clf_models, data, target):<br/>    <br/>    results = []<br/>    names = []<br/>    <br/>    for name, pip in clf_models:<br/>        cross_val = cross_val_predict(pip, data, target, cv = 10)<br/>        accuracy = metrics.accuracy_score(target, cross_val)               <br/>        print(f'name: {name} - Accuracy : {accuracy:.4f}')</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/9c5c8e61d2029407b05242d0382309ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*eSksYUkPGqvGM8snrPOV6w.png"/></div></figure><h2 id="14de" class="od mj it bd mk oe of dn mo og oh dp ms lk oi oj mu lo ok ol mw ls om on my oo bi translated">把酒装入大酒桶</h2><p id="e5f2" class="pw-post-body-paragraph lb lc it ld b le na ju lg lh nb jx lj lk nc lm ln lo nd lq lr ls ne lu lv lw im bi translated">具有 RBF 核和标准缩放器预处理的模型给了我们最高的精度，但是我们可以通过调整它的超参数来改进它。让我们使用 GridSearchCV 详尽地组合 C 和 Gamma 的不同值，并在我们的算法中测试它们。</p><pre class="kq kr ks kt gt or os ot ou aw ov bi"><span id="2841" class="od mj it os b gy ow ox l oy oz"># Import GridSearchCV<br/>from sklearn.model_selection import GridSearchCV</span></pre></div><div class="ab cl ki kj hx kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="im in io ip iq"><pre class="or os ot ou aw ov bi"><span id="ca32" class="od mj it os b gy pe pf pg ph pi ox l oy oz"># Values for parameter C</span><span id="1b95" class="od mj it os b gy pa ox l oy oz">C_list = [0.001 , 0.01, 0.1 , 1 , 10 , 100]</span><span id="4a07" class="od mj it os b gy pa ox l oy oz">#Values for parameter Gamma<br/>Gamma_list = [0.001, 0.01 , 0.1, 1, 10, 100]</span></pre></div><div class="ab cl ki kj hx kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="im in io ip iq"><pre class="or os ot ou aw ov bi"><span id="fd2d" class="od mj it os b gy pe pf pg ph pi ox l oy oz"># Dictionary with lists of parameters<br/>Grid_parameters = dict(clf__C = C_list, clf__gamma = Gamma_list)<br/>Grid_parameters</span></pre></div><div class="ab cl ki kj hx kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="im in io ip iq"><pre class="or os ot ou aw ov bi"><span id="a4f1" class="od mj it os b gy pe pf pg ph pi ox l oy oz"># Grid object with pip_1, Grid_parameters, numbers of folders (cv) and accuracy (scoring) as parameters <br/>grid = GridSearchCV(pip_1,Grid_parameters,cv = 10, scoring = 'accuracy')</span></pre></div><div class="ab cl ki kj hx kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="im in io ip iq"><pre class="or os ot ou aw ov bi"><span id="e7fa" class="od mj it os b gy pe pf pg ph pi ox l oy oz">#Apply gridsearch to our data and target <br/>grid.fit(df_couple,target)</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi pj"><img src="../Images/f0c91830885ed5048eb6887b9f4706ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*LjEFh3XqwhBcGTuL-ETCgw.png"/></div></figure><h1 id="ff29" class="mi mj it bd mk ml mm mn mo mp mq mr ms jz mt ka mu kc mv kd mw kf mx kg my mz bi translated">结论</h1><p id="1dd5" class="pw-post-body-paragraph lb lc it ld b le na ju lg lh nb jx lj lk nc lm ln lo nd lq lr ls ne lu lv lw im bi translated">在这篇文章中，我使用 Spotify API 分析了我未婚妻和我的音乐列表的音频特征。我没有检查我们的播放列表，而是使用了我们在日常生活中听得最多的 10 位艺术家的特征。基于此，我得出结论，我的列表比她的更多样化，令人惊讶的是，我的歌曲更有活力。另一个见解(我预料到了:])是艾米丽的歌曲更适合跳舞。为了补充分析，我还建立了一个机器学习模型(SVM ),来预测一首歌是否更有可能被她或我听到。该模型的准确率约为 74%，这是很好的(尽管还可以改进)。</p><p id="7398" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">参考资料:</p><ul class=""><li id="7801" class="nf ng it ld b le lf lh li lk nh lo ni ls nj lw nk nl nm nn bi translated"><a class="ae mg" href="https://medium.com/mundo-ia/an%C3%A1lise-de-dados-de-uma-playlist-do-spotify-com-python-e-power-bi-bc848aa0880c" rel="noopener">https://medium . com/mundo-ia/anáLise-de-dados-de-uma-playlist-do-Spotify-com-python-e-power-bi-BC 848 aa 0880 c</a></li><li id="0310" class="nf ng it ld b le no lh np lk nq lo nr ls ns lw nk nl nm nn bi translated"><a class="ae mg" href="https://medium.com/@RareLoot/extracting-spotify-data-on-your-favourite-artist-via-python-d58bc92a4330" rel="noopener">https://medium . com/@ rare loot/extracting-Spotify-data-on-your-favorite-artist-via-python-d 58 BC 92 a 4330</a></li><li id="d1b0" class="nf ng it ld b le no lh np lk nq lo nr ls ns lw nk nl nm nn bi translated"><a class="ae mg" rel="noopener" target="_blank" href="/is-my-spotify-music-boring-an-analysis-involving-music-data-and-machine-learning-47550ae931de">https://towards data science . com/is-my-Spotify-music-boring-an-analysis-containing-music-data-and-machine-learning-47550 AE 931 de</a></li><li id="bb38" class="nf ng it ld b le no lh np lk nq lo nr ls ns lw nk nl nm nn bi translated"><a class="ae mg" href="https://datasciencedozero.landen.co/" rel="noopener ugc nofollow" target="_blank">https://datasciencedozero.landen.co/</a></li></ul><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="ab gu cl pk"><img src="../Images/972ddfea52af8b7b2c015d8be5d39e83.png" data-original-src="https://miro.medium.com/v2/format:webp/1*V0c7eqLKiTL-9iFNNY-3Fw.png"/></div></figure></div></div>    
</body>
</html>