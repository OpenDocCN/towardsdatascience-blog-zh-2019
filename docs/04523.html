<html>
<head>
<title>Elements of Functional Programming in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中函数式编程的要素</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/elements-of-functional-programming-in-python-1b295ea5bbe0?source=collection_archive---------0-----------------------#2019-07-12">https://towardsdatascience.com/elements-of-functional-programming-in-python-1b295ea5bbe0?source=collection_archive---------0-----------------------#2019-07-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7f2f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何使用 Python 中的 lambda、map、filter 和 reduce 函数来转换数据结构。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f08a66c09db8e54282e1e4a6680c9faf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zmC8C1YFNx_QStAQ"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Markus Spiske</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><blockquote class="kz"><p id="6665" class="la lb it bd lc ld le lf lg lh li lj dk translated">“面向对象编程通过封装活动部分使代码可以理解。函数式编程通过最大限度地减少活动部分，让代码变得可以理解。”:<a class="ae ky" href="https://www.amazon.com/Working-Effectively-Legacy-Michael-Feathers/dp/0131177052/ref=as_li_ss_tl?ie=UTF8&amp;qid=1470702619&amp;sr=8-1&amp;keywords=Working+with+Legacy+Code&amp;linkCode=sl1&amp;tag=devdaily-20&amp;linkId=2fee99425a0027b3ac69953055fb9e9e" rel="noopener ugc nofollow" target="_blank">迈克尔·费哲</a></p></blockquote><p id="1767" class="pw-post-body-paragraph lk ll it lm b ln lo ju lp lq lr jx ls lt lu lv lw lx ly lz ma mb mc md me lj im bi translated">世界上有多种编程语言，它们可以被分类的类别也是如此。一个<strong class="lm iu">编程范例</strong>就是这样一种<strong class="lm iu"> </strong>方式，它试图根据编程语言的特性或编码风格对它们进行分类。编程范式本质上是一种编程风格或方式。</p><p id="b678" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">大多数时候，我们将 Python 理解为一种面向对象的语言，其中我们以类、对象和方法的形式对数据建模。然而，面向对象编程也有几种替代方案，函数式编程就是其中之一。</p><p id="9688" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">以下是业界流行的一些传统编程范例:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mk"><img src="../Images/cff210ff398b476f492e24a0179f5b23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TOsk9zG2gpYmf5d2JmIcUA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Conventional programming paradigms: Content Source <a class="ae ky" href="https://en.wikipedia.org/wiki/Programming_paradigm" rel="noopener ugc nofollow" target="_blank">Wikipedia</a></figcaption></figure><h1 id="c735" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">函数式编程</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/270952c64753903ea827eeb9826ce819.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1yVFdiXsp3u40OZfCrG14A.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">The Functional Programming Paradigm</figcaption></figure><p id="0fe7" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">根据维基百科，<a class="ae ky" href="https://en.wikipedia.org/wiki/Functional_programming" rel="noopener ugc nofollow" target="_blank"> <em class="ne">函数式编程</em> </a> <em class="ne">是一种编程范式，一种构建计算机程序的结构和元素的风格，它将计算视为数学</em> <strong class="lm iu"> <em class="ne">函数</em></strong><em class="ne"/><strong class="lm iu"><em class="ne">避免</em> </strong> <em class="ne">改变</em> <strong class="lm iu"> <em class="ne">状态</em> </strong> <em class="ne">和</em> <strong class="lm iu"> <em class="ne">可变<em class="ne"/></em></strong></p><p id="c433" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">上述定义起初听起来可能令人困惑，但它本质上试图提出以下几个方面:</p><ul class=""><li id="ba1b" class="nf ng it lm b ln mf lq mg lt nh lx ni mb nj lj nk nl nm nn bi translated">FP 依赖于函数，一切都是用函数来完成的。此外，FP 关注于<strong class="lm iu">定义</strong>做什么，而不是执行一些动作。该范例的功能被视为<strong class="lm iu">一级</strong>功能。这意味着函数被像其他对象一样对待，我们可以将它们赋给变量或者传递给其他函数。</li><li id="7492" class="nf ng it lm b ln no lq np lt nq lx nr mb ns lj nk nl nm nn bi translated">函数式编程中使用的数据必须是<strong class="lm iu">不可变的，</strong>即永远不应该改变。这意味着如果我们需要修改列表中的数据，我们需要用更新的值创建一个新的列表，而不是操作现有的列表。</li><li id="d6a1" class="nf ng it lm b ln no lq np lt nq lx nr mb ns lj nk nl nm nn bi translated">用 FP 写的程序应该是<strong class="lm iu">无状态</strong>。无状态函数不知道它的过去。功能程序应该像第一次执行任务一样执行每一项任务。简单地说，函数只依赖于作为参数传递给它们的数据，而不依赖于外部数据。</li><li id="a5a6" class="nf ng it lm b ln no lq np lt nq lx nr mb ns lj nk nl nm nn bi translated">懒惰是 FP 的另一个特性，我们不会计算我们不需要的东西。工作只在需要时做。</li></ul><p id="de52" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">如果这有意义的话，这里有一个 OOP 和 FP 之间的比较图表，它会让事情变得更加明显。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://imgur.com/a/Jz5iynH"><div class="gh gi nt"><img src="../Images/38f7f7da940d35b982661d5001b43f77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-gu_BRWWhEKJrIbF-_Olmg.png"/></div></a><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><strong class="bd nu">Original Image: </strong><a class="ae ky" href="https://www.educba.com/" rel="noopener ugc nofollow" target="_blank"><strong class="bd nu">www.educba.com</strong></a></figcaption></figure><p id="4e0d" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">Python 提供了 lambda、filter、map 和 reduce 等特性，可以很容易地演示函数式编程的概念。本文中使用的所有代码都可以从相关的<a class="ae ky" href="https://github.com/parulnith/Elements-of-Functional-Programming-in-Python" rel="noopener ugc nofollow" target="_blank"> Github 库</a>中获得，或者可以通过点击下图在 my_binder 上查看。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://mybinder.org/v2/gh/parulnith/Elements-of-Functional-Programming-in-Python/master"><div class="gh gi nv"><img src="../Images/e461d679b57313eea1aa05abe1a1e75a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*diXEGUjFEsKvBrHdiB2htA.png"/></div></a></figure></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h1 id="47e6" class="ml mm it bd mn mo od mq mr ms oe mu mv jz of ka mx kc og kd mz kf oh kg nb nc bi translated">λ表达式</h1><p id="a1ab" class="pw-post-body-paragraph lk ll it lm b ln oi ju lp lq oj jx ls lt ok lv lw lx ol lz ma mb om md me lj im bi translated"><strong class="lm iu"> Lambda 表达式</strong>——也称为“匿名函数”——允许我们在一行中创建和使用一个函数。当我们需要一个只使用一次的短函数时，它们很有用。它们通常与 map、filter 和 sort 方法结合使用，我们将在本文后面看到这些方法。</p><p id="3fea" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">让我们用 Python 写一个函数，计算<code class="fe on oo op oq b">5x + 2</code>的值。<strong class="lm iu">标准方法</strong>是定义一个函数。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/aecbb3620b55b125d95341bab18565e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rQNizMFN-o99geo15sRnZQ.png"/></div></div></figure><p id="3108" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">现在让我们使用<strong class="lm iu"> Lambda </strong>函数来计算相同的表达式。为了创建一个 lambda 表达式，我们键入关键字 lambda，后面跟着输入。接下来，我们输入一个冒号，后跟将作为返回值的表达式。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/43a057d24be771d857b7be862c245c2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nZLkWix5FpI46Lpefb9Ffg.png"/></div></div></figure><p id="6e72" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">这个 lambda 函数将接受输入 x 并返回<code class="fe on oo op oq b">5x + 2</code>，就像前面的函数<code class="fe on oo op oq b">f</code>一样。然而，有一个问题。Lambda 不是函数的名称。这是一个 Python 关键字，说明后面是一个匿名函数。那么我们如何使用它呢？一种方法是给它一个名字。</p><p id="9f45" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">让我们称这个λ表达式为<code class="fe on oo op oq b">g</code>。现在，我们可以像使用其他函数一样使用它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/7fe0b66101661e81ec5dfff31cfc05d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PP1rynAEmxkUSXD5nyIxjg.png"/></div></div></figure><h2 id="0e84" class="os mm it bd mn ot ou dn mr ov ow dp mv lt ox oy mx lx oz pa mz mb pb pc nb pd bi translated">具有多个输入的 Lambda 表达式。</h2><p id="ffed" class="pw-post-body-paragraph lk ll it lm b ln oi ju lp lq oj jx ls lt ok lv lw lx ol lz ma mb om md me lj im bi translated">下面的例子展示了 lambda 函数如何在有或没有输入值的情况下使用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/4d813d0440afdae041d09604777b109c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SoD-pLkczzQhrRLbfYs3Ow.png"/></div></div></figure><h2 id="d389" class="os mm it bd mn ot ou dn mr ov ow dp mv lt ox oy mx lx oz pa mz mb pb pc nb pd bi translated">没有输入的 Lambda 表达式。</h2><p id="2975" class="pw-post-body-paragraph lk ll it lm b ln oi ju lp lq oj jx ls lt ok lv lw lx ol lz ma mb om md me lj im bi translated">现在，让我们看看 Lambda 函数的一个常见用法，我们没有给它命名。假设我们有一个美国前七任总统的列表，我们希望按照他们的姓氏对这个列表进行排序。我们将创建一个 Lambda 函数来提取姓氏，并将其用作排序值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/2e81eaa360614331e481fc7b9955dc85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kE_LifRrWOwgBKbR-pY_Qg.png"/></div></div></figure></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><blockquote class="pg ph pi"><p id="e963" class="lk ll ne lm b ln mf ju lp lq mg jx ls pj mh lv lw pk mi lz ma pl mj md me lj im bi translated">map、filter 和 reduce 函数简化了使用列表的工作。当与 lambda 表达式一起使用时，它们通过在一行代码中完成大量工作，使我们的生活变得更加轻松。</p></blockquote><h1 id="c075" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">地图功能</h1><p id="fbf3" class="pw-post-body-paragraph lk ll it lm b ln oi ju lp lq oj jx ls lt ok lv lw lx ol lz ma mb om md me lj im bi translated"><a class="ae ky" href="https://docs.python.org/3/library/functions.html#map" rel="noopener ugc nofollow" target="_blank"> map </a>函数将函数应用于<em class="ne"> iterable </em>的每一项，产生结果。当与列表一起使用时，<code class="fe on oo op oq b">Map</code>通过将函数应用于 input_list 中的所有项目，将给定的列表转换成新的列表。</p><h2 id="6861" class="os mm it bd mn ot ou dn mr ov ow dp mv lt ox oy mx lx oz pa mz mb pb pc nb pd bi translated">句法</h2><pre class="kj kk kl km gt pm oq pn po aw pp bi"><span id="9fa4" class="os mm it oq b gy pq pr l ps pt">map(function_to_apply, iterables)</span></pre><h2 id="bd4b" class="os mm it bd mn ot ou dn mr ov ow dp mv lt ox oy mx lx oz pa mz mb pb pc nb pd bi translated">使用</h2><p id="0185" class="pw-post-body-paragraph lk ll it lm b ln oi ju lp lq oj jx ls lt ok lv lw lx ol lz ma mb om md me lj im bi translated">假设我们有一个计算立方体体积的函数，给定其边(a)的值。</p><pre class="kj kk kl km gt pm oq pn po aw pp bi"><span id="d723" class="os mm it oq b gy pq pr l ps pt">def volume(a):<br/>    """volumne of a cube with edge 'a'"""<br/>    return a**3</span></pre><p id="454d" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">如果我们需要计算许多不同边长的立方体的体积，该怎么办？</p><pre class="kj kk kl km gt pm oq pn po aw pp bi"><span id="fe8a" class="os mm it oq b gy pq pr l ps pt"># Edge length in cm<br/>edges = [1,2,3,4,5]</span></pre><p id="cd5d" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">有两种方法可以做到这一点——一种是使用<strong class="lm iu">直接</strong>方法，另一种是使用<strong class="lm iu">映射</strong>函数。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/8bd9042dc15e8a63cc3003289c3b56e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NwIEY5quwhTuPbVF2789vw.png"/></div></div></figure><p id="f243" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">现在让我们看看如何使用一行带有 map 函数的代码来完成这项任务。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/5fe12c978a714f41d99dec4542469364.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2lRO7Z6e4jhmgbQ0ftbLpA.png"/></div></div></figure><p id="1adc" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">map 函数接受两个参数。第一个是函数，第二个是我们的列表、元组或任何其他可迭代的对象。这里，map 函数将音量函数应用于列表中的每个元素。</p><p id="522d" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">这里需要注意的一点是，map 函数的输出不是一个列表，而是一个 map 对象，它是结果的迭代器。但是，我们可以通过将映射传递给 list 构造函数，将它转换成一个列表。</p><h2 id="4cf8" class="os mm it bd mn ot ou dn mr ov ow dp mv lt ox oy mx lx oz pa mz mb pb pc nb pd bi translated">例子</h2><p id="790f" class="pw-post-body-paragraph lk ll it lm b ln oi ju lp lq oj jx ls lt ok lv lw lx ol lz ma mb om md me lj im bi translated">现在让我们来看一个例子，它演示了如何使用<code class="fe on oo op oq b">lambda</code>函数和<code class="fe on oo op oq b">map</code>函数。我们有一个包含五个人的姓名和身高的元组列表。每个高度都是厘米，我们需要把它转换成英尺。</p><p id="e3c7" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">我们将首先使用 lambda 表达式编写一个转换器函数，它将接受一个元组作为输入，也将返回一个元组。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pu"><img src="../Images/0c323832f79bacbd48b2e039b5b6039d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zd9gS-wPVhD-s5PbUfBoGA.png"/></div></div></figure></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h1 id="88d1" class="ml mm it bd mn mo od mq mr ms oe mu mv jz of ka mx kc og kd mz kf oh kg nb nc bi translated">过滤功能</h1><p id="a757" class="pw-post-body-paragraph lk ll it lm b ln oi ju lp lq oj jx ls lt ok lv lw lx ol lz ma mb om md me lj im bi translated">'<a class="ae ky" href="https://docs.python.org/3/library/functions.html#filter" rel="noopener ugc nofollow" target="_blank"> filter' </a>函数从那些<em class="ne"> iterable </em>的元素中构造一个迭代器，对于这些元素<em class="ne">函数</em>返回 true。这意味着 filter 函数用于从列表、元组或其他数据集合中选择某些数据，因此得名。</p><h2 id="9359" class="os mm it bd mn ot ou dn mr ov ow dp mv lt ox oy mx lx oz pa mz mb pb pc nb pd bi translated">句法</h2><pre class="kj kk kl km gt pm oq pn po aw pp bi"><span id="4bb6" class="os mm it oq b gy pq pr l ps pt">filter(function, iterable)</span></pre><h2 id="6362" class="os mm it bd mn ot ou dn mr ov ow dp mv lt ox oy mx lx oz pa mz mb pb pc nb pd bi translated">使用</h2><p id="049c" class="pw-post-body-paragraph lk ll it lm b ln oi ju lp lq oj jx ls lt ok lv lw lx ol lz ma mb om md me lj im bi translated">让我们看一个例子，我们想从一个给定的输入列表中获得所有大于 5 的数字的列表。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/1fc91ec8171695593f3487237822c964.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eomHvuNhT0PUbSI7aJsoXg.png"/></div></div></figure><p id="97a1" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">我们首先创建一个 lambda 函数来测试输入，看它是否大于 5。接下来，我们传入数据列表。filter 函数将只返回函数为真的数据。同样，返回值不是一个列表，而是一个过滤器对象。这个对象必须被传递给一个列表构造函数来获得输出。</p><h2 id="ba92" class="os mm it bd mn ot ou dn mr ov ow dp mv lt ox oy mx lx oz pa mz mb pb pc nb pd bi translated">例子</h2><p id="ee83" class="pw-post-body-paragraph lk ll it lm b ln oi ju lp lq oj jx ls lt ok lv lw lx ol lz ma mb om md me lj im bi translated">当数据包含缺失值时，会出现一个有趣的“filter”函数用例。这是一个包含一些亚洲国家的列表。请注意，许多字符串是空的。我们将使用过滤函数来删除这些丢失的值。我们将传递 none 作为第一个参数，第二个参数是之前的数据列表。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pv"><img src="../Images/59b583936619a82d49db01ce016f8479.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5hAHj0aVBLiIhC4gvHtWiA.png"/></div></div></figure><p id="13f4" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">这将过滤掉在布尔设置中被视为 false 的所有值。</p></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h1 id="8f09" class="ml mm it bd mn mo od mq mr ms oe mu mv jz of ka mx kc og kd mz kf oh kg nb nc bi translated">Reduce 函数</h1><p id="517f" class="pw-post-body-paragraph lk ll it lm b ln oi ju lp lq oj jx ls lt ok lv lw lx ol lz ma mb om md me lj im bi translated">' r <a class="ae ky" href="https://docs.python.org/3/library/functools.html?highlight=functools%20reduce#functools.reduce" rel="noopener ugc nofollow" target="_blank"> educe </a>函数有点不寻常，从 Python 3 开始，它不再是一个内置函数。相反，它被移到了<code class="fe on oo op oq b">functools </code>模块。“reduce”函数通过从左到右对<em class="ne">序列</em>的项目累积应用一个函数，将给定列表转换为单个值，</p><h2 id="cd8a" class="os mm it bd mn ot ou dn mr ov ow dp mv lt ox oy mx lx oz pa mz mb pb pc nb pd bi translated">句法</h2><pre class="kj kk kl km gt pm oq pn po aw pp bi"><span id="f644" class="os mm it oq b gy pq pr l ps pt">reduce(func, seq)</span></pre><p id="88e7" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">其中 reduce 不断地将函数<code class="fe on oo op oq b">func()</code>应用于序列 seq 并返回一个值。</p><h2 id="f5d2" class="os mm it bd mn ot ou dn mr ov ow dp mv lt ox oy mx lx oz pa mz mb pb pc nb pd bi translated">使用</h2><p id="c52e" class="pw-post-body-paragraph lk ll it lm b ln oi ju lp lq oj jx ls lt ok lv lw lx ol lz ma mb om md me lj im bi translated">让我们借助一个简单的例子来说明<code class="fe on oo op oq b">reduce</code>函数的工作原理，这个例子计算一组整数的乘积。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/86ca177b10557305a6cdf1ad15cba638.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JDm0Q_6_eFLyBgadxgRzlA.png"/></div></div></figure><p id="e51c" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">下图显示了计算的中间步骤:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pw"><img src="../Images/91a63f973af57f9de9fe1b0fb9325f7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*tFi8CEmD3eAPwP3_nHWaTg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Source: <a class="ae ky" href="https://www.python-course.eu/lambda.php" rel="noopener ugc nofollow" target="_blank">Working of ‘Reduce’ function in Python</a></figcaption></figure><p id="845a" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">然而，Python 的创始人吉多·范·罗苏姆不得不这样评价“reduce”函数:</p><blockquote class="pg ph pi"><p id="6fa7" class="lk ll ne lm b ln mf ju lp lq mg jx ls pj mh lv lw pk mi lz ma pl mj md me lj im bi translated">如果真的需要就用 functools.reduce 然而，在 99%的情况下，显式 for 循环更具可读性。</p></blockquote><p id="0f0c" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">上述程序也可以用显式 for 循环来编写:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/5dde1becb707c71bb2d6669141f0819f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cJeB7yx0SN20ctCGuRmYlQ.png"/></div></div></figure><h2 id="d4ca" class="os mm it bd mn ot ou dn mr ov ow dp mv lt ox oy mx lx oz pa mz mb pb pc nb pd bi translated">例子</h2><p id="4fbf" class="pw-post-body-paragraph lk ll it lm b ln oi ju lp lq oj jx ls lt ok lv lw lx ol lz ma mb om md me lj im bi translated">“reduce”函数可以在一行代码中确定包含整数的列表的最大值。Python 中确实有一个名为<code class="fe on oo op oq b">max()</code>的内置函数，它通常被用作<code class="fe on oo op oq b">max(list_name)</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/aba133c24066223a04ac9db6bd3f97bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JB2XGZ84BZWiW_EQrigVvQ.png"/></div></div></figure></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h1 id="6503" class="ml mm it bd mn mo od mq mr ms oe mu mv jz of ka mx kc og kd mz kf oh kg nb nc bi translated">列表理解:映射、过滤和归约的替代</h1><p id="62d5" class="pw-post-body-paragraph lk ll it lm b ln oi ju lp lq oj jx ls lt ok lv lw lx ol lz ma mb om md me lj im bi translated"><a class="ae ky" href="https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions" rel="noopener ugc nofollow" target="_blank">列表理解</a>是一种在 Python 中定义和创建列表的方法。在大多数情况下，列表理解让我们在一行代码中创建列表，而不用担心初始化列表或设置循环。</p><p id="1696" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">它也是 lambda 函数以及 map()、filter()和 reduce()函数的替代品。有些人认为这是编写函数的一种更为复杂的方式，也更容易理解。</p><h2 id="a51c" class="os mm it bd mn ot ou dn mr ov ow dp mv lt ox oy mx lx oz pa mz mb pb pc nb pd bi translated">句法</h2><div class="kj kk kl km gt ab cb"><figure class="px kn py pz qa qb qc paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/d5be0546fd50934b98aa044a3e3d8b45.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*FdeynwA-yejIoCW81tvaCQ.png"/></div></figure><figure class="px kn qd pz qa qb qc paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/5d4f11ffb3ac2794131ec6fcdf2a0fd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*XOTv6_ghdQU10Zs4X31vdA.png"/></div></figure></div><h2 id="8ab7" class="os mm it bd mn ot ou dn mr ov ow dp mv lt ox oy mx lx oz pa mz mb pb pc nb pd bi translated">使用</h2><p id="9699" class="pw-post-body-paragraph lk ll it lm b ln oi ju lp lq oj jx ls lt ok lv lw lx ol lz ma mb om md me lj im bi translated">让我们试着用<code class="fe on oo op oq b">list comprehensions.</code>复制上面章节中使用的例子</p><ul class=""><li id="49fa" class="nf ng it lm b ln mf lq mg lt nh lx ni mb nj lj nk nl nm nn bi translated"><strong class="lm iu">列表理解与地图功能</strong></li></ul><p id="be5d" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">我们将 map 函数与 lambda 函数结合使用，将高度列表从厘米转换为英尺。让我们用列表理解来达到同样的结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pu"><img src="../Images/5023014c5b4c9a1d117b6e874b521ae1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l-zGbFAEx52zrRrFHtwYWg.png"/></div></div></figure><ul class=""><li id="d07f" class="nf ng it lm b ln mf lq mg lt nh lx ni mb nj lj nk nl nm nn bi translated"><strong class="lm iu">列表理解与过滤功能</strong></li></ul><p id="e7db" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">我们使用了 filter 函数来删除亚洲国家列表中缺少的值。让我们用列表理解来得到同样的结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi qe"><img src="../Images/904e33d9a0b7f0a1323a0e3d0110a39c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0mgelgA-g3Lb6_YG70kwRQ.png"/></div></div></figure><ul class=""><li id="b8b9" class="nf ng it lm b ln mf lq mg lt nh lx ni mb nj lj nk nl nm nn bi translated"><strong class="lm iu">列表综合与归约功能</strong></li></ul><p id="68fd" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">同样，我们可以用列表理解快速确定包含整数的列表的最大值，而不是使用 lambda 和 reduce。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/679d2e5e4a0640e5572319152e47b0d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hmkZrAAkn18cvRKaY0Dn0Q.png"/></div></div></figure><p id="66a9" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">我们在上面使用了一个生成器表达式，它类似于列表理解，但是用圆括号代替了方括号。</p><p id="aa9c" class="pw-post-body-paragraph lk ll it lm b ln mf ju lp lq mg jx ls lt mh lv lw lx mi lz ma mb mj md me lj im bi translated">列表理解是一个多样化的主题，需要一篇自己的文章。记住这一点，这里有一篇我写的文章，它不仅涵盖了 python 中的列表理解，甚至还涵盖了字典、集合和生成器理解。</p><div class="qf qg gp gr qh qi"><a rel="noopener follow" target="_blank" href="/comprehending-the-concept-of-comprehensions-in-python-c9dafce5111"><div class="qj ab fo"><div class="qk ab ql cl cj qm"><h2 class="bd iu gy z fp qn fr fs qo fu fw is bi translated">理解 Python 中的“理解”</h2><div class="qp l"><h3 class="bd b gy z fp qn fr fs qo fu fw dk translated">理解和实现 python 中的列表、字典、集合和生成器。</h3></div><div class="qq l"><p class="bd b dl z fp qn fr fs qo fu fw dk translated">towardsdatascience.com</p></div></div><div class="qr l"><div class="qs l qt qu qv qr qw ks qi"/></div></div></a></div></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h1 id="482c" class="ml mm it bd mn mo od mq mr ms oe mu mv jz of ka mx kc og kd mz kf oh kg nb nc bi translated">结论</h1><p id="9ab6" class="pw-post-body-paragraph lk ll it lm b ln oi ju lp lq oj jx ls lt ok lv lw lx ol lz ma mb om md me lj im bi translated">map、filter 和 reduce 函数极大地简化了使用列表和其他可迭代数据集合的过程。有些人对使用它们有所保留，特别是因为列表理解似乎更友好，然而它们的有用性不能被忽视。</p></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h1 id="166d" class="ml mm it bd mn mo od mq mr ms oe mu mv jz of ka mx kc og kd mz kf oh kg nb nc bi translated">参考</h1><ul class=""><li id="9465" class="nf ng it lm b ln oi lq oj lt qx lx qy mb qz lj nk nl nm nn bi translated">不要害怕函数式编程</li><li id="059c" class="nf ng it lm b ln no lq np lt nq lx nr mb ns lj nk nl nm nn bi translated"><a class="ae ky" href="https://docs.python.org/3.7/howto/functional.html" rel="noopener ugc nofollow" target="_blank">函数式编程 HOWTO </a></li><li id="08be" class="nf ng it lm b ln no lq np lt nq lx nr mb ns lj nk nl nm nn bi translated"><a class="ae ky" href="https://www.python-course.eu/lambda.php" rel="noopener ugc nofollow" target="_blank">λ，滤波，缩小，贴图</a></li></ul></div></div>    
</body>
</html>