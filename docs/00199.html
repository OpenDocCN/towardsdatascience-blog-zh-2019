<html>
<head>
<title>The Next Level of Data Visualization in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中数据可视化的下一个层次</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-next-level-of-data-visualization-in-python-dd6e99039d5e?source=collection_archive---------0-----------------------#2019-01-09">https://towardsdatascience.com/the-next-level-of-data-visualization-in-python-dd6e99039d5e?source=collection_archive---------0-----------------------#2019-01-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/192ca18fcbd1fd75304f57b5581d3911.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AwEPBK2mt55RQKhGYqMHUw.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk"><a class="ae jd" href="https://www.pexels.com/photo/adventure-climb-clouds-daylight-371400/" rel="noopener ugc nofollow" target="_blank">(Source)</a></figcaption></figure><div class=""/><div class=""><h2 id="8d96" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">如何用一行 Python 代码制作出好看的、完全交互式的情节</h2></div><p id="b074" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">沉没成本谬论是人类遭受的众多<a class="ae jd" href="https://en.wikipedia.org/wiki/Thinking,_Fast_and_Slow#Heuristics_and_biases" rel="noopener ugc nofollow" target="_blank">有害认知偏见</a>之一。它<a class="ae jd" href="https://youarenotsosmart.com/2011/03/25/the-sunk-cost-fallacy/" rel="noopener ugc nofollow" target="_blank">指的是我们倾向于继续将时间和资源投入到一个失败的事业中，因为我们已经在追求中花费了太多的时间。沉没成本谬误适用于在糟糕的工作中呆得比我们应该呆的时间更长，即使很明显一个项目行不通，也要埋头苦干，是的，当存在更高效、交互和更好看的替代方案时，继续使用乏味、过时的绘图库 matplotlib。</a></p><p id="c069" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在过去的几个月里，我意识到我使用<code class="fe lr ls lt lu b">matplotlib</code>的唯一原因是我花了数百个小时来学习<a class="ae jd" href="https://matplotlib.org/api/api_overview.html" rel="noopener ugc nofollow" target="_blank">复杂的语法</a>。这种复杂性导致 StackOverflow 花费数小时来解决如何<a class="ae jd" href="https://stackoverflow.com/questions/14946371/editing-the-date-formatting-of-x-axis-tick-labels-in-matplotlib" rel="noopener ugc nofollow" target="_blank">格式化日期</a>或<a class="ae jd" href="https://stackoverflow.com/questions/14762181/adding-a-y-axis-label-to-secondary-y-axis-in-matplotlib" rel="noopener ugc nofollow" target="_blank">添加第二个 y 轴</a>的问题。幸运的是，这是一个 Python 绘图的好时机，在探索了选项<a class="ae jd" href="https://www.fusioncharts.com/blog/best-python-data-visualization-libraries/" rel="noopener ugc nofollow" target="_blank">和</a>之后，一个明显的赢家——在易用性、文档和功能性方面——是<a class="ae jd" href="https://plot.ly/python/" rel="noopener ugc nofollow" target="_blank"> plotly Python 库。</a>在本文中，我们将直接进入<code class="fe lr ls lt lu b">plotly</code>，学习如何在更短的时间内制作更好的情节——通常只用一行代码。</p><p id="90e7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">本文的所有代码都可以在 GitHub 上找到。这些图表都是交互式的，可以在<a class="ae jd" href="https://nbviewer.jupyter.org/github/WillKoehrsen/Data-Analysis/blob/master/plotly/Plotly%20Whirlwind%20Introduction.ipynb" rel="noopener ugc nofollow" target="_blank"> NBViewer 这里</a>查看。</p><figure class="lw lx ly lz gt is gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/2f289766bb3b8e80f2a638749d698234.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*D10-b01-wu-Unv-2WThIsQ.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Example of plotly figures (<a class="ae jd" href="https://plot.ly/python/mixed-subplots/" rel="noopener ugc nofollow" target="_blank">source</a>)</figcaption></figure><h2 id="3caa" class="ma mb jg bd mc md me dn mf mg mh dp mi le mj mk ml li mm mn mo lm mp mq mr ms bi translated">非常简单的概述</h2><p id="c3b0" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated"><code class="fe lr ls lt lu b"><a class="ae jd" href="https://plot.ly/python/" rel="noopener ugc nofollow" target="_blank">plotly</a></code> <a class="ae jd" href="https://plot.ly/python/" rel="noopener ugc nofollow" target="_blank"> </a> Python 包是构建在<code class="fe lr ls lt lu b"><a class="ae jd" href="https://plot.ly/javascript/" rel="noopener ugc nofollow" target="_blank">plotly.js</a></code> <a class="ae jd" href="https://plot.ly/javascript/" rel="noopener ugc nofollow" target="_blank">上的开源库，而</a>又构建在<code class="fe lr ls lt lu b"><a class="ae jd" href="https://d3js.org/" rel="noopener ugc nofollow" target="_blank">d3.js</a></code> <a class="ae jd" href="https://d3js.org/" rel="noopener ugc nofollow" target="_blank">上。</a>我们将在 plotly 上使用一个名为<code class="fe lr ls lt lu b"><a class="ae jd" href="https://github.com/santosjorge/cufflinks" rel="noopener ugc nofollow" target="_blank">cufflinks</a></code>的包装器，用于处理熊猫数据帧。因此，我们的整个堆栈是 cufflinks&gt;plotly&gt;plotly . js&gt;d3 . js，这意味着我们获得了用 Python 编码的效率和 D3 令人难以置信的<a class="ae jd" href="https://github.com/d3/d3/wiki/Gallery" rel="noopener ugc nofollow" target="_blank">交互图形能力。</a></p><p id="3f5e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">(<a class="ae jd" href="https://plot.ly/" rel="noopener ugc nofollow" target="_blank"> Plotly 本身</a>是一家图形公司，有几款产品和开源工具。Python 库是免费使用的，我们可以在离线模式下制作无限的图表，加上在线模式下多达 25 个图表，以便与世界分享。)</p><p id="fcfe" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">本文中的所有工作都是在 Jupyter 笔记本中完成的，plotly +袖扣在离线模式下运行。用<code class="fe lr ls lt lu b">pip install cufflinks plotly</code>安装 plotly 和袖扣后，导入以下程序在 Jupyter 中运行:</p><pre class="lw lx ly lz gt my lu mz na aw nb bi"><span id="f6bf" class="ma mb jg lu b gy nc nd l ne nf"># Standard plotly imports<br/>import plotly.plotly as py<br/>import plotly.graph_objs as go<br/>from plotly.offline import iplot, init_notebook_mode</span><span id="5421" class="ma mb jg lu b gy ng nd l ne nf"># Using plotly + cufflinks in offline mode<br/>import cufflinks<br/>cufflinks.go_offline(connected=True)<br/>init_notebook_mode(connected=True)</span></pre></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><h1 id="439d" class="no mb jg bd mc np nq nr mf ns nt nu mi km nv kn ml kp nw kq mo ks nx kt mr ny bi translated">单变量分布:直方图和箱线图</h1><p id="202d" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">单变量——单变量——图是开始分析的标准方式，直方图是绘制分布图的常用图(<a class="ae jd" href="https://www.andata.at/en/software-blog-reader/why-we-love-the-cdf-and-do-not-like-histograms-that-much.html" rel="noopener ugc nofollow" target="_blank">尽管它有一些问题</a>)。在这里，使用我的中等文章统计(你可以在这里看到<a class="ae jd" rel="noopener" target="_blank" href="/analyzing-medium-story-stats-with-python-24c6491a8ff0">如何获得你自己的统计</a>或在这里使用<a class="ae jd" href="https://github.com/WillKoehrsen/Data-Analysis/tree/master/medium" rel="noopener ugc nofollow" target="_blank">我的</a>)让我们制作一个文章鼓掌数量的交互式直方图(<code class="fe lr ls lt lu b">df</code>是一个标准的熊猫数据框架):</p><pre class="lw lx ly lz gt my lu mz na aw nb bi"><span id="601e" class="ma mb jg lu b gy nc nd l ne nf">df['claps'].iplot(kind='hist', xTitle='claps',<br/>                  yTitle='count', title='Claps Distribution')</span></pre><figure class="lw lx ly lz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nz"><img src="../Images/e4cf79443ed41ecf5fc55706ee9ed313.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*K6LaqTMhc46R8QQuEIczxw.gif"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Interactive histogram made with plotly+cufflinks</figcaption></figure><p id="a9a4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于那些习惯了<code class="fe lr ls lt lu b">matplotlib</code>的人来说，我们所要做的就是多加一个字母(<code class="fe lr ls lt lu b">iplot</code>而不是<code class="fe lr ls lt lu b">plot</code>)，我们就会得到一个更好看、更具交互性的图表！我们可以单击数据以获得更多细节，放大图的各个部分，正如我们稍后将看到的，选择不同的类别来突出显示。</p><p id="02d3" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果我们想要绘制重叠的直方图，也很简单:</p><pre class="lw lx ly lz gt my lu mz na aw nb bi"><span id="63f3" class="ma mb jg lu b gy nc nd l ne nf">df[['time_started', 'time_published']].iplot(<br/>    kind='hist',<br/>    histnorm='percent',<br/>    barmode='overlay',<br/>    xTitle='Time of Day',<br/>    yTitle='(%) of Articles',<br/>    title='Time Started and Time Published')</span></pre><figure class="lw lx ly lz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oa"><img src="../Images/32c4a9ff9ea26af4e44300fb164bab24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8mWiMINu1zgn3irxptzEig.png"/></div></div></figure><p id="9b09" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">通过一点点<code class="fe lr ls lt lu b">pandas</code>操作，我们可以做一个柱状图:</p><pre class="lw lx ly lz gt my lu mz na aw nb bi"><span id="723d" class="ma mb jg lu b gy nc nd l ne nf"># Resample to monthly frequency and plot <br/>df2 = df[['view','reads','published_date']].\<br/>         set_index('published_date').\<br/>         resample('M').mean()</span><span id="8fc7" class="ma mb jg lu b gy ng nd l ne nf">df2.iplot(kind='bar', xTitle='Date', yTitle='Average',<br/>    title='Monthly Average Views and Reads')</span></pre><figure class="lw lx ly lz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ob"><img src="../Images/b2e3763421857f98ace5f0f85a897a54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B6v0i6KNUjL5ifaH1ijlAg.png"/></div></div></figure><p id="c112" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">s 我们看到了，我们可以把熊猫的<a class="ae jd" href="https://pandas.pydata.org/pandas-docs/stable/10min.html" rel="noopener ugc nofollow" target="_blank">力量和 plotly +袖扣结合起来。对于出版的每个故事的粉丝的箱线图，我们使用一个<code class="fe lr ls lt lu b">pivot</code>，然后绘制:</a></p><pre class="lw lx ly lz gt my lu mz na aw nb bi"><span id="7acd" class="ma mb jg lu b gy nc nd l ne nf">df.pivot(columns='publication', values='fans').iplot(<br/>        kind='box',<br/>        yTitle='fans',<br/>        title='Fans Distribution by Publication')</span></pre><figure class="lw lx ly lz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nz"><img src="../Images/8baa537ef4a3200a595332e389a9015c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*-8CsIE7F5G6sJLMv1ADJOQ.gif"/></div></div></figure><p id="a368" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">交互性的好处是我们可以随心所欲地探索数据并对其进行分类。盒状图中有很多信息，如果没有看到数字的能力，我们会错过大部分信息！</p></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><h1 id="c15f" class="no mb jg bd mc np nq nr mf ns nt nu mi km nv kn ml kp nw kq mo ks nx kt mr ny bi translated">散点图</h1><p id="ac58" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">散点图是大多数分析的核心。它让我们看到一个变量随时间的演变，或者两个(或更多)变量之间的关系。</p><h2 id="634b" class="ma mb jg bd mc md me dn mf mg mh dp mi le mj mk ml li mm mn mo lm mp mq mr ms bi translated">时间序列</h2><p id="690b" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">相当一部分真实数据都有时间因素。幸运的是，plotly +袖扣的设计考虑到了时间序列可视化。让我们把我的 TDS 文章做成一个数据框架，看看趋势是如何变化的。</p><pre class="lw lx ly lz gt my lu mz na aw nb bi"><span id="990f" class="ma mb jg lu b gy nc nd l ne nf"> Create a dataframe of Towards Data Science Articles<br/>tds = df[df['publication'] == 'Towards Data Science'].\<br/>         set_index('published_date')</span><span id="5607" class="ma mb jg lu b gy ng nd l ne nf"># Plot read time as a time series<br/>tds[['claps', 'fans', 'title']].iplot(<br/>    y='claps', mode='lines+markers', secondary_y = 'fans',<br/>    secondary_y_title='Fans', xTitle='Date', yTitle='Claps',<br/>    text='title', title='Fans and Claps over Time')</span></pre><figure class="lw lx ly lz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oc"><img src="../Images/4dd0125212cceab69d3525c5b307998b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wIvogMrLisCfBjB9Yq0krw.gif"/></div></div></figure><p id="bf64" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这里，我们在一条线上做了很多不同的事情:</p><ul class=""><li id="4f12" class="od oe jg kx b ky kz lb lc le of li og lm oh lq oi oj ok ol bi translated">自动获得格式良好的时间序列 x 轴</li><li id="a234" class="od oe jg kx b ky om lb on le oo li op lm oq lq oi oj ok ol bi translated">添加一个辅助 y 轴，因为我们的变量有不同的范围</li><li id="628c" class="od oe jg kx b ky om lb on le oo li op lm oq lq oi oj ok ol bi translated">添加文章标题作为悬停信息</li></ul><p id="4cba" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要了解更多信息，我们还可以很容易地添加文本注释:</p><pre class="lw lx ly lz gt my lu mz na aw nb bi"><span id="8d8a" class="ma mb jg lu b gy nc nd l ne nf">tds_monthly_totals.iplot(<br/>    mode='lines+markers+text',<br/>    text=text,<br/>    y='word_count',<br/>    opacity=0.8,<br/>    xTitle='Date',<br/>    yTitle='Word Count',<br/>    title='Total Word Count by Month')</span></pre><figure class="lw lx ly lz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi or"><img src="../Images/6f6c641c69e3a7cbddc2a0549afd0c56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nq4AdwAcB-GCjf-LUMUTLg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Scatterplot with annotations</figcaption></figure><p id="b335" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于由第三个分类变量着色的双变量散点图，我们使用:</p><pre class="lw lx ly lz gt my lu mz na aw nb bi"><span id="ec9b" class="ma mb jg lu b gy nc nd l ne nf">df.iplot(<br/>    x='read_time',<br/>    y='read_ratio',<br/>    # Specify the category<br/>    categories='publication',<br/>    xTitle='Read Time',<br/>    yTitle='Reading Percent',<br/>    title='Reading Percent vs Read Ratio by Publication')</span></pre><figure class="lw lx ly lz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi os"><img src="../Images/2e83c40807cece12a99c088ad8422009.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3HF7uBmfLsETJvRNSy4i7Q.png"/></div></div></figure><p id="d08b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们通过使用对数轴——指定为 plotly 布局——(有关布局细节，请参见<a class="ae jd" href="https://plot.ly/python/reference/" rel="noopener ugc nofollow" target="_blank"> Plotly 文档</a>)并通过一个数字变量来确定气泡的大小，来变得更复杂一些:</p><pre class="lw lx ly lz gt my lu mz na aw nb bi"><span id="b21e" class="ma mb jg lu b gy nc nd l ne nf">tds.iplot(<br/>    x='word_count',<br/>    y='reads',<br/>    size='read_ratio',<br/>    text=text,<br/>    mode='markers',<br/>    # Log xaxis<br/>    layout=dict(<br/>        xaxis=dict(type='log', title='Word Count'),<br/>        yaxis=dict(title='Reads'),<br/>        title='Reads vs Log Word Count Sized by Read Ratio'))</span></pre><figure class="lw lx ly lz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ot"><img src="../Images/b1b9b8d164b1191fd283d748d7d2c1da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jyy7yVdGrVU7DuE6Z9sRhw.png"/></div></div></figure><p id="2d2a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">再多做一点工作(<a class="ae jd" href="https://nbviewer.jupyter.org/github/WillKoehrsen/Data-Analysis/blob/master/plotly/Plotly%20Whirlwind%20Introduction.ipynb#" rel="noopener ugc nofollow" target="_blank">详见笔记本</a>，我们甚至可以把四个变量(<a class="ae jd" href="https://serialmentor.com/dataviz/aesthetic-mapping.html" rel="noopener ugc nofollow" target="_blank">这个不建议</a>)放在一个图上！</p><figure class="lw lx ly lz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ou"><img src="../Images/6f78a24a23b3d189d9e0690c0a3ce52d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*53LomjR1tGSySn7Aevtd6g.png"/></div></div></figure><p id="1e52" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">像以前一样，我们可以将熊猫与 plotly+袖扣结合起来，以获得有用的情节</p><pre class="lw lx ly lz gt my lu mz na aw nb bi"><span id="65c9" class="ma mb jg lu b gy nc nd l ne nf">df.pivot_table(<br/>    values='views', index='published_date',<br/>    columns='publication').cumsum().iplot(<br/>        mode='markers+lines',<br/>        size=8,<br/>        symbol=[1, 2, 3, 4, 5],<br/>        layout=dict(<br/>            xaxis=dict(title='Date'),<br/>            yaxis=dict(type='log', title='Total Views'),<br/>            title='Total Views over Time by Publication'))</span></pre><figure class="lw lx ly lz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ov"><img src="../Images/dbf3f9ae5a22c5be790bb5c2c6ea17f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sge36RGR1LEDzyvVq98nNg.png"/></div></div></figure><p id="4755" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">查看笔记本<a class="ae jd" href="https://plot.ly/python/" rel="noopener ugc nofollow" target="_blank">或文档</a>了解更多附加功能的示例。我们可以用一行代码在绘图中添加文本注释、参考线和最佳拟合线，并且仍然具有所有的交互。</p></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><h1 id="8fc6" class="no mb jg bd mc np nq nr mf ns nt nu mi km nv kn ml kp nw kq mo ks nx kt mr ny bi translated">高级绘图</h1><p id="6f93" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">现在我们将进入几个你可能不会经常用到的情节，但是它们可能会给你留下深刻的印象。我们将使用<a class="ae jd" href="https://plot.ly/python/figure-factory-subplots/" rel="noopener ugc nofollow" target="_blank">情节</a> <code class="fe lr ls lt lu b"><a class="ae jd" href="https://plot.ly/python/figure-factory-subplots/" rel="noopener ugc nofollow" target="_blank">figure_factory</a></code>，将这些不可思议的情节保持在一条线上。</p><h2 id="da79" class="ma mb jg bd mc md me dn mf mg mh dp mi le mj mk ml li mm mn mo lm mp mq mr ms bi translated">散布矩阵</h2><p id="a98c" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">当我们想要探索许多变量之间的关系时，一个<a class="ae jd" href="https://junkcharts.typepad.com/junk_charts/2010/06/the-scatterplot-matrix-a-great-tool.html" rel="noopener ugc nofollow" target="_blank">散点矩阵</a>(也称为 splom)是一个很好的选择:</p><pre class="lw lx ly lz gt my lu mz na aw nb bi"><span id="b152" class="ma mb jg lu b gy nc nd l ne nf">import plotly.figure_factory as ff</span><span id="b3cf" class="ma mb jg lu b gy ng nd l ne nf">figure = ff.create_scatterplotmatrix(<br/>    df[['claps', 'publication', 'views',      <br/>        'read_ratio','word_count']],<br/>    diag='histogram',<br/>    index='publication')</span></pre><figure class="lw lx ly lz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ow"><img src="../Images/6340b14fb7b721ca7a0c05bf0bcad4aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q2j1aD-xmizC2X2ujlnkNQ.png"/></div></div></figure><p id="7e7b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">甚至这个图也是完全交互式的，允许我们探索数据。</p><h2 id="e7ad" class="ma mb jg bd mc md me dn mf mg mh dp mi le mj mk ml li mm mn mo lm mp mq mr ms bi translated">相关热图</h2><p id="1621" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">为了可视化数值变量之间的相关性，我们计算相关性，然后制作一个带注释的热图:</p><pre class="lw lx ly lz gt my lu mz na aw nb bi"><span id="94ae" class="ma mb jg lu b gy nc nd l ne nf">corrs = df.corr()</span><span id="924a" class="ma mb jg lu b gy ng nd l ne nf">figure = ff.create_annotated_heatmap(<br/>    z=corrs.values,<br/>    x=list(corrs.columns),<br/>    y=list(corrs.index),<br/>    annotation_text=corrs.round(2).values,<br/>    showscale=True)</span></pre><figure class="lw lx ly lz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ow"><img src="../Images/0f11a8e4dea6605383dacafaf3abb5f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-p9xUe9IKKQtMNHFe8zI2Q.png"/></div></div></figure><p id="ebf9" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">情节的清单还在继续。袖扣还有几个主题，我们可以用它们轻松打造完全不同的风格。例如，下面我们在“空间”主题中有一个比率图，在“ggplot”中有一个扩散图:</p><div class="lw lx ly lz gt ab cb"><figure class="ox is oy oz pa pb pc paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/12adc8c08b2b858bd2462db8cae0f29e.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*ck5W8aXaltVq1-PjG9hB7g.png"/></div></figure><figure class="ox is pd oz pa pb pc paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/1961234068efb427d48bcc88d89afd7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*u0jL7qsDJpWLupcqjKlZTQ.png"/></div></figure></div><p id="d2c0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们还得到 3D 图(表面和气泡):</p><div class="lw lx ly lz gt ab cb"><figure class="ox is pe oz pa pb pc paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/64307de8a8f12ef3bde974968e00a748.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*RiKPOE_KL5SNAmRODhx5Ww.png"/></div></figure><figure class="ox is pf oz pa pb pc paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><img src="../Images/4c9e5140e309ca08c0b522e256fefe49.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*dgCraKLvY80K-JYiIyi1Sg.png"/></div></figure></div><p id="aa5e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于那些如此倾向的<a class="ae jd" href="https://interworks.com/blog/rcurtis/2018/01/19/friends-dont-let-friends-make-pie-charts/" rel="noopener ugc nofollow" target="_blank">，你甚至可以做一个饼状图:</a></p><figure class="lw lx ly lz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pg"><img src="../Images/4587ec9fe5ec32c023aff3c603723388.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hMhRTpErpCoqQQ0RdBnowQ.png"/></div></div></figure><h2 id="d494" class="ma mb jg bd mc md me dn mf mg mh dp mi le mj mk ml li mm mn mo lm mp mq mr ms bi translated">在 Plotly Chart Studio 中编辑</h2><p id="ec05" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">当您在笔记本中绘制这些图时，您会注意到图表右下角有一个小链接，上面写着“Export to plot.ly”。如果你点击那个链接，你就会被带到<a class="ae jd" href="https://plot.ly/create/" rel="noopener ugc nofollow" target="_blank">图表工作室</a>，在那里你可以润色你的最终演示图。您可以添加注释，指定颜色，并通常清理一切为一个伟大的数字。然后，你可以在网上发布你的数据，这样任何人都可以通过链接找到它。</p><p id="4611" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是我在 Chart Studio 中修改的两张图表:</p><figure class="lw lx ly lz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pg"><img src="../Images/f471679189143c40dafeceb580c42c4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_RU1jyZy2YCYQnXdEcB52Q.png"/></div></div></figure><figure class="lw lx ly lz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pg"><img src="../Images/2c85672070b5cad09cb4d4289bbe55ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yzvK0uzeO002hADIu0HRVg.png"/></div></div></figure><p id="9c27" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">尽管这里提到了一切，我们仍然没有探索该库的全部功能！我鼓励你查阅 plotly 和袖扣文档，以获得更多令人难以置信的图形。</p><figure class="lw lx ly lz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ph"><img src="../Images/31212ea343f6b7c2d5fc82addd186c42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AVImsTA-CXldeDDsbBzvkg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Plotly interactive graphics of wind farms in United States <a class="ae jd" href="https://plot.ly/python/dropdowns/" rel="noopener ugc nofollow" target="_blank">(Source)</a></figcaption></figure><h1 id="05eb" class="no mb jg bd mc np pi nr mf ns pj nu mi km pk kn ml kp pl kq mo ks pm kt mr ny bi translated">结论</h1><p id="6f52" class="pw-post-body-paragraph kv kw jg kx b ky mt kh la lb mu kk ld le mv lg lh li mw lk ll lm mx lo lp lq ij bi translated">沉没成本谬误最糟糕的地方在于，你只有在放弃努力后才意识到自己浪费了多少时间。幸运的是，现在我已经犯了坚持<code class="fe lr ls lt lu b">matploblib</code>太久的错误，你也不用了！</p><p id="3138" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当考虑打印库时，我们需要几样东西:</p><ol class=""><li id="d047" class="od oe jg kx b ky kz lb lc le of li og lm oh lq pn oj ok ol bi translated"><strong class="kx jh">快速勘探单线图</strong></li><li id="e5d0" class="od oe jg kx b ky om lb on le oo li op lm oq lq pn oj ok ol bi translated"><strong class="kx jh">子集化/调查数据的交互元素</strong></li><li id="5529" class="od oe jg kx b ky om lb on le oo li op lm oq lq pn oj ok ol bi translated"><strong class="kx jh">根据需要挖掘细节的选项</strong></li><li id="b8ab" class="od oe jg kx b ky om lb on le oo li op lm oq lq pn oj ok ol bi translated"><strong class="kx jh">轻松定制最终演示文稿</strong></li></ol><p id="5864" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">目前，用<a class="ae jd" href="https://plot.ly/python/" rel="noopener ugc nofollow" target="_blank"> Python 做所有这些事情的最佳选择是 plotly </a>。Plotly 允许我们快速地进行可视化，并通过交互性帮助我们更好地了解我们的数据。此外，让我们承认，绘图应该是数据科学中最令人愉快的部分之一！与其他图书馆，绘图变成了一个乏味的任务，但与 plotly，有再一次在制作一个伟大的数字的喜悦！</p><figure class="lw lx ly lz gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi po"><img src="../Images/1e30f3f7893bd23d1c50b7876ac989a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oBjoGHxcba2UsQbFf5bzsw.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">A plot of my enjoyment with plotting in Python over time</figcaption></figure><p id="5ab8" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在已经是 2019 年了，是时候升级您的 Python 绘图库了，以便在您的数据科学可视化中获得更好的效率、功能和美感。</p></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><p id="0f94" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一如既往，我欢迎反馈和建设性的批评。可以在 Twitter <a class="ae jd" href="http://twitter.com/@koehrsen_will" rel="noopener ugc nofollow" target="_blank"> @koehrsen_will 上找到我。</a></p></div></div>    
</body>
</html>