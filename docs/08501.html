<html>
<head>
<title>Step by step guide to creating a Text-To-Voice-To-Text email assistant</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建文本到语音到文本电子邮件助手的分步指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/step-by-step-guide-to-creating-a-text-to-voice-to-text-email-assistant-ca62eaf96437?source=collection_archive---------28-----------------------#2019-11-17">https://towardsdatascience.com/step-by-step-guide-to-creating-a-text-to-voice-to-text-email-assistant-ca62eaf96437?source=collection_archive---------28-----------------------#2019-11-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/072e96bf71b3cb951eef661f0685424b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_pn2YrfdfOM20jsKnI1wUA.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Photo by <a class="ae kf" href="https://unsplash.com/@charlesdeluvio?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Charles 🇵🇭</a> on <a class="ae kf" href="https://unsplash.com/s/photos/email-assistant?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="dfb0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我将描述如何创建您的个人电子邮件秘书。</p><p id="2a15" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个电子邮件秘书是一个电子邮件应用程序，它使用 Gmail API 读取您的电子邮件，使用 Google 文本到语音 API 和“playsound”API 读出您的电子邮件，使用“py audio”API 听到您的响应，使用 Google 语音到文本 API 将音频响应转换为文本，最后使用 Gmail API 再次发送响应。</p><p id="3163" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要查看这个电子邮件助手的运行情况，请观看视频</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="li lj l"/></div></figure><p id="c5bf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我相信你一定很想知道它是如何创建的，以及所有的步骤都需要什么。所以让我们开始吧。我将详细列出所有应该易于遵循和实施的步骤</p></div><div class="ab cl lk ll hx lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="im in io ip iq"><h1 id="6553" class="lr ls it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">步骤 1:创建虚拟环境并安装 Python 库</h1><p id="21df" class="pw-post-body-paragraph kg kh it ki b kj mp kl km kn mq kp kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated">整个程序是在 mac-book-pro 上编写的，但它是独立于平台的，可以在 windows pc/laptop 上遵循相同的步骤。除此之外，我使用<a class="ae kf" href="https://docs.anaconda.com/anaconda/install/mac-os/" rel="noopener ugc nofollow" target="_blank"> anaconda </a> python 安装和<a class="ae kf" href="https://www.jetbrains.com/pycharm/download/#section=mac" rel="noopener ugc nofollow" target="_blank"> pycharm 社区版</a>作为编程编辑器。如果您熟悉创建虚拟环境和安装 python 库，请直接跳到下一节。</p><p id="ad73" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在虚拟环境中工作总是安全的，以防止应用程序之间的库冲突</p><blockquote class="mu mv mw"><p id="7ff9" class="kg kh mx ki b kj kk kl km kn ko kp kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">1a。创建虚拟环境</p></blockquote><p id="f4e2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在 mac 终端窗口创建您的虚拟环境，并安装 playsound 和 pyaudio 库</p><pre class="le lf lg lh gt nb nc nd ne aw nf bi"><span id="f11e" class="ng ls it nc b gy nh ni l nj nk"><em class="mx">#conda create — name p36<br/>#conda activate p36<br/>#pip install playsound<br/>#pip install pyaudio</em></span></pre><h1 id="e4e8" class="lr ls it bd lt lu nl lw lx ly nm ma mb mc nn me mf mg no mi mj mk np mm mn mo bi translated">第二步:配置谷歌云平台</h1><p id="ac4c" class="pw-post-body-paragraph kg kh it ki b kj mp kl km kn mq kp kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated">在这一步中，我们需要转到 google cloud 开发者平台，创建服务密钥、凭证并激活相关的 API 来使用它们。谷歌。</p><blockquote class="mu mv mw"><p id="fa32" class="kg kh mx ki b kj kk kl km kn ko kp kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">2a。激活环境</p></blockquote><p id="3773" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在激活时，谷歌会要求你提供信用卡，并承诺在年底不会拖欠你的费用。如果提供 300 美元的 1 年免费信贷，则使用 API</p><p id="6ce8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">链接激活您的账户【https://console.developers.google.com/ T4】</p><div class="le lf lg lh gt ab cb"><figure class="nq ju nr ns nt nu nv paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><img src="../Images/c280c7360a05857ff62bedc061dd8b3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*edS-qWojpVH4ZhAJQSSU9w.png"/></div></figure><figure class="nq ju nw ns nt nu nv paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><img src="../Images/6a4ecc8c18626894c3547fd60978ad10.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*9rG-C7QY8lJApGtTPdB_wQ.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk nx di ny nz">Google Cloud Platform Activation Steps</figcaption></figure></div><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oa"><img src="../Images/84d00c88bcc1a7ec2ad0a2ab1dd37383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*26S7_ArmBC-XKDR1Q-5O5Q.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Google Cloud Platform Activation Success</figcaption></figure><p id="f411" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不幸的是，随后启用 API、创建服务密钥和凭证的后续步骤相当复杂，但请继续</p><blockquote class="mu mv mw"><p id="47a3" class="kg kh mx ki b kj kk kl km kn ko kp kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">2b。创建服务帐户密钥</p></blockquote><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ob"><img src="../Images/87d771f9866af6393a3e6b6ab73a6835.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HYsGIyy5LrgfdQsHCQJ92w.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Create Service Account Key — Input</figcaption></figure><p id="926d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">完成这一步后，会创建一个扩展名为. json 的密钥文件。下载此服务帐户密钥。此密钥是根据您的程序的身份验证要求提供的</p><blockquote class="mu mv mw"><p id="5c45" class="kg kh mx ki b kj kk kl km kn ko kp kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">2c。创建 OAuth2.0 凭据</p></blockquote><p id="55cb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这一步是为了让您的应用程序能够访问 GMAIL。我们将申请'撰写'和'发送'电子邮件，以便能够适时运行我们的原型</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oc"><img src="../Images/66d56e412560aae11dd429d5ac5988e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BXq5S6_3WcKAK0AAh6noYQ.png"/></div></div></figure><p id="3f91" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在此步骤之后，凭证页面将如下所示，即带有服务帐户密钥和 OAuth 客户端 id。</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi od"><img src="../Images/9055472d5439a0f8e7cd7e0877fde6f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZECL_jyOoFVjZQ6SwXCOlQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Final Credentials Page</figcaption></figure><p id="e7e3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">下载</strong>相关凭证到您计算机上存储 python 脚本的文件夹中(任何地方都可以，只要您提供应用程序的正确路径)</p><blockquote class="mu mv mw"><p id="6d56" class="kg kh mx ki b kj kk kl km kn ko kp kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">2d。激活文本到语音、语音到文本和 Gmail APIs</p></blockquote><p id="ef1b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，我们激活文本到语音 API、语音到文本 API 和 Gmail API。在仪表板上，您会看到“启用 API 和服务”选项。</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oe"><img src="../Images/30851cd14dd2b0bcf966fbc642aae42f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LXc2en2c5IuOO4XauO_fnA.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Enable APIS on the dashboard</figcaption></figure><p id="9cfa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从过多的 API 和服务中启用的最简单的方法是通过搜索(常见的是 Google，你还能在那里做什么)。请参见下面的搜索文本到语音和语音到文本 API 的示例。</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi of"><img src="../Images/aa6c37c331c6ef9fdecb2a29666c61aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S-k7BH8drBldrOef_MLRRA.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Searching for APIS to enable</figcaption></figure><p id="6846" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">找到 API 后，只需点击启用(下面是 Gmail 的示例)</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi og"><img src="../Images/63920d550e74c7569665bd0549511d1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oqjyUz7JtFM8cHGPLRTmyg.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Enable Gmail API</figcaption></figure><p id="a93e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，我们准备研究程序本身。</p><h1 id="62e8" class="lr ls it bd lt lu nl lw lx ly nm ma mb mc nn me mf mg no mi mj mk np mm mn mo bi translated">步骤 3:运行应用程序</h1><p id="c788" class="pw-post-body-paragraph kg kh it ki b kj mp kl km kn mq kp kq kr mr kt ku kv ms kx ky kz mt lb lc ld im bi translated">现在是比较容易的部分。这很简单，因为大多数代码示例都可以在 GCP 教程网站上找到，可以选择复制，还有很多解释。另一方面，这些链接有很多深层链接，为用户提供了所有的 API 选项。这导致新用户容易迷路。</p><p id="9bc8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这里，我向您描述了启动和运行原型的相关部分。之后，根据 GCP 站点上的文档，按照您的特定需求进行配置就容易多了。我提供了每个特定部分的 GCP 教程的链接</p><p id="8907" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">运行原型的步骤是</p><ul class=""><li id="5a35" class="oh oi it ki b kj kk kn ko kr oj kv ok kz ol ld om on oo op bi translated">从<a class="ae kf" href="https://github.com/alsm6169/Google-TtS-StT-Gmail" rel="noopener ugc nofollow" target="_blank"> github </a>下载代码到特定文件夹</li><li id="cb1c" class="oh oi it ki b kj oq kn or kr os kv ot kz ou ld om on oo op bi translated">将凭据(服务帐户密钥和 OAuth 密钥)复制到与代码相同的文件夹中</li><li id="77b3" class="oh oi it ki b kj oq kn or kr os kv ot kz ou ld om on oo op bi translated">在 Main.py 中替换要导出的 GOOGLE_APPLICATION_CREDENTIALS 的路径</li></ul><pre class="le lf lg lh gt nb nc nd ne aw nf bi"><span id="c140" class="ng ls it nc b gy nh ni l nj nk">#Replace this with the correct file path of the service account key<br/>os.environ[<strong class="nc iu">'GOOGLE_APPLICATION_CREDENTIALS'</strong>] = \<br/>    <strong class="nc iu">"/Users/name/Documents/GitHub/Python-Exercises/googleSpeechToText/GMAIL_gTtS_gStT_ServiceAccountKey.json"</strong></span></pre><ul class=""><li id="b5a5" class="oh oi it ki b kj kk kn ko kr oj kv ok kz ol ld om on oo op bi translated">在 RaSmails.py 中替换 OAuth2.0 文件的名称</li></ul><pre class="le lf lg lh gt nb nc nd ne aw nf bi"><span id="4c8b" class="ng ls it nc b gy nh ni l nj nk">#Replace this with correct file path of credentials .json<br/>flow = InstalledAppFlow.from_client_secrets_file(<br/>    <strong class="nc iu">'oath2_credentials_mailreceiver349.json'</strong>, SCOPES)</span></pre><ul class=""><li id="9181" class="oh oi it ki b kj kk kn ko kr oj kv ok kz ol ld om on oo op bi translated">在终端窗口中激活虚拟环境(#conda activate — name p36)</li><li id="09a2" class="oh oi it ki b kj oq kn or kr os kv ot kz ou ld om on oo op bi translated">以#python Main.py 的身份运行代码</li></ul><p id="ec13" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">代码流程的简要概述如下:</p><blockquote class="mu mv mw"><p id="65cd" class="kg kh mx ki b kj kk kl km kn ko kp kq my ks kt ku mz kw kx ky na la lb lc ld im bi translated">获取 Gmail 服务实例&gt;获取最新 5 封电子邮件的片段&gt;将最新片段转换为音频&gt;播放音频文件(最新电子邮件) &gt;录制回复电子邮件&gt;将音频转换为文本&gt;发送回复电子邮件</p></blockquote><p id="33cf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下链接详细描述了正在使用的 API</p><ul class=""><li id="6d38" class="oh oi it ki b kj kk kn ko kr oj kv ok kz ol ld om on oo op bi translated"><a class="ae kf" href="https://developers.google.com/gmail/api/v1/reference/users/messages/get" rel="noopener ugc nofollow" target="_blank">阅读邮件</a>，</li><li id="e0fa" class="oh oi it ki b kj oq kn or kr os kv ot kz ou ld om on oo op bi translated"><a class="ae kf" href="https://cloud.google.com/text-to-speech/docs/reference/libraries#client-libraries-install-python" rel="noopener ugc nofollow" target="_blank">将文本转换为语音</a>，</li><li id="8b94" class="oh oi it ki b kj oq kn or kr os kv ot kz ou ld om on oo op bi translated"><a class="ae kf" href="https://github.com/GoogleCloudPlatform/python-docs-samples/tree/master/speech/cloud-client" rel="noopener ugc nofollow" target="_blank">将语音转换为文本</a>最后</li><li id="6bf5" class="oh oi it ki b kj oq kn or kr os kv ot kz ou ld om on oo op bi translated"><a class="ae kf" href="https://developers.google.com/gmail/api/v1/reference/users/messages/send" rel="noopener ugc nofollow" target="_blank">发送邮件</a>。</li></ul><p id="bfb1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我希望你喜欢这个原型。乐意回答任何问题。让我知道你的想法</p></div></div>    
</body>
</html>