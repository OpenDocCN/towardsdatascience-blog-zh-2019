<html>
<head>
<title>Easier to Ask for Forgiveness than Permission: a short Python Example.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">请求原谅比请求许可更容易:一个简短的 Python 例子。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/easier-to-ask-for-forgiveness-than-permission-a-short-python-example-e115566a3b8c?source=collection_archive---------29-----------------------#2019-09-25">https://towardsdatascience.com/easier-to-ask-for-forgiveness-than-permission-a-short-python-example-e115566a3b8c?source=collection_archive---------29-----------------------#2019-09-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="a1ae" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">一个简单的概念，可以帮助您避免重复解析所有给定的数据，而您只需要用一个小样本来交叉检查它们。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/f00b097c403c8233ffc4b14830c0c7fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z_0GOuNo_ogum0og"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Photo by <a class="ae lf" href="https://unsplash.com/@pisitheng?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Pisit Heng</a> on <a class="ae lf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d44a" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">想象一下，你已经记下了你看过的电影，以及每部电影你看了多少次。</p><p id="bcca" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">出于某种奇怪的原因，您将注释保存在 python 字典中:-)，<br/>其中键是电影标题，值是您观看电影的次数。</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="58c9" class="ll lm it lh b gy ln lo l lp lq">movies = {<br/>...<br/>'The Godfather' : 5,<br/>'Pulp Fiction' : 2,<br/>...<br/>}</span></pre><p id="0c84" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">在某个时候，你决定你只想在你的字典里保留黑帮电影，而不是别的。<br/>所以你得用黑帮电影清单来反复核对你的字典。</p><p id="0c67" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">一种方法是获取字典键，并查看它们是否包含在给定的黑帮列表中。<br/>这个结果到<strong class="jt iu"> O(k*n) </strong>动作总计，如果我们在黑帮名单里有<strong class="jt iu"> k 值</strong>，在电影字典里有<strong class="jt iu"> n 值</strong>。</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="036f" class="ll lm it lh b gy ln lo l lp lq">gangster_list = [..] # k values</span><span id="a8f0" class="ll lm it lh b gy lr lo l lp lq">for key in movies.keys(): # n values<br/>    if movies[key] in gangster_list:<br/>        continue<br/>    else:<br/>        del movies[key]</span><span id="fae1" class="ll lm it lh b gy lr lo l lp lq"># O(k*n) actions in total</span></pre><p id="aedf" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">但是如果黑帮电影排行榜包含了 100 万部电影，其中你看过的黑帮电影接近大黑帮排行榜的末尾呢？</p><p id="9d82" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">假设你已经看了 10 部黑帮电影。<br/>上面的‘in’检查将导致对你所观看的每部电影的几乎整个黑帮列表进行解析，结果是:<br/> O([列表中的 1m 个值] * [观看的 10 部黑帮电影]) = O(10m)个动作。</p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><p id="80ca" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">反而是<strong class="jt iu">请求原谅比请求允许更容易！</strong></p><p id="02c0" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">我们可以用 O(k)行动的成本从大黑帮名单中产生一个虚拟字典:</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="96fb" class="ll lm it lh b gy ln lo l lp lq">gangster_dic = {}<br/>for movie in gangster_list:<br/>    gangster_dic[movie] = None</span></pre><p id="7524" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">而黑帮字典的内容将会是:</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="1113" class="ll lm it lh b gy ln lo l lp lq">{ # k keys without values<br/>...<br/>'Goodfellas' : None,<br/>'The Untouchables' : None,<br/>...<br/>}<br/>del gangster_list # To balance used memory</span></pre><p id="9d77" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">现在，我们可以直接搜索每个观看过的电影名称:</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="eaf1" class="ll lm it lh b gy ln lo l lp lq">for key in movies.keys(): # n values<br/>    # O(1) action<br/>    try:<br/>        gangster_dic[key]<br/>        # do nothing: this is a gangster movie<br/>    except KeyError:<br/>        del movies[key]<br/>        # delete the movie, since we did not find it in the   <br/>        # gangster movies dictionary</span></pre><p id="399e" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">如果我们失败了，没什么大不了的；我们处理异常。</p><p id="ea8c" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated"><strong class="jt iu">这其实是我们想要的:</strong>为了例外发生而删除了一部我们看过的电影，那不是黑帮片。</p><p id="a7ae" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">总的来说，动作的成本是:<br/>O(k)用于字典，加上<br/>O(n * 1)用于检查所观看的电影在黑帮电影集合中是否存在，<br/>导致总共<strong class="jt iu"> O(k+m) </strong>个动作。</p><p id="2487" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">如果我们再次假设，k=1m，n=10，那么我们总共得到(1m+10) = O(1m)个动作。</p><p id="5de6" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated">我们将所需行动从最初的 1000 万减少到了 100 万！或者总的来说需要的动作少了#n 倍！</p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><p id="c789" class="pw-post-body-paragraph jr js it jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko im bi translated"><strong class="jt iu">`请求原谅比请求许可容易`</strong>这个概念多次对我派上用场。我希望你也会发现它很有用！</p></div></div>    
</body>
</html>