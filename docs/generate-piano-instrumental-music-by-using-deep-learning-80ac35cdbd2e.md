# åˆ©ç”¨æ·±åº¦å­¦ä¹ ç”Ÿæˆé’¢ç´å™¨ä¹

> åŸæ–‡ï¼š<https://towardsdatascience.com/generate-piano-instrumental-music-by-using-deep-learning-80ac35cdbd2e?source=collection_archive---------1----------------------->

## é€šè¿‡è¯•éªŒ Tensorflow v2.0 Alpha é€æ­¥ç”Ÿæˆé’¢ç´éŸ³ä¹

![](img/11d299c643f9e12fdf5c852ff1053b6b.png)

Photo by [Marius Masalar](https://unsplash.com/@marius?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

å¤§å®¶å¥½ï¼ç»ˆäºå¯ä»¥åœ¨æˆ‘çš„ä»‹è´¨ä¸Šå†æ¬¡å†™ä½œï¼Œæœ‰ç©ºé—²æ—¶é—´åšä¸€äº›äººå·¥æ™ºèƒ½(AI)çš„å®éªŒäº†ã€‚è¿™ä¸€æ¬¡ï¼Œæˆ‘å°†å†™ä¸‹å¹¶åˆ†äº«å¦‚ä½•åˆ©ç”¨æ·±åº¦å­¦ä¹ ç”ŸæˆéŸ³ç¬¦ã€‚ä¸æˆ‘çš„[ä¸Šä¸€ç¯‡å…³äºç”Ÿæˆæ­Œè¯çš„æ–‡ç« ](/generating-indonesian-lyric-using-deep-learning-first-part-2c7634237475)ä¸åŒï¼Œè¿™æ¬¡æˆ‘ä»¬å°†ç”ŸæˆéŸ³ä¹çš„éŸ³ç¬¦å¹¶ç”Ÿæˆæ–‡ä»¶(MIDI æ ¼å¼)ã€‚

![](img/412e457d428618cd777562851201de07.png)

Photo by [Malte Wingen](https://unsplash.com/@maltewingen?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

éŸ³ä¹çš„ä¸»é¢˜æ˜¯é’¢ç´ã€‚æœ¬æ–‡å°†ä½¿ç”¨é€’å½’ç¥ç»ç½‘ç»œ(RNN)ã€é—¨æ§é€’å½’å•å…ƒ(GRU)çš„å˜ä½“ï¼Œåœ¨è‡ªæˆ‘æ³¨æ„çš„å¸®åŠ©ä¸‹ç”Ÿæˆé’¢ç´éŸ³ç¬¦ã€‚è¿™ç¯‡æ–‡ç« ä¸ä»…å°†å‘Šè¯‰å¦‚ä½•ç”ŸæˆéŸ³ç¬¦ï¼Œè¿™ç¯‡æ–‡ç« è¿˜å°†å‘Šè¯‰å¦‚ä½•ç”Ÿæˆä¸€ä¸ªé€‚å½“çš„ MIDI æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥åœ¨ç”µè„‘ä¸Šæ’­æ”¾ã€‚

è¿™ç¯‡æ–‡ç« çš„ç›®æ ‡è¯»è€…æ˜¯å¯¹äººå·¥æ™ºèƒ½æ„Ÿå…´è¶£çš„äººï¼Œå°¤å…¶æ˜¯æƒ³ç»ƒä¹ ä½¿ç”¨æ·±åº¦å­¦ä¹ çš„äººã€‚æˆ‘å¸Œæœ›é€šè¿‡å‘è¡¨è¿™ç¯‡æ–‡ç« æ¥æé«˜æˆ‘çš„å†™ä½œæŠ€å·§ï¼Œå¹¶ä¸”å†…å®¹å¯¹ä½ æœ‰ç›ŠğŸ˜ƒã€‚

å¦‚æœæ‚¨æƒ³äº†è§£å®Œæ•´çš„æºä»£ç ï¼Œæœ¬æ–‡æœ«å°¾æœ‰ä¸€ä¸ª Github é“¾æ¥ã€‚ç°åœ¨ï¼Œæˆ‘å°†ç»™å‡º python ç¬”è®°æœ¬å’Œèµ„æºåº“ä¸­çš„åä½œé“¾æ¥ã€‚

**ä¸‹é¢æ˜¯å¼€åœºéŸ³ä¹**

Sound 1 : Opening Piano ğŸ˜ƒ

**(éŸ³ä¹æ˜¯ç”±æˆ‘ä»¬å°†åœ¨æœ¬æ–‡ä¸­åˆ›å»ºçš„æ¨¡å‹ç”Ÿæˆçš„)**

# æ¦‚è¿°

1.  ä»‹ç»
2.  æŠ€æœ¯å’Œæ•°æ®
3.  ç®¡é“
4.  é¢„å¤„ç† MIDI æ–‡ä»¶
5.  ç«è½¦æ¨¡å‹
6.  æ¨ç†å¹¶ç”Ÿæˆ MIDI æ–‡ä»¶
7.  ç»“æœ
8.  ç»“è®º
9.  ç¼–åè®°

# ä»‹ç»

å½“å‰äººå·¥æ™ºèƒ½é¢†åŸŸçš„ä¸€ä¸ªçƒ­é—¨è¯é¢˜æ˜¯å¦‚ä½•ä»…ä½¿ç”¨æ•°æ®(æ— ç›‘ç£çš„)æ¥ç”Ÿæˆä¸œè¥¿ã€‚åœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸï¼Œæœ‰è®¸å¤šç ”ç©¶äººå‘˜æ­£åœ¨ç ”ç©¶åˆ©ç”¨ç”Ÿæˆå¼ Advesarial Network (GAN)ç”Ÿæˆå›¾åƒçš„å…ˆè¿›æŠ€æœ¯ã€‚ä¾‹å¦‚ï¼ŒNVIDIA é€šè¿‡ä½¿ç”¨ GAN åˆ›å»ºäº†[é€¼çœŸçš„äººè„¸ç”Ÿæˆå™¨ã€‚è¿˜æœ‰ä¸€äº›åˆ©ç”¨](https://medium.com/syncedreview/gan-2-0-nvidias-hyperrealistic-face-generator-e3439d33ebaf)[ç”˜](https://magenta.tensorflow.org/research)ç”ŸæˆéŸ³ä¹çš„ç ”ç©¶ã€‚

![](img/f0ad4a0feb791f578f4af9d9cb005315.png)

Photo by [Akshar Dave](https://unsplash.com/@akshar_dave?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

å¦‚æœæˆ‘ä»¬è°ˆè®ºéŸ³ä¹ç”Ÿæˆå™¨çš„*å€¼*ï¼Œå®ƒå¯ä»¥ç”¨æ¥å¸®åŠ©éŸ³ä¹å®¶åˆ›ä½œä»–ä»¬çš„éŸ³ä¹ã€‚å®ƒèƒ½å¢å¼ºäººçš„åˆ›é€ åŠ›ã€‚æˆ‘è®¤ä¸ºåœ¨æœªæ¥ï¼Œå¦‚æœåœ¨è¿™ä¸ªé¢†åŸŸæœ‰å¾ˆå¤šé«˜å…³æ³¨åº¦ï¼Œå¤§å¤šæ•°éŸ³ä¹äººå°†åœ¨äººå·¥æ™ºèƒ½çš„å¸®åŠ©ä¸‹åˆ›ä½œéŸ³ä¹ã€‚

è¿™ç¯‡æ–‡ç« å°†é›†ä¸­åœ¨å¦‚ä½•é€šè¿‡åœ¨éŸ³ä¹ä¸­ç”Ÿæˆè¿ç»­çš„éŸ³ç¬¦æ¥ç”ŸæˆéŸ³ä¹ã€‚æˆ‘ä»¬å°†çŸ¥é“å¦‚ä½•å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºç¥ç»ç½‘ç»œçš„è¾“å…¥æ¥ç”ŸæˆéŸ³ä¹ã€‚

![](img/109713eff758e8a605ae58bbfaaf4345.png)

å®éªŒè¿˜å°†ä½¿ç”¨ **Tensorflow v2.0** (ä»åœ¨ alpha é˜¶æ®µ)ä½œä¸ºæ·±åº¦å­¦ä¹ æ¡†æ¶ã€‚æˆ‘æƒ³å±•ç¤ºçš„æ˜¯é€šè¿‡éµå¾ªä»–ä»¬çš„ä¸€äº›[æœ€ä½³å®è·µ](https://medium.com/tensorflow/effective-tensorflow-2-0-best-practices-and-whats-changed-a0ca48767aff)æ¥æµ‹è¯•å’Œä½¿ç”¨ Tensorflow v2.0ã€‚Tensorflow v2.0 ä¸­æˆ‘å–œæ¬¢çš„ä¸€ä¸ªç‰¹æ€§æ˜¯ï¼Œé€šè¿‡ä½¿ç”¨ä»–ä»¬çš„äº²ç¬”ç­¾åï¼Œå®ƒç¡®å®åŠ é€Ÿäº†æ¨¡å‹çš„è®­ç»ƒã€‚å¯ä»¥é€šè¿‡ä½¿ç”¨`@tf.function`å®šä¹‰æˆ‘ä»¬çš„å‡½æ•°æ¥ä½¿ç”¨ã€‚æ­¤å¤–ï¼Œä¸å†æœ‰â€œtf.session â€,ä¹Ÿæ²¡æœ‰å…¨å±€åˆå§‹åŒ–ã€‚è¿™äº›ç‰¹ç‚¹æ˜¯æˆ‘ä» Tensorflow è½¬åˆ° PyTorch çš„åŸå› ä¹‹ä¸€ã€‚Tensorflow çš„å¯ç”¨æ€§å¯¹æˆ‘æ¥è¯´å¹¶ä¸å¥½ã€‚ç„¶è€Œï¼Œåœ¨æˆ‘çœ‹æ¥ Tensorflow v2.0 æ”¹å˜äº†è¿™ä¸€åˆ‡ï¼Œå¢åŠ äº†å®ƒä»¬çš„å¯ç”¨æ€§ï¼Œä½¿åšä¸€äº›å®éªŒå˜å¾—æ›´èˆ’é€‚ã€‚

è¿™ä¸ªå®éªŒè¿˜ä½¿ç”¨äº†**è‡ªæˆ‘å…³æ³¨å±‚**ã€‚è‡ªæˆ‘æ³¨æ„å±‚ä¼šå‘Šè¯‰æˆ‘ä»¬ï¼Œç»™å®šä¸€ä¸ªè¿ç»­çš„å®ä¾‹(ä¾‹å¦‚åœ¨éŸ³ä¹éŸ³ç¬¦â€œC D E F Gâ€ä¸­)ï¼Œæ¯ä¸ªè®°å·ä¼šå­¦ä¹ åˆ°é‚£ä¸ªè®°å·å¯¹å…¶ä»–è®°å·çš„å½±å“æœ‰å¤šå¤§ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹(é’ˆå¯¹ NLP ä»»åŠ¡):

![](img/8d29e26bd0d7b5bdfb44ef00cc8a9e28.png)

Image 1 : Visualization of attention. Taken from : [http://jalammar.github.io/illustrated-transformer/](http://jalammar.github.io/illustrated-transformer/)

å…³äºè‡ªæˆ‘å…³æ³¨çš„è¿›ä¸€æ­¥ä¿¡æ¯ï¼Œå°¤å…¶æ˜¯å…³äºå˜å½¢é‡‘åˆšçš„ï¼Œä½ å¯ä»¥çœ‹[è¿™ç¯‡ç‰›é€¼çš„æ–‡ç« ](http://jalammar.github.io/illustrated-transformer/)ã€‚

äº‹ä¸å®œè¿Ÿï¼Œè®©æˆ‘ä»¬ç»§ç»­åˆ›ä½œéŸ³ä¹

# æŠ€æœ¯å’Œæ•°æ®

æœ¬å®éªŒå°†ä½¿ç”¨:

1.  Tensorflow v2.0:æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼ŒTensorflow çš„æ–°ç‰ˆæœ¬ï¼Œä»å¤„äº alpha å¼€å‘é˜¶æ®µã€‚
2.  Python 3.7
3.  åˆä½œå®éªŒå®¤:å…è´¹çš„ Jupyter ç¬”è®°æœ¬ç¯å¢ƒï¼Œæ— éœ€è®¾ç½®ï¼Œå®Œå…¨åœ¨äº‘ä¸­è¿è¡Œã€‚æœ‰ GPU ç‰¹æ–¯æ‹‰ K80 ç”šè‡³ TPUï¼é—æ†¾çš„æ˜¯ï¼Œåœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼ŒTensorflow v2.0 alpha ä»ä¸æ”¯æŒ TPUã€‚
4.  Python åº“ *pretty_midi* :æ“ä½œå’Œåˆ›å»º midi æ–‡ä»¶çš„åº“

å¯¹äºæ•°æ®ï¼Œæˆ‘ä»¬ä½¿ç”¨ Magenta çš„ **MAESTRO** (ä¸ºåŒæ­¥è½¨é“å’Œç»„ç»‡ç¼–è¾‘çš„ MIDI å’ŒéŸ³é¢‘)ä½œä¸º[æ•°æ®é›†](https://magenta.tensorflow.org/datasets/maestro)ã€‚è¯¥æ•°æ®é›†ä»…åŒ…å«é’¢ç´ä¹å™¨ã€‚æˆ‘ä»¬å°†ä»å¤§çº¦ 1000 é¦–éŸ³ä¹ä¸­éšæœºæŠ½å– 100 é¦–ï¼Œä»¥åŠ å¿«æˆ‘ä»¬çš„è®­ç»ƒæ—¶é—´ã€‚

# ç®¡é“

ä¸‹é¢æ˜¯æˆ‘ä»¬çš„éŸ³ä¹ç”Ÿæˆå™¨å°†å¦‚ä½•å·¥ä½œçš„ç®¡é“:

![](img/a70c86a5dbe436c3bf4676004b990607.png)

Image 2 : Pipeline

æˆ‘ä»¬å°†çœ‹åˆ°æ¯ä¸€ä¸ªè¿‡ç¨‹ã€‚ä¸ºç®€å•èµ·è§ï¼Œæˆ‘ä»¬å°†æ¯ä¸ªæµç¨‹åˆ’åˆ†å¦‚ä¸‹:

1.  é¢„å¤„ç†å¾…è¾“å…¥ç¥ç»ç½‘ç»œçš„ MIDI æ–‡ä»¶
2.  åŸ¹è®­è¿‡ç¨‹
3.  ç”Ÿæˆ MIDI æ–‡ä»¶

# é¢„å¤„ç† MIDI æ–‡ä»¶

åœ¨æˆ‘ä»¬è¿›å…¥å¦‚ä½•é¢„å¤„ç† midi æ–‡ä»¶ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ä»€ä¹ˆæ˜¯ Midi æ ¼å¼æ–‡ä»¶ã€‚

ä»[**pcmag**](https://www.pcmag.com/encyclopedia/term/47014/midi)**ä¸­ï¼ŒMIDI çš„å®šä¹‰:**

> **ä¹å™¨ã€åˆæˆå™¨å’Œè®¡ç®—æœºä¹‹é—´äº¤æ¢éŸ³ä¹ä¿¡æ¯çš„æ ‡å‡†åè®®ã€‚å¼€å‘ MIDI æ˜¯ä¸ºäº†å…è®¸ä¸€ä¸ªåˆæˆå™¨çš„é”®ç›˜æ¼”å¥å¦ä¸€ä¸ªåˆæˆå™¨äº§ç”Ÿçš„éŸ³ç¬¦ã€‚å®ƒå®šä¹‰äº†éŸ³ç¬¦ä»¥åŠæŒ‰é’®ã€æ‹¨å·ç›˜å’Œè¸æ¿è°ƒæ•´çš„ä»£ç ï¼ŒMIDI æ§åˆ¶ä¿¡æ¯å¯ä»¥ç¼–æ’ä¸€ç³»åˆ—åˆæˆå™¨ï¼Œæ¯ä¸ªåˆæˆå™¨æ¼”å¥ä¹è°±çš„ä¸€éƒ¨åˆ†ã€‚MIDI ç‰ˆæœ¬ 1.0 äº 1983 å¹´æ¨å‡ºã€‚**

**æ€»ä¹‹ï¼ŒMIDI æ–‡ä»¶åŒ…å«ä¸€ç³»åˆ—å¸¦æœ‰éŸ³ç¬¦çš„ä¹å™¨ã€‚æ¯”å¦‚é’¢ç´å’Œå‰ä»–çš„ç»“åˆã€‚æ¯ç§ä¹å™¨é€šå¸¸æœ‰ä¸åŒçš„éŸ³ç¬¦æ¥æ¼”å¥ã€‚**

**å¯¹äº MIDI æ–‡ä»¶çš„é¢„å¤„ç†ï¼ŒPython ä¸­æœ‰ä¸€äº›åº“å¯ä»¥ç”¨æ¥å®Œæˆã€‚å…¶ä¸­ä¸€ä¸ªå°±æ˜¯`[*pretty_midi*](https://github.com/craffel/pretty-midi)`ã€‚å®ƒå¯ä»¥æ“ä½œ MIDI æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è¿™ä¸ªåº“ã€‚**

**å¯¹äº`pretty_midi`, midi æ–‡ä»¶çš„æ ¼å¼å¦‚ä¸‹:**

**![](img/d30bc721d49d16aaa4157c1e6f103c1b.png)**

**Image 3 : PrettyMidi format**

****å¼€å§‹**æ˜¯ä»¥ç§’ä¸ºå•ä½å¼¹å¥çš„éŸ³ç¬¦çš„å¼€å§‹ã€‚**ç»“æŸ**æ˜¯ä¸€ä¸ªéŸ³ç¬¦åœ¨ä¸€ç§’é’Ÿå†…æ¼”å¥å®Œæ¯•ã€‚ä¸€æ¬¡å¯ä»¥æœ‰å¤šä¸ªéŸ³ç¬¦é‡å ã€‚ **Pitch** æ˜¯å¼¹å¥çš„éŸ³ç¬¦çš„ MIDI ç¼–å·ã€‚**åŠ›åº¦**æ˜¯å¼¹å¥éŸ³ç¬¦çš„åŠ›åº¦ã€‚**

**å…³äº MIDI ç¼–å·å’ŒéŸ³ç¬¦åç§°ä¹‹é—´çš„å…³ç³»ï¼Œå¯ä»¥å‚è€ƒä¸‹å›¾:**

**![](img/08cb7f38c8a93a112f4126839f22aa66.png)**

**Image 4 : Midi Number with the Note Name. Taken from [https://newt.phys.unsw.edu.au/jw/notes.html](https://newt.phys.unsw.edu.au/jw/notes.html)**

## **è¯»å– Midi æ–‡ä»¶**

**æˆ‘ä»¬å°†æˆæ‰¹è¯»å– midi æ–‡ä»¶ã€‚è¿™æ˜¯æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨ *pretty_midi* è¯»å–å®ƒ:**

```
midi_pretty_format = pretty_midi.PrettyMIDI('song.mid')
```

**æˆ‘ä»¬ä¼šå¾—åˆ°`PrettyMidi`çš„å¯¹è±¡ã€‚**

## **é’¢ç´å·å¸˜çª—é˜µåˆ—é¢„å¤„ç†**

**![](img/a06a30921e8a96d12eaaa0a0153b9879.png)**

**Image 5 : PrettyMidi to Piano Roll Array**

**å¯¹äºæœ¬æ–‡ï¼Œæˆ‘ä»¬éœ€è¦ä»ä¹å™¨ä¸­æå–éŸ³ä¹çš„æ‰€æœ‰éŸ³ç¬¦ã€‚è®¸å¤š MIDI æ–‡ä»¶çš„éŸ³ä¹ä¸­æœ‰å¤šç§ä¹å™¨ã€‚åœ¨æˆ‘ä»¬çš„æ•°æ®é›†ä¸­ï¼ŒMIDI æ–‡ä»¶åªåŒ…å«ä¸€ç§ä¹å™¨ï¼Œå³é’¢ç´ã€‚æˆ‘ä»¬å°†ä»é’¢ç´ä¹å™¨ä¸­æå–éŸ³ç¬¦ã€‚ä¸ºäº†ä½¿å®ƒæ›´å®¹æ˜“ï¼Œæˆ‘ä»¬å°†æå–æ¯ç§’æ‰€éœ€å¸§çš„ç¬”è®°ã€‚`pretty_midi`æœ‰ä¸€ä¸ªæ–¹ä¾¿çš„å‡½æ•°`get_piano_roll`æ¥è·å–`(notes, time)`ç»´æ•°ç»„ä¸­äºŒè¿›åˆ¶ 2D numpy.array çš„æ³¨é‡Šã€‚`notes`é•¿åº¦ä¸º 128ï¼Œ`time`è·ŸéšéŸ³ä¹çš„æŒç»­æ—¶é—´é™¤ä»¥ FPSã€‚**

**æºä»£ç æˆ‘ä»¬æ˜¯å¦‚ä½•åšåˆ°çš„:**

```
midi_pretty_format = pretty_midi.PrettyMIDI(midi_file_name)
piano_midi = midi_pretty_format.instruments[0] # Get the piano channels
piano_roll = piano_midi.get_piano_roll(fs=fs)
```

## **å¯¹æ—¶é—´å’Œç¬”è®°å­—å…¸è¿›è¡Œé¢„å¤„ç†**

**![](img/fac10e68e874784db4556903b245a53c.png)**

**Image 6 : Piano Roll Array to Dictionary**

**å½“æˆ‘ä»¬å¾—åˆ°é’¢ç´å·é¦–çš„æ•°ç»„åï¼Œæˆ‘ä»¬æŠŠå®ƒä»¬è½¬æ¢æˆå­—å…¸ã€‚å­—å…¸å°†ä»å¼¹å¥éŸ³ç¬¦çš„æ—¶é—´å¼€å§‹ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸Šé¢çš„å›¾ç‰‡ä¸­ï¼Œæˆ‘ä»¬ä» 28 å¼€å§‹(å¦‚æœæˆ‘ä»¬è½¬æ¢åˆ°ç¬¬äºŒï¼Œå‡è®¾æˆ‘ä»¬ä»¥ 5 fps è½¬æ¢åˆ° piano_rollï¼ŒéŸ³ä¹åœ¨ 5.6 ç§’å¼€å§‹æ’­æ”¾å®ƒçš„éŸ³ç¬¦ï¼Œè¿™å¯ä»¥é€šè¿‡ 28 é™¤ä»¥ 5 å¾—åˆ°)ã€‚**

**åˆ›å»ºå­—å…¸åï¼Œæˆ‘ä»¬å°†æŠŠå­—å…¸çš„å€¼è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚ä¾‹å¦‚:**

```
array([49,68]) => '49,68'
```

**ä¸ºæ­¤ï¼Œæˆ‘ä»¬åº”è¯¥å¾ªç¯å­—å…¸çš„æ‰€æœ‰é”®å¹¶æ›´æ”¹å…¶å€¼:**

```
for key in dict_note:
    dict_note[key] = ','.join(dict_note[key])
```

## **å¯¹å¾…è¾“å…¥éŸ³ç¬¦åˆ—è¡¨å’Œç¥ç»ç½‘ç»œç›®æ ‡è¿›è¡Œé¢„å¤„ç†**

**![](img/56386ceb54a47ace2ac0bba77773d0a4.png)**

**Image 7 : Dictionary to List of Sequences**

**åœ¨æˆ‘ä»¬å¾—åˆ°å­—å…¸åï¼Œæˆ‘ä»¬å°†æŠŠå®ƒè½¬æ¢æˆéŸ³ç¬¦åºåˆ—ï¼Œä½œä¸ºç¥ç»ç½‘ç»œçš„è¾“å…¥ã€‚ç„¶åæˆ‘ä»¬å¾—åˆ°ä¸‹ä¸€ä¸ªæ—¶é—´æ­¥é•¿ä½œä¸ºç¥ç»ç½‘ç»œçš„è¾“å…¥ç›®æ ‡ã€‚**

**![](img/dd5c10ddd3bf1769267279081cccf862.png)**

**Image 8 : Sliding window, taken from : [https://towardsdatascience.com/generating-drake-rap-lyrics-using-language-models-and-lstms-8725d71b1b12](/generating-drake-rap-lyrics-using-language-models-and-lstms-8725d71b1b12)**

**åœ¨æœ¬æ–‡ä¸­ï¼Œåºåˆ—è¡¨çš„**é•¿åº¦ä¸º 50ã€‚è¿™æ„å‘³ç€å¦‚æœæˆ‘ä»¬çš„ fps æ˜¯ 5ï¼Œæˆ‘ä»¬å°†å¾—åˆ°ä¸€ä¸ªåŒ…å« 10 (50 / 5)ç§’æ’­æ”¾æ—¶é—´çš„åºåˆ—ã€‚****

**åˆ—è¡¨ä¸­çš„â€œeâ€è¡¨ç¤ºåœ¨è¿™æ®µæ—¶é—´å†…æ²¡æœ‰éŸ³ç¬¦è¢«æ¼”å¥ã€‚å› ä¸ºæœ‰æ—¶åœ¨æ¯ä¸ªå¼¹å¥éŸ³ç¬¦ä¹‹é—´ä¼šæœ‰è·³è·ƒæˆ–è€…æ²¡æœ‰å¼¹å¥éŸ³ç¬¦ã€‚åœ¨**å›¾ 7** çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä» 43 åˆ° 46 æœ‰ä¸€ä¸ªè·³è·ƒã€‚å¦‚æœæˆ‘ä»¬è½¬æ¢åºåˆ—ï¼Œåºåˆ—åˆ—è¡¨å°†æ˜¯:**

```
[ ... '61,77', '61,77', 'e', 'e', '73' , ...]
```

**æˆ‘ä»¬æ€ä¹ˆåšï¼Ÿæˆ‘ä»¬å°†åœ¨ä¸€æ‰¹éŸ³ä¹ä¸­å¤„ç†éŸ³ç¬¦ã€‚**

**æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª **50** é•¿çš„æ¨æ‹‰çª—ã€‚å¯¹äºéŸ³ä¹ä¸­çš„ç¬¬ä¸€ä¸ªéŸ³ç¬¦ï¼Œæˆ‘ä»¬å°†åœ¨åˆ—è¡¨ä¸­æ·»åŠ â€œeâ€49 æ¬¡ã€‚ç„¶åå°†å¼€å§‹æ—¶é—´è®¾ç½®ä¸ºå­—å…¸ä¸­çš„ç¬¬ä¸€ä¸ªæ—¶é—´æ­¥é•¿ã€‚åœ¨**å›¾ 7** ä¸­çš„ä¾‹å­ä¸­ï¼Œæ˜¯ **28** ã€‚ç„¶åï¼Œæˆ‘ä»¬æ·»åŠ éŸ³ä¹ä¸­çš„ç¬¬ä¸€ä¸ªéŸ³ç¬¦(ä¾‹å¦‚â€œ77â€)ã€‚**

**ç„¶åï¼Œå¯¹äºä¸‹ä¸€ä¸ªå®ä¾‹ï¼Œæˆ‘ä»¬å°†çª—å£æ»‘åŠ¨ä¸€æ¬¡ï¼Œå°†â€œeâ€è¿½åŠ åˆ°åˆ—è¡¨ä¸­ 48 æ¬¡ï¼Œè¿½åŠ åœ¨æ—¶é—´æ­¥é•¿ 28 ä¸­æ’­æ”¾çš„éŸ³ç¬¦ï¼Œåœ¨æ—¶é—´æ­¥é•¿ 29 ä¸­è¿½åŠ éŸ³ç¬¦ï¼Œå¹¶é‡å¤ï¼Œç›´åˆ°éŸ³ä¹ç»“æŸ**ã€‚****

**å¯¹äºä¸‹ä¸€é¦–éŸ³ä¹ï¼Œæˆ‘ä»¬é‡å¤ä¸Šè¿°è¿‡ç¨‹ã€‚**

**è¿™æ˜¯æºä»£ç :**

## **åˆ›å»ºç¬”è®°æ ‡è®°å™¨**

**åœ¨æˆ‘ä»¬æ·±å…¥ç ”ç©¶ç¥ç»ç½‘ç»œä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»åˆ›å»ºæ ‡è®°åŒ–å™¨ï¼Œå°†é¡ºåºç¬”è®°è½¬æ¢ä¸ºç¬”è®°çš„é¡ºåºç´¢å¼•ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åº”è¯¥å°†ç¥¨æ®æ˜ å°„åˆ°ä¸€ä¸ªè¡¨ç¤ºç¥¨æ® id çš„ç´¢å¼•ä¸­ã€‚**

**ä¾‹å¦‚:**

```
{
'61,77' : 1, # 61,77 will be identified as 1
'e' : 2,
'73' : 3,
.
.
}
```

**å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬ä¹‹å‰çš„è¾“å…¥å¦‚ä¸‹:**

```
[ ... , '61,77', '61,77', 'e', 'e', '73' , ...]
```

**æˆ‘ä»¬å°†å…¶è½¬æ¢ä¸º:**

```
[ ... 1, 1, 2, 2, 3 , ...]
```

**è¿™æ˜¯æˆ‘ä»¬çš„åšæ³•ã€‚**

**æ€»ç»“æˆ‘ä»¬çš„é¢„å¤„ç†å‡½æ•°ï¼Œä¸‹é¢æ˜¯æˆ‘ä»¬å°†ä½¿ç”¨çš„å‡½æ•°:**

# **ç«è½¦æ¨¡å‹**

**åœ¨æˆ‘ä»¬äº†è§£å¦‚ä½•ä½¿ç”¨ Tensorflow v2.0 çš„æ–°åŠŸèƒ½è¿›è¡Œè®­ç»ƒä¹‹å‰ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä¸‹æ¶æ„:**

## **ç¥ç»ç½‘ç»œä½“ç³»ç»“æ„**

**![](img/c7f3cac33e06da3f463b184794ddc996.png)**

**Image 9 : Our Neural Network Architecture**

**å› æ­¤ï¼Œæ·±åº¦å­¦ä¹ æ¶æ„å°†ä½¿ç”¨ 3 å±‚é—¨æ§é€’å½’å•å…ƒ(GRUï¼Œé€’å½’ç¥ç»ç½‘ç»œçš„ä¸€ç§å˜ä½“)å’Œä¸€äº›è‡ªæˆ‘å…³æ³¨å±‚ã€‚ä½¿ç”¨ä¸¢å¼ƒæ˜¯ä¸ºäº†ä½¿ç¥ç»ç½‘ç»œä¸ä¼šè¿‡æ‹Ÿåˆå¾—å¤ªå¿«ã€‚**

**å¯¹äºè‡ªæˆ‘å…³æ³¨å±‚ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨[è¿™ä¸ª](https://github.com/CyberZHG/keras-self-attention)å­˜å‚¨åº“å¹¶ç¨åŠ ç¼–è¾‘ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥åœ¨ Tensorflow v2.0 ä¸Šä½¿ç”¨å®ƒã€‚**

****ä»£ç :****

## **åŸ¹å…»**

**æˆ‘ä»¬å°†é€šè¿‡è¿­ä»£æ•°æ®é›†ä¸­çš„ä¸€äº›éŸ³ä¹æ¥æ›´æ–°æ¨¡å‹çš„æƒé‡ï¼Œå¹¶å¦‚ä¸Šæ‰€è¿°å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†ä¸€æ‰¹å®ä¾‹ä¸­çš„ä¸€äº›å®ä¾‹ä½œä¸ºç¥ç»ç½‘ç»œçš„è¾“å…¥å’Œç›®æ ‡ã€‚**

**æˆ‘ä»¬å°†ä½¿ç”¨`GradientTape`æ¥æ›´æ–°ç¥ç»ç½‘ç»œçš„æƒé‡ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬è®¡ç®—æŸè€—ï¼Œå¹¶ä½¿ç”¨`apply_gradients` å¯¹å…¶è¿›è¡Œåå‘ä¼ æ’­ã€‚å¦‚æœä½ ç†Ÿæ‚‰ PyTorch çš„ä½¿ç”¨ï¼Œè¿™å°±æ˜¯ Pytorch è®­ç»ƒç¥ç»ç½‘ç»œæ¨¡å‹çš„æ–¹æ³•ã€‚**

**ç¡®ä¿åœ¨åŠŸèƒ½ä¸Šä½¿ç”¨`@tf.function`ã€‚è¿™æ ·å¯ä»¥æŠŠåŠŸèƒ½è½¬æ¢æˆäº²ç¬”ç­¾åï¼Œè®©æˆ‘ä»¬çš„è®­ç»ƒæ›´å¿«ã€‚`tf.function`çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯ä¸èƒ½ä½¿ç”¨ä¸åŒå¤§å°çš„æ‰¹æ¬¡ä½œä¸ºç¥ç»ç½‘ç»œçš„è¾“å…¥ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬çš„æ‰¹é‡æ˜¯ 64ã€‚å¦‚æœæ•°æ®é›†çš„å¤§å°æ˜¯ 70ï¼Œæœ€åä¸€æ‰¹å°†åŒ…å« 6 ä¸ªå®ä¾‹ã€‚è¿™å°†å‘ç¨‹åºæŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸ºå›¾å½¢å°†å…·æœ‰ä¸åˆå§‹å›¾å½¢ä¸åŒå¤§å°çš„è¾“å…¥ã€‚ä¹Ÿè®¸å®ƒçš„å·¥ä½œåŸç†æ˜¯é€šè¿‡ä½¿ç”¨å‡½æ•°æ—¶çœ‹åˆ°ç¬¬ä¸€ä¸ªè¾“å…¥æ¥åˆ›å»ºå ä½ç¬¦ã€‚**

**åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ 16 ä¸ª`BATCH_SONG` å’Œ 96 ä¸ª`BATCH_NNET_SIZE`ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å°†ä»æ‰€æœ‰éŸ³ä¹åˆ—è¡¨ä¸­é€‰å– 16 é¦–éŸ³ä¹ï¼Œç„¶åæå–å…¶åºåˆ—ã€‚ç„¶åå¯¹äºç¥ç»ç½‘ç»œä¸­çš„æ¯ä¸€æ­¥ï¼Œæˆ‘ä»¬ä»æå–çš„åºåˆ—å®ä¾‹ä¸­å– 96 ä¸ªåºåˆ—ä½œä¸ºç¥ç»ç½‘ç»œçš„è¾“å…¥å’Œç›®æ ‡ã€‚**

**ä»£ç å¦‚ä¸‹æ‰€ç¤º:**

# **æ¨ç†å¹¶ç”Ÿæˆ MIDI æ–‡ä»¶**

**![](img/a24e2b3d7d340d717a1bfdb3aa5c5dae.png)**

**Image 10 : Inference and Generate MIDI files**

**ä½¿ç”¨æˆ‘ä»¬è®­ç»ƒè¿‡çš„ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ç”Ÿæˆ MIDI æ–‡ä»¶:**

**æˆ‘ä»¬éœ€è¦ä»ä¸€å¼€å§‹å°±åšå‡ºé€‰æ‹©:**

1.  **æˆ‘ä»¬éšæœºç”Ÿæˆ 50 ä¸ªéŸ³ç¬¦ä½œä¸ºéŸ³ä¹çš„å¼€å§‹ã€‚**
2.  **æˆ‘ä»¬ä½¿ç”¨ 49 ä¸ªç©ºæ³¨é‡Š(' e ')ï¼Œåè·Ÿæˆ‘ä»¬é€‰æ‹©çš„å¼€å§‹æ³¨é‡Š(ä¾‹å¦‚' 72 'ï¼Œç¡®ä¿æ³¨é‡Šåœ¨ NoteTokenizer ä¸­)ã€‚**

**![](img/df01477061211978053e30e43ca0c04b.png)**

**Image 11 : Visualization on how the generator works**

**åœ¨æˆ‘ä»¬é€‰æ‹©äº†éŸ³ä¹ç”Ÿæˆå™¨çš„*ç§å­*ä¹‹åï¼Œæˆ‘ä»¬ä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹æ ¹æ® 50 ä¸ªéšæœºéŸ³ç¬¦é¢„æµ‹ä¸‹ä¸€ä¸ªéŸ³ç¬¦ã€‚æˆ‘ä»¬ç”¨é¢„æµ‹å€¼ä½œä¸ºéšæœºé€‰æ‹©éŸ³ç¬¦çš„æ¦‚ç‡åˆ†å¸ƒã€‚æˆ‘ä»¬è¿™æ ·åšï¼Œç›´åˆ°æŒ‡å®šæˆ‘ä»¬æƒ³è¦çš„æœ€å¤§åºåˆ—é•¿åº¦ã€‚ç„¶åæˆ‘ä»¬æ”¾ä¸‹å‰ 50 ä¸ªéŸ³ç¬¦ã€‚**

**åœ¨æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªéŸ³ç¬¦åºåˆ—åˆ—è¡¨åï¼Œæˆ‘ä»¬å°†å†æ¬¡å°†å…¶è½¬æ¢ä¸ºé’¢ç´å·å¸˜çª—æ•°ç»„ã€‚ç„¶åå°†å…¶è½¬æ¢ä¸º PrettyMidi å¯¹è±¡ã€‚**

**ä¹‹åï¼Œæˆ‘ä»¬è°ƒæ•´éŸ³ä¹çš„é€Ÿåº¦å’ŒèŠ‚å¥ï¼Œæœ€ç»ˆç”Ÿæˆ MIDI æ–‡ä»¶ã€‚**

**ä»£ç :**

**è¿™æ˜¯å¦‚ä½•ä»ç”Ÿæˆçš„éŸ³ç¬¦ç¼–å†™ midi æ–‡ä»¶:**

# **ç»“æœ**

**å½“æˆ‘åšçš„æ—¶å€™ï¼Œè®­ç»ƒèŠ±äº† 1 ä¸ªå°æ—¶ 1 ä¸ªçºªå…ƒã€‚å½“æˆ‘è¿™æ ·åšçš„æ—¶å€™ï¼Œæˆ‘å†³å®šè¿è¡Œ 4 ä¸ªçºªå…ƒ(4 å°æ—¶)çš„è®­ç»ƒã€‚**

**æ ¹æ®ç»è¿‡ 4 ä¸ªæ—¶æœŸè®­ç»ƒçš„æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ç»“æœ:**

****éšæœºç”Ÿæˆ 50 å¼ çº¸å¸****

**Sound 2**

**Sound 3**

****ä»ä¸€ä¸ªéŸ³ç¬¦ç”Ÿæˆ****

**Sound 4**

**Sound 5**

**(æ³¨æ„ï¼Œè¿™äº›æ˜¯ä» MIDI æ–‡ä»¶è½¬æ¢è€Œæ¥çš„ mp3 æ–‡ä»¶ã€‚æˆ‘ç”¨åœ¨çº¿è½¬æ¢å™¨åšåˆ°è¿™ä¸€ç‚¹ã€‚è¿™ä»½ç¬”è®°ä¼¼ä¹æœ‰ç‚¹ä¸åŸä½œ*çš„*ä¸ç¬¦ã€‚å¦‚æœä½ æƒ³å¬çš„è¯ï¼Œæˆ‘ä¼šä¸Šä¼ åŸå§‹çš„ MIDIã€‚)**

**è¿™äº›ç”Ÿæˆçš„éŸ³ç¬¦ä¹‹é—´å­˜åœ¨æ˜æ˜¾çš„å·®å¼‚ã€‚å¦‚æœæˆ‘ä»¬ä»ä¸€ä¸ªéŸ³ç¬¦ç”Ÿæˆå®ƒï¼Œå®ƒå°†åœ¨æ¼”å¥éŸ³ç¬¦æ—¶æœ‰ä¸€ä¸ªç¼“æ…¢çš„é€Ÿåº¦å¼€å§‹ã€‚å®ƒä¸åŒäºæˆ‘ä»¬ä» 50 å¼ éšæœºçº¸å¸ä¸­äº§ç”Ÿçš„ã€‚å®ƒæ²¡æœ‰ä¸€ä¸ªç¼“æ…¢çš„å¼€å§‹ã€‚**

**è¿™æ˜¯é€‰æ‹©ä»éšæœºçš„ 50 ä¸ªéŸ³ç¬¦å¼€å§‹çš„éŸ³ä¹çš„æœ€åä¸€ä¸ªåºåˆ—ä¸Šçš„è‡ªæˆ‘æ³¨æ„å—çš„å¯è§†åŒ–:**

****é¦–å…ˆå…³æ³¨****

**![](img/00c463d8acb94915b3e87ad9194386a4.png)**

**Image 12 : First Self Attention**

****ç¬¬äºŒæ³¨æ„****

**![](img/0a9769287b73cbdcdc208c7397c85ef2.png)**

**Image 13 : Second Self Attention**

**æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œç¬¬ä¸€ä¸ªè‡ªæˆ‘æ³¨æ„å—å­¦ä¹ åºåˆ—å®ä¾‹ä¸­çš„æ¯ä¸ªéŸ³ç¬¦è¦å…³æ³¨ä»€ä¹ˆéŸ³ç¬¦ã€‚ç„¶è€Œï¼Œå¯¹äºç¬¬äºŒä¸ªæ³¨æ„å—åº”è¯¥å…³æ³¨ä»€ä¹ˆè¿˜æ²¡æœ‰ç»“æœã€‚æˆ‘ä»¬è¿˜å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœå…¶ä»–éŸ³ç¬¦çš„ä½ç½®ç¦»å½“å‰éŸ³ç¬¦å¾ˆè¿œï¼Œå®ƒå°†ä¸ä¼šèšç„¦åˆ°å½“å‰éŸ³ç¬¦(å›¾åƒ 12 å’Œå›¾åƒ 13 ä¸­çš„é»‘è‰²)ã€‚**

# **ç»“è®º**

**æˆ‘ä»¬å·²ç»å»ºç«‹äº†ä¸€ä¸ªå·¥å…·æ¥ç”ŸæˆåŒ…å«é’¢ç´éŸ³ä¹çš„ MAESTRO æ•°æ®é›†çš„éŸ³ä¹ã€‚æˆ‘ä»¬å¯¹å®ƒè¿›è¡Œé¢„å¤„ç†ï¼Œè®­ç»ƒæˆ‘ä»¬çš„ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œç„¶åç”¨å®ƒç”ŸæˆéŸ³ä¹ã€‚è¿™äº›éŸ³ä¹æ˜¯ MIDI æ ¼å¼çš„ã€‚æˆ‘ä»¬ç”¨ Tensorflow v2.0 æ¥åšã€‚æˆ‘è®¤ä¸º Tensorflow v2.0)çš„ç”¨æˆ·ä½“éªŒæ¯”ä¹‹å‰çš„ç‰ˆæœ¬æ›´å¥½ã€‚**

**æˆ‘ä»¬çš„æ¨¡å‹ç”Ÿæˆçš„éŸ³ä¹ä¹Ÿå¾ˆè¿è´¯ï¼Œå¾ˆå¥½å¬ã€‚å®ƒå¯ä»¥è°ƒæ•´å¦‚ä½•å¼¹å¥éŸ³ç¬¦ã€‚ä¾‹å¦‚:å½“å‘ç”Ÿå™¨ä»ä¸€ä¸ªéŸ³ç¬¦(æ„å‘³ç€å®ƒæ˜¯éŸ³ä¹çš„å¼€å§‹)å¼€å§‹æ—¶ï¼Œå®ƒä»¥æ…¢èŠ‚å¥å¼€å§‹ã€‚**

**æˆ‘ä»¬å¯ä»¥ä¸ºéŸ³ä¹ç”Ÿæˆå™¨å°è¯•ä¸€äº›ä¸œè¥¿ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å¯¹ç”Ÿæˆå•ä¸ªä¹å™¨è¿›è¡Œäº†å®éªŒã€‚å¦‚æœéŸ³ä¹æœ‰å¤šç§ä¹å™¨ä¼šæ€æ ·ï¼Ÿéœ€è¦æœ‰ä¸€ä¸ªæ›´å¥½çš„æ¶æ„æ¥åšè¿™ä»¶äº‹ã€‚æˆ‘ä»¬å¯ä»¥å°è¯•å¤šç§æ–¹æ³•æ¥è¯•éªŒéŸ³ä¹æ•°æ®ã€‚**

# **ç¼–åè®°**

**![](img/20d25500492630f82b682f5fc05a08bd.png)**

**Photo by [Alan Chen](https://unsplash.com/@chzenan?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)**

**è¿™å°±æ˜¯è¿™ç¯‡å…³äºç”Ÿæˆé’¢ç´éŸ³ä¹éŸ³ç¬¦çš„æ–‡ç« ã€‚äº‹å®ä¸Šï¼Œæˆ‘å†™è¿™ç¯‡æ–‡ç« çš„çµæ„Ÿæ¥è‡ªäºæˆ‘çš„ç¬¬ä¸€ç¯‡å…³äºæ·±åº¦å­¦ä¹ çš„æ–‡ç« ï¼Œæ·±åº¦å­¦ä¹ æ˜¯ç”ŸæˆéŸ³ä¹çš„æ­Œè¯ã€‚"ç”ŸæˆéŸ³ä¹ç¬”è®°æ€ä¹ˆæ ·ï¼Ÿ"ã€‚æˆ‘è¯•éªŒäº†ä¸€ä¸‹ï¼Œå¾ˆå¥½â€¦â€¦å®ƒå·¥ä½œäº†ã€‚**

**å¯¹æˆ‘æ¥è¯´ï¼Œåšè¿™ä¸ªå®éªŒæœ‰äº›å›°éš¾ã€‚é¦–å…ˆï¼Œæˆ‘éœ€è¦æœç´¢ä»€ä¹ˆæ ·çš„æ–‡ä»¶æ ¼å¼ä¾¿äºé¢„å¤„ç†å’Œä½œä¸ºç¥ç»ç½‘ç»œçš„è¾“å…¥ã€‚æˆ‘å‘ç° MIDI å¾ˆç®€å•ï¼Œæ–‡ä»¶ä¹Ÿå¾ˆå°ã€‚ç„¶åï¼Œæˆ‘éœ€è¦çŸ¥é“åœ¨ Python ä¸­æœ‰æ²¡æœ‰å¯ä»¥é¢„å¤„ç†æ–‡ä»¶çš„åº“ã€‚æˆ‘æ‰¾åˆ°äº†ä¸¤ä¸ªï¼Œæœ‰`music21` å’Œ`pretty_midi` ï¼Œå®ƒä»¬çš„å­˜å‚¨åº“æ²¡æœ‰è¿‡æœŸã€‚æˆ‘é€‰æ‹©`pretty_midi`ã€‚ä¹Ÿè®¸æ˜¯å› ä¸ºå®ƒçš„åå­—é‡Œæœ‰â€œæ¼‚äº®â€ğŸ˜ã€‚æœ€åï¼Œæˆ‘éœ€è¦æ€è€ƒå¦‚ä½•å¯¹ç¬”è®°è¿›è¡Œé¢„å¤„ç†ã€‚è°¢å¤©è°¢åœ°ï¼Œ`pretty_midi`æœ‰ä¸€ä¸ªæ–¹ä¾¿çš„åŠŸèƒ½`get_piano_roll`è®©å®ƒå˜å¾—æ›´å®¹æ˜“ã€‚**

**æˆ‘ä¹Ÿæ²¡çœ‹è¿‡å¤šå°‘å…³äºéŸ³ä¹çš„ç ”ç©¶è®ºæ–‡ã€‚ä¹Ÿè®¸æœ‰ç ”ç©¶è®ºæ–‡å¯ä»¥è¢«å¤åˆ¶ï¼Œå¯ä»¥åœ¨å®éªŒå®¤é‡Œçœ‹åˆ°ã€‚**

**æˆ‘å¾ˆæŠ±æ­‰ç¼ºä¹å¯¹è‡ªæˆ‘å…³æ³¨å±‚çš„å¯è§†åŒ–ã€‚**

> **æˆ‘æ¬¢è¿ä»»ä½•å¯ä»¥æé«˜æˆ‘è‡ªå·±å’Œè¿™ç¯‡æ–‡ç« çš„åé¦ˆã€‚æˆ‘æ­£åœ¨å­¦ä¹ å†™ä½œå’Œæ·±åº¦å­¦ä¹ ã€‚æˆ‘æ„Ÿæ¿€èƒ½è®©æˆ‘å˜å¾—æ›´å¥½çš„åé¦ˆã€‚ç¡®ä¿ä»¥é€‚å½“çš„æ–¹å¼ç»™å‡ºåé¦ˆğŸ˜„ã€‚**

**åœ¨æˆ‘çš„ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­å†è§ï¼**

**![](img/0ce8ad0f37089b73b9fdfdcf06435689.png)**

**Source : [https://cdn.pixabay.com/photo/2017/07/10/16/07/thank-you-2490552_1280.png](https://cdn.pixabay.com/photo/2017/07/10/16/07/thank-you-2490552_1280.png)**

# **è´®è—å®¤ËŒä»“åº“**

**[](https://github.com/haryoa/note_music_generator) [## haryoa/note_music_generator

### åœ¨ GitHub ä¸Šåˆ›å»ºä¸€ä¸ªå¸æˆ·ï¼Œä¸º haryoa/note_music_generator çš„å¼€å‘åšå‡ºè´¡çŒ®ã€‚

github.com](https://github.com/haryoa/note_music_generator) 

# æ¥æº

[](https://www.pcmag.com/encyclopedia/term/47014/midi) [## ç™¾ç§‘å…¨ä¹¦

### (ä¹å™¨æ•°å­—æ¥å£)ä¸€ç§æ ‡å‡†åè®®ï¼Œç”¨äºåœ¨éŸ³ä¹â€¦

www.pcmag.com](https://www.pcmag.com/encyclopedia/term/47014/midi) [](https://newt.phys.unsw.edu.au/jw/notes.html) [## è®°ä¸‹åç§°ã€MIDI ç¼–å·å’Œé¢‘ç‡

### è®°ä¸‹åç§°ã€MIDI ç¼–å·å’Œé¢‘ç‡

éŸ³ç¬¦åç§°ã€MIDI ç¼–å·å’Œé¢‘ç‡ new . phys . UNSW . edu . au](https://newt.phys.unsw.edu.au/jw/notes.html) [](http://jalammar.github.io/illustrated-transformer/) [## å›¾ç¤ºçš„å˜å‹å™¨

### åœ¨ä¹‹å‰çš„å¸–å­ä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶äº†æ³¨æ„åŠ›â€”â€”ç°ä»£æ·±åº¦å­¦ä¹ æ¨¡å‹ä¸­æ™®éå­˜åœ¨çš„æ–¹æ³•ã€‚æ³¨æ„åŠ›æ˜¯ä¸€ç§â€¦

jalammar.github.io](http://jalammar.github.io/illustrated-transformer/) [](https://github.com/Skuldur/Classical-Piano-Composer) [## æ–¯åº“å°”æœå°”/å¤å…¸é’¢ç´ä½œæ›²å®¶

### åœ¨ GitHub ä¸Šåˆ›å»ºä¸€ä¸ªå¸æˆ·ï¼Œä¸º Skuldur/å¤å…¸é’¢ç´ä½œæ›²å®¶çš„å‘å±•åšå‡ºè´¡çŒ®ã€‚

github.com](https://github.com/Skuldur/Classical-Piano-Composer) [](https://magenta.tensorflow.org/) [## å“çº¢

### ä¸€ä¸ªæ¢ç´¢æœºå™¨å­¦ä¹ åœ¨è‰ºæœ¯å’ŒéŸ³ä¹åˆ›ä½œè¿‡ç¨‹ä¸­çš„ä½œç”¨çš„ç ”ç©¶é¡¹ç›®ã€‚

magenta.tensorflow.org](https://magenta.tensorflow.org/) 

[https://cs224d.stanford.edu/reports/allenh.pdf](https://cs224d.stanford.edu/reports/allenh.pdf)

 [## æœ‰æ•ˆå¼ é‡æµ 2.0 |å¼ é‡æµ|å¼ é‡æµ

### TensorFlow 1 ä¸­å¸¸è§çš„ä½¿ç”¨æ¨¡å¼ã€‚x æ˜¯â€œå¨æˆ¿æ°´æ§½â€ç­–ç•¥ï¼Œæ‰€æœ‰å¯èƒ½çš„è®¡ç®—â€¦

www.tensorflow.org](https://www.tensorflow.org/alpha/guide/effective_tf2)**