<html>
<head>
<title>Writing a Python Package</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写 Python 包</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/writing-a-python-package-561146e53351?source=collection_archive---------16-----------------------#2019-12-10">https://towardsdatascience.com/writing-a-python-package-561146e53351?source=collection_archive---------16-----------------------#2019-12-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4d95" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">对 Python 打包和编写您的第一个 Python 包的世界的温和介绍。</h2></div><p id="cc94" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">几年前当我键入<code class="fe le lf lg lh b">pip install opencv-python</code>时，几秒钟过去了，神奇的事情发生了——我能够使用 OpenCV 不需要从源代码构建它，不需要编译器，这绝对是惊人的。我可以安装任何我想要的包，而不用担心编译它的源代码/安装或配置系统变量。</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi li"><img src="../Images/74daf1375c4de9c01373744045bd3e9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B-cxcQPp04cuaqaYHwGikg.png"/></div></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk">Python Packaging</figcaption></figure><p id="8152" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这些年来，我继续使用 pip，每次都让我着迷。这真的让我想知道一项技术可以有多简单。作为一名 Windows 用户，每次我安装新东西时，我都必须配置系统路径。所以这绝对让我的生活更简单了。</p><p id="d0c9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">几个月前，我决定编写自己的 python 包。我一直觉得图形很有趣，并决定编写一个完整的图形库，于是我开始编写<a class="ae ly" href="https://github.com/chinmayshah99/grapho" rel="noopener ugc nofollow" target="_blank"> Grapho(这是正在进行的工作)</a>。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="d9b2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">目录中的所有文件总是可以导入同一模块中的文件。但是，如果您想让您的模块在整个系统中都可用，该怎么办呢？</p><p id="d5b8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">&gt;<em class="mg">你添加一个 setup.py 到你的模块中(当然有相关的配置)。</em></p><p id="3390" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是，如果您希望 python 包对全球每个人都可用，该怎么办呢？</p><p id="35c4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你在 PyPI 上发布你的包。(所以大家可以 <code class="fe le lf lg lh b"><em class="mg">pip install your-package-name</em></code> <em class="mg"> ) </em></p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="8a54" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">说够了，我们来写点代码吧。我们先写一个简单的函数，然后打包。</p><p id="016e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="mg"> # hello.py </em></p><pre class="lj lk ll lm gt mh lh mi mj aw mk bi"><span id="f22a" class="ml mm it lh b gy mn mo l mp mq">def heythere():</span><span id="a8e4" class="ml mm it lh b gy mr mo l mp mq">  print("hey there")</span></pre><p id="7fc5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="mg"> # setup.py </em></p><pre class="lj lk ll lm gt mh lh mi mj aw mk bi"><span id="b30f" class="ml mm it lh b gy mn mo l mp mq">#!/usr/bin/env python</span><span id="fdc1" class="ml mm it lh b gy mr mo l mp mq"># -*- coding: utf-8 -*-</span><span id="8bf0" class="ml mm it lh b gy mr mo l mp mq">from setuptools import setup, find_packages</span><span id="7870" class="ml mm it lh b gy mr mo l mp mq">setup(</span><span id="b4bb" class="ml mm it lh b gy mr mo l mp mq">  author="Chinmay Shah",</span><span id="ddf5" class="ml mm it lh b gy mr mo l mp mq">  author_email='chinmayshah3899@gmail.com',</span><span id="e8aa" class="ml mm it lh b gy mr mo l mp mq">  classifiers=[</span><span id="79f3" class="ml mm it lh b gy mr mo l mp mq">    'License :: OSI Approved :: MIT License',</span><span id="1d04" class="ml mm it lh b gy mr mo l mp mq">    'Programming Language :: Python :: 3.7',</span><span id="0ecb" class="ml mm it lh b gy mr mo l mp mq">  ],</span><span id="e761" class="ml mm it lh b gy mr mo l mp mq">  description="Says hello",</span><span id="c695" class="ml mm it lh b gy mr mo l mp mq">  license="MIT license",</span><span id="c850" class="ml mm it lh b gy mr mo l mp mq">  include_package_data=True,</span><span id="32b6" class="ml mm it lh b gy mr mo l mp mq">  name='hello',</span><span id="c85f" class="ml mm it lh b gy mr mo l mp mq">  version='0.1.0',</span><span id="fdf2" class="ml mm it lh b gy mr mo l mp mq">  zip_safe=False,</span><span id="4b9c" class="ml mm it lh b gy mr mo l mp mq">)</span></pre><p id="800e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Setup.py 是 pip 在给定目录中查找的内容。它使用一种叫做 setuptools[1]的东西来实现打包。它包含软件包的名称、软件包的简要描述以及作者信息。不要忘记提到它是为哪个 python 版本制作的。所有这些元数据都很重要。</p><p id="0382" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">看起来简单？让我们试试这个东西。让我们安装它— <code class="fe le lf lg lh b">pip install .</code></p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi ms"><img src="../Images/3bf57fde9e2c18d3589df608c0484884.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*tarS2TiNOJp4zkPNMinnyQ.png"/></div></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk">Installing your Package</figcaption></figure><p id="c73f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是我说它安装它是什么意思呢？</p><ol class=""><li id="7e44" class="mt mu it kk b kl km ko kp kr mv kv mw kz mx ld my mz na nb bi translated">首先，它创建了一个轮子。whl)文件；这是用于包分发的可接受文件。</li><li id="2e33" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">在安装过程中，它使用这个 wheel 文件，安装在<code class="fe le lf lg lh b">site-package </code>目录下(Anaconda 使用这个)。</li><li id="42a7" class="mt mu it kk b kl nc ko nd kr ne kv nf kz ng ld my mz na nb bi translated">如果从互联网下载，通常会在<code class="fe le lf lg lh b">pkgs</code>文件夹中创建一个本地缓存。</li></ol><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nh"><img src="../Images/609393645af546a6890c63cab843c0f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UDDon6jtVKbjFQxoY7QMsw.png"/></div></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk">Running the installed module</figcaption></figure><h2 id="48b1" class="ml mm it bd ni nj nk dn nl nm nn dp no kr np nq nr kv ns nt nu kz nv nw nx ny bi translated">但是什么是<code class="fe le lf lg lh b">pip</code>？</h2><p id="d1e9" class="pw-post-body-paragraph ki kj it kk b kl nz ju kn ko oa jx kq kr ob kt ku kv oc kx ky kz od lb lc ld im bi translated">pip 是 Python 的一个包安装程序，用来安装(主要)来自 PyPI(Python 包索引)的包。作为<code class="fe le lf lg lh b">easyinstall</code>的升级版于 2008 年推出，尽管两者都是基于<code class="fe le lf lg lh b">setuptools</code>构建的。[1]</p><p id="6f58" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">PyPI 是一个巨大的包索引，任何人都可以提交他们的包，全球的任何人都可以做<code class="fe le lf lg lh b">pip install your-package-name</code>。</p><p id="a237" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请关注下一篇文章，在那里我将介绍如何编写包以及如何在 PyPI 上发布它。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="0839" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有什么想法吗？在<a class="ae ly" href="https://twitter.com/chinmayshah899" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae ly" href="https://www.linkedin.com/in/chinmayshah99/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>或<a class="ae ly" href="mailto:chinmayshah3899@gmail.com" rel="noopener ugc nofollow" target="_blank">电子邮件</a>上联系。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="a4cc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">参考:</p><p id="9c82" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">[1]设置工具—<a class="ae ly" href="https://setuptools.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">https://setuptools.readthedocs.io/en/latest/</a></p></div></div>    
</body>
</html>