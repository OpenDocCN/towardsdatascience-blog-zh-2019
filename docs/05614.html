<html>
<head>
<title>Data-Driven Decisions for Where to Park in SF</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据驱动的在旧金山哪里停车的决策</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-driven-decisions-for-where-to-park-in-sf-98f96ae0a63a?source=collection_archive---------24-----------------------#2019-08-17">https://towardsdatascience.com/data-driven-decisions-for-where-to-park-in-sf-98f96ae0a63a?source=collection_archive---------24-----------------------#2019-08-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/74bae079bca397f1b79e32524439d581.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XeOiwR1AoXEl7hlk"/></div></div></figure><p id="4aed" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你有没有觉得在阴凉的地方停车不确定？特别是，您是否曾经在旧金山停车，并想知道，如果我测量 SFPD 去年记录的每起车辆事故的平均平方反比距离，我当前的位置会落在哪个百分点？</p><p id="4b61" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果是这样，我们为那个开发了一个应用<a class="ae kz" href="https://rockset.com/sf-parking" rel="noopener ugc nofollow" target="_blank">。在本帖中，我们将解释我们的方法及其实现。</a></p><h1 id="5164" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">旧金山停车</h1><p id="d854" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">众所周知，与车辆相关的入室盗窃和盗窃在旧金山<a class="ae kz" href="https://www.nbcbayarea.com/news/local/Breaking-Point-475109113.html" rel="noopener ugc nofollow" target="_blank">司空见惯。就在上周，价值 50 万美元的物品在</a><a class="ae kz" href="https://abc7news.com/sf-community-reacts-to-police-response-over-car-burglary-with-celebrity-victim/5465666/" rel="noopener ugc nofollow" target="_blank">一起高调的汽车盗窃案</a>中被盗。甚至还有一个<a class="ae kz" href="https://twitter.com/sfcarbreakins" rel="noopener ugc nofollow" target="_blank">推特账号</a>追踪事件。</p><p id="839c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">旧金山警察局维护着自 2018 年 1 月 1 日以来所有事件的持续<a class="ae kz" href="https://data.sfgov.org/Public-Safety/Police-Department-Incident-Reports-2018-to-Present/wg3w-h783" rel="noopener ugc nofollow" target="_blank">数据集(还有一个</a><a class="ae kz" href="https://data.sfgov.org/Public-Safety/Police-Department-Incident-Reports-Historical-2003/tmnf-yvry" rel="noopener ugc nofollow" target="_blank">2003-2018</a>)。《旧金山纪事报》由此创造了一个<a class="ae kz" href="https://projects.sfchronicle.com/trackers/sf-car-breakins/" rel="noopener ugc nofollow" target="_blank">巨大的地图可视化</a>来追踪非法闯入。我们希望让这些数据更具可操作性，以帮助实时评估特定位置的停车安全性。</p><p id="546e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">因此，激励性的问题是:如果我想在旧金山停车，我怎么能感觉到我现在的位置有多安全？</p><h1 id="b44c" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">定义风险分值</h1><p id="71d4" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">当然，停车位的风险可以用许多不同的定性和定量方法来衡量。我们选择了一个量化指标，无可否认是相当武断的，作为过去一年中停车地点和每个闯入地点之间距离的平均平方反比。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi md"><img src="../Images/98b5391a80f4dfaae0d1e9d017cb6c78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AG1Uz0rpqYF0L8Wo.png"/></div></div></figure><p id="aa5e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这只是给出一个数字分数。然后，我们评估整个旧金山停车点代表性样本的得分，并将当前停车点置于该样本中的百分位数。分数越高，地点离历史事件越近(距离的倒数)，风险就越高。</p><p id="c34d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们将把这一切都包装在一个简单的移动网络应用程序中，这样你就可以从你的车上打开它，按下一个按钮，就可以得到你的停车位有多安全的百分比。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mi"><img src="../Images/1ded0f57280f87e4ba6c0cc8ba6f34f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9OK3AvTJc1709uid.png"/></div></div></figure><p id="a60c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，我们只需使用数据来计算风险分值百分比。对于此任务，我们将把 SFPD 数据加载到 Rockset 集合中，并在用户单击按钮时查询它。</p><h1 id="a3c9" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">加载数据</h1><p id="1c35" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">为了快速开始，我们将简单地下载 CSV 格式的数据，并将文件上传到一个新的集合中。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mj"><img src="../Images/ce3f979e29a3ede0825fc4c870b52be9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pIgYzcxEAsanD4hw.png"/></div></div></figure><p id="2b39" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">稍后，我们可以设置一个定期作业，通过 API 将数据集转发到集合中，以便它总是保持最新。</p><h1 id="d2e5" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">过滤数据</h1><p id="3d61" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">让我们切换到 query 选项卡，尝试编写一个查询来过滤我们关心的事件。我们要检查几个条件:</p><ul class=""><li id="07d6" class="mk ml it kd b ke kf ki kj km mm kq mn ku mo ky mp mq mr ms bi translated"><strong class="kd iu">车辆相关事故。</strong>每个事件都有一个由警察局犯罪分析股指定的“事件子类别”。我们在这个字段上做一个<code class="fe mt mu mv mw b">SELECT DISTINCT</code>查询，扫描结果，挑选出我们认为与车辆相关的。</li></ul><blockquote class="mx my mz"><p id="3035" class="kb kc na kd b ke kf kg kh ki kj kk kl nb kn ko kp nc kr ks kt nd kv kw kx ky im bi translated">机动车辆盗窃</p><p id="f125" class="kb kc na kd b ke kf kg kh ki kj kk kl nb kn ko kp nc kr ks kt nd kv kw kx ky im bi translated">机动车辆盗窃(未遂)</p><p id="b3d1" class="kb kc na kd b ke kf kg kh ki kj kk kl nb kn ko kp nc kr ks kt nd kv kw kx ky im bi translated">车内盗窃</p><p id="366d" class="kb kc na kd b ke kf kg kh ki kj kk kl nb kn ko kp nc kr ks kt nd kv kw kx ky im bi translated">盗窃罪—汽车零部件</p><p id="61ad" class="kb kc na kd b ke kf kg kh ki kj kk kl nb kn ko kp nc kr ks kt nd kv kw kx ky im bi translated">盗窃——从车辆中</p></blockquote><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ne"><img src="../Images/4e877b8df41b52a8538aff551655aa4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SX54HRn2QG8E1DRc.png"/></div></div></figure><ul class=""><li id="79bc" class="mk ml it kd b ke kf ki kj km mm kq mn ku mo ky mp mq mr ms bi translated"><strong class="kd iu">初次报告。</strong>根据<a class="ae kz" href="https://data.sfgov.org/Public-Safety/Police-Department-Incident-Reports-2018-to-Present/wg3w-h783" rel="noopener ugc nofollow" target="_blank">数据文档</a>，记录一旦归档就无法编辑，因此一些记录作为现有事件的“补充”归档。我们可以通过在报告类型描述中查找单词“Initial”来过滤掉它们。</li></ul><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nf"><img src="../Images/c59d4ef555ca3aeb4b803376e8dc214b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4Wv6W6ifURIw5RHe.png"/></div></div></figure><ul class=""><li id="2074" class="mk ml it kd b ke kf ki kj km mm kq mn ku mo ky mp mq mr ms bi translated"><strong class="kd iu">顺丰内部。</strong>文件还规定一些事件发生在旧金山以外，这些事件在“警区”字段中的值为“旧金山以外”。</li></ul><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ne"><img src="../Images/a168458f0bd68f9f283a04404150ce14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4U0qK_yaUmaD4tgX.png"/></div></div></figure><ul class=""><li id="4d7b" class="mk ml it kd b ke kf ki kj km mm kq mn ku mo ky mp mq mr ms bi translated"><strong class="kd iu">去年。</strong>数据集提供了一个日期时间字段，我们可以解析它并确保它在过去 12 个月内。</li></ul><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ng"><img src="../Images/a42e564158b03511a5fef72ef22abed3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*A3yV6MV_5oIKG-Ee.png"/></div></div></figure><ul class=""><li id="31de" class="mk ml it kd b ke kf ki kj km mm kq mn ku mo ky mp mq mr ms bi translated"><strong class="kd iu">地理定位可用。</strong>我们注意到一些行缺少纬度和经度字段，取而代之的是一个空字符串。我们将通过过滤掉这些记录来忽略它们。</li></ul><p id="852a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">将所有这些条件放在一起，我们可以从这个数据集中的 242，012 条记录精简到 28，224 个相关的车辆事故，打包成一个<code class="fe mt mu mv mw b">WITH</code>查询。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nh"><img src="../Images/0cfd59c5fb1c27a3fff1e8dd09702e2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bQ-3JnwD8CJposVM.png"/></div></div></figure><h1 id="f19b" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">计算风险分数，一个点</h1><p id="9c1a" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">现在我们有了去年的所有车辆事故，让我们看看是否可以计算旧金山市政厅的安全分数，该市政厅的纬度为 37.7793 N，经度为 122.4193 W。</p><p id="f9f0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">使用一些古老的数学技巧(半径乘以弧度角度得到弧长，将弧长近似为直线距离，以及毕达哥拉斯定理)，我们可以计算到每个过去事件的英里距离:</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nh"><img src="../Images/81173ab0a1a1baa72ae5a48d5193afe7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-x_L3cH7JYjjqMTM.png"/></div></div></figure><p id="32a1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们用上面的公式计算这些距离，瞧！</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ni"><img src="../Images/bbd2a38582a5fac972a3b4dc6f071cdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SAy3yVlzIzVTSC7b.png"/></div></div></figure><p id="dd59" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于我们的应用程序，我们将用来自用户浏览器位置的参数替换市政厅的纬度/经度。</p><h1 id="e0d0" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">旧金山停车点示例</h1><p id="972e" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">因此，我们可以计算出一个风险分数——市政厅为 1.63——但这毫无意义，除非我们可以将其与旧金山的其他停车点进行比较。我们需要在旧金山找到一组有代表性的所有可能的停车点，并计算每个停车点的风险分数，以获得风险分数的分布。</p><p id="dea2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">事实证明，SFMTA 正是我们所需要的——进行实地调查来统计路边停车位的数量，他们的结果作为开放数据集发布<a class="ae kz" href="https://data.sfgov.org/Transportation/On-street-Parking-based-on-Parking-Census/9ivs-nf5y" rel="noopener ugc nofollow" target="_blank">。我们也会把这个上传到 Rockset！</a></p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nh"><img src="../Images/b65dd412118ad426e027919837e5e240.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5GpAtou_bzF5Skou.png"/></div></div></figure><p id="a385" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们看看这个数据集包含什么:</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nh"><img src="../Images/0dc8f435388a2951c9c7a5fff3eb1ee0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OVdwDC93RDHq8NdH.png"/></div></div></figure><p id="80ee" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于每条街道，让我们提取纬度/经度值(只是第一个点，足够接近的近似值)、点的计数和唯一标识符(根据需要转换类型):</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nh"><img src="../Images/f4eebff2bccc6c0cb2ff2ec22d3af654.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*s-Oq5PmBsWjqLVlD.png"/></div></div></figure><h1 id="7316" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">计算风险分数，SF 中的每个点</h1><p id="b53b" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">现在，让我们试着计算每个点的分数，就像我们在上面对市政厅所做的一样:</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nh"><img src="../Images/126b24b7b15fc3a7e90b5bc6f3b6fda4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FjPfeUtFbD-7Kmvo.png"/></div></div></figure><p id="5ab3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们做到了！旧金山每个街道段的停车风险分数。这是一个繁重的查询，所以为了减轻负担，我们实际上对每个街道和事件抽取了 5%的样本。</p><p id="6a1c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">(即将推出 Rockset:geo-indexing——在接下来的几周内，请关注关于这方面的博客文章！)</p><p id="6537" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们将这个查询的结果存储在另一个集合中，这样我们就可以用它来计算百分位数。我们首先创建一个新的空集合:</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nj"><img src="../Images/b3a4df94cfe2ae86548edc0e6411c067.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CQyl9wgYIm9IGhbt.png"/></div></div></figure><p id="58c0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们运行一个<code class="fe mt mu mv mw b">INSERT INTO sf_risk_scores SELECT ...</code>查询，对事件和街道进行高达 10%的采样:</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nk"><img src="../Images/2d8b052380bb7b55244a3491d4cd0472.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6qImvgt-N-wBLcrQ.png"/></div></div></figure><h1 id="49b0" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">以百分位数对风险评分进行排序</h1><p id="4365" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">现在，让我们根据插入到<code class="fe mt mu mv mw b">sf_risk_scores</code>中的样本来获取市政厅的百分比。我们保留了最初的停车位分数计算方法，但现在也计算了比当前停车位更安全的采样停车位的百分比。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nh"><img src="../Images/9d23ecf07195a51f8ef4ba7a9404a4b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vcpmo8by_ah1H-XE.png"/></div></div></figure><h1 id="d906" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">停车点风险评分即服务</h1><p id="5b5d" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">现在我们有了一个可以说是有用的查询，让我们把它变成一个应用程序吧！</p><p id="c933" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们将保持简单——我们将创建一个 AWS Lambda 函数来服务两种类型的请求。根据<code class="fe mt mu mv mw b">GET</code>的请求，它将服务于一个本地<code class="fe mt mu mv mw b">index.html</code>文件，该文件充当 UI。对于<code class="fe mt mu mv mw b">POST</code>请求，它将解析<code class="fe mt mu mv mw b">lat</code>和<code class="fe mt mu mv mw b">lon</code>的查询参数，并将它们作为上面最后一个查询中的参数传递。lambda 代码如下所示:</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="0772" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于客户端，我们编写一个脚本来获取浏览器的位置，然后调用后端:</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="e830" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们添加了一些基本的 HTML 元素和样式，它已经准备好了！</p><p id="dd22" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最后，我们添加 API Gateway 作为 lambda 的触发器，并将 Rockset API 密钥放入环境中，这些都可以在 AWS 控制台中完成。</p><h1 id="1763" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">结论</h1><p id="ecab" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">总结一下我们在这里所做的事情:</p><ul class=""><li id="de03" class="mk ml it kd b ke kf ki kj km mm kq mn ku mo ky mp mq mr ms bi translated">我们采用了两个相当简单的数据集——一个是 SPFD 报告的事件，一个是 SFMTA 报告的停车点——并将数据加载到 Rockset 中。</li><li id="c7f6" class="mk ml it kd b ke nn ki no km np kq nq ku nr ky mp mq mr ms bi translated">经过几次 SQL 迭代之后，我们有了一个 API，可以调用它来获取给定地理位置的风险分数。</li><li id="b481" class="mk ml it kd b ke nn ki no km np kq nq ku nr ky mp mq mr ms bi translated">我们在 AWS Lambda 中编写了一些简单的代码，作为移动 web 应用程序。</li></ul><p id="ac01" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">唯一需要的软件是一个 web 浏览器(下载数据，在 Rockset 控制台中查询，在 AWS 控制台中部署)，从构思到生产，总共不到一天就完成了。lambda 的源代码可在<a class="ae kz" href="https://github.com/rockset/recipes/tree/master/sf-parking" rel="noopener ugc nofollow" target="_blank">这里</a>获得。</p><p id="bf0a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你在旧金山停车，请在这里随意试用应用程序<a class="ae kz" href="https://rockset.com/sf-parking" rel="noopener ugc nofollow" target="_blank">。如果不是，请评论你认为哪些现实生活中的决策可以通过更多的数据来改进！</a></p></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><p id="52b6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">【https://rockset.com】最初发表于<a class="ae kz" href="https://rockset.com/blog/data-driven-decisions-realtime-parking-risk-score/" rel="noopener ugc nofollow" target="_blank"><em class="na"/></a><em class="na">。</em></p></div></div>    
</body>
</html>