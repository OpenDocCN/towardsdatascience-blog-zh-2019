<html>
<head>
<title>Getting the Basics of Correlation &amp; Covariance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">获得相关性和协方差的基础知识</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/getting-the-basics-of-correlation-covariance-c8fc110b90b4?source=collection_archive---------3-----------------------#2019-02-25">https://towardsdatascience.com/getting-the-basics-of-correlation-covariance-c8fc110b90b4?source=collection_archive---------3-----------------------#2019-02-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="f1a5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">相关性是广泛使用的统计概念之一。这篇博文试图回答什么是相关性，为什么它如此有用，相关性和协方差有什么关系，以及计算相关性的一些方法。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/ea20ada412939d65285f81194acd0a7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*llx64UbP3Pf0UDpS9wUyoA.jpeg"/></div></div></figure><p id="55fb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">什么是相关性？</strong></p><p id="c410" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">相关性，决定一个变量如何相对于另一个变量移动/变化的统计技术。它给了我们关于这两个变量的相关程度的概念。这是一种双变量分析方法，描述了不同变量之间的关联。在大多数商业活动中，用一个主题与其他主题的关系来表达这个主题是很有用的。</p><p id="1d0a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">例如:如果在产品营销上花很多钱，销售额可能会增加。</p><p id="913b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">它为什么有用？</strong></p><p id="241d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">1.如果两个变量密切相关，那么我们可以从一个变量预测另一个变量。</p><p id="9812" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.相关性在确定其他变量所依赖的重要变量方面起着至关重要的作用。</p><p id="46de" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.它被用作各种建模技术的基础。</p><p id="03ff" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">4.适当的相关性分析有助于更好地理解数据。</p><p id="c18c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">5.相关性有助于理解因果关系(如果有的话)。</p><p id="350f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">相关性和协方差的关系</strong></p><p id="5779" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在深入研究相关性之前，让我们先了解一下协方差。</p><p id="dcb3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">协方差</strong>:前缀‘Co’定义某种联合动作，方差指的是变化或变动。所以它说，两个变量是相关的，基于这些变量，如何改变彼此的关系。</p><p id="2976" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但是等等，协方差和相关性一样吗？</p><p id="884e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因为协方差和相关性有相同的含义，所以相关性比协方差更进一步，也告诉我们关系的强度。</p><p id="ced5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">两者都可以是正面的，也可以是负面的。如果一个增加另一个也增加，协方差为正，如果一个增加另一个减少，协方差为负。</p><p id="c1e4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">协方差计算如下</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi la"><img src="../Images/68171535c3fb719654199351d3a17208.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/format:webp/1*qqCnHrgtFRt0aHWG4v9f_w.png"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Covariance formula</figcaption></figure><p id="b78e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">变量 x 的 Xᵢ=观测点</p><p id="7e28" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所有观察值的 x̅=平均值(x)</p><p id="5cac" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">变量 y 的 Yᵢ=观测点</p><p id="8c28" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ȳ =所有观察值的平均值(y)</p><p id="9204" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">n=观察次数</p><p id="9ab8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">解码协方差公式:</strong>两个变量 x 和 y 之间的协方差是每一项与其各自均值的差的乘积之和除以数据集中的项数减一..</p><p id="45d6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过一个简单的示例数据获得更好的理解:</p><p id="afc9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以下数据显示了相应温度下的客户数量。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/2c4109f0bc3ddea13588d1767ffb886e.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*NR7-VRl2dsjVmBRLOoOkdg.png"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Example to understand correlation and covariance</figcaption></figure><p id="8d34" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先找出两个变量的平均值，用各自的平均值减去每一项，然后按如下方式相乘</p><p id="3747" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">x 的平均值，x̅=(97+86+89+84+94+74)/6 = 524/6 = 87.333</p><p id="4c35" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">y 的平均值，ȳ=(14+11+9+9+15+7)/6 = 65/6 = 10.833</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/9f5cb337859e8e90957b9d43235ce244.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*kB-NKge7JACsFQ3AYbfFeA.png"/></div></figure><p id="c9cb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="lh"> COV </em> ( <em class="lh"> x，y</em>)= 112.33/(6–1)= 112.33/5 = 22.46</p><p id="16e4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">温度和顾客之间的协方差是 22.46。因为协方差是正的，所以温度和顾客数量有正的关系。随着温度的升高，顾客的数量也在增加。</p><p id="d55e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但是这里没有关于这种关系有多强的信息，这就是相关性出现的原因。</p><p id="63d7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">相关系数是指任何相关测量方法的结果。</p><p id="175f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里，样本相关系数计算如下</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi li"><img src="../Images/0faeffe33a4e676d5fd68503945d96b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*R0_7Q9kyagFfRTJyB_pqvw.png"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Correlation formula</figcaption></figure><p id="5840" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="lh"> COV </em> ( <em class="lh"> x，y </em> ) =变量的协方差<em class="lh"> x </em>和<em class="lh">y</em><br/><strong class="js iu">σ</strong><em class="lh">x</em>=变量的样本标准差<em class="lh">x</em><br/><strong class="js iu">σ</strong><em class="lh">y</em>=变量的样本标准差<em class="lh"> y </em></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/0c7f0b64aa1ce5e0a1a28c03bf6ba3a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*8S0QXVPPA7baJ9xPbCKO2A.png"/></div></figure><p id="b542" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">COV(x，y) = 22.46</p><p id="6135" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">σx = 331.28/5=66.25= 8.13</p><p id="511c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">σy = 48.78/5=9.75=3.1</p><p id="c60a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">相关性= 22.46/(8.13 x 3.1)= 22.46/25.20 = 0.8</p><p id="ce9b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">0.8 表示温度和客户数量之间的相关性强度非常强。</p><p id="687c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">样本相关系数可以用来估计总体相关系数。</p><p id="6867" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">存在不同的方法来计算两个对象之间的相关系数。一些方法是:</p><p id="af53" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> 1。</strong> <strong class="js iu">皮尔逊相关系数</strong></p><p id="62cf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它捕捉两个连续变量之间线性关联的强度和方向。它试图通过两个变量的数据点绘制最佳拟合线。皮尔逊相关系数表明这些数据点离最佳拟合线有多远。只有当一个变量的变化与另一个变量的变化成比例时，这种关系才是线性的。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lj"><img src="../Images/30c4f5a238c1c1900509644e93139a5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*kGYLRLxwUqDm7kxaW7-S3Q.png"/></div></div></figure><p id="a436" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">皮尔逊相关系数计算方法为</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/42dca9328e8f98f5745383e329854d23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*7h5-PZDn04g7CsGLP2dm-Q.png"/></div></figure><p id="26e7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">r =皮尔逊相关系数</p><p id="7ee5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">n =观察次数<br/>∑xy = x 和 y 值乘积之和<br/>∑x = x 值之和<br/>∑y = y 值之和<br/>∑x2 = x 值的平方和<br/>∑y2 = y 值的平方和</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ll lm l"/></div></figure><p id="fe74" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">斯皮尔曼相关系数</strong></p><p id="4b84" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它试图确定存在于两个顺序或连续变量之间的单调关系的强度和方向。在单调关系中，两个变量会一起变化，但不会以恒定的速率变化。它是根据变量的排序值而不是原始数据计算出来的。</p><p id="3009" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">单调和非单调关系如下所示:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/3534921f88de1f8081e106c244c437df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*CjXSH0fHaxGRF_wSzgODtQ.png"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/98491fa5250de44a39aa04a17b73d814.png" data-original-src="https://miro.medium.com/v2/resize:fit:280/format:webp/1*Rpxb9dhmOIuvkOYgr5d3lw.png"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Spearman rank correlation coefficient</figcaption></figure><p id="487e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ρ= Spearman 等级相关系数<br/> di=相应变量等级之间的差异<br/> n=观察次数</p><p id="ba61" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">比较:皮尔逊和斯皮尔曼相关系数</strong></p><p id="9de6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Pearson 和 Spearman 相关系数可以取-1 到 1 之间的值。</p><p id="94ad" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> (i) </strong>如果一个变量以一致的速率随另一个变量增加，则皮尔逊系数将为 1，这产生一条完美的线。在这种情况下，斯皮尔曼系数也是 1。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/acffbaca98b36d7a5f208805e25db126.png" data-original-src="https://miro.medium.com/v2/resize:fit:404/format:webp/1*85glgrp1tVkXBkMH1egpLw.png"/></div></figure><p id="0b98" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> (ii) </strong>如果一个变量随着另一个变量增加，但不是以一致的比率增加，那么皮尔逊系数将是正的，但小于 1。在这种情况下，斯皮尔曼系数仍然是 1。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/da724350741a21c0402ffad95aad2885.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/format:webp/1*QMWPXMnKXNKRhhj89rUZUw.png"/></div></figure><p id="e3c7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> (iii) </strong>如果关系是随机的，那么两个系数都将接近 0。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/260f0d1ee52091177470c417eb03a49f.png" data-original-src="https://miro.medium.com/v2/resize:fit:586/format:webp/1*G5Z19iFxRpFdlMSfTpIzuA.png"/></div></figure><p id="ca6c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> (iv) </strong>如果变量之间的关系是一条完美的直线，但关系是递减的，那么两个系数都是-1。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/aa1ca5d18d456038ef6b944b9a76d689.png" data-original-src="https://miro.medium.com/v2/resize:fit:434/format:webp/1*d6DRdWEeL7uygZEHKchOgQ.png"/></div></figure><p id="1990" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> (v) </strong>如果两个变量之间的关系是一个变量减少，而另一个变量增加，但比率不一致，则皮尔逊系数将为负，但大于-1。在这种情况下，斯皮尔曼系数为-1。</p><p id="b15d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">什么时候用什么？</strong></p><p id="c1d2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">皮尔逊相关描述线性关系，斯皮尔曼相关描述单调关系。散点图将有助于可视化数据，并了解应该使用哪个相关系数。另一种方法是同时应用这两种方法并检查哪种方法执行得好。例如，如果结果显示 spearman 相关系数大于 Pearson 系数，这意味着我们的数据具有单调关系，而不是线性的。</p><p id="8284" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此外，相关性并不意味着因果关系。这里看<a class="ae ls" rel="noopener" target="_blank" href="/why-correlation-does-not-imply-causation-5b99790df07e">为什么</a>为什么。</p><p id="2703" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">更多阅读:</p><ol class=""><li id="63b6" class="lt lu it js b jt ju jx jy kb lv kf lw kj lx kn ly lz ma mb bi translated"><a class="ae ls" href="https://365datascience.com/covariance-linear-correlation-coefficient/#close" rel="noopener ugc nofollow" target="_blank">https://365 data science . com/协方差-线性相关系数/#close </a></li><li id="17bc" class="lt lu it js b jt mc jx md kb me kf mf kj mg kn ly lz ma mb bi translated"><a class="ae ls" href="https://www.wallstreetmojo.com/correlation-vs-covariance/" rel="noopener ugc nofollow" target="_blank">https://www.wallstreetmojo.com/correlation-vs-covariance/</a></li></ol></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><p id="312a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感谢阅读！</p></div></div>    
</body>
</html>