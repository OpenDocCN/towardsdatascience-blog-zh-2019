# 贷款偿还的预测空间建模

> 原文：<https://towardsdatascience.com/spatial-loan-repayment-aab75e35996e?source=collection_archive---------23----------------------->

非洲有超过 3 . 5 亿人用不上电。[菲尼克斯国际](https://www.fenixintl.com/)正在通过建造负担得起的租赁到拥有的太阳能家庭系统来解决这个问题。他们提供预先的，灵活的融资。基本的 ReadyPay 太阳能系统为照明和手机充电提供电力，并且可以升级为收音机、电视和炉灶供电。客户支付首付款，将设备带回家，并获得一周的免费电力。然后，他们以小额定期付款的方式还清贷款的剩余部分。如果客户选择不按时付款，系统将被远程锁定。一旦收到付款，客户就会收到解锁设备的代码。通过手机使用移动货币进行支付。一旦客户付清全部设备款项(通常为 24-30 个月)，他们就拥有了设备，并且设备将永久解锁。

菲尼克斯国际拥有超过 50 万客户(250 万受益人)，并发现贷款偿还因地理位置而异。[在我作为](https://www.linkedin.com/in/dwerickson/)Insight Data Science 的研究员期间，我咨询了菲尼克斯，以了解哪些地理位置可以支持他们的融资模式。他们要求:

1.  **使用公开可用数据预测特定地理位置还款的模型**
2.  **预测还款模式的特征列表**

他们将使用这种模式来帮助确定新的扩张领域的优先顺序。他们还将使用特征列表来通知他们的位置筛选。功能列表还将用于确定未来数据收集的优先级，并指导模型扩展。

为了预测还款，我重点关注了**未付款率**——在拥有设备的最初几个月内，由于未付款，设备被锁定的时间比例。通过专注于不支付率，我可以使用机器学习回归来解决提出的问题。

# 数据源

***探究的数据类别:***

> 气候
> 
> 社会经济指标(和其他人口统计数据)
> 
> 教育的
> 
> 电力基础设施

首要任务是找到一些与贷款偿还预测相关的数据源。我收集了气候数据，因为它直接影响太阳能电池板的能源生产。更重要的是，气候对农业有重大影响，而农业是菲尼克斯客户的主要收入来源。我还从 [Twaweza](https://www.twaweza.org/) (通过[人道主义数据交换](https://data.humdata.org/))收集了各种社会经济、人口和教育数据。丰富的数据集包括资产所有权(电话、收音机、电视、自行车、牛)、水源、户主信息(教育、性别)以及每天吃饭的次数等信息。最后，[脸书研究](https://energydata.info/dataset/medium-voltage-distribution-predictive)(通过 [Energydata.info](https://energydata.info/) )有一个关于我探索的电网基础设施的优秀数据集。

# 特征工程

为了使回归模型适合不支付率，我需要构建一个表，其中每一行代表一个位置，每一列代表该位置的特定特性的值。

菲尼克斯以个人账户数据的形式向我提供了包括面积在内的数据。为了将帐户级别的数据转换为空间数据，我采用了一个区内每个帐户的平均不支付率。我放弃了不到十个客户的八个子账户，因为当账户数量如此之低时，不支付率是不可靠的。

为了准备与其他数据集合并的信息，我需要确定每个子县的纬度和经度。我使用了[地理编码器](https://geocoder.readthedocs.io/)来完成这个任务。

来自 WorldClim 的 **气候数据**以完全不同的方式呈现。WorldClim 提供了一百多个 geotiff 文件，每个文件都将特定变量的值编码为映射到地球上特定地理位置的像素。每个文件都编码了一个特定气候变量的信息，例如一月份的最低温度、七月份的降雨量、十一月份的太阳辐射以及生物学上有意义的变量，例如最干燥季度的降雨量。

我使用 [rasterio](https://rasterio.readthedocs.io/en/stable/) 打开 WorldClim 文件。然后，对于菲尼克斯数据集中的每个子县，我使用 rasterio 查找该子县的经度和纬度的对应像素。然后，我可以将编码的气候信息与我的县级未支付率数据合并。

****通过人道主义数据交换获得的社会经济、人口和教育数据**是来自个体户主的调查数据。我对每个县的数据进行了平均。我对分类数据进行了一次性编码，使其适合机器学习。我还必须删除一些会混淆机器学习模型的无关数据，例如子县的标识号。最后，我构建了一些新的特性，比如男性和女性的数量、总人口以及户主的比例。**

****由脸书研究所免费提供的** **电力基础设施(EI)位置数据**，仅仅是纬度和经度的列表。靠近电力基础设施表明替代能源选择、现有能源需求，或许还有区域社会经济。我使用 [geopy](https://geopy.readthedocs.io/en/stable/) 计算每个子区到最近 EI 的距离、到最近 EI 的平均距离以及十公里内 EI 位置的数量。**

# **贷款偿还预测**

**构建要素并合并所有数据集后，我使用它们来预测拒付率。我选择了一个**随机森林回归**模型，因为它可以处理特征空间中的强非线性，对过度拟合具有鲁棒性，可以区分大量特征，并提供关于哪些因素有意义的推断。**

**![](img/1e7cf60df1f427ba98cb65ec395979ab.png)**

**The Random Forest model performs significantly better than the baseline model. The baseline is the naive model that does not discriminate loan repayment geographically.**

**为了量化模型的性能，我与基准模型**进行了比较，基准模型是一个简单的模型，它的预测仅仅是每个案例中的平均不支付率。我的随机森林模型预测的不支付率比基线模型的均方差提高了 20%!菲尼克斯国际公司计划使用这种模式来指导其服务在新地点的推广。由于贷款偿还率是菲尼克斯收入的直接来源，这一改进的预测提供了*重要的* *价值*。****

# **还款率的预测功能**

**最重要的特征是手机拥有率。一般来说，手机拥有率是一个地区社会经济的标志。更多的手机拥有者与更高的还款率相关。更多的手机意味着更多的电力需求，这种电力需求增加了支付太阳能账单的动力。事实上，菲尼克斯太阳能系统的主要用途之一就是手机充电。更多的手机用户也意味着更多的人可以打电话。手机也是主要的支付方式，所以更多的手机拥有者意味着更多的支付机制。**

**![](img/c0373e4001d98ee820cf5e7ad11c431a.png)**

**The most important characteristics for the prediction of loan repayment. The features are color-coded by category.**

**顶级要素列表包含社会经济、气候、教育、人口统计和电力基础设施数据。社会经济因素，如资产所有权和每天吃饭的次数有很强的预测性。与农业相关的气候因素也是如此，如生长季节中期的降水和生物气候变量。教育也是一个重要因素，尤其是母亲的学校教育和英语水平。**

# **结论**

****空间模型可以改善贷款偿还的预测**。菲尼克斯国际将使用我建立的模型来帮助其未来的扩张，因为它的表现明显优于基线。**

**![](img/844b86d341444bd3834c6b57bcca2c5b.png)**

**The model will continue to improve with the addition of more data.**

****我已经列出了最关键的特性和数据类型**。基本因素是社会经济、气候、教育和人口统计。手机和其他资产的所有权是预测信息。与农业相关的天气和教育指标也是如此。**

# **未来方向**

**通过添加新数据，可以立即改进模型；随着测试集性能显著低于训练集性能，学习曲线仍在增长。只有气候的模型可以用免费获得的数据立即扩展。模型的各个方面将需要新的数据集，但更多的数据可以从我使用的相同资源中获得。**

**随着新数据源的加入，该模型可能会得到改进。经济数据，尤其是与农业相关的数据，前景看好。手机使用数据也是如此，如无线网络可用性和移动货币供应商的位置。**