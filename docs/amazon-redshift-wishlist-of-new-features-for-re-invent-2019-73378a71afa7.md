# 亚马逊红移:re:Invent 2019 的新功能愿望清单

> 原文：<https://towardsdatascience.com/amazon-redshift-wishlist-of-new-features-for-re-invent-2019-73378a71afa7?source=collection_archive---------45----------------------->

RedShift 是 AWS 提供的高度可扩展、并行和完全托管的数据仓库产品，也是 AWS 云数据堆栈的关键组件。

AWS 云数据堆栈现在主导着分析领域。

在这里，我列出了一些我希望看到添加到红移的功能，并希望这些功能能够在 re:Invent 2019 及以后公布。

# 透明物化视图

RedShift 目前不支持物化视图。

通常使用临时或永久表来代替它们。这些表也需要用 CREATE 而不是 SELECT 来创建..变成。

对于物化视图，红移可以指优化的表结构(可能是预先连接的表集，或者是预先汇总的视图)，这可以极大地提高查询性能。

透明重写特性会有所帮助，它会在查询时自动使用物化视图代替主表，而不需要更改查询。

# BI 工具的光标支持

使用 BI 工具中声明的游标，整个结果集被提取到 leader 节点的内存中。对于像 Tableau 这样声明多个游标的 BI 工具，这会影响性能。

为了获得更好的 BI 工具性能，更好的光标处理是一个受欢迎的特性。具有数据局部性(排序)和分布(DIST)的游标的具体化，或者游标查询的延迟处理将是非常有利的。

# 多个领导者节点

在当前模型下，如果首节点发生故障，所有连接都会终止，正在进行的查询也会中止。这可能会给 BI 工具的用户带来不好的体验，长时间运行的查询可能会被触发。

我的愿望是允许红移具有多个主节点的能力，具有活动备用，允许透明的连接传输，并且如果可能的话，允许进行中的查询传输。

# 加入重写和文字处理

当编写以下类型的连接时，观察 DEPT.DEPT_NO 上的筛选器与 EMP 筛选器的比较。DEPT _ no . EMP 和 DEPT 的区域图处理方式非常不同。

`SELECT EMP.EMPID, DEPT.DNAME`

`FROM EMP`

`INNER JOIN DEPT ON DEPT.DEPT_NO = EMP.DEPT_NO`

`AND EMP.DEPT_NO = 100;`

处理文字的方式可以改变，如果 DEPT_NO=100 过滤器以相同的方式应用于 EMP 和 DEPT 表，将有助于更快的过滤。如果表按谓词(DEPT_NO)排序，查询处理器也会使用排序键。

# 优化之间

区域图给出了存储的列的最小值和最大值，并指向要过滤的正确块。对于 BETWEEN 查询，尤其是在引用维度表范围的事实表上，除非解析维度表的值，否则区域映射无法像简单查询那样提供粒度筛选。

这也和前面的 JOIN 重写点有些关系。

BETWEEN 优化有助于日期范围查询和基于维度表范围的事实表查询。这种优化将允许对这种查询进行合并排序操作，而不是散列连接操作。

在 2017 年引入的后期查询具体化功能中，已经看到了一定程度的改进，但合并的改进因素将更大，尤其是在排序键右对齐的情况下。