<html>
<head>
<title>Kubeflow Components and Pipelines</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubeflow 组件和管道</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/kubeflow-components-and-pipelines-33a1aa3cc338?source=collection_archive---------14-----------------------#2019-06-27">https://towardsdatascience.com/kubeflow-components-and-pipelines-33a1aa3cc338?source=collection_archive---------14-----------------------#2019-06-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fbda" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Kubeflow 是一个大的生态系统，一堆不同的开源工具 ML tools。</h2></div><p id="eecf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我想让事情变得简单，因此我们涵盖了组件、管道和实验。通过管道和组件，您可以获得构建 ML 工作流所需的基础知识。Kubeflow 中集成了更多的工具，我将在接下来的文章中介绍它们。</p><p id="0d8d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Kubeflow 起源于谷歌。</p><blockquote class="le lf lg"><p id="f194" class="ki kj lh kk b kl km ju kn ko kp jx kq li ks kt ku lj kw kx ky lk la lb lc ld im bi translated">使在 Kubernetes 上部署机器学习(ML)工作流变得简单、可移植和可扩展。<br/>来源:Kubeflow 网站</p></blockquote><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi ll"><img src="../Images/ed47ce213e27a9a4b52467c4b5301be8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VyxpwYqKlI2qzCU4ZWxoUw.jpeg"/></div></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">Photo by <a class="ae mb" href="https://unsplash.com/@ryanquintal?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Ryan Quintal</a> on <a class="ae mb" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="3dce" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">目标</h1><ul class=""><li id="43ea" class="mu mv it kk b kl mw ko mx kr my kv mz kz na ld nb nc nd ne bi translated">演示如何<strong class="kk iu">建造</strong>管道。</li><li id="d263" class="mu mv it kk b kl nf ko ng kr nh kv ni kz nj ld nb nc nd ne bi translated">演示如何<strong class="kk iu">创建</strong>组件。</li><li id="6a6c" class="mu mv it kk b kl nf ko ng kr nh kv ni kz nj ld nb nc nd ne bi translated">演示如何<strong class="kk iu">使用</strong>组件。</li><li id="dee5" class="mu mv it kk b kl nf ko ng kr nh kv ni kz nj ld nb nc nd ne bi translated">演示如何在笔记本电脑中运行<strong class="kk iu">管道和实验。</strong></li><li id="4bce" class="mu mv it kk b kl nf ko ng kr nh kv ni kz nj ld nb nc nd ne bi translated">易于理解和使用的<strong class="kk iu">示例</strong>。</li></ul><h1 id="ad61" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">管道</h1><h2 id="3c9d" class="nk md it bd me nl nm dn mi nn no dp mm kr np nq mo kv nr ns mq kz nt nu ms nv bi translated">成分</h2><p id="29df" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated">在管道中执行<strong class="kk iu">一步</strong>的代码。换句话说，一个 ML 任务的容器化实现。<br/>组件类似于函数，它有名称、参数、返回值和主体。流水线中的每个组件<strong class="kk iu">独立执行</strong>和<strong class="kk iu"> </strong>必须打包成 docker 映像。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/fea23848f32a8c08af621fc35533c2f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*hR0_VvZBjBeEXQlZDSNvaQ.png"/></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">The components.</figcaption></figure><h2 id="643e" class="nk md it bd me nl nm dn mi nn no dp mm kr np nq mo kv nr ns mq kz nt nu ms nv bi translated">图表</h2><p id="7464" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated">组件之间的表示。它显示了管道正在执行的步骤。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/55bd0305fcf9848385e2cad8465eb818.png" data-original-src="https://miro.medium.com/v2/resize:fit:596/format:webp/1*AhW372wGfahhM7_j-D53Uw.png"/></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">The graph.</figcaption></figure><h2 id="babf" class="nk md it bd me nl nm dn mi nn no dp mm kr np nq mo kv nr ns mq kz nt nu ms nv bi translated">管道</h2><p id="f0d5" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated">流水线描述了机器学习的工作流程，它包括组件和图。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/faafc04fde58396631b447636193a26f.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/format:webp/1*m2oTCQZgo_pJ6-53knxfZA.png"/></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">The pipeline.</figcaption></figure><h2 id="9042" class="nk md it bd me nl nm dn mi nn no dp mm kr np nq mo kv nr ns mq kz nt nu ms nv bi translated">奔跑</h2><p id="c3b4" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated">一次运行是一条<strong class="kk iu">流水线的单次<strong class="kk iu">执行</strong>，</strong>为了比较，所有运行都被<strong class="kk iu">保留。</strong></p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi oc"><img src="../Images/f80664637391d3420a8563edb561d236.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VWjeXXKOAK1o6lZv-FC5eQ.png"/></div></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">A run is a single execution of a Pipeline.</figcaption></figure><h2 id="4b63" class="nk md it bd me nl nm dn mi nn no dp mm kr np nq mo kv nr ns mq kz nt nu ms nv bi translated"><strong class="ak">重复运行</strong></h2><p id="1899" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated"><strong class="kk iu">循环</strong>运行可用于重复管道运行，如果我们想要以预定的方式在新数据上训练更新的模型版本，这很有用。</p><h2 id="9fdf" class="nk md it bd me nl nm dn mi nn no dp mm kr np nq mo kv nr ns mq kz nt nu ms nv bi translated">实验</h2><p id="0e53" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated">类似于<strong class="kk iu">工作空间，它包含</strong>不同的<strong class="kk iu">运行</strong>。跑分可以<strong class="kk iu">比较。</strong></p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi od"><img src="../Images/8b0ffba41adc2bf6598d01ff591edacb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u1HDPQbPkzhSL6brpPg5kw.png"/></div></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">An overview of all runs in this specific experiment.</figcaption></figure><h1 id="fb6f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">组件类型</strong></h1><p id="02eb" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated">Kubeflow 包含两种类型的组件，一种用于快速开发，另一种用于重用。</p><h2 id="4d7b" class="nk md it bd me nl nm dn mi nn no dp mm kr np nq mo kv nr ns mq kz nt nu ms nv bi translated">轻量级组件</h2><p id="13f1" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated">用于笔记本环境中的<strong class="kk iu">快速开发</strong>。快速简单，因为不需要构建容器映像。</p><h2 id="42aa" class="nk md it bd me nl nm dn mi nn no dp mm kr np nq mo kv nr ns mq kz nt nu ms nv bi translated">可重复使用的集装箱组件</h2><p id="cacb" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated">可以通过<strong class="kk iu">将</strong>装载到 Kubeflow 管道中来重复使用。这是一个内含 T42 的组件。</p><p id="074f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要求<strong class="kk iu">多</strong>实施<strong class="kk iu">时间</strong>。</p><h1 id="4912" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">可重用成分</h1><p id="1315" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated">在本节中，您将获得可重用组件的基础知识。</p><h2 id="4170" class="nk md it bd me nl nm dn mi nn no dp mm kr np nq mo kv nr ns mq kz nt nu ms nv bi translated">组件结构</h2><p id="bdc3" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated">组件本身很简单，只由几个部分组成:</p><ul class=""><li id="bc19" class="mu mv it kk b kl km ko kp kr oe kv of kz og ld nb nc nd ne bi translated">组件<strong class="kk iu">逻辑</strong></li><li id="96e5" class="mu mv it kk b kl nf ko ng kr nh kv ni kz nj ld nb nc nd ne bi translated">一个<strong class="kk iu">组件规格</strong>为 yaml。</li><li id="fd38" class="mu mv it kk b kl nf ko ng kr nh kv ni kz nj ld nb nc nd ne bi translated">构建容器需要一个<strong class="kk iu"> Dockerfile </strong>。</li><li id="3566" class="mu mv it kk b kl nf ko ng kr nh kv ni kz nj ld nb nc nd ne bi translated">一个<strong class="kk iu">自述文件</strong>解释组件及其输入和输出。</li><li id="68bd" class="mu mv it kk b kl nf ko ng kr nh kv ni kz nj ld nb nc nd ne bi translated">助手<strong class="kk iu">脚本</strong>到<strong class="kk iu">构建</strong>组件，然后<strong class="kk iu">将</strong>组件推送到 Docker 仓库。</li></ul><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi oh"><img src="../Images/bd7ee8531377fcbfea52506eb29764ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bxLGGOqr0kw9fypivjSGXg.png"/></div></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">Parts of a reusable Kubeflow component.</figcaption></figure><h2 id="ae85" class="nk md it bd me nl nm dn mi nn no dp mm kr np nq mo kv nr ns mq kz nt nu ms nv bi translated">部件规格</h2><p id="5654" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated">本<strong class="kk iu">规范描述了用于 Kubeflow 管道的</strong>容器<strong class="kk iu">组件</strong>数据模型。</p><p id="91a3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lh">以 YAML 格式编写(component.yaml)。</em></p><ul class=""><li id="7fc4" class="mu mv it kk b kl km ko kp kr oe kv of kz og ld nb nc nd ne bi translated"><strong class="kk iu">元数据</strong>描述组件本身，如名称和描述</li><li id="4291" class="mu mv it kk b kl nf ko ng kr nh kv ni kz nj ld nb nc nd ne bi translated"><strong class="kk iu">接口</strong>定义组件的输入和输出。</li><li id="50e6" class="mu mv it kk b kl nf ko ng kr nh kv ni kz nj ld nb nc nd ne bi translated"><strong class="kk iu">实现</strong>指定组件应该如何执行。</li></ul><h2 id="5452" class="nk md it bd me nl nm dn mi nn no dp mm kr np nq mo kv nr ns mq kz nt nu ms nv bi translated">处理输入</h2><p id="41e2" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated">一个组件通常需要某种输入，比如训练数据的路径或者模型的名称。它可以消耗多个输入。</p><ul class=""><li id="3a21" class="mu mv it kk b kl km ko kp kr oe kv of kz og ld nb nc nd ne bi translated"><strong class="kk iu">在 component.yaml 中定义输入</strong></li><li id="e2a4" class="mu mv it kk b kl nf ko ng kr nh kv ni kz nj ld nb nc nd ne bi translated"><strong class="kk iu">将</strong>输入定义为容器的<strong class="kk iu">参数</strong>。</li><li id="f37a" class="mu mv it kk b kl nf ko ng kr nh kv ni kz nj ld nb nc nd ne bi translated"><strong class="kk iu">解析组件逻辑中的</strong> <strong class="kk iu">参数</strong>。</li></ul><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi oi"><img src="../Images/8d3d0eebd0e2a77616e049b3290f3993.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lu2ey7-IPpuvPRhTVSxs7Q.png"/></div></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">The training component might require training data as input and produces a model as output.</figcaption></figure><h2 id="6418" class="nk md it bd me nl nm dn mi nn no dp mm kr np nq mo kv nr ns mq kz nt nu ms nv bi translated">处理输出</h2><p id="6eaf" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated">需要输出来在组件之间传递数据。重要的是要知道流水线<strong class="kk iu">中的每个组件都独立执行</strong>。</p><ul class=""><li id="43e7" class="mu mv it kk b kl km ko kp kr oe kv of kz og ld nb nc nd ne bi translated">组件在不同的进程中运行，不能共享数据。</li><li id="cbe9" class="mu mv it kk b kl nf ko ng kr nh kv ni kz nj ld nb nc nd ne bi translated">传递小数据的过程不同于传递大数据的过程。</li></ul><p id="1fc9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">对于小数据</strong></p><ul class=""><li id="6ff6" class="mu mv it kk b kl km ko kp kr oe kv of kz og ld nb nc nd ne bi translated">值可以作为输出直接传递。</li></ul><p id="830c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">对于大数据</strong></p><ul class=""><li id="ade2" class="mu mv it kk b kl km ko kp kr oe kv of kz og ld nb nc nd ne bi translated"><strong class="kk iu">大型数据</strong>必须<strong class="kk iu">序列化</strong>为文件，以便在组件之间传递。</li><li id="7980" class="mu mv it kk b kl nf ko ng kr nh kv ni kz nj ld nb nc nd ne bi translated"><strong class="kk iu">上传</strong>数据到我们的存储系统。</li><li id="a396" class="mu mv it kk b kl nf ko ng kr nh kv ni kz nj ld nb nc nd ne bi translated">并且<strong class="kk iu">将此文件的一个<strong class="kk iu">引用</strong>传递给下一个组件。</strong></li><li id="0b10" class="mu mv it kk b kl nf ko ng kr nh kv ni kz nj ld nb nc nd ne bi translated">管道中的下一个<strong class="kk iu">组件</strong>将获取该引用，并且<strong class="kk iu">下载</strong>序列化数据。</li></ul><h2 id="639b" class="nk md it bd me nl nm dn mi nn no dp mm kr np nq mo kv nr ns mq kz nt nu ms nv bi translated">Dockerize 组件</h2><p id="3866" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated">每个组件都是一个容器映像，需要一个 order 文件来构建映像。</p><p id="3838" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">映像构建完成后，我们将组件容器映像推送到<strong class="kk iu"> Google 容器注册表</strong>。</p><p id="3da6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">构建组件容器映像并将其上传到 Google <a class="ae mb" href="https://console.cloud.google.com/gcr/images/spielwiese-sascha-heyer?project=spielwiese-sascha-heyer" rel="noopener ugc nofollow" target="_blank">容器注册表</a>只是几行代码:</p><pre class="lm ln lo lp gt oj ok ol om aw on bi"><span id="6d13" class="nk md it ok b gy oo op l oq or"># build_image.sh<br/>image_name=gcr.io/ml-training/kubeflow/training/train<br/>image_tag=latest</span><span id="49fc" class="nk md it ok b gy os op l oq or">full_image_name=${image_name}:${image_tag}</span><span id="cc8d" class="nk md it ok b gy os op l oq or">docker build --build-arg -t "${full_image_name}" <br/>docker push "$full_image_name"</span></pre><p id="c85b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在第一次 docker 推送时，您可能会得到以下错误消息:</p><blockquote class="le lf lg"><p id="bb64" class="ki kj lh kk b kl km ju kn ko kp jx kq li ks kt ku lj kw kx ky lk la lb lc ld im bi translated">您没有执行此操作所需的权限，并且您可能有无效的凭据。要验证您的请求，请遵循以下步骤:<a class="ae mb" href="https://cloud.google.com/container-registry/docs/advanced-authentication" rel="noopener ugc nofollow" target="_blank">https://cloud . Google . com/container-registry/docs/advanced-authentic ation</a></p></blockquote><p id="0102" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这种情况下，只需运行以下 gcloud 命令并再次推送:</p><pre class="lm ln lo lp gt oj ok ol om aw on bi"><span id="b4d9" class="nk md it ok b gy oo op l oq or">$ gcloud auth configure-docker</span></pre><h1 id="9256" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">使用管道</h1><h2 id="6b75" class="nk md it bd me nl nm dn mi nn no dp mm kr np nq mo kv nr ns mq kz nt nu ms nv bi translated">加载组件</h2><p id="f2b9" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated">有权访问 Docker 存储库和 component.yaml 的每个人都可以在<strong class="kk iu">管道</strong>中使用<strong class="kk iu">组件</strong>。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi ot"><img src="../Images/94ef75a5e7f6fc4134f90485cc013dec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YN1P-2pkbka1mOWILWCSGA.png"/></div></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">Load a component from a component.yaml URL.</figcaption></figure><p id="2047" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后可以基于 component.yaml 将组件<strong class="kk iu">加载到</strong>。</p><pre class="lm ln lo lp gt oj ok ol om aw on bi"><span id="db85" class="nk md it ok b gy oo op l oq or">operation = kfp.components.load_component_from_url(<br/>'<a class="ae mb" href="https://storage.googleapis.com/spielwiese-sascha-heyer/test9/component.yaml'" rel="noopener ugc nofollow" target="_blank">https://location-to-your-yaml/component.yaml'</a>)</span><span id="5c1b" class="nk md it ok b gy os op l oq or">help(operation)</span></pre><h2 id="cc6e" class="nk md it bd me nl nm dn mi nn no dp mm kr np nq mo kv nr ns mq kz nt nu ms nv bi translated">创建管道</h2><p id="ada9" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated"><strong class="kk iu"> dsl </strong>装饰器通过管道 SDK 提供，用于定义管道并与之交互。<code class="fe ou ov ow ok b">dsl.pipeline</code>为返回管道的 Python 函数定义一个装饰器。</p><pre class="lm ln lo lp gt oj ok ol om aw on bi"><span id="dfa6" class="nk md it ok b gy oo op l oq or"><a class="ae mb" href="http://twitter.com/dsl" rel="noopener ugc nofollow" target="_blank">@dsl</a>.pipeline(<br/>  name='The name of the pipeline',<br/>  description='The description of the pipeline'<br/>)<br/>def sample_pipeline(parameter):<br/>    concat = operation(parameter=first)</span></pre><h2 id="f292" class="nk md it bd me nl nm dn mi nn no dp mm kr np nq mo kv nr ns mq kz nt nu ms nv bi translated">编译管道</h2><p id="2d3f" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated">为了编译管道，我们使用了<code class="fe ou ov ow ok b">compiler.Compile()</code>函数，它也是管道 SDK 的一部分。编译器生成一个 yaml 定义，Kubernetes 使用它来创建执行资源。</p><pre class="lm ln lo lp gt oj ok ol om aw on bi"><span id="511d" class="nk md it ok b gy oo op l oq or">pipeline_func = sample_pipeline<br/>pipeline_filename = pipeline_func.__name__ + '.pipeline.zip'</span><span id="d89d" class="nk md it ok b gy os op l oq or">compiler.Compiler().compile(sample_pipeline, <br/>                            pipeline_filename)</span></pre><h2 id="4180" class="nk md it bd me nl nm dn mi nn no dp mm kr np nq mo kv nr ns mq kz nt nu ms nv bi translated">创造一个实验</h2><p id="b348" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated">管道总是实验的一部分，可以用 Kubeflow 管道客户端<code class="fe ou ov ow ok b">kfp.client()</code>创建。目前无法删除实验。</p><pre class="lm ln lo lp gt oj ok ol om aw on bi"><span id="e642" class="nk md it ok b gy oo op l oq or">client = kfp.Client()</span><span id="bd0e" class="nk md it ok b gy os op l oq or">try:<br/>    experiment = client.get_experiment(experiment_name=EXPERIMENT_NAME)<br/>except:<br/>    experiment = client.create_experiment(EXPERIMENT_NAME)<br/>    <br/>print(experiment)</span></pre><h2 id="2687" class="nk md it bd me nl nm dn mi nn no dp mm kr np nq mo kv nr ns mq kz nt nu ms nv bi translated">运行管道</h2><p id="1294" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated">为了运行管道，我们使用实验 id 和在前面步骤中创建的编译管道。<code class="fe ou ov ow ok b">client.run_pipeline</code>运行管道，并提供与库巴流实验的直接链接。</p><pre class="lm ln lo lp gt oj ok ol om aw on bi"><span id="2eb3" class="nk md it ok b gy oo op l oq or">run_name = pipeline_func.__name__ + ' run'<br/>run_result = client.run_pipeline(experiment.id, <br/>                                 run_name, <br/>                                 pipeline_filename)</span></pre><h1 id="dd9a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">GitHub 上的例子</h1><p id="f2eb" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated">我创建了一个基本的管道来演示本文中的所有内容。为了简单起见，管道不包含任何特定于 ML 的实现。</p><p id="6a4e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae mb" href="https://github.com/SaschaHeyer/Machine-Learning-Training/tree/master/kubeflow/lightweight-component-training" rel="noopener ugc nofollow" target="_blank">https://github . com/SaschaHeyer/Machine-Learning-Training/tree/master/kube flow/lightweight-component-Training</a></p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi ox"><img src="../Images/0cf4b922c7754ab2ab385c0d9159d95a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*UTXF-jw4SzeyZ9n_ES10Uw.gif"/></div></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk">Usage</figcaption></figure></div><div class="ab cl oy oz hx pa" role="separator"><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd pe"/><span class="pb bw bk pc pd"/></div><div class="im in io ip iq"><p id="52d9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lh">感谢阅读。<br/>更多如 Kubeflow 整流罩、Katib 等话题敬请关注。</em></p><p id="409f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lh">这篇文章的代码可以在</em><a class="ae mb" href="https://github.com/SaschaHeyer/Machine-Learning-Training/tree/master/kubeflow/reusable-component-training" rel="noopener ugc nofollow" target="_blank"><em class="lh">GitHub</em></a><em class="lh">上找到。</em></p><p id="5c7c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lh">您的反馈和问题非常感谢，您可以在 Twitter 上找到我</em><a class="ae mb" href="https://twitter.com/HeyerSascha" rel="noopener ugc nofollow" target="_blank"><em class="lh">@ HeyerSascha</em></a><em class="lh">。</em></p><h1 id="32e0" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">关于作者</h1><p id="50a0" class="pw-post-body-paragraph ki kj it kk b kl mw ju kn ko mx jx kq kr nw kt ku kv nx kx ky kz ny lb lc ld im bi translated"><a class="ae mb" href="https://twitter.com/HeyerSascha" rel="noopener ugc nofollow" target="_blank">Sascha Heyer</a><a class="ae mb" href="https://ioannotator.com" rel="noopener ugc nofollow" target="_blank">Io Annotator 的创始人一个用于文本和图像的 AI 注释平台<br/>，它提供了几种图像和文本注释工具。</a></p></div></div>    
</body>
</html>