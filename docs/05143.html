<html>
<head>
<title>Visualizing the Central Limit Theorem with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Python 可视化中心极限定理</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/visualizing-the-central-limit-theorem-with-python-e89d2ce41788?source=collection_archive---------12-----------------------#2019-08-01">https://towardsdatascience.com/visualizing-the-central-limit-theorem-with-python-e89d2ce41788?source=collection_archive---------12-----------------------#2019-08-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="e9dd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">每当您处理数据并想要收集一些关于它们的信息时，您可能要检查的第一件事就是它们是否遵循已知的分布。</p><p id="cc64" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为什么了解数据分布如此重要？</p><p id="7f7e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个问题的答案依赖于许多统计类型研究的目标，即更多地了解一个目标，通常称为<em class="ko">人口</em>。<em class="ko">警告</em>是观察你项目的全部人口通常是不切实际的(甚至是不可能的)。想象一下，也就是说，你想知道年龄在 40 到 50 岁之间的男性的平均体重。你认为你能采访世界上所有具有这些特征的男人吗？</p><p id="f56c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">不可能观察到全部人口，这就是我们需要<em class="ko">样本</em>的原因。抽样程序包括从全部人口中选择一个子集，这个子集最好能代表初始人口。通过这样做，我们希望从样本中包含的信息出发，对我们的目标总体做出推断。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/488da19d0f3ac37dfdb9067c163d3635.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sKqA-jqWXwy1ph1MaFPjJg.png"/></div></div></figure><p id="c92b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在前面的例子中(找出男性的平均体重)，一种解决方法是从男性子集或样本中收集数据，考虑不同的国籍，这样样本就不会有偏差。因此，我们将获得一个样本平均值，它应该接近总体平均值。</p><p id="eeba" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然而，我们怎么能确定这个结果的准确性呢？根据定义，统计学家永远不会确定，这就是为什么我们需要测试我们的结果的稳健性，运行所谓的假设检验。后者允许我们声明我们是否可以拒绝我们的零假设(在我们的例子中，这将是<em class="ko">‘样本均值是真实参数的良好估计’</em>)。</p><p id="7cc8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了做到这一点，我们需要知道数据的分布。这就是为什么中心极限定理(CLT)如此重要。</p><p id="ae32" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">CLT 的想法如下:让我们收集大小为<em class="ko"> n </em>的<em class="ko"> x </em>个样本，并让我们计算每个样本的样本均值。然后，(在我们马上要看到的一些假设下)如果我们绘制所有样本均值，它们应该遵循正态分布。此外，所有样本均值的均值应该几乎等于总体的真实参数。</p><p id="5f54" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我提到的那些假设是什么？</p><ul class=""><li id="9d4e" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn lg lh li lj bi translated">取样程序必须随机执行</li><li id="c2c0" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">样本必须相互独立</li><li id="2934" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">在不替换样本的情况下进行抽样时，样本量不应超过总体的 10%</li><li id="d05f" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">样本量应该足够大(通常，n=30 的样本量被认为是足够大的，即使它确实取决于初始总体)</li></ul><p id="5906" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果这些假设被认为是正确的，CLT 允许您对初始人口进行推断。此外，样本越大，样本均值分布的钟形就越明显。</p><p id="5c86" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了充分理解这个定理，让我们用 Python 可视化一下。我要做的是创建男性体重的随机样本(想象他们在 60 到 90 公斤之间)，每个尺寸 n=50。然后，我将多次运行这个模拟，看看样本均值分布是否类似于正态分布。</p><pre class="kq kr ks kt gt lp lq lr ls aw lt bi"><span id="f7b2" class="lu lv it lq b gy lw lx l ly lz">from numpy.random import seed<br/>from numpy.random import randint<br/>from numpy import mean<br/># seed the random number generator, so that the experiment is #replicable<br/>seed(1)<br/># generate a sample of men's weights<br/>weights = randint(60, 90, 50)<br/>print(weights)<br/>print('The average weight is {} kg'.format(mean(weights)))</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ma"><img src="../Images/ae54c99290a661ec853828ba419a5b4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ux1yzOJVUFk2Bpy1FbI1Xw.png"/></div></div></figure><p id="c5c1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在让我们重复采样模拟 1000 次:</p><pre class="kq kr ks kt gt lp lq lr ls aw lt bi"><span id="fbb9" class="lu lv it lq b gy lw lx l ly lz">import matplotlib.pyplot as plt<br/># seed the random number generator, so that the experiment is replicable<br/>seed(1)<br/># calculate the mean of 50 men's weights 1000 times<br/>means = [mean(randint(60, 90, 50)) for _i in range(1000)]<br/># plot the distribution of sample means<br/>plt.hist(means)<br/>plt.show()<br/>print('The mean of the sample means is {}'.format(mean(means)))</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mb"><img src="../Images/a48ba919ca7759252d9e7d6769047a1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HWz-heXVi7yJQuqp7vqagw.png"/></div></div></figure><p id="a23c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">根据 CLT，样本均值(74.54)应该是真实参数(未知)的良好估计。</p><p id="5fc4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了确定我们的结果，让我们对数据进行正态性检验。出于这个目的，我将使用夏皮罗-维尔克正态性检验(你可以在这里阅读更多关于这个检验的内容)，这里的假设是:</p><p id="9eb5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko"> H0:数据服从正态分布</em></p><p id="44c7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko"> H1:数据不符合正态分布</em></p><p id="35cc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，如果我们的样本均值服从正态分布，我们将不拒绝零。</p><pre class="kq kr ks kt gt lp lq lr ls aw lt bi"><span id="6992" class="lu lv it lq b gy lw lx l ly lz">from scipy.stats import shapiro<br/>stat, p = shapiro(means)<br/>print('Statistics={}, p={}'.format(stat, p))<br/>alpha = 0.05<br/>if p &gt; alpha:<br/>    print('Sample looks Normal (do not reject H0)')<br/>else:<br/>    print('Sample does not look Normal (reject H0)')</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi md"><img src="../Images/a5755420b2bdd0bd1503311cee7d971c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WDwzBNeIv6NzY8GhX5zomA.png"/></div></div></figure><p id="db30" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">由于 p 值远远大于我们的置信水平<em class="ko"> alpha </em>(具体来说，它大于任何显著水平的<em class="ko"> alpha </em>)，我们不拒绝 H0。</p><p id="6ce0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在让我们看看，如果我们将样本量从 50 分别增加到 80、90 和 100 会发生什么:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi me"><img src="../Images/ab734fadffd9e05dcc58728f215d70a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c076dXiS1PSC2lrgNab1rw.png"/></div></div></figure><p id="8841" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正如你所看到的，样本量 n 越大，p 值越高，我们不拒绝正态零假设的置信度就越高。</p></div></div>    
</body>
</html>