<html>
<head>
<title>Data Warehouse | Dimensional Modelling | Use case study: eWallet</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据仓库|维度建模|用例研究:电子钱包</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-warehouse-dimensional-modelling-use-case-study-ewallet-d9d16f559181?source=collection_archive---------9-----------------------#2019-12-13">https://towardsdatascience.com/data-warehouse-dimensional-modelling-use-case-study-ewallet-d9d16f559181?source=collection_archive---------9-----------------------#2019-12-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fcd1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过用例解释技术概念总是更有意义。</h2></div><blockquote class="kf kg kh"><p id="bc3c" class="ki kj kk kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">基于我以前作为数据工程师和分析师的经验，我将使用一个电子钱包案例研究来解释数据仓库和维度建模。——<strong class="kl ir"><em class="iq">马诺基</em> </strong></p></blockquote><h1 id="1c5b" class="lf lg iq bd lh li lj lk ll lm ln lo lp jw lq jx lr jz ls ka lt kc lu kd lv lw bi translated">数据仓库</h1><p id="5c75" class="pw-post-body-paragraph ki kj iq kl b km lx jr ko kp ly ju kr lz ma ku kv mb mc ky kz md me lc ld le ij bi translated">数据仓库是与业务相关的历史数据的大型集合，可用于制定业务决策。</p><figure class="mg mh mi mj gt mk gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mf"><img src="../Images/1b5c0448eff595feacff53ea817773bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QDJlVXOplFAxNCFS"/></div></div></figure><ul class=""><li id="d5c8" class="mr ms iq kl b km kn kp kq lz mt mb mu md mv le mw mx my mz bi translated">数据仓库存储聚合的事务性数据，这些数据经过转换和存储后用于分析目的。</li><li id="805e" class="mr ms iq kl b km na kp nb lz nc mb nd md ne le mw mx my mz bi translated">数据仓库存储来自多个来源的数据，这使得分析更加容易。</li></ul><p id="ee70" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lz kt ku kv mb kx ky kz md lb lc ld le ij bi translated">简单地说，数据库(运营)系统是你放入数据的地方，而数据仓库(商业智能)系统是你取出数据的地方—拉尔夫·金博尔</p><h1 id="1671" class="lf lg iq bd lh li lj lk ll lm ln lo lp jw lq jx lr jz ls ka lt kc lu kd lv lw bi translated">维度建模</h1><p id="90f5" class="pw-post-body-paragraph ki kj iq kl b km lx jr ko kp ly ju kr lz ma ku kv mb mc ky kz md me lc ld le ij bi translated">维度建模是设计数据仓库的广泛使用的技术，主要是因为它同时解决了以下两个需求:</p><ol class=""><li id="5116" class="mr ms iq kl b km kn kp kq lz mt mb mu md mv le nf mx my mz bi translated">提供业务用户可以理解的数据。</li><li id="1582" class="mr ms iq kl b km na kp nb lz nc mb nd md ne le nf mx my mz bi translated">提供快速查询性能。</li></ol><figure class="mg mh mi mj gt mk gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi ng"><img src="../Images/745a4afc90d41463f404cc2cea083156.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Flxu5P4cbawn6an-gcCAZA.png"/></div></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk">Core elements of the Kimball DW/BI architecture</figcaption></figure><p id="d7e7" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lz kt ku kv mb kx ky kz md lb lc ld le ij bi translated">该图显示了从操作数据源到分析工具构建数据仓库所涉及的主要组件，以通过 ETL(提取、转换、加载)过程支持业务决策。</p><p id="a466" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lz kt ku kv mb kx ky kz md lb lc ld le ij bi translated">现在让我们以电子钱包的用例为例，使用维度建模技术构建一个数据仓库。</p><h1 id="7709" class="lf lg iq bd lh li lj lk ll lm ln lo lp jw lq jx lr jz ls ka lt kc lu kd lv lw bi translated">用例</h1><h2 id="1302" class="nl lg iq bd lh nm nn dn ll no np dp lp lz nq nr lr mb ns nt lt md nu nv lv nw bi translated">背景</h2><p id="5046" class="pw-post-body-paragraph ki kj iq kl b km lx jr ko kp ly ju kr lz ma ku kv mb mc ky kz md me lc ld le ij bi translated">这家在线零售公司的特色之一是电子钱包服务，这种服务可以用来支付在该平台上购买的产品。</p><p id="335a" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lz kt ku kv mb kx ky kz md lb lc ld le ij bi translated">用户可以通过三种不同的方式获得积分:</p><ol class=""><li id="7730" class="mr ms iq kl b km kn kp kq lz mt mb mu md mv le nf mx my mz bi translated">当已付款的产品购买被取消时，退款作为取消信用。</li><li id="6da1" class="mr ms iq kl b km na kp nb lz nc mb nd md ne le nf mx my mz bi translated">用户可以获得礼品卡积分作为礼物。</li><li id="9945" class="mr ms iq kl b km na kp nb lz nc mb nd md ne le nf mx my mz bi translated">如果用户具有差的服务体验，则可以提供 soo-sorry 信用。</li></ol><p id="22b1" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lz kt ku kv mb kx ky kz md lb lc ld le ij bi translated">如果是礼品卡信用和 soo-sorry 信用，电子钱包中的信用将在 6 个月后过期，但如果是取消信用，则在 1 年后过期。</p><figure class="mg mh mi mj gt mk gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi nx"><img src="../Images/baf415696fbea25ca7c4189886fb5747.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Y-QWMc3PlCZTMXLS"/></div></div></figure><h2 id="d310" class="nl lg iq bd lh nm nn dn ll no np dp lp lz nq nr lr mb ns nt lt md nu nv lv nw bi translated">要求</h2><p id="4285" class="pw-post-body-paragraph ki kj iq kl b km lx jr ko kp ly ju kr lz ma ku kv mb mc ky kz md me lc ld le ij bi translated">公司的财务部门希望在电子钱包服务上建立报告和分析，以便他们可以了解公司的钱包负债程度。</p><p id="9420" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lz kt ku kv mb kx ky kz md lb lc ld le ij bi translated">他们想要回答的一些问题如下:</p><ul class=""><li id="54bd" class="mr ms iq kl b km kn kp kq lz mt mb mu md mv le mw mx my mz bi translated">电子钱包服务的每日信用余额是多少？</li><li id="1814" class="mr ms iq kl b km na kp nb lz nc mb nd md ne le mw mx my mz bi translated">下个月会有多少贷款到期？</li><li id="2642" class="mr ms iq kl b km na kp nb lz nc mb nd md ne le mw mx my mz bi translated">特定月份的信贷结果是什么(即已用百分比、过期百分比、剩余百分比)？</li></ul><h2 id="a0a2" class="nl lg iq bd lh nm nn dn ll no np dp lp lz nq nr lr mb ns nt lt md nu nv lv nw bi translated">解决方案设计</h2><p id="64a8" class="pw-post-body-paragraph ki kj iq kl b km lx jr ko kp ly ju kr lz ma ku kv mb mc ky kz md me lc ld le ij bi translated">在维度模型的设计过程中做出的四个关键决策包括:</p><p id="6244" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lz kt ku kv mb kx ky kz md lb lc ld le ij bi translated">1.选择业务流程。2.申报粮食。3.确定尺寸。4.确定事实。</p><p id="254d" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lz kt ku kv mb kx ky kz md lb lc ld le ij bi translated">让我们写下电子钱包案例的决策步骤:</p><p id="bc48" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lz kt ku kv mb kx ky kz md lb lc ld le ij bi translated"><strong class="kl ir"> 1。假设:</strong>设计是基于给定的<em class="kk">背景</em>(业务流程)开发的，但也要考虑到灵活性。假设所有必填字段都可以从公司的交易数据库中获得。</p><p id="08dc" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lz kt ku kv mb kx ky kz md lb lc ld le ij bi translated"><strong class="kl ir"> 2。粒度定义:</strong> <em class="kk">原子粒度是指给定业务流程捕获数据的最低级别。</em></p><p id="e91f" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lz kt ku kv mb kx ky kz md lb lc ld le ij bi translated">在这种情况下，可以捕获的最低级别的数据是电子钱包交易，即电子钱包上的所有信用和借记交易。</p><p id="5e20" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lz kt ku kv mb kx ky kz md lb lc ld le ij bi translated"><strong class="kl ir"> 3。维度:</strong> <em class="kk">维度提供了围绕业务流程事件的“谁、什么、哪里、何时、为什么和如何”的上下文。</em></p><p id="4e2a" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lz kt ku kv mb kx ky kz md lb lc ld le ij bi translated">尽管可以添加大量的描述性属性，但设计维度仅限于当前的业务流程，但该模型可以根据需要灵活地添加任何更多的细节。(以 Dim 为前缀的表名)</p><p id="a462" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lz kt ku kv mb kx ky kz md lb lc ld le ij bi translated"><strong class="kl ir">维度表:</strong></p><ul class=""><li id="161b" class="mr ms iq kl b km kn kp kq lz mt mb mu md mv le mw mx my mz bi translated">DimWallet</li></ul><figure class="mg mh mi mj gt mk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><ul class=""><li id="d4b2" class="mr ms iq kl b km kn kp kq lz mt mb mu md mv le mw mx my mz bi translated">DimCustomer</li></ul><figure class="mg mh mi mj gt mk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><ul class=""><li id="de10" class="mr ms iq kl b km kn kp kq lz mt mb mu md mv le mw mx my mz bi translated">DimDate: <strong class="kl ir"> </strong>该维度包含所有与日期相关的解析值，如日期中的月份、日期中的星期、星期几等。这将非常方便地获得基于时间的报告。</li></ul><p id="e68b" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lz kt ku kv mb kx ky kz md lb lc ld le ij bi translated"><strong class="kl ir"> 4。事实:</strong> <em class="kk">事实是来自业务流程事件的度量，并且几乎总是数字。</em></p><p id="5a3d" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lz kt ku kv mb kx ky kz md lb lc ld le ij bi translated">事实被设计成关注具有完全可加性的事实。即使一些业务流程需求想要非累加的事实(已用百分比、过期百分比、剩余百分比等)。这些值可以通过单独计算附加事实来有效地获得。事实表中的每一行都代表了物理上可观察到的事件，而不仅仅关注于所需报告的需求。</p><p id="42f2" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lz kt ku kv mb kx ky kz md lb lc ld le ij bi translated"><strong class="kl ir">事实表:</strong></p><ul class=""><li id="88d5" class="mr ms iq kl b km kn kp kq lz mt mb mu md mv le mw mx my mz bi translated">FactWallet</li></ul><figure class="mg mh mi mj gt mk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><h2 id="b660" class="nl lg iq bd lh nm nn dn ll no np dp lp lz nq nr lr mb ns nt lt md nu nv lv nw bi translated">星型模式模型</h2><p id="e6b7" class="pw-post-body-paragraph ki kj iq kl b km lx jr ko kp ly ju kr lz ma ku kv mb mc ky kz md me lc ld le ij bi translated">下面是电子钱包服务的维度模型的逻辑图。</p><figure class="mg mh mi mj gt mk gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi oa"><img src="../Images/2c2ffb3cc5e4156f8da1a10cd7009abb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9qUlx_f5IROBcgHcIy1H3g.png"/></div></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk">eWallet — Star schema Dimensional Model</figcaption></figure><p id="462f" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lz kt ku kv mb kx ky kz md lb lc ld le ij bi translated">Ralph Kimball 是数据仓库技术的先驱，他总是在他的书中展示商业价值的重要性。星型模式比雪花型模式更受青睐，因为它具有更强的分析能力。</p><h1 id="c709" class="lf lg iq bd lh li lj lk ll lm ln lo lp jw lq jx lr jz ls ka lt kc lu kd lv lw bi translated">参考</h1><p id="7ca2" class="pw-post-body-paragraph ki kj iq kl b km lx jr ko kp ly ju kr lz ma ku kv mb mc ky kz md me lc ld le ij bi translated">[1] Ralph Kimball，Margy Ross,《数据仓库工具包，第二版，维度建模完全指南》</p></div></div>    
</body>
</html>