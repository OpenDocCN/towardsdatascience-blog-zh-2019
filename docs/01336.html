<html>
<head>
<title>How to embed security in your Azure Data Science Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在你的 Azure 数据科学项目中嵌入安全性</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-embed-security-in-your-azure-data-science-project-55ef3f2ab47?source=collection_archive---------13-----------------------#2019-03-03">https://towardsdatascience.com/how-to-embed-security-in-your-azure-data-science-project-55ef3f2ab47?source=collection_archive---------13-----------------------#2019-03-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9860" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用 Azure 数据块和 Azure 安全服务和技术</h2></div><h1 id="4e67" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">1.介绍</h1><p id="f5ba" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">许多公司努力将他们的数据科学项目投入生产。在之前的<a class="ae lw" rel="noopener" target="_blank" href="/how-to-bring-your-data-science-project-in-production-b36ae4c02b46">博客</a>中，讨论了如何为数据科学项目建立构建/发布管道。这使得公司能够 1)端到端地跟踪模型，2)建立对模型的信任，从而 3)避免模型预测令人费解的情况。</p><p id="65d8" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">在每个构建/发布管道中，安全性都是一个重要的主题。常见的安全方面如下:</p><ul class=""><li id="487e" class="mc md it lc b ld lx lg ly lj me ln mf lr mg lv mh mi mj mk bi translated">对数据和端点的身份验证和授权</li><li id="026f" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">数据和端点的网络隔离</li><li id="5516" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">保险库中密钥的安全存储和密钥滚动过程</li></ul><p id="3b8b" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated"><strong class="lc iu"><em class="mq">2020 年 9 月 17 日更新:本博客专用的博客和 gitrepo 不维护，不能 1 对 1 使用。不过，这些想法仍然有效。一个工作实例，见我之前的</em> </strong> <a class="ae lw" rel="noopener" target="_blank" href="/how-to-bring-your-data-science-project-in-production-b36ae4c02b46"> <strong class="lc iu"> <em class="mq">博客</em> </strong> </a></p><h1 id="44b5" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">2.目标</h1><p id="f651" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在本教程中，将创建一个机器学习模型的构建/发布管道，用于预测一个人的收入阶层。在这种情况下，一个模型被构造成 Azure Databricks，然后这个模型被部署在一个 Web 应用中，这个 Web 应用充当 HTTPS 端点。构建/发布管道中包含以下安全方面:</p><ul class=""><li id="51d7" class="mc md it lc b ld lx lg ly lj me ln mf lr mg lv mh mi mj mk bi translated">数据存储在 Azure Storage gen 2 中，服务端点指向 VNET</li><li id="3604" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">密钥存储在密钥库中，密钥翻转是构建步骤的一部分。</li><li id="00bf" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">Azure Active Directory 用于对 Web 应用程序进行身份验证</li><li id="3838" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">(可选)Web 应用程序是在 VNET 应用程序服务环境(ASE)中创建的</li></ul><p id="b489" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">这可以在下面的体系结构概述中描述:</p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi mr"><img src="../Images/9db4cf1f8beed719c882c1b2da73228a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k3yPuSOu-81eMxn4tL69tA.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">2. Architecture overview</figcaption></figure><p id="ebbf" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">在本博客的剩余部分，将执行以下步骤:</p><ul class=""><li id="f107" class="mc md it lc b ld lx lg ly lj me ln mf lr mg lv mh mi mj mk bi translated">3.先决条件</li><li id="5619" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">4.创建机器学习模型</li><li id="0293" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">5.在 Azure DevOps 中构建模型</li><li id="07ce" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">6.发布模型 Azure DevOps</li><li id="70fa" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">7.结论</li></ul><p id="d267" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">这是一个独立的教程，但是，现在的重点将是安全性，而不是机器学习模型。如果你对 ML 更感兴趣，建议做以前的博客，<a class="ae lw" rel="noopener" target="_blank" href="/how-to-bring-your-data-science-project-in-production-b36ae4c02b46">这里</a>或者使用 scikit-learn，这里看<a class="ae lw" href="https://medium.com/devopslinks/enable-ci-cd-for-data-science-projects-4f5b61acbfc9" rel="noopener">。</a></p><h1 id="1a35" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">3.先决条件</h1><p id="9371" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">需要在同一资源组和同一位置创建以下资源。</p><ul class=""><li id="5077" class="mc md it lc b ld lx lg ly lj me ln mf lr mg lv mh mi mj mk bi translated"><a class="ae lw" href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest" rel="noopener ugc nofollow" target="_blank"> Azure CLI </a></li><li id="f297" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated"><a class="ae lw" href="https://docs.microsoft.com/en-us/azure/key-vault/quick-create-cli" rel="noopener ugc nofollow" target="_blank">天蓝色钥匙金库</a></li><li id="216a" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated"><a class="ae lw" href="https://docs.microsoft.com/en-us/azure/storage/blobs/data-lake-storage-quickstart-create-account?toc=%2Fazure%2Fstorage%2Fblobs%2Ftoc.json#create-an-account-using-azure-cli" rel="noopener ugc nofollow" target="_blank"> Azure Data 湖存储账户第二代</a></li><li id="066e" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated"><a class="ae lw" href="https://docs.azuredatabricks.net/getting-started/try-databricks.html#step-2-create-a-databricks-workspace" rel="noopener ugc nofollow" target="_blank"> Azure Databricks 工作区</a>。如果您想要在您的存储帐户上设置防火墙规则(请参见步骤 4d)，请在自己的 VNET 中部署数据块，请参见此处的<a class="ae lw" href="https://docs.azuredatabricks.net/administration-guide/cloud-configurations/azure/vnet-inject.html" rel="noopener ugc nofollow" target="_blank"/></li><li id="2a20" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated"><a class="ae lw" href="https://docs.microsoft.com/en-us/azure/machine-learning/service/quickstart-get-started" rel="noopener ugc nofollow" target="_blank"> Azure 机器学习服务</a></li><li id="8ec3" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated"><a class="ae lw" href="https://azure.microsoft.com/en-us/services/devops/" rel="noopener ugc nofollow" target="_blank">蔚蓝 DevOps </a></li></ul><h1 id="7752" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">4.创建机器学习模型</h1><p id="7d8e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这一部分将执行以下步骤。请注意，尽可能使用 Azure CLI。</p><ul class=""><li id="75cd" class="mc md it lc b ld lx lg ly lj me ln mf lr mg lv mh mi mj mk bi translated">4a。将存储密钥添加到密钥库</li><li id="6dec" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">4b。在 Azure 数据块中创建秘密范围</li><li id="4855" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">4c。向存储帐户添加数据</li><li id="07cf" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">4d。(可选)存储帐户的网络隔离</li><li id="6503" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">4e。在 Azure Databricks 上运行笔记本</li></ul><h2 id="4fd8" class="nh kj it bd kk ni nj dn ko nk nl dp ks lj nm nn ku ln no np kw lr nq nr ky ns bi translated">4a。将存储密钥添加到密钥库</h2><p id="480f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在此步骤中，使用 Azure CLI 将存储帐户的密钥添加到密钥库中。按如下方式复制密钥:</p><pre class="ms mt mu mv gt nt nu nv nw aw nx bi"><span id="7f20" class="nh kj it nu b gy ny nz l oa ob">az login<br/>az storage account keys list -g &lt;&lt;resource group&gt;&gt; -n &lt;&lt;stor name&gt;&gt;</span></pre><p id="6186" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">现在，使用以下代码将存储帐户名称和存储帐户密钥添加到 Azure 密钥库中。建议在整个教程中使用相同的<strong class="lc iu">粗体名称</strong>，因为这些名称在 Azure DevOps 构建步骤中用作变量。确保用于登录 Azure CLI 的用户有足够的权限在密钥库中创建/列出/获取密钥。</p><pre class="ms mt mu mv gt nt nu nv nw aw nx bi"><span id="18f2" class="nh kj it nu b gy ny nz l oa ob">az keyvault secret set -n <strong class="nu iu">stor-key </strong>--vault-name &lt;&lt;vault name&gt;&gt; --value &lt;&lt;stor key&gt;&gt;</span></pre><h2 id="db47" class="nh kj it bd kk ni nj dn ko nk nl dp ks lj nm nn ku ln no np kw lr nq nr ky ns bi translated">4b。在 Azure 数据块中创建秘密范围</h2><p id="f14d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在数据块中创建 Azure Key Vault 支持的机密范围。这使得您可以将您的秘密存储在密钥库中，而不必再将密钥存储在笔记本中。将秘密范围命名为:<strong class="lc iu"> devaisec </strong></p><div class="oc od gp gr oe of"><a href="https://docs.azuredatabricks.net/user-guide/secrets/secret-scopes.html#create-an-azure-key-vault-backed-secret-scope" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">秘密范围-数据块文档</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">管理机密从创建机密范围开始。秘密作用域由其名称来标识，在一个…</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">docs.azuredatabricks.net</p></div></div><div class="oo l"><div class="op l oq or os oo ot nb of"/></div></div></a></div><h2 id="93f5" class="nh kj it bd kk ni nj dn ko nk nl dp ks lj nm nn ku ln no np kw lr nq nr ky ns bi translated">4c。向存储帐户添加数据</h2><p id="92f1" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在您的电脑上从<a class="ae lw" href="https://amldockerdatasets.azureedge.net/AdultCensusIncome.csv" rel="noopener ugc nofollow" target="_blank">https://amldocker datasets . azure edge . net/adultcensus income . CSV</a>下载数据文件。然后将数据添加到存储容器，如下所示:</p><pre class="ms mt mu mv gt nt nu nv nw aw nx bi"><span id="01f3" class="nh kj it nu b gy ny nz l oa ob">az storage container create -n <strong class="nu iu">dbrdata </strong>--account-name &lt;&lt;stor name&gt;&gt;<br/>az storage blob upload -f &lt;&lt;...\<!-- -->AdultCensusIncome<!-- -->.csv&gt;&gt; <br/>-c <strong class="nu iu">dbrdata </strong>-n <strong class="nu iu">AdultCensusIncome</strong><strong class="nu iu">.csv</strong> <!-- -->--account-name &lt;&lt;stor name&gt;&gt;</span></pre><h2 id="b1c9" class="nh kj it bd kk ni nj dn ko nk nl dp ks lj nm nn ku ln no np kw lr nq nr ky ns bi translated">4d。(可选)存储帐户的网络隔离</h2><p id="7e56" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">只有当您在自己的 VNET 中部署了 Databricks 工作空间时，这一步才是可能的，参见<a class="ae lw" href="https://docs.azuredatabricks.net/administration-guide/cloud-configurations/azure/vnet-inject.html" rel="noopener ugc nofollow" target="_blank">此处</a>。转到您的存储帐户，选择防火墙，然后添加您在其中部署了 Databricks 工作区的 VNET。</p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi ou"><img src="../Images/f5e4757e328dae68d54e6a5e9042548c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vKFyAZaTwUKbbwLad380jA.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">4d1. Add VNET to storage account</figcaption></figure><p id="f26f" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">确保 Databricks VNET 的私有和公共子网都已添加到存储帐户的防火墙中。</p><h2 id="48a0" class="nh kj it bd kk ni nj dn ko nk nl dp ks lj nm nn ku ln no np kw lr nq nr ky ns bi translated">4e。在 Azure Databricks 上运行笔记本</h2><p id="efe4" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">转到您的 Azure Databricks 工作区，右键单击，然后选择导入。在单选按钮中，选择使用 URL 导入以下笔记本:</p><pre class="ms mt mu mv gt nt nu nv nw aw nx bi"><span id="4368" class="nh kj it nu b gy ny nz l oa ob"><a class="ae lw" href="https://raw.githubusercontent.com/rebremer/devopsai_databricks/master/project/modelling/1_IncomeNotebookExploration.py" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/rebremer/devopsai_databricks/master/project/modelling/</a>1_incomeNotebookExploration_sec.py</span></pre><p id="3867" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">用您自己的变量替换下列变量</p><pre class="ms mt mu mv gt nt nu nv nw aw nx bi"><span id="0533" class="nh kj it nu b gy ny nz l oa ob">storageAccountName = "&lt;&lt;stor name&gt;&gt;"                   #<strong class="nu iu"> </strong>see step_3<br/>azureKevVaultstor2Key = <strong class="nu iu">"stor-key"                     </strong># see step_4a<br/>secretScope = <strong class="nu iu">"devaisec"                               </strong># see step_4b<br/>storageContainer = <strong class="nu iu">"dbrdata"                           </strong># see step_4c<br/>fileName = <strong class="nu iu">"AdultCensusIncome.csv"                     </strong># see step_4c</span></pre><p id="1dfa" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">确保笔记本电脑可以连接的群集正在运行。可以使用默认设置创建集群。然后运行 notebook 来创建 ML 模型。</p><h1 id="309b" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">5.在 Azure DevOps 中构建模型</h1><p id="f169" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">Azure DevOps 是一个工具，可以持续地构建、测试和部署你的代码到任何平台和云。需要完成以下工作:</p><ul class=""><li id="da86" class="mc md it lc b ld lx lg ly lj me ln mf lr mg lv mh mi mj mk bi translated">5a。在数据块中创建令牌</li><li id="03ed" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">5b。创建 Azure DevOps 项目并添加存储库</li><li id="729e" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">5c。创建服务连接</li><li id="c899" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">5d。向项目添加秘密变量</li><li id="f3fe" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">5e。向项目添加其他变量</li><li id="b846" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">5f。创建和构建管道</li></ul><h2 id="7f1c" class="nh kj it bd kk ni nj dn ko nk nl dp ks lj nm nn ku ln no np kw lr nq nr ky ns bi translated">5a。在数据块中创建个人访问令牌</h2><p id="411d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">以编程方式访问 Azure 数据块需要令牌。进入 Azure Databricks，点击右上角的人物图标。选择用户设置，然后生成新令牌。</p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi ov"><img src="../Images/b4aa56663694c670cedcacee205aa32a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y10JWCMzrJ-JiizDb5dSAg.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">5a1. Generate Databricks Access Token</figcaption></figure><p id="702c" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">再次将密钥添加到 Azure 密钥库:</p><pre class="ms mt mu mv gt nt nu nv nw aw nx bi"><span id="cfb4" class="nh kj it nu b gy ny nz l oa ob">az keyvault secret set -n <strong class="nu iu">dbr-token </strong>--vault-name &lt;&lt;vault name&gt;&gt; --value &lt;&lt;token_id&gt;&gt;<br/>az keyvault secret set -n <strong class="nu iu">dbr-key </strong>--vault-name &lt;&lt;vault name&gt;&gt; --value &lt;&lt;key value&gt;&gt;</span></pre><p id="b286" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">另外，将 subscription_id 的值添加到密钥库中。</p><pre class="ms mt mu mv gt nt nu nv nw aw nx bi"><span id="c60f" class="nh kj it nu b gy ny nz l oa ob">az keyvault secret set -n <strong class="nu iu">subscription-id <br/></strong>--vault-name &lt;&lt;vault name&gt;&gt; --value &lt;&lt;subscription_id&gt;&gt;</span></pre><p id="67e1" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">个人访问令牌将作为构建管道的一部分进行滚动。</p><h2 id="25cd" class="nh kj it bd kk ni nj dn ko nk nl dp ks lj nm nn ku ln no np kw lr nq nr ky ns bi translated">5b。创建 Azure DevOps 项目并添加存储库</h2><p id="0494" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">按照这个<a class="ae lw" href="https://docs.microsoft.com/en-us/azure/devops/organizations/projects/create-project?view=azure-devops&amp;tabs=new-nav&amp;viewFallbackFrom=vsts" rel="noopener ugc nofollow" target="_blank">链接</a>创建一个新的 Azure DevOps 项目。创建新项目后，单击存储库文件夹并选择导入以下存储库:</p><pre class="ms mt mu mv gt nt nu nv nw aw nx bi"><span id="4e29" class="nh kj it nu b gy ny nz l oa ob"><a class="ae lw" href="https://github.com/rebremer/devopsai_databricks.git" rel="noopener ugc nofollow" target="_blank">https://github.com/rebremer/devopsai_databricks.git</a></span></pre><h2 id="c1fc" class="nh kj it bd kk ni nj dn ko nk nl dp ks lj nm nn ku ln no np kw lr nq nr ky ns bi translated">5c。创建服务连接</h2><p id="a26b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">从 VSTS 访问资源组中的资源需要一个服务连接。转到项目设置、服务连接，然后选择 Azure 资源管理器。</p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi ow"><img src="../Images/2789cec3b36c213bef876051aad760b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1s52lkveArtlpudXvq3hyw.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">5c1. Go to Service Connection</figcaption></figure><p id="32ed" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">选择服务主体身份验证，并将范围限制到您的资源组。将连接命名为<strong class="lc iu">devopsaisec _ service _ connection</strong></p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi ox"><img src="../Images/d8120a9330a02ba0098172c37d7104e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fv0-IBv69VDklQJ51s9qAA.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">5c2. Create Azure Resource Manager service connection</figcaption></figure><p id="444c" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">要从 Azure DevOps 管道配置密钥滚动，服务主体需要拥有对 Azure 密钥库的访问权限。因此，通过点击服务连接来查找服务连接的应用 id，然后选择“更新服务连接”，然后点击链接“使用服务连接对话框的完整版本”。</p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi oy"><img src="../Images/ce140f6c7af2d2c5a9eaf106c5270726.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yntRSv_r4ty2y4f8MOH6Ww.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">5c3. Application id of service connection</figcaption></figure><p id="5903" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">最后，授予服务主体对密钥库中机密的 set 权限(服务连接已经拥有 get 和 list 权限)。</p><pre class="ms mt mu mv gt nt nu nv nw aw nx bi"><span id="01b4" class="nh kj it nu b gy ny nz l oa ob">az keyvault set-policy --name &lt;&lt;vault name&gt;&gt; <br/>--resource-group &lt;&lt;resource group&gt;&gt;<br/>--secret-permissions get list set <br/>--spn &lt;&lt;application id&gt;&gt;</span></pre><h2 id="b174" class="nh kj it bd kk ni nj dn ko nk nl dp ks lj nm nn ku ln no np kw lr nq nr ky ns bi translated">5d。向项目添加秘密变量</h2><p id="0b2f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在步骤 4a 中，存储密钥被添加到 Azure 密钥库中。随后，在步骤 5a 中添加了 Databricks 访问令牌和 subscription_id。</p><p id="35cf" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">我们的 Azure DevOps 项目需要这些秘密。因此，单击库并选择将 Azure Key Vault 中的机密链接到项目。选择在步骤 5b 中创建的服务连接和存储机密的密钥库，然后单击 authorize。</p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi oz"><img src="../Images/49f1dbbf1d3af69a04c1a9b334363fa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n8VH7iqOQEqRQqr7LZXxxA.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">5c1. Authorize to key vault</figcaption></figure><p id="b537" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">最后，将秘密变量“dbr-key”、“dbr-token”和“subscription-id”添加到项目中，然后单击 save。</p><h2 id="06ad" class="nh kj it bd kk ni nj dn ko nk nl dp ks lj nm nn ku ln no np kw lr nq nr ky ns bi translated">5e。向项目添加其他变量</h2><p id="d9b8" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">除了秘密变量，Azure DevOps 项目运行还需要其他配置。同样，转到库，允许访问所有管道，并使用您自己的值作为组添加以下变量:</p><pre class="ms mt mu mv gt nt nu nv nw aw nx bi"><span id="aeed" class="nh kj it nu b gy ny nz l oa ob"><strong class="nu iu">amls-name</strong>         &lt;&lt;azure ml_service name&gt;&gt;<br/><strong class="nu iu">dbr-secretscope</strong>   <strong class="nu iu">devaisec </strong>&lt;&lt;see step_4b&gt;&gt;<br/><strong class="nu iu">dbr-url</strong>           &lt;&lt;dbr_url, &lt;&lt;your region&gt;&gt;.azuredatabricks.net&gt;&gt;<br/><strong class="nu iu">rg-name </strong>          &lt;&lt;resource group&gt;&gt;<br/><strong class="nu iu">stor-container </strong>   <strong class="nu iu">dbrdata </strong>&lt;&lt;see step_4c&gt;&gt;<br/><strong class="nu iu">stor-name  </strong>       &lt;&lt;store name&gt;&gt;<br/><strong class="nu iu">keyvault-name </strong>    &lt;&lt;vault name&gt;&gt;</span></pre><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi pa"><img src="../Images/39817dae4ae971f13eb3af568ca88a84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QDWTD8Lj0eFIImM-3Vxq4A.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">5e1. Create secret variable group to be used in project</figcaption></figure><h2 id="1ab0" class="nh kj it bd kk ni nj dn ko nk nl dp ks lj nm nn ku ln no np kw lr nq nr ky ns bi translated">5f。创建和构建管道</h2><p id="9885" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在这一步中，将创建构建管道。单击“管道”，选择“新建”，然后选择“新建管道”。保留默认值，然后单击“继续”。在下一个屏幕中，选择“配置为代码”并单击“应用”。</p><p id="8b89" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">选择作为代理池以拥有“托管的 Ubuntu 1604”并选择作为文件路径:<strong class="lc iu">project/config code _ build _ sec . yml</strong>。然后单击保存，另请参见下面的屏幕</p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi pb"><img src="../Images/627b7559f457eedad517bc265b95b461.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iT9s1TSPJmP5B9WPUHfS8Q.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">5f1. Configuration as code</figcaption></figure><p id="1568" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">最后，链接前面创建的秘密变量组。因此，单击变量组，链接 5d 中创建的秘密变量组和 5e 中的其他变量组，并单击保存和队列开始构建。</p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi pc"><img src="../Images/b84f5f1fa89ca2e01ae6953706be00d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*md7BQ6p8NUXNJt7arR72aA.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">5f2. Link variables group to build pipeline and build</figcaption></figure><p id="8387" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">成功执行 run 后，您可以看到构建、首次运行和最终结果。</p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi oz"><img src="../Images/be275e02772d7d7e3bd95086ea1cc583.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YNxnn73gHCPVzBcAIHAbEg.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">5f3. Succesfull build</figcaption></figure><p id="913a" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">在这个构建管道中，执行以下步骤:</p><ul class=""><li id="8b60" class="mc md it lc b ld lx lg ly lj me ln mf lr mg lv mh mi mj mk bi translated">通过运行 notebook 使用 Azure Databricks 创建模型。</li><li id="5348" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">从将在发布步骤中部署的模型创建 docker 映像</li><li id="f1eb" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">执行 Databricks 令牌的密钥翻转，以最大限度地降低风险</li><li id="9ecb" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">创建用作发布管道输入的构建工件</li></ul><h1 id="4916" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">6.Azure DevOps 中的发布模型</h1><p id="fcba" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">下一部分是关于创建一个发布管道。在这种情况下，它将机器学习模型部署为 web 应用程序上的容器。</p><ul class=""><li id="87f9" class="mc md it lc b ld lx lg ly lj me ln mf lr mg lv mh mi mj mk bi translated">6a。(可选)创建应用服务环境</li><li id="5ebb" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">6b。创建 web 应用和应用服务计划</li><li id="f492" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">6c。创建发布管道</li><li id="01c2" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">6d。将容器部署到 web 应用程序</li><li id="9e44" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">6e。在 web 应用中启用 Azure Active Directory 身份验证</li><li id="f671" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">6f。在 Postman 中设置对 web 应用程序的身份验证</li></ul><h2 id="fae6" class="nh kj it bd kk ni nj dn ko nk nl dp ks lj nm nn ku ln no np kw lr nq nr ky ns bi translated">6a。(可选)创建应用服务环境</h2><p id="33bf" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">为了实现对您的 web 应用程序的完全网络隔离，应使用应用程序服务环境。在应用服务环境中部署的所有 web 应用和应用服务计划。</p><div class="oc od gp gr oe of"><a href="https://docs.microsoft.com/en-us/azure/app-service/environment/create-ilb-ase" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">使用应用服务环境 Azure 创建内部负载平衡器</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">关于如何创建和使用互联网隔离的 Azure 应用服务环境的详细信息</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">docs.microsoft.com</p></div></div><div class="oo l"><div class="pd l oq or os oo ot nb of"/></div></div></a></div><p id="bd0a" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">请注意，应用服务环境的成本可能很高。本教程的其余部分也可以使用未部署在私有 ASE 中的 web 应用来完成，但是，web 应用将拥有一个公共 IP。</p><h2 id="919b" class="nh kj it bd kk ni nj dn ko nk nl dp ks lj nm nn ku ln no np kw lr nq nr ky ns bi translated">6b。使用 Azure CLI 创建 web 应用程序</h2><p id="e2df" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">执行以下命令行在 linux 中创建 Azure web。</p><pre class="ms mt mu mv gt nt nu nv nw aw nx bi"><span id="40c1" class="nh kj it nu b gy ny nz l oa ob">az appservice plan create -g &lt;&lt;resource group&gt;&gt; -n devaisec-plan --is-linux --sku S1<br/>az webapp create -n devaisec-app -g &lt;&lt;resource group&gt;&gt; <br/>-p devaisec-plan -i elnably/dockerimagetest</span></pre><h2 id="f271" class="nh kj it bd kk ni nj dn ko nk nl dp ks lj nm nn ku ln no np kw lr nq nr ky ns bi translated">6c。创建发布管道</h2><p id="f950" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在这一步中，容器被部署到 web 应用程序。转到“Pipelines”，选择“Releases”，然后选择“empty job”作为模板。更改名称，然后单击保存。</p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi pe"><img src="../Images/36108ef7a0f51295a4a710314bf5e82d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oeprQZDBM-2qs0aK_cFBFA.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">6c1. Create release pipeline</figcaption></figure><p id="e7d4" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">添加您想要在此管道中发布的工件。在这种情况下，选择从构建管道中创建的工件。确保您始终选择默认版本:最新</p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi pf"><img src="../Images/42e37b278a1f72c8e323852e0951b857.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ksTVJN_ji0kKGwmBG7lLCQ.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">6c2. Add release artifact</figcaption></figure><p id="f636" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">最后，将两个变量组(在步骤 5c 和 5d 中创建的)也添加到发布管道中。转到发布管道中的变量，并链接两个组，就像在构建管道中所做的那样。</p><h2 id="6b85" class="nh kj it bd kk ni nj dn ko nk nl dp ks lj nm nn ku ln no np kw lr nq nr ky ns bi translated">6d。将容器部署到 web 应用程序</h2><p id="018e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">转到发布管道并选择添加任务。然后，您将看到一个包含代理作业的屏幕。同样，您需要将代理池更改为 Hosted Ubuntu 1604。</p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi pg"><img src="../Images/7a0a557ec1959af7ba58fe8398181d9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G14_yB0duMtxZMRR60oclg.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">6d1. Agent pool Ubuntu 1604</figcaption></figure><p id="1452" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">随后，通过搜索 Azure CLI 添加新任务。选择<strong class="lc iu">devopsaisec _ service _ connection</strong>作为服务连接，引用“41_deployImageToWebapp_sec.sh”作为脚本路径。然后通过引用变量$(rg-name)使用以下 3 个由空格分隔的参数:webapp 的名称、容器注册表的名称和资源组的名称。</p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi ph"><img src="../Images/c17fd9a3f7c3b0653636220b47f172ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h90q0Qz79A4LtBdPmkypfA.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">6d2. Azure CLI to deploy container to web app</figcaption></figure><p id="9aa4" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">保存并关闭，然后选择创建发布管道。填写变量以创建发布。然后通过点击 deploy 按钮来部署发布。等待 5 分钟，然后检查状态是否从“未部署”变为“成功”。</p><h2 id="5a4e" class="nh kj it bd kk ni nj dn ko nk nl dp ks lj nm nn ku ln no np kw lr nq nr ky ns bi translated">6e。在 web 应用中启用 Azure Active Directory 身份验证</h2><p id="3f40" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在此步骤中，使用 Azure 门户在 web 应用中启用 Azure Active Directory 身份验证。转到您的 web 应用，选择身份验证/授权，然后选择 Azure Active Directory。然后选择快速并使用与您的 web 应用程序相同的名称创建新的应用程序注册</p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi pi"><img src="../Images/28043bbbe8f5fc53150cd8de0b9bc652.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ev_n9WW7bKHpHCwOmBuvTQ.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">6e1. Set up AAD authentication in web app</figcaption></figure><p id="5c51" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">在此步骤之后，web 应用程序 URL 需要身份验证，并且不能被使用。</p><h2 id="1601" class="nh kj it bd kk ni nj dn ko nk nl dp ks lj nm nn ku ln no np kw lr nq nr ky ns bi translated">6f。在 Postman 中设置对 web 应用程序的身份验证</h2><p id="f8f8" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">最后一步是设置工具<a class="ae lw" href="https://www.getpostman.com/" rel="noopener ugc nofollow" target="_blank">邮差</a>来验证网络应用。在下面的<a class="ae lw" href="https://blogs.msdn.microsoft.com/aaddevsup/2018/05/23/using-postman-to-call-the-microsoft-graph-api-using-authorization-code-flow/" rel="noopener ugc nofollow" target="_blank">教程中，解释了如何做到这一点。</a></p><p id="029a" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">在 Postman to the 应用程序中设置 Postman 和客户端身份验证后，可以使用 HTTPS 端点来创建预测。可以在项目中的项目/services/50_testEndpoint.py 中找到一个示例负载。在本例中，预测了三个人的收入等级。</p><ul class=""><li id="f727" class="mc md it lc b ld lx lg ly lj me ln mf lr mg lv mh mi mj mk bi translated">对第一个人的预测是收入高于 50k，</li><li id="a52f" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">对于另外两个人，预测值低于 50k。</li></ul><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi pj"><img src="../Images/0128f5dfcd94e6c6456178362d8d0237.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DW-yOHQh7st9ieVhquFvVA.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">6f1. Postman with bearer authentication to consume API for predictions</figcaption></figure><h1 id="fab3" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">7.结论</h1><p id="decd" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在本教程中，将为机器学习项目创建一个安全的端到端管道。在这个项目中，Azure Databricks 被用来创建一个机器学习模型，并将其作为一个端点部署在一个 web 应用程序上。端到端管道的保护如下:</p><ul class=""><li id="d124" class="mc md it lc b ld lx lg ly lj me ln mf lr mg lv mh mi mj mk bi translated">使用 Azure Active Directory 对 Web 应用程序进行身份验证和授权</li><li id="09eb" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">存储帐户和 Web 应用程序的网络访问控制列表</li><li id="2b98" class="mc md it lc b ld ml lg mm lj mn ln mo lr mp lv mh mi mj mk bi translated">在 Azure 密钥库中安全存储密钥，并在构建管道中添加密钥滚动过程</li></ul><p id="4fe6" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated">这使公司能够 1)端到端地跟踪模型，2)建立对模型的信任，3)避免模型预测莫名其妙的情况，最重要的是 4)使用 AAD、VNETs 和密钥库保护数据、端点和秘密，另请参见架构概述:</p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi mr"><img src="../Images/9db4cf1f8beed719c882c1b2da73228a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k3yPuSOu-81eMxn4tL69tA.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">7. Architecture overview</figcaption></figure><p id="b8a0" class="pw-post-body-paragraph la lb it lc b ld lx ju lf lg ly jx li lj lz ll lm ln ma lp lq lr mb lt lu lv im bi translated"><strong class="lc iu"> <em class="mq">注来自《走向数据科学》的编辑:</em> </strong> <em class="mq">虽然我们允许独立作者根据我们的</em> <a class="ae lw" rel="noopener" target="_blank" href="/questions-96667b06af5"> <em class="mq">规则和指导方针</em> </a> <em class="mq">发表文章，但我们不认可每个作者的贡献。你不应该在没有寻求专业建议的情况下依赖一个作者的作品。详见我们的</em> <a class="ae lw" rel="noopener" target="_blank" href="/readers-terms-b5d780a700a4"> <em class="mq">读者术语</em> </a> <em class="mq">。</em></p></div></div>    
</body>
</html>