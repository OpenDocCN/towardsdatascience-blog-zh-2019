<html>
<head>
<title>Installing PySpark with JAVA 8 on ubuntu 18.04</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 ubuntu 18.04 上安装 PySpark 和 JAVA 8</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/installing-pyspark-with-java-8-on-ubuntu-18-04-6a9dea915b5b?source=collection_archive---------3-----------------------#2019-07-30">https://towardsdatascience.com/installing-pyspark-with-java-8-on-ubuntu-18-04-6a9dea915b5b?source=collection_archive---------3-----------------------#2019-07-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a9bf57f01f473cc0a2b887d634e8c15a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HveJ8thux1AlhfJK3AZ8RQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">source: <a class="ae kc" href="https://bigdatapath.wordpress.com/2018/02/03/introduction-to-apache-spark/" rel="noopener ugc nofollow" target="_blank">https://bigdatapath.wordpress.com/2018/02/03/introduction-to-apache-spark/</a></figcaption></figure><h2 id="660e" class="kd ke iq bd kf kg kh dn ki kj kk dp kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">分布式机器学习的基本设置</h2><p id="f048" class="pw-post-body-paragraph kz la iq lb b lc ld le lf lg lh li lj km lk ll lm kq ln lo lp ku lq lr ls lt ij bi translated">经过几个小时的挣扎，我终于安装了 java 8，spark 并配置了所有的环境变量。我浏览了许多中型文章和 StackOverflow 答案，但没有一个特定的答案或帖子解决了我的问题。所以这只是我的一点小小的努力。</p><p id="144e" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated">我的机器安装了 ubuntu 18.04，我使用的是 java 8 和 anaconda3。如果您按照步骤操作，您应该可以毫无问题地安装 PySpark。</p><ol class=""><li id="a5dc" class="lz ma iq lb b lc lu lg lv km mb kq mc ku md lt me mf mg mh bi translated"><strong class="lb ir">确保你已经安装了 java。</strong></li></ol><p id="c0ba" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated">如果没有，请在终端中运行以下命令:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="684a" class="kd ke iq mn b gy mr ms l mt mu">sudo apt install openjdk-8-jdk</span></pre><p id="ab4f" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated">安装后，如果您在终端中键入<strong class="lb ir"> java -version </strong>，您将得到:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="3b27" class="kd ke iq mn b gy mr ms l mt mu">openjdk version "1.8.0_212"<br/>OpenJDK Runtime Environment (build 1.8.0_212-8u212-b03-0ubuntu1.18.04.1-b03)<br/>OpenJDK 64-Bit Server VM (build 25.212-b03, mixed mode)</span></pre><p id="968d" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated"><strong class="lb ir"> 2。从</strong> <a class="ae kc" href="https://spark.apache.org/downloads.html?" rel="noopener ugc nofollow" target="_blank"> <strong class="lb ir">下载火花 https://spark.apache.org/downloads.html</strong></a></p><p id="997a" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated">记住你下载的目录。我把它放在我的默认下载文件夹中，我将在那里安装 spark。</p><p id="6013" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated"><strong class="lb ir"> 3。设置 JAVA _ HOME 环境变量。</strong></p><p id="db17" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated">为此，在终端中运行以下命令:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="4f10" class="kd ke iq mn b gy mr ms l mt mu">sudo vim /etc/environment</span></pre><p id="5cb6" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated">它将在 vim 中打开文件。然后，在 PATH 变量后的新行中添加</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="e73b" class="kd ke iq mn b gy mr ms l mt mu">JAVA_HOME="/usr/lib/jvm/java-8-openjdk-amd64"</span></pre><p id="bd69" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated">wq 型！然后退出。这将在文件中保存编辑。后来，在终端运行中</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="0af8" class="kd ke iq mn b gy mr ms l mt mu">source /etc/environment</span></pre><p id="d977" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated">不要忘记在终端中运行最后一行，因为这将创建环境变量并将其加载到当前运行的 shell 中。现在，如果你跑</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="dd4a" class="kd ke iq mn b gy mr ms l mt mu">echo $JAVA_HOME</span></pre><p id="4e71" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated">输出应该是:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="4667" class="kd ke iq mn b gy mr ms l mt mu">/usr/lib/jvm/java-8-openjdk-amd64</span></pre><p id="00f5" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated">就像加进去的一样。现在 ubuntu 的一些版本不在每次打开终端时运行<code class="fe mv mw mx mn b">/etc/environment</code>文件，所以最好把它加入进来。bashrc 文件为。bashrc 文件在每次打开时都会加载到终端。因此，在终端中运行以下命令，</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="5541" class="kd ke iq mn b gy mr ms l mt mu">vim ~/.bashrc</span></pre><p id="92d0" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated">文件打开。在末尾添加</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="f35f" class="kd ke iq mn b gy mr ms l mt mu">source /etc/environment</span></pre><p id="2ec8" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated">稍后我们将在它下面添加 spark 变量。现在退出并加载。bashrc 文件，通过运行下面的命令。</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="92ec" class="kd ke iq mn b gy mr ms l mt mu">source ~/.bashrc </span></pre><p id="5d42" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated">或者您可以退出此终端并创建另一个终端。现在，如果您运行 echo $JAVA_HOME，您应该会得到预期的输出。</p><p id="1e7d" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated"><strong class="lb ir"> 4。安装 spark。</strong></p><p id="d5e9" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated">转到下载 spark zip 文件的目录，运行命令安装它:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="5c58" class="kd ke iq mn b gy mr ms l mt mu">cd Downloads<br/>sudo tar -zxvf spark-2.4.3-bin-hadoop2.7.tgz</span></pre><blockquote class="my mz na"><p id="66f4" class="kz la nb lb b lc lu le lf lg lv li lj nc lw ll lm nd lx lo lp ne ly lr ls lt ij bi translated">注意:如果您的 spark 文件是不同的版本，请相应地修改名称。</p></blockquote><p id="8254" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated"><strong class="lb ir"> 5。为 spark 配置环境变量。</strong></p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="9f93" class="kd ke iq mn b gy mr ms l mt mu">vim ~/.bashrc</span></pre><p id="d20f" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated">在末尾增加以下内容:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="861f" class="kd ke iq mn b gy mr ms l mt mu">export SPARK_HOME=~/Downloads/spark-2.4.3-bin-hadoop2.7<br/>export PATH=$PATH:$SPARK_HOME/bin<br/>export PATH=$PATH:~/anaconda3/bin<br/>export PYTHONPATH=$SPARK_HOME/python:$PYTHONPATH<br/>export PYSPARK_DRIVER_PYTHON="jupyter"<br/>export PYSPARK_DRIVER_PYTHON_OPTS="notebook"<br/>export PYSPARK_PYTHON=python3<br/>export PATH=$PATH:$JAVA_HOME/jre/bin</span></pre><p id="ee61" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated">保存文件并退出。最后，加载。bashrc 文件在终端中再次被</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="6a29" class="kd ke iq mn b gy mr ms l mt mu">source ~/.bashrc</span></pre><p id="cc81" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated">现在运行:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="fa10" class="kd ke iq mn b gy mr ms l mt mu">pyspark</span></pre><p id="7bde" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated">这将为您打开一个 jupyter 笔记本。我卸载并再次运行命令来安装 spark 和 java。最后，如果你做了:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="194b" class="kd ke iq mn b gy mr ms l mt mu">cd $SPARK_HOME<br/>cd bin <br/>spark-shell --version</span></pre><p id="ab2f" class="pw-post-body-paragraph kz la iq lb b lc lu le lf lg lv li lj km lw ll lm kq lx lo lp ku ly lr ls lt ij bi translated">你会看到这样的图像。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/55f2f9d282366fe2512f06975f6fe11c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6SOGKiggd5BEX7OJ1lmdOg.png"/></div></div></figure><h2 id="1563" class="kd ke iq bd kf kg kh dn ki kj kk dp kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">结论</h2><p id="7619" class="pw-post-body-paragraph kz la iq lb b lc ld le lf lg lh li lj km lk ll lm kq ln lo lp ku lq lr ls lt ij bi translated">我希望这篇文章能帮助你安装 spark。今天，Spark 已经成为分布式机器学习的一个非常重要的工具，它是任何数据科学家或机器学习工作的必备简历。设置 spark 可能是首先要做的事情，其次是学习 spark 数据框架，然后在任何项目中使用它。</p><h2 id="6092" class="kd ke iq bd kf kg kh dn ki kj kk dp kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">接触</h2><p id="0082" class="pw-post-body-paragraph kz la iq lb b lc ld le lf lg lh li lj km lk ll lm kq ln lo lp ku lq lr ls lt ij bi translated">如果你热爱数据科学，让我们在<a class="ae kc" href="https://www.linkedin.com/in/parijatbhatt/" rel="noopener ugc nofollow" target="_blank"> linkedin </a>上联系或者在这里关注我。如果你喜欢这个故事，请鼓掌欣赏。谢谢:)</p></div></div>    
</body>
</html>