<html>
<head>
<title>An Introduction to R— Merging and Filtering data— Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R 简介—合并和过滤数据—第 1 部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/predicting-who-will-win-the-2019-australian-tennis-open-in-the-mens-tour-merging-and-filtering-2eabffd633e9?source=collection_archive---------20-----------------------#2019-01-09">https://towardsdatascience.com/predicting-who-will-win-the-2019-australian-tennis-open-in-the-mens-tour-merging-and-filtering-2eabffd633e9?source=collection_archive---------20-----------------------#2019-01-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="f94d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过对 2019 年澳网男子巡回赛数据的筛选和合并进行数据理解。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/0df61dd4b9e022e1c9bb7f12e68f95d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dnm67MLPAgeE6HS6hxGRXg.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by <a class="ae le" href="https://unsplash.com/photos/YSfTcJZR-ws?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Christopher Burns</a> on <a class="ae le" href="https://unsplash.com/search/photos/tennis?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0948" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你知道当澳大利亚网球公开赛造访墨尔本的时候是夏天，每个人都为罗杰和塞丽娜的到来而兴奋。</p><h1 id="6f94" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">问题</h1><p id="cd5d" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">我有兴趣预测谁可能赢得 2019 年澳大利亚网球公开赛男子巡回赛。我希望他退役前是罗杰·费德勒。</p><h1 id="80d9" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">资料组</h1><p id="565a" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">我从网站<a class="ae le" href="http://www.tennis-data.co.uk/data.php" rel="noopener ugc nofollow" target="_blank">http://www.tennis-data.co.uk/data.php</a>选择了从 2000 年到 2019 年 1 月的男子网球锦标赛历史成绩，这些成绩以 CSV 文件的形式提供。</p><h1 id="4b39" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">数据字典</h1><p id="8ba7" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">网球数据附带的注释解释了由<a class="ae le" href="http://www.tennis-data.co.uk/notes.txt" rel="noopener ugc nofollow" target="_blank">网球博彩</a>提供的数据的属性:</p><pre class="kp kq kr ks gt mi mj mk ml aw mm bi"><span id="7619" class="mn lg it mj b gy mo mp l mq mr">Key to results data:<br/><br/>ATP = Tournament number (men)<br/>WTA = Tournament number (women)<br/>Location = Venue of tournament<br/>Tournament = Name of tournament (including sponsor if relevant)<br/>Data = Date of match (note: prior to 2003 the date shown for all matches played in a single tournament is the start date)<br/>Series = Name of ATP tennis series (Grand Slam, Masters, International or International Gold)<br/>Tier = Tier (tournament ranking) of WTA tennis series.<br/>Court = Type of court (outdoors or indoors)<br/>Surface = Type of surface (clay, hard, carpet or grass)<br/>Round = Round of match<br/>Best of = Maximum number of sets playable in match<br/>Winner = Match winner<br/>Loser = Match loser<br/>WRank = ATP Entry ranking of the match winner as of the start of the tournament<br/>LRank = ATP Entry ranking of the match loser as of the start of the tournament<br/>WPts = ATP Entry points of the match winner as of the start of the tournament<br/>LPts = ATP Entry points of the match loser as of the start of the tournament<br/>W1 = Number of games won in 1st set by match winner<br/>L1 = Number of games won in 1st set by match loser<br/>W2 = Number of games won in 2nd set by match winner<br/>L2 = Number of games won in 2nd set by match loser<br/>W3 = Number of games won in 3rd set by match winner<br/>L3 = Number of games won in 3rd set by match loser<br/>W4 = Number of games won in 4th set by match winner<br/>L4 = Number of games won in 4th set by match loser<br/>W5 = Number of games won in 5th set by match winner<br/>L5 = Number of games won in 5th set by match loser<br/>Wsets = Number of sets won by match winner<br/>Lsets = Number of sets won by match loser<br/>Comment = Comment on the match (Completed, won through retirement of loser, or via Walkover)</span></pre><h1 id="4fd7" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">在 Mac Book Pro 中将 csv 文件合并成一个数据文件</h1><p id="e951" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">我在 Youtube 上看到了一个来自<a class="ae le" href="https://www.youtube.com/watch?v=5c_VKhYSTjA" rel="noopener ugc nofollow" target="_blank">的 Trent Jessee </a>的教程，它帮助我在 Macbook Pro 上将 2000 年至 2019 年的多个 csv 文件合并成一个文件。</p><p id="6897" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">#打开终端会话，进入<br/> cd 桌面</p><p id="0286" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">#输入 cd 和保存 csv 文件的文件夹名称<br/> cd CSV</p><p id="365e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">#用此命令合并文件<br/> cat *。csv &gt;合并. csv</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h1 id="1b8d" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">将您的数据加载或导入 R</h1><pre class="kp kq kr ks gt mi mj mk ml aw mm bi"><span id="0538" class="mn lg it mj b gy mo mp l mq mr"><em class="mu"># Set the working directory</em><br/>setwd("~/Desktop/ATP")<br/><br/><em class="mu"># Read the dataframe into Rstudio as a csv file. </em><br/>tennis_data &lt;- read.csv("merged.csv",stringsAsFactors = FALSE, header = TRUE)<br/><br/><em class="mu"># Review the first 5 observations</em><br/>head(tennis_data)</span><span id="0dc9" class="mn lg it mj b gy mv mp l mq mr">##   ATP Location                         Tournament   Date        Series<br/>## 1   1 Adelaide Australian Hardcourt Championships 1/3/00 International<br/>## 2   1 Adelaide Australian Hardcourt Championships 1/3/00 International<br/>## 3   1 Adelaide Australian Hardcourt Championships 1/3/00 International<br/>## 4   1 Adelaide Australian Hardcourt Championships 1/3/00 International<br/>## 5   1 Adelaide Australian Hardcourt Championships 1/3/00 International<br/>## 6   1 Adelaide Australian Hardcourt Championships 1/3/00 International<br/>##     Court Surface     Round Best.of       Winner          Loser WRank<br/>## 1 Outdoor    Hard 1st Round       3   Dosedel S.    Ljubicic I.    63<br/>## 2 Outdoor    Hard 1st Round       3   Enqvist T.     Clement A.     5<br/>## 3 Outdoor    Hard 1st Round       3    Escude N.  Baccanello P.    40<br/>## 4 Outdoor    Hard 1st Round       3   Federer R. Knippschild J.    65<br/>## 5 Outdoor    Hard 1st Round       3  Fromberg R.  Woodbridge T.    81<br/>## 6 Outdoor    Hard 1st Round       3 Gambill J.M.     Arthurs W.    58<br/>##   LRank W1 L1 W2 L2 W3 L3 W4 L4 W5 L5 Wsets Lsets   Comment X X.1 X.2 X.3<br/>## 1    77  6  4  6  2 NA NA NA NA NA NA     2     0 Completed              <br/>## 2    56  6  3  6  3 NA NA NA NA NA NA     2     0 Completed              <br/>## 3   655  6  7  7  5  6  3 NA NA NA NA     2     1 Completed              <br/>## 4    87  6  1  6  4 NA NA NA NA NA NA     2     0 Completed              <br/>## 5   198  7  6  5  7  6  4 NA NA NA NA     2     1 Completed              <br/>## 6   105  3  6  7  6  6  4 NA NA NA NA     2     1 Completed</span></pre><p id="4fed" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">##根据 2000 年至 2019 年的数据预测谁将赢得 2019 年澳大利亚网球公开赛</p><p id="4f10" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">#加载包</p><p id="33dd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">图书馆(dplyr)</p><p id="f98b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">#设置工作目录</p><p id="8879" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">setwd(" ~/桌面/ATP ")</p><p id="ad49" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">#将数据帧作为 csv 文件读入 Rstudio。</p><p id="28ce" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">tennis _ data </p><p id="1c43" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">#回顾前 5 条观察结果。最佳实践是使用 tail()来查看最后 5 次观察。</p><p id="2ed9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">主管(网球 _ 数据)</p><h1 id="19b0" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">查看合并数据的结构</h1><p id="9683" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">在 R 中，我们可以探索数据的结构，检查数据的属性，在预处理之前观察原始数据。</p><p id="cf2f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">str(网球 _ 数据)</p><p id="515d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在合并的数据文件中有 52383 行和 83 列。</p><pre class="kp kq kr ks gt mi mj mk ml aw mm bi"><span id="ba80" class="mn lg it mj b gy mo mp l mq mr">## 'data.frame':    52383 obs. of  83 variables:<br/>##  $ ATP       : int  1 1 1 1 1 1 1 1 1 1 ...<br/>##  $ Location  : chr  "Adelaide" "Adelaide" "Adelaide" "Adelaide" ...<br/>##  $ Tournament: chr  "Australian Hardcourt Championships" "Australian Hardcourt Championships" "Australian Hardcourt Championships" "Australian Hardcourt Championships" ...<br/>##  $ Date      : chr  "1/3/00" "1/3/00" "1/3/00" "1/3/00" ...<br/>##  $ Series    : chr  "International" "International" "International" "International" ...<br/>##  $ Court     : chr  "Outdoor" "Outdoor" "Outdoor" "Outdoor" ...<br/>##  $ Surface   : chr  "Hard" "Hard" "Hard" "Hard" ...<br/>##  $ Round     : chr  "1st Round" "1st Round" "1st Round" "1st Round" ...<br/>##  $ Best.of   : int  3 3 3 3 3 3 3 3 3 3 ...<br/>##  $ Winner    : chr  "Dosedel S." "Enqvist T." "Escude N." "Federer R." ...<br/>##  $ Loser     : chr  "Ljubicic I." "Clement A." "Baccanello P." "Knippschild J." ...<br/>##  $ WRank     : chr  "63" "5" "40" "65" ...<br/>##  $ LRank     : chr  "77" "56" "655" "87" ...<br/>##  $ W1        : chr  "6" "6" "6" "6" ...<br/>##  $ L1        : chr  "4" "3" "7" "1" ...<br/>##  $ W2        : int  6 6 7 6 5 7 6 7 2 6 ...<br/>##  $ L2        : int  2 3 5 4 7 6 1 6 6 7 ...<br/>##  $ W3        : int  NA NA 6 NA 6 6 NA NA 6 6 ...<br/>##  $ L3        : int  NA NA 3 NA 4 4 NA NA 1 4 ...<br/>##  $ W4        : int  NA NA NA NA NA NA NA NA NA NA ...<br/>##  $ L4        : int  NA NA NA NA NA NA NA NA NA NA ...<br/>##  $ W5        : int  NA NA NA NA NA NA NA NA NA NA ...<br/>##  $ L5        : int  NA NA NA NA NA NA NA NA NA NA ...<br/>##  $ Wsets     : int  2 2 2 2 2 2 2 2 2 2 ...<br/>##  $ Lsets     : int  0 0 1 0 1 1 0 0 1 1 ...<br/>##  $ Comment   : chr  "Completed" "Completed" "Completed" "Completed" ...</span></pre><h1 id="f2fd" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">数据框的尺寸</h1><p id="53ab" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">数据帧的尺寸包括-52383 行和 83 列。</p><p id="d305" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">dim(网球 _ 数据)</p><h1 id="d366" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">检查是否有丢失的值</h1><p id="340c" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">有相当多的缺失值。评估后可能需要对缺失值进行插补。</p><p id="f41b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">is.na(网球 _ 数据)</p><h1 id="e3f2" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">过滤并子集化 R 中的数据</h1><p id="62ab" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">我需要过滤我的数据，以便更易于管理，我对分析 2000 年至 2019 年的澳大利亚网球公开赛很感兴趣。</p><p id="c2a2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">#我们只想查看结果数据的前 26 列</p><p id="04f6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">姓名(网球 _ 数据)[1:26]</p><p id="ebbf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">#我们想要过滤澳大利亚网球公开赛的数据，以便我们可以使用数据的子集:</p><p id="1abe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">aust _ Open </p><p id="d3b7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">#查看仅与澳大利亚网球公开赛相关的数据子集的结构:</p><p id="2aae" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">str(aust_open)</p><pre class="kp kq kr ks gt mi mj mk ml aw mm bi"><span id="581f" class="mn lg it mj b gy mo mp l mq mr">## 'data.frame':    2413 obs. of  26 variables:<br/>##  $ ATP       : int  6 6 6 6 6 6 6 6 6 6 ...<br/>##  $ Location  : chr  "Melbourne" "Melbourne" "Melbourne" "Melbourne" ...<br/>##  $ Tournament: chr  "Australian Open" "Australian Open" "Australian Open" "Australian Open" ...<br/>##  $ Date      : chr  "1/17/00" "1/17/00" "1/17/00" "1/17/00" ...<br/>##  $ Series    : chr  "Grand Slam" "Grand Slam" "Grand Slam" "Grand Slam" ...<br/>##  $ Court     : chr  "Outdoor" "Outdoor" "Outdoor" "Outdoor" ...<br/>##  $ Surface   : chr  "Hard" "Hard" "Hard" "Hard" ...<br/>##  $ Round     : chr  "1st Round" "1st Round" "1st Round" "1st Round" ...<br/>##  $ Best.of   : int  5 5 5 5 5 5 5 5 5 5 ...<br/>##  $ Winner    : chr  "Agassi A." "Alami K." "Arazi H." "Behrend T." ...<br/>##  $ Loser     : chr  "Puerta M." "Manta L." "Alonso J." "Meligeni F." ...<br/>##  $ WRank     : chr  "1" "35" "41" "106" ...<br/>##  $ LRank     : chr  "112" "107" "111" "28" ...<br/>##  $ W1        : chr  "6" "6" "6" "6" ...<br/>##  $ L1        : chr  "2" "4" "3" "2" ...<br/>##  $ W2        : int  6 7 7 4 6 6 6 6 6 5 ...<br/>##  $ L2        : int  2 6 6 6 4 1 1 4 4 7 ...<br/>##  $ W3        : int  6 7 6 6 6 6 6 NA 6 6 ...<br/>##  $ L3        : int  3 5 2 7 4 4 4 NA 4 3 ...<br/>##  $ W4        : int  NA NA NA 6 0 NA 7 NA NA 7 ...<br/>##  $ L4        : int  NA NA NA 3 6 NA 6 NA NA 5 ...<br/>##  $ W5        : int  NA NA NA 6 6 NA NA NA NA NA ...<br/>##  $ L5        : int  NA NA NA 0 4 NA NA NA NA NA ...<br/>##  $ Wsets     : int  3 3 3 3 3 3 3 2 3 3 ...<br/>##  $ Lsets     : int  0 0 0 2 2 0 1 0 0 1 ...<br/>##  $ Comment   : chr  "Completed" "Completed" "Completed" "Completed" ...</span></pre><h1 id="4db2" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">编写并导出您的数据框架</h1><p id="60f2" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">现在，我对仅包含澳大利亚公开赛的数据感到满意，我将编写文件并将其导出为 csv 文件，这样我就可以用它来预处理我的数据以及在 R 和 Tableau 中可视化数据。</p><pre class="kp kq kr ks gt mi mj mk ml aw mm bi"><span id="7c19" class="mn lg it mj b gy mo mp l mq mr"><em class="mu"># Save the dataframe to a csv file to write the csv file into R working folder:</em></span><span id="0e30" class="mn lg it mj b gy mv mp l mq mr">write.csv(aust_open,file = "aust_open.csv", row.names = FALSE)</span></pre><p id="79b9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我的下一篇文章将包括:</p><ul class=""><li id="0cdf" class="mw mx it js b jt ju jx jy kb my kf mz kj na kn nb nc nd ne bi translated"><strong class="js iu">预处理 R 中的数据</strong></li><li id="6eed" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><strong class="js iu">R 中的数据可视化，查看数据的样子</strong></li><li id="907a" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><strong class="js iu">R 中数据的探索性数据分析</strong></li><li id="71f1" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><strong class="js iu">缺失数据的处理</strong></li></ul><p id="56bb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感谢阅读，敬请关注，编码快乐！</p></div></div>    
</body>
</html>