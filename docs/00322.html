<html>
<head>
<title>Docker image for NLP</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NLP 的 Docker 图像</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/docker-image-for-nlp-5402c9a9069e?source=collection_archive---------18-----------------------#2019-01-14">https://towardsdatascience.com/docker-image-for-nlp-5402c9a9069e?source=collection_archive---------18-----------------------#2019-01-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="dc91" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><em class="kf">现成的解决方案</em></h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/18b9cc281ea2130adb5caf49e541e5a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VS_PIL-X5TX0gRMNnEeDpw.jpeg"/></div></div></figure><p id="c1ab" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">自然语言处理是我们在<a class="ae lo" href="https://potehalabs.com" rel="noopener ugc nofollow" target="_blank">波特哈实验室</a>工作的主要方向之一。我们做文本分析，聊天机器人开发和信息检索。所以我们定期使用 Flair，Natasha，TensorFlow 和 Pytorch，NLTK，有时候会遇到英语以外的语言。现有的解决方案并不总是适合我们面临的每一个问题:有些很难启动，有些太复杂和沉重。</p><p id="b54b" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">因此，我们已经用所有方便的 NLP 框架编译了我们自己的 Docker 映像，包括深度学习。它适合我们几乎 80%的任务，并且节省了安装框架的时间。</p><h2 id="27a7" class="lp lq iq bd lr ls lt dn lu lv lw dp lx lb ly lz ma lf mb mc md lj me mf mg mh bi translated"><strong class="ak">当前方法</strong></h2><p id="12ae" class="pw-post-body-paragraph ks kt iq ku b kv mi jr kx ky mj ju la lb mk ld le lf ml lh li lj mm ll lm ln ij bi translated">一般来说，现在大多数数据科学解决方案都是通过以下方式部署的:</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/2426aa76cd0838d498bf7ce86a724a12.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/1*MNhOh3ZhcpqN3tolfUzXhg.gif"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk">One doesn’t simply deploy on bare metal</figcaption></figure><ol class=""><li id="8f0d" class="ms mt iq ku b kv kw ky kz lb mu lf mv lj mw ln mx my mz na bi translated">在裸机上。一个人必须花大量的时间用 cudNN 设置 CUDA，为 Ubuntu 安装驱动程序，并且在成功之后，还要做大量的尝试来一起运行。肯定会出问题。</li><li id="fbcb" class="ms mt iq ku b kv nb ky nc lb nd lf ne lj nf ln mx my mz na bi translated">或者使用 Docker(一种更简单的方法)。然而，常规 Docker 不会工作得很好。需要一个特定的:与 GPU 相关的一切都是预先配置好的。在<a class="ae lo" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker Hub </a>已经有几个现成的镜像可用，它们是用不同的 CUDA、cuDNN 和其他模块的版本准备的。</li></ol><p id="6413" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如何在 Docker 中部署 GPU？首先，一个人必须选择一个特别适合他的显卡的基本图像(为此，在<a class="ae lo" href="http://hub.docker.com/nvidia" rel="noopener ugc nofollow" target="_blank">hub.docker.com/nvidia</a>通过标签搜索)。当使用 GPU 时，无论如何一切都是从所需版本的 Nvidia 映像继承的(对于 CPU，相反，可以使用任何方便的映像)。然后，在继承了基本映像之后，一个人创建他自己的基本映像并运行它。整个图像将重约 3Gb，但是，一切都将正常工作。</p><h2 id="9b39" class="lp lq iq bd lr ls lt dn lu lv lw dp lx lb ly lz ma lf mb mc md lj me mf mg mh bi translated"><strong class="ak">解决方案</strong></h2><p id="8324" class="pw-post-body-paragraph ks kt iq ku b kv mi jr kx ky mj ju la lb mk ld le lf ml lh li lj mm ll lm ln ij bi translated">经历了所有这些困难之后，我们又为 NLP ( <a class="ae lo" href="https://github.com/poteha/docker-nlp" rel="noopener ugc nofollow" target="_blank">源代码</a>)创建了一个产品 Docker 映像，它是免费的。我们的<a class="ae lo" href="https://hub.docker.com/r/iwitaly/nlp/" rel="noopener ugc nofollow" target="_blank">码头中心</a>有现成的图像。它包含了一些现代的 NLP 框架，包括用于深度学习的框架。盒子里面是什么:<em class="ng"> torch，flair，spacy，dateparser，pymorphy2，yargy，natasha，nltk，yake </em> ( <a class="ae lo" href="https://github.com/poteha/docker-nlp/blob/master/README.md" rel="noopener ugc nofollow" target="_blank">版本</a>)。更详细:</p><ul class=""><li id="df47" class="ms mt iq ku b kv kw ky kz lb mu lf mv lj mw ln nh my mz na bi translated"><a class="ae lo" href="https://github.com/zalandoresearch/flair" rel="noopener ugc nofollow" target="_blank"> flair </a>是一个最先进的 nlp 模块，它提供了方便的 NER、词性、词义消歧和分类。</li><li id="940f" class="ms mt iq ku b kv nb ky nc lb nd lf ne lj nf ln nh my mz na bi translated">natasha 是俄语中 NER 的一个模块。</li><li id="cceb" class="ms mt iq ku b kv nb ky nc lb nd lf ne lj nf ln nh my mz na bi translated">yargy 是一个俄罗斯语言解析器。</li><li id="c8c3" class="ms mt iq ku b kv nb ky nc lb nd lf ne lj nf ln nh my mz na bi translated">yake 是一个自动关键词提取器。其主要特征是:无监督方法、语料库、领域和语言独立性。</li></ul><p id="f257" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir">安装镜像的四个简单步骤:</strong></p><ol class=""><li id="ee4f" class="ms mt iq ku b kv kw ky kz lb mu lf mv lj mw ln mx my mz na bi translated">克隆<a class="ae lo" href="https://github.com/poteha/docker-nlp" rel="noopener ugc nofollow" target="_blank">回购</a></li><li id="7f64" class="ms mt iq ku b kv nb ky nc lb nd lf ne lj nf ln mx my mz na bi translated">然后是<code class="fe ni nj nk nl b">build docker build -t nlp-cpu -f ./Dockerfile.cpu . </code>(或<code class="fe ni nj nk nl b">docker build -t nlp-cpu -f ./Dockerfile.gpu .</code>)</li><li id="d004" class="ms mt iq ku b kv nb ky nc lb nd lf ne lj nf ln mx my mz na bi translated">并使用:<code class="fe ni nj nk nl b">docker run -it — runtime=nvidia iwitaly/nlp:gpu nvidia-smi</code></li><li id="455d" class="ms mt iq ku b kv nb ky nc lb nd lf ne lj nf ln mx my mz na bi translated">还可以传递 CUDA_VISIBLE_DEVICES 环境变量。</li></ol><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi nm"><img src="../Images/2ae4850160be57eabaeccddde351347f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Q3PWgVo2w2OqOGZ32eHgcw.gif"/></div></div></figure><p id="a3bd" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">在这个 Docker 映像的帮助下，您可以通过快速启动它并直接使用 NLP 来节省部署时间。我们希望它至少能简化一点流程。</p><p id="b484" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如果您对安装有任何疑问，请在这里留下您的意见或直接联系我。还有，随意分叉回购，修改原始文件。</p><h2 id="5f1e" class="lp lq iq bd lr ls lt dn lu lv lw dp lx lb ly lz ma lf mb mc md lj me mf mg mh bi translated"><strong class="ak">链接</strong></h2><ul class=""><li id="e2bd" class="ms mt iq ku b kv mi ky mj lb nn lf no lj np ln nh my mz na bi translated">github:<a class="ae lo" href="https://github.com/poteha/docker-nlp" rel="noopener ugc nofollow" target="_blank">https://github.com/poteha/docker-nlp</a></li><li id="b43b" class="ms mt iq ku b kv nb ky nc lb nd lf ne lj nf ln nh my mz na bi translated">https://hub.docker.com/r/iwitaly/nlp/</li></ul><p id="8dc0" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir">感谢您的阅读！请，提出你的问题，留下评论，敬请期待！</strong></p></div></div>    
</body>
</html>