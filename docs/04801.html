<html>
<head>
<title>How to query and calculate Google Universal Analytics data in BigQuery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在 BigQuery 中查询和计算 Google Universal Analytics 数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-query-and-calculate-google-analytics-data-in-bigquery-cab8fc4f396?source=collection_archive---------0-----------------------#2019-07-21">https://towardsdatascience.com/how-to-query-and-calculate-google-analytics-data-in-bigquery-cab8fc4f396?source=collection_archive---------0-----------------------#2019-07-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4705" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">带有示例查询的标准 SQL 指南</h2></div><p id="d3e6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi le translated"><span class="l lf lg lh bm li lj lk ll lm di"> W </span>当我第一次开始在 BigQuery 中查询谷歌分析数据时，我很难解释隐藏在<code class="fe ln lo lp lq b">ga_sessions_</code>导出表中的“原始”点击级数据。因为我找不到关于如何在 BigQuery 中计算 Google Analytics 指标的可靠指南，所以我决定自己写一个。我提供了许多示例查询，因此您不必重新发明轮子，希望您可以节省一些宝贵的时间。</p><p id="4904" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lr">更新:你喜欢这篇文章吗？那么你也会喜欢我的新网站</em><a class="ae ls" href="https://www.ga4bigquery.com?utm_campaign=medium_ua" rel="noopener ugc nofollow" target="_blank"><em class="lr">【GA4BigQuery.com】</em></a><em class="lr">:这是一个关于如何在 big query&amp;rock your digital marketing Analytics 中查询谷歌分析数据的技巧、想法、示例查询和教程的数字指南。</em></p><p id="cf0d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lr">我已经将本文中的大多数示例查询迁移到新网站，因为在一个地方维护所有内容更容易。这篇文章将留在网上，让你找到正确的地方。</em></p><p id="468a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lr">我也在 BigQuery </em>  <em class="lr">中发表了一篇关于</em> <a class="ae ls" rel="noopener" target="_blank" href="/how-to-query-and-calculate-ga-app-web-event-data-in-bigquery-a77931176d3"> <em class="lr">查询 Google Analytics 4(之前为 App + Web)事件数据的文章。此内容将被迁移到</em>【GA4BigQuery.com】<em class="lr"/></a><em class="lr">中。</em></p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/ad033ee3caf9652703596aa3634c420b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x6edeuhumTg7eXJ97buwAA.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk">Image by <a class="mj mk ep" href="https://medium.com/u/7bf0b2ba1c23?source=post_page-----cab8fc4f396--------------------------------" rel="noopener" target="_blank">Berber Bijlsma</a></figcaption></figure><h2 id="8272" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">目录</h2><p id="174a" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">–<a class="ae ls" href="#fb2b" rel="noopener ugc nofollow">Google Analytics 数据简介 big query</a><br/>–<a class="ae ls" href="#3565" rel="noopener ugc nofollow">多表</a><br/>–<a class="ae ls" href="#4ad8" rel="noopener ugc nofollow">用户</a>–<br/>–<a class="ae ls" href="#9c55" rel="noopener ugc nofollow">会话</a><br/>–<a class="ae ls" href="#fa32" rel="noopener ugc nofollow">时间</a><br/>–<a class="ae ls" href="#b4b4" rel="noopener ugc nofollow">流量来源</a><br/>–<a class="ae ls" href="#b5d4" rel="noopener ugc nofollow">地理网络</a><br/>–<a class="ae ls" href="#473b" rel="noopener ugc nofollow">平台或设备</a><br/>–<a class="ae ls" href="#4f50" rel="noopener ugc nofollow">页面追踪</a><br/>–<a class="ae ls" href="#3be4" rel="noopener ugc nofollow"> </a><br/>–<a class="ae ls" href="#79ef" rel="noopener ugc nofollow">增强型电子商务(产品)</a><br/>–<a class="ae ls" href="#8344" rel="noopener ugc nofollow">自定义维度&amp;自定义指标</a><br/>–<a class="ae ls" href="#828a" rel="noopener ugc nofollow">自定义渠道分组</a><br/>–<a class="ae ls" href="#67cb" rel="noopener ugc nofollow">日内表格</a><br/>–<a class="ae ls" href="#26a4" rel="noopener ugc nofollow">实时表格&amp;查看</a></p><h1 id="fb2b" class="nj mm it bd mn nk nl nm mq nn no np mt jz nq ka mw kc nr kd mz kf ns kg nc nt bi translated">BigQuery 中的 Google 分析数据简介</h1><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi nu"><img src="../Images/642aa64a10d26c8e4ec6fc698cbb9940.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FwK8qu55g8vhu4bUbY59dw.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk">The BigQuery User Interface</figcaption></figure><h2 id="288e" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">为什么是 BigQuery？</h2><p id="3714" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">对于那些想知道为什么应该使用 BigQuery 来分析谷歌分析数据的人，请阅读<a class="ae ls" href="https://www.bounteous.com/insights/2017/05/17/value-google-bigquery-and-google-analytics-360/" rel="noopener ugc nofollow" target="_blank">这篇优秀的文章</a>。一些大优势:</p><ul class=""><li id="4efe" class="nv nw it kk b kl km ko kp kr nx kv ny kz nz ld oa ob oc od bi translated">不再取样。永远不会。</li><li id="efac" class="nv nw it kk b kl oe ko of kr og kv oh kz oi ld oa ob oc od bi translated">无限数量的维度</li><li id="7442" class="nv nw it kk b kl oe ko of kr og kv oh kz oi ld oa ob oc od bi translated">将<a class="ae ls" href="https://www.optimizesmart.com/complete-guide-to-dimensions-and-metrics-in-google-analytics/" rel="noopener ugc nofollow" target="_blank">不同的范围</a>合并在一份报告中(不适合胆小的人！)</li><li id="38cd" class="nv nw it kk b kl oe ko of kr og kv oh kz oi ld oa ob oc od bi translated">计算目标完成情况，建立您自己的渠道分组并纠正数据错误，所有这些都基于过去的数据</li><li id="6084" class="nv nw it kk b kl oe ko of kr og kv oh kz oi ld oa ob oc od bi translated">将谷歌分析数据与第三方数据源相结合</li></ul><h2 id="649d" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">陡峭的学习曲线</h2><p id="60de" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">但是我们不要太激动。事实是，一旦你发现很多你习惯的谷歌分析指标无处可寻，钻研 BigQuery 可能会相当令人沮丧。</p><blockquote class="oj ok ol"><p id="b6c8" class="ki kj lr kk b kl km ju kn ko kp jx kq om ks kt ku on kw kx ky oo la lb lc ld im bi translated">Google Analytics 用户，特别是高级用户对 BigQuery 感兴趣的原因是，Google 可以每天将原始的 Google Analytics 数据转储到 BigQuery 中。虽然这使得许多类型的分析无法在 Google Analytics 界面中执行，但它也没有提供任何基本的指标，例如，<em class="it">跳出率。(<a class="ae ls" href="https://www.bounteous.com/insights/2016/02/11/querying-google-analytics-data-bigquery/?ns=l" rel="noopener ugc nofollow" target="_blank">来源</a></em></p></blockquote><p id="663c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这有两个方面:困难的部分是我必须计算我的查询中每一个“缺失”的谷歌分析指标。积极的影响:我在概念层面上对度量标准的理解有了很大的提高。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi op"><img src="../Images/7e33bf7db6d615ff3da81ecb37c5d75b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*8l8moAYCVCWiR_ckMhgcIg.jpeg"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk"><a class="ae ls" href="https://yuhuisdatascienceblog.blogspot.com/2017/07/querying-google-analytics-data-as-flat.html" rel="noopener ugc nofollow" target="_blank"><em class="oq">Source</em></a></figcaption></figure><h2 id="958b" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">另一个障碍</h2><p id="cb65" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated"><a class="ae ls" href="https://support.google.com/analytics/answer/4419694?hl=en" rel="noopener ugc nofollow" target="_blank">的 BigQuery 食谱</a>在某些情况下帮助了我，但有时也显得不完整和过时。因为<a class="ae ls" href="https://cloud.google.com/bigquery/docs/reference/standard-sql/" rel="noopener ugc nofollow" target="_blank">标准 SQL 语法</a>是当今首选的 BigQuery 语言，并且许多旧的<a class="ae ls" href="https://stackoverflow.com/questions/tagged/google-bigquery+google-analytics" rel="noopener ugc nofollow" target="_blank"> Stackoverflow </a>条目正在使用(很快将被弃用？)<a class="ae ls" href="https://cloud.google.com/bigquery/docs/reference/legacy-sql" rel="noopener ugc nofollow" target="_blank">遗留的 SQL 语法</a>，我花了很多时间来思考我必须编写的 SQL 查询，以获得我想要的报告。除了我需要注意的计算度量之外，还有另一个障碍需要跨越:嵌套和重复的字段。</p><blockquote class="oj ok ol"><p id="ef5f" class="ki kj lr kk b kl km ju kn ko kp jx kq om ks kt ku on kw kx ky oo la lb lc ld im bi translated">Google Analytics BigQuery 转储中的每一行都代表一个会话，并包含许多字段，其中一些字段可以是<em class="it">重复的</em>和<em class="it">嵌套的</em>，例如 hits，它包含一组重复的字段，代表会话期间的页面视图和事件，以及 custom dimensions，它是一个单独的重复字段。这是 BigQuery 和普通数据库的主要区别之一。(<a class="ae ls" href="https://www.bounteous.com/insights/2016/02/11/querying-google-analytics-data-bigquery/?ns=l" rel="noopener ugc nofollow" target="_blank">来源</a>)</p></blockquote><h2 id="ef8b" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">我的目标</h2><p id="b49b" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">有了这篇文章，我希望能为你省去一些麻烦。我将向您展示如何创建会话和用户级别的基本报告，稍后我将展示一些更高级查询的示例，这些查询涉及点击级别的数据(事件、页面浏览量)、结合不同范围的多个自定义维度、处理(增强的)电子商务数据以及将历史数据与实时或当天数据结合起来。</p><h2 id="b848" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">在家试试这个</h2><p id="32e6" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">没有谷歌云计费账户？进入<a class="ae ls" href="https://cloud.google.com/bigquery/docs/sandbox" rel="noopener ugc nofollow" target="_blank"> BigQuery 沙箱</a>，它允许你使用<a class="ae ls" href="https://console.cloud.google.com/bigquery" rel="noopener ugc nofollow" target="_blank"> BigQuery web UI </a>而无需启用计费账户。要设置 Google Analytics to big query export，您需要 Google Analytics 360(Google 营销平台的一部分)。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi or"><img src="../Images/b7d1e452518e4a50d07342110d556514.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iml9ddknlejIgPE7cCM6NA.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk">Standard SQL in BigQuery</figcaption></figure><p id="3f50" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我假设您对作为查询语言的 SQL 和作为数据库工具的 BigQuery 有基本的了解。如果没有，我建议您先学习 SQL 入门课程，因为我不会详细介绍 SQL 语法，而是将重点放在如何从 BigQuery 中获取您的(自定义)Google Analytics 报告以供分析。所有查询示例都使用标准 SQL。</p><p id="fe51" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将为 BigQuery 使用<a class="ae ls" href="https://support.google.com/analytics/answer/7586738?hl=en&amp;ref_topic=3416089" rel="noopener ugc nofollow" target="_blank"> Google Analytics 样本数据集，它包含来自</a><a class="ae ls" href="https://www.googlemerchandisestore.com/" rel="noopener ugc nofollow" target="_blank"> Google 商品商店</a>的分析数据。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi os"><img src="../Images/3b211300287e00b996480ddd878f1a5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UotPZNT_c_BjECWSx00pPw.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk">Google Merchandise Store</figcaption></figure><p id="a5f1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，如果你想用 Google Analytics 比较你的查询结果，我建议你使用你自己的 Google Analytics 数据集，因为我已经注意到 Google Analytics 中的 Google 商品商店数据和样本 BigQuery 数据集之间的差异。我在其他谷歌分析账户上测试了这些查询，它们匹配得相当好。</p><h2 id="f6ee" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">导出模式</h2><p id="21ed" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">为了更好地理解 BigQuery 中的<code class="fe ln lo lp lq b">ga_sessions_</code>表，让我们看看<a class="ae ls" href="https://support.google.com/analytics/answer/3437719?hl=en" rel="noopener ugc nofollow" target="_blank"> BigQuery 导出模式</a>，它让我们了解了 BigQuery 中可用的原始 Google Analytics 数据字段。</p><p id="f100" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">尽管您可能会从 Google Analytics UI 中识别出许多维度和指标，但我知道这种模式可能有点令人不知所措。为了更好地理解我们的数据集，我们必须知道(嵌套)字段的结构。下一张图片代表来自<code class="fe ln lo lp lq b">ga_sessions_</code>表的两行(= 2 个会话)。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi ot"><img src="../Images/42e48c2c7ac0e449bbb86f432918bdca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KPyWgbwoQIpB6cGdkWcM6A.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk"><a class="ae ls" href="https://www.bounteous.com/insights/2016/06/23/whats-missing-google-analytics-bigquery-export-schema/" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure><h2 id="ef01" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">嵌套示例</h2><p id="5d9d" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">如你所见，如果你需要自定义维度、自定义指标或任何点击量数据，即事件、页面浏览量或产品数据，我们的麻烦就来了。让我们查询我们的嵌套样本集:</p><pre class="lu lv lw lx gt ou lq ov ow aw ox bi"><span id="1bb9" class="ml mm it lq b gy oy oz l pa pb">SELECT<br/>  *<br/>FROM<br/>  `bigquery-public-data.google_analytics_sample.ga_sessions_20170801`<br/>LIMIT<br/>  2</span></pre><p id="2de2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这给了我们 2 行，表示为平面表，如下所示:</p><figure class="lu lv lw lx gt ly"><div class="bz fp l di"><div class="pc pd l"/></div></figure><p id="f910" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">记住，在这个例子中，只有第 2 行和第 14 行是我们表中真正的行。其他“行”实际上是嵌套字段，大多数情况下是<code class="fe ln lo lp lq b">NULL</code>值。只有<code class="fe ln lo lp lq b">hits.product</code>列填充了值。</p><p id="1efd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了处理这些字段，并能够查询我们的表以满足我们的需求，我们需要<code class="fe ln lo lp lq b">UNNEST</code>函数。</p><blockquote class="oj ok ol"><p id="53cf" class="ki kj lr kk b kl km ju kn ko kp jx kq om ks kt ku on kw kx ky oo la lb lc ld im bi translated">这里的问题是它本质上是一个数组(实际上在 BigQuery 中它是一个“重复的记录”，但是你可以把它看作一个数组)。(…)这就是<code class="fe ln lo lp lq b">UNNEST</code>函数的用武之地。它基本上允许你在一个数组中获取元素，然后展开每一个单独的元素。然后，可以将原始行与每个未嵌套的元素连接起来，将它们添加到表中。(<a class="ae ls" href="https://medium.com/firebase-developers/using-the-unnest-function-in-bigquery-to-analyze-event-parameters-in-analytics-fb828f890b42" rel="noopener">来源</a>)</p></blockquote><p id="231c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我强烈推荐阅读<a class="ae ls" href="https://medium.com/firebase-developers/using-the-unnest-function-in-bigquery-to-analyze-event-parameters-in-analytics-fb828f890b42" rel="noopener">这篇文章</a>，它以 Firebase Analytics 样本数据集为例详细解释了<code class="fe ln lo lp lq b">UNNEST</code>概念。</p><p id="281c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您只需<code class="fe ln lo lp lq b">UNNEST</code>包含“重复字段”的记录。对于我们的谷歌分析数据集，这些可能涉及:</p><h2 id="3e25" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">用户/会话范围</h2><ul class=""><li id="248b" class="nv nw it kk b kl ne ko nf kr pe kv pf kz pg ld oa ob oc od bi translated">自定义维度</li></ul><h2 id="bc62" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">命中范围</h2><ul class=""><li id="1c2c" class="nv nw it kk b kl ne ko nf kr pe kv pf kz pg ld oa ob oc od bi translated">打击</li><li id="afab" class="nv nw it kk b kl oe ko of kr og kv oh kz oi ld oa ob oc od bi translated">hits.customDimensions</li><li id="ebbc" class="nv nw it kk b kl oe ko of kr og kv oh kz oi ld oa ob oc od bi translated">hits.customMetrics</li></ul><h2 id="cc05" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">产品范围</h2><ul class=""><li id="dc14" class="nv nw it kk b kl ne ko nf kr pe kv pf kz pg ld oa ob oc od bi translated">hits.product</li><li id="a92f" class="nv nw it kk b kl oe ko of kr og kv oh kz oi ld oa ob oc od bi translated">hits.product.customDimensions</li><li id="6c5c" class="nv nw it kk b kl oe ko of kr og kv oh kz oi ld oa ob oc od bi translated">hits.product .自定义度量</li></ul><p id="aba6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了确保您理解 BigQuery 导出模式的结构，我鼓励您看一看<a class="ae ls" href="https://storage.googleapis.com/e-nor/visualizations/bigquery/ga360-schema.html#section-collapsible-tree" rel="noopener ugc nofollow" target="_blank">这个交互式可视化表示</a>。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi ph"><img src="../Images/15c7ac03c208284665ce035dcd250e3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Rarjvtghij_8HmtTLuwMA.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk"><a class="ae ls" href="https://storage.googleapis.com/e-nor/visualizations/bigquery/ga360-schema.html#section-collapsible-tree" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure><p id="448b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好的。理论废话够多了。准备好行动了吗？我们来查询一下！</p><p id="5708" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ls" href="#8272" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl pi pj hx pk" role="separator"><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn"/></div><div class="im in io ip iq"><h1 id="3565" class="nj mm it bd mn nk pp nm mq nn pq np mt jz pr ka mw kc ps kd mz kf pt kg nc nt bi translated">多个表格</h1><p id="7876" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">BigQuery 中的 Google Analytics 数据每天存储在一个表中。如果您只需要某一天的数据，查询中的<code class="fe ln lo lp lq b">FROM</code>子句将如下所示:</p><pre class="lu lv lw lx gt ou lq ov ow aw ox bi"><span id="eb6a" class="ml mm it lq b gy oy oz l pa pb">SELECT<br/>  *<br/>FROM<br/>  `bigquery-public-data.google_analytics_sample.ga_sessions_20160801`</span></pre><p id="4ca4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在大多数情况下，您需要查询更长的时间段。输入<code class="fe ln lo lp lq b">_table_suffix</code>。更多细节<a class="ae ls" href="https://cloud.google.com/bigquery/docs/querying-wildcard-tables#filtering_selected_tables_using_table_suffix" rel="noopener ugc nofollow" target="_blank">在这里</a>，但是要查询谷歌分析数据的多个表格，你只需要这些例子。请注意，您可以将静态日期和动态日期结合使用，或者在最近 90 天左右的滚动期内只使用静态日期或动态日期。也可以在您的查询中包含<a class="ae ls" href="#67cb" rel="noopener ugc nofollow">日内表</a>。</p><h2 id="e0b9" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">静态日期范围</h2><p id="6222" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">当您对静态数据范围执行分析时，您应该使用固定的开始和结束日期。在本例中，我们选择 2016 年 8 月 1 日至 2017 年 8 月 1 日。</p><pre class="lu lv lw lx gt ou lq ov ow aw ox bi"><span id="c3bd" class="ml mm it lq b gy oy oz l pa pb">SELECT<br/>  *<br/>FROM<br/>  `bigquery-public-data.google_analytics_sample.ga_sessions_*`<br/>WHERE<br/>  _table_suffix BETWEEN '20160801'<br/>  AND '20170801'</span></pre><h2 id="68cd" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">动态日期范围</h2><p id="5774" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">在本例中，我们选择“今天”——到昨天为止的 30 天。</p><pre class="lu lv lw lx gt ou lq ov ow aw ox bi"><span id="c513" class="ml mm it lq b gy oy oz l pa pb">SELECT<br/>  *<br/>FROM<br/>  `bigquery-public-data.google_analytics_sample.ga_sessions_*`<br/>WHERE<br/>  _table_suffix BETWEEN FORMAT_DATE('%Y%m%d',DATE_SUB(CURRENT_DATE(), INTERVAL 30 DAY))<br/>  AND FORMAT_DATE('%Y%m%d',DATE_SUB(CURRENT_DATE(), INTERVAL 1 DAY))</span></pre><h2 id="0033" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">静态和动态日期的组合</h2><p id="d66c" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">我们知道我们的数据集中有 366 个日表，所以我们可以在这里使用固定的结束日期(<code class="fe ln lo lp lq b">20170801</code>)，但是通常我更喜欢固定开始日期和动态结束日期的组合(在本例中:今天减一)。如果新数据被添加到我们的数据集中，它会自动包含在我们的查询中。在本例中，我们选择 2016 年 8 月 1 日至昨天。</p><pre class="lu lv lw lx gt ou lq ov ow aw ox bi"><span id="0568" class="ml mm it lq b gy oy oz l pa pb">SELECT<br/>  *<br/>FROM<br/>  `bigquery-public-data.google_analytics_sample.ga_sessions_*`<br/>WHERE<br/>  _table_suffix BETWEEN '20160801'<br/>  AND FORMAT_DATE('%Y%m%d',DATE_SUB(CURRENT_DATE(), INTERVAL 1 DAY))</span></pre><p id="6af3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ls" href="#8272" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl pi pj hx pk" role="separator"><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn"/></div><div class="im in io ip iq"><h1 id="4ad8" class="nj mm it bd mn nk pp nm mq nn pq np mt jz pr ka mw kc ps kd mz kf pt kg nc nt bi translated">用户</h1><p id="69c5" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">该示例查询包含以下所有 Google Analytics 维度和指标。如果您只需要一个维度或度量，查看示例查询中的<code class="fe ln lo lp lq b">-- comments</code>,并从<code class="fe ln lo lp lq b">SELECT</code>子句中复制您需要的部分。确保您还添加了正确计算结果所需的任何附加条件(在<code class="fe ln lo lp lq b">FROM</code>、<code class="fe ln lo lp lq b">WHERE</code>、<code class="fe ln lo lp lq b">GROUP BY</code>和<code class="fe ln lo lp lq b">ORDER BY</code>中)。</p><h2 id="d9a8" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">用户维度</h2><p id="dde7" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">用户类型<br/>会话计数</p><h2 id="3f36" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">用户指标</h2><p id="ddc5" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">用户<br/>新用户<br/> %新会话<br/>每个用户的会话数量<br/>点击</p><h2 id="79e7" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">示例查询</h2><div class="pu pv gp gr pw px"><a href="https://www.ga4bigquery.com/user-dimension-metrics-ua/" rel="noopener  ugc nofollow" target="_blank"><div class="py ab fo"><div class="pz ab qa cl cj qb"><h2 class="bd iu gy z fp qc fr fs qd fu fw is bi translated">用户:维度和指标(UA)</h2><div class="qe l"><h3 class="bd b gy z fp qc fr fs qd fu fw dk translated">此示例查询包含以下所有 Google Analytics 用户维度和指标。如果你只需要一个维度…</h3></div><div class="qf l"><p class="bd b dl z fp qc fr fs qd fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="qg l"><div class="qh l qi qj qk qg ql md px"/></div></div></a></div><p id="a5ba" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ls" href="#8272" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl pi pj hx pk" role="separator"><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn"/></div><div class="im in io ip iq"><h1 id="9c55" class="nj mm it bd mn nk pp nm mq nn pq np mt jz pr ka mw kc ps kd mz kf pt kg nc nt bi translated">会议</h1><p id="538a" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">该示例查询包含以下所有 Google Analytics 维度和指标。如果您只需要一个维度或度量，查看示例查询中的<code class="fe ln lo lp lq b"># comments</code>，并从<code class="fe ln lo lp lq b">SELECT</code>子句中复制您需要的部分。确保您还添加了正确计算结果所需的任何附加条件(在<code class="fe ln lo lp lq b">FROM</code>、<code class="fe ln lo lp lq b">WHERE</code>、<code class="fe ln lo lp lq b">GROUP BY</code>和<code class="fe ln lo lp lq b">ORDER BY</code>中)。</p><h2 id="ce39" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">会话维度</h2><p id="2f39" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi">-</p><h2 id="5fbc" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">会话指标</h2><p id="4664" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">会话<br/>跳出率<br/>跳出率<br/>平均值。会话持续时间</p><h2 id="c6a1" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">示例查询</h2><div class="pu pv gp gr pw px"><a href="https://www.ga4bigquery.com/session-dimensions-metrics-ua/" rel="noopener  ugc nofollow" target="_blank"><div class="py ab fo"><div class="pz ab qa cl cj qb"><h2 class="bd iu gy z fp qc fr fs qd fu fw is bi translated">会议:维度和指标(UA)</h2><div class="qe l"><h3 class="bd b gy z fp qc fr fs qd fu fw dk translated">此示例查询包含以下所有 Google Analytics 会话维度和指标。如果你只需要一个…</h3></div><div class="qf l"><p class="bd b dl z fp qc fr fs qd fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="qg l"><div class="qm l qi qj qk qg ql md px"/></div></div></a></div><p id="77aa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ls" href="#8272" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl pi pj hx pk" role="separator"><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn"/></div><div class="im in io ip iq"><h1 id="fa32" class="nj mm it bd mn nk pp nm mq nn pq np mt jz pr ka mw kc ps kd mz kf pt kg nc nt bi translated">时间</h1><p id="2c2e" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">该示例查询包含以下所有 Google Analytics 维度和指标。如果您只需要一个维度或度量，查看示例查询中的<code class="fe ln lo lp lq b">-- comments</code>，并从<code class="fe ln lo lp lq b">SELECT</code>子句中复制您需要的部分。确保您还添加了正确计算结果所需的任何附加条件(在<code class="fe ln lo lp lq b">FROM</code>、<code class="fe ln lo lp lq b">WHERE</code>、<code class="fe ln lo lp lq b">GROUP BY</code>和<code class="fe ln lo lp lq b">ORDER BY</code>)。</p><h2 id="474b" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">时间维度</h2><p id="393c" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">日期<br/>年份<br/> ISO 年份<br/>年份月份<br/>年份月份<br/>年份星期<br/>年份星期<br/> ISO 年份星期<br/> ISO 年份星期<br/>月份日期<br/>星期日期<br/>星期名称<br/>小时<br/>分钟<br/>日期小时和分钟</p><h2 id="650b" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">时间度量</h2><p id="595c" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi">-</p><h2 id="90b2" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">示例查询</h2><div class="pu pv gp gr pw px"><a href="https://www.ga4bigquery.com/date-time-dimensions-metrics-ua/" rel="noopener  ugc nofollow" target="_blank"><div class="py ab fo"><div class="pz ab qa cl cj qb"><h2 class="bd iu gy z fp qc fr fs qd fu fw is bi translated">日期和时间:维度和指标(UA)</h2><div class="qe l"><h3 class="bd b gy z fp qc fr fs qd fu fw dk translated">此示例查询包含以下所有 Google Analytics 日期和时间维度和指标。如果你只需要一个…</h3></div><div class="qf l"><p class="bd b dl z fp qc fr fs qd fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="qg l"><div class="qn l qi qj qk qg ql md px"/></div></div></a></div><p id="8c41" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ls" href="#8272" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl pi pj hx pk" role="separator"><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn"/></div><div class="im in io ip iq"><h1 id="b4b4" class="nj mm it bd mn nk pp nm mq nn pq np mt jz pr ka mw kc ps kd mz kf pt kg nc nt bi translated">流量来源</h1><p id="1394" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">该示例查询包含以下所有 Google Analytics 维度和指标。如果您只需要一个维度或指标，查看示例查询中的<code class="fe ln lo lp lq b">-- comments</code>,并从<code class="fe ln lo lp lq b">SELECT</code>子句中复制您需要的部分。确保您还添加了正确计算结果所需的任何附加条件(在<code class="fe ln lo lp lq b">FROM</code>、<code class="fe ln lo lp lq b">WHERE</code>、<code class="fe ln lo lp lq b">GROUP BY</code>和<code class="fe ln lo lp lq b">ORDER BY</code>中)。</p><h2 id="e459" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">交通来源维度</h2><p id="8e65" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">推荐路径<br/>完整推荐人<br/>默认频道分组<br/>活动<br/>来源<br/>媒介<br/>来源/媒介<br/>关键词<br/>广告内容<br/>社交网络<br/>社交来源推荐<br/>活动代码</p><h2 id="e275" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">流量来源指标</h2><p id="6668" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi">-</p><h2 id="179f" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">示例查询</h2><div class="pu pv gp gr pw px"><a href="https://www.ga4bigquery.com/traffic-sources-dimensions-metrics-ua/" rel="noopener  ugc nofollow" target="_blank"><div class="py ab fo"><div class="pz ab qa cl cj qb"><h2 class="bd iu gy z fp qc fr fs qd fu fw is bi translated">流量来源:维度和指标(UA)</h2><div class="qe l"><h3 class="bd b gy z fp qc fr fs qd fu fw dk translated">此示例查询包含以下所有 Google Analytics 流量来源维度和指标。如果你只需要一个…</h3></div><div class="qf l"><p class="bd b dl z fp qc fr fs qd fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="qg l"><div class="qo l qi qj qk qg ql md px"/></div></div></a></div><p id="6f6d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ls" href="#8272" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl pi pj hx pk" role="separator"><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn"/></div><div class="im in io ip iq"><h1 id="b5d4" class="nj mm it bd mn nk pp nm mq nn pq np mt jz pr ka mw kc ps kd mz kf pt kg nc nt bi translated">地理网络</h1><p id="6245" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">该示例查询包含以下所有 Google Analytics 维度和指标。如果您只需要一个维度或度量，查看示例查询中的<code class="fe ln lo lp lq b">-- comments</code>,并从<code class="fe ln lo lp lq b">SELECT</code>子句中复制您需要的部分。确保您还添加了正确计算结果所需的任何附加条件(在<code class="fe ln lo lp lq b">FROM</code>、<code class="fe ln lo lp lq b">WHERE</code>、<code class="fe ln lo lp lq b">GROUP BY</code>和<code class="fe ln lo lp lq b">ORDER BY</code>)。</p><h2 id="0571" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">地理网络维度</h2><p id="df4e" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">洲<br/>亚洲<br/>国家<br/>地区<br/>地铁<br/>城市<br/>纬度<br/>经度<br/>网络域<br/>服务提供商<br/>城市 ID</p><h2 id="e082" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">地理网络度量</h2><p id="22cf" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi">-</p><h2 id="c03e" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">示例查询</h2><div class="pu pv gp gr pw px"><a href="https://www.ga4bigquery.com/geo-network-dimensions-metrics-ua/" rel="noopener  ugc nofollow" target="_blank"><div class="py ab fo"><div class="pz ab qa cl cj qb"><h2 class="bd iu gy z fp qc fr fs qd fu fw is bi translated">地理网络:维度和指标(UA)</h2><div class="qe l"><h3 class="bd b gy z fp qc fr fs qd fu fw dk translated">此示例查询包含以下所有 Google Analytics 地理网络维度和指标。如果你只需要一个…</h3></div><div class="qf l"><p class="bd b dl z fp qc fr fs qd fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="qg l"><div class="qp l qi qj qk qg ql md px"/></div></div></a></div><p id="8a88" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ls" href="#8272" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl pi pj hx pk" role="separator"><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn"/></div><div class="im in io ip iq"><h1 id="b38e" class="nj mm it bd mn nk pp nm mq nn pq np mt jz pr ka mw kc ps kd mz kf pt kg nc nt bi translated">平台或设备</h1><p id="3414" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">该示例查询包含以下所有 Google Analytics 维度和指标。如果您只需要一个维度或度量，查看示例查询中的<code class="fe ln lo lp lq b">-- comments</code>，并从<code class="fe ln lo lp lq b">SELECT</code>子句中复制您需要的部分。确保您还添加了正确计算结果所需的任何附加条件(在<code class="fe ln lo lp lq b">FROM</code>、<code class="fe ln lo lp lq b">WHERE</code>、<code class="fe ln lo lp lq b">GROUP BY</code>和<code class="fe ln lo lp lq b">ORDER BY</code>)。</p><h2 id="5b0d" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">平台或设备尺寸</h2><p id="26ce" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">浏览器<br/>浏览器版本<br/>操作系统<br/>操作系统版本<br/>移动设备品牌<br/>移动设备型号<br/>移动输入选择器<br/>移动设备信息<br/>移动设备营销名称<br/>设备类别<br/>浏览器大小<br/>数据源</p><h2 id="c1a2" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">平台或设备指标</h2><p id="93d7" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi">-</p><h2 id="a866" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">示例查询</h2><div class="pu pv gp gr pw px"><a href="https://www.ga4bigquery.com/platform-and-device-dimensions-metrics-ua/" rel="noopener  ugc nofollow" target="_blank"><div class="py ab fo"><div class="pz ab qa cl cj qb"><h2 class="bd iu gy z fp qc fr fs qd fu fw is bi translated">平台和设备:维度和指标(UA)</h2><div class="qe l"><h3 class="bd b gy z fp qc fr fs qd fu fw dk translated">此示例查询包含以下所有 Google 分析平台和设备维度和指标。如果你只需要…</h3></div><div class="qf l"><p class="bd b dl z fp qc fr fs qd fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="qg l"><div class="qq l qi qj qk qg ql md px"/></div></div></a></div><p id="82e5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ls" href="#8272" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl pi pj hx pk" role="separator"><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn"/></div><div class="im in io ip iq"><h1 id="4f50" class="nj mm it bd mn nk pp nm mq nn pq np mt jz pr ka mw kc ps kd mz kf pt kg nc nt bi translated">页面跟踪</h1><p id="0222" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">该示例查询包含以下所有 Google Analytics 维度和指标。如果您只需要一个维度或指标，查看示例查询中的<code class="fe ln lo lp lq b">-- comments</code>,并从<code class="fe ln lo lp lq b">SELECT</code>子句中复制您需要的部分。确保您还添加了正确计算结果所需的任何附加条件(在<code class="fe ln lo lp lq b">FROM</code>、<code class="fe ln lo lp lq b">WHERE</code>、<code class="fe ln lo lp lq b">GROUP BY</code>和<code class="fe ln lo lp lq b">ORDER BY</code>中)。</p><h2 id="7d9e" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">页面跟踪尺寸</h2><p id="8297" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">主机名<br/>页面<br/>上一页路径<br/>页面路径一级<br/>页面路径二级<br/>页面路径三级<br/>页面路径四级<br/>页面标题<br/>登陆页面<br/>第二页<br/>退出页面</p><h2 id="3b37" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">页面跟踪指标</h2><p id="eb37" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">入口<br/>浏览量<br/>独特浏览量<br/>页面/会话<br/>出口<br/> %出口<br/>平均。页面上的时间</p><h2 id="0b3b" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">示例查询</h2><div class="pu pv gp gr pw px"><a href="https://www.ga4bigquery.com/page-tracking-dimensions-metrics-ua/" rel="noopener  ugc nofollow" target="_blank"><div class="py ab fo"><div class="pz ab qa cl cj qb"><h2 class="bd iu gy z fp qc fr fs qd fu fw is bi translated">页面跟踪:维度和度量(UA)</h2><div class="qe l"><h3 class="bd b gy z fp qc fr fs qd fu fw dk translated">此示例查询包含以下所有 Google Analytics 页面跟踪维度和指标。如果你只需要一个…</h3></div><div class="qf l"><p class="bd b dl z fp qc fr fs qd fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="qg l"><div class="qr l qi qj qk qg ql md px"/></div></div></a></div><p id="d643" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ls" href="#8272" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl pi pj hx pk" role="separator"><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn"/></div><div class="im in io ip iq"><h1 id="3be4" class="nj mm it bd mn nk pp nm mq nn pq np mt jz pr ka mw kc ps kd mz kf pt kg nc nt bi translated">事件跟踪</h1><p id="4a75" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">该示例查询包含以下所有 Google Analytics 维度和指标。如果您只需要一个维度或度量，查看示例查询中的<code class="fe ln lo lp lq b">-- comments</code>，并从<code class="fe ln lo lp lq b">SELECT</code>子句中复制您需要的部分。确保您还添加了正确计算结果所需的任何附加条件(在<code class="fe ln lo lp lq b">FROM</code>、<code class="fe ln lo lp lq b">WHERE</code>、<code class="fe ln lo lp lq b">GROUP BY</code>和<code class="fe ln lo lp lq b">ORDER BY</code>)。</p><h2 id="61be" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">事件跟踪维度</h2><p id="9ce3" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">事件类别<br/>事件动作<br/>事件标签</p><h2 id="bc77" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">事件跟踪指标</h2><p id="962e" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">总事件数<br/>唯一事件数<br/>事件值<br/>平均值。值<br/>带事件的会话<br/>事件/带事件的会话</p><h2 id="249f" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">示例查询</h2><div class="pu pv gp gr pw px"><a href="https://www.ga4bigquery.com/event-tracking-dimensions-metrics-ua/" rel="noopener  ugc nofollow" target="_blank"><div class="py ab fo"><div class="pz ab qa cl cj qb"><h2 class="bd iu gy z fp qc fr fs qd fu fw is bi translated">事件跟踪:维度和指标(UA)</h2><div class="qe l"><h3 class="bd b gy z fp qc fr fs qd fu fw dk translated">此示例查询包含以下所有 Google Analytics 事件跟踪维度和指标。如果你只需要一个…</h3></div><div class="qf l"><p class="bd b dl z fp qc fr fs qd fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="qg l"><div class="qs l qi qj qk qg ql md px"/></div></div></a></div><p id="ba36" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ls" href="#8272" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl pi pj hx pk" role="separator"><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn"/></div><div class="im in io ip iq"><h1 id="54e7" class="nj mm it bd mn nk pp nm mq nn pq np mt jz pr ka mw kc ps kd mz kf pt kg nc nt bi translated">目标转换</h1><p id="652a" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">该示例查询包含以下所有 Google Analytics 维度和指标。如果您只需要一个维度或指标，查看示例查询中的<code class="fe ln lo lp lq b">-- comments</code>,并从<code class="fe ln lo lp lq b">SELECT</code>子句中复制您需要的部分。确保您还添加了正确计算结果所需的任何附加条件(在<code class="fe ln lo lp lq b">FROM</code>、<code class="fe ln lo lp lq b">WHERE</code>、<code class="fe ln lo lp lq b">GROUP BY</code>和<code class="fe ln lo lp lq b">ORDER BY</code>中)。</p><h2 id="d9b2" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">目标转换维度</h2><p id="20ac" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">目标完成位置<br/>目标上一步-1 <br/>目标上一步-2 <br/>目标上一步-3</p><h2 id="7a9d" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">目标转化指标</h2><p id="3b01" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">目标 XX 完成情况</p><h2 id="bf6d" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">示例查询</h2><div class="pu pv gp gr pw px"><a href="https://www.ga4bigquery.com/goal-conversions-dimensions-metrics-ua/" rel="noopener  ugc nofollow" target="_blank"><div class="py ab fo"><div class="pz ab qa cl cj qb"><h2 class="bd iu gy z fp qc fr fs qd fu fw is bi translated">目标转换:维度和指标(UA)</h2><div class="qe l"><h3 class="bd b gy z fp qc fr fs qd fu fw dk translated">此示例查询包含以下所有 Google Analytics 目标转换维度和指标。如果你只需要…</h3></div><div class="qf l"><p class="bd b dl z fp qc fr fs qd fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="qg l"><div class="qt l qi qj qk qg ql md px"/></div></div></a></div><p id="7d16" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ls" href="#8272" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl pi pj hx pk" role="separator"><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn"/></div><div class="im in io ip iq"><h1 id="d34a" class="nj mm it bd mn nk pp nm mq nn pq np mt jz pr ka mw kc ps kd mz kf pt kg nc nt bi translated">(增强型)电子商务(交易)</h1><p id="aedf" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">该示例查询包含以下所有 Google Analytics 维度和指标。如果您只需要一个维度或度量，查看示例查询中的<code class="fe ln lo lp lq b">-- comments</code>,并从<code class="fe ln lo lp lq b">SELECT</code>子句中复制您需要的部分。确保您还添加了正确计算结果所需的任何附加条件(在<code class="fe ln lo lp lq b">FROM</code>、<code class="fe ln lo lp lq b">WHERE</code>、<code class="fe ln lo lp lq b">GROUP BY</code>和<code class="fe ln lo lp lq b">ORDER BY</code>)。</p><h2 id="40b8" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">(增强的)电子商务维度</h2><p id="14ec" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">交易 ID</p><h2 id="2945" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">(增强的)电子商务指标</h2><p id="40d8" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">交易<br/>电子商务转换率<br/>收入<br/>平均。订单价值<br/>每会话价值<br/>运费<br/>税<br/>每用户收入<br/>每用户交易</p><h2 id="da7e" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">示例查询</h2><div class="pu pv gp gr pw px"><a href="https://www.ga4bigquery.com/enhanced-ecommerce-transactions-dimensions-metrics-ua/" rel="noopener  ugc nofollow" target="_blank"><div class="py ab fo"><div class="pz ab qa cl cj qb"><h2 class="bd iu gy z fp qc fr fs qd fu fw is bi translated">(增强)电子商务交易:维度和指标(UA)</h2><div class="qe l"><h3 class="bd b gy z fp qc fr fs qd fu fw dk translated">此示例查询包含以下所有谷歌分析电子商务交易的维度和指标。如果你只是…</h3></div><div class="qf l"><p class="bd b dl z fp qc fr fs qd fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="qg l"><div class="qu l qi qj qk qg ql md px"/></div></div></a></div><p id="99fa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ls" href="#8272" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl pi pj hx pk" role="separator"><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn"/></div><div class="im in io ip iq"><h1 id="f2c8" class="nj mm it bd mn nk pp nm mq nn pq np mt jz pr ka mw kc ps kd mz kf pt kg nc nt bi translated">电子商务(产品)</h1><p id="8c76" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">当输入产品范围时，您必须验证<a class="ae ls" href="#79ef" rel="noopener ugc nofollow">增强型电子商务</a>是否在谷歌分析中启用。如果是这样，您可以安全地使用 hits.product 字段。如果只测量“标准”电子商务:使用 hits.item 字段。</p><p id="06b0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该示例查询包含以下所有 Google Analytics 维度和指标。如果您只需要一个维度或度量，查看示例查询中的<code class="fe ln lo lp lq b">-- comments</code>，并从<code class="fe ln lo lp lq b">SELECT</code>子句中复制您需要的部分。确保您还添加了正确计算结果所需的任何附加条件(在<code class="fe ln lo lp lq b">FROM</code>、<code class="fe ln lo lp lq b">WHERE</code>、<code class="fe ln lo lp lq b">GROUP BY</code>和<code class="fe ln lo lp lq b">ORDER BY</code>)。</p><h2 id="3c96" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">电子商务维度</h2><p id="4f69" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">产品 SKU <br/>产品<br/>产品类别</p><h2 id="18af" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">电子商务指标</h2><p id="12f3" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">数量<br/>唯一采购<br/>平均。价格<br/>产品收入<br/>平均。数量</p><h2 id="8210" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">示例查询</h2><div class="pu pv gp gr pw px"><a href="https://www.ga4bigquery.com/ecommerce-products-dimensions-metrics-ua/" rel="noopener  ugc nofollow" target="_blank"><div class="py ab fo"><div class="pz ab qa cl cj qb"><h2 class="bd iu gy z fp qc fr fs qd fu fw is bi translated">电子商务产品:维度和指标(UA)</h2><div class="qe l"><h3 class="bd b gy z fp qc fr fs qd fu fw dk translated">当进入产品范围时，您必须验证谷歌分析中是否启用了增强型电子商务。如果是这样，你就…</h3></div><div class="qf l"><p class="bd b dl z fp qc fr fs qd fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="qg l"><div class="qv l qi qj qk qg ql md px"/></div></div></a></div><p id="87d8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ls" href="#8272" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl pi pj hx pk" role="separator"><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn"/></div><div class="im in io ip iq"><h1 id="79ef" class="nj mm it bd mn nk pp nm mq nn pq np mt jz pr ka mw kc ps kd mz kf pt kg nc nt bi translated">增强型电子商务(产品)</h1><p id="53b7" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">当进入产品范围时，您必须验证谷歌分析中是否启用了增强型电子商务。如果是这样，您可以安全地使用 hits.product 字段。如果只测量了<a class="ae ls" href="#f2c8" rel="noopener ugc nofollow">“标准”电子商务</a>:使用 hits.item 字段。</p><p id="7452" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该示例查询包含以下所有 Google Analytics 维度和指标。如果您只需要一个维度或指标，查看示例查询中的<code class="fe ln lo lp lq b">-- comments</code>,并从<code class="fe ln lo lp lq b">SELECT</code>子句中复制您需要的部分。确保您还添加了正确计算结果所需的任何附加条件(在<code class="fe ln lo lp lq b">FROM</code>、<code class="fe ln lo lp lq b">WHERE</code>、<code class="fe ln lo lp lq b">GROUP BY</code>和<code class="fe ln lo lp lq b">ORDER BY</code>中)。</p><h2 id="6aa3" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">增强的电子商务维度</h2><p id="f8ce" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">产品 SKU <br/>产品<br/>产品类别(增强型电子商务)<br/>产品品牌<br/>产品变型</p><h2 id="53e9" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">增强的电子商务指标</h2><p id="083b" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">数量<br/>唯一购买量<br/>产品收入<br/>平均值。价格<br/>平均值。数量<br/>购买到明细比率<br/>购物车到明细比率<br/>产品添加到购物车<br/>产品结账<br/>产品明细视图<br/>产品退款<br/>产品从购物车中移除<br/>退款金额</p><h2 id="49c3" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">示例查询</h2><div class="pu pv gp gr pw px"><a href="https://www.ga4bigquery.com/enhanced-ecommerce-products-dimensions-metrics-ua/" rel="noopener  ugc nofollow" target="_blank"><div class="py ab fo"><div class="pz ab qa cl cj qb"><h2 class="bd iu gy z fp qc fr fs qd fu fw is bi translated">增强型电子商务产品:维度和指标(UA)</h2><div class="qe l"><h3 class="bd b gy z fp qc fr fs qd fu fw dk translated">当进入产品范围时，您必须验证谷歌分析中是否启用了增强型电子商务。如果是这样，你就…</h3></div><div class="qf l"><p class="bd b dl z fp qc fr fs qd fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="qg l"><div class="qw l qi qj qk qg ql md px"/></div></div></a></div><p id="3f5b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ls" href="#8272" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl pi pj hx pk" role="separator"><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn"/></div><div class="im in io ip iq"><h1 id="a972" class="nj mm it bd mn nk pp nm mq nn pq np mt jz pr ka mw kc ps kd mz kf pt kg nc nt bi translated">自定义维度和自定义指标</h1><p id="1f9c" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">该示例查询包含以下所有 Google Analytics 维度和指标。如果您只需要一个维度或度量，查看示例查询中的<code class="fe ln lo lp lq b"># comments</code>，并从<code class="fe ln lo lp lq b">SELECT</code>子句中复制您需要的部分。确保您还添加了正确计算结果所需的任何附加条件(在<code class="fe ln lo lp lq b">FROM</code>、<code class="fe ln lo lp lq b">WHERE</code>、<code class="fe ln lo lp lq b">GROUP BY</code>和<code class="fe ln lo lp lq b">ORDER BY</code>)。</p><h2 id="a4dd" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">自定义维度</h2><p id="3e63" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">自定义维度 XX(用户)<br/>自定义维度 XX(会话)<br/>自定义维度 XX(点击)<br/>自定义维度 XX(产品)</p><h2 id="a639" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">自定义指标</h2><p id="0fe0" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">【自定义指标 XX 值(命中)】T23【自定义指标 XX 值(产品)</p><h2 id="2c28" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">示例查询</h2><div class="pu pv gp gr pw px"><a href="https://www.ga4bigquery.com/custom-dimensions-metrics-ua/" rel="noopener  ugc nofollow" target="_blank"><div class="py ab fo"><div class="pz ab qa cl cj qb"><h2 class="bd iu gy z fp qc fr fs qd fu fw is bi translated">自定义维度和指标(UA)</h2><div class="qe l"><h3 class="bd b gy z fp qc fr fs qd fu fw dk translated">此示例查询包含以下所有 Google Analytics 自定义维度和指标。如果你只需要一个…</h3></div><div class="qf l"><p class="bd b dl z fp qc fr fs qd fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="qg l"><div class="qx l qi qj qk qg ql md px"/></div></div></a></div><p id="b191" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ls" href="#8272" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl pi pj hx pk" role="separator"><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn"/></div><div class="im in io ip iq"><h1 id="828a" class="nj mm it bd mn nk pp nm mq nn pq np mt jz pr ka mw kc ps kd mz kf pt kg nc nt bi translated">自定义频道分组</h1><p id="2679" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">如果需要默认通道分组，只需使用<a class="ae ls" href="#b4b4" rel="noopener ugc nofollow">通道分组</a>尺寸即可。但是，建立自己的频道分组可能有各种原因。例如，当您使用当天数据时，因为通道分组维度不可用。或者当您需要“修复”历史数据的数据质量问题时，因为这对于 Google Analytics UI 中的默认频道分组维度是不可能的。</p><p id="8473" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我将向您展示如何镜像 BigQuery 中默认频道分组的标准 Google Analytics <a class="ae ls" href="https://support.google.com/analytics/answer/3297892?hl=en&amp;ref_topic=6010089" rel="noopener ugc nofollow" target="_blank">定义</a>。如果您使用这个查询作为起点，那么创建您自己的定制或默认频道分组就不再那么困难了。</p><h2 id="7744" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">示例查询</h2><div class="pu pv gp gr pw px"><a href="https://www.ga4bigquery.com/tutorial-how-to-create-your-own-custom-channel-grouping/" rel="noopener  ugc nofollow" target="_blank"><div class="py ab fo"><div class="pz ab qa cl cj qb"><h2 class="bd iu gy z fp qc fr fs qd fu fw is bi translated">教程:如何创建自己的自定义频道分组(UA)</h2><div class="qe l"><h3 class="bd b gy z fp qc fr fs qd fu fw dk translated">如果需要默认的渠道分组，就使用渠道分组维度。然而，可以有各种…</h3></div><div class="qf l"><p class="bd b dl z fp qc fr fs qd fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="qg l"><div class="qy l qi qj qk qg ql md px"/></div></div></a></div><p id="11f9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ls" href="#8272" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl pi pj hx pk" role="separator"><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn"/></div><div class="im in io ip iq"><h1 id="67cb" class="nj mm it bd mn nk pp nm mq nn pq np mt jz pr ka mw kc ps kd mz kf pt kg nc nt bi translated">当天表格</h1><p id="d0ec" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">对于每个导出到 BigQuery 的 Google Analytics 视图，一个<code class="fe ln lo lp lq b">ga_sessions_intraday_</code>表也将在一天内被导出多次。让我们看看这是如何工作的:</p><blockquote class="oj ok ol"><p id="f686" class="ki kj lr kk b kl km ju kn ko kp jx kq om ks kt ku on kw kx ky oo la lb lc ld im bi translated">在每个数据集中，为每天的导出导入一个表。每日表格的格式为“ga_sessions_YYYYMMDD”。</p><p id="7d54" class="ki kj lr kk b kl km ju kn ko kp jx kq om ks kt ku on kw kx ky oo la lb lc ld im bi translated">日内数据大约每天导入三次。日内表格的格式为“ga_sessions_intraday_YYYYMMDD”。在同一天，当天数据的每次导入都会覆盖同一表中的前一次导入。</p><p id="4a3e" class="ki kj lr kk b kl km ju kn ko kp jx kq om ks kt ku on kw kx ky oo la lb lc ld im bi translated">每日导入完成后，前一天的日内表将被删除。对于当天，直到第一次日内导入，没有日内表。如果日内表写入失败，则保留前一天的日内表。</p><p id="edf2" class="ki kj lr kk b kl km ju kn ko kp jx kq om ks kt ku on kw kx ky oo la lb lc ld im bi translated">在每日导入完成之前，当天的数据不是最终数据。您可能会注意到日内和每日数据之间的差异，这是基于跨越上次日内导入时间界限的活动用户会话。(<a class="ae ls" href="https://support.google.com/analytics/answer/3437719?hl=en&amp;ref_topic=3416089" rel="noopener ugc nofollow" target="_blank">来源</a>)</p></blockquote><p id="6cda" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在查询中包含当天数据和历史数据的最简单方法是将通配符与更宽的<code class="fe ln lo lp lq b">_table_suffix</code>过滤器结合使用。在这个条件下，它将包括数据集中任何以<code class="fe ln lo lp lq b">ga_sessions_</code>开始并包含格式为<code class="fe ln lo lp lq b">YYYYMMDD</code>的日期的表。</p><p id="f363" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lr">注意:确保你的数据集不包含任何标题以</em> <code class="fe ln lo lp lq b">ga_sessions_</code> <em class="lr">开头的表格！</em></p><h2 id="3157" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">示例查询</h2><div class="pu pv gp gr pw px"><a href="https://www.ga4bigquery.com/how-to-query-an-intraday-table-and-combine-it-with-daily-tables-ua/" rel="noopener  ugc nofollow" target="_blank"><div class="py ab fo"><div class="pz ab qa cl cj qb"><h2 class="bd iu gy z fp qc fr fs qd fu fw is bi translated">如何查询日内表(并将其与日历表结合)- UA</h2><div class="qe l"><h3 class="bd b gy z fp qc fr fs qd fu fw dk translated">对于每个导出到 BigQuery 的 Google Analytics 视图，ga_sessions_intraday_ table 将被导出多个…</h3></div><div class="qf l"><p class="bd b dl z fp qc fr fs qd fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="qg l"><div class="qz l qi qj qk qg ql md px"/></div></div></a></div><p id="7568" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ls" href="#8272" rel="noopener ugc nofollow">返回目录</a></p></div><div class="ab cl pi pj hx pk" role="separator"><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn po"/><span class="pl bw bk pm pn"/></div><div class="im in io ip iq"><h1 id="26a4" class="nj mm it bd mn nk pp nm mq nn pq np mt jz pr ka mw kc ps kd mz kf pt kg nc nt bi translated">实时表格和视图</h1><p id="b37a" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">如果您没有看到当天的表格，而是看到实时表格和视图，则您的 Google Analytics 视图启用了流导出。要查询这些数据并将其与来自<code class="fe ln lo lp lq b">ga_sessions_</code>表的历史数据相结合，需要另一种方法。</p><blockquote class="oj ok ol"><p id="4db8" class="ki kj lr kk b kl km ju kn ko kp jx kq om ks kt ku on kw kx ky oo la lb lc ld im bi translated">每天,“流式导出”创建 1 个新表和该表的 1 个(BigQuery)视图:</p><p id="d7d7" class="ki kj lr kk b kl km ju kn ko kp jx kq om ks kt ku on kw kx ky oo la lb lc ld im bi translated">table:ga _ real time _ sessions _ YYYYMMDD 是一个内部的<em class="it"> staging </em>表，它包括一天中发生的所有活动的所有会话记录。大约每 15 分钟连续导出一次数据。当会话跨越多个导出操作时，此表中包含会话的多条记录。</p><p id="de26" class="ki kj lr kk b kl km ju kn ko kp jx kq om ks kt ku on kw kx ky oo la lb lc ld im bi translated">ga_realtime_sessions_YYYYMMDD 表不应用于查询(并且不受 Google Analytics 技术支持的支持)。对这些表的查询可能会产生意外的结果，因为它们可能包含某些会话的重复记录。请改为查询 ga _ real time _ sessions _ view _ YYYYMMDD 视图。</p><p id="31ef" class="ki kj lr kk b kl km ju kn ko kp jx kq om ks kt ku on kw kx ky oo la lb lc ld im bi translated">view:ga _ real time _ sessions _ view _ YYYYMMDD 位于导出的表的顶部，用于对跨导出边界存在的重复会话的多个记录进行重复数据删除。在此表中查询已消除重复的流数据。(<a class="ae ls" href="https://support.google.com/analytics/answer/7430726?hl=en" rel="noopener ugc nofollow" target="_blank">来源</a>)</p></blockquote><p id="ef3e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在撰写本文时，这个每日生成的实时视图只能用遗留 SQL 查询。任何标准的 SQL 查询都会导致以下错误:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi ra"><img src="../Images/2c1b5278eff07e8e60b6d189eee08506.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8s3DN09_5vqR2DVsyfHW4w.png"/></div></div></figure><p id="c729" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了能够使用标准 SQL，我们必须创建自己的实时视图。</p><h2 id="61bf" class="ml mm it bd mn mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">示例查询</h2><div class="pu pv gp gr pw px"><a href="https://www.ga4bigquery.com/how-to-query-realtime-tables-and-views-and-combine-it-with-daily-tables-ua/" rel="noopener  ugc nofollow" target="_blank"><div class="py ab fo"><div class="pz ab qa cl cj qb"><h2 class="bd iu gy z fp qc fr fs qd fu fw is bi translated">如何查询实时表和视图(并将其与每日表相结合)</h2><div class="qe l"><h3 class="bd b gy z fp qc fr fs qd fu fw dk translated">如果您没有看到当天的表格，但看到了实时表格和视图，您的 Google Analytics 已启用流导出…</h3></div><div class="qf l"><p class="bd b dl z fp qc fr fs qd fu fw dk translated">www.ga4bigquery.com</p></div></div><div class="qg l"><div class="rb l qi qj qk qg ql md px"/></div></div></a></div><p id="0c53" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae ls" href="#8272" rel="noopener ugc nofollow">返回目录</a></p></div></div>    
</body>
</html>