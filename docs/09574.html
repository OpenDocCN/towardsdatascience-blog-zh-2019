<html>
<head>
<title>Compose and play music in R with the Rmusic package</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Rmusic 软件包在 R 中创作和播放音乐</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/compose-and-play-music-in-r-with-the-rmusic-package-b2afa90761ea?source=collection_archive---------30-----------------------#2019-12-16">https://towardsdatascience.com/compose-and-play-music-in-r-with-the-rmusic-package-b2afa90761ea?source=collection_archive---------30-----------------------#2019-12-16</a></blockquote><div><div class="fc ij ik il im in"/><div class="io ip iq ir is"><div class=""/><div class=""><h2 id="a070" class="pw-subtitle-paragraph js iu iv bd b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj dk translated">介绍一个有趣的，实验性的软件包，它允许你创作简单的音乐，并在你的休息时间播放它们</h2></div><p id="caad" class="pw-post-body-paragraph kk kl iv km b kn ko jw kp kq kr jz ks kt ku kv kw kx ky kz la lb lc ld le lf io bi translated">几年前的圣诞节，在这个老 Stackoverflow post 的帮助下，我创作了一个音乐大师版本的《铃儿响叮当》。我只是回到这段代码，把它变成了一个 R 包，可以播放你想创作的任何曲子。</p><h2 id="244c" class="li lj iv bd lk ll lm dn ln lo lp dp lq kt lr ls lt kx lu lv lw lb lx ly lz ma bi translated">安装软件包</h2><p id="b49a" class="pw-post-body-paragraph kk kl iv km b kn mb jw kp kq mc jz ks kt md kv kw kx me kz la lb mf ld le lf io bi translated">要安装该软件包，请运行:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="6065" class="li lj iv ml b gy mp mq l mr ms">devtools::install_github("keithmcnulty/Rmusic", build_vignettes = TRUE)</span></pre><h2 id="6795" class="li lj iv bd lk ll lm dn ln lo lp dp lq kt lr ls lt kx lu lv lw lb lx ly lz ma bi translated">作曲</h2><p id="8bed" class="pw-post-body-paragraph kk kl iv km b kn mb jw kp kq mc jz ks kt md kv kw kx me kz la lb mf ld le lf io bi translated">要创作简单的音乐，你需要创建两个向量，一个包含音符，另一个包含节拍中音符的持续时间。当然，这两个向量的长度应该是一样的。</p><p id="6241" class="pw-post-body-paragraph kk kl iv km b kn ko jw kp kq kr jz ks kt ku kv kw kx ky kz la lb lc ld le lf io bi translated">根据以下规则，notes 向量应该是字符串向量:</p><ul class=""><li id="bc43" class="mt mu iv km b kn ko kq kr kt mv kx mw lb mx lf my mz na nb bi translated">音符从<code class="fe nc nd ne ml b">"A"</code>到<code class="fe nc nd ne ml b">"G"</code></li><li id="a28e" class="mt mu iv km b kn nf kq ng kt nh kx ni lb nj lf my mz na nb bi translated">半音是通过在弦上加一个<code class="fe nc nd ne ml b">#</code>(升)或<code class="fe nc nd ne ml b">b</code>(降)来表示的，例如<code class="fe nc nd ne ml b">"A#"</code>或<code class="fe nc nd ne ml b">"Bb"</code></li><li id="8872" class="mt mu iv km b kn nf kq ng kt nh kx ni lb nj lf my mz na nb bi translated">默认八度音程是第四钢琴八度音程。对于较低或较高的八度音程，将八度音程编号附加到弦上，例如<code class="fe nc nd ne ml b">"Ab3"</code>、<code class="fe nc nd ne ml b">"C3"</code>、<code class="fe nc nd ne ml b">"G#5"</code></li></ul><p id="295b" class="pw-post-body-paragraph kk kl iv km b kn ko jw kp kq kr jz ks kt ku kv kw kx ky kz la lb lc ld le lf io bi translated">持续时间向量包含简单的数字字符串，代表每个音符的节拍数，例如<code class="fe nc nd ne ml b">2</code>或<code class="fe nc nd ne ml b">1.25</code></p><h2 id="32ac" class="li lj iv bd lk ll lm dn ln lo lp dp lq kt lr ls lt kx lu lv lw lb lx ly lz ma bi translated">例如:艺术大师《铃儿响叮当》</h2><p id="9c36" class="pw-post-body-paragraph kk kl iv km b kn mb jw kp kq mc jz ks kt md kv kw kx me kz la lb mf ld le lf io bi translated">我喜欢把音符向量写成每一小节音乐的字符串，然后用<code class="fe nc nd ne ml b">strsplit()</code>把它们分解成想要的格式:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="c3b1" class="li lj iv ml b gy mp mq l mr ms">jbells_pitch &lt;- paste(<br/>  "E E E",<br/>  "E E E",<br/>  "E G C D",<br/>  "E",<br/>  "F F F F",<br/>  "F E E E",<br/>  "E D D E",<br/>  "D G",<br/>  "E E E",<br/>  "E E E",<br/>  "E G C D",<br/>  "E",<br/>  "F F F F",<br/>  "F E E E E",<br/>  "G G F D",<br/>  "C",<br/>  "G3 E D C",<br/>  "G3",<br/>  "G3 G3 G3 E D C",<br/>  "A3",<br/>  "A3 F E D",<br/>  "B3",<br/>  "G G F D",<br/>  "E",<br/>  "G3 E D C",<br/>  "G3",<br/>  "G3 E D C",<br/>  "A3 A3", <br/>  "A3 F E D",<br/>  "G G G G A G F D",<br/>  "C C5 B A G F G",<br/>  "E E E G C D",<br/>  "E E E G C D",<br/>  "E F G A C E D F",<br/>  "E C D E F G A G",<br/>  "F F F F F F",<br/>  "F E E E E E",<br/>  "E D D D D E",<br/>  "D D E F G F E D",<br/>  "E E E G C D",<br/>  "E E E G C D",<br/>  "E F G A C E D F",<br/>  "E C D E F G A G",<br/>  "F F F F F F",<br/>  "F E E E E E",<br/>  "G C5 B A G F E D",<br/>  "C C E G C5"<br/>)</span><span id="effd" class="li lj iv ml b gy nk mq l mr ms">jbells_pitch &lt;- strsplit(jbells_pitch, " ")[[1]]</span></pre><p id="992a" class="pw-post-body-paragraph kk kl iv km b kn ko jw kp kq kr jz ks kt ku kv kw kx ky kz la lb lc ld le lf io bi translated">对于持续时间向量:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="8a8f" class="li lj iv ml b gy mp mq l mr ms">jbells_duration &lt;- c(<br/>  1, 1, 2, <br/>  1, 1, 2, <br/>  1, 1, 1.5, 0.5, <br/>  4, <br/>  1, 1, 1, 1, <br/>  1, 1, 1, 1, <br/>  1, 1, 1, 1,<br/>  2, 2,<br/>  1, 1, 2, <br/>  1, 1, 2, <br/>  1, 1, 1.5, 0.5, <br/>  4, <br/>  1, 1, 1, 1, <br/>  1, 1, 1, 0.5, 0.5, <br/>  1, 1, 1, 1,<br/>  4,<br/>  1, 1, 1, 1, <br/>  3, .5, .5, <br/>  1, 1, 1, 1, <br/>  4,<br/>  1, 1, 1, 1, <br/>  4,<br/>  1, 1, 1, 1, <br/>  4,<br/>  1, 1, 1, 1, <br/>  4,<br/>  1, 1, 1, 1, <br/>  3, 1,<br/>  1, 1, 1, 1,<br/>  1, 1, 1, 1, <br/>  1, 1, 1, 1, <br/>  1, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5,<br/>  1, 1, 0.5, 0.5, 0.5, 0.5, <br/>  1, 1, 0.5, 0.5, 0.5, 0.5,<br/>  0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5,<br/>  0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5,<br/>  1, 0.5, 0.5, 1, 0.5, 0.5, <br/>  1, 0.5, 0.5, 1, 0.5, 0.5, <br/>  1, 0.5, 0.5, 0.5, 0.5, 1,<br/>  1, 0.33, 0.33, 0.33, 1, 0.33, 0.33, 0.33,<br/>  1, 1, 0.5, 0.5, 0.5, 0.5, <br/>  1, 1, 0.5, 0.5, 0.5, 0.5,<br/>  0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5,<br/>  0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5,<br/>  1, 0.5, 0.5, 1, 0.5, 0.5, <br/>  1, 0.5, 0.5, 1, 0.5, 0.5, <br/>  0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5,<br/>  1, 0.33, 0.33, 0.33, 2<br/>)</span></pre><p id="4270" class="pw-post-body-paragraph kk kl iv km b kn ko jw kp kq kr jz ks kt ku kv kw kx ky kz la lb lc ld le lf io bi translated">你可以在套装的简介中找到一些其他的例子。</p><h2 id="de6b" class="li lj iv bd lk ll lm dn ln lo lp dp lq kt lr ls lt kx lu lv lw lb lx ly lz ma bi translated">播放或保存音乐</h2><p id="9a3c" class="pw-post-body-paragraph kk kl iv km b kn mb jw kp kq mc jz ks kt md kv kw kx me kz la lb mf ld le lf io bi translated">要在 R 会话中播放叮当音乐，只需运行:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="c41c" class="li lj iv ml b gy mp mq l mr ms">Rmusic::play_music(jbells_pitch, jbells_duration)</span></pre><p id="7130" class="pw-post-body-paragraph kk kl iv km b kn ko jw kp kq kr jz ks kt ku kv kw kx ky kz la lb lc ld le lf io bi translated"><code class="fe nc nd ne ml b">play_music()</code>函数期望音符和持续时间向量作为其前两个参数，并且还有一个<code class="fe nc nd ne ml b">tempo</code>参数，其默认值为每分钟 240 拍。</p><p id="c9c4" class="pw-post-body-paragraph kk kl iv km b kn ko jw kp kq kr jz ks kt ku kv kw kx ky kz la lb lc ld le lf io bi translated">要将其保存为<code class="fe nc nd ne ml b">.wav</code>文件，只需运行:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="67fb" class="li lj iv ml b gy mp mq l mr ms">Rmusic::save_music(jbells_pitch, jbells_duration, output_file = "jbells.wav")</span></pre><p id="8041" class="pw-post-body-paragraph kk kl iv km b kn ko jw kp kq kr jz ks kt ku kv kw kx ky kz la lb lc ld le lf io bi translated"><code class="fe nc nd ne ml b">save_music()</code>函数也需要输出<code class="fe nc nd ne ml b">.wav</code>文件的路径。如果需要，请参阅帮助文档。</p><p id="d8ab" class="pw-post-body-paragraph kk kl iv km b kn ko jw kp kq kr jz ks kt ku kv kw kx ky kz la lb lc ld le lf io bi translated"><em class="lg">最初我是一名纯粹的数学家，后来我成为一名心理学家和数据科学家。我热衷于将所有这些学科的严密性应用于复杂的人的问题。我也是一个编码极客和日本 RPG 的超级粉丝。在</em> <a class="ae lh" href="https://www.linkedin.com/in/keith-mcnulty/" rel="noopener ugc nofollow" target="_blank"> <em class="lg">领英</em> </a> <em class="lg">或</em> <a class="ae lh" href="https://twitter.com/dr_keithmcnulty" rel="noopener ugc nofollow" target="_blank"> <em class="lg">推特</em> </a> <em class="lg">上找到我。</em></p><figure class="mg mh mi mj gt nm gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/974b31569db4c4ee5a2a97f21f65e1e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*JCTWpyPiS-uii1vyz3tUyw.jpeg"/></div></figure></div></div>    
</body>
</html>