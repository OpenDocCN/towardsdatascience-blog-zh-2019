<html>
<head>
<title>Jupyter notebooks tips and tricks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jupyter 笔记本提示和技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/jupyter-notebooks-tips-and-tricks-4e995e7b1fd0?source=collection_archive---------25-----------------------#2019-11-19">https://towardsdatascience.com/jupyter-notebooks-tips-and-tricks-4e995e7b1fd0?source=collection_archive---------25-----------------------#2019-11-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/145a801e31f492c83ea586d5ebad4505.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Edx341UH-ckzu2vwyeIxiA.jpeg"/></div></div></figure><h1 id="8f92" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">快捷指令</h1><ul class=""><li id="8f89" class="kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">Shift + Enter 运行单元格(代码或降价)。</li><li id="b743" class="kw kx iq ky b kz lo lb lp ld lq lf lr lh ls lj lk ll lm ln bi translated">用于在当前单元格上方插入新单元格的。</li><li id="2423" class="kw kx iq ky b kz lo lb lp ld lq lf lr lh ls lj lk ll lm ln bi translated">b 在当前单元格下插入一个新单元格。</li><li id="874a" class="kw kx iq ky b kz lo lb lp ld lq lf lr lh ls lj lk ll lm ln bi translated">m 将当前单元格改为 Markdown</li><li id="fe5a" class="kw kx iq ky b kz lo lb lp ld lq lf lr lh ls lj lk ll lm ln bi translated">y 将当前单元格更改为代码。</li><li id="5e1b" class="kw kx iq ky b kz lo lb lp ld lq lf lr lh ls lj lk ll lm ln bi translated">D + D(两次)删除选中的单元格。</li></ul></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="13c5" class="jy jz iq bd ka kb ma kd ke kf mb kh ki kj mc kl km kn md kp kq kr me kt ku kv bi translated">魔法命令</h1><ul class=""><li id="b652" class="kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">记录单行代码或整个单元的执行时间</li></ul><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="508e" class="mo jz iq mk b gy mp mq l mr ms"># Run the code multiple times and find mean runtime<br/>%timeit CODE_LINE<br/>%%timeit CODE_CELL</span><span id="9bc2" class="mo jz iq mk b gy mt mq l mr ms"># Run once and report<br/>%time CODE_LINE<br/>%%time CODE_CELL</span></pre><ul class=""><li id="3217" class="kw kx iq ky b kz mu lb mv ld mw lf mx lh my lj lk ll lm ln bi translated">使用<code class="fe mz na nb mk b">!</code>前缀运行一个 bash 命令行</li><li id="e01c" class="kw kx iq ky b kz lo lb lp ld lq lf lr lh ls lj lk ll lm ln bi translated"><code class="fe mz na nb mk b">%%bash</code>将当前代码单元改为 bash 模式运行，基本上就是在其中编写 bash 命令</li></ul><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="ef19" class="mo jz iq mk b gy mp mq l mr ms">%%bash</span><span id="61d6" class="mo jz iq mk b gy mt mq l mr ms">echo "hello from $BASH"</span></pre><ul class=""><li id="dde5" class="kw kx iq ky b kz mu lb mv ld mw lf mx lh my lj lk ll lm ln bi translated"><code class="fe mz na nb mk b">%%js</code>，<code class="fe mz na nb mk b">%% html</code>，<code class="fe mz na nb mk b">%%latex</code>，<code class="fe mz na nb mk b">%%python2</code>，<code class="fe mz na nb mk b">%%python3</code>，...以指定语言或格式运行和呈现代码单元格。</li><li id="d11b" class="kw kx iq ky b kz lo lb lp ld lq lf lr lh ls lj lk ll lm ln bi translated">当您不想在执行新代码之前担心重新加载模块时，IPython 扩展非常有用。换句话说，当你改变当前笔记本使用的某个模块中的某些东西时，改变将在你运行新的代码单元时发生，而不必担心任何事情。</li></ul><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="b2b6" class="mo jz iq mk b gy mp mq l mr ms">%load_ext autoreload<br/>%autoreload 2</span></pre><ul class=""><li id="6561" class="kw kx iq ky b kz mu lb mv ld mw lf mx lh my lj lk ll lm ln bi translated">jupyter 笔记本中的嵌入式 tensorboard</li></ul><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="2133" class="mo jz iq mk b gy mp mq l mr ms">%load_ext tensorboard</span><span id="1402" class="mo jz iq mk b gy mt mq l mr ms">%tensorboard --logdir logs/model_training_logs</span></pre><ul class=""><li id="5040" class="kw kx iq ky b kz mu lb mv ld mw lf mx lh my lj lk ll lm ln bi translated">最后，您可以通过运行<code class="fe mz na nb mk b">%lsmagic</code>列出所有可用的魔术，这将显示当前定义的线条和单元格魔术。</li></ul></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="f434" class="jy jz iq bd ka kb ma kd ke kf mb kh ki kj mc kl km kn md kp kq kr me kt ku kv bi translated">其他的</h1><ul class=""><li id="62ac" class="kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">有时你会有这个内存饥渴的变量，你可以通过设置它为<code class="fe mz na nb mk b">NONE</code>然后强制 gc 运行来回收内存</li></ul><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="e699" class="mo jz iq mk b gy mp mq l mr ms">some_var = None<br/>gc.collect()</span></pre><ul class=""><li id="755e" class="kw kx iq ky b kz mu lb mv ld mw lf mx lh my lj lk ll lm ln bi translated">使用<code class="fe mz na nb mk b">sudo service jupyter restart</code>来重启 jupyter，因为每隔一段时间 jupyter 就会抛出一个 fit，重启内核不足以让它回到响应状态。</li><li id="251a" class="kw kx iq ky b kz lo lb lp ld lq lf lr lh ls lj lk ll lm ln bi translated">在几乎任何函数、变量、...并运行代码单元来访问它的文档。</li><li id="96b5" class="kw kx iq ky b kz lo lb lp ld lq lf lr lh ls lj lk ll lm ln bi translated"><code class="fe mz na nb mk b"><a class="ae nc" href="https://tqdm.github.io/" rel="noopener ugc nofollow" target="_blank">tqdm</a></code>在阿拉伯语(塔卡杜姆，تقدّم)中的意思是“进步”,它与 jupyter 笔记本并不相关，但可以用来显示智能进度表。只要用<code class="fe mz na nb mk b">tqdm(iterable)</code>包住任何一个<code class="fe mz na nb mk b">iterable</code></li></ul><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="27e3" class="mo jz iq mk b gy mp mq l mr ms">from tqdm import tqdm</span><span id="4f16" class="mo jz iq mk b gy mt mq l mr ms">for i in tqdm(range(10000)):<br/>    pass</span></pre><ul class=""><li id="d318" class="kw kx iq ky b kz mu lb mv ld mw lf mx lh my lj lk ll lm ln bi translated">当您想要计算目录中文件的数量时，可以运行以下命令</li></ul><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="a8a0" class="mo jz iq mk b gy mp mq l mr ms">!ls DIR_NAME | wc -l</span></pre></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="585a" class="jy jz iq bd ka kb ma kd ke kf mb kh ki kj mc kl km kn md kp kq kr me kt ku kv bi translated">经典笔记本扩展</h1><p id="0a89" class="pw-post-body-paragraph nd ne iq ky b kz la nf ng lb lc nh ni ld nj nk nl lf nm nn no lh np nq nr lj ij bi translated">在<a class="ae nc" href="https://jupyter-contrib-nbextensions.readthedocs.io/en/latest/nbextensions.html" rel="noopener ugc nofollow" target="_blank">jupyter _ contrib _ nb extensions</a>中有很多很棒的扩展。不过你应该用<strong class="ky ir"> Jupyter lab </strong>代替。</p><p id="17d5" class="pw-post-body-paragraph nd ne iq ky b kz mu nf ng lb mv nh ni ld ns nk nl lf nt nn no lh nu nq nr lj ij bi translated">首先你需要改为<code class="fe mz na nb mk b">jupyter_contrib_nbextensions</code>，然后你可以安装各种有用的扩展。</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="9752" class="mo jz iq mk b gy mp mq l mr ms">pip install jupyter_contrib_nbextensions<br/>jupyter contrib nbextension install --user</span></pre><p id="4025" class="pw-post-body-paragraph nd ne iq ky b kz mu nf ng lb mv nh ni ld ns nk nl lf nt nn no lh nu nq nr lj ij bi translated">这些是我喜欢的:</p><ul class=""><li id="a8e8" class="kw kx iq ky b kz mu lb mv ld mw lf mx lh my lj lk ll lm ln bi translated"><em class="nv">code _ pretify</em>由<em class="nv"> autopep8 </em>支持，非常适合根据<a class="ae nc" href="https://www.python.org/dev/peps/pep-0008/" rel="noopener ugc nofollow" target="_blank"> PEP 8 风格指南</a>重新格式化笔记本代码单元格中的代码</li></ul><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="5ae3" class="mo jz iq mk b gy mp mq l mr ms">pip install autopep8<br/>jupyter nbextension enable code_prettify/autopep8</span></pre><ul class=""><li id="4430" class="kw kx iq ky b kz mu lb mv ld mw lf mx lh my lj lk ll lm ln bi translated">拼写检查器突出显示减价单元格中拼写错误的单词，这让我避免了一些令人尴尬的错别字。</li></ul><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="e8b0" class="mo jz iq mk b gy mp mq l mr ms">jupyter nbextension enable spellchecker/main</span></pre><ul class=""><li id="51c5" class="kw kx iq ky b kz mu lb mv ld mw lf mx lh my lj lk ll lm ln bi translated"><em class="nv"> toggle_all_line_numbers </em>顾名思义，它增加了一个工具栏按钮来切换是否显示行号</li></ul><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="7fee" class="mo jz iq mk b gy mp mq l mr ms">jupyter nbextension enable toggle_all_line_numbers/main</span></pre><ul class=""><li id="e586" class="kw kx iq ky b kz mu lb mv ld mw lf mx lh my lj lk ll lm ln bi translated"><em class="nv"> varInspector </em>非常适合调试 python 和 R 内核。它在一个浮动窗口中显示所有已定义变量的值</li></ul><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="9317" class="mo jz iq mk b gy mp mq l mr ms">jupyter nbextension enable varInspector/main</span></pre><h1 id="42c1" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">主题</h1><ul class=""><li id="8eee" class="kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">dunovank/jupyter-themes 有一个我遇到的最好的主题。我试过，然后我停止使用它，因为我一直在转换环境，所以对我来说习惯股票主题是最好的。</li></ul><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="d0b8" class="mo jz iq mk b gy mp mq l mr ms">pip install jupyterthemes</span><span id="bf4b" class="mo jz iq mk b gy mt mq l mr ms"># dark<br/>jt -t onedork -fs 95 -altp -tfs 11 -nfs 115 -cellw 88% -T</span><span id="f062" class="mo jz iq mk b gy mt mq l mr ms"># light<br/>jt -t grade3 -fs 95 -altp -tfs 11 -nfs 115 -cellw 88% -T</span><span id="a506" class="mo jz iq mk b gy mt mq l mr ms"># Restore default theme<br/>jt -r</span></pre></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><h1 id="e4dc" class="jy jz iq bd ka kb ma kd ke kf mb kh ki kj mc kl km kn md kp kq kr me kt ku kv bi translated">Jupyter 实验室扩展</h1><p id="5f55" class="pw-post-body-paragraph nd ne iq ky b kz la nf ng lb lc nh ni ld nj nk nl lf nm nn no lh np nq nr lj ij bi translated">目前我只使用两个扩展</p><ul class=""><li id="a7fb" class="kw kx iq ky b kz mu lb mv ld mw lf mx lh my lj lk ll lm ln bi translated"><a class="ae nc" href="https://github.com/krassowski/jupyterlab-go-to-definition" rel="noopener ugc nofollow" target="_blank"><em class="nv">krassowski/jupyterlab-go-to-definition</em></a>它允许我使用 Alt + click 通过鼠标跳转到定义，或者使用 Ctrl + Alt + B 键盘。</li></ul><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="e425" class="mo jz iq mk b gy mp mq l mr ms">jupyter labextension install @krassowski/jupyterlab_go_to_definition</span></pre><ul class=""><li id="94c3" class="kw kx iq ky b kz mu lb mv ld mw lf mx lh my lj lk ll lm ln bi translated"><a class="ae nc" href="https://github.com/krassowski/jupyterlab-lsp" rel="noopener ugc nofollow" target="_blank"><em class="nv">krassowski/jupyterlab-LSP</em></a>增加代码导航+悬停建议+ linters +自动补全的支持。查看他们的<a class="ae nc" href="https://github.com/krassowski/jupyterlab-lsp/blob/master/LANGUAGESERVERS.md" rel="noopener ugc nofollow" target="_blank">支持的语言服务器的完整列表</a></li></ul><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="09ef" class="mo jz iq mk b gy mp mq l mr ms">pip install --pre jupyter-lsp<br/>jupyter labextension install @krassowski/jupyterlab-lsp</span><span id="ea6b" class="mo jz iq mk b gy mt mq l mr ms">conda install -c conda-forge python-language-server</span></pre><p id="46e5" class="pw-post-body-paragraph nd ne iq ky b kz mu nf ng lb mv nh ni ld ns nk nl lf nt nn no lh nu nq nr lj ij bi translated">最后，您需要重新构建 jupyter 实验室应用程序</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="4ccc" class="mo jz iq mk b gy mp mq l mr ms">jupyter lab build</span></pre><h1 id="bbf2" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">主题</h1><p id="1ac7" class="pw-post-body-paragraph nd ne iq ky b kz la nf ng lb lc nh ni ld nj nk nl lf nm nn no lh np nq nr lj ij bi translated">有很多主题，但是我列表中的第一个定制插件不是主题。这是一个顶栏扩展，可以在亮暗主题之间快速切换</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="3533" class="mo jz iq mk b gy mp mq l mr ms">jupyter labextension install jupyterlab-topbar-extension jupyterlab-theme-toggle</span></pre><p id="4872" class="pw-post-body-paragraph nd ne iq ky b kz mu nf ng lb mv nh ni ld ns nk nl lf nt nn no lh nu nq nr lj ij bi translated">以下是我最近使用的一些主题</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="053d" class="mo jz iq mk b gy mp mq l mr ms">jupyter labextension install @telamonian/theme-darcula<br/>jupyter labextension install @rahlir/theme-gruvbox<br/>jupyter labextension install @kenshohara/theme-nord-extension</span></pre></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><p id="8b96" class="pw-post-body-paragraph nd ne iq ky b kz mu nf ng lb mv nh ni ld ns nk nl lf nt nn no lh nu nq nr lj ij bi translated">分享一下，联系一下，我的<a class="ae nc" href="https://twitter.com/mgazar_" rel="noopener ugc nofollow" target="_blank"> Twitter DMs </a>开了！</p></div></div>    
</body>
</html>