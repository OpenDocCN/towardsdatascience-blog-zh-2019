<html>
<head>
<title>Monte Carlo Integration is Magic</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">蒙特卡洛积分是神奇的</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/monte-carlo-integration-is-magic-c7f817d89610?source=collection_archive---------9-----------------------#2019-03-28">https://towardsdatascience.com/monte-carlo-integration-is-magic-c7f817d89610?source=collection_archive---------9-----------------------#2019-03-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/a929ee18253f1a2fd09df7a85cd3129c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UyagFR6XM4uAI652aXFWIg.jpeg"/></div></div></figure><p id="ffd5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">蒙特卡洛方法非常受欢迎，这主要是因为“蒙特卡洛”这个名字很吸引人，其次是因为它们在包括金融、工程和医学在内的大量行业中有无数的应用。</p><p id="9740" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">根据 Investopedia 的说法,“蒙特卡洛”<strong class="kd iu"> </strong>这个名字来源于摩纳哥的赌博中心。这是因为这些方法植根于赌场游戏中同样的机会和随机性元素。</p><p id="aa0b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然而，由于它们的广泛应用，它们更经常被描述为许多用途。然而，如果要我想出一个最能体现这种技术精神的定义，那就是:</p><blockquote class="kz la lb"><p id="d8ef" class="kb kc lc kd b ke kf kg kh ki kj kk kl ld kn ko kp le kr ks kt lf kv kw kx ky im bi translated">蒙特卡洛模拟使用随机变量生成来模拟系统中的不确定性。</p></blockquote><p id="59f1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们要看的具体应用是，如何使用蒙特卡罗模拟来计算函数的积分。</p><p id="3681" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">蒙特卡洛积分是神奇的，因为它将积分这样复杂的事情简化为几行代码。</p><p id="d4b5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">以下是我们的一些结果:</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lg"><img src="../Images/a6fb3fb23c2926399648f6c07c044ca7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K2OrV-PqVzz-6OQKo65mfg.png"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Integral over [0,1]</figcaption></figure><p id="08c9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">注意到什么了吗？</p><p id="c88b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">是的，在这三个例子中，我们几乎可以精确到小数点后三位。</p><p id="7979" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">考虑到每次计算只花了<strong class="kd iu">大约 3 行代码</strong>，这是非常惊人的。</p><p id="59f4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先，我们要看一下圆周率的蒙特卡罗估计，然后是计算这些估计值的实际编码示例。</p><p id="6c77" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">魔术的确在题为“到底发生了什么？”</p><h1 id="3ed0" class="lp lq it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">圆周率估算——我们的第一个魔术</h1><p id="eda5" class="pw-post-body-paragraph kb kc it kd b ke mn kg kh ki mo kk kl km mp ko kp kq mq ks kt ku mr kw kx ky im bi translated">考虑内接于边长为 2 的正方形的单位圆。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/cbbfcc6967e6153306f7f6f779595ed8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*wwQ6w38hL-Zd2LZrHJkwmg.png"/></div></figure><p id="bf40" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后，我们从正方形和圆形的面积得到以下结果:</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lg"><img src="../Images/e43a5cb7dae344539f86dcbec168794d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hq5btmDaju7iPLzxjl2SmQ.png"/></div></div></figure><p id="d3fd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这意味着圆周率是正方形和圆形面积比的 4 倍。</p><p id="226c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">蒙特卡罗积分表明，为了近似这个比例，我们应该在我们的内接图上生成一组随机点，并使用落在里面的点的比例。</p><p id="213c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你可以把它想象成一个飞镖盘，飞镖落在圆圈内的概率会给出面积比。</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/63ff9ef2d88c0af0f0db7ffdbd3e6936.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*a6OeDpO0nhkl14Y5F2Arew.gif"/></div></figure><p id="702c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们估计我们的比率是 16/20 = 0.8</p><p id="4ab7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">所以乘以 4，我们得到的圆周率估计值约为<strong class="kd iu"> 3.2！</strong></p><h1 id="3a39" class="lp lq it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">对于我们的第二个魔术——使用原始的蒙特卡洛来整合实际函数</h1><p id="5db5" class="pw-post-body-paragraph kb kc it kd b ke mn kg kh ki mo kk kl km mp ko kp kq mq ks kt ku mr kw kx ky im bi translated">下面是我们将在 R 中使用的过程:</p><ul class=""><li id="6d92" class="mu mv it kd b ke kf ki kj km mw kq mx ku my ky mz na nb nc bi translated">首先，我们将使用 R 的 runif 函数从均匀(0，1)分布中生成大量样本。</li><li id="7e39" class="mu mv it kd b ke nd ki ne km nf kq ng ku nh ky mz na nb nc bi translated">然后我们将包含这些随机变量的向量插入到我们的函数中</li><li id="3296" class="mu mv it kd b ke nd ki ne km nf kq ng ku nh ky mz na nb nc bi translated">最后，我们将取这些值的平均值。</li></ul><h2 id="f8af" class="ni lq it bd lr nj nk dn lv nl nm dp lz km nn no md kq np nq mh ku nr ns ml nt bi translated">第一个例子:</h2><p id="5cc2" class="pw-post-body-paragraph kb kc it kd b ke mn kg kh ki mo kk kl km mp ko kp kq mq ks kt ku mr kw kx ky im bi translated">理论上的解决方案:</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nu"><img src="../Images/394b6c767b48c0937ddc314cbd671ccc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1kGDnzxP5aJzub4f2BLiKw.jpeg"/></div></div></figure><figure class="lh li lj lk gt ju"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="a61e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">上面的代码给出了大约<strong class="kd iu"> 0.4597276 的估算！</strong></p><p id="8c9d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">令人惊讶的是，在短短几秒钟内，我们计算了一个函数的积分，我们真正做的是找到一个样本均值。</p><h2 id="bc9a" class="ni lq it bd lr nj nk dn lv nl nm dp lz km nn no md kq np nq mh ku nr ns ml nt bi translated"><strong class="ak">最后一个例子:</strong></h2><p id="8581" class="pw-post-body-paragraph kb kc it kd b ke mn kg kh ki mo kk kl km mp ko kp kq mq ks kt ku mr kw kx ky im bi translated">理论上的解决方案:</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nu"><img src="../Images/a06d678288bcd0d9031e8453089590bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IFHCB1qtG6xtRiZO-ufkyA.jpeg"/></div></div></figure><p id="5450" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">编码解决方案:</p><figure class="lh li lj lk gt ju"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="48d2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在这种情况下，我们粗略的蒙特卡罗估计大约是 1.72058！</p><p id="e303" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">更令人印象深刻。这一次我们解决了一个函数，我们通常通过首先进行 u-替换来计算，所有仍然是通过找到一个样本均值。</p><p id="e459" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是怎么做呢？！</p><h1 id="8732" class="lp lq it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">究竟发生了什么事？</h1><figure class="lh li lj lk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nx"><img src="../Images/a0be6851e7ef13d327115ed1da4b2841.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H6SJJd2zeXUVAxtdFAbvSw.png"/></div></div></figure><p id="ce66" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">均匀(0，1)随机变量是特殊的，因为它们的边界(0，1)范围的积分实际上是 1。</p><p id="cc91" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">所以如果 X~U(0，1)</p><p id="954c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">那么对于任何函数 h(x):</p><figure class="lh li lj lk gt ju gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/ac0facd2b178091465e3320c748683f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*smh4QWGP_87IQO6isR0EgQ.jpeg"/></div></figure><p id="8f0f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">所以我们看到，对于 X ~U(0，1)，理论平均值等于该函数在 X 上对[0，1]的积分。</p><p id="4fee" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">因此，由于样本均值趋向于大样本的理论均值，我们能够通过找到样本均值来计算积分。</p><blockquote class="kz la lb"><p id="e1f4" class="kb kc lc kd b ke kf kg kh ki kj kk kl ld kn ko kp le kr ks kt lf kv kw kx ky im bi translated"><strong class="kd iu">弱大数定律:</strong>对于大样本量 n，随着 n 变得更大，样本均值趋向于理论均值。</p></blockquote><h1 id="d164" class="lp lq it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">最后的笔记</h1><p id="e0be" class="pw-post-body-paragraph kb kc it kd b ke mn kg kh ki mo kk kl km mp ko kp kq mq ks kt ku mr kw kx ky im bi translated">为了得出编码示例的估计值，使用了 100000 的样本大小，这在某些情况下可能是一个非常大的数字。因此，有一大堆被称为方差缩减技术的方法，它们允许我们或者以与当前方法相同的大小误差来计算估计值，但是样本大小要小得多，或者以相同数量的样本来提供小得多的误差。</p></div></div>    
</body>
</html>