<html>
<head>
<title>Demystifying Virtual Environments in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">揭开 Python 中虚拟环境的神秘面纱</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/demystifying-virtual-environments-in-python-7c0a0b255928?source=collection_archive---------19-----------------------#2019-12-06">https://towardsdatascience.com/demystifying-virtual-environments-in-python-7c0a0b255928?source=collection_archive---------19-----------------------#2019-12-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a85c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">为什么要使用虚拟环境和安装步骤</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a7b2fef1e173a7c053282c58d87799f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o09bIVC6wtPbrZRdZeyLTw.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@joaosilas?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">João Silas</a> on <a class="ae ky" href="https://unsplash.com/s/photos/mystery?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a6c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">自从我开始用 Python 编码以来，我一直在用 Jupyter Notebook 进行我所有的 Python 编码。它非常强大，可以一次测试一行代码，添加 markdown 注释，并且有一个很好的界面。</p><p id="fc09" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Python 包允许在编程时访问各种要实现的功能，因此是 Python 编程的日常部分。唉，导入已安装的软件包时确实会出现问题。</p><p id="8363" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最近遇到了一个问题，我安装了一个特定的包(<code class="fe lv lw lx ly b">googletrans</code>)，但一个错误说这样的包不存在，不断弹出。</p><p id="e145" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有几件事需要注意:</p><ul class=""><li id="4104" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">使用命令<code class="fe lv lw lx ly b">which python</code>来确认您处于什么 Python 环境中。</li><li id="42e4" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">Jupyter 笔记本中运行的 Python 内核版本必须与你在<code class="fe lv lw lx ly b">site-packages</code>中安装包的版本相匹配。简而言之，您用来安装包的<code class="fe lv lw lx ly b">pip</code>必须对应正确的 Python 内核(Python 2 或 Python 3)。<strong class="lb iu">你应该使用 Python 3+,因此对所有安装命令使用</strong><code class="fe lv lw lx ly b"><strong class="lb iu">pip3</strong></code><strong class="lb iu"/>。</li><li id="7617" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">使用<code class="fe lv lw lx ly b">sys.path</code>检查内核正在使用的所有当前路径，并确保考虑中的软件包下载文件夹的路径包括在内。</li></ul><p id="d825" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管如此，一个人可能会卡住。这些问题可能有很多潜在的原因。绕过他们的一种方法？<strong class="lb iu"> <em class="mn">虚拟环境</em>。</strong></p><p id="b78b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，所有的包和依赖项都下载到站点包的同一个目录中。因此，为了将每个项目的依赖性从系统中分离出来，并且相互分离，我们应该使用虚拟环境。</p><h2 id="9bdd" class="mo mp it bd mq mr ms dn mt mu mv dp mw li mx my mz lm na nb nc lq nd ne nf ng bi translated">使用<code class="fe lv lw lx ly b">pip</code>:</h2><ul class=""><li id="2543" class="lz ma it lb b lc nh lf ni li nj lm nk lq nl lu me mf mg mh bi translated">确保你已经安装了<code class="fe lv lw lx ly b">virtualenv</code>。如果没有，输入你的终端:<code class="fe lv lw lx ly b">pip3 install virtualenv</code>。这将被下载到您的<code class="fe lv lw lx ly b">python3.7</code>目录下的<code class="fe lv lw lx ly b">site-packages</code>中。</li><li id="3061" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">接下来，<code class="fe lv lw lx ly b">cd</code>到您想要创建虚拟环境的目录。建议在一个地方存储所有虚拟环境。</li><li id="b256" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">接下来，创建一个虚拟环境:<code class="fe lv lw lx ly b">virtualenv name-of-virtualenv</code></li><li id="4692" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">上述命令将设置虚拟环境并安装<code class="fe lv lw lx ly b">lib</code>、<code class="fe lv lw lx ly b">bin</code>和<code class="fe lv lw lx ly b">include</code>文件夹。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/2e2a60399faca6c91a680d7ac77c0d29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IVejUqgbXL1T5O8888VV6A.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Virtual environment installation</figcaption></figure><ul class=""><li id="c308" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated"><code class="fe lv lw lx ly b">cd</code>进入环境并激活:<code class="fe lv lw lx ly b">source bin/activate</code></li><li id="1533" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">现在输入<code class="fe lv lw lx ly b">jupyter notebook</code>。在你想存放笔记本的文件夹中打开一个新的 Python3 笔记本。</li><li id="4ca8" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">要确认 Jupyter 内核使用的是什么 Python:</li></ul><ol class=""><li id="5445" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu nn mf mg mh bi translated">在你的 Jupyter 笔记本上输入并执行<code class="fe lv lw lx ly b">!which python</code>。该路径应该指向新创建的当前活动虚拟环境的 bin 中的 python。它应该是这样的:<code class="fe lv lw lx ly b">/path/to/created/virtual/environment/name-of-virtualenv/bin/python</code>。</li><li id="1907" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu nn mf mg mh bi translated">您还可以使用<code class="fe lv lw lx ly b">import os</code>和<code class="fe lv lw lx ly b">os.getcwd()</code>来检查您当前的工作目录，并确保该路径与您的虚拟环境的路径相匹配。</li></ol><ul class=""><li id="d03f" class="lz ma it lb b lc ld lf lg li mb lm mc lq md lu me mf mg mh bi translated">使用<code class="fe lv lw lx ly b">pip3</code>开始安装软件包，一切都准备好了！所有这些包都将在<code class="fe lv lw lx ly b">name-of-virtualenv/lib/python3.7/site-packages</code>中安装</li><li id="0c6e" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">[EDIT]要导入已安装的包，我们必须将<code class="fe lv lw lx ly b">site-packages</code>路径添加到系统路径列表中。<br/> <code class="fe lv lw lx ly b">import sys</code>和<code class="fe lv lw lx ly b">sys.path.insert(1, './lib/python3.7/site-packages')</code>。这将在索引“1”处插入路径，并确保在导入包时检查包的路径。<code class="fe lv lw lx ly b">./</code>指向你当前的工作目录。请注意，每次内核重启时都必须执行这一步。</li><li id="c226" class="lz ma it lb b lc mi lf mj li mk lm ml lq mm lu me mf mg mh bi translated">还要注意，一旦您关闭了 Jupyter 笔记本和<code class="fe lv lw lx ly b">deactivate</code>您的虚拟环境(通过在终端中键入命令)，然后您在与上面相同的位置打开了一个 Jupyter 笔记本，<code class="fe lv lw lx ly b">!which python</code>命令将返回 Python 的默认“全局”版本。</li></ul></div></div>    
</body>
</html>