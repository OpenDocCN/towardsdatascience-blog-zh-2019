<html>
<head>
<title>A Little spaCy Food for Thought: Easy to use NLP Framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">供思考的一点空间:易于使用的 NLP 框架</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-little-spacy-food-for-thought-easy-to-use-nlp-framework-97cbcc81f977?source=collection_archive---------19-----------------------#2019-05-16">https://towardsdatascience.com/a-little-spacy-food-for-thought-easy-to-use-nlp-framework-97cbcc81f977?source=collection_archive---------19-----------------------#2019-05-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="61b7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在下面的文章中，你将会看到如何快速简单地开始使用 spaCy。这是特别有用的初学者爱好者在 NLP 领域的一步一步的指示和光明的例子。</p><p id="332b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">spaCy 是一个 NLP 框架，由 Explosion AI 于 2015 年 2 月发布。它被认为是世界上最快的。易于使用和有能力使用神经网络是它的其他优势。</p><p id="3c7a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">第一步:安装空间</strong></p><p id="4447" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">打开您的终端(命令提示符),写下:</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="f263" class="kx ky it kt b gy kz la l lb lc">pip install spacy</span></pre><p id="a3f9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">第二步:下载语言模型</strong></p><p id="5210" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">编写以下命令(仍在您的终端中):</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="6573" class="kx ky it kt b gy kz la l lb lc">python -m spacy download en_core_web_lg</span></pre><p id="237e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">型号(en_core_web_lg)是 spaCy 最大的英文型号，大小为 788 MB。有英文版的小模型，也有其他语言版的模型(英语、德语、法语、西班牙语、葡萄牙语、意大利语、荷兰语、希腊语)。</p><p id="f00b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">第三步:导入库并加载模型</strong></p><p id="5293" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在 python 编辑器中编写了以下几行代码后，您就可以享受 NLP 的乐趣了:</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="3042" class="kx ky it kt b gy kz la l lb lc">import spacy<br/>nlp = spacy.load(‘en_core_web_lg’)</span></pre><p id="55dc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">步骤 4:创建样本文本</strong></p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="e6c6" class="kx ky it kt b gy kz la l lb lc">sample_text = “Mark Zuckerberg took two days to testify before members of Congress last week, and he apologised for privacy breaches on Facebook. He said that the social media website did not take a broad enough view of its responsibility, which was a big mistake. He continued to take responsibility for Facebook, saying that he started it, runs it, and he is responsible for what happens at the company. Illinois Senator Dick Durbin asked Zuckerberg whether he would be comfortable sharing the name of the hotel where he stayed the previous night, or the names of the people who he messaged that week. The CEO was startled by the question, and he took about 7 seconds to respond with no.”</span><span id="c4bc" class="kx ky it kt b gy ld la l lb lc">doc = nlp(sample_text)</span></pre><p id="0fb3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">步骤 5:拆分段落的句子</strong></p><p id="80e3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们把这篇文章分成几个句子，并在句尾写上每个句子的字符长度:</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="c989" class="kx ky it kt b gy kz la l lb lc">sentences = list(doc3.sents)<br/>for i in range(len(sentences)):<br/> print(sentences[i].text) <br/> print(“Number of characters:”, len(sentences[i].text))<br/> print(“ — — — — — — — — — — — — — — — — — -”)</span></pre><p id="2ea2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="le">输出:</em></p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="07d6" class="kx ky it kt b gy kz la l lb lc">Mark Zuckerberg took two days to testify before members of Congress last week, and he apologised for privacy breaches on Facebook.<br/>Number of characters: 130<br/>-----------------------------------<br/>He said that the social media website did not take a broad enough view of its responsibility, which was a big mistake.<br/>Number of characters: 118<br/>-----------------------------------<br/>He continued to take responsibility for Facebook, saying that he started it, runs it, and he is responsible for what happens at the company.<br/>Number of characters: 140<br/>-----------------------------------<br/>Illinois Senator Dick Durbin asked Zuckerberg whether he would be comfortable sharing the name of the hotel where he stayed the previous night, or the names of the people who he messaged that week.<br/>Number of characters: 197<br/>-----------------------------------<br/>The CEO was startled by the question, and he took about 7 seconds to respond with no.<br/>Number of characters: 85<br/>-----------------------------------</span></pre><p id="bc44" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">步骤 6:实体识别</strong></p><p id="a349" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">实体识别性能是自然语言处理模型的一个重要评价标准。spaCy 用一行代码就成功地实现了这一点:</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="2fcf" class="kx ky it kt b gy kz la l lb lc">from spacy import displacy<br/>displacy.render(doc, style=’ent’, jupyter=True)</span></pre><p id="1bfe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="le">输出</em>:</p><figure class="ko kp kq kr gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/abbf9fd5d270fc8a375dcd8e9bc8918c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jGBJKLcyg4is9d0t65Hm0Q.png"/></div></div></figure><p id="4e79" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">步骤 7:标记化和词性标注</strong></p><p id="707e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们对文本进行标记化，并查看每个标记的一些属性:</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="268b" class="kx ky it kt b gy kz la l lb lc">for token in doc:<br/> print(“{0}\t{1}\t{2}\t{3}\t{4}\t{5}\t{6}\t{7}”.format(<br/> token.text,<br/> token.idx,<br/> token.lemma_,<br/> token.is_punct,<br/> token.is_space,<br/> token.shape_,<br/> token.pos_,<br/> token.tag_<br/> ))</span></pre><p id="2a85" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="le">输出</em>:</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="b34f" class="kx ky it kt b gy kz la l lb lc">Mark	0	mark	False	False	Xxxx	PROPN	NNP<br/>Zucker.	5	zucker.	False	False	Xxxxx	PROPN	NNP<br/>took	16	take	False	False	xxxx	VERB	VBD<br/>two	21	two	False	False	xxx	NUM	CD<br/>days	25	day	False	False	xxxx	NOUN	NNS<br/>to	30	to	False	False	xx	PART	TO<br/>testify	33	testify	False	False	xxxx	VERB	VB<br/>before	41	before	False	False	xxxx	ADP	IN<br/>members	48	member	False	False	xxxx	NOUN	NNS<br/>of	56	of	False	False	xx	ADP	IN</span></pre><p id="6777" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">同样，它非常容易应用，并立即给出令人满意的结果。关于我打印出来的属性的简要说明:</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="ed89" class="kx ky it kt b gy kz la l lb lc">text: token itself</span><span id="323c" class="kx ky it kt b gy ld la l lb lc">idx: starting byte of the token</span><span id="f26e" class="kx ky it kt b gy ld la l lb lc">lemma_: root of the word</span><span id="0350" class="kx ky it kt b gy ld la l lb lc">is_punct: is it a punctuation symbol or not</span><span id="1a9d" class="kx ky it kt b gy ld la l lb lc">is_space: is it a space or not</span><span id="0757" class="kx ky it kt b gy ld la l lb lc">shape_: shape of the token to show which letter is the capital</span><span id="9cd7" class="kx ky it kt b gy ld la l lb lc">pos_: the simple part of speech tag</span><span id="c0cc" class="kx ky it kt b gy ld la l lb lc">tag_: the detailed part of speech tag</span></pre><p id="95d5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">什么是言语标记？</p><p id="c653" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它是在将整个文本分割成标记后，给每个标记(如名词、动词、形容词)分配标记的过程。</p><p id="0f09" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">第八步:只有数字</strong></p><p id="9c7d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当我们在处理语言和文本时，数字从何而来？</p><p id="bb4d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">由于机器需要把一切都转换成数字来理解世界，所以在 NLP 世界中每个单词都用一个数组(单词向量)来表示。以下是《空间词典》中“人”的词向量:</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="d412" class="kx ky it kt b gy kz la l lb lc">[-1.7310e-01,  2.0663e-01,  1.6543e-02, ....., -7.3803e-02]</span></pre><p id="dcb0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">spaCy 的词向量的长度是 300。在其他框架中可以不同。</p><p id="26b2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在建立单词向量之后，我们可以观察到上下文相似的单词在数学上也是相似的。以下是一些例子:</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="5b05" class="kx ky it kt b gy kz la l lb lc">from scipy import spatial</span><span id="adc8" class="kx ky it kt b gy ld la l lb lc">cosine_similarity = lambda x, y: 1 — spatial.distance.cosine(x, y)</span><span id="8563" class="kx ky it kt b gy ld la l lb lc">print(“apple vs banana: “, cosine_similarity(nlp.vocab[‘apple’].vector, nlp.vocab[‘banana’].vector))</span><span id="0f55" class="kx ky it kt b gy ld la l lb lc">print(“car vs banana: “, cosine_similarity(nlp.vocab[‘car’].vector, nlp.vocab[‘banana’].vector))</span><span id="e9d4" class="kx ky it kt b gy ld la l lb lc">print(“car vs bus: “, cosine_similarity(nlp.vocab[‘car’].vector, nlp.vocab[‘bus’].vector))</span><span id="a93b" class="kx ky it kt b gy ld la l lb lc">print(“tomatos vs banana: “, cosine_similarity(nlp.vocab[‘tomatos’].vector, nlp.vocab[‘banana’].vector))</span><span id="89a0" class="kx ky it kt b gy ld la l lb lc">print(“tomatos vs cucumber: “, cosine_similarity(nlp.vocab[‘tomatos’].vector, nlp.vocab[‘cucumber’].vector))</span></pre><p id="cc83" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="le">输出</em>:</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="4084" class="kx ky it kt b gy kz la l lb lc">apple vs banana:  0.5831844210624695<br/>car vs banana:  0.16172660887241364<br/>car vs bus:  0.48169606924057007<br/>tomatos vs banana:  0.38079631328582764<br/>tomatos vs cucumber:  0.5478045344352722</span></pre><p id="39c4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">印象深刻？当比较两种水果或蔬菜或两种交通工具时，相似性更高。当两个不相关的物体如一辆汽车和一根香蕉进行比较时，相似性很低。当我们检查西红柿和香蕉的相似性时，我们观察到它高于汽车对香蕉的相似性，但低于西红柿对黄瓜和苹果对香蕉的相似性，这反映了现实。</p><p id="f514" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">第九步:国王=王后+(男人——女人)？</strong></p><p id="41fd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果一切都用数字来表示，如果我们可以用数学的方法计算相似性，我们可以做一些其他的计算吗？比如我们把“男”减去“女”，把差加到“后”，能不能找到“王”？让我们试试:</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="1a88" class="kx ky it kt b gy kz la l lb lc">from scipy import spatial<br/> <br/>cosine_similarity = lambda x, y: 1 — spatial.distance.cosine(x, y)<br/> <br/>man = nlp.vocab[‘man’].vector<br/>woman = nlp.vocab[‘woman’].vector<br/>queen = nlp.vocab[‘queen’].vector<br/>king = nlp.vocab[‘king’].vector</span><span id="d4d8" class="kx ky it kt b gy ld la l lb lc">calculated_king = man — woman + queen</span><span id="c447" class="kx ky it kt b gy ld la l lb lc">print(“similarity between our calculated king vector and real king vector:”, cosine_similarity(calculated_king, king))</span></pre><p id="577b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="le">输出</em>:</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="4ad7" class="kx ky it kt b gy kz la l lb lc">similarity between our calculated king vector and real king vector: 0.771614134311676</span></pre><p id="3281" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我觉得还不错。你可以用不同的单词替换来尝试，你会观察到相似的有希望的结果。</p><p id="0091" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">总之；</strong></p><p id="77db" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本文的目的是对 spaCy 框架做一个简单的介绍，并展示一些简单的 NLP 应用示例。希望它是完美的。你可以在他们设计精良、内容丰富的网站<a class="ae ln" href="https://spacy.io/" rel="noopener ugc nofollow" target="_blank">https://spacy.io/</a>上找到详细的信息和大量的例子。</p><p id="6d56" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你有任何进一步的问题，请不要犹豫，写信给:haydarozler@gmail.com。</p></div></div>    
</body>
</html>