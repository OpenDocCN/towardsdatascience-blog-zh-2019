<html>
<head>
<title>Generate Sports Rankings with Data Science</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用数据科学生成体育排名</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/generate-sports-rankings-with-data-science-4dd1979571da?source=collection_archive---------9-----------------------#2019-04-04">https://towardsdatascience.com/generate-sports-rankings-with-data-science-4dd1979571da?source=collection_archive---------9-----------------------#2019-04-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5f4a393f94cb827efc8a9844f04cdd00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GV_718jdiP5ENjOk4XOn6g.jpeg"/></div></div></figure><p id="aaf5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本教程中，我们将介绍一种非常流行的算法，用于为运动队生成排名。我们将要学习的方法叫做科利评级。</p><p id="1a08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在深入研究之前，让我们先了解为什么需要这些排名系统。简单的输赢比会不会不够？要回答这个，我们先来看一个例子。假设有一个有 4 支球队参加的锦标赛，以下是结果，以及到目前为止锦标赛的最终排名。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi kw"><img src="../Images/b00580e880c4846c7e079d39e0a36dc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*2AIKG4LP9vYXVUZ5kVnAeA.png"/></div></figure><p id="71ee" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如你所看到的，曼联赢得了他们的所有 6 场比赛，轻松地坐在首位，利物浦输掉了他们所有的比赛，躺在积分榜的底部。阿森纳和切尔西分享战利品，两轮都被曼联击败，两轮都击败了利物浦，然后他们平分秋色，阿森纳在第一轮获胜，切尔西在反向比赛中回敬。</p><p id="6651" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在想象我们开始第三轮比赛，前几场比赛的结果如下。第一场:阿森纳击败曼联第二场:切尔西击败利物浦<br/>更新后的表格如下。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/e515abd2e2659e97cb05b528f606bc07.png" data-original-src="https://miro.medium.com/v2/resize:fit:574/format:webp/1*VYDzwowt3VcstBJ8dSTFvA.png"/></div></figure><p id="61c9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">等等，切尔西和阿森纳真的应该得到同样的排名吗？这不是很明显吗？阿森纳击败了曼联，他们是目前为止在锦标赛中占主导地位的球队，而切尔西击败了利物浦，反正他们输掉了所有的比赛。毫无疑问，阿森纳应该得到更多的信任，排名应该高于切尔西。但是我们怎么做呢？如果我们只是用一个简单的输赢比，就没有办法区分它们。更进一步，如果你考虑净胜球之类的问题，考虑到所有比赛都是以 2 比 1 的比分获胜，我们再次陷入僵局。那么我们应该如何考虑阿森纳击败了一支比切尔西强大得多的球队，因此应该得到更高的排名。这就是排名系统发挥作用的地方。正如我们将看到的，科利排名能够理解强队被击败的事件，并相应地调整他们的排名。所以不要再拖延了，让我们开始吧。</p><h2 id="9fe4" class="lc ld iq bd le lf lg dn lh li lj dp lk kj ll lm ln kn lo lp lq kr lr ls lt lu bi translated"><strong class="ak">科利排名</strong></h2><p id="143a" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">Wesley N. Colley 先生建议，不要像；收视率=[总胜场数]/[总游戏数]，收视率应根据以下公式计算</p><p id="c36c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">评级= [1 +总胜场数] / [2 +总游戏数]。如果你看看这个公式，在任何锦标赛开始之前，所有球队都将以 0.5 的评分开始，因为“总胜场数”和“总游戏数”都将为零。记住这一点(事实上所有的团队都是从 0.5 分开始的)，它以后会派上用场的。事实上，在所有时间内，所有团队的评分在科利算法中的平均值将始终保持在 0.5。<br/>我们可以写出如下所示的总胜率。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/62732119a4aa0bff9b2113c9621eb6f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*Y5EFIlSTjCV2hTcVNTwGYA.png"/></div></figure><p id="3b70" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">仔细观察单个团队的* [总游戏数]项，我们可以说*[总游戏数] = * [1+1+1…1]，其中“1”代表与每个对手进行的游戏。这反过来可以写成*[总游戏数] = [1/2 + +..].如果你还记得，就像开始时所说的，所有团队的评分都在 0.5 左右，因此所有团队的平均评分加起来也是 0.5。考虑到这一点，我们可以说[1/2 + +..]~ =[对手评分总和]。以此改写总胜率的方程式。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi kw"><img src="../Images/cc76cacdde60373543c5fa61481bef64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*E8E323ZdZSJUn_zP5ceYNw.png"/></div></figure><p id="4cf5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">重写评分公式，</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/e13b349d0ffe6c05911947e44b54feb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*gE3E0Mwzhox9z4xDbdfEfA.png"/></div></figure><p id="5055" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">扩展总胜率并写下单个团队的评分，我们可以写为。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/4ef3199e3637cf1bb5ddb01ac48b75a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/format:webp/1*dFSuVCEs5It9or-v32GMfg.png"/></div></figure><p id="777d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">其中，rᵢ、wᵢ、lᵢ和 ti 代表感兴趣的球队的评分、胜场、负场和总场次，而∑rj 是对手评分的总和。这可以进一步重新安排为</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi md"><img src="../Images/83191348e6a4152f68fb28e14e6087c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*4B257vv6U7UVjl3BUgdOuQ.png"/></div></figure><p id="fa51" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，正如我的大多数其他教程一样，让我们使用一个玩具示例来更好地理解数学方程。考虑两个团队的情况。如上所述，在开始之前，它们都将具有 0.5 的评级。现在让我们假设他们互相打了一场比赛。让 rW 和 rL 分别代表赢队和输队的新评级。如果您为两个团队输入 tᵢ(等于 1)，并考虑他们的 wᵢ和 lᵢ值，我们将从等式(a)获得以下结果</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi me"><img src="../Images/36b7d963b25e2150a36a07c70b417012.png" data-original-src="https://miro.medium.com/v2/resize:fit:520/format:webp/1*wJQtZs5KlGlTQl-1onUJgg.png"/></div></figure><p id="e4f0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这代表一个简单的两变量线性系统，当求解时，我们得到新的额定值 rw = 5/8 和 rL = 3/8。对于 2 个团队，方程(A)导致两个变量的线性系统，对于 N 个团队，它将导致 N 个变量的线性系统。在编程世界中，每当我们想要解 N 个变量的线性方程时，我们总是把它们写成矩阵的形式。因此，将矩阵形式的等式(A)改写为</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/90671f84b8ba67e8c40ae73b8e1b4f55.png" data-original-src="https://miro.medium.com/v2/resize:fit:228/format:webp/1*pW171jL275UPaFHSy-kwvw.png"/></div></figure><p id="77ea" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">其中<em class="mg">向量 r </em>表示所有评级 rᵢ的列向量，而<em class="mg">向量 b </em>是等式(a)右侧的列向量。矩阵 C 被定义为<strong class="ka ir">科利矩阵</strong>，只是稍微复杂一些。想象一下，我们最喜欢的四支英超球队排成 4x4 的行列，如下图所示</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mh"><img src="../Images/149727026137821ec525f2d211d8732d.png" data-original-src="https://miro.medium.com/v2/resize:fit:716/format:webp/1*oixFrQA-hem8z9jWsX9t6g.png"/></div></div></figure><p id="87ce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">科利矩阵中的对角线元素应由相应球队的数字= (2 +总游戏数)填充。因此，第一个蓝色单元格的值应该是 2 +曼联的比赛次数。同样的，切尔西、阿森纳和利物浦的比赛也将被填满。由绿色单元格表示的对角线外的元素应该具有由该单元格的行和列表示的团队之间进行的游戏次数的负值。因此，例如，与曼联行和切尔西列相交的单元格应该有一个等于曼联对切尔西比赛次数负值的数字。就这样，我们将填充科利矩阵中的剩余单元。一旦我们解了这个 N 变量线性方程 Cr = b，我们将得到' r '的向量值，它代表每个单独团队的评级。</p><p id="77cc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有了对理论背景的清晰理解，让我们继续编写一个 Python 代码来计算本文开头介绍的 toy example 的 Colley 排名。Python 代码文件以及一些支持文件可以在我的 github repo <a class="ae mi" href="https://github.com/PercyJaiswal/Colley_Rankings" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="7730" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在开始编码之前，让我解释一下两个支持文件的结构，即“分数”和“团队”，它们都是“逗号分隔值”格式。“团队”文件包含团队列表，旁边有一个“号码”。这个“号码”将用于在“分数”文件中代表该队。下面的截图显示了“团队”文件的内容。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/d84f0afe7efacebdd1697df38bbafd84.png" data-original-src="https://miro.medium.com/v2/resize:fit:338/format:webp/1*bZo3XWyYjnAvT0fcpEWChQ.png"/></div></figure><p id="5ca9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以从现在开始，无论何时我们想代表曼联，我们都会用 1 号代表他们。同样，对于切尔西、阿森纳和利物浦，我们将分别使用数字 2、3 和 4 来代表他们的分数。现在让我们在下面截图的帮助下看看分数的文件。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/368f4abc046f97674fa14a0c526ad8a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:384/format:webp/1*ZZTeDW9DwRIp9XB7EKk8cw.png"/></div></figure><p id="0fd6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">“分数”文件中的每一行对应一场比赛。我稍后会解释为什么这个文件有如此特殊的顺序。“分数”文件中的列表示= &gt;列 1 =从 1/1/0000 开始玩这个特定游戏的天数。第 2 列=今天的日期。第 3 列=团队 1 号。第 4 列=球队 1‘主场’值(1 =主场，-1 =客场，0 =中立)。第 5 列=团队 1 得分。第 6 列=团队 2 号。第 7 列=球队 2‘主场’值(1 =主场，-1 =客场，0 =中立)。第 8 列=团队 2 得分。</p><p id="714b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因为在本练习中我们不会使用第 1、2、4 和 7 列的值，所以我为它们设置了虚拟数字。此外，为了方便起见，我将分数(第 5 列表示团队 1 的分数，第 8 列表示团队 2 的分数)分别记为 2 和 1，因为在本例中我们也不会查看分数。我们将用它来决定每场比赛的赢家。</p><p id="0497" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们以第一排为例。表示比赛日期的列 1 和 2 分别具有虚拟值“1”。第 3 列的值为“1”。交叉检查我们的“团队”文件，我们可以看到值“1”是用来代表曼联。第 4 列有“-1”，表示这场比赛是曼联的客场比赛。第 5 列的值为“2 ”,表示曼联进了 2 个球。第 6 列数值代表第 2 队的号码，其中 2 号表示第 2 队是切尔西，这是一场曼联对切尔西的比赛。第 7 列的值为“1 ”,表示这是切尔西的主场比赛，最后一列的值为“1 ”,表示切尔西的进球数。</p><p id="d5e2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，让我们开始编码这个算法。编码 Colley 算法相对简单，并且相当容易理解。与任何 Python 文件一样，我们将导入所需的包，即本例中的 numpy 和 pandas。</p><pre class="kx ky kz la gt ml mm mn mo aw mp bi"><span id="2aa8" class="lc ld iq mm b gy mq mr l ms mt"># Importing packages<br/>import numpy as np<br/>import pandas as pd</span></pre><p id="6acb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后我们去读“团队”和“分数”文件。</p><pre class="kx ky kz la gt ml mm mn mo aw mp bi"><span id="009f" class="lc ld iq mm b gy mq mr l ms mt"># Reading 'teams' and 'scores' data<br/>teams = pd.read_csv('teams.txt', header = None)<br/>num_of_teams = len(teams.index)</span><span id="0ae4" class="lc ld iq mm b gy mu mr l ms mt">data = pd.read_csv('scores.txt', header = None)</span></pre><p id="525d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们用所需维数中的所有 0 来初始化 Colley 矩阵和向量 b。</p><pre class="kx ky kz la gt ml mm mn mo aw mp bi"><span id="ee89" class="lc ld iq mm b gy mq mr l ms mt"># Initializing Colley Matrix 'c'and vector 'b'<br/>c = np.zeros([num_of_teams, num_of_teams])<br/>b = np.zeros(num_of_teams)</span></pre><p id="bcce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，逐行迭代“分数”文件，我们根据哪个队在比赛以及每场比赛的获胜者来填充 Colley 矩阵和向量“b”。</p><pre class="kx ky kz la gt ml mm mn mo aw mp bi"><span id="ae83" class="lc ld iq mm b gy mq mr l ms mt"># Iterating through rows and populating Colley matrix values<br/>for index, row in data.iterrows():<br/>    t1 = row[2]<br/>    t2 = row[5]<br/>        <br/>    c[(t1-1)][(t1-1)] = c[(t1-1)][(t1-1)] + 1 # Updating diagonal element<br/>    c[(t2-1)][(t2-1)] = c[(t2-1)][(t2-1)] + 1 # Updating diagonal element<br/>    c[(t1-1)][(t2-1)] = c[(t1-1)][(t2-1)] - 1 # Updating off - diagonal element<br/>    c[(t2-1)][(t1-1)] = c[(t2-1)][(t1-1)] - 1 # Updating off - diagonal element<br/>    <br/>    # Updating vecotr b based on result of each game<br/>    if row[4] &gt; row[7]:<br/>        b[(t1-1)] += 1<br/>        b[(t2-1)] -= 1<br/>    elif row[4] &lt; row[7]:<br/>        b[(t1-1)] -= 1<br/>        b[(t2-1)] += 1</span></pre><p id="aadd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦完成，我们按照等式(A)进行调整，将 2 加到 Colley 矩阵的对角元素，并将 1 除以向量 b 的每个元素。</p><pre class="kx ky kz la gt ml mm mn mo aw mp bi"><span id="aa1a" class="lc ld iq mm b gy mq mr l ms mt"># Adding 2 to diagonal elements (total number of games) of Colley matrix<br/>diag = c.diagonal() + 2<br/>np.fill_diagonal(c, diag)</span><span id="994a" class="lc ld iq mm b gy mu mr l ms mt"># Dividing by 2 and adding one to vector b<br/>for i, value in enumerate(b):<br/>    b[i] = b[i] / 2<br/>    b[i] += 1</span></pre><p id="2f3d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，我们使用 numpy 的 linalg.solve()求解这个 N 变量线性方程。</p><pre class="kx ky kz la gt ml mm mn mo aw mp bi"><span id="9026" class="lc ld iq mm b gy mq mr l ms mt"># Solving N variable linear equation<br/>r = np.linalg.solve(c, b)</span></pre><p id="5cc6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦我们在“r”中得到结果，我们通过使用 argsort()方法显示前 4 个团队。</p><pre class="kx ky kz la gt ml mm mn mo aw mp bi"><span id="8984" class="lc ld iq mm b gy mq mr l ms mt"># Displaying ranking for top 4 teams<br/>top_teams = r.argsort()[-4:][::-1]<br/>for i in top_teams:<br/>    print (str(r[i]) + " " + str(teams.iloc[i][1]))</span></pre><p id="60ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这样，如果您成功下载了 repo 并运行了这段代码，您应该会看到下面的输出。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/525a7cf05bbf856b6dff572b444fdae8.png" data-original-src="https://miro.medium.com/v2/resize:fit:328/format:webp/1*G49PETWnGkuzbHK536_h9Q.png"/></div></figure><p id="f52d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，为了检查这个算法的真正实力，我们将通过插入下面几行来在我们的“分数”文件中增加两个游戏。<br/>第一场:阿森纳击败曼联= &gt; 1，1，1，-1，1，3，1，2 <br/>第二场:切尔西击败利物浦= &gt; 1，1，2，-1，2，4，1，1 <br/>在‘scores’中做了上述修改后再次运行 Python 文件，会得到如下结果。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/09114370bcabd6ba063b126259628e8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:472/format:webp/1*LdzF_wh_5d0653ReN8KlxA.png"/></div></figure><p id="80e0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如你所看到的，即使阿森纳和切尔西打了，赢了和输了同样多的比赛，科利算法也能够认识到这样一个事实，即阿森纳击败了比被切尔西击败的利物浦更强大的曼联队。</p><h1 id="d6a0" class="mx ld iq bd le my mz na lh nb nc nd lk ne nf ng ln nh ni nj lq nk nl nm lt nn bi translated"><strong class="ak">状态良好的团队</strong></h1><p id="c1de" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">回到“分数”文件的格式，让我们再看一个用例。假设锦标赛有 3 轮，结果如下图所示。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi kw"><img src="../Images/30242189cc37f09306ab86923536abb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*eL5HxaQTOmMS5kJOPW0hwA.png"/></div></figure><p id="e561" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">曼联在第一轮赢得所有比赛，切尔西在第二轮赢得所有比赛，阿森纳在第三轮。尽管三支球队在胜利数量上打成平手，但任何有见识的体育人士都会告诉你，在第一轮赢得所有比赛后，曼联已经失败了。另一方面，阿森纳在最近一轮的比赛中连胜，切尔西位于两者之间。考虑到这一点，即使曼联，阿森纳和切尔西的总积分相同，一个好的排名系统应该提供一个区分旧表现和最近表现的条款。</p><p id="e53b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了将这种“动量”或“形式”因素考虑在内，引入了一个称为“权重”的新变量。借助一个简单的“if else”条件语句，我们给不同的游戏赋予不同的权重。</p><pre class="kx ky kz la gt ml mm mn mo aw mp bi"><span id="24be" class="lc ld iq mm b gy mq mr l ms mt"># Iterating through rows and populating Colley matrix values<br/>for index, row in data.iterrows():<br/>    t1 = row[2]<br/>    t2 = row[5]<br/>    <br/>    if row[0] &lt;= 6: #For first round matches<br/>        weight = 0.9<br/>    elif row[0] &gt; 6 and row[0] &lt;=12: #For second round matches<br/>        weight = 1.0<br/>    else:<br/>        weight = 1.1 #For third round matches<br/>    <br/>    c[(t1-1)][(t1-1)] = c[(t1-1)][(t1-1)] + 1 * weight # Updating diagonal element<br/>    c[(t2-1)][(t2-1)] = c[(t2-1)][(t2-1)] + 1 * weight # Updating diagonal element<br/>    c[(t1-1)][(t2-1)] = c[(t1-1)][(t2-1)] - 1 * weight # Updating off - diagonal element<br/>    c[(t2-1)][(t1-1)] = c[(t2-1)][(t1-1)] - 1 * weight # Updating off - diagonal element<br/>    <br/>    # Updating vecotr b based on result of each game<br/>    if row[4] &gt; row[7]:<br/>        b[(t1-1)] += 1 * weight<br/>        b[(t2-1)] -= 1 * weight<br/>    elif row[4] &lt; row[7]:<br/>        b[(t1-1)] -= 1 * weight<br/>        b[(t2-1)] += 1 * weight</span></pre><p id="f7d0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">随着锦标赛的进行，旧游戏的比重越来越小。而与前两轮相比，最新一轮的装置被给予更高的权重。通过以上修改，如果我们再次运行我们的 Colley 算法，我们将得到以下结果。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi no"><img src="../Images/e1f1ad3621b6dd09faa7c27a15e50773.png" data-original-src="https://miro.medium.com/v2/resize:fit:496/format:webp/1*YAXMBpB1G7MW70CHfvXCHg.png"/></div></figure><p id="1a02" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不出所料，在最近的比赛中赢得所有比赛的阿森纳排名第一，而曼联排名第三，尽管他们与阿森纳和切尔西积分相同。</p><p id="6351" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就这样，我将结束这篇文章。希望你这个体育迷和数据科学家能够欣赏科利方法的美丽和简单。</p><p id="44ab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">像往常一样，如果你喜欢这篇文章，在 Twitter 上关注，转发，或者鼓掌，媒体上的赞将鼓励我继续我的博客世界之旅。</p><p id="1a80" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">直到下一次…干杯！！</p></div></div>    
</body>
</html>