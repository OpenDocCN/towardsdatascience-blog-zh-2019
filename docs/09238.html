<html>
<head>
<title>Replicating the Toronto BookCorpus dataset — a write-up</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">复制多伦多图书语料库数据集——一篇综述</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/replicating-the-toronto-bookcorpus-dataset-a-write-up-44ea7b87d091?source=collection_archive---------26-----------------------#2019-12-06">https://towardsdatascience.com/replicating-the-toronto-bookcorpus-dataset-a-write-up-44ea7b87d091?source=collection_archive---------26-----------------------#2019-12-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1bf4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过从原始来源收集和预处理图书，复制不再公开的多伦多图书语料库数据集</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/156feb7303bad0ef7fdd0853351647f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f_tPYoO0p0xpzES_D6nRRQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Front page of the <a class="ae kv" href="https://www.smashwords.com/books/category/1/downloads/0/free/medium" rel="noopener ugc nofollow" target="_blank">Smashwords </a>website</figcaption></figure><p id="162c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然 Toronto BookCorpus (TBC)数据集不再公开提供，但它仍然经常用于现代 NLP 研究(例如，像 BERT、RoBERTa、XLNet、XLM 等的变压器)。)因此，对于我们这些无法在数据集离线前获取其副本的人来说，这篇文章提供了一种尽可能复制原始 TBC 数据集的方法。</p><h1 id="4c4b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">🔍了解原始的多伦多图书语料库数据集</h1><p id="8f19" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">因此，为了尽可能好地复制 TBC 数据集，我们首先需要查阅介绍它的<a class="ae kv" href="https://arxiv.org/abs/1506.06724" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">原始论文</strong> </a> <strong class="ky ir"> </strong>和<a class="ae kv" href="https://yknzhu.wixsite.com/mbweb" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">网站</strong> </a> <strong class="ky ir"> </strong>以更好地理解它的内容。</p><p id="bede" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在论文中，朱等人(2015)写道:<em class="mp">“我们从网络上收集了 11038 本书的语料库。[……]我们只收录了超过 2 万字的书籍，以过滤掉可能更嘈杂的短篇故事。”</em>接下来，作者给出了一些汇总统计数据:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/b81d787029d722d6720b1f829ae120e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fG-AsB-48qOXIdHOBxMocg.png"/></div></div></figure><p id="3e6a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从网站上，我们了解到网站<a class="ae kv" href="https://www.smashwords.com/books/category/1/downloads/0/free/medium" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Smashwords </strong> </a>是数据集中收集和使用的 11038 本书的原始来源。</p><h1 id="856b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">📚收集书籍</h1><p id="323e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在我们已经(大致)知道了要收集多少本书，从什么来源收集，我们就可以开始收集这些书了。为此，我写了一些抓取 Smashwords 网站的代码，在<a class="ae kv" href="https://github.com/sgraaf/Replicate-Toronto-BookCorpus" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">这个 GitHub 资源库</strong> </a> <strong class="ky ir">中公开。代码很快(并发)，结构良好，有据可查，所以应该非常容易使用。</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c83cac5a9cddddd201986b162a1fa79e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9P2Yx7BrnzuhqKesC5FwTA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Inspector mode on a Smashwords book page (accessible through “Inspect Element” or F12 on Firefox)</figcaption></figure><h2 id="508c" class="mr lt iq bd lu ms mt dn ly mu mv dp mc lf mw mx me lj my mz mg ln na nb mi nc bi translated">🔗获取纯文本图书 URL</h2><p id="da4c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了获得要下载的明文书籍的 URL 列表，我们首先需要从 Smashwords 的首页获取书籍页面的 URL(每本书在 Smashwords 上都有自己的页面)。接下来，我们可以从这些书籍页面中抓取明文书籍的 URL 进行下载。<em class="mp">你可以使用我的代码</em> <a class="ae kv" href="https://github.com/sgraaf/Replicate-Toronto-BookCorpus#1-getting-the-download-urls-of-the-plaintext-books-optional" rel="noopener ugc nofollow" target="_blank"> <em class="mp">在这里</em> </a> <em class="mp">找到这样做的说明。</em></p><h2 id="0ce0" class="mr lt iq bd lu ms mt dn ly mu mv dp mc lf mw mx me lj my mz mg ln na nb mi nc bi translated">📥下载明文书籍</h2><p id="1a4f" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">现在我们有了一个要下载的明文书籍列表(使用它们的 URL)，我们需要…下载它们！这有点棘手，因为 Smashwords(暂时)阻止任何在一定时间内下载太多书(&gt; 500 本)的 IP 地址。然而，这可以通过在下载书籍和经常切换 IP 地址(大约 30 次)时使用 VPN 来规避。你可以使用我的代码 <a class="ae kv" href="https://github.com/sgraaf/Replicate-Toronto-BookCorpus#2-downloading-the-plaintext-books" rel="noopener ugc nofollow" target="_blank"> <em class="mp">在这里</em> </a> <em class="mp">找到这样做的说明。</em></p><h1 id="782f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">⚙️预处理书籍</h1><p id="500d" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">为了获得 Toronto BookCorpus 数据集在大小和内容方面的真实副本，我们需要对我们刚刚下载的明文书籍进行如下预处理:1 .句子标记的书籍和 2。将所有书籍写入一个文本文件，每行一句话。<em class="mp">你可以使用我的代码</em> <a class="ae kv" href="https://github.com/sgraaf/Replicate-Toronto-BookCorpus/blob/master/README.md#3-pre-processing-the-plaintext-books" rel="noopener ugc nofollow" target="_blank"> <em class="mp">在这里</em> </a> <em class="mp">找到这样做的说明。</em></p></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><p id="604f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">就这样，大功告成！</strong>🙌现在，您可以使用您刚刚创建的 Toronto BookCorpus 数据集的副本，亲自尝试 NLP 中最新最棒的内容。🤗</p></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><p id="bcbe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[1] Zhu，y .，Kiros，r .，Zemel，r .，Salakhutdinov，r .，Urtasun，r .，Torralba，a .，&amp; Fidler，s .，对齐书籍和电影:通过观看电影和阅读书籍实现类似故事的视觉解释(2015)，《IEEE 计算机视觉国际会议论文集》(第 19–27 页)。</p></div></div>    
</body>
</html>