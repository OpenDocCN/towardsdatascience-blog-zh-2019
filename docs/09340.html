<html>
<head>
<title>NER algo benchmark: spaCy, Flair, m-BERT and camemBERT on anonymizing French commercial legal cases</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NER 算法基准:spaCy，Flair，m-BERT 和 camemBERT 关于匿名化法国商业法律案件</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/benchmark-ner-algorithm-d4ab01b2d4c3?source=collection_archive---------4-----------------------#2019-12-10">https://towardsdatascience.com/benchmark-ner-algorithm-d4ab01b2d4c3?source=collection_archive---------4-----------------------#2019-12-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="43e3" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">(型号)大小重要吗？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a09873df7ec870b05a9cf05c12eba384.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IIuMDFikwnMU25LJ_Cp1Iw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Each of them is strong in its own way</figcaption></figure><p id="3354" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="lu">本文是上一篇关于上诉法院判决匿名化的续篇:</em> <a class="ae lv" rel="noopener" target="_blank" href="/why-we-switched-from-spacy-to-flair-to-anonymize-french-legal-cases-e7588566825f"> <em class="lu">为什么我们从 Spacy 转向 Flair 来匿名化法国判例法</em> </a> <em class="lu">。</em></p><p id="6951" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lv" href="https://www.kdnuggets.com/2019/12/predictions-ai-machine-learning-data-science-research.html" rel="noopener ugc nofollow" target="_blank">根据几位全球机器学习专家</a>，如<a class="lw lx ep" href="https://medium.com/u/dfc102dddf47?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank"> Xavier </a> (Curai)、<a class="lw lx ep" href="https://medium.com/u/865aadbce346?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank">Anima Anand Kumar</a>(Nvidia/Caltech)或<a class="lw lx ep" href="https://medium.com/u/60fd907d8004?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank"> Pedro Domingos </a>(华盛顿大学)的说法，2019 年的一个大趋势是使用非常大的预训练语言模型(BERT、Megatron-LM、AlBERT、RoBERT……)来提高大多数 NLP 任务的分数。</p><p id="8501" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我在 Lefebvre Sarrut 出版社工作，这是一家出版公司，是欧洲法律行业的主要参与者。如下所述，我们还在帮助几个欧洲政府匿名化他们的法律决定，以推动司法数据公开。</p><p id="8375" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们希望衡量这些新的大型预训练模型与应用于现实生活数据和法律决策的命名实体识别(NER)任务的其他选项相比有多好。</p><p id="5605" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们之前的文章是关于匿名化上诉法院的判决，这次我们对商业法院的判决感兴趣。这是一个重大的变化，因为商业决策更具挑战性(更高的写作风格多样性、纸张扫描噪音、OCR 错误等)。).</p><p id="8253" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，<em class="lu"> (1) </em>我们将公开解释我们的<strong class="la iu">背景</strong>以及为什么一个合法出版商花费时间和精力在法律数据中具体推动数据公开，<em class="lu"> (2) </em>详细介绍我们如何着手<strong class="la iu">注释</strong>商业决策，以及<em class="lu"> (3) </em>通过一个<strong class="la iu">基准</strong>来完成 NER 图书馆执行匿名化任务的 4 个主要选项。</p><p id="6065" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们测试了 4 种算法，2 种基于变压器，1 种基于双 LSTM，1 种具有<a class="ae lv" href="https://www.kdnuggets.com/2019/12/predictions-ai-machine-learning-data-science-research.html" rel="noopener ugc nofollow" target="_blank">原始架构</a>:</p><ul class=""><li id="5548" class="ly lz it la b lb lc le lf lh ma ll mb lp mc lt md me mf mg bi translated"><a class="lw lx ep" href="https://medium.com/u/f6208eb7f56a?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank"> spaCy </a> v.2.2，这个版本引入了一个有趣的数据增强机制，类似于我们在<a class="ae lv" rel="noopener" target="_blank" href="/why-we-switched-from-spacy-to-flair-to-anonymize-french-legal-cases-e7588566825f">上一篇文章</a>中手动尝试的，效果更好吗？</li><li id="04e8" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated"><a class="ae lv" href="https://github.com/zalandoresearch/flair" rel="noopener ugc nofollow" target="_blank">天赋</a>:双 LSTM 角色模型，上次带来了最高分，这次还会重演吗？</li><li id="b0e1" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated"><a class="ae lv" href="https://github.com/google-research/bert" rel="noopener ugc nofollow" target="_blank">多语言 BERT </a> (mBERT):著名的支持 104 种语言的 Google 机型，这么大的支持能做好工作吗？</li><li id="729a" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">camemBERT ，一个新的法语单语 BERT 模型，在 mBERT 已经支持法语的情况下，还有必要投入精力去建立这样的模型吗？</li></ul><blockquote class="mm mn mo"><p id="817d" class="ky kz lu la b lb lc ju ld le lf jx lg mp li lj lk mq lm ln lo mr lq lr ls lt im bi translated">我们公布商业决策的 NER 分数。与前一篇文章中的数据集相比，它们应该要小心一些，因为商业法庭的数据集比上诉法庭的数据集更难处理。</p><p id="72ed" class="ky kz lu la b lb lc ju ld le lf jx lg mp li lj lk mq lm ln lo mr lq lr ls lt im bi translated"><em class="it">如果你对这个话题感兴趣，在推特上关注我:</em><a class="ae lv" href="https://twitter.com/pommedeterre33" rel="noopener ugc nofollow" target="_blank"><em class="it">https://twitter.com/pommedeterre33</em></a></p></blockquote><h1 id="017b" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">为什么一家法律出版商对通过开源其源代码来免费匿名商业法律案件如此感兴趣？</h1><p id="1de9" class="pw-post-body-paragraph ky kz it la b lb nk ju ld le nl jx lg lh nm lj lk ll nn ln lo lp no lr ls lt im bi translated">在法国，3 年前投票通过了一项法律，将所有法律案件公开，因此任何公民、诉讼当事人、律师等。可以自由地使用它们，而不需要向任何人支付任何费用。在所有的法律判决中，商事法律判决的情况是特殊的。</p><p id="9226" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">商业法律案件是主要涉及公司和商业法律的判决，范围从公司之间简单的商业诉讼到复杂的破产。</p><p id="a823" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些商业决策的内在价值非常重要；作为一审判决，它们很好地描绘了当今国家的经济形势，包含了上诉法院案件中没有的事实细节，而这些事实细节是律师、大公司、保险、政府感兴趣的(例如，想想破产，你会了解到成千上万家公司日复一日发生的事情的细节，等等)。).</p><p id="1167" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，您还可以从匿名化任务中获得附加价值(只有自然人会被匿名化，但许多实体都会被搜索，包括组织名称)，例如，利用每个决策的公司名称信息，您可以轻松地生成公司文件，对所有决策进行分组，这可能有助于监控您的客户、提供商等。</p><p id="49a1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">出于当时有意义的历史原因，这些决定，根据定义是公共数据，由商业法庭的书记员组成的财团出售。</p><p id="7264" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在 2019 年读到这样的东西可能会令人惊讶，但外表是骗人的，这种状况是有道理的。简而言之，法国政府目前正在建设的一个名为<em class="lu"> Portalis </em>的大型项目旨在集中所有法国法院的法律裁决。这是一个需要几年才能完成的项目。企业家需要访问商业决策，这就是为什么书记员联盟投资了基础设施来扫描、集中和分发所有法律决策的扫描 PDF，这是一项支付成本的付费服务。</p><blockquote class="np"><p id="75a7" class="nq nr it bd ns nt nu nv nw nx ny lt dk translated">在许多人看到混乱的地方，机会主义者看到了商机。</p></blockquote><p id="4c6a" class="pw-post-body-paragraph ky kz it la b lb nz ju ld le oa jx lg lh ob lj lk ll oc ln lo lp od lr ls lt im bi translated">一些出版商试图大量购买商业决策(用于在他们的平台上发布)，但没有一家与店员的财团达成普遍协议……直到 2 年前，媒体披露一家初创公司获得了<strong class="la iu"> <em class="lu">事实上的独家交易</em> </strong>以获得数百万份商业决策以及<strong class="la iu">免费</strong>的流量，使得“独家”公共数据的转售成为他们产品的主要焦点。</p><p id="aa1e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对他们来说不幸的是，在围绕他们的<strong class="la iu">付费锁定公共数据数据库</strong>的规模进行了几个月的沟通后，他们因使用非法手段获得更“独家”的合法 decisions⁴而成为头条新闻，失去了作为 consequences⁵.之一的交易其他试图独家获得法律判决的尝试接踵而至，failed⁶.</p><p id="51ee" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">很难说今天的情况对每个人(公民、诉讼当事人、律师、出版商、创业公司、政府)有多无效。简而言之，今天，<strong class="la iu">没有人</strong>能够广泛访问最近的商业决策(更新于 1 年半之前)，它们仅以 PDF 扫描件的形式存在，可以按单位购买或手动免费索取纸质副本，但这根本不可扩展。</p><p id="53c3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这种情况下，职员协会试图为每个人改善情况。很有可能这些被集中起来并以扫描的 PDF 格式提供的判决将成为第一批被添加到未来由我们的最高 Court⁷.维护的法律案件公开数据数据库中的判决</p><blockquote class="np"><p id="b8d4" class="nq nr it bd ns nt nu nv nw nx ny lt dk translated">这种情况如此极端，以至于它让我们质疑自己以前没有关注的事情，并迫使我们决定我们要去哪里。</p></blockquote><p id="028e" class="pw-post-body-paragraph ky kz it la b lb nz ju ld le oa jx lg lh ob lj lk ll oc ln lo lp od lr ls lt im bi translated">我工作的公司(<a class="ae lv" href="https://www.lefebvre-sarrut.eu/" rel="noopener ugc nofollow" target="_blank"> Lefebvre Sarrut </a>)已经做出了在整个欧洲开放法律数据的坚定承诺(我们正在不同的国家开展几个#openJustice 项目)。我们尽最大努力推动我们自己的生态系统，在这个国家，法律裁决对所有人都是免费的<strong class="la iu">。通过下面的文章，我们想分享的是，利用当今的技术，法国商业法院判决的法律案件匿名化是可行的。</strong></p><p id="3e73" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们所有的工作(但不是明显数据隐私 reasons⁸的数据集)都是开源的(<a class="ae lv" href="https://github.com/ELS-RD/anonymisation" rel="noopener ugc nofollow" target="_blank">存储库</a>)，任何有权访问原始商业决策的人都可以轻松复制。</p><p id="9e31" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是对我们所做的端到端的描述，并提供了有关我们所达到的结果的细节。</p><h1 id="a0a0" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">不，ocr 化还没有解决！</h1><p id="521b" class="pw-post-body-paragraph ky kz it la b lb nk ju ld le nl jx lg lh nm lj lk ll nn ln lo lp no lr ls lt im bi translated">对于这个测试，我们的工作是基于商业法庭书记员协会提供的法律判决的扫描 PDF。</p><p id="2177" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们有两种选择来对它们进行 OCR:使用 SAAS 服务，如亚马逊提供的<a class="ae lv" href="https://aws.amazon.com/fr/textract/" rel="noopener ugc nofollow" target="_blank"> one </a>，或者使用开源解决方案，在我们自己的服务器上运行，如<a class="ae lv" href="https://github.com/tesseract-ocr/tesseract" rel="noopener ugc nofollow" target="_blank"> Tesseract </a>(该任务的主要开源库)，并自己完成所有工作。</p><p id="ebab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们选择<a class="ae lv" href="https://github.com/tesseract-ocr/tesseract" rel="noopener ugc nofollow" target="_blank">宇宙魔方</a>，老实说，我们不确定我们做出了正确的决定。取得不错的成绩很容易，但是我们花了很多时间去改进它。</p><p id="6c8f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们面临的主要挑战是，我们自己没有扫描过文档，而且分辨率不是最佳的，无法获得开箱即用的最佳结果。出于这个原因，它需要一个重要的后处理步骤，以清除噪声或执行简单的事情，如识别一些棘手的段落定界或不一致的页眉和页脚。</p><p id="3da1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们不会提供更多的细节，因为这超出了本文的范围。我们只能说，这是一个<strong class="la iu">制造或购买的决定</strong>，我们可能已经失败了，我们稍后将回到这一点。</p><h1 id="1109" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">无名英雄:注释工具和质量控制</h1><p id="e6c6" class="pw-post-body-paragraph ky kz it la b lb nk ju ld le nl jx lg lh nm lj lk ll nn ln lo lp no lr ls lt im bi translated">这是这个项目最引人注目的方面，我们在注释质量上的每一项努力都被转化为分数改进，即使是最小的改进。</p><p id="ee85" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">是的，数据质量很重要，这一点我们都知道，但是到底有多重要呢？</p><h2 id="5a4e" class="oe mt it bd mu of og dn my oh oi dp nc lh oj ok ne ll ol om ng lp on oo ni op bi translated">我们的不再是秘密酱，数据团队</h2><p id="c503" class="pw-post-body-paragraph ky kz it la b lb nk ju ld le nl jx lg lh nm lj lk ll nn ln lo lp no lr ls lt im bi translated">注释由一个由 5 名法学家组成的团队在 2019 年 7 月至 8 月期间手动执行(任何时候都有 1 至 3 名法学家)。我们设定的目标是注释 500 个或更多的案例(根据我们对其他注释任务的一些观察)。法律判决是一份很长的文件，如下所示，<strong class="la iu"> 500 个案例代表了近 60K 个实体提及</strong>。</p><p id="5ef2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过这个项目和其他一些与机器学习相关的项目，数据团队的角色正在演变成一些新的东西:为算法创建数据和审计算法输出(到目前为止，他们的角色更多地是为编辑产品提供支持)。</p><blockquote class="np"><p id="b6b7" class="nq nr it bd ns nt nu nv nw nx ny lt dk translated">这确实是法律出版业的一个有趣的转变，当周围的每个人都在幻想法律机器人和数字劳动力时，这也许应该得到适当的考虑…</p></blockquote><p id="d49f" class="pw-post-body-paragraph ky kz it la b lb nz ju ld le oa jx lg lh ob lj lk ll oc ln lo lp od lr ls lt im bi translated">人的部分是项目中较少被记录但仍然是最重要的部分之一。<strong class="la iu">注释可能很无聊，而且总是要求很高</strong>。为了更好地实现这些观点，所有数据科学家都应该参与注释任务。因此，他们会意识到为什么关注注释者的用户体验如此重要。这意味着仔细选择工具。</p><h2 id="ee2c" class="oe mt it bd mu of og dn my oh oi dp nc lh oj ok ne ll ol om ng lp on oo ni op bi translated">为 NER 标记任务寻找合适的工具</h2><p id="4568" class="pw-post-body-paragraph ky kz it la b lb nk ju ld le nl jx lg lh nm lj lk ll nn ln lo lp no lr ls lt im bi translated">工具直接影响数据团队的生产力。找到合适的工具首先需要知道你需要什么，然后测试它们。</p><h2 id="29ed" class="oe mt it bd mu of og dn my oh oi dp nc lh oj ok ne ll ol om ng lp on oo ni op bi translated">来自<a class="lw lx ep" href="https://medium.com/u/f6208eb7f56a?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank">空间</a>作者的作品</h2><p id="f00e" class="pw-post-body-paragraph ky kz it la b lb nk ju ld le nl jx lg lh nm lj lk ll nn ln lo lp no lr ls lt im bi translated">对于一些内部项目，我们已经使用了来自 Ines Montani 和 Matthew Honnibal 的<a class="ae lv" href="https://prodi.gy/" rel="noopener ugc nofollow" target="_blank"> prodi.gy </a>，这是一个不错的工具，但是，对于这个任务，它不符合我们的需求:</p><ul class=""><li id="8ab6" class="ly lz it la b lb lc le lf lh ma ll mb lp mc lt md me mf mg bi translated">UI 不适用于长文档(我们需要显示完整的文档以获得足够的上下文来标记)</li><li id="eea2" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">没有简单的方法来查看文档中的所有实体，</li><li id="2457" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">没有简单的方法在文档中搜索特定的实体提及，</li><li id="bb0c" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">没有针对多个标注器的高级管理和监控，</li><li id="d921" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">需要时间来设置我们的基础架构(需要召开内部会议来访问服务器等。)</li></ul><blockquote class="mm mn mo"><p id="6373" class="ky kz lu la b lb lc ju ld le lf jx lg mp li lj lk mq lm ln lo mr lq lr ls lt im bi translated"><strong class="la iu">勘误表</strong>:为了澄清上面所说的，prodi.gy 能够加载长文档，并在单个文档中管理大量的实体提及，但它的 UI 更适合于具有狭窄上下文的短文本，以帮助注释者专注于任务。</p></blockquote><p id="bb58" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">很高兴知道一个解决上面列出的一些问题的工具<a class="ae lv" href="https://support.prodi.gy/t/prodigy-annotation-manager-update-prodigy-scale-prodigy-teams/805" rel="noopener ugc nofollow" target="_blank">即将推出</a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/bd7b3bc1577b58ef9171f9d5e13798a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Zo-z3icHWqq-tyIg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">prodi.gy and its unequaled UI</figcaption></figure><h2 id="b47c" class="oe mt it bd mu of og dn my oh oi dp nc lh oj ok ne ll ol om ng lp on oo ni op bi translated">多卡诺</h2><p id="dc16" class="pw-post-body-paragraph ky kz it la b lb nk ju ld le nl jx lg lh nm lj lk ll nn ln lo lp no lr ls lt im bi translated">我们考虑的另一个选择是<a class="ae lv" href="https://github.com/chakki-works/doccano" rel="noopener ugc nofollow" target="_blank">多卡诺</a>:</p><ul class=""><li id="9807" class="ly lz it la b lb lc le lf lh ma ll mb lp mc lt md me mf mg bi translated">比<a class="ae lv" href="https://prodi.gy/" rel="noopener ugc nofollow" target="_blank">产品</a>更好的长文档用户界面/ UX</li><li id="73e7" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">开放源码</li><li id="4a7d" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">没有对协同工作的多个标注器进行高级管理和监控</li><li id="942f" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">需要时间来设置我们的基础架构(需要召开内部会议来访问服务器等。)</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/4f46ab4a81c9b35d7d808e37edae8028.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iBVo8hz3eDhU1F5V"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">doccano interface</figcaption></figure><h2 id="37f7" class="oe mt it bd mu of og dn my oh oi dp nc lh oj ok ne ll ol om ng lp on oo ni op bi translated"><a class="lw lx ep" href="https://medium.com/u/72d1dec46312?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank">🍃tagtog </a></h2><p id="611d" class="pw-post-body-paragraph ky kz it la b lb nk ju ld le nl jx lg lh nm lj lk ll nn ln lo lp no lr ls lt im bi translated">我们测试了 3 个付费的 SAAS 标签平台，其中 2 个有错误的 API 和一个坏的 UX。</p><p id="f00a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后，我们用了第三个，<a class="lw lx ep" href="https://medium.com/u/72d1dec46312?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank">🍃tagtog </a>。它不是一个开源的解决方案，费用是每月 147 欧元。它满足了我们的所有需求，没有明显的缺点:</p><ul class=""><li id="73b3" class="ly lz it la b lb lc le lf lh ma ll mb lp mc lt md me mf mg bi translated">成熟的高级多用户模式</li><li id="a23b" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">几个工具，轻松快速地审查和提高注释质量</li><li id="05c7" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">适用于长文档</li><li id="a020" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">跨多个文档修复特定模式的简单方法</li><li id="32c1" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">零设置、无服务器、无内部会议</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/06006175f0c789a2ecfed74f8bc4c9ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7egchznIFk744zpk"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><a class="lw lx ep" href="https://medium.com/u/72d1dec46312?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank">🍃tagtog</a> tagging interface (there are few other screens)</figcaption></figure><p id="a089" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有一个恼人的错误。它已经被<a class="lw lx ep" href="https://medium.com/u/72d1dec46312?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank">修复🍃tagtog </a>团队，他们似乎对我们的评论反应很大。</p><blockquote class="np"><p id="c50a" class="nq nr it bd ns nt nu nv nw nx ny lt dk translated">每月 147 欧元比在我们的基础架构上设置和维护解决方案的工程师的成本要低，而且我们避免了为获得服务器部署权限而召开内部会议。</p></blockquote><p id="fd20" class="pw-post-body-paragraph ky kz it la b lb nz ju ld le oa jx lg lh ob lj lk ll oc ln lo lp od lr ls lt im bi translated">如果你要选择一个注释工具，我的建议是永远记住，这基本上是一个<strong class="la iu">制造或购买的决定</strong>，以及其间的所有细微差别。当您可以避免该步骤时，服务器的设置/维护时间是一种“决策”选择(至少是部署)。</p><p id="6880" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，要做出决定，你需要知道你需要多少来完全控制你的流量，如果它不完全是你想要的会发生什么，你的数据是敏感的(例如健康)等。？</p><p id="064d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面是关于内部注释的一个有趣的相反观点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div></figure><h2 id="0bdb" class="oe mt it bd mu of og dn my oh oi dp nc lh oj ok ne ll ol om ng lp on oo ni op bi translated">作为迭代任务的注释</h2><p id="3eb2" class="pw-post-body-paragraph ky kz it la b lb nk ju ld le nl jx lg lh nm lj lk ll nn ln lo lp no lr ls lt im bi translated">注释的挑战是用尽可能少的资源获得正确的数据质量和数量。</p><p id="d419" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在决定了我们要注释的工具和决策数量之后，许多问题仍然存在:</p><ul class=""><li id="1862" class="ly lz it la b lb lc le lf lh ma ll mb lp mc lt md me mf mg bi translated">有没有注释方法论可循？</li><li id="fd71" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">如何定义标注计划？</li><li id="1443" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">如何检查和提高质量？</li><li id="01cb" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">如何知道质量是否可以，何时可以停止？</li><li id="8201" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">我们如何才能轻松快速地找到改进机会？</li></ul><p id="0440" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们采用的方法可以描述为以下步骤:</p><ul class=""><li id="cd5f" class="ly lz it la b lb lc le lf lh ma ll mb lp mc lt md me mf mg bi translated">决定我们需要哪种类型的实体(在我们的例子中，类似于另一个项目的实体)</li><li id="3406" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">用相似的实体对不同的数据训练模型</li><li id="b063" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">将该模型应用于 500 个随机选择的决策，对它们进行预注释</li><li id="94bb" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">将决策及其预注释上传至<a class="lw lx ep" href="https://medium.com/u/72d1dec46312?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank">🍃tagtog </a></li><li id="35de" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">手动修正<a class="lw lx ep" href="https://medium.com/u/72d1dec46312?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank">上的注释🍃tagtog </a></li><li id="91e8" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated"><em class="lu">【循环从此处开始】</em>下载标注，训练模型，测量</li><li id="d2b4" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">生成显示所有错误(标签和模型预测之间的差异)的报告</li><li id="b5f1" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">手动识别错误中的模式(一些是注释中的错误，一些是预测中的错误)</li><li id="b512" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">按照<a class="lw lx ep" href="https://medium.com/u/72d1dec46312?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank">中手动发现的模式手动修复注释🍃tagtog </a></li><li id="ca8a" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated"><em class="lu">【循环从此处开始】</em>下载数据，学习模型，测量</li><li id="a077" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi">…</li></ul><p id="aca6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们坚持<strong class="la iu">手动分析</strong>的重要性。自动分析类似于应用<em class="lu">主动学习</em>方法，众所周知，这种方法在许多现实生活的 setups⁹.中有很多局限性</p><blockquote class="np"><p id="081a" class="nq nr it bd ns nt nu nv nw nx ny lt dk translated">只有人工检查标签才能保证避免最大的偏差和最高的最终结果，这很费时间。</p></blockquote><p id="599e" class="pw-post-body-paragraph ky kz it la b lb nz ju ld le oa jx lg lh ob lj lk ll oc ln lo lp od lr ls lt im bi translated">在我们的例子中，最困难的是注释中需要更多的同质化。我们做了 6 遍，试图使每个实体类型的注释均匀化。</p><p id="0ffa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了说明同质化<strong class="la iu"> </strong>点，我们举一个例子，我们要在决策中标记 ORGANIZATION，意思是组织的名称，商业决策中大多是公司。</p><p id="9440" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在法国，将公司形式放在商业名称前面是一种习惯。以“<em class="lu"> SNC 咖啡馆露露</em>”为例。“<em class="lu"/>”是一种公司形式(像其他国家的“<a class="ae lv" href="https://en.wikipedia.org/wiki/Limited_partnership" rel="noopener ugc nofollow" target="_blank"><em class="lu"/></a>”有限合伙)。因此理论上我们不应该在标签中包含“<em class="lu"> SNC </em>”，因为我们对这些信息不感兴趣。</p><p id="a0aa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">似乎很大一部分法国企业家在组建公司时会在他们的商业名称中包含公司形式，因为他们错误地认为这样做是强制性的。在这种情况下，如果我们检查法国公司注册处，公司形式将出现在商业名称内的<strong class="la iu">。当然，另一大部分企业家没有犯这个错误。</strong></p><p id="71fd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后，当你阅读一个决定，公司形式有时出现在一个名字前面，你不能真正知道这是因为它是完整的真实名称还是法官引用这家公司的方式(因为那是用法)。</p><p id="e8eb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">理论上，你可以在标记公司名称之前在法国公司注册处进行检查，但这没关系，因为如果你的标签不是同质的，并且上下文没有告诉你是否必须包含公司表单，那么你的 NER 算法将会失败，无论它有多聪明。</p><p id="43f8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，出于同质化的原因，我们决定有一个单一的规则，无论真实名称是什么，我们总是在组织标签中包含公司形式。这就是在注释步骤中发现的那种“T4”细节。</p><p id="63de" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">按照我们在第一个注释步骤中发现的所有注释规则，在第二个步骤中制作了测试集。</p><h2 id="29f4" class="oe mt it bd mu of og dn my oh oi dp nc lh oj ok ne ll ol om ng lp on oo ni op bi translated">足够大的商业决策数据集</h2><p id="4d45" class="pw-post-body-paragraph ky kz it la b lb nk ju ld le nl jx lg lh nm lj lk ll nn ln lo lp no lr ls lt im bi translated">我们已经注释了来自法国不同商业法庭的 585 个判决(由于我们的两步注释过程，比计划的要多一点)。写作风格是多样的，几乎没有共同的惯例。部分原因是，在法国，商业法官不是专业法官，而是由同行选举出来的商人，他们没有受过几年的普通法律培训(比如上诉法院的法官)。</p><p id="eaeb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是一个需要记住的重要事实，与上诉法院相比，这使得 NER 算法的任务更加复杂，因为机器学习模型喜欢识别重复的模式。</p><p id="7b53" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面我们将测试 2 个基于 BERT 的算法。BERT 对它接受的数据有一个限制:它被限制为 512 个单词块。它可以很容易地通过分割长句来解决，然而，为了避免死角，我们只是将它们从数据集中删除。当然，所有算法的度量都是在同一个清除的数据集上执行的。</p><p id="61da" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们获得了 69.3K 个实体，分为 10 种类型，组织名称是最具代表性的，这对于商业法律案件是有意义的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/2367a53ec4953aebcee36e29a543d8a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DBfNBnXOcnvqljbUL5Xu3A.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Entity mentions count</figcaption></figure><p id="01b4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我们的<a class="ae lv" rel="noopener" target="_blank" href="/why-we-switched-from-spacy-to-flair-to-anonymize-french-legal-cases-e7588566825f">上一篇文章</a>中，我们已经描述了每种类型实体的本质。如果还没读过，总结一下，PERS 实体提到的是人名和最重要的实体类型(必须匿名)，然后是地址和组织。</p><p id="7200" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">相比之下，NER 任务的论文中使用的法语树库包含 11636 个实体提及，分布在 7 个不同的类型中。</p><h1 id="c7f0" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">聚光灯下基于深度学习的命名实体识别</h1><p id="a1b6" class="pw-post-body-paragraph ky kz it la b lb nk ju ld le nl jx lg lh nm lj lk ll nn ln lo lp no lr ls lt im bi translated">所有培训都是在相同的硬件上进行的，12 核 i7，128 GB Ram 和 2080 TI Nvidia GPU。</p><p id="5601" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Flair 和 BERT 表示的测试是通过这个<a class="ae lv" href="https://github.com/zalandoresearch/flair" rel="noopener ugc nofollow" target="_blank">库</a>中的 Flair 库完成的。BERT 表示不是由 Flair 本身生成的，它从<a class="lw lx ep" href="https://medium.com/u/b1574f0c6c5e?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank">拥抱脸</a>调用了令人敬畏的<a class="ae lv" href="https://github.com/huggingface/transformers" rel="noopener ugc nofollow" target="_blank">变形金刚</a>库。</p><p id="2a70" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这再次表明了开源生态系统的重要性，因为下面所有的测试(除了<a class="lw lx ep" href="https://medium.com/u/f6208eb7f56a?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank"> spaCy </a>)都是通过修改一行代码来完成的，所有的库都可以一起交流…太棒了！</p><p id="86e5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们使用了分支<em class="lu">GH-1221-修复-标记化-问题</em>(提交<a class="ae lv" href="https://github.com/zalandoresearch/flair/commit/3cea2fa7588d043fb33bb33f50e67dff5cf86c84" rel="noopener ugc nofollow" target="_blank"> 3cea2fa </a>)的 Flair v0.4.4，以受益于对 BERT 标记化的修复。</p><h2 id="13c6" class="oe mt it bd mu of og dn my oh oi dp nc lh oj ok ne ll ol om ng lp on oo ni op bi translated">使用<a class="lw lx ep" href="https://medium.com/u/f6208eb7f56a?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank">空间</a> 2.2 增加现成的数据</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/7b992260776624d7fa5abe277e135dd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SRoQmBr1nibbPxgx"/></div></div></figure><p id="9f9e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这个基准测试中，我们使用了来自<a class="lw lx ep" href="https://medium.com/u/c9f5e632b74f?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank">伊内斯·蒙塔尼</a>和<a class="lw lx ep" href="https://medium.com/u/42936aed59d2?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank">马修·霍尼伯</a>的<a class="lw lx ep" href="https://medium.com/u/f6208eb7f56a?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank">空间</a> v2.2。与以前的版本相比，这个版本带来了一些改进，特别是数据扩充模式。</p><p id="e9d3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">基本上，<a class="lw lx ep" href="https://medium.com/u/f6208eb7f56a?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank"> spaCy </a>作者注意到，在 NER，大小写问题是一个常见的挑战，并且容易混淆算法。这在法律判决中是非常真实的。为了帮助算法，他们在外壳中随机产生变化。它应该使模型对这个问题更加稳健。</p><p id="8380" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">根据我们在<a class="ae lv" rel="noopener" target="_blank" href="/why-we-switched-from-spacy-to-flair-to-anonymize-french-legal-cases-e7588566825f">的上一篇文章</a>中描述的经验，数据扩充是提高 NER 分数的好策略。</p><p id="db6f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">需要强调的是，这个模型没有任何每句话的数量限制。</p><p id="e177" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们在<strong class="la iu">不到一个小时</strong>(我们测试到的最快速的算法提前停止)的时间内，对一个<a class="lw lx ep" href="https://medium.com/u/f6208eb7f56a?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank">空间</a>模型进行了 12 个历元的训练，得到了以下结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/02417bb02eb7bf69abb292eefde620f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LsB80X6qFdqfYz-ZE4J73g.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><a class="lw lx ep" href="https://medium.com/u/f6208eb7f56a?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank">spaCy</a> NER scores</figcaption></figure><p id="4472" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些分数不符合我们的要求(69%的地址召回率有点低)。这对我们来说并不意外，因为我们已经在上诉法院尝试了数据增强策略，我们观察到了真正的分数提高，但不足以达到大型预训练模型的结果。</p><h2 id="3bcb" class="oe mt it bd mu of og dn my oh oi dp nc lh oj ok ne ll ol om ng lp on oo ni op bi translated">几乎是经典的人物为基础的双 LSTM 从天赋</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/32fc02f4dc16d4bd969f331c0195a688.png" data-original-src="https://miro.medium.com/v2/resize:fit:268/0*wDLQJGtZtMX7CTNx"/></div></figure><p id="6bf0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">⁰是一个基于双 LSTM 字符的单语模型，在维基百科上训练过。</p><p id="8e0d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">需要强调的是，这个模型没有任何每句话的数量限制。准确地说，它有一些字符长度限制，但它是由 Flair 库内部管理的，用户不必了解它。</p><p id="8287" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们对一个模型进行了 8 小时 40 个纪元的训练，我们的分数如下。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/95b1d63d113e6831ac1322ccf4e49ab2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rqxVYJWsUPrZS7Co4u33_Q.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Flair NER scores</figcaption></figure><blockquote class="mm mn mo"><p id="957d" class="ky kz lu la b lb lc ju ld le lf jx lg mp li lj lk mq lm ln lo mr lq lr ls lt im bi translated">这些结果低于上诉法院的结果。我们认为书写风格的多样性加上 OCR 噪声是主要原因。</p></blockquote><p id="349d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们知道，我们可以通过简单地微调我们拥有的大型商业法院判决数据集的模型来轻松提高分数，但该基准的目的是了解我们可以从盒子中得到什么。</p><h2 id="606b" class="oe mt it bd mu of og dn my oh oi dp nc lh oj ok ne ll ol om ng lp on oo ni op bi translated">多语言 BERT: 1 种表示适合 104 种语言</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/0f964059af307c282a4aaea898bdfb16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*r_QrpwH2MW1RSZYG"/></div></figure><p id="b455" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你不了解伯特，你最好先看看这些优秀的解剖伯特的文章。</p><p id="e192" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Google 发布了几个版本的 BERT，主要的有:</p><ul class=""><li id="d90f" class="ly lz it la b lb lc le lf lh ma ll mb lp mc lt md me mf mg bi translated">仅英语(有套管和无套管)有不同的尺寸(意味着不同的缓慢风格)，</li><li id="e0c8" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">仅限中文，</li><li id="d1f6" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">多语言 BERT(通常称为 mBERT):在同一型号中支持 104 种语言。</li></ul><blockquote class="np"><p id="5da5" class="nq nr it bd ns nt oz pa pb pc pd lt dk translated">mBERT 是一个有趣的选择:BERT 的惊人能力适用于大多数现有的语言……等等，事情没那么简单。</p></blockquote><p id="6407" class="pw-post-body-paragraph ky kz it la b lb nz ju ld le oa jx lg lh ob lj lk ll oc ln lo lp od lr ls lt im bi translated">训练多语言模型的技巧是首先在语言之间有一个共享的词汇表。一开始没什么意义，每种语言都有自己的词汇。</p><p id="e6bc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">根据自然语言处理中关于 BPE 的文献，他们试图找到共享的子词，而不是整个词。他们使用<a class="ae lv" href="https://github.com/google/sentencepiece" rel="noopener ugc nofollow" target="_blank">句子片段</a>来分析多语言数据集并找到重要的子词，这意味着一个词可以分成几个子词。有了这些子词，你可以试着为每一个标记学习一个单一的表示，由几种语言共享。</p><blockquote class="np"><p id="139e" class="nq nr it bd ns nt nu nv nw nx ny lt dk translated">聪明而美丽的想法，但它真的有效吗？</p></blockquote><p id="e7d0" class="pw-post-body-paragraph ky kz it la b lb nz ju ld le oa jx lg lh ob lj lk ll oc ln lo lp od lr ls lt im bi translated">在英语任务中，伯特的表现似乎低于英语伯特。到处都可以看到，小语种的开箱即用性能并没有那么高。然后出现了多篇论文《⁴》,表明通过聪明地使用单语模特⁵.，mBERT 的表现可以被显著击败</p><p id="3e80" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，mBERT 的承诺是美好的(一个模型适合几乎所有的语言),因为你需要疯狂的资源来训练一个端到端的基于 transformer 的单语模型，大多数从业者都坚持尝试利用 mBERT。</p><p id="75fe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这就是我们最初这样做的原因:我们试图在我们的商业法律案件数据集上利用 mBERT。我们在不到一天的时间里对模型<em class="lu">进行了 78 个纪元的微调。</em></p><p id="aa45" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">结果如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/250963096ea5b1cd7809f25002bb1b84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BDTZO5QDPfpv1jMwhM_ssA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">mBERT NER scores</figcaption></figure><p id="9e0e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些结果很低，特别是 77%的地址召回率相当低。此外，该模型要求遵守 512 个令牌的限制，并且在内存占用量很大的情况下训练和推断非常慢。</p><h2 id="2277" class="oe mt it bd mu of og dn my oh oi dp nc lh oj ok ne ll ol om ng lp on oo ni op bi translated">卡门贝干酪，当权力有了一个有趣的名字</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/1edb5e9d140e169d606158a1d91793d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/0*BRtSSihUxZqJHakW"/></div></figure><p id="8463" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">自从 BERT 第一次发布以来，事情略有变化，很少有非英语的 BERT 模型被发布，其中一个是法语的:<a class="ae lv" href="https://camembert-model.fr/" rel="noopener ugc nofollow" target="_blank"> camemBERT </a> ⁶(以一种令人愉快的奶酪命名)。这种架构的灵感很大程度上来自于 BERT 的一个演变，叫做<a class="ae lv" href="https://ai.facebook.com/blog/roberta-an-optimized-method-for-pretraining-self-supervised-nlp-systems/" rel="noopener ugc nofollow" target="_blank"> RoBERTa </a>。</p><p id="6137" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有趣的是，这篇论文包括了一个在 NER 的经验，并且报告了一个比适用于法语的 mBERT 大的改进。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/b5d12e58541f2a4cc1c2dfe5b2103ba2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MICkeXW30hoF-eNt"/></div></div></figure><p id="985f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在我们的例子中，数据比来自<a class="ae lv" href="http://ftb.linguist.univ-paris-diderot.fr/" rel="noopener ugc nofollow" target="_blank">法国树库</a>的更脏，因为它们来自不完善的 OCR 步骤。</p><p id="1a53" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">训练持续 9 小时 30 分(40 个时代)。我们的结果如下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/103672bc1b9324ad09143c7fd3a08cc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LUKFshfwfS_L3qbqL3rdmQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">camemBERT NER scores</figcaption></figure><p id="4723" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它比 mBERT 好得多，并且在某些实体(如 ADDRESS)上比 Flair 稍好。这与<a class="ae lv" href="https://camembert-model.fr/" rel="noopener ugc nofollow" target="_blank">卡门贝干酪</a>论文的研究结果一致(略好于 2018 年 LSTM-SOTA 通用报告格式)。</p><p id="82e0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，还有 BERT 的局限性:</p><ul class=""><li id="6f62" class="ly lz it la b lb lc le lf lh ma ll mb lp mc lt md me mf mg bi translated">512 令牌限制，</li><li id="55d5" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">Flair 的内存占用要低得多，使得在推断过程中有更大的批量成为可能。</li></ul><h1 id="0336" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">结论</h1><p id="7986" class="pw-post-body-paragraph ky kz it la b lb nk ju ld le nl jx lg lh nm lj lk ll nn ln lo lp no lr ls lt im bi translated">在该基准测试中，我们在真实数据集上比较了 4 个模型，我们的主要观察结果如下:</p><ul class=""><li id="d825" class="ly lz it la b lb lc le lf lh ma ll mb lp mc lt md me mf mg bi translated">凭借其原始架构，<a class="lw lx ep" href="https://medium.com/u/f6208eb7f56a?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank"> spaCy </a>提供了比其他测试模型低得多的性能，数据扩充模式是不够的，</li><li id="a8fc" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">mBERT 是一个巨大(缓慢)的变压器模型。在我们的 NER 任务中，它并没有转化为高分，这个观察结果与来自<a class="ae lv" href="https://camembert-model.fr/" rel="noopener ugc nofollow" target="_blank">卡门贝干酪</a>论文的发现一致，</li><li id="a7a7" class="ly lz it la b lb mh le mi lh mj ll mk lp ml lt md me mf mg bi translated">Flair 和<a class="ae lv" href="https://camembert-model.fr/" rel="noopener ugc nofollow" target="_blank"> camemBERT </a>提供了类似的结果(camemBERT<a class="ae lv" href="https://camembert-model.fr/" rel="noopener ugc nofollow" target="_blank">比</a>稍好一些)，但是<a class="ae lv" href="https://camembert-model.fr/" rel="noopener ugc nofollow" target="_blank"> camemBERT </a>在文本大小方面有一个恼人的限制(512 令牌限制)，并且在训练和推理上都比 Flair 慢。</li></ul><p id="7f01" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们的结论是，在我们的情况下，对于这个数据集，Flair 仍然是最佳选择。此外，我们认为，如果有更大的数据集用于预训练(或在领域数据中进行微调)，结果可能会更高，正如我们的最高法院在其<a class="ae lv" href="https://arxiv.org/pdf/1909.03453.pdf" rel="noopener ugc nofollow" target="_blank"> NER 论文</a>中所发现的那样。</p><p id="04f9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">事实上，与仅依赖于法语维基百科的 Flair 语言模型相比，<a class="ae lv" href="https://camembert-model.fr/" rel="noopener ugc nofollow" target="_blank"> camemBERT </a>似乎已经在 138 Gb 的未压缩文本上进行了预训练(小了 1 个数量级以上)。</p><blockquote class="np"><p id="b0e6" class="nq nr it bd ns nt nu nv nw nx ny lt dk translated">我们想强调的是，以上分数并不是我们能得到的最高分，而是我们现成的分数。决定投资和改进什么算法就够了。</p></blockquote><p id="61a4" class="pw-post-body-paragraph ky kz it la b lb nz ju ld le oa jx lg lh ob lj lk ll oc ln lo lp od lr ls lt im bi translated">真实的生产设置包括例如类似于上面引用的最高法院的工作的后处理步骤，其大幅度降低了错误率。</p><p id="9dc2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们不认为我们的发现会推广到其他任务，如分类。基于字符的语言模型非常擅长 NER，因为后缀和前缀是强大的功能，但在分类方面，我们预计<a class="ae lv" href="https://camembert-model.fr/" rel="noopener ugc nofollow" target="_blank"> camemBERT </a>会轻松击败 Flair 语言模型。</p><p id="4dea" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，与 Multifit 论文一致，它也表明从业者在与 mBERT 合作之前应该三思。如果存在的话，使用更简单的单语语言模型似乎更明智。</p><p id="e043" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如前所示，<a class="lw lx ep" href="https://medium.com/u/f6208eb7f56a?source=post_page-----d4ab01b2d4c3--------------------------------" rel="noopener" target="_blank"> spaCy </a>型号与今天的大型型号性能相比似乎有限。作者们正在研究它。似乎所有的模式都在朝着同一个方向前进，老实说我等不及结果了！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ot ou l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">A discussion following our <a class="ae lv" rel="noopener" target="_blank" href="/why-we-switched-from-spacy-to-flair-to-anonymize-french-legal-cases-e7588566825f">previous article</a> comparing Flair and spaCy</figcaption></figure><p id="ec53" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后，我要感谢来自 Lefebvre Sarrut 的<strong class="la iu"> Sumi </strong>、<strong class="la iu"> Jonathan </strong>、<strong class="la iu"> Matthieu </strong>(及其整个数据团队)和<strong class="la iu"> Vincent </strong>对项目和/或本文评论的贡献:-)</p></div><div class="ab cl pg ph hx pi" role="separator"><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl pm"/><span class="pj bw bk pk pl"/></div><div class="im in io ip iq"><h1 id="1b23" class="ms mt it bd mu mv pn mx my mz po nb nc jz pp ka ne kc pq kd ng kf pr kg ni nj bi translated">笔记</h1><p id="68de" class="pw-post-body-paragraph ky kz it la b lb nk ju ld le nl jx lg lh nm lj lk ll nn ln lo lp no lr ls lt im bi translated">[1]:买下所有这些将花费数百万欧元:每项裁决 4.93 欧元<a class="ae lv" href="https://www.infogreffe.fr/activite-judiciaire/rechercher-une-affaire.html" rel="noopener ugc nofollow" target="_blank">(https://www . infogreffe . fr/activite-judiciaire/rechercher-une-affaire . html</a>)，而商业法院在 2018 年已经发布了 137K 项裁决<a class="ae lv" href="http://www.justice.gouv.fr/art_pix/CC%202019_V8.pdf" rel="noopener ugc nofollow" target="_blank">(http://www.justice.gouv.fr/art_pix/CC%202019_V8.pdf</a>，第 11 页)</p><p id="4aff" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">[2]:<strong class="la iu">Tribunaux de commerce:l ' overval cadeau d ' infogreffeàdoctrine . fr</strong>，<a class="ae lv" href="https://www.lalettrea.fr/entreprises_tech-et-telecoms/2018/06/25/tribunaux-de-commerce--l-exorbitant-cadeau-d-infogreffe-a-doctrinefr,108314593-ge0" rel="noopener ugc nofollow" target="_blank">https://www . lalettrea . fr/entreprises _ tech-et-telecoms/2018/06/25/Tribunaux-de-commerce-l-overval-cadeau-d-infogreffe-a-doctrinefr，108314593-ge0 </a></p><p id="aff7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">[3]:<strong class="la iu">Doctrine veut centrazer tout l ' information juridique disp ible pour-les-professionals du droit-0907-1173997 . html</strong></p><p id="e343" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">[4]:<strong class="la iu">Piratage massif de données au tribunal</strong>，<a class="ae lv" href="https://www.lemonde.fr/economie/article/2018/06/28/piratage-massif-de-donnees-au-tribunal_5322504_3234.html" rel="noopener ugc nofollow" target="_blank">https://www . lemonde . fr/economie/article/2018/06/28/Piratage-massif-de-donnes-au-tribunal _ 5322504 _ 3234 . html</a></p><p id="2257" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">[5]:<strong class="la iu">pour quoi doctrine . fr est l chépar les greffes</strong>，<a class="ae lv" href="https://www.lalettrea.fr/entreprises_tech-et-telecoms/2018/09/27/pourquoi-doctrinefr-est-lache-par-les-greffes,108325460-evl" rel="noopener ugc nofollow" target="_blank">https://www . lalettrea . fr/entreprises _ tech-et-telecoms/2018/09/27/pour quoi-doctrine fr-est-lache-par-les-greffes，108325460-evl </a></p><p id="b237" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">[6]:未来的《司法组织法》第 r . 433–3 条明确将商事法院的判决纳入我们最高法院之一将维护的未来开放数据库，<a class="ae lv" href="https://www.dalloz-actualite.fr/flash/open-data-des-decisions-de-justice-projet-de-decret#.XeTUzJNKhaQ" rel="noopener ugc nofollow" target="_blank">https://www . dalloz-actual ite . fr/flash/open-data-des-decisions-de-justice-projet-de-decret #。XeTUzJNKhaQ </a></p><p id="9fdf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">[7]: <strong class="la iu">公开数据和司法裁决的区别</strong>，<a class="ae lv" href="https://www.dalloz-actualite.fr/flash/distinction-entre-l-open-data-et-l-acces-aux-decisions-de-justice" rel="noopener ugc nofollow" target="_blank">https://www . dalloz-actual ite . fr/flash/distinction-entre-l-open-data-et-l-acces-aux-decisions-de-justice</a></p><p id="ad1b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">[8]:数据集由原始法律判决组成，所有个人信息都将被删除。它不能被分享，因为它会违反 GDPR 教。</p><p id="6c8c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">[9]: <strong class="la iu">部署主动学习的实际障碍</strong>，<a class="ae lv" href="https://www.aclweb.org/anthology/D19-1003.pdf" rel="noopener ugc nofollow" target="_blank">https://www.aclweb.org/anthology/D19-1003.pdf</a></p><p id="6fe0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">[10]: <strong class="la iu">用于序列标记的上下文字符串嵌入</strong>，<a class="ae lv" href="https://alanakbik.github.io/papers/coling2018.pdf" rel="noopener ugc nofollow" target="_blank">https://alanakbik.github.io/papers/coling2018.pdf</a></p><p id="aeb3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">[11]: <strong class="la iu">科萨伯特</strong>，<a class="ae lv" href="https://medium.com/dissecting-bert" rel="noopener">https://medium.com/dissecting-bert</a></p><p id="0925" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">[12]:支持语言列表，<a class="ae lv" href="https://github.com/google-research/bert/blob/master/multilingual.md" rel="noopener ugc nofollow" target="_blank">https://github . com/Google-research/Bert/blob/master/multilingual . MD</a></p><p id="d1ae" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">[13]: <strong class="la iu">比如这个 Reddit 线程</strong>，<a class="ae lv" href="https://www.reddit.com/r/LanguageTechnology/comments/bsfb8s/what_has_been_your_experience_using_multilingual/" rel="noopener ugc nofollow" target="_blank">https://www . Reddit . com/r/language technology/comments/bsfb8s/what _ has _ your _ experience _ using _ multilingual/</a></p><p id="2048" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">[14]: MultiFiT:高效的多语言语言模型微调，【https://arxiv.org/abs/1909.04761】T4</p><p id="17e7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">[15]:准确地说，多语言模型(<a class="ae lv" href="https://github.com/facebookresearch/LASER" rel="noopener ugc nofollow" target="_blank">激光</a>来自脸书)被用来引导事物，但是最终任务是由单语模型执行的。</p><p id="7b2b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">[16]: <strong class="la iu">卡门贝干酪:一种美味的法语语言模型</strong>，<a class="ae lv" href="https://arxiv.org/pdf/1911.03894.pdf" rel="noopener ugc nofollow" target="_blank">https://arxiv.org/pdf/1911.03894.pdf</a></p></div></div>    
</body>
</html>