<html>
<head>
<title>spaCy Basics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">空间基础</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/spacy-basics-4b606a70f97b?source=collection_archive---------18-----------------------#2019-08-19">https://towardsdatascience.com/spacy-basics-4b606a70f97b?source=collection_archive---------18-----------------------#2019-08-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="34c5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">NLP 和 spaCy 入门指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/dd9ccec6cb89a9c35e161449c4f7a3eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0R1EFOUMPJfaWv8hisPJBg.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@impatrickt?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Patrick Tomasso</a> on <a class="ae ky" href="https://unsplash.com/search/photos/words?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3a9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">文本数据的一个主要挑战是提取有意义的模式，并使用这些模式找到可操作的见解。</p><p id="f32c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">NLP 可以被认为是一个由两部分组成的问题:</p><ol class=""><li id="7d5f" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><strong class="lb iu">加工。</strong>将文本数据从原始形式转换成计算机可以理解的形式。这包括数据清理和特征提取。</li><li id="7f1a" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><strong class="lb iu">分析。</strong>利用处理后的数据提取见解并做出预测。</li></ol><p id="34f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们将重点关注处理步骤。</p><p id="9794" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用通过抓取唐纳德·特朗普的推文创建的数据集。创建你自己的 Twitter 数据集的教程可以在这里找到:</p><div class="mj mk gp gr ml mm"><a rel="noopener follow" target="_blank" href="/my-first-twitter-app-1115a327349e"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd iu gy z fp mr fr fs ms fu fw is bi translated">我的第一个 Twitter 应用</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">如何使用 Python 和 Tweepy 创建自己的数据集</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">towardsdatascience.com</p></div></div><div class="mv l"><div class="mw l mx my mz mv na ks mm"/></div></div></a></div><p id="e1d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将专门关注<a class="ae ky" href="https://spacy.io/" rel="noopener ugc nofollow" target="_blank"> spaCy </a>“一个用于 Python 中高级<strong class="lb iu">自然语言处理</strong> (NLP)的<strong class="lb iu">免费开源库</strong>”</p><p id="c281" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">spaCy 对于 NLP 任务来说是一个很好的选择，特别是对于处理文本来说，它有大量的特性和功能，其中很多我们将在下面讨论。</p><p id="acf7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完整的笔记本可以在这里找到<a class="ae ky" href="https://github.com/terrah27/donald_trump_tweets/blob/master/spaCy%20Basics.ipynb" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="3add" class="nb nc it bd nd ne nf dn ng nh ni dp nj li nk nl nm lm nn no np lq nq nr ns nt bi translated">标记化</h2><p id="9f39" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">根据<a class="ae ky" href="https://www.researchgate.net/post/What_is_differance_between_String_and_token_in_Natural_Language_Processing_techniques" rel="noopener ugc nofollow" target="_blank">researchgate.net</a>的说法，令牌的一个很好的定义是“两个空格之间，或者空格和标点符号之间的一串连续的字符。”在英语中，标记通常是单个单词，但也可以是标点符号和数字。</p><p id="f59d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们使用<code class="fe nz oa ob oc b">spacy.load()</code>方法加载模型包并返回 nlp 对象。接下来，我们调用字符串上的<code class="fe nz oa ob oc b">nlp()</code>, spaCy 标记文本并创建一个文档对象:</p><pre class="kj kk kl km gt od oc oe of aw og bi"><span id="527d" class="nb nc it oc b gy oh oi l oj ok"># Load model to return language object<br/>nlp = spacy.load('en')</span><span id="023b" class="nb nc it oc b gy ol oi l oj ok"># Calling nlp on our tweet texts to return a processed Doc for each<br/>df['doc'] = [nlp(text) for text in df.text]<br/>df.sample(3)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/6cf9451d889183e798cf9831565ba890.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GebYc2D9Cq2I5Ahqs15lUg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Dataframe with Doc column added.</figcaption></figure><p id="b259" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在标记化之后，我们可以做各种事情。</p><p id="2440" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以做一些基本的事情，比如计算每个文档的令牌数，并用直方图显示出来:</p><pre class="kj kk kl km gt od oc oe of aw og bi"><span id="ad46" class="nb nc it oc b gy oh oi l oj ok"># Sum the number of tokens in each Doc<br/>df['num_tokens'] = [len(token) for token in df.doc]</span><span id="36ff" class="nb nc it oc b gy ol oi l oj ok"># Visualize histogram of tokens per tweet<br/>g = sns.distplot(df.num_tokens)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/ade38fd00f88f4539c0830e6a04dc2f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z_nfLViTAu3QrtiLXYszuw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Histogram of tokens per tweet</figcaption></figure><p id="0897" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者我们可以利用 spaCy 提供的许多可用的<a class="ae ky" href="https://spacy.io/api/token#attributes" rel="noopener ugc nofollow" target="_blank">令牌属性</a>。</p><h2 id="d636" class="nb nc it bd nd ne nf dn ng nh ni dp nj li nk nl nm lm nn no np lq nq nr ns nt bi translated">词性标注</h2><p id="93c8" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">Spacy 使使用标记属性获得词性标签变得容易:</p><pre class="kj kk kl km gt od oc oe of aw og bi"><span id="4b4a" class="nb nc it oc b gy oh oi l oj ok"># Print sample of part-of-speech tags<br/>for token in sample_doc[0:10]:<br/>    print (token.text, token.pos_)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/594620ea2158fcbd161a08759d169367.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*46sqTgi7ru_Vq0zDXyLMuA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Tokens and their part-of-speech tags.</figcaption></figure><h2 id="deff" class="nb nc it bd nd ne nf dn ng nh ni dp nj li nk nl nm lm nn no np lq nq nr ns nt bi translated">命名实体</h2><p id="4895" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">除了词性标签，我们还可以预测文档中出现的命名实体。</p><p id="974c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据<a class="ae ky" href="https://en.wikipedia.org/wiki/Named_entity" rel="noopener ugc nofollow" target="_blank">维基百科</a>，一个命名实体“是一个现实世界的物体，比如人、地点、组织、产品等等。，可以用一个合适的名字来表示。”</p><pre class="kj kk kl km gt od oc oe of aw og bi"><span id="32d9" class="nb nc it oc b gy oh oi l oj ok">for ent in sample_doc.ents:<br/>    print(ent.text, ent.label_)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/6504230ebc6bb52b22628e533b824044.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*1u8yhRlmmf96VSuboeow-w.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Named entities from sample tweet.</figcaption></figure><p id="3071" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">而且，如果我们不知道输出意味着什么，spaCy 必须了解 NORP 代表民族、宗教或政治团体。</p><p id="adfd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，该模型正确地预测了“民主党人”是一个 NORP，但却错误地把“椭圆形办公室”归类为一个组织。</p><p id="2d84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用 spaCy 的 visualizer displaCy 来可视化命名实体:</p><pre class="kj kk kl km gt od oc oe of aw og bi"><span id="9b65" class="nb nc it oc b gy oh oi l oj ok"># Visualize named entities with displacy<br/>spacy.displacy.render(sample_doc, style='ent', jupyter=True)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/2f92bfddc48136f710b693f534ff5edd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5wA9fzQMq1OnQpYoYPW5gg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">displaCy entity visualization.</figcaption></figure><h2 id="be25" class="nb nc it bd nd ne nf dn ng nh ni dp nj li nk nl nm lm nn no np lq nq nr ns nt bi translated">词汇化</h2><p id="2d71" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">词汇化是将每个单词还原到它的词根，或<a class="ae ky" href="https://simple.wikipedia.org/wiki/Lemma_(linguistics)#cite_note-vocab-1" rel="noopener ugc nofollow" target="_blank">词汇</a>。</p><p id="bcce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">比如<em class="or">谈</em>、<em class="or">谈</em>、<em class="or">谈</em>都是同一个词的形式。它们都有一个共同的词根:说话。</p><p id="7d70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在 spaCy 中，我们调用<code class="fe nz oa ob oc b">token.lemma_</code>来获得每个单词的词条。</p><h2 id="0d0e" class="nb nc it bd nd ne nf dn ng nh ni dp nj li nk nl nm lm nn no np lq nq nr ns nt bi translated">结论</h2><p id="06ea" class="pw-post-body-paragraph kz la it lb b lc nu ju le lf nv jx lh li nw lk ll lm nx lo lp lq ny ls lt lu im bi translated">这里我们探讨了 spaCy 的一些基本功能，包括标记化、词性标注和词条化。这些只是图书馆提供的众多工具中的一部分。</p><p id="2520" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在以后的文章中，我们将探索使用上述方法从文本数据中获得洞察力。</p></div></div>    
</body>
</html>