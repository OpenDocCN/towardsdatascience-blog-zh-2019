<html>
<head>
<title>Feature Engineering in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中的要素工程</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/feature-engineering-in-python-part-i-the-most-powerful-way-of-dealing-with-data-8e2447e7c69e?source=collection_archive---------3-----------------------#2019-05-16">https://towardsdatascience.com/feature-engineering-in-python-part-i-the-most-powerful-way-of-dealing-with-data-8e2447e7c69e?source=collection_archive---------3-----------------------#2019-05-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1bfa" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">"<em class="kf">我们的目标是将数据转化为信息，并将信息转化为洞察力。</em>——<a class="ae kg" href="http://en.wikipedia.org/wiki/Carly_Fiorina" rel="noopener ugc nofollow" target="_blank">卡莉·菲奥莉娜</a>。</h2></div><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="gh gi kh"><img src="../Images/9e7f08e5d521110989bea439ecc11b45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TFkU0_j8puzX5wk2Wvg1aQ.jpeg"/></div></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk">Photo by <a class="ae kg" href="https://unsplash.com/photos/ndja2LJ4IcM?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">h heyerlein</a> on <a class="ae kg" href="https://unsplash.com/search/photos/data?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4d7f" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们生活在一个数据驱动的经济中。在这个世界里，拥有大量数据、理解这些数据并知道如何处理数据就是力量。理解你的数据并不是数据科学中最困难的事情之一，但是很费时间。当我们知道数据的来源<em class="lt">时，数据的解释是有效的。</em></p><h2 id="8c2a" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lg md me mf lk mg mh mi lo mj mk ml mm bi translated">数据</h2><p id="2443" class="pw-post-body-paragraph kx ky iq kz b la mn jr lc ld mo ju lf lg mp li lj lk mq lm ln lo mr lq lr ls ij bi translated">我们相信上帝。所有其他人必须携带数据。— <a class="ae kg" href="https://www.deming.org/theman/overview" rel="noopener ugc nofollow" target="_blank"> W .戴明</a> <br/>首先，我们需要了解我们的数据。有<strong class="kz ir"> 3 </strong>种数据:</p><ol class=""><li id="3955" class="ms mt iq kz b la lb ld le lg mu lk mv lo mw ls mx my mz na bi translated"><strong class="kz ir">数值<br/> </strong>这代表某种定量测量。例如:身高的人，股票价格，页面加载时间等。它可以进一步分解为两部分:<br/> <strong class="kz ir"> <em class="lt">离散数据:</em> </strong>这是基于整数的，通常是一些事件的计数。例如:“一个用户喜欢多少首歌？”或者“一枚硬币掷到“头”上多少次？”<br/> <strong class="kz ir"> <em class="lt">连续数据:</em> </strong>它有无限多种可能的值。比如:“一个用户购买用了多长时间？”</li><li id="1f4f" class="ms mt iq kz b la nb ld nc lg nd lk ne lo nf ls mx my mz na bi translated"><strong class="kz ir">分类的<br/> </strong>这代表没有明显内在数学意义的定性数据。例子:是或否，性别，种族，婚姻状况等。这些可以被赋予像是(0)和否(1)这样的数字，但是数字没有数学意义。</li><li id="0a58" class="ms mt iq kz b la nb ld nc lg nd lk ne lo nf ls mx my mz na bi translated"><strong class="kz ir">序数</strong> <br/>它兼具数值型和分类型数据的特征。但是分类中的数字有数学意义。例如:电影评分为 1-5 等。这些值具有数学意义。<em class="lt"> <br/> </em>因此，我们往往会忽略这一步，直接跳入水中。</li></ol><h2 id="39af" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lg md me mf lk mg mh mi lo mj mk ml mm bi translated">特征工程</h2><p id="aed1" class="pw-post-body-paragraph kx ky iq kz b la mn jr lc ld mo ju lf lg mp li lj lk mq lm ln lo mr lq lr ls ij bi translated">机器学习将数学符号与数据进行拟合，以获得一些见解。模型将特征作为输入。特征通常是现实世界现象或数据的一个方面的数字表示。就像迷宫中有死胡同一样，数据路径充满了噪音和缺失的部分。作为一名数据科学家，我们的工作是找到一条通往洞察最终目标的清晰道路。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="gh gi ng"><img src="../Images/fe9f160ed215672fd0d3f8d687e9e632.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fOPk9_eudCASOrlNmYpq0g.jpeg"/></div></div><figcaption class="kt ku gj gh gi kv kw bd b be z dk">Photo by <a class="ae kg" href="https://unsplash.com/photos/_qXjdWm8YEo?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Victor Garcia</a> on <a class="ae kg" href="https://unsplash.com/search/photos/maze?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8786" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">数学公式对数字量起作用，原始数据并不完全是数字。特征工程是从数据中提取特征并将其转换为适合机器学习算法的格式的方法。</p><p id="af1c" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">它分为三大类</p><p id="8618" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">特征选择:</strong>所有<strong class="kz ir"> </strong>特征不相等。<strong class="kz ir"> </strong>这就是从大量的特性中选择一小部分特性。我们选择那些最能解释自变量与目标变量之间关系的属性。对于模型的准确性来说，某些特征比其他特征更重要。它与降维<strong class="kz ir">不同，因为降维方法是通过组合现有属性来实现的，而特征选择方法是包含或排除那些特征。<br/>特征选择的方法有卡方检验、相关系数评分、LASSO、岭回归等。</strong></p><p id="f3b8" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">特性转换:</strong>就是把我们原来的特性转换成原来特性的功能。缩放、离散化、宁滨和填充缺失数据值是最常见的数据转换形式。为了<a class="ae kg" href="https://codeburst.io/2-important-statistics-terms-you-need-to-know-in-data-science-skewness-and-kurtosis-388fef94eeaa" rel="noopener" target="_blank"> <strong class="kz ir">减少</strong> </a>数据的右偏，我们使用 log。</p><p id="563e" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">特征提取:</strong>当一个算法要处理的数据太大时，一般认为是冗余的。使用大量变量进行分析需要大量的计算能力和内存，因此我们应该减少这些类型变量的维数。这是一个构建变量组合的术语。对于表格数据，我们使用主成分分析来减少特征。对于图像，我们可以使用直线或边缘检测。</p><p id="5525" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">我们从 MachineHack </strong>  <strong class="kz ir">的这个</strong> <a class="ae kg" href="https://www.machinehack.com/course/predict-the-flight-ticket-price-hackathon/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz ir">数据集开始。</strong> <br/>我们将首先导入特征工程所需的所有包。</a></p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="7018" class="lu lv iq ni b gy nm nn l no np">import pandas as pd<br/>import numpy as np<br/>import matplotlib.pyplot as plt<br/>import datetime</span></pre><p id="8d08" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们将使用 pandas 加载数据，并将显示设置为最大，以便显示所有包含详细信息的列:</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="05c6" class="lu lv iq ni b gy nm nn l no np">pd.set_option('display.max_columns', None)</span><span id="9b69" class="lu lv iq ni b gy nq nn l no np">data_train = pd.read_excel('Data_Train.xlsx')</span><span id="4dc6" class="lu lv iq ni b gy nq nn l no np">data_test = pd.read_excel('Data_Test.xlsx')</span></pre><p id="d64d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在我们开始预处理数据之前，我们希望单独存储目标变量或标签。在从训练数据集中移除标签之后，我们将组合我们的训练和测试数据集。我们合并训练和测试数据集的原因是，机器学习模型不擅长<strong class="kz ir">推断，</strong>即<em class="lt"> ML 模型不擅长从现有信息中推断出尚未明确陈述的东西</em>。因此，如果测试集中的数据没有得到很好的表示，比如在训练集中，预测就不可靠。</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="20bb" class="lu lv iq ni b gy nm nn l no np">price_train = data_train.Price  </span><span id="5263" class="lu lv iq ni b gy nq nn l no np"># Concatenate training and test sets </span><span id="82da" class="lu lv iq ni b gy nq nn l no np">data = pd.concat([data_train.drop(['Price'], axis=1), data_test])</span></pre><p id="9518" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这是我们在<code class="fe nr ns nt ni b">data.columns</code>之后得到的输出</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="6703" class="lu lv iq ni b gy nm nn l no np">Index(['Airline', 'Date_of_Journey', 'Source', 'Destination', 'Route','Dep_Time', 'Arrival_Time', 'Duration', 'Total_Stops',<br/>'Additional_Info', 'Price'], dtype='object')</span></pre><p id="e310" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">要检查前五行数据，请键入<code class="fe nr ns nt ni b">data.head()</code>。</p><p id="30d6" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">为了更全面地了解情况，我们使用了<code class="fe nr ns nt ni b">data.info()</code>方法。</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="1e40" class="lu lv iq ni b gy nm nn l no np">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>Int64Index: 13354 entries, 0 to 2670<br/>Data columns (total 10 columns):<br/>Airline            13354 non-null object<br/>Date_of_Journey    13354 non-null object<br/>Source             13354 non-null object<br/>Destination        13354 non-null object<br/>Route              13353 non-null object<br/>Dep_Time           13354 non-null object<br/>Arrival_Time       13354 non-null object<br/>Duration           13354 non-null object<br/>Total_Stops        13353 non-null object<br/>Additional_Info    13354 non-null object<br/>dtypes: int64(1), object(10)<br/>memory usage: 918.1+ KB</span></pre><p id="b4a9" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">要了解我们数据的分布，使用<code class="fe nr ns nt ni b">data.describe(include=all)</code></p><p id="8215" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们希望分析数据并删除所有重复的值。</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="ccd7" class="lu lv iq ni b gy nm nn l no np">data = data.drop_duplicates()</span></pre><p id="03aa" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">因此，我们希望检查数据中的任何空值。</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="7622" class="lu lv iq ni b gy nm nn l no np">Airline            0<br/>Date_of_Journey    0<br/>Source             0<br/>Destination        0<br/>Route              1<br/>Dep_Time           0<br/>Arrival_Time       0<br/>Duration           0<br/>Total_Stops        1<br/>Additional_Info    0<br/>Price              0<br/>dtype: int64</span></pre><p id="1a8a" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">因此，我们使用下面的代码来删除空值。</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="fc85" class="lu lv iq ni b gy nm nn l no np">data = data.drop(data.loc[data['Route'].isnull()].index)</span></pre><h2 id="7196" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lg md me mf lk mg mh mi lo mj mk ml mm bi translated">航空公司</h2><p id="52b6" class="pw-post-body-paragraph kx ky iq kz b la mn jr lc ld mo ju lf lg mp li lj lk mq lm ln lo mr lq lr ls ij bi translated">让我们查一下航空公司一栏。我们注意到它包含了<strong class="kz ir">分类</strong>值。在使用了<code class="fe nr ns nt ni b">data['Airline'].unique()</code>之后，我们注意到航空公司的价值观在某种程度上是重复的。</p><p id="2a09" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们首先想要可视化该列:</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="98d4" class="lu lv iq ni b gy nm nn l no np">sns.countplot(x='Airline', data=data)</span><span id="5aa7" class="lu lv iq ni b gy nq nn l no np">plt.xticks(rotation=90)</span></pre><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/f6c38f8d8bb8e878a8887caeb44d280a.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*8QZaZhqV3YMheHavhhv-7g.png"/></div></figure><p id="1af1" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这种形象化帮助我们理解某些航空公司被分成了两个部分。例如，Jet Airways 有另一个部分叫做 Jet Airways Business。我们想把这两类结合起来。</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="3bcb" class="lu lv iq ni b gy nm nn l no np">data['Airline'] = np.where(data['Airline']=='Vistara Premium economy', 'Vistara', data['Airline'])</span><span id="6af8" class="lu lv iq ni b gy nq nn l no np">data['Airline'] = np.where(data['Airline']=='Jet Airways Business', 'Jet Airways', data['Airline'])</span><span id="b6d5" class="lu lv iq ni b gy nq nn l no np">data['Airline'] = np.where(data['Airline']=='Multiple carriers Premium economy', 'Multiple carriers', data['Airline'])</span></pre><p id="146b" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这就是我们的列中的值现在的样子。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/61600bc1a535b34ddcfaf074e0b3ab90.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*bSY2VeYnWRm8bFgwzCvD6g.png"/></div></figure><h2 id="2b42" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lg md me mf lk mg mh mi lo mj mk ml mm bi translated">航班的目的地</h2><p id="13ac" class="pw-post-body-paragraph kx ky iq kz b la mn jr lc ld mo ju lf lg mp li lj lk mq lm ln lo mr lq lr ls ij bi translated">目的地也是如此。我们发现德里和新德里被分成了两个不同的类别。因此，我们将它们合二为一。</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="ef71" class="lu lv iq ni b gy nm nn l no np">data['Destination'].unique()</span><span id="3644" class="lu lv iq ni b gy nq nn l no np">data['Destination'] = np.where(data['Destination']=='Delhi','New Delhi', data['Destination'])</span></pre><h2 id="cf5a" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lg md me mf lk mg mh mi lo mj mk ml mm bi translated">旅行日期</h2><p id="3f96" class="pw-post-body-paragraph kx ky iq kz b la mn jr lc ld mo ju lf lg mp li lj lk mq lm ln lo mr lq lr ls ij bi translated">我们检查这个列，<code class="fe nr ns nt ni b">data['Date_of_Journey']</code>，发现这个列的格式是:-</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="c907" class="lu lv iq ni b gy nm nn l no np">24/03/2019<br/>1/05/2019</span></pre><p id="977e" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这只是原始数据。我们的模型不能理解它，因为它不能给出数值。为了从这个列中提取有用的特性，我们想把它转换成工作日和月份。</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="7dc9" class="lu lv iq ni b gy nm nn l no np">data['Date_of_Journey'] = pd.to_datetime(data['Date_of_Journey'])</span><span id="207e" class="lu lv iq ni b gy nq nn l no np"><strong class="ni ir">OUTPUT<br/></strong>2019-03-24<br/>2019-01-05</span></pre><p id="73af" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">然后从中获取工作日</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="e1c0" class="lu lv iq ni b gy nm nn l no np">data['day_of_week'] = data['Date_of_Journey'].dt.day_name()</span><span id="c5f5" class="lu lv iq ni b gy nq nn l no np"><strong class="ni ir">OUTPUT<br/></strong>Sunday<br/>Saturday</span></pre><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/d2497c360950b2effb4a9d150710aea2.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*3WhXoUbl-DC3kOsPH-JXrw.png"/></div></figure><p id="a34d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">从旅行日期开始，我们还会得到月份。</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="4b33" class="lu lv iq ni b gy nm nn l no np">data['Journey_Month'] = pd.to_datetime(data.Date_of_Journey, format='%d/%m/%Y').dt.month_name()</span><span id="de3b" class="lu lv iq ni b gy nq nn l no np"><strong class="ni ir">OUTPUT<br/></strong>March<br/>January</span></pre><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/a502a4f631b43a4b96aa0ecf4cc0da0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:856/format:webp/1*ywOHdYF7H5VNgz5QhWfcMw.png"/></div></figure><h2 id="4289" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lg md me mf lk mg mh mi lo mj mk ml mm bi translated">航空公司的出发时间</h2><p id="805f" class="pw-post-body-paragraph kx ky iq kz b la mn jr lc ld mo ju lf lg mp li lj lk mq lm ln lo mr lq lr ls ij bi translated">出发时间采用 24 小时制(22:20)，我们希望将其绑定以获得更多信息。</p><p id="291a" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们将创建固定宽度的箱，每个箱包含一个特定的数字范围。通常，这些范围是手动设置的，具有固定的大小。在这里，我决定将时间分成 4 个部分。[0–5]、[6–11]、[12–17]和[18–23]是 4 个容器。我们不能在计数中有大的间隙，因为这可能会产生没有数据的空箱。这个问题通过基于数据的分布定位箱来解决。</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="068a" class="lu lv iq ni b gy nm nn l no np">data['Departure_t'] = pd.to_datetime(data.Dep_Time, format='%H:%M')</span><span id="a793" class="lu lv iq ni b gy nq nn l no np">a = data.assign(dept_session=pd.cut(data.Departure_t.dt.hour,[0,6,12,18,24],labels=['Night','Morning','Afternoon','Evening']))</span><span id="b721" class="lu lv iq ni b gy nq nn l no np">data['Departure_S'] = a['dept_session']</span></pre><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/d1b4fa37ccd26832b1ea761b346db914.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*e8igJTOB36gy_WV1vQjIcA.png"/></div></figure><p id="88a7" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们在“出发 _S”列中用“夜间”填充空值。</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="f65b" class="lu lv iq ni b gy nm nn l no np">data['Departure_S'].fillna("Night", inplace = True)</span></pre><h2 id="27ac" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lg md me mf lk mg mh mi lo mj mk ml mm bi translated">持续时间</h2><p id="56ca" class="pw-post-body-paragraph kx ky iq kz b la mn jr lc ld mo ju lf lg mp li lj lk mq lm ln lo mr lq lr ls ij bi translated">我们的持续时间栏中的时间是这样写的<code class="fe nr ns nt ni b">2h 50m</code>。为了帮助机器学习算法获得有用的见解，我们将把这些文本转换成数字。</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="fba7" class="lu lv iq ni b gy nm nn l no np">duration = list(data['Duration'])</span><span id="2c2e" class="lu lv iq ni b gy nq nn l no np">for i in range(len(duration)) :<br/>    if len(duration[i].split()) != 2:<br/>        if 'h' in duration[i] :<br/>            duration[i] = duration[i].strip() + ' 0m'<br/>        elif 'm' in duration[i] :<br/>            duration[i] = '0h {}'.format(duration[i].strip())</span><span id="9330" class="lu lv iq ni b gy nq nn l no np">dur_hours = []<br/>dur_minutes = []  <br/> <br/>for i in range(len(duration)) :<br/>    dur_hours.append(int(duration[i].split()[0][:-1]))<br/>    dur_minutes.append(int(duration[i].split()[1][:-1]))<br/>     <br/> <br/>data['Duration_hours'] = dur_hours<br/>data['Duration_minutes'] =dur_minutes</span><span id="7e73" class="lu lv iq ni b gy nq nn l no np">data.loc[:,'Duration_hours'] *= 60</span><span id="6ad4" class="lu lv iq ni b gy nq nn l no np">data['Duration_Total_mins']= data['Duration_hours']+data['Duration_minutes']</span></pre><p id="ca10" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们现在得到的结果本质上是连续的。</p><p id="ef60" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">可视化数据后，删除持续时间少于 60 分钟的行是有意义的。</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="3c0b" class="lu lv iq ni b gy nm nn l no np"># Get names of indexes for which column Age has value 30</span><span id="466c" class="lu lv iq ni b gy nq nn l no np">indexNames = data[data.Duration_Total_mins &lt; 60].index</span><span id="b932" class="lu lv iq ni b gy nq nn l no np"># Delete these row indexes from dataFrame</span><span id="51d5" class="lu lv iq ni b gy nq nn l no np">data.drop(indexNames , inplace=True)</span></pre><p id="dd1b" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们将删除有噪音或文本的列，这对我们的模型没有帮助。为了获得更好的见解，我们将这些内容转化为更新的专栏。</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="6a42" class="lu lv iq ni b gy nm nn l no np">data.drop(labels = ['Arrival_Time','Dep_Time','Date_of_Journey','Duration','Departure_t','Duration_hours','Duration_minutes'], axis=1, inplace = True)</span></pre><h2 id="8974" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lg md me mf lk mg mh mi lo mj mk ml mm bi translated">虚拟变量</h2><p id="128f" class="pw-post-body-paragraph kx ky iq kz b la mn jr lc ld mo ju lf lg mp li lj lk mq lm ln lo mr lq lr ls ij bi translated">我们设计了几乎所有的功能。我们已经处理了缺失值、装箱的数字数据，现在是时候将所有变量转换为数字变量了。我们将使用<code class="fe nr ns nt ni b">get_dummies()</code>来进行转换。</p><pre class="ki kj kk kl gt nh ni nj nk aw nl bi"><span id="dc76" class="lu lv iq ni b gy nm nn l no np">cat_vars = ['Airline', 'Source', 'Destination', 'Route', 'Total_Stops',<br/>       'Additional_Info', 'day_of_week', 'Journey_Month', 'Departure_S' ]<br/>for var in cat_vars:<br/>    catList = 'var'+'_'+var<br/>    catList = pd.get_dummies(data[var], prefix=var)<br/>    data1 = data.join(catList)<br/>    data = data1<br/>    <br/>data_vars = data.columns.values.tolist()<br/>to_keep = [i for i in data_vars if i not in cat_vars]</span><span id="560f" class="lu lv iq ni b gy nq nn l no np">data_final=data[to_keep]</span></pre><h2 id="7007" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lg md me mf lk mg mh mi lo mj mk ml mm bi translated">下一步</h2><p id="b8bc" class="pw-post-body-paragraph kx ky iq kz b la mn jr lc ld mo ju lf lg mp li lj lk mq lm ln lo mr lq lr ls ij bi translated">我们将不得不重新划分数据集。特征工程有助于从原始数据中提取信息，即它已经创建了许多特征。这意味着我们需要找到整个批次的主要特征。这也被称为维数灾难。我们用特征选择来对抗特征生成。</p></div><div class="ab cl nz oa hu ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="ij ik il im in"><p id="f54c" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><a class="ae kg" href="https://codeburst.io/2-important-statistics-terms-you-need-to-know-in-data-science-skewness-and-kurtosis-388fef94eeaa" rel="noopener" target="_blank"> <em class="lt">如果你想了解</em><strong class="kz ir"><em class="lt"/></strong><em class="lt">和</em> <strong class="kz ir"> <em class="lt">峰度</em> </strong> <em class="lt">，点击这里。</em> </a></p><p id="af10" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><a class="ae kg" rel="noopener" target="_blank" href="/statistics-for-data-scientists-f2456d26c5a5"> <em class="lt">如果你想了解数据科学</em>  <em class="lt">背后的</em> <strong class="kz ir"> <em class="lt">统计学，点击这里。</em> </strong></a></p><p id="9c1c" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><a class="ae kg" rel="noopener" target="_blank" href="/machine-learning-intuition-for-beginners-ba07a640d928"> <em class="lt">如果你想获得一个</em> <strong class="kz ir"> <em class="lt">机器学习入门</em> </strong> <em class="lt">，点击这里。</em> </a></p></div><div class="ab cl nz oa hu ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="ij ik il im in"><p id="39b2" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><em class="lt">感谢阅读！</em></p><p id="4a51" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><strong class="kz ir">这里也可以给支持:</strong>https<strong class="kz ir">://</strong>T43】buymeacoffee.com/divadugar</p></div></div>    
</body>
</html>