<html>
<head>
<title>Free the value of your data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">释放数据的价值</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/label-encoding-tricks-c91a0966e8c6?source=collection_archive---------23-----------------------#2019-09-16">https://towardsdatascience.com/label-encoding-tricks-c91a0966e8c6?source=collection_archive---------23-----------------------#2019-09-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/4e13f2d17bc1691ccad5fb1436895f51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*d8y88LIkhAdny6eT"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@kimtheris?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sereja Ris</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="b04d" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">标签编码—通过编码释放您的数据</h1><p id="6625" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在这篇文章中，我分享了一些处理标签的技巧。我提出方法来<strong class="ld ir">揭示</strong>你的字符串数据的内部值。第一部分回顾了经典的方法，下面几节讨论更具体的方法。</p><p id="c04f" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">如何处理:<br/> 1。标签<br/> 2。颜色<br/> 3。位置<br/> 4。周期性特征</strong></p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h1 id="dd6a" class="kd ke iq bd kf kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la bi translated">1.如何转换标签</h1><figure class="mr ms mt mu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mq"><img src="../Images/5bdd718f1d04dce8305be9b300a7fd6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Cke8F_pmcl_4NaZm"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@snowboardinec?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Max Baskakov</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="eb17" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">大多数机器学习算法无法处理带标签的特征。字符串列很难转换成数值。</p><p id="85ef" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">让我们考虑以下卡特彼勒特性数据集:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="c01a" class="na ke iq mw b gy nb nc l nd ne">id    hair     breed<br/>1     naked    sphynx<br/>2     short    siamois<br/>3     naked    sphynx<br/>4     angora   ankara<br/>..    ...      ...</span></pre><h2 id="19e0" class="na ke iq bd kf nf ng dn kj nh ni dp kn lm nj nk kr lq nl nm kv lu nn no kz np bi translated">列<code class="fe nq nr ns mw b">hair</code>和<code class="fe nq nr ns mw b">breed</code>包含字符串格式的数据<strong class="ak">。</strong></h2><p id="bf74" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">要将<code class="fe nq nr ns mw b">hair</code>特征转换成数值，可以给每个头发标签设置一个数字。例如<code class="fe nq nr ns mw b">naked</code>变成 0，<code class="fe nq nr ns mw b">short</code>变成 1 等等；</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="1cb2" class="na ke iq mw b gy nb nc l nd ne">id    hair   breed<br/>1      0     sphynx<br/>2      1     siamois<br/>3      0     sphynx<br/>4      2     ankara<br/>..    ...    ...</span></pre><p id="5fba" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">这种标签编码方法在头发值之间创建了一个层次。</strong>/<code class="fe nq nr ns mw b">naked</code>小于<code class="fe nq nr ns mw b">1</code> / <code class="fe nq nr ns mw b">short</code>和<code class="fe nq nr ns mw b">2</code> / <code class="fe nq nr ns mw b">angora</code>。这个等级在这里不是问题，因为它反映了猫毛的长度。</p><p id="2ea5" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">由于猫品种之间没有<strong class="ld ir"/><strong class="ld ir">的特定顺序</strong>，应用以前的标签编码方法会误导算法。在这种情况下，<strong class="ld ir"> One Hot Encoding </strong>方法最合适。它用布尔值(<strong class="ld ir">0-假</strong>/<strong class="ld ir">1-真</strong>)按品种创建一个列。结果是:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="efc9" class="na ke iq mw b gy nb nc l nd ne">id  hair  sphynx  siamois  ankara<br/>1    0      1        0        0<br/>2    1      0        1        0<br/>3    0      1        0        0<br/>4    2      0        0        1<br/>.   ...    ...      ...      ...</span></pre><p id="9ad9" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">通过使用虚拟矩阵，<strong class="ld ir">每个品种都被认为是独立的。这种标签编码变体不涉及层次结构。</strong></p><figure class="mr ms mt mu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nt"><img src="../Images/72b1cb27ef5d402ce06d09b90fdec09d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Gc577rVKu8Rx6_Je"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@linneasandbakk?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Linnea Sandbakk</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="719c" class="na ke iq bd kf nf ng dn kj nh ni dp kn lm nj nk kr lq nl nm kv lu nn no kz np bi translated"><strong class="ak">小心，一个热点编码一个栏目会产生更多可供学习的功能。如果</strong>品种<strong class="ak">的数量与数据集中猫的数量相比较小，则应使用此方法。</strong></h2><p id="36cb" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">注意:创建虚拟对象会给你的数据集带来冗余。事实上，如果一只猫既不是斯芬克斯猫也不是暹罗猫，那么它必然是安卡拉猫。因此，可以安全地删除一个虚拟列，而不会丢失任何信息:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="25e2" class="na ke iq mw b gy nb nc l nd ne">id   hair   sphynx   siamois<br/>1     0      1        0         <br/>2     1      0        1         <br/>3     0      1        0         <br/>4     2      0        0         <br/>..   ...    ...      ...</span></pre><p id="353d" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">奖金。</strong>认为不同品种的猫相互独立简化了现实。例如，一只猫可能一半是暹罗猫，一半是安卡拉猫。在我们的编码数据集中，我们可以通过在 siamois 和 ankara 列中写入 0.5 来轻松表示这种混合。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="f4a4" class="na ke iq mw b gy nb nc l nd ne">id   hair   sphynx   siamois<br/>1     0      1        0         <br/>2     1      0        0.5        <br/>3     0      1        0         <br/>4     2      0        0         <br/>..   ...    ...      ...</span></pre><h2 id="d973" class="na ke iq bd kf nf ng dn kj nh ni dp kn lm nj nk kr lq nl nm kv lu nn no kz np bi translated">第一部分介绍了编码标签的经典方法。<strong class="ak">但是更具体的技术可能更适合。这取决于标签信息以及您需要如何处理数据。F </strong>跟随技术<strong class="ak">可能会有更好的效果。</strong></h2></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h1 id="229e" class="kd ke iq bd kf kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la bi translated">2.如何转换颜色</h1><p id="e096" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">假设我们现在有了每只猫的眼睛颜色:</p><figure class="mr ms mt mu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e6ebc2f846ed33a052bd23e88133f699.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LcT9r27g77vwJCv2"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@alcqlapa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Antonio Lapa</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="4f14" class="na ke iq mw b gy nb nc l nd ne">id   eyecolor<br/>1    light_green    <br/>2    dark_cyan<br/>3    medium_sea_green <br/>4    yellow_green<br/>..   ...</span></pre><p id="35a8" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">这一次，以前的方法不太适合表达颜色标签中的价值。相反，我们可以将颜色列分为红绿蓝三种色调:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="b892" class="na ke iq mw b gy nb nc l nd ne">id  eye_red  eye_green  eye_blue<br/>1    173       237         150    <br/>2    70        138         139<br/>3    105       178         117 <br/>4    168       205         67<br/>..   ...       ...         ...</span></pre><p id="0b3b" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">一般来说，颜色有几种编码方式。人们可能需要添加透明度信息。根据数据的使用方式，可以用 HSB(色调饱和亮度)而不是 RGB 进行编码。</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h1 id="9b80" class="kd ke iq bd kf kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la bi translated">3.如何转换位置</h1><p id="be11" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">现在我们考虑猫的位置。我们有他们居住地的城市名。</p><figure class="mr ms mt mu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nu"><img src="../Images/42eeb78becc0764bec805864e1910338.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*d4hrf6hg2QuCOOOe"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@anthonydelanoix?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Anthony DELANOIX</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="b3b7" class="na ke iq mw b gy nb nc l nd ne">id   city<br/>1    Paris<br/>2    New-York<br/>3    Cairo<br/>4    New-York<br/>..   ...</span></pre><p id="aceb" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">这里，我们可以用城市的 GPS(纬度/经度)十进制度坐标来代替城市名称，而不是使用常规的标签编码方法:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="ddbb" class="na ke iq mw b gy nb nc l nd ne">id  latitude   longitude<br/>1   48.85341   2.3488<br/>2   37.6       -95.665<br/>3   30.06263   31.24967<br/>4   37.6       -95.665<br/>..  ...        ...</span></pre><p id="8a54" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">如您所见，我们根据地理属性对位置进行了编码。</p><p id="e07e" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">根据我们的需要，城市可以用其他指标来表征。例如，如果我们需要预测猫的预期寿命，那么<strong class="ld ir"> <em class="nv">城市发展指数</em> </strong>，或者<strong class="ld ir"> <em class="nv">平均家庭收入</em> </strong>可能更适合。</p><p id="8252" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">这些翻译带来了其他类型的信息。<strong class="ld ir">人们可以结合指标来丰富数据集。</strong></p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h1 id="5c58" class="kd ke iq bd kf kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la bi translated">4.如何转换周期性特征</h1><p id="b8e9" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">最后但同样重要的是，让我们关注循环特性。我们现在有了猫外出夜游的平均时间:</p><figure class="mr ms mt mu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nw"><img src="../Images/e75a3af2884b381561c452e07a673ba3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*c_n3bJnAaqs5yNWF"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@agebarros?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Agê Barros</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="782c" class="na ke iq mw b gy nb nc l nd ne">id   avg_night_walk_time<br/>1     11:30 PM<br/>2     00:12 AM<br/>3     10:45 PM<br/>4     01:07 AM<br/>..    ...</span></pre><p id="3d8c" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">首先让我们把它转换成十进制小时:</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="57fa" class="na ke iq mw b gy nb nc l nd ne">id   avg_night_walk_time<br/>1     23.5<br/>2     0.2<br/>3     22.75<br/>4     1.12<br/>..    ...</span></pre><p id="d480" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">所以现在我们有了<code class="fe nq nr ns mw b">0</code>和<code class="fe nq nr ns mw b">23.99</code>之间的时间。作为人类，我们知道 23:59 和 00:00 很接近，但它没有出现在数据中。要改变它，我们可以用余弦和正弦来转换时间。它将数据投影到一个圆形空间中，在该空间中<em class="nv"> 00:00 AM </em>和<em class="nv"> 11:59 PM </em>靠得很近。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="a6e4" class="na ke iq mw b gy nb nc l nd ne">id   avg_nwt_cos   avg_nwt_sin<br/>1    0.99          -0.13<br/>2    0.99          0.05<br/>3    0.94          -0.32<br/>4    0.95          0.28<br/>..   ...           ...</span></pre><p id="ebbc" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">通过转换时间，我们失去了一些人类的理解，但我们可以在任何时候将余弦和正弦数据转换回小时。这种转换并不意味着信息的丢失。</p><p id="b3e2" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">这种循环转换也应该应用于角度和周期过程。</p><h2 id="ffee" class="na ke iq bd kf nf ng dn kj nh ni dp kn lm nj nk kr lq nl nm kv lu nn no kz np bi translated">正确处理周期性特征会大大增加数据集的价值。当你用小时、工作日、月、角度工作时，不要忘记它...</h2></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><p id="bb7a" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><em class="nv"> PS:在本文中，我没有谈论特性缩放，因为我关注的是数据转换。如有必要，考虑在转换后缩放/居中数据。</em></p></div></div>    
</body>
</html>