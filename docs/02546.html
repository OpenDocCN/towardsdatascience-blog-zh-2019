<html>
<head>
<title>Is O(n) the only way to improve your algorithms?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">O(n)是改进你的算法的唯一方法吗？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/understand-the-problem-statement-to-optimize-your-code-c3074b469f92?source=collection_archive---------19-----------------------#2019-04-25">https://towardsdatascience.com/understand-the-problem-statement-to-optimize-your-code-c3074b469f92?source=collection_archive---------19-----------------------#2019-04-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="3b36" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/python-shorts" rel="noopener" target="_blank">蟒蛇短裤</a></h2><div class=""/><div class=""><h2 id="19ac" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">理解问题陈述如何帮助您优化代码</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/92ae75282f038c496c901af81841855d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-pEWH4jeZmQbkM3l"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Photo by <a class="ae lh" href="https://unsplash.com/@impatrickt?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Patrick Tomasso</a> on <a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a773" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">每当我们谈论优化代码时，我们总是讨论代码的计算复杂性。</p><p id="3415" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">是 O(n)还是 O(n 的平方)？</p><p id="872e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> <em class="me">但是，有时候我们需要超越算法，看看算法在现实世界中是如何被使用的。</em> </strong></p><p id="f6c1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这篇文章中，我将谈谈类似的情况以及我是如何解决的。</p><h1 id="203f" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">问题是:</h1><p id="f477" class="pw-post-body-paragraph li lj it lk b ll mx kd ln lo my kg lq lr mz lt lu lv na lx ly lz nb mb mc md im bi translated">最近我在处理一个 NLP 问题，不得不从文本中清除数字。</p><p id="83cf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">从表面上看，这似乎是一个微不足道的问题。一个人可以用许多方法做到这一点。</p><p id="4fbf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我用下面给出的方法做了这件事。该函数将问题字符串中的数字替换为#s。</p><pre class="ks kt ku kv gt nc nd ne nf aw ng bi"><span id="099a" class="nh mg it nd b gy ni nj l nk nl">def clean_numbers(x):    <br/>        x = re.sub('[0-9]{5,}', '#####', x)<br/>        x = re.sub('[0-9]{4}', '####', x)<br/>        x = re.sub('[0-9]{3}', '###', x)<br/>        x = re.sub('[0-9]{2}', '##', x)<br/>    return x</span></pre><p id="64f1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这些都是干净的代码，但是我们能优化它的运行时间吗？在继续下一步之前思考。</p><h1 id="5047" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">诀窍是:</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nm"><img src="../Images/f14e727d7c6fdc47fde500b84ff16d17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bQ3y9DWXrpVfIVA9"/></div></div></figure><p id="01a1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">优化的诀窍在于理解代码的目标。</p><p id="8ce4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">虽然我们大多数人都理解 O(n)范式，并且总是可以去寻找更好的算法，但优化代码的一个被遗忘的方法是回答一个问题:</p><p id="d5c6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> <em class="me">这段代码将如何使用？</em>T11】</strong></p><p id="4bcb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">你知道吗，如果我们在替换字符串之前只检查一个数字，我们可以获得 10 倍的运行时间改进！！！T15】</p><p id="0ff1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">由于大多数字符串没有数字，我们不会评估对<code class="fe nn no np nd b">re.sub.</code>的 4 次函数调用</p><p id="aad4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">它只需要一个简单的 if 语句。</p><pre class="ks kt ku kv gt nc nd ne nf aw ng bi"><span id="35f0" class="nh mg it nd b gy ni nj l nk nl">def clean_numbers(x):<br/>    if bool(re.search(r'\d', x)):<br/>        x = re.sub('[0-9]{5,}', '#####', x)<br/>        x = re.sub('[0-9]{4}', '####', x)<br/>        x = re.sub('[0-9]{3}', '###', x)<br/>        x = re.sub('[0-9]{2}', '##', x)<br/>    return x</span></pre><p id="b18a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> <em class="me">这样做有什么必要？</em>T19】</strong></p><p id="7a37" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">对我们使用的数据的理解和对问题陈述的理解。</p><p id="0fd7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这些改进当然是隐藏的，你可能需要考虑这段代码要运行多少次？或者谁会触发功能？做这样的改进。</p><p id="13b3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">但这是值得的。</p><blockquote class="nq"><p id="467b" class="nr ns it bd nt nu nv nw nx ny nz md dk translated">把你写的每一个函数都当成你的孩子，尽你所能去改进它。</p></blockquote><p id="3dc9" class="pw-post-body-paragraph li lj it lk b ll oa kd ln lo ob kg lq lr oc lt lu lv od lx ly lz oe mb mc md im bi translated">我们可以使用 Jupyter 笔记本中的<code class="fe nn no np nd b">%%timeit</code>魔法功能来查看性能结果。</p><pre class="ks kt ku kv gt nc nd ne nf aw ng bi"><span id="126b" class="nh mg it nd b gy ni nj l nk nl">%%timeit<br/>clean_numbers(“This is a string with 99 and 100 in it”)<br/>clean_numbers(“This is a string without any numbers”)</span></pre><p id="ad2c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用第一个函数调用上述简单函数的结果是:</p><pre class="ks kt ku kv gt nc nd ne nf aw ng bi"><span id="0793" class="nh mg it nd b gy ni nj l nk nl">17.2 µs ± 332 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)</span></pre><p id="4e1a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用第二个函数:</p><pre class="ks kt ku kv gt nc nd ne nf aw ng bi"><span id="5d39" class="nh mg it nd b gy ni nj l nk nl">12.2 µs ± 324 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)</span></pre><p id="63f6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> <em class="me">即使我们 50%的句子都有数字，我们还是提高了两倍。</em> </strong></p><p id="8af7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">由于我们在数据库中不会有那么多包含数字的句子，我们可以这样做并得到很好的改进。</p><h1 id="50f5" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">结论</h1><p id="378b" class="pw-post-body-paragraph li lj it lk b ll mx kd ln lo my kg lq lr mz lt lu lv na lx ly lz nb mb mc md im bi translated">有不同的方法来改进一个算法，甚至上面的问题可以用一些我想不到的逻辑来进一步改进。</p><p id="66b3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">但我想说的是，在封闭的盒子里思考并想出解决方案永远不会帮助你。</p><p id="4982" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果您理解了问题陈述和您试图实现的目标，您将能够编写更好、更优化的代码。</p><p id="f0d7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">所以，下次你的老板让你降低算法的计算复杂度时，告诉他，虽然你无法降低复杂度，但你可以使用一些定制的业务逻辑让算法变得更快。我猜他会印象深刻。</p><p id="9c4b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">另外，如果你想了解更多关于 Python 3 的知识，我想向你推荐一门来自密歇根大学的关于学习 T2 中级 Python 3 的优秀课程。一定要去看看。</p><p id="29c2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">将来我也会写更多初学者友好的帖子。让我知道你对这个系列的看法。在<a class="ae lh" href="https://medium.com/@rahul_agarwal" rel="noopener"> <strong class="lk jd">媒体</strong> </a>关注我，或者订阅我的<a class="ae lh" href="https://mlwhiz.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd">博客</strong> </a>了解他们。</p><p id="e208" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">一如既往，我欢迎反馈和建设性的批评，可以通过 Twitter <a class="ae lh" href="https://twitter.com/MLWhiz" rel="noopener ugc nofollow" target="_blank"> @mlwhiz </a>联系到我。</p></div></div>    
</body>
</html>