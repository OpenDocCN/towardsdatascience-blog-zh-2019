<html>
<head>
<title>Step-by-Step Guide to Install Tensorflow 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">安装 Tensorflow 2 的分步指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/step-by-step-guide-to-install-tensorflow-2-0-67bc73e79b82?source=collection_archive---------12-----------------------#2019-06-14">https://towardsdatascience.com/step-by-step-guide-to-install-tensorflow-2-0-67bc73e79b82?source=collection_archive---------12-----------------------#2019-06-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c25d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">由于其易用性、效率和交叉兼容性，TensorFlow 2 将改变深度学习的格局。在这里，我们将学习安装和设置它。我们还将使用 TensorFlow 2 实现 MNIST 分类。</h2></div><p id="ea42" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">&lt;<download the="" free="" book="" class="ae lb" href="https://www.understandingdeeplearning.com" rel="noopener ugc nofollow" target="_blank">了解深度学习，了解更多&gt; &gt;</download></p><p id="2a4c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">TensorFlow 2 将改变深度学习的格局。它制造了，</p><ul class=""><li id="954a" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">模型构建更简单，</li><li id="f3d8" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">任何平台上的生产部署都更加健壮，并且</li><li id="5cd5" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">支持强大的研究实验。</li></ul><p id="e0e0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有了这些，深度学习将在研究和工业的各个领域变得更加主流。</p><p id="9047" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">TensorFlow 2 中集成了 Keras API。Keras 是一个极其流行的高级 API，用于构建和训练深度学习模型。在前进之前，重要的是要知道，</p><ul class=""><li id="d2f5" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">TensorFlow 1.x 也支持 Keras，但在 2.0 中，Keras 与 TensorFlow 平台的其余部分紧密集成。2.0 正在提供一个<strong class="kh ir">单个</strong>高级 API，以减少混乱并支持高级功能。</li><li id="df72" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">现在普遍使用的 Keras 是一个独立的开源项目，位于<a class="ae lb" href="http://www.keras.io" rel="noopener ugc nofollow" target="_blank">www . Keras . io</a>(2019 年 6 月)。然而，Keras 是一个 API 规范，现在在 TensorFlow 中也可以使用(详见[ <a class="ae lb" href="https://medium.com/tensorflow/standardizing-on-keras-guidance-on-high-level-apis-in-tensorflow-2-0-bad2b04c819a" rel="noopener"> 1 </a>)。</li></ul><p id="182c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">推荐阅读[ <a class="ae lb" href="https://medium.com/tensorflow/standardizing-on-keras-guidance-on-high-level-apis-in-tensorflow-2-0-bad2b04c819a" rel="noopener"> 1 </a> ]和[ <a class="ae lb" href="https://medium.com/tensorflow/whats-coming-in-tensorflow-2-0-d3663832e9b8" rel="noopener"> 2 </a> ]了解更多 TensorFlow 2.0 的好处。总之，TF 2.0 带来了易实施性以及巨大的计算效率，并与任何平台兼容，如 Android、iOS 和嵌入式系统，如 Raspberry Pi 和 Edge TPUs。</p><p id="f7a2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以前实现这些目标很困难，需要投入时间寻找替代方法。由于 TensorFlow 2 已经带来了所有这些，因此尽快迁移到它是势在必行的。</p><p id="25b1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们将在这里学习安装和设置 TensorFlow 2.0。</p><h1 id="5615" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">先决条件</h1><h2 id="93c7" class="mi lr iq bd ls mj mk dn lw ml mm dp ma ko mn mo mc ks mp mq me kw mr ms mg mt bi translated">选项 1: Python 3.4+通过 Anaconda</h2><p id="3883" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">Anaconda with Jupyter 提供了一种更简单的方法来安装和使用 Python。</p><p id="5c5d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装 Anaconda 相对简单。关注最新 Python 3.4+的链接:<a class="ae lb" href="https://jupyter.org/install" rel="noopener ugc nofollow" target="_blank">https://jupyter.org/install</a></p><p id="9ca7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">类似于<code class="fe mz na nb nc b">pip</code>，对于 Anaconda，我们有<code class="fe mz na nb nc b">conda</code>来创建虚拟环境和安装包。</p><h2 id="3e0d" class="mi lr iq bd ls mj mk dn lw ml mm dp ma ko mn mo mc ks mp mq me kw mr ms mg mt bi translated">选项 2: Python(没有 Anaconda)</h2><p id="06d4" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated"><strong class="kh ir"> a .安装 Python 3.4+ </strong></p><p id="0f12" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">检查您的当前版本。</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="36e0" class="mi lr iq nc b gy nl nm l nn no">$ python --version</span></pre><p id="013e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者，</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="8afc" class="mi lr iq nc b gy nl nm l nn no">$ python3 --version</span></pre><p id="5bff" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我在 Mac 上有不同的 Python(Python 3.6 在 Anaconda 上)和 Ubuntu (Python 3.7)。我在上面看到的输出是，</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="8ca4" class="mi lr iq nc b gy nl nm l nn no">Python 3.6.8 :: Anaconda custom (x86_64)<em class="np"># Mac</em></span><span id="8589" class="mi lr iq nc b gy nq nm l nn no">Python 3.7.1<em class="np"># Ubuntu</em></span></pre><p id="3be3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">无论是 Anaconda 中的 Python 还是其他都可以。</p><p id="513c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你的版本是<strong class="kh ir">不是</strong> 3.4+，安装如下。</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="a597" class="mi lr iq nc b gy nl nm l nn no">$ brew update<br/>$ brew install python <em class="np"># Installs Python 3</em></span><span id="f7da" class="mi lr iq nc b gy nq nm l nn no">$ sudo apt install python3-dev python3-pip</span></pre><p id="bc15" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> b .安装 virtualenv </strong></p><p id="28cc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mz na nb nc b">virtualenv</code>需要创建一个虚拟环境。其要求将在下一节中解释。</p><p id="a98d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">T22】Mac OST24】</strong></p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="113f" class="mi lr iq nc b gy nl nm l nn no">$ sudo pip3 install -U virtualenv<em class="np"># system-wide install</em></span></pre><p id="2fb1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> <em class="np"> Ubuntu </em> </strong></p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="9d55" class="mi lr iq nc b gy nl nm l nn no">$ sudo pip3 install -U virtualenv<em class="np"># system-wide install</em></span></pre><p id="a009" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">注</strong> : <code class="fe mz na nb nc b">pip</code>(代替<code class="fe mz na nb nc b">pip3</code>)有时也会用到。如果两者之间不确定，使用<code class="fe mz na nb nc b">pip3</code>。你用<code class="fe mz na nb nc b">pip3</code>不会出错。如果您想知道是否可以使用<code class="fe mz na nb nc b">pip</code>，请运行以下命令</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="6f6c" class="mi lr iq nc b gy nl nm l nn no">$ pip3 --version<br/>pip 19.1.1 from /Users/inferno/anaconda/lib/python3.6/site-packages/pip (python 3.6)</span><span id="620e" class="mi lr iq nc b gy nq nm l nn no">$ pip --version<br/>pip 19.1.1 from /Users/inferno/anaconda/lib/python3.6/site-packages/pip (python 3.6)</span></pre><p id="20ea" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我的系统中，<code class="fe mz na nb nc b">pip</code>和<code class="fe mz na nb nc b">pip3</code>的版本是一样的。因此，我可以使用其中任何一个。</p><p id="15a0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在下文中，我们将研究这两种方法的安装步骤。</p><h1 id="ebe3" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">第一步。用 Python 创建一个虚拟环境。</h1><h2 id="34b1" class="mi lr iq bd ls mj mk dn lw ml mm dp ma ko mn mo mc ks mp mq me kw mr ms mg mt bi translated">我们为什么想要虚拟环境？</h2><p id="9eed" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">虚拟环境是 Python 项目的隔离环境。在虚拟环境中，我们可以拥有一组完全独立的包(依赖项)和设置，它们不会与其他虚拟环境中的任何东西或默认的本地 Python 环境相冲突。</p><p id="8635" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着我们可以保留同一个包的不同版本，例如，我们可以对一个项目使用 scikit-learn 0.1，而对同一系统上不同虚拟环境中的另一个项目使用 scikit-learn 0.22。</p><h2 id="ade0" class="mi lr iq bd ls mj mk dn lw ml mm dp ma ko mn mo mc ks mp mq me kw mr ms mg mt bi translated">实例化虚拟环境</h2><p id="5f37" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated"><strong class="kh ir"> Ubuntu/Mac(没有 Anaconda 的 Python)</strong></p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="a55e" class="mi lr iq nc b gy nl nm l nn no">$ virtualenv --system-site-packages -p python3 tf_2</span></pre><p id="a69b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的命令将创建一个虚拟环境<code class="fe mz na nb nc b">tf_2</code>。理解命令，</p><ul class=""><li id="ac45" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated"><code class="fe mz na nb nc b">virtualenv</code>将创建一个虚拟环境。</li><li id="3cae" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated"><code class="fe mz na nb nc b">--system-site-packages</code>允许虚拟环境中的项目<code class="fe mz na nb nc b">tf_2</code>访问全局站点包。默认设置不允许此访问(<code class="fe mz na nb nc b">--no-site-packages</code>以前用于此默认设置，但现在已弃用。)</li><li id="789a" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated"><code class="fe mz na nb nc b">-p python3</code>用于设置<code class="fe mz na nb nc b">tf_2</code>的 Python 解释器。如果<code class="fe mz na nb nc b">virtualenv</code>是和 Python3 一起安装的，这个参数可以跳过。默认情况下，这是虚拟环境的 python 解释器。将 Python3.x 设置为解释器的另一个选项是<code class="fe mz na nb nc b">$ virtualenv --system-site-packages --python=python3.7 tf_2</code>。这提供了更多的控制。</li><li id="6830" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated"><code class="fe mz na nb nc b">tf_2</code>是我们创建的虚拟环境的名字。这将在虚拟环境的位置创建一个物理目录。这个<code class="fe mz na nb nc b">/tf_2</code>目录包含 Python 编译器的副本和我们稍后将安装的所有包。</li></ul><p id="da58" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">Ubuntu/Mac 上的 Conda(来自 Anaconda 的 Python)</strong></p><p id="7f0a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您使用 Conda，您可以创建虚拟环境，</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="407d" class="mi lr iq nc b gy nl nm l nn no">$ conda create -n tf_2</span></pre><p id="3e30" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的命令也将创建一个虚拟环境<code class="fe mz na nb nc b">tf_2</code>。与以前不同，我们不需要安装不同的软件包来创建虚拟环境。内置的<code class="fe mz na nb nc b">conda</code>命令提供了这一点。</p><p id="fb10" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">理解命令，</p><ul class=""><li id="f090" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated"><code class="fe mz na nb nc b">conda</code>可用于创建虚拟环境、安装包、列出环境中已安装的包等。简而言之，<code class="fe mz na nb nc b">conda</code>执行<code class="fe mz na nb nc b">pip</code>和<code class="fe mz na nb nc b">virtualenv</code>执行的操作。然而，<code class="fe mz na nb nc b">conda</code>并不取代<code class="fe mz na nb nc b">pip</code>，因为有些封装在<code class="fe mz na nb nc b">pip</code>上可用，而在<code class="fe mz na nb nc b">conda</code>上不可用。</li><li id="cd59" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated"><code class="fe mz na nb nc b">create</code>用于创建虚拟环境。</li><li id="f0f9" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated"><code class="fe mz na nb nc b">-n</code>是专用于<code class="fe mz na nb nc b">create</code>的参数。<code class="fe mz na nb nc b">-n</code>用于命名虚拟环境。<code class="fe mz na nb nc b">n</code>的值，即环境名，这里是<code class="fe mz na nb nc b">tf_2</code>。</li><li id="551c" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">其他有用的论据:类似于<code class="fe mz na nb nc b">virtualenv</code>中的<code class="fe mz na nb nc b">--system-site-packages</code>，可以使用<code class="fe mz na nb nc b">--use-local</code>。</li></ul><h1 id="c902" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">第二步。激活虚拟环境。</h1><p id="1019" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">激活虚拟环境。</p><p id="943f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> Ubuntu/Mac(没有 Anaconda 的 Python)</strong></p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="3ce6" class="mi lr iq nc b gy nl nm l nn no">$ source tf_2/bin/activate</span></pre><p id="e23d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">Ubuntu/Mac 上的 Conda(来自 Anaconda 的 Python)</strong></p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="4df3" class="mi lr iq nc b gy nl nm l nn no">$ conda activate tf_2</span></pre><p id="13d0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">激活后，终端将变为此<code class="fe mz na nb nc b">(tf_2) $</code>。</p><h1 id="8f1c" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">第三步。安装 TensorFlow 2.0。</h1><p id="a72c" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">以下说明对于这两个 Python 选项是相同的。</p><p id="749c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在开始 TensorFlow 安装之前，我们将更新<code class="fe mz na nb nc b">pip</code>。</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="e084" class="mi lr iq nc b gy nl nm l nn no">(tf_2) $ pip install --upgrade pip</span></pre><p id="e946" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，安装 TensorFlow。</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="a353" class="mi lr iq nc b gy nl nm l nn no">(tf_2) $ pip install --upgrade tensorflow==2.0.0-beta1</span></pre><p id="ba89" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的<code class="fe mz na nb nc b">tensorflow</code>参数安装了一个 2.0.0-beta1 的纯 CPU 版本。</p><p id="d751" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从 https://www.tensorflow.org/install/pip<a class="ae lb" href="https://www.tensorflow.org/install/pip" rel="noopener ugc nofollow" target="_blank">选择合适的 TensorFlow 版本。</a></p><p id="9689" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在写这篇文章的时候，我们有 tensorflow 2.0.0-beta1。这是推荐的。根据我们的要求，我们可以将参数更改为以下之一。</p><ul class=""><li id="c962" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated"><code class="fe mz na nb nc b">tensorflow==2.0.0-beta1</code>-仅针对 CPU 的 TF 2.0 Beta 版本预览(<em class="np">推荐</em>)。</li><li id="0762" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated"><code class="fe mz na nb nc b">tensorflow-gpu==2.0.0-beta1</code>-用<a class="ae lb" href="https://www.tensorflow.org/install/gpu" rel="noopener ugc nofollow" target="_blank"> GPU 支持</a>预览 TF 2.0 Beta 版本。</li><li id="573c" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated"><code class="fe mz na nb nc b">tensorflow</code>-CPU 专用的最新稳定版本<em class="np">。</em></li><li id="f28f" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated"><code class="fe mz na nb nc b">tensorflow-gpu</code>-支持<a class="ae lb" href="https://www.tensorflow.org/install/gpu" rel="noopener ugc nofollow" target="_blank"> GPU 的最新稳定版本</a>。</li><li id="df6e" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated"><code class="fe mz na nb nc b">tf-nightly</code>-仅针对 CPU 预览每夜构建。</li><li id="5e81" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated"><code class="fe mz na nb nc b">tf-nightly-gpu</code>-借助<a class="ae lb" href="https://www.tensorflow.org/install/gpu" rel="noopener ugc nofollow" target="_blank"> GPU 支持</a>预览每夜构建。</li></ul><blockquote class="nr ns nt"><p id="c3f5" class="kf kg np kh b ki kj jr kk kl km ju kn nu kp kq kr nv kt ku kv nw kx ky kz la ij bi translated"><strong class="kh ir">注意:对于 conda，我们也将使用</strong> <code class="fe mz na nb nc b"><strong class="kh ir">pip install</strong></code> <strong class="kh ir">。TensorFlow 不具备</strong> <code class="fe mz na nb nc b"><strong class="kh ir">conda</strong></code> <strong class="kh ir">。</strong></p></blockquote><h1 id="1680" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">第四步。测试安装。</h1><p id="6844" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">要通过终端快速测试安装，请使用</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="d0cb" class="mi lr iq nc b gy nl nm l nn no">(tf_2) $ python -c "import tensorflow as tf; x = [[2.]]; print('tensorflow version', tf.__version__); print('hello, {}'.format(tf.matmul(x, x)))"</span></pre><p id="e6f5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">输出将是(忽略系统消息)，</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="c3ce" class="mi lr iq nc b gy nl nm l nn no">tensorflow version 2.0.0-beta1<br/>hello, [[4.]]</span></pre><p id="1c9d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意 TensorFlow 版本输出。如果它不是您安装的版本(在本例中是 2.0.0-beta1)，那么一定有问题。最有可能的情况是，之前安装了 TensorFlow 和/或当前安装失败。</p><h2 id="5a4b" class="mi lr iq bd ls mj mk dn lw ml mm dp ma ko mn mo mc ks mp mq me kw mr ms mg mt bi translated">TensorFlow 2.0 示例</h2><p id="3f47" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">我们将使用 MNIST ( <strong class="kh ir"> fashion_mnist) </strong>图像分类示例来测试和学习 TensorFlow 2.0。</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="25c2" class="mi lr iq nc b gy nl nm l nn no"><strong class="nc ir">import</strong> <strong class="nc ir">matplotlib.pyplot</strong> <strong class="nc ir">as</strong> <strong class="nc ir">plt</strong><br/><br/><strong class="nc ir">import</strong> <strong class="nc ir">tensorflow</strong> <strong class="nc ir">as</strong> <strong class="nc ir">tf</strong><br/>layers = tf.keras.layers<br/><br/><strong class="nc ir">import</strong> <strong class="nc ir">numpy</strong> <strong class="nc ir">as</strong> <strong class="nc ir">np</strong><br/><br/>print(tf.__version__)</span></pre><p id="c55f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">确保<code class="fe mz na nb nc b">tf.__version__</code>输出 2.x。如果版本较旧，检查安装或虚拟环境。</p><p id="f9f4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从<code class="fe mz na nb nc b">tf</code>开放数据集中下载<strong class="kh ir"> fashion_mnist </strong>数据并进行预处理。</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="5ea3" class="mi lr iq nc b gy nl nm l nn no">mnist = tf.keras.datasets.fashion_mnist</span><span id="2bba" class="mi lr iq nc b gy nq nm l nn no">(x_train, y_train), (x_test, y_test) = mnist.load_data()<br/>x_train, x_test = x_train / 255.0, x_test / 255.0</span></pre><p id="0b97" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了熟悉这些数据，我们将从中绘制几个例子。</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="25a8" class="mi lr iq nc b gy nl nm l nn no">class_names = ['T-shirt/top', 'Trouser', 'Pullover', 'Dress', 'Coat', 'Sandal', 'Shirt', 'Sneaker', 'Bag', 'Ankle boot']</span><span id="580c" class="mi lr iq nc b gy nq nm l nn no">plt.figure(figsize=(10,10))<br/><strong class="nc ir">for</strong> i <strong class="nc ir">in</strong> range(25):<br/> plt.subplot(5,5,i+1)<br/> plt.xticks([])<br/> plt.yticks([])<br/> plt.grid(<strong class="nc ir">False</strong>)<br/> plt.imshow(x_train[i], cmap=plt.cm.binary)<br/> plt.xlabel(class_names[y_train[i]])<br/>plt.show()</span></pre><figure class="nd ne nf ng gt ny gh gi paragraph-image"><div role="button" tabindex="0" class="nz oa di ob bf oc"><div class="gh gi nx"><img src="../Images/79d618a692170107739a0dde4840ec5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mWpsG4azI8GXD4IZHcBlTA.png"/></div></div></figure><p id="c6df" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们将逐层构建模型<strong class="kh ir"/>。</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="c966" class="mi lr iq nc b gy nl nm l nn no">model = tf.keras.Sequential()<br/>model.add(layers.Flatten())<br/>model.add(layers.Dense(64, activation='relu'))<br/>model.add(layers.Dense(64, activation='relu'))<br/>model.add(layers.Dense(10, activation='softmax'))</span><span id="0f0c" class="mi lr iq nc b gy nq nm l nn no">model.compile(optimizer='adam',<br/> loss='sparse_categorical_crossentropy',<br/> metrics=['accuracy'])<br/>model.fit(x_train, y_train, epochs=5)</span></pre><figure class="nd ne nf ng gt ny gh gi paragraph-image"><div role="button" tabindex="0" class="nz oa di ob bf oc"><div class="gh gi of"><img src="../Images/22566a85a328e64a4707c4a0b3d83627.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pKHBnJOfv5EHsbwwqaSpoA.png"/></div></div></figure><p id="59e8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，该模型仅用于演示，因此仅在五个时期进行训练。</p><p id="b6b7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们现在将根据测试数据测试模型的准确性。</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="8927" class="mi lr iq nc b gy nl nm l nn no">model.evaluate(x_test, y_test)</span></pre><figure class="nd ne nf ng gt ny gh gi paragraph-image"><div role="button" tabindex="0" class="nz oa di ob bf oc"><div class="gh gi og"><img src="../Images/49bbfb574c11aac9e4240e0f5ae30563.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s-nOAn52rf-jWluCaCeKTA.png"/></div></div></figure><p id="83dd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将想象其中一个预测。我们将使用[ <a class="ae lb" href="https://www.tensorflow.org/tutorials/keras/basic_classification" rel="noopener ugc nofollow" target="_blank"> 3 </a>中的一些 UDF。</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="5ffe" class="mi lr iq nc b gy nl nm l nn no"><strong class="nc ir">def</strong> plot_image(i, predictions_array, true_label, img):<br/> predictions_array, true_label, img = predictions_array[i], true_label[i], img[i]<br/> plt.grid(<strong class="nc ir">False</strong>)<br/> plt.xticks([])<br/> plt.yticks([])<br/> <br/> plt.imshow(img, cmap=plt.cm.binary)</span><span id="dfcf" class="mi lr iq nc b gy nq nm l nn no"> predicted_label = np.argmax(predictions_array)<br/> <br/> <strong class="nc ir">if</strong> predicted_label == true_label:<br/> color = 'blue'<br/> <strong class="nc ir">else</strong>:<br/> color = 'red'<br/> <br/> plt.xlabel("<strong class="nc ir">{}</strong> <strong class="nc ir">{:2.0f}</strong>% (<strong class="nc ir">{}</strong>)".format(class_names[predicted_label],<br/> 100*np.max(predictions_array),<br/> class_names[true_label]),<br/> color=color)</span><span id="ad41" class="mi lr iq nc b gy nq nm l nn no"><strong class="nc ir">def</strong> plot_value_array(i, predictions_array, true_label):<br/> predictions_array, true_label = predictions_array[i], true_label[i]<br/> plt.grid(<strong class="nc ir">False</strong>)<br/> plt.xticks([])<br/> plt.yticks([])<br/> thisplot = plt.bar(range(10), predictions_array, color="#777777")<br/> plt.ylim([0, 1]) <br/> predicted_label = np.argmax(predictions_array)<br/> <br/> thisplot[predicted_label].set_color('red')<br/> thisplot[true_label].set_color('blue')</span></pre><p id="288b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将为测试图像找到预测，即每个图像属于 10 个类别中的每一个的概率。</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="935d" class="mi lr iq nc b gy nl nm l nn no">predictions = model.predict(x_test)</span><span id="7d31" class="mi lr iq nc b gy nq nm l nn no">i = 0<br/>plt.figure(figsize=(6,3))<br/>plt.subplot(1,2,1)<br/>plot_image(i, predictions, y_test, x_test)<br/>plt.subplot(1,2,2)<br/>plot_value_array(i, predictions, y_test)<br/>plt.show()</span></pre><figure class="nd ne nf ng gt ny gh gi paragraph-image"><div role="button" tabindex="0" class="nz oa di ob bf oc"><div class="gh gi oh"><img src="../Images/518294b0d855d3d5919282e6c66f1f99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o7msxI2MD5mW7jWiR8yGUA.png"/></div></div></figure><p id="0b92" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如我们在上面的图中看到的，“踝靴”的预测概率是最高的。为了进一步确认，我们将预测的标签输出为，</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="045d" class="mi lr iq nc b gy nl nm l nn no">predicted_label = class_names[np.argmax(predictions[0])]<br/>print('Actual label:', class_names[y_test[0]]) <br/>print('Predicted label:', predicted_label)</span></pre><figure class="nd ne nf ng gt ny gh gi paragraph-image"><div role="button" tabindex="0" class="nz oa di ob bf oc"><div class="gh gi oi"><img src="../Images/dc8b29eeb1ceaf0f157acc4074d3b058.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l5SIX8S1nuqE20cOgatbRg.png"/></div></div></figure><h1 id="8f9d" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">第五步。停用虚拟环境</h1><p id="ce83" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">在关闭之前，我们将停用虚拟环境。</p><p id="02b8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">供<code class="fe mz na nb nc b">virtualenv</code>使用，</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="9390" class="mi lr iq nc b gy nl nm l nn no">(tf_2) $ deactivate</span></pre><p id="2ac1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">供<code class="fe mz na nb nc b">conda</code>使用，</p><pre class="nd ne nf ng gt nh nc ni nj aw nk bi"><span id="deca" class="mi lr iq nc b gy nl nm l nn no">(tf_2) $ conda deactivate</span></pre><p id="0b2b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在 TensorFlow 2.0 上有 MNIST 例子的 GitHub 库在这里是<a class="ae lb" href="https://github.com/cran2367/tensorflow-2-example/blob/master/tensorflow-2-example.ipynb" rel="noopener ugc nofollow" target="_blank"/>。</p><h1 id="a65f" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">结论</h1><ul class=""><li id="4681" class="lc ld iq kh b ki mu kl mv ko oj ks ok kw ol la lh li lj lk bi translated">TensorFlow 2.0 带来了 keras API 的易用功能，例如逐层建模。</li><li id="132c" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">我们学习了安装 TensorFlow 2.0。</li><li id="b0e7" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">我们用 TF 2.0 完成了一个真实的 MNIST 数据分类示例。</li></ul></div><div class="ab cl om on hu oo" role="separator"><span class="op bw bk oq or os"/><span class="op bw bk oq or os"/><span class="op bw bk oq or"/></div><div class="ij ik il im in"><h1 id="6a35" class="lq lr iq bd ls lt ot lv lw lx ou lz ma jw ov jx mc jz ow ka me kc ox kd mg mh bi translated">参考</h1><ol class=""><li id="556a" class="lc ld iq kh b ki mu kl mv ko oj ks ok kw ol la oy li lj lk bi translated"><a class="ae lb" href="https://medium.com/tensorflow/standardizing-on-keras-guidance-on-high-level-apis-in-tensorflow-2-0-bad2b04c819a" rel="noopener">Keras 标准化:TensorFlow 2.0 中的高级 API 指南</a></li><li id="c1e7" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la oy li lj lk bi translated"><a class="ae lb" href="https://medium.com/tensorflow/whats-coming-in-tensorflow-2-0-d3663832e9b8" rel="noopener">tensor flow 2.0 中的新功能</a></li><li id="7c90" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la oy li lj lk bi translated"><a class="ae lb" href="https://www.tensorflow.org/tutorials/keras/basic_classification" rel="noopener ugc nofollow" target="_blank">训练你的第一个神经网络:基本分类</a></li></ol></div><div class="ab cl om on hu oo" role="separator"><span class="op bw bk oq or os"/><span class="op bw bk oq or os"/><span class="op bw bk oq or"/></div><div class="ij ik il im in"><p id="b952" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="np">本帖原帖发布于 2019 年 6 月 13 日</em><a class="ae lb" href="https://medium.com/@cran2367/install-and-setup-tensorflow-2-0-2c4914b9a265?postPublishedType=repub" rel="noopener"><em class="np">medium.com</em></a><em class="np">。</em></p></div></div>    
</body>
</html>