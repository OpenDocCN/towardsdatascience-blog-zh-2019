<html>
<head>
<title>Let’s calculate Z-scores for Airbnb prices in New York</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们计算一下纽约 Airbnb 价格的 Z 值</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/lets-calculate-z-scores-for-airbnb-prices-in-new-york-8da9964c49b0?source=collection_archive---------22-----------------------#2019-11-09">https://towardsdatascience.com/lets-calculate-z-scores-for-airbnb-prices-in-new-york-8da9964c49b0?source=collection_archive---------22-----------------------#2019-11-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c7e8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过编码示例了解 z 分数</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4c1a6e388908e6f6e827da084a1606cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c1bK0ywT7VP5BE5CTZ_Wow.png"/></div></div></figure><p id="c7be" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">z 分数，也叫<em class="lq">标准分数，根据<a class="ae lr" href="https://en.wikipedia.org/wiki/Standard_score" rel="noopener ugc nofollow" target="_blank">维基百科</a>的说法是</em>。</p><blockquote class="ls lt lu"><p id="e550" class="ku kv lq kw b kx ky ju kz la lb jx lc lv le lf lg lw li lj lk lx lm ln lo lp im bi translated">在<a class="ae lr" href="https://en.wikipedia.org/wiki/Statistics" rel="noopener ugc nofollow" target="_blank">统计</a>中，<strong class="kw iu">标准分数</strong>是<a class="ae lr" href="https://en.wikipedia.org/wiki/Standard_deviation" rel="noopener ugc nofollow" target="_blank">标准差</a>的有符号分数，通过该分数，观察值或<a class="ae lr" href="https://en.wikipedia.org/wiki/Data" rel="noopener ugc nofollow" target="_blank">数据</a>点的值高于被观察或测量的<a class="ae lr" href="https://en.wikipedia.org/wiki/Mean" rel="noopener ugc nofollow" target="_blank">平均值</a>。</p></blockquote><p id="b717" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">翻译:</strong>衡量一个值与其总体平均值的差距。</p><p id="3b90" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们来看看公式。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/ca566d42e52f63974993f867a863e79e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*-g9nf63JBH8sLzUmWZNP5A.png"/></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk"><strong class="bd md">μ = mean, σ = std, x = value</strong></figcaption></figure><p id="1d3f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这很简单。从被评估的值中减去数据集的平均值，然后除以标准差。</p><p id="e5cb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们来玩一些数据。</p><p id="68fa" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">首先，从<a class="ae lr" href="https://www.kaggle.com/dgomonov/new-york-city-airbnb-open-data" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>下载数据集，并将其保存在与您的 jupyter 笔记本相同的目录中(您的文件名可能与我的不同)。然后对前几条记录进行采样，看看数据看起来如何。</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="fcda" class="mj mk it mf b gy ml mm l mn mo">import pandas as pd<br/>ny = pd.read_csv('airbnb-new-york/AB_NYC_2019.csv')<br/>ny.head(3)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/cae0bcc89d71d99c4351b18d331956b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UxOUMWVnsokPlHmSFKpN0Q.png"/></div></div></figure><p id="ff3b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Scipy 有一个很好的方法来计算数据集中每个值的 z 值。见下文。</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="7a59" class="mj mk it mf b gy ml mm l mn mo">from scipy import stats<br/>stats.zscore(ny.price)</span><span id="030b" class="mj mk it mf b gy mq mm l mn mo">#=&gt; array([-0.01549307,  0.30097355, -0.01132904, ..., -0.15707024,<br/>       -0.4069123 , -0.2611711 ])</span></pre><p id="3c2e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是我们将编写自己的函数，因为我们只想检查几个值。</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="9316" class="mj mk it mf b gy ml mm l mn mo">import numpy as np</span><span id="a974" class="mj mk it mf b gy mq mm l mn mo">mean = np.mean(ny.price)<br/>std = np.std(ny.price)</span><span id="59be" class="mj mk it mf b gy mq mm l mn mo">def z_score(value, mean, std):<br/>    return (value - mean) / std</span></pre><p id="02e0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在从数据集中随机选择 5 个价格。</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="f3e5" class="mj mk it mf b gy ml mm l mn mo">import random</span><span id="9509" class="mj mk it mf b gy mq mm l mn mo">values = []</span><span id="e9ac" class="mj mk it mf b gy mq mm l mn mo"># randomly select 5 values from price<br/>for i in list(range(0,5)):<br/>    value = random.choice(ny.price)<br/>    values.append(value)</span><span id="309b" class="mj mk it mf b gy mq mm l mn mo">print(values)<br/>#=&gt; [78, 169, 53, 375, 80]</span></pre><p id="ace8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">并计算这些值的 z 分数。</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="f296" class="mj mk it mf b gy ml mm l mn mo">for val in values:<br/>    z = z_score(val, mean, std)<br/>    print(z)</span><span id="8b6f" class="mj mk it mf b gy mq mm l mn mo">#=&gt; -0.3111395124662796<br/>#=&gt; 0.06778761869937604<br/>#=&gt; -0.41524037267662456<br/>#=&gt; 0.9255787068326184<br/>#=&gt; -0.302811443649452</span></pre><p id="688d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">嘣。这到底意味着什么？</p><p id="40b5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第一个示例比平均值低 0.31 个标准偏差。<br/>第二个是平均值以上 0.07 个标准差。<br/>3 号比平均值低 0.42 个标准差。你明白了。</p><p id="fb63" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所有的例子都在平均值的 1 个标准偏差内。这在任何服从正态分布的人群中都不是闻所未闻的(其中约 68%的值落在平均值的 1 个标准差之内)。</p><p id="e783" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是什么是正态分布呢？它有时被称为钟形曲线(尽管其他分布也遵循钟形)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/526a1fc22e8740909eb1b9c4b1c4414a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g9lm6iOktvt-PZGhLctXZg.png"/></div></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk">It’s the red line here. Thank you <a class="ae lr" href="https://en.wikipedia.org/wiki/Normal_distribution" rel="noopener ugc nofollow" target="_blank">wikipedia</a>.</figcaption></figure><p id="8c0a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">是上面的红线。在自然科学和社会科学中，人口中的许多值都遵循这种分布。例如，大多数人的身高接近所有人的平均身高。而且很少有人超级高或者超级矮。这在直觉上是有道理的。</p><p id="d895" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但并非一切都遵循正态分布。我怀疑我们的 Airbnb 价格。让我们建立一个直方图来找出答案。</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="39e9" class="mj mk it mf b gy ml mm l mn mo">import matplotlib.pyplot as plt<br/>%matplotlib inline</span><span id="9403" class="mj mk it mf b gy mq mm l mn mo">plt.rcParams.update({'figure.figsize':(7,5), 'figure.dpi':100})</span><span id="656c" class="mj mk it mf b gy mq mm l mn mo">plt.hist(ny.price, bins=100, range=(0, 1000))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4c1a6e388908e6f6e827da084a1606cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c1bK0ywT7VP5BE5CTZ_Wow.png"/></div></div></figure><p id="d7c2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">差远了。</p><p id="8a52" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">出于好奇，我们的均值和标准差是多少。</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="bd1b" class="mj mk it mf b gy ml mm l mn mo">print(mean)<br/>print(std)</span><span id="bca7" class="mj mk it mf b gy mq mm l mn mo">#=&gt; 152.7206871868289<br/>#=&gt; 240.15171391941718</span></pre><p id="9db5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，虽然平均值是 153 美元，但标准差却高达 240 美元。这就是说价格变化很大。这就是为什么$78 的值和$375 的值都可以在平均值的 1 个标准偏差之内。</p><p id="d548" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将我们的分布与标准偏差为 1 的正态分布进行对比！</p><p id="db53" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为什么所有这些都很重要？在一个沉迷于快速统计数据和平均值的世界里。重要的是要记住，人口的平均值只是故事的一小部分。</p></div></div>    
</body>
</html>