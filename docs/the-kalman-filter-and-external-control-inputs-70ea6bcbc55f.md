# å¡å°”æ›¼æ»¤æ³¢å™¨å’Œå¤–éƒ¨æ§åˆ¶è¾“å…¥

> åŸæ–‡ï¼š<https://towardsdatascience.com/the-kalman-filter-and-external-control-inputs-70ea6bcbc55f?source=collection_archive---------14----------------------->

## ä½¿ç”¨çŠ¶æ€åç§»å¤„ç†å¤–éƒ¨æ§åˆ¶è¾“å…¥

![](img/10356332ae3931399de5989769378934.png)

Block diagram of a control system [by Wikimedia user Orzetto](https://en.wikipedia.org/wiki/Control_theory#/media/File:Feedback_loop_with_descriptions.svg) ([CC BY-SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/)). This article features a â€œcontrollerâ€ to the system, though not one designed to match a reference value.

åœ¨æœ¬æ–‡ä¸­ï¼Œæ‚¨å°†

*   ä½¿ç”¨`statsmodels` Python æ¨¡å—å®ç°å¸¦æœ‰å¤–éƒ¨æ§åˆ¶è¾“å…¥çš„å¡å°”æ›¼æ»¤æ³¢å™¨æ¨¡å‹ï¼Œ
*   ä½¿ç”¨æœ€å¤§ä¼¼ç„¶ä¼°è®¡å¡å°”æ›¼æ»¤æ³¢å™¨æ¨¡å‹çŸ©é˜µä¸­çš„æœªçŸ¥å‚æ•°ï¼Œ
*   åœ¨[è¿åŠ¨è¡¨ç°çš„ä½“èƒ½-ç–²åŠ³æ¨¡å‹](/modeling-cumulative-impact-part-i-f7ef490ed5e3)çš„èƒŒæ™¯ä¸‹ï¼Œäº†è§£å¦‚ä½•é€šè¿‡å¡å°”æ›¼æ»¤æ³¢å™¨å¯¹ç´¯ç§¯å½±å“è¿›è¡Œå»ºæ¨¡ã€‚

# å…·æœ‰æ§åˆ¶è¾“å…¥çš„å¡å°”æ›¼æ»¤æ³¢å™¨

ä»¥ä¸‹æ˜¯å…·æœ‰å¤–éƒ¨â€œæ§åˆ¶â€è¾“å…¥ **B u** _t çš„å¡å°”æ›¼æ»¤æ³¢å™¨æ¨¡å‹çš„è¯´æ˜:

![](img/e46fe564b4fb4f2a3c6db33044e40c55.png)

å…¶ä¸­**q**_*t*âˆ¾n(**0**ã€ğ)å’Œ**r**_*t*âˆ¾n(**0**ã€ğ‘).æ¨¡å‹çŸ©é˜µ **A *ã€* B** ã€ **H *ã€* Q** å’Œ **R** å¯èƒ½åŒ…å«æœªçŸ¥å‚æ•°ï¼Œå¹¶ä¸”é€šå¸¸è¢«å…è®¸éšæ—¶é—´å˜åŒ–ã€‚å¤–éƒ¨â€œæ§åˆ¶å‘é‡â€è¾“å…¥ï¼Œ **u** _ *t* ï¼Œå¿…é¡»çŸ¥é“åˆ°ç›®å‰ä¸ºæ­¢çš„æ‰€æœ‰æ—¶é—´ç‚¹ï¼Œå¦‚æœä»»åŠ¡éœ€è¦é¢„æµ‹æœªæ¥çš„å¤šä¸ªæ—¶é—´æ­¥ï¼Œä¹Ÿå¿…é¡»çŸ¥é“ã€‚

åœ¨è®¸å¤šé¢„æµ‹ç¯å¢ƒä¸­ï¼Œå¤–éƒ¨æ§åˆ¶é¡¹æ˜¯ä¸ä½¿ç”¨çš„ã€‚æ ‡å‡†çš„æ—¶é—´åºåˆ—æ¨¡å‹ï¼Œå…¶ä¸­å†…éƒ¨ç³»ç»ŸåŠ¨åŠ›å­¦æ˜¯å”¯ä¸€å‘æŒ¥ä½œç”¨çš„åŠ›é‡(å¦‚ ARIMA)ï¼Œä¸éœ€è¦å®ƒä»¬ã€‚å› æ­¤ï¼Œåœ¨`statsmodels`ä¸­ç¼ºä¹æ˜ç¡®çš„æ§åˆ¶è§„èŒƒæœºåˆ¶å¹¶ä¸å¥‡æ€ªã€‚å¹¸è¿çš„æ˜¯ï¼Œ`statsmodels`ç¡®å®æä¾›äº†ä¸€ä¸ªçŠ¶æ€æˆªå–çš„æ¥å£ï¼Œå®ƒè¶³ä»¥åŒ…å«å¤–éƒ¨æ§åˆ¶è¾“å…¥ã€‚

# å°†æ§åˆ¶è¾“å…¥ç”¨äº stats æ¨¡å‹

èŠ±ç‚¹æ—¶é—´ç†Ÿæ‚‰ä¸€ä¸‹`statsmodels` [çŠ¶æ€ç©ºé—´è¡¨ç¤ºæ³•](https://www.statsmodels.org/dev/generated/statsmodels.tsa.statespace.representation.Representation.html)ï¼Œå®ƒå¯¹çŠ¶æ€æ–¹ç¨‹ä½¿ç”¨äº†ä¸æœ¬æ–‡å¼€å¤´ç•¥æœ‰ä¸åŒçš„ç¬¦å·:

![](img/75b4d328a4a2358f3411d74d1c781fe4.png)

æœ¬è§„èŒƒä¸­æ²¡æœ‰çš„â€œ**state _ intercept**â€***c***_*t*åœ¨`statsmodels`ä¸­é»˜è®¤ä¸ºé›¶ã€‚æè¿°ä¸ºâ€œ*c:state _ intercept(k _ States x nobs)*â€ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·å¯ä»¥åœ¨æ¯ä¸ªæ—¶é—´ç‚¹è‡ªç”±æŒ‡å®šä¸åŒçš„çŠ¶æ€æˆªè·å€¼ã€‚(å¯¹äºæ‰€æœ‰çš„`statsmodels`å¡å°”æ›¼æ»¤æ³¢å™¨æ¨¡å‹çŸ©é˜µéƒ½æ˜¯å¦‚æ­¤ã€‚)ä½†æ˜¯è®¾ç½®

![](img/8299e2bb1a16ddf8a02625bfc1d2d99b.png)

å¯¹äº *t* =1â€¦ *Tï¼Œ*ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå¸¦æœ‰æ§åˆ¶è¾“å…¥çš„å¡å°”æ›¼æ»¤æ³¢å™¨æ¨¡å‹ã€‚

# ç¤ºä¾‹:çŠ¶æ€ç©ºé—´å½¢å¼çš„ä½“èƒ½-ç–²åŠ³æ¨¡å‹

[*å»ºæ¨¡ç´¯ç§¯å†²å‡»ç¬¬ä¸€éƒ¨åˆ†*](/modeling-cumulative-impact-part-i-f7ef490ed5e3) ä¸­çš„ä½“èƒ½-ç–²åŠ³æ¨¡å‹ä¸º:

![](img/6b8e2971301f402e1c4d85f50187aad5.png)

å…¶ä¸­ *p_t* ä¸º(è¿åŠ¨)è¡¨ç°ï¼Œ *w_t* ä¸ºæ—¶é—´ *t* çš„è®­ç»ƒâ€œå‰‚é‡â€(æ—¶é—´åŠ æƒè®­ç»ƒå¼ºåº¦)ã€‚åœ¨æˆ‘ä»¥å‰æ¢ç´¢è¯¥æ¨¡å‹çš„æ–‡ç« ä¸­ï¼Œè®­ç»ƒå†å²ä¸å…¶ä»–å‡½æ•°çš„å·ç§¯æ˜¯è¡¨ç¤ºè®­ç»ƒè¯¾ç¨‹ç´¯ç§¯å½±å“çš„æœºåˆ¶ã€‚æœ¬æ–‡å°†é€šè¿‡ä¿æŒä¸€ä¸ª*ç³»ç»ŸçŠ¶æ€*æ¥åšä¸€äº›ä¸åŒçš„äº‹æƒ…ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¿…é¡»å°†ä½“èƒ½-ç–²åŠ³æ¨¡å‹ç½®äºçŠ¶æ€ç©ºé—´å½¢å¼ï¼Œä»¥è®­ç»ƒå‰‚é‡ä½œä¸ºå¤–éƒ¨æ§åˆ¶è¾“å…¥ã€‚

åœ¨ä¸Šé¢çš„ç­‰å¼ä¸­ï¼Œç¬¬ä¸€ä¸ªå·ç§¯å’Œä»£è¡¨è¿åŠ¨å¥åº·ï¼Œæˆ‘ç°åœ¨ç§°ä¹‹ä¸º *h_t* ã€‚ä»¥ä¸‹æ˜¯æ»åä¸€ä¸ªæ—¶é—´æ­¥é•¿çš„ç»“æœ:

![](img/740e3518b49ca76afd2ef2ebf2cc5196.png)

åˆ†ç¦»å®šä¹‰ *h_t* çš„å·ç§¯å’Œä¸­çš„æœ€åä¸€é¡¹ï¼Œæˆ‘ä»¬å¾—åˆ°é€’å½’:

![](img/412fe012d5b58dbd737cf4b61b591645.png)

å¯¹äºç–²åŠ³çš„å·ç§¯å’Œï¼Œè¯¥è®ºè¯ä»¥ç›¸åŒçš„æ–¹å¼è¿›è¡Œï¼Œæ­¤åç§°ä¸º *g_t* ï¼Œå¹¶ä¸”å¥åº·å’Œç–²åŠ³çš„é€’å½’å…³ç³»å¯ä»¥ç”¨ä¸‹é¢çš„â€œçŠ¶æ€ç©ºé—´å½¢å¼â€è¡¨ç¤º:

![](img/cebdb83f5561995851db8a9541cb1523.png)

æˆ‘ä»¬å¯ä»¥ç»§ç»­ä½¿ç”¨çŸ©é˜µæ¥è¡¨è¾¾æ¨¡å‹çš„ç¬¬äºŒä¸ªâ€œæµ‹é‡â€é˜¶æ®µ:

![](img/973050eeec87f5ffc559fb0b281eb979.png)

å…¶ä¸­ *r_t* ~ N(0ï¼ŒÏƒ)ã€‚æ§åˆ¶è¾“å…¥æ»åä¸€ä¸ªæ—¶é—´å‘¨æœŸï¼Œè¿™æ˜¯æˆ‘ä»¬å¿…é¡»è€ƒè™‘çš„ï¼Œä½†é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå¸¦æœ‰å¤–æºæ§åˆ¶è¾“å…¥çš„å¥åº·ç–²åŠ³æ¨¡å‹çš„å…¸å‹çŠ¶æ€ç©ºé—´å…¬å¼ã€‚ç»“åˆç»™å®šå¥åº·å’Œç–²åŠ³çš„å½“å‰çŠ¶æ€çš„æ€§èƒ½æµ‹é‡æ¨¡å‹ï¼Œå¡å°”æ›¼æ»¤æ³¢å™¨å·¥å…·åŒ…(çŠ¶æ€ä¼°è®¡ã€ç®€å•æ’è¡¥å’Œå¯èƒ½æ€§è¯„ä¼°)ç”±æˆ‘ä»¬æ”¯é…ã€‚

æœ¬èŠ‚å°†ä½¿ç”¨å¯ä» [*å»ºæ¨¡ç´¯ç§¯å½±å“ç¬¬äºŒéƒ¨åˆ†*](/modeling-cumulative-impact-part-ii-2bf65db3bb98) ä¸­ä½¿ç”¨çš„ [R è¦ç‚¹](https://gist.github.com/baogorek/6d682e42079005b3bde951e98ebae89e)ä¸­å¤åˆ¶çš„æ¨¡æ‹Ÿæ•°æ®ï¼Œä¹Ÿå¯ä½œä¸º [csv æ–‡ä»¶](https://drive.google.com/open?id=1kk40wiVYzPXOkrPffU55Vzy-LLTrgAVh)æä¾›ç»™è¯»è€…ã€‚è¦è¿è¡Œä»¥ä¸‹ä»£ç ï¼Œè¯·æ›´æ”¹ä»¥ä¸‹ Python ä»£ç å—ä¸­çš„æ–‡ä»¶è·¯å¾„:

```
import numpy as np
import pandas as pd
import matplotlib.pyplot as pltimport statsmodels as sm
from statsmodels.tsa.statespace.mlemodel import MLEModeltrain_df = pd.read_csv("<your location>/train_df.csv")
train_df.head()
```

è¿™ä¸ªå—åŠ è½½æ‰€éœ€çš„ä¾èµ–é¡¹ï¼Œå¹¶æ‰“å°å‡ è¡Œè¾“å…¥æ•°æ®é›†`train_df`:

```
day  day_of_week    period   w        perf
0    1            0  build-up  10  489.197363
1    2            1  build-up  40  500.545312
2    3            2  build-up  42  479.886648
3    4            3  build-up  31  474.226865
4    5            4  build-up  46  459.322820
```

ä¸ºäº†åœ¨`statsmodels`ä¸­åˆ›å»ºä¸€ä¸ªå¡å°”æ›¼æ»¤æ³¢å™¨æ¨¡å‹ï¼Œæˆ‘ä»¬å¿…é¡»æ‰©å±•`MLEModel`åŸºç±»(ä»`[mlemodel](https://www.statsmodels.org/dev/_modules/statsmodels/tsa/statespace/mlemodel.html)`æ¨¡å—[æ‰©å±•åˆ°](https://www.statsmodels.org/dev/_modules/statsmodels/tsa/statespace/mlemodel.html))ã€‚

```
class FitnessFatigue(MLEModel): start_params = [500, .1, .3, 60, 15, 10]
    param_names = ['p_0', 'k_g', 'k_h', 'tau_g', 'tau_h', 'sigma'] def __init__(self, p, w_lag1):
        super().__init__(endog=p, k_states=2, exog=w_lag1)
        self.initialize_approximate_diffuse() def update(self, params, **kwargs):
        params = super().update(params, **kwargs) self['obs_intercept', 0, 0] = params[0]
        # state space model ------
        self['transition'] = (
            np.array([[np.exp(-1.0 / params[3]), 0],
                      [0, np.exp(-1.0 / params[4])]])
        )
        self['state_intercept'] = (
            np.array([[np.exp(-1.0 / params[3])],
                     [np.exp(-1.0 / params[4])]])
            * self.exog
        )
        # measurement model
        self['design', 0, 0] = params[1]
        self['design', 0, 1] = params[2]
        self['obs_cov', 0, 0] = params[5] ** 2
```

å…³äºä¸Šé¢çš„ç±»ï¼Œéœ€è¦æ³¨æ„ä¸€äº›äº‹æƒ…:

*   æˆ‘ä»¬å¿…é¡»åœ¨`start_params`ä¸­è¾“å…¥èµ·å§‹å€¼
*   æˆ‘ä»¬å¿…é¡»æŒ‡å®šä¸€ä¸ªæ¥å—æ•°æ®çš„`__init__`æ–¹æ³•ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒå¿…é¡»æ¥å—æ€§èƒ½æµ‹é‡å’Œè®­ç»ƒ(å³æ§åˆ¶)æ•°æ®ã€‚
*   è¯·æ³¨æ„`__init__`å†…æ»åè®­ç»ƒå˜é‡çš„åˆ›å»ºã€‚ä½“èƒ½-ç–²åŠ³æ¨¡å‹ç‰¹åˆ«æŒ‡å®šäº†åœ¨è®­ç»ƒäº‹ä»¶å½±å“*ä½“èƒ½*æˆ–*ç–²åŠ³*ä¹‹å‰çš„ä¸€æ®µæ—¶é—´é—´éš”ã€‚
*   æˆ‘ä»¬èƒ½å¤Ÿé¿å…åœ¨`[statsmodels](https://www.statsmodels.org/dev/generated/statsmodels.tsa.statespace.representation.Representation.html)` [è¡¨ç¤º](https://www.statsmodels.org/dev/generated/statsmodels.tsa.statespace.representation.Representation.html)ä¸­æŒ‡å®šé¢„ä¹˜çŠ¶æ€è¯¯å·®é¡¹çš„é€‰æ‹©çŸ©é˜µã€‚è¿™é»˜è®¤ä¸ºä¸€ä¸ªé›¶çŸ©é˜µï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé‡åˆ°éº»çƒ¦ï¼Œå› ä¸ºæ²¡æœ‰è®¾ç½®ï¼Œä½†å¥åº·ç–²åŠ³æ¨¡å‹ï¼Œå½“ç›´æ¥è½¬æ¢ä¸ºçŠ¶æ€ç©ºé—´å½¢å¼æ—¶ï¼Œæ²¡æœ‰çŠ¶æ€è¯¯å·®é¡¹ã€‚

æ¥ä¸‹æ¥ï¼Œç”¨æ•°æ®å®ä¾‹åŒ–å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨æœ€å¤§ä¼¼ç„¶ä¼°è®¡æœªçŸ¥å‚æ•°ã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ç¡®å®éœ€è¦å»¶è¿Ÿè®­ç»ƒè¾“å…¥ï¼Œä»¥ä¾¿åŒ¹é…æ¨¡å‹çš„è§„èŒƒ(åœ¨æ–‡ç« å‘è¡¨æœŸé—´ï¼Œæˆ‘å·²ç»åå¤è®¨è®ºè¿‡è¿™ä¸ªé—®é¢˜)ã€‚

```
train_df['lag_w'] = train_df['w'].shift(1)
train_df = train_df.iloc[1:]ffm_kf = FitnessFatigue(train_df.perf, train_df.lag_w)mle_results = ffm_kf.fit(method = 'bfgs', maxiter = 1000)
mle_results.summary()
```

æœ€åä¸€ä¸ªå‘½ä»¤äº§ç”Ÿä»¥ä¸‹è¾“å‡º(é—´è·å·²è¢«ä¿®æ”¹):

![](img/894d6ac6bcd9308ac9ec62a2a021caba.png)

è¾“å‡ºæ˜¾ç¤ºå¡å°”æ›¼æ»¤æ³¢å™¨åœ¨æ¢å¤ä»¿çœŸä¸­ä½¿ç”¨çš„å‚æ•°å€¼æ–¹é¢åšå¾—å¾ˆå¥½ã€‚åœ¨ [*ç´¯ç§¯å½±å“å»ºæ¨¡ç¬¬ä¸‰éƒ¨åˆ†*](/modeling-cumulative-impact-part-iii-1b216273b499) ä¸­éœ€è¦è‡ªå®šä¹‰éçº¿æ€§è¿‘ä¼¼çš„æ ‡å‡†è¯¯å·®ï¼Œç°åœ¨å·²ç»â€œå¼€ç®±å³ç”¨â€å¦ä¸€æ–¹é¢ï¼Œæœ€å¤§ä¼¼ç„¶æ³•åœ¨è¿™ç§æƒ…å†µä¸‹ç¡®å®éœ€è¦ä¸€äº›è°ƒæ•´ï¼›å¢åŠ æœ€å°è¿­ä»£æ¬¡æ•°å¹¶é€‰æ‹© [BFGS æ–¹æ³•](https://en.wikipedia.org/wiki/Broyden%E2%80%93Fletcher%E2%80%93Goldfarb%E2%80%93Shanno_algorithm)å¾—åˆ°ç¨³å®šçš„æ‹Ÿåˆã€‚

é¼“åŠ±è¯»è€…é‡å¤ä¸Šé¢çš„ç»ƒä¹ ï¼Œç”¨å·²çŸ¥çš„åˆå§‹åŒ–ä»£æ›¿â€œè¿‘ä¼¼æ¼«å°„â€åˆå§‹åŒ–(ç›®å‰å·²è¢«æ³¨é‡Šæ‰)ã€‚ä¸å¡å°”æ›¼æ»¤æ³¢å™¨å’Œæœ€å¤§ä¼¼ç„¶æ³•ä¸åŒï¼Œä½¿ç”¨å·²çŸ¥åˆå§‹åŒ–çš„ç»“æœæœ‰äº›ä¸åŒï¼Œå°¤å…¶æ˜¯æ ‡å‡†è¯¯å·®ã€‚å½“ä½¿ç”¨å·²çŸ¥çš„åˆå§‹åŒ–æ—¶ï¼Œæ¥è‡ªå¡å°”æ›¼æ»¤æ³¢å™¨çš„æ ‡å‡†è¯¯å·®ä¼°è®¡ç±»ä¼¼äºä½¿ç”¨éçº¿æ€§è¿‘ä¼¼çš„ä¼°è®¡ã€‚å¯¹äºè¿‘ä¼¼æ¼«å°„åˆå§‹åŒ–ï¼Œå¯¹äºæŸäº›å‚æ•°(å°¤å…¶æ˜¯æŒ‡æ•°ä¸­çš„â€œæ—¶é—´å¸¸æ•°â€)æ¥è¯´ï¼Œå®ƒä»¬è¦å¤§å¾—å¤šã€‚

å¡å°”æ›¼æ»¤æ³¢å™¨ä½¿æˆ‘ä»¬èƒ½å¤Ÿè®¿é—®æ»¤æ³¢çŠ¶æ€ä¼°è®¡å’Œå¹³æ»‘çŠ¶æ€ä¼°è®¡ï¼Œå‰è€…ä»…ä½¿ç”¨ç‰¹å®šæ—¶é—´ç‚¹ä¹‹å‰çš„å¯ç”¨æ•°æ®ï¼Œåè€…å°†æ‰€æœ‰å¯ç”¨æ•°æ®åˆå¹¶åˆ°æ¯ä¸ªæ—¶é—´ç‚¹çš„çŠ¶æ€ä¼°è®¡ä¸­ã€‚ä¸‹é¢æˆ‘ä»¬å°†å¯è§†åŒ–è¿‡æ»¤åçš„çŠ¶æ€ä¼°è®¡ï¼Œè¿™è‡ªç„¶ä¼šç»å†ä¸€ä¸ªç²—ç•¥çš„å¼€å§‹:

```
fig = plt.figure(figsize = (12, 8))
plt.rcParams.update({'font.size': 18})plt.plot(mle_results.filtered_state[0, :], color='green',
         label='fitness')
plt.plot(mle_results.filtered_state[1, :], color='red',
         label='fatigue')
plt.title("Filtered estimates of state vector (Fitness and " +
          "Fatigue) over time")
plt.xlabel('Time')
plt.ylabel('Filtered state estimate')
plt.legend()
plt.show()
```

![](img/6fbca089c59feb783862d77657b4f13d.png)

å‡è®¾çœŸå®çš„é€‚åº”çŠ¶æ€è¢«åˆå§‹åŒ–ä¸º 0ï¼Œå¹¶é€æ¸å˜é«˜ï¼Œé‚£ä¹ˆæœ€åˆçš„å‡ ä¸ªè¿‡æ»¤çŠ¶æ€ä¼°è®¡å€¼ä¼šåç¦»å¾ˆå¤šï¼Œè¿™è§£é‡Šäº†ä¸ºä»€ä¹ˆ`likelihood_burn`è¢«è®¾ç½®ä¸º 15ã€‚å°†å›¾å½¢ä»£ç ä¸­çš„`filtered_state`æ›¿æ¢ä¸º`smoothed_state`æ˜¾ç¤ºçš„å›¾ç‰‡ä¸ [*å»ºæ¨¡ç´¯ç§¯å½±å“ç¬¬ä¸€éƒ¨åˆ†*](/modeling-cumulative-impact-part-i-f7ef490ed5e3) ä¸­çš„å›¾ç‰‡éå¸¸ç›¸ä¼¼ã€‚

# è®¨è®º

åœ¨å†™è¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œæˆ‘è®¤ä¸ºè·å¾—å¸¦æ§åˆ¶è¾“å…¥çš„å¡å°”æ›¼æ»¤æ³¢å™¨çš„å”¯ä¸€æ–¹æ³•æ˜¯è´­ä¹° [MATLAB](https://www.mathworks.com/help/control/ug/kalman-filtering.html#responsive_offcanvas) æˆ– [SAS/ETS](http://support.sas.com/documentation/cdl/en/etsug/67525/HTML/default/viewer.htm#etsug_ssm_details01.htm) ã€‚è™½ç„¶`statsmodels`å¯ä»¥ä½¿è§„èŒƒæ›´åŠ ç®€å•ï¼Œä½†ä½¿ç”¨æ—¶å˜çŠ¶æ€æˆªè·ä»ç„¶å¯ä»¥è½»æ¾åœ°å°†æ§åˆ¶è¾“å…¥æ·»åŠ åˆ°å¡å°”æ›¼æ»¤æ³¢å™¨ä¾‹ç¨‹ä¸­ã€‚

ç”¨äºå®šä¹‰æ¨¡å‹çš„å­ç±»æ´¾ç”Ÿï¼Œå°±åƒåœ¨`statsmodels`ä¸­ä½¿ç”¨çš„ï¼Œæ˜¯åœ†æ»‘çš„ï¼Œä½†æ˜¯ä½¿å¾—è°ƒè¯•ä¸é‚£ä¹ˆé€æ˜ã€‚(æœ‰æ—¶è¿™äº›ä¾‹å­ä¸èµ·ä½œç”¨ã€‚)è®°ä½ç»“æœå¯¹è±¡åŒ…å«å®ƒä»¬çš„æ¨¡å‹çŸ©é˜µï¼›å°†å®ƒä»¬æ‰“å°å‡ºæ¥æ˜¯è°ƒè¯•çš„å¥½æ–¹æ³•ï¼ä¸è¦å¿˜è®°`statsmodels`ä¸­ä¹˜ä»¥çŠ¶æ€è¯¯å·®çš„â€œé€‰æ‹©çŸ©é˜µâ€â€”â€”å®ƒé»˜è®¤ä¸ºé›¶ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œä¸éœ€è¦å®ƒï¼Œå› ä¸ºé€‚åº”æ€§ç–²åŠ³æ¨¡å‹æ²¡æœ‰æŒ‡å®šçŠ¶æ€é”™è¯¯ï¼Œä½†å®ƒä¼šå¯¼è‡´ä»¤äººæ²®ä¸§çš„è°ƒè¯•åœºæ™¯ï¼Œå…¶ä¸­ä»£ç æ›´æ”¹ä¸ä¼šå½±å“è¾“å‡ºã€‚

å°½ç®¡ç”±äº`statsmodels`é»˜è®¤å€¼ï¼Œç¼ºå°‘çŠ¶æ€è¯¯å·®é¡¹ä½¿å¾—å½“å‰ä»»åŠ¡æ›´ç®€å•ï¼Œä½†æ˜¯æ·»åŠ çŠ¶æ€è¯¯å·®é¡¹çš„èƒ½åŠ›æ˜¯å¡å°”æ›¼æ»¤æ³¢å™¨ä¼˜äºåŸå§‹é€‚åº”æ€§-ç–²åŠ³æ¨¡å‹çš„ä¸€ä¸ªä¼˜ç‚¹ã€‚å¾ˆå®¹æ˜“æƒ³è±¡è®­ç»ƒä¹‹å¤–å½±å“æ½œä¼*ä½“èƒ½*å’Œ*ç–²åŠ³*çš„äº‹æƒ…ï¼ŒåŒ…æ‹¬ç¡çœ è´¨é‡å’Œè¥å…»ã€‚å°†çŠ¶æ€è¯¯å·®é¡¹æ·»åŠ åˆ°åŸå§‹çš„ä½“èƒ½-ç–²åŠ³æ¨¡å‹æ˜¯å¦ä¸€ä¸ªè¦æ¢ç´¢çš„å˜åŒ–ã€‚

ä¸ [*ä¸­çš„å¡å°”æ›¼æ»¤æ³¢å™¨å’Œ*](/the-kalman-filter-and-maximum-likelihood-9861666f6742) ä¸­çš„æœ€å¤§ä¼¼ç„¶ä¸åŒï¼Œâ€œè¿‘ä¼¼æ‰©æ•£â€åˆå§‹åŒ–å¯¼è‡´äº†ä¸çŠ¶æ€çš„å·²çŸ¥åˆå§‹åŒ–ä¸åŒçš„ç»“æœã€‚åœ¨é‚£ç¯‡æ–‡ç« ä¸­ï¼Œä¹Ÿè®¸å¹³ç¨³ ARMA(1ï¼Œ2)æ¨¡å‹å¤ªåƒå’çƒäº†ï¼Œåˆå§‹çŠ¶æ€çš„ä¸ç¡®å®šæ€§åªæœ‰åœ¨æ²¡æœ‰å‡å€¼*çš„éå¹³ç¨³æƒ…å†µä¸‹æ‰çœŸæ­£é‡è¦ã€‚ç„¶è€Œï¼Œè¿™è®©æˆ‘å¥½å¥‡å¦‚æœåœ¨`statsmodels`ä¸­å®ç°çš„è¯,â€œç²¾ç¡®æ‰©æ•£â€åˆå§‹åŒ–ä¼šæœ‰å¤šä¹ˆä¸åŒã€‚*

å¡å°”æ›¼æ»¤æ³¢å™¨æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æ—¶é—´åºåˆ—åˆ†æå’Œå»ºæ¨¡å·¥å…·ã€‚å®ƒä¸ä»…èƒ½å¤Ÿè®¡ç®—ç»å…¸æ—¶é—´åºåˆ—æ¨¡å‹çš„å›°éš¾å¯èƒ½æ€§ï¼Œè€Œä¸”èƒ½å¤Ÿå¤„ç†å…·æœ‰å¤–æºæ§åˆ¶è¾“å…¥çš„éå¹³ç¨³æ¨¡å‹ï¼Œç”šè‡³å¼•å¯¼ä¸‹ä¸€æ¶èˆªå¤©é£æœºé£å¾€æœˆçƒã€‚ä½œä¸ºæ•°æ®ç§‘å­¦å®¶ï¼Œæˆ‘ä»¬å¾ˆå¹¸è¿åœ¨`statsmodels`æœ‰ä¸€ä¸ªå¡å°”æ›¼æ»¤æ³¢å™¨çš„å…è´¹å¼€æºå®ç°ï¼Œå¯¹äºç»Ÿè®¡å’Œå·¥ç¨‹ç›®çš„éƒ½è¶³å¤Ÿçµæ´»ã€‚