<html>
<head>
<title>Run Amazon SageMaker Notebook locally with Docker container</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Docker 容器在本地运行 Amazon SageMaker 笔记本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/run-amazon-sagemaker-notebook-locally-with-docker-container-8dcc36d8524a?source=collection_archive---------12-----------------------#2019-08-19">https://towardsdatascience.com/run-amazon-sagemaker-notebook-locally-with-docker-container-8dcc36d8524a?source=collection_archive---------12-----------------------#2019-08-19</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><figure class="gm go jp jq jr js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj jo"><img src="../Images/5735a4d94055003adc8b9b3f24e6c2c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ts5iTa1L2nb81gUgT_jgXQ.jpeg"/></div></div><figcaption class="jz ka gk gi gj kb kc bd b be z dk">Photo by <a class="ae kd" href="https://unsplash.com/@aleksdorohovich?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Aleks Dorohovich</a> on <a class="ae kd" href="https://unsplash.com/search/photos/local-notebook?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6c27" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi lc translated"><span class="l ld le lf bm lg lh li lj lk di"> A </span> mazon SageMaker，AWS 的云机器学习平台，由 4 个主要产品组成，支持数据科学工作流程中的不同流程:</p><figure class="lm ln lo lp gu js gi gj paragraph-image"><div class="gi gj ll"><img src="../Images/89e9cf55042e88b69942293cd14204f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1164/format:webp/1*02b-LWLJxV0Lp8r-KksWyw.png"/></div><figcaption class="jz ka gk gi gj kb kc bd b be z dk">Source: <a class="ae kd" href="https://docs.aws.amazon.com/sagemaker/latest/dg/how-it-works-mlconcepts.html" rel="noopener ugc nofollow" target="_blank">https://docs.aws.amazon.com/sagemaker/latest/dg/how-it-works-mlconcepts.html</a></figcaption></figure><ol class=""><li id="03ad" class="lq lr ir kg b kh ki kl km kp ls kt lt kx lu lb lv lw lx ly bi translated"><strong class="kg is">真相</strong>:大规模按需数据标注服务的托管服务。<br/>(生成示例数据，用于监督算法)</li><li id="45bb" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb lv lw lx ly bi translated"><strong class="kg is">培训</strong>:培训和调整任何规模模型的托管服务。<br/>(训练一个模型)</li><li id="a7a3" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb lv lw lx ly bi translated"><strong class="kg is">推理</strong>:托管预建模型并对新数据运行推理的托管服务。<br/>(部署模型)</li><li id="91f9" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb lv lw lx ly bi translated">总而言之，<strong class="kg is">Notebook</strong>:AWS 托管的服务器，供数据科学家访问和管理上述 3 项功能以及许多其他数据科学任务。</li></ol><p id="5e39" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">虽然托管的<strong class="kg is">笔记本</strong>服务提供了一种非常方便的方式来获得与 Amazon SageMaker 一起工作的完整服务器，但在许多情况下，出于成本、访问便利性或“可定制性”的考虑，需要进行本地设置。</p><p id="8c62" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><strong class="kg is">在这篇文章中，我将详细介绍本地托管的笔记本 Docker 容器背后的动机，并描述已经复制的 Amazon SageMaker 笔记本实例的各种功能。</strong></p></div><div class="ab cl me mf hv mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ik il im in io"><p id="b86f" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><em class="ml">这篇帖子的目标读者是正在使用或计划使用亚马逊 SageMaker 的数据科学家和机器学习工程师。对 Amazon SageMaker 及其笔记本实例的基本了解加上 Docker 的知识将是有用的。</em></p></div><div class="ab cl me mf hv mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ik il im in io"><h1 id="d6a5" class="mm mn ir bd mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="4dee" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">对于忙碌的人，这里有一个快速总结:</p><ul class=""><li id="3134" class="lq lr ir kg b kh ki kl km kp ls kt lt kx lu lb np lw lx ly bi translated">托管的 SageMaker Notebook 实例预构建了许多重要功能，包括一套全面的工具和库、具有最新机器学习框架的多个内核、GPU 支持、Git 集成和许多真实世界的示例。</li><li id="c8b1" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated">尽管如此，它需要钱，要求所有数据都在线上传，需要互联网接入，特别是 AWS 控制台登录，并且很难定制。</li><li id="b67f" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated">为了克服这些缺点，我创建了一个 Docker 容器，它提供了一个类似的设置，可以在任何笔记本电脑/台式机上本地使用。</li><li id="5c36" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated">复制的功能包括完整的 Jupyter 笔记本和实验室服务器、多个内核、AWS &amp; SageMaker SDKs、AWS 和 Docker CLIs、Git 集成、Conda 和 SageMaker 示例选项卡。</li><li id="41bb" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated">AWS 托管的实例和本地容器并不相互排斥，应该一起使用来增强数据科学体验。</li></ul><p id="18c9" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">Docker 图片的完整源代码存放在 Github 上:<a class="ae kd" href="https://github.com/qtangs/sagemaker-notebook-container" rel="noopener ugc nofollow" target="_blank">https://github.com/qtangs/sagemaker-notebook-container</a></p><p id="f991" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">Docker 图片已经发布到 Docker Hub:<a class="ae kd" href="https://hub.docker.com/r/qtangs/sagemaker-notebook" rel="noopener ugc nofollow" target="_blank">https://hub.docker.com/r/qtangs/sagemaker-notebook</a></p></div><div class="ab cl me mf hv mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ik il im in io"><h1 id="f1c6" class="mm mn ir bd mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj bi translated">在这篇文章中，</h1><p id="0bdc" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">我将探索:</p><ul class=""><li id="12cb" class="lq lr ir kg b kh ki kl km kp ls kt lt kx lu lb np lw lx ly bi translated">为什么我们首先需要一个笔记本实例？</li><li id="72c1" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated">为什么我们需要本地笔记本容器？</li><li id="d5db" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated">复制了哪些功能？</li><li id="5024" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated">缺少哪些功能？</li><li id="a8ea" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated">如何开始使用容器？</li></ul></div><div class="ab cl me mf hv mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ik il im in io"><h1 id="8b23" class="mm mn ir bd mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj bi translated">为什么我们首先需要一个笔记本实例？</h1><p id="3ecd" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">在探索本地实例之前，让我们深入了解一下 Amazon SageMaker 笔记本实例提供的好处:</p><ul class=""><li id="e1bb" class="lq lr ir kg b kh ki kl km kp ls kt lt kx lu lb np lw lx ly bi translated"><strong class="kg is">完整的按需系统</strong>:对于一个不怎么处理基础设施的数据科学家来说，这是开始使用 Amazon SageMaker 最简单的方法。使用 AWS 控制台，只需点击几下鼠标，您就可以访问配备了最常用库和工具的综合系统。</li><li id="3828" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated"><strong class="kg is">多个机器学习内核</strong>:Notebook 实例提供了各种内置内核，包括标准的 Python 2 和 3，流行的框架如 TensorFlow、MXNet、PyTorch 和 Chainer，以及其他运行时如 R、PySpark。</li><li id="73b2" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated"><strong class="kg is">适用于不同工作负载的多种机器规模</strong>:您可以选择最基本的多用途实例类型，如 t2、t3 或 m4、m5、计算优化型(r4、r5)以及强大的基于 GPU 的类型(p2、p3)。</li><li id="7709" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated"><strong class="kg is">使用 GPU 机器的弹性推理</strong>:虽然使用 p2，p3 产生 GPU 驱动的性能提升，但是它们很贵。相反，您可以附加一个额外的弹性推理实例(eia1 类型)来使用 GPU 训练和测试您的模型，其成本只是 p2、p3 的一小部分。</li><li id="7dc4" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated"><strong class="kg is">安全性</strong>:默认情况下，笔记本实例是安全的，您需要登录 AWS 控制台才能访问它。</li><li id="9fee" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated"><strong class="kg is"> Git 集成</strong>:您可以将 Notebook 实例与 Git 存储库(由 AWS CodeCommit 或 Github 或任何其他 Git repo 托管)相链接，以便对您的所有工作进行代码版本控制。如果你在团队中工作，这一点尤其重要。</li><li id="d5cd" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated"><strong class="kg is">大量示例</strong>:为了让你快速入门，AWS 在每个实例中都嵌入了大量示例，大多数来自 Github 上托管的<a class="ae kd" href="https://github.com/awslabs/amazon-sagemaker-examples" rel="noopener ugc nofollow" target="_blank"> AWS 示例</a>。只需很少的努力，您就可以将一个示例的完整源代码导入到您自己的实例中。</li></ul></div><div class="ab cl me mf hv mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ik il im in io"><h1 id="2094" class="mm mn ir bd mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj bi translated">为什么我们需要本地笔记本容器？</h1><p id="9f2f" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">尽管 AWS 托管的笔记本实例有很多好处，但是本地笔记本容器也有一些缺点。以下是本地笔记本容器的一些好处:</p><ul class=""><li id="91e0" class="lq lr ir kg b kh ki kl km kp ls kt lt kx lu lb np lw lx ly bi translated"><strong class="kg is">降低成本</strong>:运行一个 AWS 托管的实例要花钱；此外，还没有办法使用 spot 实例，它通常用于降低 EC2 实例的成本。运行本地容器不需要任何成本。</li><li id="cb41" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated"><strong class="kg is">易于使用本地数据</strong>:由于 SageMaker 笔记本实例运行在云中，它只能访问在线数据。任何本地数据都必须首先上传到 S3 或其他在线存储器。本地容器不需要这样，它可以使用简单的 Docker 卷挂载。</li><li id="954d" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated"><strong class="kg is">跳过 AWS 控制台</strong>:访问 AWS 托管的实例需要登录 AWS 控制台，有 12 个小时的超时，这意味着每天至少要登录一次。使用本地容器，您只需配置一次 AWS 凭证，之后就不再需要登录了(除非需要访问 S3 或其他 AWS 服务)。</li><li id="42e8" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated">离线访问:本地容器的另一个优点是，你可以在没有互联网连接的情况下随时访问它，尤其是当你想专注于数据清理、特征工程、数据分析等等的时候。不需要培训服务器的功能。</li><li id="dc5d" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated"><strong class="kg is">定制</strong>:虽然 AWS 提供的 Notebook 实例已经包含了许多通用的库和工具，但是可能仍然需要针对特定的用例进行进一步的定制。SageMaker 通过生命周期配置和直接终端访问实现了这一点。然而，这有时会感觉受到限制，尤其是需要 shell 脚本知识。对于本地容器来说，能够使用数据科学家团队需要的所有工具轻松配置 Docker 映像是一个优势。</li><li id="b8ea" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated"><strong class="kg is">灵活性</strong>:有了 Docker 映像，一组数据科学家可以决定将其集中托管在一个高容量服务器中，或者设置笔记本实例集群。选择是无限的。</li></ul><blockquote class="nq nr ns"><p id="99cb" class="ke kf ml kg b kh ki kj kk kl km kn ko nt kq kr ks nu ku kv kw nv ky kz la lb ik bi translated"><strong class="kg is">注意</strong>:AWS 托管的实例和本地容器<strong class="kg is">并不</strong>互斥。您可以同时使用两者，如果您正确设置了 Git 集成，它们可以同步，这样您就可以在日常工作的两种选择之间无缝切换。</p></blockquote></div><div class="ab cl me mf hv mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ik il im in io"><h1 id="d3c0" class="mm mn ir bd mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj bi translated">复制了哪些功能？</h1><p id="47e6" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">本地 Docker 容器的主要目的是尽可能多地维护 AWS 托管的实例的最重要的特性，同时增强本地运行能力的体验。以下是已复制的功能:</p><h2 id="9860" class="nw mn ir bd mo nx ny dn ms nz oa dp mw kp ob oc na kt od oe ne kx of og ni oh bi translated">Jupyter 笔记本和 Jupyter 实验室</h2><p id="35cd" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">这只是从 Jupyter 的<a class="ae kd" href="https://github.com/jupyter/docker-stacks" rel="noopener ugc nofollow" target="_blank">官方 Docker 图片</a>中截取的，做了一些修改以匹配 SageMaker 的笔记本设置，包括:</p><ul class=""><li id="3242" class="lq lr ir kg b kh ki kl km kp ls kt lt kx lu lb np lw lx ly bi translated">将默认用户命名为<code class="fe oi oj ok ol b"><em class="ml">ec2-user</em></code>，并允许无密码<code class="fe oi oj ok ol b"><em class="ml">sudo</em></code>访问。</li><li id="6214" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated">允许定制 Miniconda 和 conda 版本。</li><li id="8755" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated">跳过 Jupyter 集线器</li><li id="347a" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated">将笔记本目录设置为<code class="fe oi oj ok ol b"><em class="ml">/home/ec2-user/SageMaker</em></code></li></ul><h2 id="31ec" class="nw mn ir bd mo nx ny dn ms nz oa dp mw kp ob oc na kt od oe ne kx of og ni oh bi translated">多核</h2><p id="fd2f" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">使用 Conda environments ( <code class="fe oi oj ok ol b"><em class="ml">conda env create</em></code>)创建多个与 SageMaker 内核名称相匹配的内核。例如:</p><ul class=""><li id="151a" class="lq lr ir kg b kh ki kl km kp ls kt lt kx lu lb np lw lx ly bi translated"><code class="fe oi oj ok ol b"><em class="ml">conda_python2</em></code></li><li id="af63" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated"><code class="fe oi oj ok ol b"><em class="ml">conda_python3</em></code></li><li id="4796" class="lq lr ir kg b kh lz kl ma kp mb kt mc kx md lb np lw lx ly bi translated"><code class="fe oi oj ok ol b"><em class="ml">conda_tensorflow_p36</em></code></li></ul><p id="d4fe" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">内核列表是动态的，即 docker 映像可以包含一个或多个内核。它是在构建 Docker 映像时由参数<code class="fe oi oj ok ol b"><em class="ml">CONDA_ENVS</em></code>设置的。最初支持的 Conda 环境包括<code class="fe oi oj ok ol b"><em class="ml">python2</em></code>、<code class="fe oi oj ok ol b"><em class="ml">python3</em></code>、<code class="fe oi oj ok ol b"><em class="ml">tensorflow_p36</em></code>、<code class="fe oi oj ok ol b"><em class="ml">mxnet_p36</em></code>。通过在<code class="fe oi oj ok ol b"><em class="ml">base/utils/envs</em></code>文件夹中添加 Conda 环境文件，可以简单地创建额外的内核。</p><h2 id="7526" class="nw mn ir bd mo nx ny dn ms nz oa dp mw kp ob oc na kt od oe ne kx of og ni oh bi translated">AWS 和 SageMaker SDKs</h2><p id="5d9d" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">每个内核都包括 AWS Boto3 SDK 和 SageMaker SDK。这对于所有与 AWS 服务交互的 Python 代码都是必不可少的，包括 SageMaker 的培训和部署服务。</p><h2 id="e059" class="nw mn ir bd mo nx ny dn ms nz oa dp mw kp ob oc na kt od oe ne kx of og ni oh bi translated">AWS CLI</h2><p id="5fda" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">AWS CLI 是为与 AWS 交互的 shell 脚本安装的。</p><blockquote class="nq nr ns"><p id="59a9" class="ke kf ml kg b kh ki kj kk kl km kn ko nt kq kr ks nu ku kv kw nv ky kz la lb ik bi translated"><strong class="kg is">注意</strong>:AWS SDK 和 CLI 都需要在主机中配置一次 AWS 凭证。</p></blockquote><h2 id="fe3c" class="nw mn ir bd mo nx ny dn ms nz oa dp mw kp ob oc na kt od oe ne kx of og ni oh bi translated">Docker CLI</h2><p id="244c" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">许多 SageMaker 示例使用<code class="fe oi oj ok ol b"><em class="ml">docker</em></code>来构建用于训练的定制图像。我们没有在 Docker 上安装一个完整的 Docker，这是一个复杂的操作，而是利用了主机的 Docker 引擎。为了实现这一点，我们在 Docker 映像上安装了 Docker CLI，并依靠主机的 Docker 套接字来连接主机的 Docker 引擎。这是通过在运行容器时包含<code class="fe oi oj ok ol b"><em class="ml">-v /var/run/docker.sock:/var/run/docker.sock:ro</em></code>来实现的。</p><blockquote class="nq nr ns"><p id="aafd" class="ke kf ml kg b kh ki kj kk kl km kn ko nt kq kr ks nu ku kv kw nv ky kz la lb ik bi translated"><strong class="kg is">注意</strong>:在 Windows 上，将挂载更新为:<code class="fe oi oj ok ol b"><em class="ir">-v //var/run/docker.sock:/var/run/docker.sock:ro</em></code> <em class="ir">。</em></p></blockquote><h2 id="6244" class="nw mn ir bd mo nx ny dn ms nz oa dp mw kp ob oc na kt od oe ne kx of og ni oh bi translated">Jupyter 实验室中的 Git 集成</h2><p id="20f9" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">安装 Git 是为了允许直接从容器访问 git。此外，jupyterlab 上安装了<a class="ae kd" href="https://github.com/jupyterlab/jupyterlab-git" rel="noopener ugc nofollow" target="_blank"> jupyterlab-git </a>扩展，用于与 git 进行快速 GUI 交互。</p><h2 id="7ca6" class="nw mn ir bd mo nx ny dn ms nz oa dp mw kp ob oc na kt od oe ne kx of og ni oh bi translated">康达标签</h2><p id="50b8" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">就像 AWS 托管的实例一样，基于 Docker 的实例包含一个 Conda 选项卡来管理 Conda 环境。</p><blockquote class="nq nr ns"><p id="a24b" class="ke kf ml kg b kh ki kj kk kl km kn ko nt kq kr ks nu ku kv kw nv ky kz la lb ik bi translated"><strong class="kg is">注意</strong>:虽然这是为了模拟实际情况，但是不建议您在这里对 Conda 环境进行修改。相反，更新<code class="fe oi oj ok ol b"><em class="ir">base/utils/envs</em></code>下相应的 YAML 文件并重建 Docker 映像，这样您的更改就会被记录下来并可以与其他人共享。</p></blockquote><h2 id="6582" class="nw mn ir bd mo nx ny dn ms nz oa dp mw kp ob oc na kt od oe ne kx of og ni oh bi translated">SageMaker 示例选项卡</h2><p id="eb69" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">AWS 提供的所有 SageMaker 示例都与简单的 2-click 复制功能一起反映在 Docker 映像中，因此您可以轻松地使用现有示例并进行尝试。其他例子(来自<a class="ae kd" href="https://github.com/fastai/course-v3" rel="noopener ugc nofollow" target="_blank"> fast.ai </a>和<a class="ae kd" href="https://github.com/pytorch/tutorials" rel="noopener ugc nofollow" target="_blank"> PyTorch </a>)还没有包括在内，但将来会包括在内。</p></div><div class="ab cl me mf hv mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ik il im in io"><h1 id="3a15" class="mm mn ir bd mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj bi translated">缺少哪些功能？</h1><h2 id="a276" class="nw mn ir bd mo nx ny dn ms nz oa dp mw kp ob oc na kt od oe ne kx of og ni oh bi translated">GPU 支持</h2><p id="d6f0" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">目前，该容器仅为 CPU 工作负载而构建。对于任何使用 GPU 的本地培训和测试，您必须使用 AWS 托管的实例。注意，如果您使用 SageMaker 的培训作业运行 GPU 驱动的培训，那么您不需要本地容器上的 GPU。</p><h2 id="94c8" class="nw mn ir bd mo nx ny dn ms nz oa dp mw kp ob oc na kt od oe ne kx of og ni oh bi translated">其他内核</h2><p id="1ca0" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">使用 Conda 可以很容易地添加其他基于 Python 的内核。然而，对于 R 和 Spark 运行时，未来还需要做更多的工作。</p><h2 id="2446" class="nw mn ir bd mo nx ny dn ms nz oa dp mw kp ob oc na kt od oe ne kx of og ni oh bi translated">局部训练和推理</h2><p id="dc1a" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">使用 AWS 托管的实例，您可以使用<a class="ae kd" href="https://sagemaker.readthedocs.io/en/stable/overview.html#local-mode" rel="noopener ugc nofollow" target="_blank"> SageMaker 的本地模式</a>在该实例上运行训练和推理。目前，Docker 容器没有为此而设置。将来，将添加网络配置来支持这一点。</p><h2 id="c607" class="nw mn ir bd mo nx ny dn ms nz oa dp mw kp ob oc na kt od oe ne kx of og ni oh bi translated">使用最新的 SageMaker 设置自动更新</h2><p id="d949" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">目前，每当 SageMaker Notebook 实例更新时(新的 SageMaker 版本)，内核配置都需要手动更新。将来，这些可以使用 CloudWatch 事件和 AWS Lambda 函数自动更新。</p><h2 id="2cc6" class="nw mn ir bd mo nx ny dn ms nz oa dp mw kp ob oc na kt od oe ne kx of og ni oh bi translated">Python 库</h2><p id="c98e" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">为了保持 Docker 映像尽可能精简，许多库没有包含在给定的内核中。如果您需要容器中的某些库，您可以在<code class="fe oi oj ok ol b"><em class="ml">base/utils/envs</em></code>文件夹中使用自定义环境 YAML 文件构建自己的容器。在未来，我的目标是使它更容易定制。</p><h2 id="217a" class="nw mn ir bd mo nx ny dn ms nz oa dp mw kp ob oc na kt od oe ne kx of og ni oh bi translated">其他工具</h2><p id="a75b" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">一些工具，如<a class="ae kd" href="https://github.com/jupyter/nbdime" rel="noopener ugc nofollow" target="_blank"> nbdime </a>、Jupyter Notebook Diff 和 Merge 工具以及<a class="ae kd" href="https://github.com/plotly/plotly.py" rel="noopener ugc nofollow" target="_blank"> plotlywidget </a>(一个开源的、用于 Python 的交互式图形库)应该会在未来被集成。</p></div><div class="ab cl me mf hv mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ik il im in io"><h1 id="6e0b" class="mm mn ir bd mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj bi translated">如何开始使用容器？</h1><p id="d142" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">可以在 Github 库找到说明:<a class="ae kd" href="https://github.com/qtangs/sagemaker-notebook-container" rel="noopener ugc nofollow" target="_blank">https://github.com/qtangs/sagemaker-notebook-container</a></p></div><div class="ab cl me mf hv mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ik il im in io"><h1 id="911f" class="mm mn ir bd mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj bi translated">摘要</h1><p id="249b" class="pw-post-body-paragraph ke kf ir kg b kh nk kj kk kl nl kn ko kp nm kr ks kt nn kv kw kx no kz la lb ik bi translated">亚马逊 SageMaker 的笔记本实例是 AWS 云机器学习平台的重要组成部分。</p><p id="2cf4" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">在 Docker 容器映像中复制它有望进一步简化对 SageMaker 世界的访问。</p><p id="9108" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">请注意，AWS 还为<a class="ae kd" href="https://github.com/aws/sagemaker-containers" rel="noopener ugc nofollow" target="_blank">培训</a>和<a class="ae kd" href="https://github.com/aws?utf8=✓&amp;q=serving&amp;type=&amp;language=" rel="noopener ugc nofollow" target="_blank">部署</a>提供了 Docker 容器。</p><p id="d763" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">在未来的帖子中，我将继续关注使用 Amazon SageMaker 的机器学习基础设施，以及我们如何应用最佳实践来简化和巩固这些基础设施组件。</p></div><div class="ab cl me mf hv mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ik il im in io"><p id="c4fd" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><em class="ml">感谢您的阅读。请在下面评论分享你的想法。</em></p><p id="bf40" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><em class="ml">这项工作的完整项目托管在</em><a class="ae kd" href="https://github.com/qtangs/sagemaker-notebook-container" rel="noopener ugc nofollow" target="_blank"><em class="ml">Github</em></a><em class="ml">上。</em></p></div></div>    
</body>
</html>