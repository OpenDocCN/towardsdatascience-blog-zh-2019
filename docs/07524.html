<html>
<head>
<title>Learn how to create beautiful and insightful charts with Python — the Quick, the Pretty, and the Awesome</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解如何使用 Python 创建漂亮且有洞察力的图表——快速、漂亮且令人惊叹</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/plotting-with-python-c2561b8c0f1f?source=collection_archive---------0-----------------------#2019-10-21">https://towardsdatascience.com/plotting-with-python-c2561b8c0f1f?source=collection_archive---------0-----------------------#2019-10-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="6501" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">PYTHON 指南的最终绘图</h2><div class=""/><div class=""><h2 id="b5a6" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">用 Python 可视化的综合代码指南，解释用 Pandas、Seaborn 和 Plotly 绘图。在那里我们想象，除了别的以外，金钱可以买到幸福。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/35c57760b0b04fa05bd78d0a2085f39a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BtUX3turg8z2cplNfrhz5g.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><strong class="bd lh">2018: </strong>Regplot showing how Life Ladder <strong class="bd lh">(Happiness)</strong> is positively correlated with Log GDP per capita <strong class="bd lh">(Money)</strong></figcaption></figure><p id="c69f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi me translated"><span class="l mf mg mh bm mi mj mk ml mm di">在</span>今天的文章中，我们将探讨用 Python 绘制数据的三种不同方式。我们将利用 2019 年世界幸福报告<a class="ae mn" href="https://worldhappiness.report/ed/2019/" rel="noopener ugc nofollow" target="_blank">中的数据来完成这项工作。我用 Gapminder 和维基百科上的信息丰富了《世界幸福报告》的数据，以便探索新的关系和可视化。</a></p><p id="c582" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">《世界幸福报告》试图回答哪些因素影响着全世界的幸福。</p><blockquote class="mo"><p id="edff" class="mp mq it bd mr ms mt mu mv mw mx md dk translated">在报告中，幸福被定义为对“坎特里尔阶梯问题”的回答，该问题要求受访者在 0 到 10 的范围内评估他们今天的生活，最糟糕的生活为 0，最好的生活为 10。</p></blockquote><p id="7bdd" class="pw-post-body-paragraph li lj it lk b ll my kd ln lo mz kg lq lr na lt lu lv nb lx ly lz nc mb mc md im bi translated">在整篇文章中，我将使用<code class="fe nd ne nf ng b"><strong class="lk jd">Life Ladder</strong></code>作为目标变量。每当我们谈论人生阶梯时，想想幸福。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="758b" class="no np it bd nq nr ns nt nu nv nw nx ny ki nz kj oa kl ob km oc ko od kp oe of bi translated">文章的结构</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi og"><img src="../Images/e9ff6590e5b9fedc3bd6498da70c2c3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*D_yhuk3UDt-Ftqsj"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Photo by <a class="ae mn" href="https://unsplash.com/@nikarthur?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Nik MacMillan</a> on <a class="ae mn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7392" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi me translated">这篇文章旨在作为一个代码指南和一个参考点，供您在需要查找特定类型的情节时参考。为了节省空间，我有时会将多个图表合并成一个图像。不过放心，你可以在这个<a class="ae mn" href="https://github.com/FBosler/AdvancedPlotting" rel="noopener ugc nofollow" target="_blank">回购</a>或者对应的<a class="ae mn" href="https://nbviewer.jupyter.org/github/FBosler/AdvancedPlotting/blob/master/The%20quick%2C%20the%20pretty%2C%20and%20the%20awesome.ipynb" rel="noopener ugc nofollow" target="_blank"> Jupyter 笔记本</a>里找到所有的底层代码。</p><h2 id="5f85" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">目录</h2><ul class=""><li id="1a83" class="os ot it lk b ll ou lo ov lr ow lv ox lz oy md oz pa pb pc bi translated"><a class="ae mn" href="#b330" rel="noopener ugc nofollow">我的 Python 绘图史</a></li><li id="ce06" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><a class="ae mn" href="#b300" rel="noopener ugc nofollow">分布的重要性</a></li><li id="1b5e" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><a class="ae mn" href="#80b8" rel="noopener ugc nofollow">加载数据和包导入</a></li><li id="7af9" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><a class="ae mn" href="#93e3" rel="noopener ugc nofollow"> <strong class="lk jd">快速:</strong>与熊猫的基本标图</a></li><li id="4885" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><a class="ae mn" href="#72fb" rel="noopener ugc nofollow"/></li><li id="3db3" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><a class="ae mn" href="#86fa" rel="noopener ugc nofollow"> <strong class="lk jd">牛逼:</strong>用 plotly 创造牛逼的互动剧情</a></li></ul><p id="dc14" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我用超链接连接了文章的不同部分，所以如果你不关心介绍，可以直接跳到绘图部分。我不做评判。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="b330" class="no np it bd nq nr ns nt nu nv nw nx ny ki nz kj oa kl ob km oc ko od kp oe of bi translated">我的 Python 绘图史</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pi"><img src="../Images/845120bd6524e13fc77870173616ad2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TLEIF3mwN52gqP8x"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Photo by <a class="ae mn" href="https://unsplash.com/@krysamon?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Krys Amon</a> on <a class="ae mn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="faa6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi me translated"><span class="l mf mg mh bm mi mj mk ml mm di">我</span>大概两年前开始比较认真的学习 Python。从那以后，几乎没有一个星期我不惊叹于 Python 本身的简单和易用性，或者生态系统中许多令人惊叹的开源库之一。我熟悉的命令、模式和概念越多，一切就越有意义。</p><h2 id="08a3" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">Matplotlib</h2><p id="de04" class="pw-post-body-paragraph li lj it lk b ll ou kd ln lo ov kg lq lr pj lt lu lv pk lx ly lz pl mb mc md im bi translated">用 Python 绘图则正好相反。最初，我用 Matplotlib 创建的几乎每个图表看起来都像是 80 年代逃脱的犯罪。更糟糕的是，为了创造这些令人厌恶的东西，我通常要在 Stackoverflow 上花上几个小时。例如，研究一些具体的命令来改变 x 轴的倾斜度，或者做一些类似的傻事。别让我从多图表开始。结果看起来令人印象深刻，以编程方式创建这些图表是一种奇妙的感觉。例如，一次为不同的变量生成 50 个图表。然而，这是如此多的工作，需要你记住一大堆无用的命令。</p><h2 id="df08" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">海生的</h2><p id="4b5e" class="pw-post-body-paragraph li lj it lk b ll ou kd ln lo ov kg lq lr pj lt lu lv pk lx ly lz pl mb mc md im bi translated">了解到<a class="ae mn" href="https://seaborn.pydata.org/" rel="noopener ugc nofollow" target="_blank"> Seaborn </a>是一种解脱。Seaborn 抽象掉了许多微调。毫无疑问，由此产生的图表的美感是一个巨大的飞跃。但是，它也是建立在 Matplotlib 之上的。通常，对于非标准调整，仍然有必要深入到类似于机器级 matplotlib 代码的地方。</p><h2 id="e7e2" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">散景</h2><p id="b15e" class="pw-post-body-paragraph li lj it lk b ll ou kd ln lo ov kg lq lr pj lt lu lv pk lx ly lz pl mb mc md im bi translated">时间匆匆一瞥，我以为<a class="ae mn" href="https://docs.bokeh.org/en/latest/" rel="noopener ugc nofollow" target="_blank">散景</a>会成为我的 goto 解决方案。我在研究地理空间可视化的时候遇到了散景。然而，我很快意识到，Bokeh 虽然不同，但和 matplotlib 一样愚蠢地复杂。</p><h2 id="6646" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">Plotly</h2><p id="e512" class="pw-post-body-paragraph li lj it lk b ll ou kd ln lo ov kg lq lr pj lt lu lv pk lx ly lz pl mb mc md im bi translated">不久前，我确实尝试过<a class="ae mn" href="https://plot.ly/python/" rel="noopener ugc nofollow" target="_blank"> plot.ly </a>(从现在开始称为 plotly)。同时，再次致力于地理空间数据的可视化。那时候，它似乎比前面提到的图书馆更荒谬。你需要一个帐户，必须通过你的笔记本登录，然后 plotly 会在网上渲染一切。然后，您可以下载生成的图表。我迅速丢弃 plotly。然而，最近，我偶然发现了一个关于 plotly express 和 plotly 4.0 的<a class="ae mn" href="https://www.youtube.com/watch?v=5Cw4JumJTwo" rel="noopener ugc nofollow" target="_blank"> Youtube 视频</a>，其中最重要的是，他们摆脱了所有这些在线废话。我摆弄了一下，这篇文章就是它的成果。我想，迟到总比不到好。</p><h2 id="ec22" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">Kepler.gl(地理空间数据荣誉奖)</h2><p id="8096" class="pw-post-body-paragraph li lj it lk b ll ou kd ln lo ov kg lq lr pj lt lu lv pk lx ly lz pl mb mc md im bi translated">虽然不是 Python 库，但 Kepler.gl 是一个强大的基于网络的地理空间数据可视化工具。您所需要的只是 CSV 文件，您可以使用 Python 轻松创建这些文件。试试看！</p><h2 id="f222" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">我当前的工作流程</h2><p id="2ad0" class="pw-post-body-paragraph li lj it lk b ll ou kd ln lo ov kg lq lr pj lt lu lv pk lx ly lz pl mb mc md im bi translated">最终，我决定使用 Pandas native plotting 进行快速检查，使用 Seaborn 制作我想在报告和演示中使用的图表(视觉效果很重要)。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="b300" class="no np it bd nq nr ns nt nu nv nw nx ny ki nz kj oa kl ob km oc ko od kp oe of bi translated">分布的重要性</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi og"><img src="../Images/d6a35008705ce9a899dfb9c01b4ade67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*N5D1Ur-9uBlR2DBx"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Photo by <a class="ae mn" href="https://unsplash.com/@jonnysplsh?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jonny Caspari</a> on <a class="ae mn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="564f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi me translated"><span class="l mf mg mh bm mi mj mk ml mm di">我</span>在圣地亚哥学习时教统计学(Stats 119)。统计 119 是统计学的入门课程。课程包括统计基础知识，如数据聚合(视觉和定量)，几率和概率的概念，回归，抽样，以及最重要的<strong class="lk jd">分布</strong>。这一次，我对数量和现象的理解几乎完全转移到了基于分布(大部分时间是高斯分布)的表述上。</p><p id="751d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">时至今日，我发现这两个量的意义相差如此之远令人惊讶，标准差可以让你抓住一个现象。仅仅知道这两个数字，就可以简单地得出一个特定结果的可能性有多大。人们马上就知道大部分结果会在哪里。它给你一个参考框架来快速区分轶事事件和具有统计意义的事件，而不必通过过于复杂的计算。</p><p id="db74" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">一般来说，当面对新数据时，我的第一步是试图可视化它的分布，以便很好地理解数据。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="80b8" class="no np it bd nq nr ns nt nu nv nw nx ny ki nz kj oa kl ob km oc ko od kp oe of bi translated">加载数据和包导入</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pm"><img src="../Images/4094450e518ddd13448c1268351a8b42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*h5X6ZtBcZmP5tjvv"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Photo by <a class="ae mn" href="https://unsplash.com/@kellitungay?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kelli Tungay</a> on <a class="ae mn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5624" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi me translated">让我们加载我们将在整篇文章中使用的数据。我对数据做了一些预处理。我在有意义的地方进行内插和外推。</p><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="9709" class="oh np it ng b gy pr ps l pt pu"><strong class="ng jd"># Load the data</strong><br/>data = pd.read_csv('<a class="ae mn" href="https://raw.githubusercontent.com/FBosler/AdvancedPlotting/master/combined_set.csv'" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/FBosler/AdvancedPlotting/master/combined_set.csv'</a>)</span><span id="21e1" class="oh np it ng b gy pv ps l pt pu"><strong class="ng jd"># this assigns labels per year</strong><br/>data['Mean Log GDP per capita']  = data.groupby('Year')['Log GDP per capita'].transform(<br/>    pd.qcut,<br/>    q=5,<br/>    labels=(['Lowest','Low','Medium','High','Highest'])<br/>)</span></pre><p id="3e9c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">数据集包含以下列的值:</p><ul class=""><li id="f78e" class="os ot it lk b ll lm lo lp lr pw lv px lz py md oz pa pb pc bi translated"><strong class="lk jd">年份:</strong>计量年份(从 2007 年到 2018 年)</li><li id="809b" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><strong class="lk jd">人生阶梯:</strong>受访者根据坎特里尔阶梯，用 0 到 10 分(10 分最好)来衡量他们今天的生活价值</li><li id="838a" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><strong class="lk jd">对数人均国内生产总值:</strong>人均国内生产总值按购买力平价(PPP)计算，按 2011 年不变国际美元进行调整，取自世界银行于 2018 年 11 月 14 日发布的《世界发展指标(WDI)》</li><li id="2e95" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><strong class="lk jd">社会支持:</strong>问题回答:“如果你遇到了麻烦，你有亲戚或朋友可以在你需要的时候帮你吗？”</li><li id="f3de" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><strong class="lk jd">出生时的健康预期寿命:</strong>出生时的预期寿命是根据世界卫生组织(世卫组织)全球卫生观察数据库的数据构建的，其中包含 2005 年、2010 年、2015 年和 2016 年的数据。</li><li id="8430" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated">做出生活选择的自由:对问题的回答:“你对选择如何生活的自由感到满意还是不满意？”</li><li id="f482" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><strong class="lk jd">慷慨:</strong>对“在过去的一个月里，你有没有向慈善机构捐过钱？”与人均国内生产总值相比</li><li id="c25b" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><strong class="lk jd">对腐败的看法:</strong>对“腐败在政府中是否普遍存在？”以及“企业内部的腐败是否普遍？”</li><li id="7948" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><strong class="lk jd">积极影响:</strong>包括前一天快乐、欢笑和享受的平均频率。</li><li id="a43d" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><strong class="lk jd">负面影响:</strong>包括前一天焦虑、悲伤和愤怒的平均频率。</li><li id="1271" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><strong class="lk jd">对国家政府的信心:</strong>不言自明</li><li id="b0f5" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated">民主品质:一个国家有多民主</li><li id="49c1" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated">交付质量:一个国家的政策交付情况如何</li><li id="6480" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><strong class="lk jd"> Gapminder 预期寿命:</strong>来自 Gapminder 的预期寿命</li><li id="5eaa" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><strong class="lk jd"> Gapminder 人口:</strong>一国人口</li></ul><h2 id="85a3" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">进口</h2><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="adff" class="oh np it ng b gy pr ps l pt pu">import plotly<br/>import pandas as pd<br/>import numpy as np<br/>import seaborn as sns<br/>import plotly.express as px</span><span id="adef" class="oh np it ng b gy pv ps l pt pu">import matplotlib</span><span id="8134" class="oh np it ng b gy pv ps l pt pu">%matplotlib inline</span><span id="acf2" class="oh np it ng b gy pv ps l pt pu">assert matplotlib.__version__ == "3.1.0","""<br/>Please install matplotlib version 3.1.0 by running:<br/>1) !pip uninstall matplotlib <br/>2) !pip install matplotlib==3.1.0<br/>"""</span></pre><h1 id="93e3" class="no np it bd nq nr pz nt nu nv qa nx ny ki qb kj oa kl qc km oc ko qd kp oe of bi translated">快速:熊猫的基本绘图</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qe"><img src="../Images/e5bd29089406d03d199ee4be5cc21956.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oyUw8etrui23KzwU"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Photo by <a class="ae mn" href="https://unsplash.com/@marvelous?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Marvin Meyer</a> on <a class="ae mn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8069" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi me translated">andas 有内置的绘图功能，可以在系列或数据帧上调用。我喜欢这些绘图功能的原因是它们简洁，使用了相当智能的默认设置，并且能够快速给出正在发生的事情的想法。</p><p id="bfeb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">要创建一个图，在数据上调用<code class="fe nd ne nf ng b">.plot(kind=&lt;TYPE OF PLOT&gt;)</code>,如下所示:</p><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="7367" class="oh np it ng b gy pr ps l pt pu">np.exp(data[data['Year']==2018]['Log GDP per capita']).plot(<br/>    <strong class="ng jd">kind='hist'</strong><br/>)</span></pre><p id="96ce" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">运行上面的命令将产生下面的图表。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qf"><img src="../Images/f0840bbbbc5ff2422f10d98133117459.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ttME6mRYwHyxHIUkGwsMYA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><strong class="bd lh">2018:</strong> Histogram of the number of countries per GDP per Capita bucket. Not surprisingly, most countries are poor!</figcaption></figure><p id="e173" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在绘制熊猫图时，我使用了五个主要参数:</p><ul class=""><li id="bafe" class="os ot it lk b ll lm lo lp lr pw lv px lz py md oz pa pb pc bi translated"><code class="fe nd ne nf ng b"><strong class="lk jd">kind</strong></code> <strong class="lk jd"> : </strong>熊猫已经知道你要创造什么样的剧情，以下选项可用<code class="fe nd ne nf ng b">hist, bar, barh, scatter, area, kde, line, box, hexbin, pie</code>。</li><li id="b382" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><code class="fe nd ne nf ng b"><strong class="lk jd">figsize</strong></code> <strong class="lk jd"> : </strong>允许覆盖 6 英寸宽、4 英寸高的默认输出尺寸。<code class="fe nd ne nf ng b">figsize</code>期望一个元组(例如，我经常使用的<code class="fe nd ne nf ng b">figsize=(12,8)</code>)</li><li id="eb39" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><code class="fe nd ne nf ng b"><strong class="lk jd">title</strong></code> <strong class="lk jd"> : </strong>给图表添加标题。大多数时候，我用这个来澄清图表中显示的任何内容，这样当我回到图表中时，我可以很快确定发生了什么。<code class="fe nd ne nf ng b">title</code>需要一个字符串。</li><li id="4984" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><code class="fe nd ne nf ng b"><strong class="lk jd">bins</strong></code> <strong class="lk jd"> : </strong>允许覆盖直方图的框宽度。<code class="fe nd ne nf ng b">bins</code>需要一个列表或类似列表的值序列(例如，<code class="fe nd ne nf ng b">bins=np.arange(2,8,0.25)</code>)</li><li id="f275" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><code class="fe nd ne nf ng b"><strong class="lk jd">xlim/ylim</strong></code> <strong class="lk jd"> : </strong>允许覆盖轴的最大值和最小值的默认值。<code class="fe nd ne nf ng b">xlim</code>和<code class="fe nd ne nf ng b">ylim</code>都需要一个元组(例如<code class="fe nd ne nf ng b">xlim=(0,5)</code>)</li></ul><p id="e7f2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们快速浏览不同类型的可用图。</p><h2 id="224c" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">垂直条形图</h2><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="8be8" class="oh np it ng b gy pr ps l pt pu">data[<br/>    data['Year'] == 2018<br/>].set_index('Country name')['Life Ladder'].nlargest(15).plot(<br/>    kind='bar',<br/>    figsize=(12,8)<br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qg"><img src="../Images/9b8ac86b37fdb0d56d8c0e2a2189910e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TgSvptA5gnzXwSgXgk2_pQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><strong class="bd lh">2018:</strong> List of 15 happiest countries is led by Finnland</figcaption></figure><h2 id="ca6b" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">水平条形图</h2><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="363f" class="oh np it ng b gy pr ps l pt pu">np.exp(data[<br/>    data['Year'] == 2018<br/>].groupby('Continent')['Log GDP per capita']\<br/>       .mean()).sort_values().plot(<br/>    kind='barh',<br/>    figsize=(12,8)<br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qh"><img src="../Images/2557c80ad6734b819eacc0fbc5036f5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LNi1T0dwBZRG7t9cOAwpDA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Average GDP per capita by continent in 2011 USD Dollars clearly led by Australia and New Zealand</figcaption></figure><h2 id="e001" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">箱形图</h2><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="16ca" class="oh np it ng b gy pr ps l pt pu">data['Life Ladder'].plot(<br/>    kind='box',<br/>    figsize=(12,8)<br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qi"><img src="../Images/707fc7b953a7e908d3ea57eb53ce76a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8JVS-XKnFb7PAJfJeDnteg.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Box plot of the distribution of Life Ladder shows that the median is somewhere around 5.5 ranging from values below 3 to up 8.</figcaption></figure><h2 id="68f8" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">散点图</h2><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="cf1c" class="oh np it ng b gy pr ps l pt pu">data[['Healthy life expectancy at birth','Gapminder Life Expectancy']].plot(<br/>    kind='scatter',<br/>    x='Healthy life expectancy at birth',<br/>    y='Gapminder Life Expectancy',<br/>    figsize=(12,8)<br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qj"><img src="../Images/50486724c7c2848d4847df1b89c522ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G2cg6Vw4URR3UO6LnZwnSw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Scatter plot of the World Happiness Report life expectation against the Gapminder life expectation shows a high correlation between the two (to be expected)</figcaption></figure><h2 id="0c10" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">赫克宾图表</h2><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="e16a" class="oh np it ng b gy pr ps l pt pu">data[data['Year'] == 2018].plot(<br/>    kind='hexbin',<br/>    x='Healthy life expectancy at birth',<br/>    y='Generosity',<br/>    C='Life Ladder',<br/>    gridsize=20,<br/>    figsize=(12,8),<br/>    cmap="Blues", # defaults to greenish<br/>    sharex=False # required to get rid of a bug<br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qk"><img src="../Images/bd09d1c1fccb3913feec1c3846f7ca29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fxBFJ-3D88mWOLHkPBR_hg.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><strong class="bd lh">2018:</strong> Hexbin plot, plotting life expectancy against generosity. The color of bins indicates the average of life ladder in the respective bin.</figcaption></figure><h2 id="f389" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">圆形分格统计图表</h2><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="cca1" class="oh np it ng b gy pr ps l pt pu">data[data['Year'] == 2018].groupby(<br/>    ['Continent']<br/>)['Gapminder Population'].sum().plot(<br/>    kind='pie',<br/>    figsize=(12,8),<br/>    cmap="Blues_r", # defaults to orangish<br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ql"><img src="../Images/c96b84b00a1ade7f120d1d75c2ff12e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ba8xFWiOEXRdPuRiFnoNqw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><strong class="bd lh">2018:</strong> Pie chart showing the total population by continent</figcaption></figure><h2 id="4cdf" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">堆积面积图</h2><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="484b" class="oh np it ng b gy pr ps l pt pu">data.groupby(<br/>    ['Year','Continent']<br/>)['Gapminder Population'].sum().unstack().plot(<br/>    kind='area',<br/>    figsize=(12,8),<br/>    cmap="Blues", # defaults to orangish<br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qm"><img src="../Images/308176da7c47bb5330e5068940f286f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-kbmY3ih1uTvChVZU6KYUA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Population numbers accross the globe are on the rise.</figcaption></figure><h2 id="e1f0" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">折线图</h2><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="bc4b" class="oh np it ng b gy pr ps l pt pu">data[<br/>    data['Country name'] == 'Germany'<br/>].set_index('Year')['Life Ladder'].plot(<br/>    kind='line',<br/>    figsize=(12,8)<br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qn"><img src="../Images/be694f16cc76875090253d3ba719919f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JQnoEWT2bu03_gKinNma7Q.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Line chart depicting the development of happiness in Germany.</figcaption></figure><h2 id="1472" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">关于用熊猫绘图的结论</h2><p id="6eff" class="pw-post-body-paragraph li lj it lk b ll ou kd ln lo ov kg lq lr pj lt lu lv pk lx ly lz pl mb mc md im bi translated">用熊猫绘图很方便。它很容易访问，而且速度很快。情节相当丑陋。偏离缺省值几乎是不可能的，这没关系，因为我们有其他工具来制作更美观的图表。继续前往锡伯恩。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="72fb" class="no np it bd nq nr ns nt nu nv nw nx ny ki nz kj oa kl ob km oc ko od kp oe of bi translated">漂亮:与 Seaborn 的高级绘图</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qo"><img src="../Images/2c8d0d5f118ff84384d262f94cee449e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_gPj-TnIkfo0Uhtc"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Photo by <a class="ae mn" href="https://unsplash.com/@sur_le_misanthrope?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Pavel Nekoranec</a> on <a class="ae mn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="edad" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi me translated">eaborn 利用绘图默认值。要确保您的结果与我的匹配，请运行以下命令。</p><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="f289" class="oh np it ng b gy pr ps l pt pu">sns.reset_defaults()<br/>sns.set(<br/>    rc={'figure.figsize':(7,5)}, <br/>    style="white" # nicer layout<br/>)</span></pre><h2 id="e624" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">绘制单变量分布</h2><p id="0d91" class="pw-post-body-paragraph li lj it lk b ll ou kd ln lo ov kg lq lr pj lt lu lv pk lx ly lz pl mb mc md im bi translated">如前所述，我是发行版的忠实粉丝。直方图和核密度分布都是可视化特定变量关键特征的有效方法。让我们看看如何在一个图表中生成单个变量的分布或多个变量的分布。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qp"><img src="../Images/4da6975189bb25a378f1aff6235b9956.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xE_8sauDvyXkjrZRfUyJLQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk"><strong class="bd lh">Left chart:</strong> Histogram and kernel density estimation of “Life Ladder” for Asian countries in 2018; <strong class="bd lh">Right chart: </strong>Kernel density estimation of “Life Ladder” for five buckets of GDP per Capita — Money can buy happiness</figcaption></figure><h2 id="a145" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">绘制二元分布</h2><p id="99f5" class="pw-post-body-paragraph li lj it lk b ll ou kd ln lo ov kg lq lr pj lt lu lv pk lx ly lz pl mb mc md im bi translated">每当我想直观地探索两个或多个变量之间的关系时，通常会归结为某种形式的散点图和对分布的评估。概念上相似的图有三种变化。在这些图中，中心图(散点图、双变量 KDE 图和 hexbin 图)有助于理解两个变量之间的联合频率分布。此外，在中心图的右上方边界，描绘了相应变量的边际单变量分布(作为 KDE 或直方图)。</p><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="54b9" class="oh np it ng b gy pr ps l pt pu">sns.jointplot(<br/>    x='Log GDP per capita',<br/>    y='Life Ladder',<br/>    data=data,<br/>    <strong class="ng jd">kind='scatter' # or 'kde' or 'hex'</strong><br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qq"><img src="../Images/80a3770414a890fdbaabbff47224ab8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-8DX1FO7fzb7iJXgn_3-gg.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Seaborn jointplot with scatter, bivariate kde, and hexbin in the center graph and marginal distributions left and on top of the center graph.</figcaption></figure><h2 id="1720" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">散点图</h2><p id="4725" class="pw-post-body-paragraph li lj it lk b ll ou kd ln lo ov kg lq lr pj lt lu lv pk lx ly lz pl mb mc md im bi translated">散点图是一种可视化两个变量的联合密度分布的方法。我们可以通过添加色调在混合中添加第三个变量，通过添加大小参数添加第四个变量。</p><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="606f" class="oh np it ng b gy pr ps l pt pu">sns.scatterplot(<br/>    x='Log GDP per capita',<br/>    y='Life Ladder',<br/>    data=data[data['Year'] == 2018],    <br/>    hue='Continent',<strong class="ng jd"><br/>    </strong>size='Gapminder Population'<br/>)</span><span id="b4f1" class="oh np it ng b gy pv ps l pt pu"><strong class="ng jd"># both, hue and size are optional</strong><br/>sns.despine() <strong class="ng jd"># prettier layout</strong></span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qr"><img src="../Images/21179234627a9244c746013f047bc809.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PEImc1pUeF_7EsIrI3MR6Q.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Log GDP per capita against Life Ladder, colors based on the continent and size on population</figcaption></figure><h2 id="9c35" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">小提琴情节</h2><p id="16ba" class="pw-post-body-paragraph li lj it lk b ll ou kd ln lo ov kg lq lr pj lt lu lv pk lx ly lz pl mb mc md im bi translated">小提琴图是箱线图和核密度估计的组合。它的作用类似于一个方框图。它显示了定量数据在分类变量中的分布，以便对这些分布进行比较。</p><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="e8fb" class="oh np it ng b gy pr ps l pt pu">sns.set(<br/>    rc={'figure.figsize':(18,6)}, <br/>    style="white"<br/>)</span><span id="e6fe" class="oh np it ng b gy pv ps l pt pu">sns.violinplot(<br/>    x='Continent',<br/>    y='Life Ladder',<br/>    hue='Mean Log GDP per capita',<br/>    data=data<br/>)</span><span id="3c70" class="oh np it ng b gy pv ps l pt pu">sns.despine()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qs"><img src="../Images/76a6339fbc5223eb16bb06749c82b390.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1fKgYCMwKIahPSCt92xQ_Q.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Violin plot where we plot continents against Life Ladder, we use the Mean Log GDP per capita to group the data. It looks like a higher GDP per capita makes for higher happiness</figcaption></figure><h2 id="eb23" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">配对图</h2><p id="2b89" class="pw-post-body-paragraph li lj it lk b ll ou kd ln lo ov kg lq lr pj lt lu lv pk lx ly lz pl mb mc md im bi translated">Seaborn pair 图在一个大网格中绘制两变量散点图的所有组合。我通常觉得这有点信息超载，但它有助于发现模式。</p><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="2126" class="oh np it ng b gy pr ps l pt pu">sns.set(<br/>    style="white", <br/>    palette="muted", <br/>    color_codes=True<br/>)</span><span id="89d3" class="oh np it ng b gy pv ps l pt pu">sns.pairplot(<br/>    data[data.Year == 2018][[<br/>        'Life Ladder','Log GDP per capita', <br/>        'Social support','Healthy life expectancy at birth', <br/>        'Freedom to make life choices','Generosity', <br/>        'Perceptions of corruption', 'Positive affect',<br/>        'Negative affect','Confidence in national government',<br/>        'Mean Log GDP per capita'<br/>    ]].dropna(), <br/>    hue='Mean Log GDP per capita'<br/>)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qm"><img src="../Images/daae8bc0a5a26af509a68a87df5ac77d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wklxndB5BcYfwDB7ghW_4A.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Seaborn scatterplot grid where all selected variables a scattered against every other variable in the lower and upper part of the grid, the diagonal contains a kde plot.</figcaption></figure><h2 id="3a26" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">小平面网格</h2><p id="7548" class="pw-post-body-paragraph li lj it lk b ll ou kd ln lo ov kg lq lr pj lt lu lv pk lx ly lz pl mb mc md im bi translated">对我来说，Seaborn 的 FacetGrid 是使用 Seaborn 的最有说服力的理由之一，因为它使创建多情节变得轻而易举。在 pair 图中，我们已经看到了一个 FacetGrid 的例子。FacetGrid 允许创建多个由变量分割的图表。例如，行可以是一个变量(人均 GDP 类别)，列可以是另一个变量(大陆)。</p><p id="e5e1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">它确实需要比我个人喜欢的多一点的定制(例如，使用 matplotlib)，但它仍然是令人信服的。</p><p id="13df" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">面网格—线状图</strong></p><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="b851" class="oh np it ng b gy pr ps l pt pu">g = sns.FacetGrid(<br/>    data.groupby(['Mean Log GDP per capita','Year','Continent'])['Life Ladder'].mean().reset_index(),<br/>    row='Mean Log GDP per capita',<br/>    col='Continent',<br/>    margin_titles=True<br/>)<br/>g = (g.map(plt.plot, 'Year','Life Ladder'))</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qt"><img src="../Images/529f6f9deeaa3ec0a7b651ea067a71dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RlS3o0rtO3RF9ot-XS8JCA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Life Ladder on the Y-axis, Year on the X-axis. The grid’s columns are the continent, and the grid’s rows are the different levels of Mean Log GDP per capita. Overall things seem to be getting better for the countries with a <strong class="bd lh">Low </strong>Mean Log GDP per Capita in <strong class="bd lh">North America</strong> and the countries with a <strong class="bd lh">Medium or High</strong> Mean Log GDP per Capita in <strong class="bd lh">Europe</strong></figcaption></figure><p id="ff48" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> FacetGrid —直方图</strong></p><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="1e93" class="oh np it ng b gy pr ps l pt pu">g = sns.FacetGrid(data, col="Continent", col_wrap=3,height=4)<br/>g = (g.map(plt.hist, "Life Ladder",bins=np.arange(2,9,0.5)))</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qu"><img src="../Images/22d1e47d4346d346f79f3fc6bf767457.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7vxeBk8ykXAntQgd3Szamw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">FacetGrid with a histogram of LifeLadder by continent</figcaption></figure><p id="0d75" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> FacetGrid —带注释的 KDE 图</strong></p><p id="97ef" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">还可以向网格中的每个图表添加特定于方面的符号。在下面的示例中，我们添加了平均值和标准偏差，并在平均值处画了一条垂直线(代码如下)。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qv"><img src="../Images/d85c010fd587180c9890089d1f560b59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FS24Ykfp8LgA1I5ds4ceIA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Life Ladder kernel density estimation based on the continent, annotated with a mean and standard deviation</figcaption></figure><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="qw qx l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Draw a vertical mean line and annotation</figcaption></figure><p id="d246" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> FacetGrid —热图图</strong></p><p id="6e10" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我最喜欢的绘图类型之一是热点图 FacetGrid，即网格中每个方面的热点图。这种类型的绘图对于在一个单独的绘图中可视化四个维度和一个指标非常有用。代码有点麻烦，但可以根据您的需要快速调整。值得注意的是，这种图表需要相对大量的数据或适当的分段，因为它不能很好地处理缺失值。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qt"><img src="../Images/b27d334742c08a042a43ff9481f09395.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RavYDCUfT1P5SnM3_5DsxA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Facet heatmap, visualizing on the outer rows a year range, outer columns the GDP per Capita, on the inner rows the level of perceived corruption and the inner columns the continents. We see that happiness increases towards the top right (i.e., high GDP per Capita and low perceived corruption). The effect of time is not definite, and some continents (Europe and North America) seem to be happier than others (Africa).</figcaption></figure><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="qw qx l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">heatmap_facetgrid.py</figcaption></figure></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="86fa" class="no np it bd nq nr ns nt nu nv nw nx ny ki nz kj oa kl ob km oc ko od kp oe of bi translated">牛逼:用 plotly 创造牛逼的互动情节</h1><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qy"><img src="../Images/6992b8820c2f59c0a97a8d23221bfaa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-QMrlhjs8Xk2gcRU"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Photo by <a class="ae mn" href="https://unsplash.com/@cleipelt?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Chris Leipelt</a> on <a class="ae mn" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d24f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi me translated">终于，再也没有 Matplotlib 了！Plotly 有三个重要特征:</p><ul class=""><li id="b4f8" class="os ot it lk b ll lm lo lp lr pw lv px lz py md oz pa pb pc bi translated"><strong class="lk jd">悬停</strong>:当悬停在图表上时，会弹出注释</li><li id="a895" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><strong class="lk jd">交互性:</strong>无需任何额外的设置，图表可以是交互式的(即穿越时间的旅程)</li><li id="e6bf" class="os ot it lk b ll pd lo pe lr pf lv pg lz ph md oz pa pb pc bi translated"><strong class="lk jd">漂亮的地理空间图表:</strong> Plotly 已经内置了一些基本的制图功能，但是另外，人们可以使用 mapbox 集成来制作令人惊叹的图表。</li></ul><h2 id="ffd1" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">散点图</h2><p id="8232" class="pw-post-body-paragraph li lj it lk b ll ou kd ln lo ov kg lq lr pj lt lu lv pk lx ly lz pl mb mc md im bi translated">我们通过运行<code class="fe nd ne nf ng b">fig = x.&lt;PLOT TYPE&gt;(PARAMS)</code>和<code class="fe nd ne nf ng b">fig.show()</code>来调用 plotly plots，如下所示:</p><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="1e26" class="oh np it ng b gy pr ps l pt pu">fig = px.scatter(<br/>    data_frame=data[data['Year'] == 2018], <br/>    x="Log GDP per capita", <br/>    y="Life Ladder", <br/>    size="Gapminder Population", <br/>    color="Continent",<br/>    hover_name="Country name",<br/>    size_max=60<br/>)<br/>fig.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qz"><img src="../Images/f286f741096a3af53d0ea21440cd5caa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*en8ZKXOg8DEaZT6xWby8Bw.gif"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Plotly scatter plot, plotting Log GDP per capita against Life Ladder, where color indicates continent and size of the marker the population</figcaption></figure><h2 id="d7d5" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">散点图——漫步时光</h2><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="3d17" class="oh np it ng b gy pr ps l pt pu">fig = px.scatter(<br/>    data_frame=data, <br/>    x="Log GDP per capita", <br/>    y="Life Ladder", <br/>    animation_frame="Year", <br/>    animation_group="Country name",<br/>    size="Gapminder Population", <br/>    color="Continent", <br/>    hover_name="Country name", <br/>    facet_col="Continent",<br/>    size_max=45,<br/>    category_orders={'Year':list(range(2007,2019))}     <br/>)</span><span id="4d0a" class="oh np it ng b gy pv ps l pt pu">fig.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi qz"><img src="../Images/4cb4780d651c39f977e7175dbc8d9b65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*nABF5aKV66N4UMrCosrQ-g.gif"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Visualization of how the plotted data changes over the years</figcaption></figure><h2 id="abfe" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">平行类别——可视化类别的有趣方式</h2><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="2dde" class="oh np it ng b gy pr ps l pt pu">def q_bin_in_3(col):<br/>    return pd.qcut(<br/>        col,<br/>        q=3,<br/>        labels=['Low','Medium','High']<br/>    )</span><span id="c94e" class="oh np it ng b gy pv ps l pt pu">_ = data.copy()<br/>_['Social support'] = _.groupby('Year')['Social support'].transform(q_bin_in_3)</span><span id="eaac" class="oh np it ng b gy pv ps l pt pu">_['Life Expectancy'] = _.groupby('Year')['Healthy life expectancy at birth'].transform(q_bin_in_3)</span><span id="b2fa" class="oh np it ng b gy pv ps l pt pu">_['Generosity'] = _.groupby('Year')['Generosity'].transform(q_bin_in_3)</span><span id="0bde" class="oh np it ng b gy pv ps l pt pu">_['Perceptions of corruption'] = _.groupby('Year')['Perceptions of corruption'].transform(q_bin_in_3)</span><span id="a5a6" class="oh np it ng b gy pv ps l pt pu">_ = _.groupby(['Social support','Life Expectancy','Generosity','Perceptions of corruption'])['Life Ladder'].mean().reset_index()</span><span id="9a84" class="oh np it ng b gy pv ps l pt pu">fig = px.parallel_categories(_, color="Life Ladder", color_continuous_scale=px.colors.sequential.Inferno)<br/>fig.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ra"><img src="../Images/75cb1bb2b67de8b22605db7ab237c81b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2yvI4xFv862V4c4SuFjrKg.gif"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Seems like not all countries with high life expectations are happy!</figcaption></figure><h2 id="f670" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">条形图—交互式过滤器的一个示例</h2><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="596d" class="oh np it ng b gy pr ps l pt pu">fig = px.bar(<br/>    data, <br/>    x="Continent", <br/>    y="Gapminder Population", <br/>    color="Mean Log GDP per capita", <br/>    barmode="stack", <br/>    facet_col="Year",<br/>    category_orders={"Year": range(2007,2019)},<br/>    hover_name='Country name',<br/>    hover_data=[<br/>        "Mean Log GDP per capita",<br/>        "Gapminder Population",<br/>        "Life Ladder"<br/>    ]<br/>)<br/>fig.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi rb"><img src="../Images/7a66385a3c0f26e16dfaa9f0eddb4140.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*acuOqKoJXAuoyM_1p3X-3A.gif"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Filtering a bar chart is easy. Not surprisingly, South Korea is among the wealthy countries in Asia.</figcaption></figure><h2 id="5546" class="oh np it bd nq oi oj dn nu ok ol dp ny lr om on oa lv oo op oc lz oq or oe iz bi translated">Choropleth 图——幸福如何随时间变化</h2><pre class="ks kt ku kv gt pn ng po pp aw pq bi"><span id="11ce" class="oh np it ng b gy pr ps l pt pu">fig = px.choropleth(<br/>    data, <br/>    locations="ISO3", <br/>    color="Life Ladder", <br/>    hover_name="Country name", <br/>    animation_frame="Year")</span><span id="c5e5" class="oh np it ng b gy pv ps l pt pu">fig.show()</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi rc"><img src="../Images/27f0366767d2c61e0aa5e4af9a494725.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*CLYIoZCjpMbvr0ZaIIh2kg.gif"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Map visualization of how happiness evolves over the years. <strong class="bd lh">Syria and Afghanistan are at the very end of the Life Ladder</strong> range (unsurprisingly)</figcaption></figure><h1 id="2f3b" class="no np it bd nq nr pz nt nu nv qa nx ny ki qb kj oa kl qc km oc ko qd kp oe of bi translated">总结和结束语</h1><p id="0f88" class="pw-post-body-paragraph li lj it lk b ll ou kd ln lo ov kg lq lr pj lt lu lv pk lx ly lz pl mb mc md im bi translated">今天到此为止。在本文中，您学习了如何成为一名真正的 Python 可视化忍者。你学会了如何更有效地进行快速探索，以及如何在该死的董事会开会时制作更漂亮的图表。您学习了如何创建交互式 plotly 图表，这在绘制地理空间数据时尤其有用。</p><p id="2107" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果你发现了一些奇妙的新的可视化效果，想要给出反馈，或者只是简单地聊聊天，请在 LinkedIn 上联系我。</p><p id="8bfd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果你喜欢你所读的，看看我在 Medium 上写的其他文章。</p></div></div>    
</body>
</html>