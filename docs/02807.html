<html>
<head>
<title>What is .npy files and why you should use them…</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是。npy 文件以及为什么应该使用它们…</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/what-is-npy-files-and-why-you-should-use-them-603373c78883?source=collection_archive---------5-----------------------#2019-05-07">https://towardsdatascience.com/what-is-npy-files-and-why-you-should-use-them-603373c78883?source=collection_archive---------5-----------------------#2019-05-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="abf8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">为什么你应该总是保存你的数据。npy 而不是。战斗支援车</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9804906d1d7558bcdf821be2f7f6e439.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vA1XbqldcFwG2EvXWEh2CA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">An accurate depiction of the feeling you get when loading data from .npy files.</figcaption></figure><h1 id="8aa3" class="ky kz it bd la lb lc ld le lf lg lh li jz lj ka lk kc ll kd lm kf ln kg lo lp bi translated">介绍</h1><p id="6b48" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">首先，非常感谢我的粉丝们在过去的几个月里一直支持我，我一直非常忙，没有太多的时间来写文章。我决定对此的部分补救方法是做一些更短更容易消化的文章，这样更容易产生！因此，这是我第一次尝试写一篇简短扼要的文章。<br/>希望你觉得有用！</p><p id="6318" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如果你喜欢这篇文章并想看更多，请务必<a class="ae mr" href="https://medium.com/@peter.nistrup" rel="noopener"> <strong class="ls iu">关注我的简介</strong> </a> <strong class="ls iu"> </strong>！</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="ab5b" class="ky kz it bd la lb mz ld le lf na lh li jz nb ka lk kc nc kd lm kf nd kg lo lp bi translated">TL；博士:</h1><p id="774a" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">从存储器中读取一千万个数据点文件:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/6f0e4504feb780318d7f4a062aef2011.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*xwpjjSdZwiOMnPJtdp9L2w.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">The results speak for themselves.</figcaption></figure><h2 id="65de" class="nf kz it bd la ng nh dn le ni nj dp li lz nk nl lk md nm nn lm mh no np lo nq bi translated">🥇第一名:。npy 文件用时:0.13 秒</h2><p id="2784" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">这是目前最快的数据加载方法。</p><h2 id="46a2" class="nf kz it bd la ng nh dn le ni nj dp li lz nk nl lk md nm nn lm mh no np lo nq bi translated">🥈第二名:。csv 文件用时:2.66 秒</h2><p id="b812" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">熊猫证明了这一点。csv 文件不是没用，但还是速度不够。</p><h2 id="66f9" class="nf kz it bd la ng nh dn le ni nj dp li lz nk nl lk md nm nn lm mh no np lo nq bi translated">🥉第三名:。txt 文件用时:9.67 秒</h2><p id="d81c" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">和其他的相比，这个太慢了，很痛苦。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="15b3" class="ky kz it bd la lb mz ld le lf na lh li jz nb ka lk kc nc kd lm kf nd kg lo lp bi translated">为什么。npy 和 Numpy？</h1><p id="d11e" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">如果你曾经用 Python 做过任何类型的数据处理，你肯定会遇到<strong class="ls iu"> Numpy </strong>和<strong class="ls iu"> Pandas </strong>。这些是 Python 中<strong class="ls iu">数据科学的巨人，是许多其他包的基础，也就是说<strong class="ls iu"> Numpy </strong>提供了像<strong class="ls iu"> Scikit-Learn </strong>和<strong class="ls iu"> Tensorflow </strong>所使用的基本对象！</strong></p><p id="56cf" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">那么，为什么我要谈论这些包，为什么特别是<strong class="ls iu"> Numpy </strong>呢？你可能知道，关于数据文件的行业标准是<em class="nr">。csv </em>文件。现在，虽然很方便，但是与其他选择相比，这些文件已经高度优化了，比如 T31。npy 文件由<strong class="ls iu"> Numpy 提供。</strong></p><blockquote class="ns nt nu"><p id="758e" class="lq lr nr ls b lt mm ju lv lw mn jx ly nv mo mb mc nw mp mf mg nx mq mj mk ml im bi translated">“管他呢，让我们看看代码和证据！”</p></blockquote><p id="c795" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">好吧，继续表演！</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="d44e" class="ky kz it bd la lb mz ld le lf na lh li jz nb ka lk kc nc kd lm kf nd kg lo lp bi translated">代码</h1><p id="16f6" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">首先，我们简单地创建 1000 万个随机数据点，并将其保存为逗号分隔值:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="2818" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">现在，让我们通过传统方式加载，并对数据进行简单的整形:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="e22a" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">这是我得到的输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/92b5b22e5c757090d8485e5bfb054ae0.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*xgQfb_VclDmglAftvN15yw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><strong class="bd ob">Almost 10 seconds to load!</strong></figcaption></figure><p id="6ded" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">现在，您可能会认为整形会阻止更快的加载，但即使我们不做任何整形，我们也会得到类似的时间！</p><h2 id="24b8" class="nf kz it bd la ng nh dn le ni nj dp li lz nk nl lk md nm nn lm mh no np lo nq bi translated">现在我们有了 10000 乘 1000 的数组，让我们继续将它保存为。npy 文件:</h2><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="104f" class="nf kz it od b gy oh oi l oj ok">np.save('data.npy', data_array)</span></pre><p id="58e2" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">对，那很简单，对吧？现在我们有了数组。npy 格式让我们看看我们能以多快的速度阅读它:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="3836" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">这给了我以下输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/3cef32f9de9d0d0cab7ba4e3d92accc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/1*Vxr19Cyy63IRuUxxIMvUlw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><strong class="bd ob">Wow! More than 70x faster!</strong></figcaption></figure><p id="8609" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">快得多，还要注意，我们不需要重塑数据，因为该信息包含在。npy 文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi om"><img src="../Images/91b85b61a74bd6c1569e9097bd5f9d0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*dqsEDzP4wLQmYybsSzIlGA.png"/></div></figure><p id="1d8a" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">使用的另一个“次要”特性。npy files 是文件占用的减少的存储空间。在这种情况下，它的大小减少了 50%以上。这可以警惕很多，但一般来说。npy 文件更易于存储。</p><blockquote class="ns nt nu"><p id="6391" class="lq lr nr ls b lt mm ju lv lw mn jx ly nv mo mb mc nw mp mf mg nx mq mj mk ml im bi translated">“熊猫和它们的后代怎么样？csv 处理？”</p></blockquote><h2 id="0278" class="nf kz it bd la ng nh dn le ni nj dp li lz nk nl lk md nm nn lm mh no np lo nq bi translated">让我们来了解一下！</h2><p id="7c79" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">首先让我们创建一个合适的。csv 文件供熊猫阅读，这将是最有可能的现实生活场景。</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="0c62" class="nf kz it od b gy oh oi l oj ok">data = pd.DataFrame(data_array)<br/>data.to_csv('data.csv', index = None)</span></pre><p id="dd66" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">这只是将我们之前创建的“data_array”保存为一个标准。没有索引的 csv 文件。</p><p id="d8cf" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">现在让我们加载它，看看我们得到了什么样的时间:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="7d25" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">这给了我以下输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/00cb7aa8358644424cba08220d8abea5.png" data-original-src="https://miro.medium.com/v2/resize:fit:502/format:webp/1*dqTjpoWBsEkN4BcHWN4sJQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">2.66 seconds.. Faster than the standard .txt read but still snails pace compared to the .npy file!</figcaption></figure><p id="f59e" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">现在你可能会认为这是作弊，因为我们也在加载一个熊猫数据帧，但事实证明，如果我们像这样读取，时间损失可以忽略不计:</p><pre class="kj kk kl km gt oc od oe of aw og bi"><span id="6995" class="nf kz it od b gy oh oi l oj ok">data_array = np.load('data.npy')<br/>data = pd.DataFrame(data_array)</span></pre><p id="efc7" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">和时间，我们得到以下结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/a9f8f1c09050a6738aedfee4a76e3f7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:516/format:webp/1*xbrT84s-zp3K395t6gSQcA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Almost no different from loading without a DataFrame.</figcaption></figure></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="1499" class="ky kz it bd la lb mz ld le lf na lh li jz nb ka lk kc nc kd lm kf nd kg lo lp bi translated">外卖</h1><p id="87a7" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">您可能习惯于将数据加载和保存为。但是下次你做数据科学项目的时候，试着养成加载和保存的习惯。改为 npy 文件！当你等待内核加载你的文件的时候，它会帮你节省很多停机时间和烦恼！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/6f0e4504feb780318d7f4a062aef2011.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*xwpjjSdZwiOMnPJtdp9L2w.png"/></div></figure></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="84a2" class="ky kz it bd la lb mz ld le lf na lh li jz nb ka lk kc nc kd lm kf nd kg lo lp bi translated">结束语</h1><p id="65e3" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly lz ma mb mc md me mf mg mh mi mj mk ml im bi translated">我希望这篇短文对你有所帮助！</p><p id="774e" class="pw-post-body-paragraph lq lr it ls b lt mm ju lv lw mn jx ly lz mo mb mc md mp mf mg mh mq mj mk ml im bi translated">如果你想多看多学，一定要<a class="ae mr" href="https://medium.com/@peter.nistrup" rel="noopener"> <strong class="ls iu">跟着我上媒</strong> </a>🔍<strong class="ls iu"> </strong>和<a class="ae mr" href="https://twitter.com/peternistrup" rel="noopener ugc nofollow" target="_blank"> <strong class="ls iu">碎碎念</strong> </a> <strong class="ls iu"> </strong>🐦</p><div class="op oq gp gr or os"><a href="https://medium.com/@peter.nistrup" rel="noopener follow" target="_blank"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd iu gy z fp ox fr fs oy fu fw is bi translated">彼得·尼斯特鲁普-中等</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">阅读彼得·尼斯特拉普在媒介上的作品。数据科学、统计和人工智能...推特:@PeterNistrup，LinkedIn…</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">medium.com</p></div></div><div class="pb l"><div class="pc l pd pe pf pb pg ks os"/></div></div></a></div></div></div>    
</body>
</html>