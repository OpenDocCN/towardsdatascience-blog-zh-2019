<html>
<head>
<title>Getting started with Polynote: Netflix’s Data Science Notebooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Polynote 入门:网飞的数据科学笔记本</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/getting-started-with-polynote-netflixs-data-science-notebooks-47fa01eae156?source=collection_archive---------10-----------------------#2019-10-26">https://towardsdatascience.com/getting-started-with-polynote-netflixs-data-science-notebooks-47fa01eae156?source=collection_archive---------10-----------------------#2019-10-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/7ae38dc4c3fe1e87b7901fbca7b80c7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y8q6Y3eyUtLWiSQLKegCgQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Source: <a class="ae kf" href="https://polynote.org/" rel="noopener ugc nofollow" target="_blank">https://polynote.org/</a></figcaption></figure><p id="61c9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://www.tusharck.com/" rel="noopener ugc nofollow" target="_blank">图沙尔·卡普尔</a>:(<a class="ae kf" href="https://www.tusharck.com/" rel="noopener ugc nofollow" target="_blank">https://www.tusharck.com/</a>)</p><p id="8698" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2019 年 10 月 23 日，<a class="ae kf" href="https://netflix.com" rel="noopener ugc nofollow" target="_blank">网飞</a>宣布开源推出 Polynote:一款新的多语言笔记本，这是他们开发的内部基于 JVM 的 ML 平台笔记本，现在向公众发布。它具有一些迄今为止您在笔记本 ide 中缺少的革命性功能，特别是对于数据科学家和机器学习研究人员来说，它通过一流的 Scala 支持、Apache Spark 集成、多语言互操作性(包括 Scala、Python 和 SQL)为他们提供了以前不存在的工具和灵活性。自动完成功能在顶部添加了樱桃。以下是帮助您设置和运行带有<a class="ae kf" href="https://spark.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Spark </a>配置的笔记本的步骤。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="b8d7" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">设置 Polynote 笔记本 IDE 的步骤(Mac/Linux)</h1><ol class=""><li id="2e28" class="mj mk it ki b kj ml kn mm kr mn kv mo kz mp ld mq mr ms mt bi translated">下载以下内容:</li></ol><ul class=""><li id="f3f2" class="mj mk it ki b kj kk kn ko kr mu kv mv kz mw ld mx mr ms mt bi translated">多项式:<a class="ae kf" href="https://github.com/polynote/polynote/releases" rel="noopener ugc nofollow" target="_blank">https://github.com/polynote/polynote/releases</a></li><li id="c9a2" class="mj mk it ki b kj my kn mz kr na kv nb kz nc ld mx mr ms mt bi translated">阿帕奇火花:<a class="ae kf" href="https://spark.apache.org/downloads.html" rel="noopener ugc nofollow" target="_blank">https://spark.apache.org/downloads.html</a></li><li id="40db" class="mj mk it ki b kj my kn mz kr na kv nb kz nc ld mx mr ms mt bi translated">Java(根据您的操作系统选择):<a class="ae kf" href="https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" rel="noopener ugc nofollow" target="_blank">https://www . Oracle . com/tech network/Java/javase/downloads/JDK 8-downloads-2133151 . html</a></li></ul><p id="527f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2.打开终端并转到下载位置:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="48b1" class="nm lm it ni b gy nn no l np nq">cd Users/user_name/Downloads</span></pre><p id="2ed8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">3.解压缩 tar 文件:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="9dc4" class="nm lm it ni b gy nn no l np nq">tar -zxvpf polynote-dist.tar.gz<br/>cd polynote</span></pre><p id="315f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">4.解压缩 Apache Spark 文件(您可能需要根据 Spark 版本更改文件名):</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="5f75" class="nm lm it ni b gy nn no l np nq">tar -zxvpf <!-- -->spark-2.4.4-bin-hadoop2.7.tgz<br/>cd polynote</span></pre><p id="97df" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">5.现在，您需要设置一些环境变量以使 polynote 正常运行，请设置以下变量:</p><p id="72ec" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu"> <em class="nr">注</em> </strong>:</p><ol class=""><li id="5c4f" class="mj mk it ki b kj kk kn ko kr mu kv mv kz mw ld mq mr ms mt bi translated">将<em class="nr">用户名</em>更改为您的用户</li><li id="475e" class="mj mk it ki b kj my kn mz kr na kv nb kz nc ld mq mr ms mt bi translated">将<strong class="ki iu"> JAVA_HOME </strong> path 变量<strong class="ki iu"> </strong>中的<strong class="ki iu"> jdk1.8.0_191.jdk </strong>修改为您系统中安装的版本。要检查版本，您可以在终端上运行<code class="fe ns nt nu ni b">java -version</code>。</li></ol><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="8a87" class="nm lm it ni b gy nn no l np nq"><strong class="ni iu">export</strong> <strong class="ni iu">JAVA_HOME</strong>=/Library/Java/JavaVirtualMachines/jdk1.8.0_191.jdk/Contents/Home/</span><span id="7f06" class="nm lm it ni b gy nv no l np nq"><strong class="ni iu">export</strong> <strong class="ni iu">SPARK_HOME</strong>=/Users/user_name/Downloads/spark-2.4.4-bin-hadoop2.7</span><span id="2afc" class="nm lm it ni b gy nv no l np nq"><strong class="ni iu">export PATH</strong>="$PATH:$SPARK_HOME/bin:$SPARK_HOME/sbin"</span></pre><p id="4570" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">6.检查 spark-submit 是否工作，在您的终端中键入<strong class="ki iu"> spark-submit </strong>，然后您应该会看到类似这样的内容。</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="0a79" class="nm lm it ni b gy nn no l np nq">Usage: spark-submit [options] &lt;app jar | python file | R file&gt; [app arguments]</span><span id="f483" class="nm lm it ni b gy nv no l np nq">Usage: spark-submit --kill [submission ID] --master [spark://...]</span><span id="f82c" class="nm lm it ni b gy nv no l np nq">Usage: spark-submit --status [submission ID] --master [spark://...]</span><span id="0cd3" class="nm lm it ni b gy nv no l np nq">Usage: spark-submit run-example [options] example-class [example args]<br/>...<br/>...</span></pre><p id="0198" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">7.您还需要安装一些 python 依赖项:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="5e0f" class="nm lm it ni b gy nn no l np nq">pip3 install jep jedi pyspark virtualenv</span></pre><p id="cded" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu"> <em class="nr">注意</em> </strong>:如果你在 Mac 上得到一个“无效活动开发者路径”的错误，你需要通过运行下面的命令来安装 xcode 开发者工具。然后之后就可以安装上面的依赖项了。</p><p id="4d7d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe ns nt nu ni b">xcode-select --install</code></p><p id="d74a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">8.在 polynote 目录下运行以下命令，在浏览器上启动笔记本 IDE(与<a class="ae kf" href="https://www.google.com/chrome/" rel="noopener ugc nofollow" target="_blank"> Google Chrome </a>配合使用效果最佳)</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="4a10" class="nm lm it ni b gy nn no l np nq">./polynote</span></pre><p id="cb6f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">9.打开谷歌浏览器，复制粘贴以下网址:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="1f41" class="nm lm it ni b gy nn no l np nq"><a class="ae kf" href="http://127.0.0.1:8192/" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8192/</a></span></pre><p id="418c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您的 Polynote 笔记本 IDE 现在应该已经启动并运行，应该会看到如下内容:</p><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nw"><img src="../Images/81e7f355530f8c7479c90f2a35dd2d30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yAGhc_dpcufkc5i_w5g1iw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Polynote welcome page</figcaption></figure></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="96f3" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">制作您的第一个 polynote 笔记本并设置 spark 配置</h1><ol class=""><li id="11fe" class="mj mk it ki b kj ml kn mm kr mn kv mo kz mp ld mq mr ms mt bi translated">单击左侧窗格中的加号图标创建一个笔记本。</li></ol><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nx"><img src="../Images/29b14d553fe21147dae29564687df5de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mIe596PUCd7_P76Q8OA_7Q.png"/></div></div></figure><p id="e3b0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2.在弹出的对话框中输入您的 polynote 笔记本的名称，然后按 ok。</p><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ny"><img src="../Images/43dd9cb677e98f1d5c85822f1068c5cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z-sgVsGuAVeckTTLMBQvHA.png"/></div></div></figure><p id="a75c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">3.点击<strong class="ki iu"> <em class="nr">配置&amp;依赖</em> </strong>就在你的笔记本名称上方。</p><p id="cc95" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">4.在这里为笔记本设置 Spark 配置，点击<strong class="ki iu"> <em class="nr">保存&amp;重启</em> </strong>。</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="57b3" class="nm lm it ni b gy nn no l np nq">spark.driver.userClasspathFirst: true</span><span id="e3a5" class="nm lm it ni b gy nv no l np nq">spark.executor.userClasspathFirst: true</span><span id="b7f0" class="nm lm it ni b gy nv no l np nq">spark.master: local[*]</span></pre><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nz"><img src="../Images/805ff822a268ed40520cc56687df3133.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pU4oggFpj-DiBPf0jYlsXQ.png"/></div></div></figure><p id="7870" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">5.添加一个新单元格，添加以下代码，然后按 shift enter 键:</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="98f6" class="nm lm it ni b gy nn no l np nq"><strong class="ni iu">val</strong> scalaDF = spark.createDataFrame(List((8, <strong class="ni iu">"bat"</strong>),<br/>(64, <strong class="ni iu">"mouse"</strong>),<br/>(-27, <strong class="ni iu">"horse"</strong>)))</span></pre><p id="2fa8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">6.要可视化您的数据帧，运行以下代码并按下<strong class="ki iu">图形图标。</strong></p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="87a3" class="nm lm it ni b gy nn no l np nq">scalaDF</span></pre><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oa"><img src="../Images/b26a9132ec929437e149419cb2d7a42c.png" data-original-src="https://miro.medium.com/v2/resize:fit:912/format:webp/1*cBtAXUzkz71zT3G26RIBKg.png"/></div></div></figure><p id="948a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">7.将打开一个弹出框，您可以在其中设置指标和轴，以可视化您的数据框架，如下所示:</p><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ob"><img src="../Images/397e68702501ee05b0186d5e5ec2ce0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RR08JCpXY31Z_tGcr1YaiA.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Sample Graph</figcaption></figure><p id="a4de" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">8.要在 python 中使用数据帧，请执行以下操作:</p><ul class=""><li id="f636" class="mj mk it ki b kj kk kn ko kr mu kv mv kz mw ld mx mr ms mt bi translated">添加一个新的单元格，将该单元格的语言从 Scala 更改为 Python，并运行以下代码:</li></ul><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="0a18" class="nm lm it ni b gy nn no l np nq"><strong class="ni iu">from</strong> pyspark.sql <strong class="ni iu">import</strong> DataFrame</span><span id="28d9" class="nm lm it ni b gy nv no l np nq">pythonDF = DataFrame(scalaDF, sqlContext) # sqlContext is provided by Polynote</span><span id="f6d7" class="nm lm it ni b gy nv no l np nq">pandaDF = pythonDF.toPandas()</span><span id="2dcb" class="nm lm it ni b gy nv no l np nq">pandaDF</span></pre></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><p id="50c1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以从下面的 git URL 查看 polynote 笔记本。</p><p id="8d9d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://github.com/tusharck/polynotebook-sample/blob/master/first_polynotebook.ipynb" rel="noopener ugc nofollow" target="_blank">https://github . com/tusharck/polynotebook-sample/blob/master/first _ polynotebook . ipynb</a></p><p id="9549" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">也可以查看下面关于混合编程语言的 polynote 文档:</p><p id="a9a0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://polynote.org/docs/03-mixing-programming-languages.html" rel="noopener ugc nofollow" target="_blank">https://polynote . org/docs/03-mixing-programming-languages . html</a></p></div></div>    
</body>
</html>