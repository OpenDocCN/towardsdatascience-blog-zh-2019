<html>
<head>
<title>A demonstration of carrying data analysis (Crimes in Denver EDA)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">携带数据分析的演示(丹佛 EDA 犯罪)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-demonstration-of-carrying-data-analysis-crimes-in-denver-eda-5e852bc75bee?source=collection_archive---------13-----------------------#2019-10-03">https://towardsdatascience.com/a-demonstration-of-carrying-data-analysis-crimes-in-denver-eda-5e852bc75bee?source=collection_archive---------13-----------------------#2019-10-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="fb98" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是我第二次演示使用 Python 进行数据分析。我之前的文章是关于纽约市 Airbnb 开放数据的。请看看，并给我你的意见和想法，让我可以不断改进。</p><div class="ko kp gp gr kq kr"><a rel="noopener follow" target="_blank" href="/a-demonstration-of-carrying-data-analysis-new-york-city-airbnb-open-data-a02d0ce8292d"><div class="ks ab fo"><div class="kt ab ku cl cj kv"><h2 class="bd iu gy z fp kw fr fs kx fu fw is bi translated">携带数据分析演示(纽约市 Airbnb 开放数据)</h2><div class="ky l"><h3 class="bd b gy z fp kw fr fs kx fu fw dk translated">在本文中，我将使用 Pythons 进行数据分析，并记录下在此过程中的每一个发现和想法</h3></div><div class="kz l"><p class="bd b dl z fp kw fr fs kx fu fw dk translated">towardsdatascience.com</p></div></div><div class="la l"><div class="lb l lc ld le la lf lg kr"/></div></div></a></div><p id="d7a9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这次我将分析“丹佛 EDA 中的犯罪”。可以通过以下链接从 Kaggle 下载数据:</p><div class="ko kp gp gr kq kr"><a href="https://www.kaggle.com/paultimothymooney/denver-crime-data" rel="noopener  ugc nofollow" target="_blank"><div class="ks ab fo"><div class="kt ab ku cl cj kv"><h2 class="bd iu gy z fp kw fr fs kx fu fw is bi translated">丹佛犯罪数据</h2><div class="ky l"><h3 class="bd b gy z fp kw fr fs kx fu fw dk translated">下载数千个项目的开放数据集+在一个平台上共享项目。探索热门话题，如政府…</h3></div><div class="kz l"><p class="bd b dl z fp kw fr fs kx fu fw dk translated">www.kaggle.com</p></div></div><div class="la l"><div class="lh l lc ld le la lf lg kr"/></div></div></a></div><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi li"><img src="../Images/63729d858dfdfbd71055c90ad7a759ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JKHW1NqlRpDN90NvWKmuTg.jpeg"/></div></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk">Photo by <a class="ae lx" href="https://unsplash.com/@ericdonzella?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Eric Donzella</a> on <a class="ae lx" href="https://unsplash.com/s/photos/denver?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c375" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下载文件中有两个 csv 文件，一个是包含数据集的“crime . CSV”；另一个是“进攻 _ 代码. csv ”,它将进攻代码解码成各种描述。第一步，我将在 crime.csv 上工作。</p><p id="ecfb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">同样，在导入数据集之后，我喜欢先打印一些记录，然后获取数据集的基本信息。</p><pre class="lj lk ll lm gt ly lz ma mb aw mc bi"><span id="2c45" class="md me it lz b gy mf mg l mh mi">data = pd.read_csv('crime.csv')<br/>data.head()<br/>data.info()</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi mj"><img src="../Images/3096b9a2c8d28e004ed354ef76e66fd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tRALdCAozpbOTHYmqmqz4w.png"/></div></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk">data.head()</figcaption></figure><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/b4e5d0c740dd663d8d018eb59e12d08b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*QuIkYjd3FGAdOfoO-QDPGw.png"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk">data.info()</figcaption></figure><p id="1961" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如 info()所示，有些变量缺少一些值。</p><pre class="lj lk ll lm gt ly lz ma mb aw mc bi"><span id="c53c" class="md me it lz b gy mf mg l mh mi">data.isnull.().sum()</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/792152ad4d916447dc75843ba01c49fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*UeVtD_6GnqwcaC5H0IVKAA.png"/></div></figure><p id="f33d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所以 LAST_OCCURRENCE_DATE 丢失了太多贵重物品。所以没必要留着。对于 INCIDENT_ADDRESS，由于有 GEO_LON 和 GEO_LAT，我将直接使用它们，因此我也将删除 INCIDENT_ADDRESS。我不知道 GEO_X 和 GEO_Y 是什么，但我相信它们也是用来定位的。所以我不会留着它们。对于 GEO_LON 和 GEO_LAT，我将保留那些丢失的记录，因为其他变量是有价值的。</p><pre class="lj lk ll lm gt ly lz ma mb aw mc bi"><span id="2c31" class="md me it lz b gy mf mg l mh mi">data.drop(['INCIDENT_ID','INCIDENT_ADDRESS'],axis=1,inplace=True)</span></pre><p id="eb4c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来是一些与进攻类型相关的栏目；“冒犯 _ 代码”、“冒犯 _ 代码 _ 扩展”、“冒犯 _ 类型 _ID”、“冒犯 _ 类别 _ID”。“冒犯 _ 代码”和“冒犯 _ 代码 _ 扩展”为数字格式；“进攻类型标识”和“进攻类别标识”是字符串格式。现在它可以导入另一个 csv 文件。</p><pre class="lj lk ll lm gt ly lz ma mb aw mc bi"><span id="6812" class="md me it lz b gy mf mg l mh mi">data_codes = pd.read_csv('offense_codes.csv')<br/>data_codes.head()<br/>data__codes.info()</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi mm"><img src="../Images/af4669edbb0efe66a048003cc70103f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6FgmBlAYxt4eOPAfOESqiA.png"/></div></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk">data_codes.head()</figcaption></figure><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/b44e8a0668356cf395336cb70af408e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*jbgIRyEXgspbfFuOVKscGA.png"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk">data_codes.info()</figcaption></figure><p id="6d73" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">data_codes 中没有缺失值。</p><p id="2024" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">除了数据中的这四列，data_codes 中还有一些列。因此，最好先将它们结合起来，以获得更详细的信息。</p><p id="29be" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但首先我会检查“crime.csv”中的现有信息是否与“offense _ codes.csv”相同</p><pre class="lj lk ll lm gt ly lz ma mb aw mc bi"><span id="a3ba" class="md me it lz b gy mf mg l mh mi">data_temp = data.merge(right=data_codes,how='left', left_on =['OFFENSE_CODE','OFFENSE_CODE_EXTENSION'],right_on=['OFFENSE_CODE','OFFENSE_CODE_EXTENSION'])</span><span id="8be8" class="md me it lz b gy mo mg l mh mi">(data_temp['OFFENSE_TYPE_ID_x']==data_temp['OFFENSE_TYPE_ID_y']).all()</span><span id="de2b" class="md me it lz b gy mo mg l mh mi">(data_temp['OFFENSE_CATEGORY_ID_x']==data_temp['OFFENSE_CATEGORY_ID_y']).all()</span><span id="ee49" class="md me it lz b gy mo mg l mh mi">(data_temp['IS_CRIME_x']==data_temp['IS_CRIME_y']).all()</span><span id="d39f" class="md me it lz b gy mo mg l mh mi">(data_temp['IS_TRAFFIC_x']==data_temp['IS_TRAFFIC_y']).all()</span></pre><p id="d3c3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所以所有结果都是真的。这意味着“crime.csv”中的那些现有列在与“offense _ codes.csv”合并后是相同的。所以我们只需要保留从“进攻 _ 代码. csv”中获得的新列。</p><pre class="lj lk ll lm gt ly lz ma mb aw mc bi"><span id="e5aa" class="md me it lz b gy mf mg l mh mi">data = data_temp.loc[:,~data_temp.columns.str.endswith('_y')]<br/>data.columns = data.columns.str.replace('_x', '')</span></pre><p id="4321" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">由于只执行了左连接，因此有必要再次检查连接后是否有任何缺失值。</p><pre class="lj lk ll lm gt ly lz ma mb aw mc bi"><span id="6a87" class="md me it lz b gy mf mg l mh mi">data.isnull().sum()</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/f0a0c77bc447c8e67f4965f5f9a3774a.png" data-original-src="https://miro.medium.com/v2/resize:fit:624/format:webp/1*NJuSyFeSOk_3TsOK-1kidA.png"/></div></figure><p id="bb7d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">很好，连接后没有丢失值。所以不需要保留“进攻 _ 代码”和“进攻 _ 代码 _ 扩展”。让我们移除它们</p><pre class="lj lk ll lm gt ly lz ma mb aw mc bi"><span id="d847" class="md me it lz b gy mf mg l mh mi">data.drop(['OFFENSE_CODE','OFFENSE_CODE_EXTENSION'],axis=1,inplace=True)</span></pre><p id="8e72" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在进入下一步。</p><p id="0b93" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有两列存储日期信息，“首次发生日期”和“报告日期”。但是，回到 data.info()，它们只存储为字符串。所以最好把它们的格式改成 datetime 格式。</p><pre class="lj lk ll lm gt ly lz ma mb aw mc bi"><span id="3cc1" class="md me it lz b gy mf mg l mh mi">data['FIRST_OCCURRENCE_DATE'] = pd.to_datetime(data['FIRST_OCCURRENCE_DATE'], infer_datetime_format=True)<br/>data['REPORTED_DATE'] = pd.to_datetime(data['REPORTED_DATE'], infer_datetime_format=True)</span></pre><p id="434d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们开始吧。</p><p id="9200" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我正在处理的数据集涵盖了从 2004 年 1 月 2 日到 2019 年 9 月 26 日。显然，数据集在不断更新，所以如果你的结果与我的不同，不要担心。</p><p id="4687" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">第一次分析:最常见的犯罪</p><pre class="lj lk ll lm gt ly lz ma mb aw mc bi"><span id="fb5c" class="md me it lz b gy mf mg l mh mi">data.groupby('OFFENSE_CATEGORY_NAME').agg({'INCIDENT_ID':'count'}).sort_values(by='INCIDENT_ID',ascending=False)</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/acefff991d3ae41f26f262b46b0129f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:738/format:webp/1*uS9nd90NUlV9H9DP4fPmJA.png"/></div></figure><p id="df48" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最常见的类别是“交通事故”。幸运的是,“谋杀”是最少发生的一个。</p><pre class="lj lk ll lm gt ly lz ma mb aw mc bi"><span id="f590" class="md me it lz b gy mf mg l mh mi">data[data['OFFENSE_CATEGORY_NAME']=='Traffic Accident'].groupby('OFFENSE_TYPE_NAME').agg({'INCIDENT_ID':'count'}).sort_values(by='INCIDENT_ID',ascending=False)</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/c502883df89eb84ee0079591ce9fbf3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*Ovm4oR8iWT7LA7JSjRR0FA.png"/></div></figure><p id="e9db" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在“交通事故”中，普通交通事故最多，约占总“交通事故”的三分之二。第二种是肇事逃逸。</p><p id="100d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你想知道每个犯罪类别的前五种犯罪类型，你可以使用下面一行代码:</p><pre class="lj lk ll lm gt ly lz ma mb aw mc bi"><span id="aea0" class="md me it lz b gy mf mg l mh mi">data.groupby(['OFFENSE_CATEGORY_NAME','OFFENSE_TYPE_NAME']).agg({'INCIDENT_ID':'count'}).groupby(['OFFENSE_CATEGORY_NAME']).head().sort_values(by=['OFFENSE_CATEGORY_NAME','INCIDENT_ID'],ascending = [True,False])</span></pre><p id="31d2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">基本上，你首先执行一个分组，并得到每个进攻类别类型组合的计数。然后使用进攻类型执行另一个 groupby，并使用 head()获得前五种进攻类型。最后，通过排序呈现结果。</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi ms"><img src="../Images/34fd596c77d66acf9d5b79cf17f77932.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sRdG1Jj_bumLK65KoClFGQ.png"/></div></div></figure><p id="3428" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">那么接下来的分析就是要找出每起犯罪哪个时间段报案比较常见。为此，第一步是创建一个新列来存储“FIRST_OCCURRENCE_DATE”的小时</p><pre class="lj lk ll lm gt ly lz ma mb aw mc bi"><span id="8524" class="md me it lz b gy mf mg l mh mi">data['FIRST_OCCURRENCE_HOUR'] = data['FIRST_OCCURRENCE_DATE'].dt.hour</span></pre><p id="4b2f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后绘制频率图。</p><pre class="lj lk ll lm gt ly lz ma mb aw mc bi"><span id="bf06" class="md me it lz b gy mf mg l mh mi">sns.countplot(data=data,x='FIRST_OCCURRENCE_HOUR')<br/>plt.title('Frequency of crime by hour')<br/>plt.show()</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/eac1fd5afc2d5a430ec82d87e36075ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/1*FT3Gow_H9J1UTqESoJnfPA.png"/></div></figure><p id="70f5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所以大多数报道的犯罪都发生在白天。我相信那些罪行只是小罪。</p><pre class="lj lk ll lm gt ly lz ma mb aw mc bi"><span id="f018" class="md me it lz b gy mf mg l mh mi">data[data['FIRST_OCCURRENCE_HOUR'].isin([15,16,17,18])].groupby(['FIRST_OCCURRENCE_HOUR','OFFENSE_CATEGORY_NAME']).agg({'INCIDENT_ID':'count'}).groupby(['FIRST_OCCURRENCE_HOUR']).head().sort_values(by=['FIRST_OCCURRENCE_HOUR','INCIDENT_ID'],ascending = [True,False])</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi mu"><img src="../Images/98cb1cb65f2a97e0278d1dbb9faa322e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*YzWTbngoq0ouFcoBp8-bfA.png"/></div></div></figure><p id="ac83" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但是总的来说，轻罪比重罪多得多，仅仅比较绝对数字是没有意义的。因此，最好进行升力分析。</p><p id="900e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">升力分析是一种常见但有用的分析。它首先用于数据挖掘，但现在它在许多领域都有应用。更多信息，维基百科和 kdnuggets 可以帮助你。</p><div class="ko kp gp gr kq kr"><a href="https://en.wikipedia.org/wiki/Lift_%28data_mining%29" rel="noopener  ugc nofollow" target="_blank"><div class="ks ab fo"><div class="kt ab ku cl cj kv"><h2 class="bd iu gy z fp kw fr fs kx fu fw is bi translated">Lift(数据挖掘)</h2><div class="ky l"><h3 class="bd b gy z fp kw fr fs kx fu fw dk translated">在数据挖掘和关联规则学习中，提升是目标模型(关联规则)性能的度量</h3></div><div class="kz l"><p class="bd b dl z fp kw fr fs kx fu fw dk translated">en.wikipedia.org</p></div></div></div></a></div><div class="ko kp gp gr kq kr"><a href="https://www.kdnuggets.com/2016/03/lift-analysis-data-scientist-secret-weapon.html" rel="noopener  ugc nofollow" target="_blank"><div class="ks ab fo"><div class="kt ab ku cl cj kv"><h2 class="bd iu gy z fp kw fr fs kx fu fw is bi translated">提升分析——数据科学家的秘密武器——KD nuggets</h2><div class="ky l"><h3 class="bd b gy z fp kw fr fs kx fu fw dk translated">作者安迪·高施米特，阿卡努。每当我阅读关于数据科学的文章时，我都觉得有一些重要的方面…</h3></div><div class="kz l"><p class="bd b dl z fp kw fr fs kx fu fw dk translated">www.kdnuggets.com</p></div></div><div class="la l"><div class="mv l lc ld le la lf lg kr"/></div></div></a></div><p id="b354" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">基本上，提升分析是计算某一事件在特定情况下发生的概率是高还是低。例如，电梯分析可以判断午夜谋杀是否更频繁。然后我们计算午夜发生谋杀的概率和全天的概率然后得到比率。</p><p id="b61c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">摘自维基百科，“如果某个规则的提升值为 1，这意味着前因和后果出现的概率是相互独立的”</p><p id="f896" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这里，前因是午夜，后果是谋杀。</p><p id="3578" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所以我定义“午夜”是从晚上 10 点到凌晨 4 点。然后下一步是计算全天和午夜期间的谋杀概率。</p><pre class="lj lk ll lm gt ly lz ma mb aw mc bi"><span id="c9bc" class="md me it lz b gy mf mg l mh mi">murder_ttl_count = data[data['OFFENSE_CATEGORY_NAME']=='Murder']['INCIDENT_ID'].count()<br/>ttl_count = data['INCIDENT_ID'].count()<br/>murder_midnight_count = data[(data['OFFENSE_CATEGORY_NAME']=='Murder')&amp;((data['FIRST_OCCURRENCE_HOUR']&gt;=22)| (data['FIRST_OCCURRENCE_HOUR']&lt;=4))]['INCIDENT_ID'].count()<br/>midnight_count= data[(data['FIRST_OCCURRENCE_HOUR']&gt;=22)| (data['FIRST_OCCURRENCE_HOUR']&lt;=4)]['INCIDENT_ID'].count()</span><span id="46a4" class="md me it lz b gy mo mg l mh mi">lift = (murder_midnight_count / midnight_count) / (murder_ttl_count/ttl_count)<br/>print("Average probability of having murder during the whole day : {:1.6f}".format((murder_ttl_count/ttl_count)))<br/>print("Probability of having murder during the midnight : {:1.6f}".format((murder_midnight_count / midnight_count)))<br/>print("The lift is : {:1.6f}".format(lift))</span><span id="dcd8" class="md me it lz b gy mo mg l mh mi">Average probability of having murder during the whole day : 0.000604<br/>Probability of having murder during the midnight : 0.001190<br/>The lift is : 1.969831</span></pre><p id="d47f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">由于电梯大于 1，谋杀在午夜比平均水平更频繁。您可以对其他类别进行类似的计算，找出每种犯罪类型的流行时间段。</p><p id="2e43" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下一步是查看任何报道谋杀的热门地点。和上次一样，我将使用 follow 来可视化数据。</p><pre class="lj lk ll lm gt ly lz ma mb aw mc bi"><span id="7192" class="md me it lz b gy mf mg l mh mi">data_murder = data[data['OFFENSE_CATEGORY_NAME']=='Murder']<br/>denver_map = folium.Map(location=[39.7, -104.9],zoom_start =11)<br/>data_loc= data_murder[['GEO_LAT','GEO_LON']].values<br/>data_loc =data_loc.tolist()<br/>hm = plugins.HeatMap(data_loc)<br/>hm.add_to(denver_map)<br/>denver_map</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi mw"><img src="../Images/ef6af9781877d4cf0bb0d9a02196d4dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pWSlo1sYbHIt6c3maxY0aw.png"/></div></div></figure><p id="d459" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">大多数谋杀发生在丹佛的北部和西北部。</p></div><div class="ab cl mx my hx mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="im in io ip iq"><p id="57fe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本次分析到此为止。欢迎分享你的想法和评论，这样我可以继续改进。请随意分享并鼓掌支持我。</p><p id="49bb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以下是 GitHub 上完整代码的链接:</p><p id="b626" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae lx" href="https://github.com/wyfok/Crimes_in_Denver_EDA" rel="noopener ugc nofollow" target="_blank">https://github.com/wyfok/Crimes_in_Denver_EDA</a></p></div></div>    
</body>
</html>