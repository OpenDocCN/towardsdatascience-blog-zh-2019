<html>
<head>
<title>Using the Pandas “Resample” Function</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用熊猫“重采样”功能</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/using-the-pandas-resample-function-a231144194c4?source=collection_archive---------1-----------------------#2019-09-11">https://towardsdatascience.com/using-the-pandas-resample-function-a231144194c4?source=collection_archive---------1-----------------------#2019-09-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/4177fe960f6ba958cd06edb63441559c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qa7gTbvbNZaeu5GwY6kxzQ.jpeg"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Photo by <a class="ae jg" href="https://unsplash.com/@jeshoots?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">JESHOOTS.COM</a> on <a class="ae jg" href="https://unsplash.com/search/photos/calendar?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><div class=""><h2 id="ad57" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">改变过去的下一件最好的事情——将它聚合起来。熊猫重采样功能的技术介绍。</h2></div><p id="d562" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi lu translated"><span class="l lv lw lx bm ly lz ma mb mc di"> T </span>他的文章是对用于日期时间操作的<strong class="la jk">熊猫重采样功能</strong>的技术方面的介绍。我希望它能成为那些不太愿意去挖掘熊猫源代码的人的一个可读的伪文档来源！</p><p id="9c9e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您想查看用于生成示例的代码并查看本文中未包含的更多示例，请单击此处的<a class="ae jg" href="https://github.com/jeremyrchow/guide_to_pandas_resample/blob/master/Resampling_Notebook.ipynb" rel="noopener ugc nofollow" target="_blank"/>链接。</p><p id="e4b3" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们开始吧！</p><h1 id="db46" class="md me jj bd mf mg mh mi mj mk ml mm mn kp mo kq mp ks mq kt mr kv ms kw mt mu bi translated">什么是重采样？</h1><p id="edab" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">当给定一个以某个时间间隔记录的数据集，并且您想将时间间隔更改为其他时间间隔时，重新采样是必要的。例如，您可以将每月数据聚合为年度数据，或者将每小时数据向上采样为分钟数据。</p><p id="cad1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">重采样的语法非常简单:</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="0204" class="nj me jj nf b gy nk nl l nm nn">&lt;DataFrame or Series&gt;.<strong class="nf jk">resample(arguments).&lt;aggregate function&gt;</strong></span></pre><p id="06a9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我将深入探讨什么是参数以及如何使用它们，但首先这里有一个基本的、现成的演示。您将需要一个<strong class="la jk">日期时间</strong>类型的索引或列来执行以下操作:</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="1bb7" class="nj me jj nf b gy nk nl l nm nn"># Given a Series object called data with some number value per date<br/>&gt;&gt;&gt;<br/>╔═══════════════════════╦══════╗<br/>║         date          ║ val  ║<br/>╠═══════════════════════╬══════╣<br/>║ 2000-01-01 00:00:00   ║    0 ║<br/>║ 2000-01-01 00:01:00   ║    2 ║<br/>║ 2000-01-01 00:02:00   ║    4 ║<br/>║ 2000-01-01 00:03:00   ║    6 ║<br/>║ 2000-01-01 00:04:00   ║    8 ║<br/>║ 2000-01-01 00:05:00   ║   10 ║<br/>║ 2000-01-01 00:06:00   ║   12 ║<br/>║ 2000-01-01 00:07:00   ║   14 ║<br/>║ 2000-01-01 00:08:00   ║   16 ║<br/>╚═══════════════════════╩══════╝<br/>Freq: T, dtype: int64</span><span id="728b" class="nj me jj nf b gy no nl l nm nn"># We can <strong class="nf jk">resample this </strong>to every other minute instead and aggregate by summing the intermediate rows:<br/>data.resample('2min').sum()</span><span id="e378" class="nj me jj nf b gy no nl l nm nn">&gt;&gt;&gt;<br/><br/>╔═════════════════════╦══════╗<br/>║        date         ║ val  ║<br/>╠═════════════════════╬══════╣<br/>║ 2000-01-01 00:00:00 ║    2 ║<br/>║ 2000-01-01 00:02:00 ║   10 ║<br/>║ 2000-01-01 00:04:00 ║   18 ║<br/>║ 2000-01-01 00:06:00 ║   26 ║<br/>║ 2000-01-01 00:08:00 ║   16 ║<br/>╚═════════════════════╩══════╝</span><span id="22e6" class="nj me jj nf b gy no nl l nm nn">Freq: 2T, dtype: int64</span></pre><p id="55a2" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，我们已经对重采样有了基本的了解，让我们进入代码！</p><h1 id="6be9" class="md me jj bd mf mg mh mi mj mk ml mm mn kp mo kq mp ks mq kt mr kv ms kw mt mu bi translated">争论</h1><p id="5c47" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">按照源代码的顺序:</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="242f" class="nj me jj nf b gy nk nl l nm nn">pd.DataFrame.resample<br/>(<br/><strong class="nf jk">rule,</strong> <br/>how=None, <br/><strong class="nf jk">axis=0, <br/></strong>fill_method=None, <br/><strong class="nf jk">closed=None, <br/>label=None, </strong><br/>convention=”start”, <br/>kind=None, <strong class="nf jk"><br/>loffset=None,</strong> <br/>limit=None, <br/><strong class="nf jk">base=0, <br/>on=None,</strong> <br/><strong class="nf jk">level=None<br/></strong>)</span></pre><p id="57ff" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我已经大胆提出了我将涉及的论点。其余部分要么被弃用，要么用于句点，而不是日期时间分析，我在本文中将不再赘述。</p><h1 id="4e26" class="md me jj bd mf mg mh mi mj mk ml mm mn kp mo kq mp ks mq kt mr kv ms kw mt mu bi translated">1.“规则”参数</h1><p id="9786" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated"><code class="fe np nq nr nf b">string</code>包含<strong class="la jk">规则</strong>别名和/或数字</p><p id="291e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是重采样的核心。您在这里输入的字符串决定了数据重新采样的时间间隔，如下行的粗体部分所示:</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="5b1b" class="nj me jj nf b gy nk nl l nm nn">data.resample('<strong class="nf jk">2min</strong>').sum()</span></pre><p id="154b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如您所见，您可以在字符串前插入浮点数或整数来更改频率。您甚至可以在非常特定的时间内将<strong class="la jk">多对浮点/字符串组合在一起</strong>！例如:</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="4e35" class="nj me jj nf b gy nk nl l nm nn">'3min' or '3T' = 3 minutes</span><span id="cc3e" class="nj me jj nf b gy no nl l nm nn">'SMS' = Two times a month</span><span id="b694" class="nj me jj nf b gy no nl l nm nn">'1D3H.5min20S' = One Day, 3 hours, .5min(30sec) + 20sec</span></pre><p id="cf65" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了省去查找重采样字符串的麻烦，我发布了下表:</p><figure class="na nb nc nd gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ns"><img src="../Images/20c54960044ad9bd0a5074676e0a42f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y7Hkvh5afvVPOjDttCqcvQ.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">From Pandas documentation: <a class="ae jg" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#offset-aliases" rel="noopener ugc nofollow" target="_blank">https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#offset-aliases</a></figcaption></figure><p id="9d96" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦你加入了你的规则，你需要决定如何减少旧的数据点或者填充新的数据点。该函数紧接在重采样函数调用之后:</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="9a05" class="nj me jj nf b gy nk nl l nm nn">data.resample('2min').<strong class="nf jk">sum()</strong></span></pre><p id="27ff" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">重采样有两种:</p><ol class=""><li id="6678" class="nt nu jj la b lb lc le lf lh nv ll nw lp nx lt ny nz oa ob bi translated"><strong class="la jk">下采样</strong> —在更宽的时间范围内(从几个月到几年)重新采样</li></ol><ul class=""><li id="3e9e" class="nt nu jj la b lb lc le lf lh nv ll nw lp nx lt oc nz oa ob bi translated">这非常简单，因为它可以使用所有的 groupby 聚合函数，包括<strong class="la jk"> mean()、min()、max()、sum() </strong>等等。</li><li id="9883" class="nt nu jj la b lb od le oe lh of ll og lp oh lt oc nz oa ob bi translated">在下采样中，行数从<strong class="la jk">下降到</strong>。</li></ul><p id="06c6" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk"> 2 .上采样</strong> —在更短的时间内(从小时到分钟)重新采样</p><p id="21c1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这将导致<strong class="la jk">额外的</strong>空行，因此您有以下选项用数值填充这些空行:</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="6f7a" class="nj me jj nf b gy nk nl l nm nn">1. ffill() or pad()<br/>2. bfill() or backfill()</span></pre><ul class=""><li id="081b" class="nt nu jj la b lb lc le lf lh nv ll nw lp nx lt oc nz oa ob bi translated"><strong class="la jk">‘向前填充’或‘填充’—</strong>使用最后一个已知值填充新值。</li><li id="0e08" class="nt nu jj la b lb od le oe lh of ll og lp oh lt oc nz oa ob bi translated"><strong class="la jk">‘回填’—</strong>使用下一个已知值来填充新值。</li><li id="424d" class="nt nu jj la b lb od le oe lh of ll og lp oh lt oc nz oa ob bi translated">您还可以使用不带参数的<strong class="la jk"> asfreq() </strong>函数用 nan 填充<strong class="la jk">。这将产生包含 nan 的新数据点，您可以稍后使用<strong class="la jk"> fillna() </strong>函数。</strong></li></ul><p id="9867" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是向前和向后填充的一些演示:</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="abc9" class="nj me jj nf b gy nk nl l nm nn">Starting with months table:<br/>╔════════════╦═════╗<br/>║    date    ║ val ║<br/>╠════════════╬═════╣<br/>║ 2000-01-31 ║   0 ║<br/>║ 2000-02-29 ║   2 ║<br/>║ 2000-03-31 ║   4 ║<br/>║ 2000-04-30 ║   6 ║<br/>║ 2000-05-31 ║   8 ║<br/>╚════════════╩═════╝</span><span id="8260" class="nj me jj nf b gy no nl l nm nn">print('Forward Fill')<br/>print(months.resample('SMS').ffill())</span><span id="5691" class="nj me jj nf b gy no nl l nm nn">╔════════════╦═════╗<br/>║    date    ║ val ║<br/>╠════════════╬═════╣<br/>║ 2000-01-15 ║ NaN ║<br/>║ 2000-02-01 ║ 0.0 ║<br/>║ 2000-02-15 ║ 0.0 ║<br/>║ 2000-03-01 ║ 2.0 ║<br/>║ 2000-03-15 ║ 2.0 ║<br/>║ 2000-04-01 ║ 4.0 ║<br/>║ 2000-04-15 ║ 4.0 ║<br/>║ 2000-05-01 ║ 6.0 ║<br/>║ 2000-05-15 ║ 6.0 ║<br/>╚════════════╩═════╝</span><span id="a192" class="nj me jj nf b gy no nl l nm nn"># Alternative to ffill is bfill (backward fill) that takes value of next existing months point<br/>print('Backward Fill')<br/>print(months.resample('SMS').bfill())</span><span id="b613" class="nj me jj nf b gy no nl l nm nn">╔════════════╦═════╗<br/>║    date    ║ val ║<br/>╠════════════╬═════╣<br/>║ 2000-01-15 ║   0 ║<br/>║ 2000-02-01 ║   2 ║<br/>║ 2000-02-15 ║   2 ║<br/>║ 2000-03-01 ║   4 ║<br/>║ 2000-03-15 ║   4 ║<br/>║ 2000-04-01 ║   6 ║<br/>║ 2000-04-15 ║   6 ║<br/>║ 2000-05-01 ║   8 ║<br/>║ 2000-05-15 ║   8 ║<br/>╚════════════╩═════╝</span></pre><h1 id="b775" class="md me jj bd mf mg mh mi mj mk ml mm mn kp mo kq mp ks mq kt mr kv ms kw mt mu bi translated">2.“关闭”参数</h1><p id="5d69" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated"><code class="fe np nq nr nf b">'left', 'right', or None</code></p><p id="13ee" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我将在这里包括他们的文档注释，因为它相当简洁地描述了基础知识。</p><blockquote class="oi oj ok"><p id="1270" class="ky kz ol la b lb lc kk ld le lf kn lg om li lj lk on lm ln lo oo lq lr ls lt im bi translated">仓区间的哪一侧是封闭的。除了“M”、“A”、“Q”、“BM”、“T20”、“BA”、“BQ”和“W”之外，所有频率偏移的默认值都是“左”。</p></blockquote><p id="d1a3" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">closed 参数告诉哪一侧被包括在内，<strong class="la jk">‘closed’是在每个时间间隔的计算中包括的一侧</strong>(意味着另一侧不包括在内)。你可以在这里看到它的表现:</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="9860" class="nj me jj nf b gy nk nl l nm nn"># Original Table 'minutes'<br/><br/>╔═════════════════════╦═════╗<br/>║        date         ║ val ║<br/>╠═════════════════════╬═════╣<br/>║ 2000-01-01 00:00:00 ║   0 ║<br/>║ 2000-01-01 00:01:00 ║   2 ║<br/>║ 2000-01-01 00:02:00 ║   4 ║<br/>║ 2000-01-01 00:03:00 ║   6 ║<br/>║ 2000-01-01 00:04:00 ║   8 ║<br/>║ 2000-01-01 00:05:00 ║  10 ║<br/>║ 2000-01-01 00:06:00 ║  12 ║<br/>║ 2000-01-01 00:07:00 ║  14 ║<br/>║ 2000-01-01 00:08:00 ║  16 ║<br/>╚═════════════════════╩═════╝</span><span id="0f48" class="nj me jj nf b gy no nl l nm nn"># The default is closed='left'<br/>df=pd.DataFrame()<br/>df['left'] = minutes.resample('2min').sum()<br/>df['right'] = minutes.resample('2min',closed='right').sum()<br/>df<br/>&gt;&gt;&gt;</span><span id="74f2" class="nj me jj nf b gy no nl l nm nn">╔═════════════════════╦══════╦═══════╗<br/>║ index               ║ left ║ right ║<br/>╠═════════════════════╬══════╬═══════╣<br/>║ 2000-01-01 00:00:00 ║ 2    ║ 6.0   ║<br/>║ 2000-01-01 00:02:00 ║ 10   ║ 14.0  ║<br/>║ 2000-01-01 00:04:00 ║ 18   ║ 22.0  ║<br/>║ 2000-01-01 00:06:00 ║ 26   ║ 30.0  ║<br/>║ 2000-01-01 00:08:00 ║ 16   ║ NaN   ║<br/>╚═════════════════════╩══════╩═══════╝</span></pre><h1 id="2981" class="md me jj bd mf mg mh mi mj mk ml mm mn kp mo kq mp ks mq kt mr kv ms kw mt mu bi translated">3.“标签”参数</h1><p id="fd7d" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated"><code class="fe np nq nr nf b">'left', 'right', or None</code></p><p id="a6e8" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">同样，文档非常有用。</p><blockquote class="oi oj ok"><p id="8f7f" class="ky kz ol la b lb lc kk ld le lf kn lg om li lj lk on lm ln lo oo lq lr ls lt im bi translated">用哪个箱柜边缘标签来标记桶。除了“M”、“A”、“Q”、“BM”、“BA”、“BQ”和“W”之外，所有频率偏移的默认值都是“左”。</p></blockquote><p id="1193" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此参数不会更改基础计算，它只是在执行聚合后根据所需的边重新标记输出。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="e370" class="nj me jj nf b gy nk nl l nm nn">df=pd.DataFrame()<br/># Label default is left<br/>df['left'] = minutes.resample('2min').sum()<br/>df['right'] = minutes.resample('2min',label='right').sum()<br/>df</span><span id="c80d" class="nj me jj nf b gy no nl l nm nn">&gt;&gt;&gt;</span><span id="48c1" class="nj me jj nf b gy no nl l nm nn">╔═════════════════════╦══════╦═══════╗<br/>║                     ║ left ║ right ║<br/>╠═════════════════════╬══════╬═══════╣<br/>║ 2000-01-01 00:00:00 ║    2 ║ NaN   ║<br/>║ 2000-01-01 00:02:00 ║   10 ║ 2.0   ║<br/>║ 2000-01-01 00:04:00 ║   18 ║ 10.0  ║<br/>║ 2000-01-01 00:06:00 ║   26 ║ 18.0  ║<br/>║ 2000-01-01 00:08:00 ║   16 ║ 26.0  ║<br/>╚═════════════════════╩══════╩═══════╝</span></pre><h1 id="25c9" class="md me jj bd mf mg mh mi mj mk ml mm mn kp mo kq mp ks mq kt mr kv ms kw mt mu bi translated">4.“Loffset”参数</h1><p id="8f82" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated"><code class="fe np nq nr nf b">string</code>匹配规则符号。</p><p id="a69f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个论点也是不言自明的。它没有改变任何计算，只是在指定的时间内移动标签。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="f8a4" class="nj me jj nf b gy nk nl l nm nn">df=pd.DataFrame()<br/>df['no_offset'] = minutes.resample('2min').sum()<br/>df['2min_offset'] = minutes.resample('2min',loffset='2T').sum()<br/>df['4min_offset'] = minutes.resample('2min',loffset='4T').sum()<br/>df</span><span id="15a7" class="nj me jj nf b gy no nl l nm nn">&gt;&gt;&gt;<br/>╔═════════════════════╦═══════════╦═════════════╦═════════════╗<br/>║ index               ║ no_offset ║ 2min_offset ║ 4min_offset ║<br/>╠═════════════════════╬═══════════╬═════════════╬═════════════╣<br/>║ 2000-01-01 00:00:00 ║         2 ║ NaN         ║ NaN         ║<br/>║ 2000-01-01 00:02:00 ║        10 ║ 2.0         ║ NaN         ║<br/>║ 2000-01-01 00:04:00 ║        18 ║ 10.0        ║ 2.0         ║<br/>║ 2000-01-01 00:06:00 ║        26 ║ 18.0        ║ 10.0        ║<br/>║ 2000-01-01 00:08:00 ║        16 ║ 26.0        ║ 18.0        ║<br/>╚═════════════════════╩═══════════╩═════════════╩═════════════╝</span></pre><h1 id="c128" class="md me jj bd mf mg mh mi mj mk ml mm mn kp mo kq mp ks mq kt mr kv ms kw mt mu bi translated">5.“基本”参数</h1><p id="3f2c" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated"><code class="fe np nq nr nf b">numeric</code>与重采样规则中使用的单位相关的输入</p><p id="e188" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">将计算的基准时间移动一段时间。正如文档所描述的，该函数移动“原点”。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="f36a" class="nj me jj nf b gy nk nl l nm nn">minutes.head().resample('30S').sum()<br/>&gt;&gt;&gt;<br/><br/>╔═════════════════════╦═════╗<br/>║        date         ║ val ║<br/>╠═════════════════════╬═════╣<br/>║ 2000-01-01 00:00:00 ║   0 ║<br/>║ 2000-01-01 00:00:30 ║   0 ║<br/>║ 2000-01-01 00:01:00 ║   2 ║<br/>║ 2000-01-01 00:01:30 ║   0 ║<br/>║ 2000-01-01 00:02:00 ║   4 ║<br/>║ 2000-01-01 00:02:30 ║   0 ║<br/>║ 2000-01-01 00:03:00 ║   6 ║<br/>║ 2000-01-01 00:03:30 ║   0 ║<br/>║ 2000-01-01 00:04:00 ║   8 ║<br/>╚═════════════════════╩═════╝</span><span id="4bb1" class="nj me jj nf b gy no nl l nm nn">minutes.head().resample('30S',base=15).sum()<br/>&gt;&gt;&gt;<br/><br/>╔═════════════════════╦═════╗<br/>║        date         ║ val ║<br/>╠═════════════════════╬═════╣<br/>║ 1999-12-31 23:59:45 ║   0 ║<br/>║ 2000-01-01 00:00:15 ║   0 ║<br/>║ 2000-01-01 00:00:45 ║   2 ║<br/>║ 2000-01-01 00:01:15 ║   0 ║<br/>║ 2000-01-01 00:01:45 ║   4 ║<br/>║ 2000-01-01 00:02:15 ║   0 ║<br/>║ 2000-01-01 00:02:45 ║   6 ║<br/>║ 2000-01-01 00:03:15 ║   0 ║<br/>║ 2000-01-01 00:03:45 ║   8 ║<br/>╚═════════════════════╩═════╝</span><span id="db3f" class="nj me jj nf b gy no nl l nm nn">The table shifted by 15 seconds.</span></pre><h1 id="87a8" class="md me jj bd mf mg mh mi mj mk ml mm mn kp mo kq mp ks mq kt mr kv ms kw mt mu bi translated">6.轴'，'开'和'水平'</h1><p id="d62d" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">这些参数指定重采样所基于的列名或索引。</p><p id="3fb2" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果数据的日期是沿着列而不是沿着行，请指定<code class="fe np nq nr nf b">axis = 1</code></p><p id="8818" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果日期列不是索引，请使用以下命令指定该列的名称:</p><p id="9ce9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe np nq nr nf b">on = 'date_column_name'</code></p><p id="d868" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您有一个多级索引数据帧，使用<code class="fe np nq nr nf b">level</code>指定要重新采样的正确日期时间索引的级别。</p><h1 id="5a11" class="md me jj bd mf mg mh mi mj mk ml mm mn kp mo kq mp ks mq kt mr kv ms kw mt mu bi translated">7.未涉及的其他参数</h1><p id="0abc" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">由于使用其他方法捕获功能，其余的参数已被否决或多余。例如，<code class="fe np nq nr nf b">how</code>和<code class="fe np nq nr nf b">fill_method </code>在重采样调用后不再需要聚合函数，但是<code class="fe np nq nr nf b">how</code>用于下采样，<code class="fe np nq nr nf b">fill_method</code>用于上采样。如果你感兴趣，你可以在<a class="ae jg" href="https://github.com/pandas-dev/pandas/blob/v0.25.1/pandas/core/generic.py#L8135-L8453" rel="noopener ugc nofollow" target="_blank">源文档</a>中读到更多关于这些论点的内容。</p><h1 id="c3fe" class="md me jj bd mf mg mh mi mj mk ml mm mn kp mo kq mp ks mq kt mr kv ms kw mt mu bi translated">谢谢大家！</h1><p id="6b36" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh mx lj lk ll my ln lo lp mz lr ls lt im bi translated">今天就到这里吧！我希望我能阐明重采样是如何工作的，以及它的每个参数是做什么的。敬请关注更多教程和其他数据科学相关文章！</p></div></div>    
</body>
</html>