# 数据中燃烧的多伦多，第 2 部分

> 原文：<https://towardsdatascience.com/toronto-on-fire-in-data-part-2-33e150b8e45d?source=collection_archive---------20----------------------->

![](img/a32f9bf9709aab6420600bb810765b34.png)

## 模拟极端事件及其巨大的随机性

这是关于 2011 年至 2016 年多伦多火灾数据分析的两部分系列的第二部分，我分析了多伦多消防局(TFS)处理的火灾的严重程度。在[系列的第一部分](/toronto-on-fire-in-data-part-1-484435eca880)中，分析了火灾事件集合的一般属性，特别是当发生时的*，但很少或没有考虑事件的火灾性质。*

意外火灾是极端事件比典型事件更重要的一个很好的例子。一个消防部门能够很好地处理 90%的火灾，却不能处理前 10%的严重火灾，这是不合适的。像地震、洪水、流行病、保险索赔和某些财务规划一样，*极端*事件，尽管*罕见*，在任何有能力的设计中都必须考虑。这些非常重要，但难以捉摸的事件伴随着一系列命名的概念出现:*极端事件，肥尾，柏拉图世界，黑天鹅*。为了使概念尽可能简单和直观，我称之为极端事件。

极端事件对纯数据驱动的分析方法提出了根本性的挑战。根据定义，这些是罕见的事件，因此在任何有限的数据收集中，它们的抽样都很差。在机器学习中，偏斜或不平衡类别的[问题](https://machinelearningmastery.com/tactics-to-combat-imbalanced-classes-in-your-machine-learning-dataset/)就是这种情况的一种表现。虽然有办法避开处理这类数据的陷阱，但如果没有系统力学理论来帮助填补空白，数据能够揭示的关于采样不良地区的信息是有根本限制的。

仍然有一些有用的方法来量化极端程度，并获取所研究系统的知识。这是一个积极研究的课题，下面的方法介绍了一些可以做的事情。

## 如何量化严重性

为了继续，我需要量化严重性。决定严重程度的是火灾覆盖的面积，还是火灾持续的时间，还是财产价值的损失，还是危在旦夕的人命数量？答案是:对所有人都是。

实际上，TFS 在部署其有限资源时必须做出这一决定。这是我将用来衡量严重程度的一个*代理指标*:在火灾事故过程中派出的单位数量。机构和负责处理火灾的人员认为火灾更加严重时，应派出更多的单位(消防车、危险品车、供气车、指挥车等)。领域专家将严重性的多目标定义简化为标量属性。

这几乎不是一个完美的代理指标，这是我在本文结尾时再次提到的问题。但我认为这足以量化火灾严重程度的显著特征。称之为起点。

## 观测频率对概率密度

在下面的散点图中，显示了与一定数量的部署单位相关的事故数量；注意纵轴上的对数刻度。

![](img/49b74212e11916d96afc30725603f7b1.png)

正如所预料的那样，大部分火灾都是轻微的，只有一小部分是非常严重的。

仔细观察后发现，在整个范围内，事故数量并不随着响应单位数量的增加而均匀减少。事实上，最常见的两个值是 1 和 6 个响应单位。这种变化可以用 TFS 的运作规则来解释:即使最小的住宅火灾也要用六个单元来处理。

这是相对于火灾之间的更精细细节的分辨率的严重性度量的限制。因为这项工作的目标是描述极端事件，但是，这些更好的细节不应该成为众所周知的阻碍森林被看到的树。

我通过宁滨将响应单元的数量划分为[1，6]，[7，12]，…换句话说，具有 1 到 6 个响应单元的火灾之间的差异被排除在考虑范围之外——它们现在被视为同等严重。散点图转换如下:

![](img/36dc87f442d2b82ba09c7d17f7500649.png)

第一个箱是导致一到六个响应单元的火灾事件的总和；第二个箱用于导致 7 到 12 个响应单元的事件；诸如此类。

## 对数对数和帕累托分布

注意，在上面的图中，横轴也是对数的。因此，这是一个*双对数图*。除了两三个极端值，这些点排列得相当好。用最小二乘方线拟合这些点(现在不包括仓 33 和 76 处的点)得出:

![](img/5547f951173bb75309517dffc564ffbe.png)

在这个等式中， *S* 表示 bin 号，它是粗粒度的严重性等级，而 *N_{annual}* 表示严重性为 *S* 的事件的年度数量。等式被重新组织:

![](img/27a940d067fd7d9591d5644d267c8692.png)

为了使这个等式定性，考虑如果严重性加倍会发生什么，即*S’= 2S*。自 2⁴=16 以来，其含义是严重性增加一倍意味着发生次数减少 16 倍。换句话说，严重程度加倍的火灾事故减少了 16 倍。此外，这种说法是*标度不变的*，也就是说，无论 *S* 的值是多少，将其加倍，事件发生的频率就会降低 16 倍。

这种形式的频率分布被称为 [*帕累托分布*](http://mathworld.wolfram.com/ParetoDistribution.html) 。这是一类具有有趣性质的分布，并且[被推崇为](https://www.forbes.com/sites/ralphbenko/2014/10/13/peter-thiel-we-dont-live-in-a-normal-world-we-live-under-a-power-law/)理解现代世界(从投资到爱情)的真正方法。我将远离一般的说法，就这项研究而言，简单地注意到，作为第一近似值，多伦多火灾严重程度的概率是形状参数等于 4 的帕累托分布。

## 给随机性的极端性加上一个数字

帕累托分布的一个特征是，在某个阈值γ以上，该分布具有无限的矩。例如，求上述分布的三阶矩的积分不是有限的；另一方面，一阶和二阶矩是。法裔美国数学家 Mandelbrot [用γ值描述了系统的随机状态。阈值越低，极端随机事件相对于典型随机事件越极端。Mandelbrot 将阈值在 1 和 2 之间的分布的随机性定义为*无序随机性*。](https://en.wikipedia.org/wiki/Seven_states_of_randomness)

矩变得无限大的阈值可以用来表征极端事件相对于典型事件有多极端。该属性不需要帕累托分布。基于关于基础分布的更宽松的假设的阈值γ的估计是有帮助的。

一种方法基于基于采样数据的以下比率的特性***×T21*。**

![](img/8b20603c8a8c9f31fa14cd8a015285b6.png)

可以证明，在无穷大 *n* 的极限下，这个比值趋于零当且仅当 p-矩是有限的。因此，反过来，使这个比值*而不是*趋于零的 *p* 的值就是临界阈值。

我使用 2011 年至 2016 年 TFS 数据集的响应单位数量(这次没有粗粒度指标)，并计算更多数据点级数的比率。

![](img/a3613e4877a1ca81f1da43ffa10e3124.png)

从有限样本中估计渐近极限是有风险的——毕竟我们永远不会到达终点。然而，该图强烈地表明一阶和二阶矩都是有限的。在范围 *p=2.5* 到 *p=3.5* 的某处，比率*似乎*稳定在大于零的值。

上述方法的一个有利特征是，它几乎不受低火灾事故严重性分布的确切性质的影响。在上一节的直线拟合中， *S* 的低值点很重要。由于本研究的目标是描述极端事件的特征，而不是火灾事件严重程度的整个范围，如上所述，低严重程度的平稳递减分布的偏差最好*不会*影响分析方法。

## 超出阈值以隔离极端情况

进一步描述极端事件分布特征的直观想法是研究*超过*。这是严重性超过某个高阈值的事件的分布。

围绕这种方法产生了大量的理论。在水文学中，这被称为超过阈值的 [*峰值*接近](http://web.ntpu.edu.tw/~yml/yml/download/risk2009s/Statistics%20of%20extremes%20in%20hydrology.pdf)，并且可以被可视化为河流流量超过阈值多远，忽略未超过阈值的次数的确切值。特别地，可以证明关于这个阈值的渐近关系。

![](img/be0151b40ff43e05e0996c6d5a8e2520.png)

上面的时间序列线图显示了火灾事件时间序列的一个片段，其中显示了 20 个响应单位的阈值。超过严重性阈值的值的统计特征可以与极端事件分布的特征相关联。

和以前一样，每当估计极限数量时，这次是阈值，用有限的样本，艺术和科学都在发挥作用。在不涉及细节的情况下，用这种方法发现尾部分布的形状在 2.5 到 4.5 的范围内，主要取决于是否考虑了最极端的严重情况。

用来表征和量化火灾事件分布的极端情况的少数方法指向从高 2 到低 4 范围内的指数(形状参数)。如果我们采用 3.5 作为折衷，则扩大到极端事件的定性含义是:*严重程度加倍的火灾事件的发生频率约低 11 倍，高于某个中等严重程度阈值*。

## 衡量什么，什么重要？

在上面的部分分析中，我忽略了严重性等级中两个最极端的事件。他们似乎不太合群。我是否犯了强迫现实符合我的美丽方程式*的罪行？也许吧。很可能在很高水平上的极端值被低估了，并且对于尾部分布应该降低形状参数。*

这两起事件分别是[仓库着火](https://www.cbc.ca/news/canada/toronto/blaze-in-storage-facility-destroys-belongings-1.1255449)，充足的燃料使大火持续了一天多，以及[床垫厂着火](https://www.theglobeandmail.com/news/toronto/firefighters-battle-blaze-at-toronto-mattress-factory/article17693184/)，由于燃料充足，这也持续了很长时间。大量的响应单位部分反映了这些火灾持续时间的延长，因为多个单位必须来来去去。我采用的严重性代理指标可能会将需要很长时间才能终止的火灾评定为非常严重。

在现实世界数据的分析中，对感兴趣的问题或预测真正重要的属性可能是模糊的，因此很难实际量化。火灾严重程度不会是第一位的。辨别公式和工程的伟大指标，衡量什么是真正重要的可以使所有的差异。这种分析先于数据库、算法或图形处理器的任何创造性使用。

综上所述，考虑到可供学习的极端数据的自然短缺，这些技术已经成为多伦多火灾事件极端严重性的特征。为了创造一种预测方法，甚至可能具有空间和时间分辨率，还需要进一步的改进。其中之一是严重性度量，它有其局限性，因为它涉及到有意义的现实世界方面。但我们必须从某个地方开始，找出需要解决的问题，极端事件无疑是值得解决的。

> 掌声就是货币。如果你觉得这值得一读，请按下按钮。

## 笔记

*   [TFS 事件原始数据来自多伦多市开放数据网页](https://www.toronto.ca/city-government/data-research-maps/open-data/open-data-catalogue/#e3d443bb-2593-2615-4972-20e24c0ab876)。
*   Embrechts *等人* 写的这本书是对极端事件建模的有益介绍。
*   可视化是用 Tableau 完成的，大多数定量分析是用 Python 库 Pandas 和 Numpy 完成的。