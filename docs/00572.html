<html>
<head>
<title>Python Virtual Environments made easy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 虚拟环境变得简单</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-virtual-environments-made-easy-fe0c603fe601?source=collection_archive---------6-----------------------#2019-01-26">https://towardsdatascience.com/python-virtual-environments-made-easy-fe0c603fe601?source=collection_archive---------6-----------------------#2019-01-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/303c61f00e3d7a4bdf133054cab4a741.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VcJTCzkEyryktJgC"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@cdr6934?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Chris Ried</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a71c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我开始了一个项目，在这个项目中，我必须快速检查一个包<code class="fe lb lc ld le b">Flask</code>是否能与我机器上安装的 Python 一起工作。当我运行安装 Flask 的命令时，它提醒我已经安装了这个包，因为我的机器上已经安装了<a class="ae kc" href="https://www.anaconda.com/" rel="noopener ugc nofollow" target="_blank"> Anaconda </a>。</p><p id="202b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是当我试图在 Sublime Text 3 上运行<code class="fe lb lc ld le b">Hello World</code> Flask 应用时，控制台给出了一个错误，它无法找到 Flask 模块。我很困惑，开始在网上看关于这个问题的资料。我发现 Anaconda 有 Flask 模块，但是我在 Sublime Text 中使用的 Python 没有这个模块。我草草地找到了一个解决方案，以理解如何正确地设置 Python，在正确的位置安装正确的包，并设置 Sublime Text build 系统。我的网上研究揭示了关于<code class="fe lb lc ld le b">Virtual Environments</code>，一些我以前没有读到过的东西。</p><p id="b9b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在阅读了许多关于<code class="fe lb lc ld le b">Virtual Environments</code>的文章后，我学到了很多关于 Python 的知识，以及我应该如何创建使用 Python 的环境。在本文中，我将分享我关于如何使用终端设置这些环境的知识。</p><h1 id="a0ea" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">计算机编程语言</h1><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi md"><img src="../Images/369a0d15a9d571abb11844f7c4602514.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IcdIwU1HhM9la0lj"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@icons8?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Icons8 team</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1f3c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">社区目前支持两个版本，<em class="mi"> 2.x </em>和<em class="mi"> 3.x </em>版本。有些包适用于 Python 3.x，但有些包不支持 3.x，仅适用于 2.x。在这种情况下，有时人们可能希望使用 Python 2.x，有时使用 Python 3.x。我们从安装两个版本的<a class="ae kc" href="https://www.python.org/downloads/mac-osx/" rel="noopener ugc nofollow" target="_blank"> Python </a>开始，这样我们可以使用其中一个或两个来设置环境。如果你有一个包安装程序，比如<a class="ae kc" href="https://brew.sh/" rel="noopener ugc nofollow" target="_blank"> Homebrew </a>，你可以用它来安装 Python。</p><p id="0bc4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> Python 3。X </strong></p><pre class="me mf mg mh gt mj le mk ml aw mm bi"><span id="310b" class="mn lg iq le b gy mo mp l mq mr">brew install python@3</span></pre><p id="1aa1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> Python 2。X </strong></p><pre class="me mf mg mh gt mj le mk ml aw mm bi"><span id="dfaf" class="mn lg iq le b gy mo mp l mq mr">brew install python@2</span></pre><p id="a463" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它还安装了<code class="fe lb lc ld le b">pip</code>，帮助我们安装 Python 包。</p><h1 id="7ccb" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">虚拟环境</h1><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/6e0bd3677368c0397af7e831ee17ee34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YNIBVX_4yh_7M_e4"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@kimberlyfarmer?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kimberly Farmer</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="cf71" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每当您开始一个项目时，您将首先决定使用哪个 Python 版本，然后选择一些您想要的库/包。然而，最好不要在系统范围内安装这些软件包。您可能在同一台机器上使用多个版本的 Python，或者某些包只适用于某些版本的 Python 而不适用于其他版本。在这样的场景中，我们可以设置不同的环境，称为<code class="fe lb lc ld le b">Virtual Environments</code>。</p><p id="a097" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每个环境都将是它自己的虚拟空间。安装在该空间内的所有软件包不会干扰环境外部的软件包，并且将只包含在该空间内。</p><h2 id="f5c7" class="mn lg iq bd lh ms mt dn ll mu mv dp lp ko mw mx lt ks my mz lx kw na nb mb nc bi translated">识别 Python 安装位置</h2><p id="75d3" class="pw-post-body-paragraph kd ke iq kf b kg nd ki kj kk ne km kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">根据您使用的安装方法，Python 将安装在不同的位置。</p><p id="594b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">从官网安装的 Python</strong></p><pre class="me mf mg mh gt mj le mk ml aw mm bi"><span id="f24f" class="mn lg iq le b gy mo mp l mq mr">/Library/Frameworks/Python.framework/Versions/</span></pre><p id="16a4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这里，你会找到已安装的版本。我的版本是 3.6，所以 Python 的路径应该是:</p><pre class="me mf mg mh gt mj le mk ml aw mm bi"><span id="eee8" class="mn lg iq le b gy mo mp l mq mr">/Library/Frameworks/Python.framework/Versions/3.6/bin</span></pre><p id="008f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">使用自制软件安装的 Python</strong></p><pre class="me mf mg mh gt mj le mk ml aw mm bi"><span id="dd04" class="mn lg iq le b gy mo mp l mq mr">/usr/local/Cellar/</span></pre><p id="5b74" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来是目录<code class="fe lb lc ld le b">python</code>或<code class="fe lb lc ld le b">python@2</code>下的版本。如果我们以<code class="fe lb lc ld le b">python</code>和<code class="fe lb lc ld le b">3.7.2_1</code>版本为例，位置将是:</p><pre class="me mf mg mh gt mj le mk ml aw mm bi"><span id="f2ec" class="mn lg iq le b gy mo mp l mq mr">/usr/local/Cellar/python/<!-- -->3.7.2_1<!-- -->/bin</span></pre><h2 id="3938" class="mn lg iq bd lh ms mt dn ll mu mv dp lp ko mw mx lt ks my mz lx kw na nb mb nc bi translated">安装虚拟</h2><p id="a083" class="pw-post-body-paragraph kd ke iq kf b kg nd ki kj kk ne km kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">我们将使用自制软件安装 Python 3。我们用<code class="fe lb lc ld le b">pip3</code>安装<code class="fe lb lc ld le b">virtualenv</code>。</p><pre class="me mf mg mh gt mj le mk ml aw mm bi"><span id="e557" class="mn lg iq le b gy mo mp l mq mr">pip3 install virtualenv</span></pre><h2 id="d91f" class="mn lg iq bd lh ms mt dn ll mu mv dp lp ko mw mx lt ks my mz lx kw na nb mb nc bi translated">创建虚拟环境</h2><p id="1bdf" class="pw-post-body-paragraph kd ke iq kf b kg nd ki kj kk ne km kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">所有软件包都已安装，现在我们可以开始设置我们的虚拟环境了。我们需要定义我们想要建立环境的位置，并提供一个名称。我将它放在主目录中，并将名称设为<code class="fe lb lc ld le b">virtEnv1</code>。</p><pre class="me mf mg mh gt mj le mk ml aw mm bi"><span id="c67a" class="mn lg iq le b gy mo mp l mq mr">virtualenv -p python3 ~/virtEnv1</span></pre><p id="9e84" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面命令中的最后一个参数定义了我们环境的确切路径以及环境名称。我们的环境现在已经设置好了，我们可以开始在其中工作了。</p><h2 id="c7cc" class="mn lg iq bd lh ms mt dn ll mu mv dp lp ko mw mx lt ks my mz lx kw na nb mb nc bi translated">激活环境</h2><p id="e398" class="pw-post-body-paragraph kd ke iq kf b kg nd ki kj kk ne km kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">为了开始在一个环境中工作，我们需要激活这个环境。当设置环境时，在环境的<code class="fe lb lc ld le b">bin</code>文件夹中创建一个名为<code class="fe lb lc ld le b">activate</code>的文件。我们将这个文件设置为源文件，现在我们在环境中了。</p><pre class="me mf mg mh gt mj le mk ml aw mm bi"><span id="46e2" class="mn lg iq le b gy mo mp l mq mr">cd ~/virtEnv1<br/>source bin/activate</span></pre><p id="1822" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">环境的名称开始出现在括号中，表示我们现在正在环境中工作。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/8ef54e067fb751a0163ca42473650b70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ghMIps0k8a5VCBJHtXLEJQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Inside ‘virtEnv1’ environemnt</figcaption></figure><h2 id="62f7" class="mn lg iq bd lh ms mt dn ll mu mv dp lp ko mw mx lt ks my mz lx kw na nb mb nc bi translated">安装软件包并创建文件</h2><p id="8baf" class="pw-post-body-paragraph kd ke iq kf b kg nd ki kj kk ne km kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">我去装烧瓶。</p><pre class="me mf mg mh gt mj le mk ml aw mm bi"><span id="1afe" class="mn lg iq le b gy mo mp l mq mr">pip install flask</span></pre><p id="a112" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我还在 home 目录下创建了一个文件<code class="fe lb lc ld le b">app.py</code>，其中包含 Flask 中最基本的<code class="fe lb lc ld le b">Hello World</code>代码。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="5297" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我试着在环境中运行代码，它会像下面的图片一样工作。</p><pre class="me mf mg mh gt mj le mk ml aw mm bi"><span id="94bc" class="mn lg iq le b gy mo mp l mq mr">python ~/app.py</span></pre><p id="1040" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> <em class="mi">客户端</em> </strong></p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nl"><img src="../Images/d514812946c91bd75b0bb8e6ad72bb3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bb7pSU0YciU4PfvfvIDCGA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Hello World in Flask</figcaption></figure><p id="03af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> <em class="mi">服务器</em> </strong></p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h2 id="7645" class="mn lg iq bd lh ms mt dn ll mu mv dp lp ko mw mx lt ks my mz lx kw na nb mb nc bi translated">停用环境</h2><p id="6721" class="pw-post-body-paragraph kd ke iq kf b kg nd ki kj kk ne km kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">如果您的环境是启用的，那么很容易就能摆脱它。只需在终端中键入<code class="fe lb lc ld le b">deactivate</code>即可。</p><p id="bf54" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于环境现在被停用，我们使用系统范围内安装的 Python。系统中没有安装烧瓶。因此，如果我再次尝试运行相同的代码，它会给出一个错误，即没有找到<code class="fe lb lc ld le b">flask</code>。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/d7c82546fed4e7ce0582ac9a725e2e89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FJ_xPQIPGpHA6HHPKJHIMw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">No flask error outside environment</figcaption></figure><p id="8a08" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以类似的方式，我们可以创建更多的环境，甚至为 Python 2 复制类似的过程。</p><h1 id="a7d5" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">在 Sublime Text 3 中使用 Python</h1><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/e615b01a5e21c50502e08d5bc31aacd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cyfrnFlrQzf_D2_4"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@ilyapavlov?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ilya Pavlov</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f720" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我不在 Jupyter 笔记本上工作时，我更喜欢处理精彩的文本。要为 Python 设置 Sublime 文本，我们需要创建一个新的<em class="mi">构建系统</em>。转到:</p><pre class="me mf mg mh gt mj le mk ml aw mm bi"><span id="ed20" class="mn lg iq le b gy mo mp l mq mr">Tools &gt; Build System &gt; New Build System...</span></pre><p id="aac7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并将文本设置如下:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="f448" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用您的用户名替换<code class="fe lb lc ld le b">&lt;username&gt;</code>。</p><p id="9e81" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">先存成<code class="fe lb lc ld le b">virtEnv1Python</code>吧。在 Sublime 文本中打开文件 app.py。将构建系统设置为<code class="fe lb lc ld le b">virtEnv1Python</code>。要测试应用程序是否工作，请按<code class="fe lb lc ld le b">Command</code> + <code class="fe lb lc ld le b">B</code>。您将看到应用程序开始运行，您可以通过链接<code class="fe lb lc ld le b"><a class="ae kc" href="http://127.0.0.1:5000/." rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:5000/</a></code>进行确认。</p><h1 id="39e4" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">结论</h1><p id="bf4a" class="pw-post-body-paragraph kd ke iq kf b kg nd ki kj kk ne km kn ko nf kq kr ks ng ku kv kw nh ky kz la ij bi translated">在本文中，我讨论了使用<code class="fe lb lc ld le b">virtualenv</code>来创建 Python 虚拟环境并在这些环境中安装包。</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><p id="2130" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请随时分享你的想法，想法和建议。</p></div></div>    
</body>
</html>