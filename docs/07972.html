<html>
<head>
<title>AutoML Vision — how to train your model?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AutoML Vision —如何训练您的模型？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/automl-vision-how-to-train-your-model-c7e887051453?source=collection_archive---------11-----------------------#2019-11-03">https://towardsdatascience.com/automl-vision-how-to-train-your-model-c7e887051453?source=collection_archive---------11-----------------------#2019-11-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9ff4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">从头开始，训练自己的模型。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/6525374afa1baf7217d6cc1c10eb45ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*xNxZokzztcgpPueM.png"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk">image from <a class="ae ku" href="https://gigazine.net/gsc_news/en/20180118-google-cloud-automl-vision" rel="noopener ugc nofollow" target="_blank">https://gigazine.net/gsc_news/en/20180118-google-cloud-automl-vision</a></figcaption></figure><p id="dbd2" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在之前的文章中，我们已经学习了如何在我们的 Python 项目中使用 Vision API。感谢谷歌，他们帮助训练这些 API，直接使用它们非常快速和方便。但是，如果我们需要用我们的数据训练一个新的模型，我们该如何实现呢？<strong class="kx iu">拯救我们生命的汽车视觉来了。</strong></p><p id="dd18" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在进入 AutoML 之前，我想澄清一下 Cloud ML Engine、AutoML 和 ML API 之间的区别。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/56f9c2ca618191b5c624daea81e652b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/0*XFtfEn2-K0SgPLOC.png"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk">image from <a class="ae ku" href="https://blog.gcp.expert/cloud-automl-vision-application-1/" rel="noopener ugc nofollow" target="_blank">https://blog.gcp.expert/cloud-automl-vision-application-1/</a></figcaption></figure><p id="b40e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><strong class="kx iu"> ML API </strong>通过谷歌训练的模型提供 API 服务，我们可以使用这些 API 而不用担心任何人工智能部分。它包含许多 API，如<a class="ae ku" href="https://cloud.google.com/speech-to-text/" rel="noopener ugc nofollow" target="_blank">云语音 API </a>、<a class="ae ku" href="https://cloud.google.com/natural-language/" rel="noopener ugc nofollow" target="_blank">云自然语言 API </a>、<a class="ae ku" href="https://cloud.google.com/translate/" rel="noopener ugc nofollow" target="_blank">云翻译 API </a> <br/> <a class="ae ku" rel="noopener" target="_blank" href="/ml-study-jam-detect-labels-faces-and-landmarks-in-images-with-the-cloud-vision-api-a80e89feb66f">云视觉 API </a>、<a class="ae ku" href="https://cloud.google.com/video-intelligence/?utm_campaign=japac-TW-all-en-dr-skws-all-all-trial-e-dr-1003987&amp;utm_term=KW_cloud+video+intelligence+api&amp;gclid=CjwKCAjwo9rtBRAdEiwA_WXcFlFkEVB8WrGg1NwtDlLTBpKsW5Os-LOe4EtoXdHitTWNRRTh1klXhRoC0egQAvD_BwE&amp;utm_content=text-ad-none-none-DEV_c-CRE_278324358714-ADGP_Hybrid+%7C+AW+SEM+%7C+SKWS+%7E+T1+%7C+EXA+%7C+ML+%7C+M%3A1+%7C+TW+%7C+en+%7C+Video+%7C+api-KWID_43700024603633844-kwd-350028922693&amp;utm_source=google&amp;utm_medium=cpc" rel="noopener ugc nofollow" target="_blank">云视频智能 API </a>、<a class="ae ku" href="https://cloud.google.com/solutions/talent-solution/" rel="noopener ugc nofollow" target="_blank">云作业 API </a>。</p><p id="fb97" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><a class="ae ku" href="https://cloud.google.com/automl/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iu"> AutoML </strong> </a>允许我们用我们的数据训练我们的定制模型<strong class="kx iu">。它使用 NAS(神经架构搜索)来找到训练我们模型的最佳方法。我们唯一需要做的就是收集数据，提高模型的准确性。稍后我会详细介绍。</strong></p><p id="c906" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">最后一个是<a class="ae ku" href="https://cloud.google.com/ml-engine/" rel="noopener ugc nofollow" target="_blank">T5 云 ML 引擎 T7】。显然我们自己做所有的事情，包括建立一个预测模型，调整和训练它，以及其他非常复杂的事情。这是一个高度定制的引擎，如果你熟悉一些流行的框架，比如 Tensorflow，你可以试试。</a></p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><p id="1bf4" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">好了，让我们开始今天的主题，训练我们的 AutoML 模型。<br/>这是官方的 AutoML Vision API 教程链接。如果你喜欢使用命令行而不是 GUI，你可以考虑遵循这个指南。</p><div class="lz ma gp gr mb mc"><a href="https://cloud.google.com/vision/automl/docs/tutorial" rel="noopener  ugc nofollow" target="_blank"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd iu gy z fp mh fr fs mi fu fw is bi translated">AutoML Vision API 教程|云 AutoML Vision |谷歌云</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">本教程演示了如何创建一个新的模型与您自己的一套训练图像，评估结果和…</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">cloud.google.com</p></div></div></div></a></div><p id="ecf5" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">以下内容分享如何一步一步用 AutoML 建立你的模型。</p><h1 id="81e4" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">步骤概述</h1><ol class=""><li id="4965" class="nd ne it kx b ky nf lb ng le nh li ni lm nj lq nk nl nm nn bi translated">配置您的项目环境。</li><li id="edb2" class="nd ne it kx b ky no lb np le nq li nr lm ns lq nk nl nm nn bi translated">下载用于培训的图像。</li><li id="4e18" class="nd ne it kx b ky no lb np le nq li nr lm ns lq nk nl nm nn bi translated">设置图像分类。</li><li id="cc96" class="nd ne it kx b ky no lb np le nq li nr lm ns lq nk nl nm nn bi translated">创建 index.csv 并上传到 bucket。</li><li id="98cc" class="nd ne it kx b ky no lb np le nq li nr lm ns lq nk nl nm nn bi translated">创建数据集并导入 index.csv。</li><li id="b84b" class="nd ne it kx b ky no lb np le nq li nr lm ns lq nk nl nm nn bi translated">训练模型。</li><li id="6408" class="nd ne it kx b ky no lb np le nq li nr lm ns lq nk nl nm nn bi translated">用模型预测。</li><li id="6f5d" class="nd ne it kx b ky no lb np le nq li nr lm ns lq nk nl nm nn bi translated">用 Restful API 和 Python 请求 API。</li></ol></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h1 id="5758" class="ml mm it bd mn mo nt mq mr ms nu mu mv jz nv ka mx kc nw kd mz kf nx kg nb nc bi translated">第一步。配置您的项目环境。</h1><ol class=""><li id="dd11" class="nd ne it kx b ky nf lb ng le nh li ni lm nj lq nk nl nm nn bi translated">在 GCP 控制台中选择或创建一个项目。</li><li id="3173" class="nd ne it kx b ky no lb np le nq li nr lm ns lq nk nl nm nn bi translated">为您的项目启用计费。<a class="ae ku" href="https://cloud.google.com/billing/docs/how-to/modify-project" rel="noopener ugc nofollow" target="_blank">了解如何启用计费</a>。</li><li id="174e" class="nd ne it kx b ky no lb np le nq li nr lm ns lq nk nl nm nn bi translated"><a class="ae ku" href="https://cloud.google.com/iam/docs/creating-managing-service-accounts#creating_a_service_account" rel="noopener ugc nofollow" target="_blank">创建服务账户并下载密钥文件</a>。</li></ol><h2 id="20f2" class="ny mm it bd mn nz oa dn mr ob oc dp mv le od oe mx li of og mz lm oh oi nb oj bi translated">一件重要的事情是，您需要为这个服务帐户选择角色<code class="fe ok ol om on b">AutoML Editor</code>。</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi oo"><img src="../Images/6e5b7a75ed8237f8a37d8fc1cf5a256d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EOKsAH20vWe-XT_qTtpGqw.png"/></div></div></figure><p id="adc2" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">4.将环境变量<code class="fe ok ol om on b">GOOGLE_APPLICATION_CREDENTIALS</code>设置为密钥文件。</p><p id="fd55" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">更多详情，请参考<a class="ae ku" rel="noopener" target="_blank" href="/tutorial-google-vision-api-with-python-and-heroku-3b8d3ff5f6ef">上一篇</a>。</p><h1 id="5d63" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">第二步。下载用于培训的图像。</h1><p id="04ab" class="pw-post-body-paragraph kv kw it kx b ky nf ju la lb ng jx ld le ot lg lh li ou lk ll lm ov lo lp lq im bi translated">在训练模型之前，我们需要为它准备一些数据。收集它们的最快方法是从谷歌搜索下载。(也可以用自己准备好的数据)。</p><p id="1a8f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">这里有一个非常棒的开源软件可以帮助你快速下载图片。</p><div class="lz ma gp gr mb mc"><a href="https://github.com/hardikvasa/google-images-download" rel="noopener  ugc nofollow" target="_blank"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd iu gy z fp mh fr fs mi fu fw is bi translated">hardikvasa/Google-图片-下载</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">用于“搜索”和“下载”数百张谷歌图片到本地硬盘的 Python 脚本！这个程序让你…</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">github.com</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb ko mc"/></div></div></a></div><p id="6391" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们将创建一个<strong class="kx iu">。csv 文件</strong>来列出图像的路径，所以通过用数字像<code class="fe ok ol om on b">1.png</code> <code class="fe ok ol om on b">2.png</code> … <br/>来重命名图像文件会更容易处理它，因为我们没有可以用来实现它的参数，我创建了另一个分支来破解这个东西。</p><div class="lz ma gp gr mb mc"><a href="https://github.com/mutant0113/google-images-download/tree/name_the_images_by_numbers" rel="noopener  ugc nofollow" target="_blank"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd iu gy z fp mh fr fs mi fu fw is bi translated">mutant 0113/Google-图片-下载</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">用于“搜索”和“下载”数百张谷歌图片到本地硬盘的 Python 脚本！这个程序让你…</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">github.com</p></div></div></div></a></div><p id="8e0f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">下载它，然后使用关键字和限制参数运行下面的<a class="ae ku" href="https://google-images-download.readthedocs.io/en/latest/arguments.html" rel="noopener ugc nofollow" target="_blank">命令。</a></p><pre class="kj kk kl km gt pc on pd pe aw pf bi"><span id="9b61" class="ny mm it on b gy pg ph l pi pj">python3 [path/to/googleimagesdownload.py] -k [keyword] -o [path/to/download/folder] -l [total download number] -f [image format] -t [image type]</span><span id="9be4" class="ny mm it on b gy pk ph l pi pj">For example:<br/>python3 ~/Documents/Github/google-images-download/google_images_download.py -k "Robert John Downey jr." -o 'images/' -l 100 -f png -t face</span></pre><p id="98fc" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">结果将是这样的:</p><div class="kj kk kl km gt ab cb"><figure class="pl kn pm pn po pp pq paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><img src="../Images/e273ef1c9886b052ec7b5c9dfab038b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*GvEVSmLWnYtuqX6E2JwCEQ.png"/></div></figure><figure class="pl kn pr pn po pp pq paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><img src="../Images/3e43c6879efb8fe38a7e4fd93f173981.png" data-original-src="https://miro.medium.com/v2/resize:fit:624/format:webp/1*7J6T2ViqWOefAGaaKYmOjg.png"/></div></figure><figure class="pl kn ps pn po pp pq paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><img src="../Images/7e19e0de91c730f43a8daf5327c2a354.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*fGPzuDiWiP52hkrREPAokw.png"/></div></figure></div><p id="21e4" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">然后<strong class="kx iu">手动检查并过滤错误的图像</strong>，因为有时可能会提取其他不相关的照片。</p><h1 id="b691" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">第三步。设置图像分类。</h1><ol class=""><li id="f290" class="nd ne it kx b ky nf lb ng le nh li ni lm nj lq nk nl nm nn bi translated">搜索<code class="fe ok ol om on b">Vision</code>。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi pt"><img src="../Images/b0faadcc5c3f693a2123431eaf37de12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vxvx4W1xyffYZw4mrC7w6w.png"/></div></div></figure><p id="7efb" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">2.在左侧菜单中选择<code class="fe ok ol om on b">Databoard</code>，首先启用视觉 API。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pu"><img src="../Images/1c244d07baccb55cb220ec6f9ca58555.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/format:webp/1*5_wLRJUWy7pgsg1zqbREPw.png"/></div></figure><p id="02a6" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">3.选择<code class="fe ok ol om on b">Image Classification -&gt; Get started</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi pv"><img src="../Images/84ad21d90e66b1e49955c4b9d56bf2c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OfBJzlvKCnJvGONoQoYrPQ.png"/></div></div></figure><p id="0448" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">4.启用计费并启用所需的 API 和修改权限。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi pw"><img src="../Images/ac4f679d5308aec1b9da1a70960f93a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2iVlMF7xlh76coavBvQITQ.png"/></div></div></figure><p id="9595" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">点击<code class="fe ok ol om on b">SET UP NOW</code>启用所需的权限。一个新的<code class="fe ok ol om on b">bucket</code>将自动生成。</p><p id="153c" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">5.搜索<code class="fe ok ol om on b">bucket</code>，点击<code class="fe ok ol om on b">Storage</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi px"><img src="../Images/382e4a030a04626141da9f627a9d6932.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*99CvG_CmdR4zXgWBHV3x3A.png"/></div></div></figure><p id="db1c" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">6.选择铲斗<code class="fe ok ol om on b">your-project-name-vcm</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi py"><img src="../Images/ca5a60e54eec654d6733d8b37b275dc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tnM-8_H-__W7Cojg1b0MKg.png"/></div></div></figure><p id="21c2" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">7.选择<code class="fe ok ol om on b">Upload folder</code>并上传用于训练的图像。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi pz"><img src="../Images/c850557035e0bc88eb10927eca2e00b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IxjstdTuB-AEnOXvUsHXdA.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi qa"><img src="../Images/5a7244fd0bbbd85bf0864f322e610a6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JfZoRwJkCxqgFydmafJ4_w.png"/></div></div></figure><h1 id="c105" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">第四步。创建 index.csv 并上传到 bucket。</h1><p id="8ab3" class="pw-post-body-paragraph kv kw it kx b ky nf ju la lb ng jx ld le ot lg lh li ou lk ll lm ov lo lp lq im bi translated">现在我们有了一桶图像。<a class="ae ku" href="https://cloud.google.com/vision/automl/docs/prepare" rel="noopener ugc nofollow" target="_blank">下一步是给每张图片贴上标签，并把它们分成不同的用途——<strong class="kx iu">训练</strong>、<strong class="kx iu">验证</strong>和<strong class="kx iu">测试</strong> </a>。你可以自己定义或者让 Google 帮你把它们分成<strong class="kx iu"> 80 %用于训练，10 %用于测试，10%用于验证。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi qb"><img src="../Images/498ee082106a0c47408deb73d9be4d1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RV-AGOYg-Y3qS7CvtURFUg.png"/></div></div></figure><p id="8be1" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">index.csv 的内容如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi qc"><img src="../Images/d3953b7aaf0123927d46eec32d2037da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M2D9Tp4K3jhk5sKXxl7axQ.png"/></div></div></figure><p id="dd2a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">然后也上传到桶中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi qa"><img src="../Images/5a7244fd0bbbd85bf0864f322e610a6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JfZoRwJkCxqgFydmafJ4_w.png"/></div></div></figure><h1 id="89e7" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">第五步。创建数据集并导入 index.csv。</h1><ol class=""><li id="6087" class="nd ne it kx b ky nf lb ng le nh li ni lm nj lq nk nl nm nn bi translated">搜索<code class="fe ok ol om on b">datasets</code>。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qd"><img src="../Images/f4660da5c563e46099f20b853d7cc59c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*Riyfhb245b9mKQbPblemEA.png"/></div></figure><p id="6476" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">2.点击<code class="fe ok ol om on b">NEW DATASET</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi qe"><img src="../Images/7690c641c00dbf402596c935f76a08c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*c1zAA66sWEjld8ipq94iaw.png"/></div></figure><p id="dfb7" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">3.命名数据集并选择<code class="fe ok ol om on b">Single-Label Classification</code>。然后点击<code class="fe ok ol om on b">CREATE DATASET</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi qf"><img src="../Images/ae81fdfb18c50e9c46404bfd0ed412fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wMfhc-TUjSYFdl89QDuI8A.png"/></div></div></figure><p id="5393" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">4.导入<code class="fe ok ol om on b">index.csv</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi qg"><img src="../Images/831b69c15f0d5cd08266e828799227fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fQDa9jpagrS02YjTFJpsdg.png"/></div></div></figure><p id="38af" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">5.结果显示我们所有的图像都被标记。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi qh"><img src="../Images/4fba6893329467ec3b75cd69d7af8913.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*es0x6f5tlkw44urEIJxlYQ.png"/></div></div></figure><h1 id="d2e3" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">第六步。训练模型。</h1><p id="1a98" class="pw-post-body-paragraph kv kw it kx b ky nf ju la lb ng jx ld le ot lg lh li ou lk ll lm ov lo lp lq im bi translated">1.开始训练模型。基本上你给的训练小时越多，准确率就越高。但是文档也告诉我们，如果模型停止改进，训练就会停止。记得点击<code class="fe ok ol om on b">Deploy model to 1 node after training</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi qi"><img src="../Images/ae88218dc8f7668fb55855d0fee6af3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pizasNI7uwe4gTP7ON9kzg.png"/></div></div></figure><p id="538a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">2.等待 2 个小时的结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi qj"><img src="../Images/2d8bd44d159174b386fa70dfda12872b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x98OLw2voQNVH0_92w3rHA.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi qk"><img src="../Images/2beb0666ce3a37a4deeddf00c472c4e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kMeT-Ky-8n_kk2R46iynuQ.png"/></div></div></figure><h1 id="1cad" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">第七步。用模型预测。</h1><p id="5bfb" class="pw-post-body-paragraph kv kw it kx b ky nf ju la lb ng jx ld le ot lg lh li ou lk ll lm ov lo lp lq im bi translated">点击<code class="fe ok ol om on b">UPLOAD IMAGES</code>并上传图片，对您的模型进行快速测试。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi ql"><img src="../Images/b5ec7cafbbd593a10e87a24b62b9a18d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E1ed7TdNYo4VbWSiJIUsvA.png"/></div></div></figure><p id="472c" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">它就像一个魔咒！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi qm"><img src="../Images/d20af2bc44565245c452b98b1809d8db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oalR00AOh94OGct_37eHZQ.png"/></div></div></figure><h1 id="3282" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">第八步。用 Restful API 和 Python 请求 API。</h1><p id="d37a" class="pw-post-body-paragraph kv kw it kx b ky nf ju la lb ng jx ld le ot lg lh li ou lk ll lm ov lo lp lq im bi translated">最后，我们可以使用<strong class="kx iu"> Restful API </strong>或<strong class="kx iu"> Python </strong>代码将模型集成到您的项目中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi qn"><img src="../Images/1ec9621e2f85acdf967a2485e11b9f5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IGwMxVewZjjDBszrlJiAmg.png"/></div></div></figure><p id="4b33" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在执行 Python 文件之前安装库<code class="fe ok ol om on b">google-cloud-automl</code>。</p><pre class="kj kk kl km gt pc on pd pe aw pf bi"><span id="9617" class="ny mm it on b gy pg ph l pi pj">pip3 install google-cloud-automl</span></pre><p id="fbcd" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">运行命令行</p><pre class="kj kk kl km gt pc on pd pe aw pf bi"><span id="b6f3" class="ny mm it on b gy pg ph l pi pj">python3 [your/local/image/path] [project_id] [model_id]</span></pre><p id="37b0" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">如果您收到权限被拒绝的消息，<a class="ae ku" href="https://medium.com/p/c7e887051453#20f2" rel="noopener">请返回步骤 1，检查角色是否被正确启用。</a></p><pre class="kj kk kl km gt pc on pd pe aw pf bi"><span id="06af" class="ny mm it on b gy pg ph l pi pj">google.api_core.exceptions.PermissionDenied: 403 The caller does not have permission</span></pre><p id="3037" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">API 结果:</p><pre class="kj kk kl km gt pc on pd pe aw pf bi"><span id="d4b8" class="ny mm it on b gy pg ph l pi pj">payload {</span><span id="aac5" class="ny mm it on b gy pk ph l pi pj">annotation_spec_id: "6728223911663632384"</span><span id="56b7" class="ny mm it on b gy pk ph l pi pj">classification {</span><span id="b71d" class="ny mm it on b gy pk ph l pi pj">score: 0.9954891800880432</span><span id="8910" class="ny mm it on b gy pk ph l pi pj">}</span><span id="a36b" class="ny mm it on b gy pk ph l pi pj">display_name: "Benedict"</span><span id="3176" class="ny mm it on b gy pk ph l pi pj">}</span></pre></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><p id="51f4" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">今天到此为止。AutoML Vision 的完整教程真的是任重道远，尤其是环境建设。但是一旦你完成了这些步骤，你的下一个模型就容易多了。</p><p id="0978" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">享受你的模型，别忘了看看谷歌如何在<code class="fe ok ol om on b">Reference links</code>中收费。希望帖子对你有帮助。如果你有任何问题或建议，请在下面留下评论。感谢阅读。👍</p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h1 id="751c" class="ml mm it bd mn mo nt mq mr ms nu mu mv jz nv ka mx kc nw kd mz kf nx kg nb nc bi translated">参考</h1><div class="lz ma gp gr mb mc"><a href="https://cloud.google.com/vision/automl/object-detection/docs/csv-format" rel="noopener  ugc nofollow" target="_blank"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd iu gy z fp mh fr fs mi fu fw is bi translated">格式化训练数据 CSV |云自动视觉对象检测|谷歌云</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">在准备了具有足够代表性的训练数据并将这些图像上传到 Google 云存储之后…</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">cloud.google.com</p></div></div></div></a></div><p id="ea96" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">了解 AutoML Vision 的使用价格。</p><div class="lz ma gp gr mb mc"><a href="https://cloud.google.com/vision/automl/pricing?_ga=2.103053760.-1976265311.1558404420&amp;_gac=1.115807348.1571290023.Cj0KCQjw_5rtBRDxARIsAJfxvYCSejFli2i99QgkRrWpdfwkhM51S5aiLSPX6QTXh5yjuZV_L6xtEZsaAnOCEALw_wcB" rel="noopener  ugc nofollow" target="_blank"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd iu gy z fp mh fr fs mi fu fw is bi translated">定价|云自动视觉|谷歌云</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">Beta 本产品处于预发布状态，可能会有变化或支持有限。有关更多信息，请参见…</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">cloud.google.com</p></div></div><div class="ow l"><div class="qo l oy oz pa ow pb ko mc"/></div></div></a></div><p id="068e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">本文档包含有关 AutoML Vision 使用的当前限制和使用配额。</p><div class="lz ma gp gr mb mc"><a href="https://cloud.google.com/vision/automl/quotas" rel="noopener  ugc nofollow" target="_blank"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd iu gy z fp mh fr fs mi fu fw is bi translated">配额和限制|谷歌云</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">Beta 本产品处于预发布状态，可能会有变化或支持有限。有关更多信息，请参见…</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">cloud.google.com</p></div></div></div></a></div></div></div>    
</body>
</html>