<html>
<head>
<title>Getting started with Geographic Data Science in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 地理数据科学入门</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/master-geographic-data-science-with-real-world-projects-exercises-96ac1ad14e63?source=collection_archive---------5-----------------------#2019-05-20">https://towardsdatascience.com/master-geographic-data-science-with-real-world-projects-exercises-96ac1ad14e63?source=collection_archive---------5-----------------------#2019-05-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6ac1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">教程、真实世界项目和练习</h2></div><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="kn ko l"/></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">World countries GPD 2007 map</figcaption></figure><p id="b8f5" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这是 Python 地理数据科学入门系列文章的第一篇，该系列文章由三部分组成。您将学习如何用 Python 阅读、操作和分析地理数据。本系列中的文章按顺序排列，第一篇文章奠定基础，第二篇文章介绍中级和高级地理数据科学主题。第三部分涵盖了一个相关的真实世界的项目，总结巩固你的学习。每个教程也有一些简单的练习来帮助你学习和练习。所有代码、数据集和 Google Colab Jupyter 笔记本都可以从本文末尾的链接获得。</p><p id="5589" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在本系列中，我将只关注地理矢量数据。在下一个系列中，我们将学习卫星图像和栅格数据分析。</p><p id="d9bb" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">该系列包含三个部分:</p><ol class=""><li id="ee6e" class="lp lq it kv b kw kx kz la lc lr lg ls lk lt lo lu lv lw lx bi translated">地理数据科学导论</li><li id="a5b0" class="lp lq it kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">地理数据处理</li><li id="efe8" class="lp lq it kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">地理数据科学项目</li></ol><p id="0b21" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这是第一部分。在本教程中，我们将学习使用 Geopandas 加载和处理地理数据的基础知识。Geopandas 是 Python 中地理数据科学的主力，它建立在 pandas 和 Numpy 库之上。与 Pandas 数据框架一样，Geopandas 数据结构包含地理数据框架和地理系列。Geopandas 不仅提供了轻松读取和操作地理数据的能力，还可以执行许多基本的地理空间操作，包括其他几何操作、投影和地理分析。您还可以使用 Geopandas 可视化和绘制地图——它为 Matplotlib 库提供了一个高级接口——方法是在 GeodataFrame/GeoSeries 上使用<code class="fe md me mf mg b">.plot()</code>方法。</p><p id="7cb2" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这些是本部分“地理数据科学简介”的学习目标:</p><ol class=""><li id="6709" class="lp lq it kv b kw kx kz la lc lr lg ls lk lt lo lu lv lw lx bi translated">在 Geopandas 中读写地理数据。</li><li id="9bdb" class="lp lq it kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">投影并设置坐标参考系统(CRS)。</li><li id="ad1d" class="lp lq it kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">可视化地图</li></ol><h1 id="80dc" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">1.读取地理数据</h1><p id="8803" class="pw-post-body-paragraph kt ku it kv b kw mz ju ky kz na jx lb lc nb le lf lg nc li lj lk nd lm ln lo im bi translated">在本教程中，我们将主要使用 3 个数据集:</p><ul class=""><li id="8955" class="lp lq it kv b kw kx kz la lc lr lg ls lk lt lo ne lv lw lx bi translated">国家</li><li id="6127" class="lp lq it kv b kw ly kz lz lc ma lg mb lk mc lo ne lv lw lx bi translated">城市</li><li id="101b" class="lp lq it kv b kw ly kz lz lc ma lg mb lk mc lo ne lv lw lx bi translated">河</li></ul><p id="5402" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">地理(矢量)数据有不同的格式(Shapefiles、Geopackage、Geojson 等)。使用 Geopandas 加载大多数地理数据格式非常简单。我们可以使用<code class="fe md me mf mg b">.read_file().</code></p><p id="1576" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">让我们看一个读取数据的例子。在这种情况下，我们将读取国家数据集。</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="nf ko l"/></div></figure><p id="d7fa" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">首先，我们创建了一个变量来保存文件路径，然后我们使用 Geopandas，<code class="fe md me mf mg b">.read_file() </code>方法来读取国家数据集。Geopandas 负责几何列，使我们能够执行地理处理任务，例如绘制地图。</p><p id="b923" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">开始数据探索的一个好方法是查看前几行、数据的形状以及数据的一般统计信息。这可以通过以下命令来实现。</p><ul class=""><li id="22a4" class="lp lq it kv b kw kx kz la lc lr lg ls lk lt lo ne lv lw lx bi translated">方法返回前 5 行。如果需要，可以调整要返回的行数，例如，<code class="fe md me mf mg b">.head(8)</code>表示数据集中的前 8 行。</li><li id="d518" class="lp lq it kv b kw ly kz lz lc ma lg mb lk mc lo ne lv lw lx bi translated"><code class="fe md me mf mg b">.shape()</code>返回数据的行数和列数</li><li id="bad7" class="lp lq it kv b kw ly kz lz lc ma lg mb lk mc lo ne lv lw lx bi translated"><code class="fe md me mf mg b">.describe()</code>可用于探索一些基本的统计细节，例如，平均值、标准差和百分位数。</li></ul><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="nf ko l"/></div></figure><p id="c725" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这是前 5 行数据的样子。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="nh ni di nj bf nk"><div class="gh gi ng"><img src="../Images/e469d9ef1f7c9db487b72a8e59f8d055.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xo8sYInkOyWpT4zCithrbw.png"/></div></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">countries Geodataframe — first 5 rows</figcaption></figure><p id="f370" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">另一个在 Geopandas 中读取数据的例子，这次我们将读取城市数据集。它以 Geojson 文件的形式出现，但我们用来读取国家/地区数据集的技术同样适用于此处。</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="nf ko l"/></div></figure><p id="0e0e" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们也可以使用<code class="fe md me mf mg b">.head()</code>、<code class="fe md me mf mg b">.shape()</code>和<code class="fe md me mf mg b">.describe()</code>进行同样的探索，以了解这个数据集是关于什么的。一旦我们进行了探索，我们就可以开始绘制地图了。</p><p id="4e3c" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">通过<code class="fe md me mf mg b">.plot()</code>功能，在 Geopandas 中绘制地图很容易。由于我们有两个数据集国家和城市数据，我们可以将它们叠加并显示为地图。在这里，我们使用 Matplotlib 设置子情节，并将轴传递给 Geopandas <code class="fe md me mf mg b">.plot()</code>函数。</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="nf ko l"/></div></figure><p id="bdb3" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这是输出图。只需两到三行代码，我们就能生成这张漂亮的地图。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="nh ni di nj bf nk"><div class="gh gi nn"><img src="../Images/fa4c98742f32280e80614928abe778e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V48cp0feFc_hOljT4wdCkA.png"/></div></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">Countries and cities of the world map — Change picture</figcaption></figure><blockquote class="no np nq"><p id="802b" class="kt ku nr kv b kw kx ju ky kz la jx lb ns ld le lf nt lh li lj nu ll lm ln lo im bi translated">你该做些小运动了。</p><p id="28ef" class="kt ku nr kv b kw kx ju ky kz la jx lb ns ld le lf nt lh li lj nu ll lm ln lo im bi translated">练习 1.1:读取河流数据</p><p id="ce16" class="kt ku nr kv b kw kx ju ky kz la jx lb ns ld le lf nt lh li lj nu ll lm ln lo im bi translated">练习 1.2:阅读河流数据集的前 5 行</p><p id="414c" class="kt ku nr kv b kw kx ju ky kz la jx lb ns ld le lf nt lh li lj nu ll lm ln lo im bi translated">练习 1.3:可视化河流数据集。</p></blockquote><h1 id="f609" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">2.坐标系和投影</h1><p id="d5d8" class="pw-post-body-paragraph kt ku it kv b kw mz ju ky kz na jx lb lc nb le lf lg nc li lj lk nd lm ln lo im bi translated">坐标参考系统表示我们的二维(平面)数据如何与地球上的实际位置相关联。它是将属性保持在各自位置的粘合剂。地理数据框架有。crs 属性，它可以给出数据中使用的原始 CRS。这些坐标很容易变换和投影。但是，要执行投影，必须有相同的 CRS，以便执行地理分析并从分析中获得正确的值。国家、城市和河流有相同的 CRS。让我们检查一下各国的客户登记系统。</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="nf ko l"/></div></figure><p id="e7ff" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这是上面代码{'init': 'epsg:4326'}的输出。EPSG 代表欧洲石油测量组织，是维护空间参考系统的权威机构。代码 4326 指示使用的地理坐标系，在本例中为 1984 年世界大地测量系统(WGS84)。</p><p id="4c9a" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">不同的 CRS 有不同的测量值。有些坐标以十进制度定义，有些则以米定义。在地理数据处理中，将数据从一种格式转换为另一种格式是很常见的。该源对于可视化和比较不同的投影非常有用:</p><div class="nv nw gp gr nx ny"><a href="https://map-projections.net/compare.php?p1=mercator-84&amp;p2=robinson&amp;sps=1" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd iu gy z fp od fr fs oe fu fw is bi translated">墨卡托 vs .罗宾逊:比较地图投影</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">比较墨卡托和罗宾逊的地图投影</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">map-projections.net</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om nl ny"/></div></div></a></div><p id="a44a" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们将把数据投射到墨卡托。当您远离赤道时，墨卡托投影、经纬度四边形会沿 x 轴和 y 轴拉伸。但首先，让我们看看国家数据集的几何列。</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="nf ko l"/></div></figure><p id="7b4f" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这是上面代码的输出。它只是打印出多边形的纬度和经度。这些坐标现在是十进制度。</p><p id="0a19" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">0(多边形((117.7036079039552 4.163414542001791…<br/>)1(多边形((117.703603607903955 2 4.163414544 420017…<br/>)2(多边形((-69.6964699994-17.5996</p><p id="922f" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">让我们投射这些数据，看看变化。在本例中，我们投影到 EPSG:3395，这是广泛使用的墨卡托投影。</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="nf ko l"/></div></figure><p id="330b" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">现在我们的几何列数据如下所示:</p><p id="036b" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">0(多边形((13102705.69639943 460777.6522179524…<br/>)1(多边形((13102705.696399943 460777.6522179 524…<br/>)2(多边形((-7737727-1963777.</p><p id="1d76" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">由于投影，几何图形不再以十进制样式点测量，而是以米为单位。更容易理解地图的区别。让我们画出原始国家和预计国家。</p><div class="ki kj kk kl gt ab cb"><figure class="on km oo op oq or os paragraph-image"><div role="button" tabindex="0" class="nh ni di nj bf nk"><img src="../Images/59ffc7c356edcc34da8f92fb39622446.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*tVPOuuNA5XDMlKPdmpP3QQ.png"/></div></figure><figure class="on km oo op oq or os paragraph-image"><div role="button" tabindex="0" class="nh ni di nj bf nk"><img src="../Images/436ceb868e68e26f12b6e940e805d22f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*2mYaV6ySDDOTZhAz_MEWQg.png"/></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk ot di ou ov">Left WGS84 World map. Right World Mercator Projection map</figcaption></figure></div><p id="7387" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">请注意两张地图中 x 和 y 的不同比例。随着我们从赤道到两极越走越远，墨卡托投影扭曲了物体的大小。这就是为什么非洲看起来很小，而格陵兰岛看起来比它的面积大得多。</p><p id="1111" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">如果您尝试用未投影的数据覆盖投影的数据，那么您的数据将不会正确对齐。让我们看看我们是否能在投影国家的顶部绘制城市。请记住，我们没有规划城市。</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="nf ko l"/></div></figure><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="nh ni di nj bf nk"><div class="gh gi ow"><img src="../Images/51a32ca7c63d7cd2837d659c0440061e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eyje2AXxNHoqcCAo9adWVA.png"/></div></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">Overlay Projected countries and unprojected cities</figcaption></figure><p id="5c58" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">如您所见，城市在投影国家数据集中没有正确叠加。他们落在非洲附近，那不是他们该去的地方。为了正确地对齐它们，我们还需要对国家数据集进行相同的投影，EPSG:3395，这是一个练习。</p><blockquote class="no np nq"><p id="ba08" class="kt ku nr kv b kw kx ju ky kz la jx lb ns ld le lf nt lh li lj nu ll lm ln lo im bi translated">练习 2.1:将城市数据转换为 EPSG:3395 投影，并在 countries_proj 的顶部绘制城市。</p></blockquote><h1 id="c05d" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">3.写入地理数据</h1><p id="53ef" class="pw-post-body-paragraph kt ku it kv b kw mz ju ky kz na jx lb lc nb le lf lg nc li lj lk nd lm ln lo im bi translated">我们可以轻松地将任何新创建的数据保存到本地磁盘。当您希望在其他时间访问该文件而不再次执行相同的操作时，这很有帮助。让我们拯救我们预测的国家。记住我们已经计划好了。Geopandas 有<code class="fe md me mf mg b">.to_file()</code>方法。</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="nf ko l"/></div></figure><p id="3af7" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这将保存您的文件。你可能想下载这个文件，因为我们正在使用 collab，没有用 Google drive 配置它。当您在 Google Colab 中关闭您的会话时，这将被删除。</p><p id="9277" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">如果您已经猜到我们还需要保存练习 2.1 中的预测城市，那么您是对的。这是本部分的最后一个练习。</p><blockquote class="no np nq"><p id="858d" class="kt ku nr kv b kw kx ju ky kz la jx lb ns ld le lf nt lh li lj nu ll lm ln lo im bi translated">练习 3.1:将在练习 2.1 中创建的投影城市文件保存到一个文件中</p></blockquote><h1 id="a8ec" class="mh mi it bd mj mk ml mm mn mo mp mq mr jz ms ka mt kc mu kd mv kf mw kg mx my bi translated">结论</h1><p id="403b" class="pw-post-body-paragraph kt ku it kv b kw mz ju ky kz na jx lb lc nb le lf lg nc li lj lk nd lm ln lo im bi translated">在本教程中，我们已经讲述了加载和写入地理数据以及地理坐标系和投影的基础知识。在下一教程中，我们将学习使用 Geopandas 对地理数据进行地理处理和操作。该代码可从以下 GitHub 存储库中获得:</p><div class="nv nw gp gr nx ny"><a href="https://github.com/shakasom/GDS" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd iu gy z fp od fr fs oe fu fw is bi translated">沙卡姆/GDS</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">地理数据科学教程系列。在 GitHub 上创建一个帐户，为 shakasom/GDS 的发展做出贡献。</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">github.com</p></div></div><div class="oh l"><div class="ox l oj ok ol oh om nl ny"/></div></div></a></div><p id="58fc" class="pw-post-body-paragraph kt ku it kv b kw kx ju ky kz la jx lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">您也可以直接从以下链接运行 Google Collaboraty Jupyter 笔记本:</p><div class="nv nw gp gr nx ny"><a href="https://colab.research.google.com/github/shakasom/GDS/blob/master/Part1%20-%20Introduction.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd iu gy z fp od fr fs oe fu fw is bi translated">谷歌联合实验室</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">编辑描述</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">colab.research.google.com</p></div></div><div class="oh l"><div class="oy l oj ok ol oh om nl ny"/></div></div></a></div></div></div>    
</body>
</html>