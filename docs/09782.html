<html>
<head>
<title>Python For Data Science — Advance Guide to Data Visualization with Plotly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于数据科学的 Python 使用 Plotly 进行数据可视化的高级指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-for-data-science-advance-guide-to-data-visualization-with-plotly-8dbeaedb9724?source=collection_archive---------6-----------------------#2019-12-23">https://towardsdatascience.com/python-for-data-science-advance-guide-to-data-visualization-with-plotly-8dbeaedb9724?source=collection_archive---------6-----------------------#2019-12-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cb21" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何在 Plotly 中添加和自定义滑块、下拉菜单和按钮</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/226acfc035a92b591208534f8c373789.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a2Mqe1nWUvzVNniBxVbFtw.jpeg"/></div></div></figure><p id="2099" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">嗨，读者，如果你像我一样，你会每天都想学习新的东西。我可以帮忙。这是我每周写的另一篇关于数据行业的文章。本周，我们将再次谈论<strong class="kw iu">数据可视化</strong>。<br/>找个舒服的地方，喝杯咖啡，准备写点代码。</p><p id="80da" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">上周，我们谈到了<strong class="kw iu">数据可视化的重要性。<br/> </strong>我们了解到<strong class="kw iu"> Plotly </strong>与经典的 Matplotlib 和 Seaborn 相比，在解释和探索数据方面非常有用。我们还学会了用 Plotly 绘制<strong class="kw iu">基本的</strong> <strong class="kw iu">可视化</strong>，如条形图、饼状图和气泡图。<br/>我们在我写的第一篇<a class="ae lq" rel="noopener" target="_blank" href="/python-for-data-science-a-guide-to-data-visualization-with-plotly-969a59997d0c"> <strong class="kw iu">文章</strong> </a>中谈到过。</p><div class="lr ls gp gr lt lu"><a rel="noopener follow" target="_blank" href="/python-for-data-science-a-guide-to-data-visualization-with-plotly-969a59997d0c"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd iu gy z fp lz fr fs ma fu fw is bi translated">面向数据科学的 python——Plotly 数据可视化指南</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">现在是 2020 年，是时候停止使用 Matplotlib 和 Seaborn 了</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">towardsdatascience.com</p></div></div><div class="md l"><div class="me l mf mg mh md mi ks lu"/></div></div></a></div><p id="092d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在我们接触了 Plotly 之后，是时候通过使用它提供的交互式工具来挖掘它的真正潜力了。当我们用 Plotly 可视化数据时，我们能够添加<strong class="kw iu">某些工具</strong>来允许我们<strong class="kw iu">定制</strong>可视化体验。在向企业主展示数据时，这一点可能是至关重要的，因为它能够更清晰地传达你的观点。</p><p id="ca0e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里有一个关于<a class="ae lq" href="https://www.kaggle.com/c/titanic/data" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu">泰坦尼克号数据集</strong> </a>，<br/>的例子，说我们想同时显示女性和男性的票价分布<strong class="kw iu"/>以及能够分别显示它们<strong class="kw iu"/>。我们可以为此添加一个下拉菜单，Plotly 会为我们完成剩下的工作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/8814c1e10d9e30305e4f5ddcc3a33ba3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*PluNUwmkfORViWd47_IfNQ.gif"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Distribution of Fares by Gender</figcaption></figure><p id="2db7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">通过使用 plotly，我们可以自定义交互地在图表上显示什么和不显示什么。我们通过添加<strong class="kw iu">下拉框</strong>、<strong class="kw iu">滑块</strong>、<strong class="kw iu">按钮</strong>和其他选项来做到这一点。这里的男性和女性选项可能看起来很简单，但是我们将在本文中看到它是多么有用。</p><p id="b402" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本指南中，我将全面介绍如何添加和定制你自己的下拉菜单、滑块和按钮来改善你的视觉效果。</p><h1 id="4220" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">先决条件</h1><p id="1d92" class="pw-post-body-paragraph ku kv it kw b kx ng ju kz la nh jx lc ld ni lf lg lh nj lj lk ll nk ln lo lp im bi translated">显然，在本指南中，我们将大量使用 Plotly。<br/>因此，请确保你在继续阅读本进阶指南之前，对有一个坚实的理解。你可以在这里参考我写的关于的文章。</p><p id="4813" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">通过与 Plotly 一起工作，你应该也能轻松地与熊猫<strong class="kw iu">一起工作。<br/>真巧。我碰巧也写了一本熊猫指南。请务必回忆一下。</strong></p><div class="lr ls gp gr lt lu"><a rel="noopener follow" target="_blank" href="/python-for-data-science-basics-of-pandas-5f8d9680617e"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd iu gy z fp lz fr fs ma fu fw is bi translated">用于数据科学的 Python 熊猫指南</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">10 分钟内完成数据探索指南</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">towardsdatascience.com</p></div></div><div class="md l"><div class="nl l mf mg mh md mi ks lu"/></div></div></a></div><p id="8632" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">Plotly，熊猫等。来吧，你知道我有你。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="92bf" class="mo mp it bd mq mr nv mt mu mv nw mx my jz nx ka na kc ny kd nc kf nz kg ne nf bi translated">进口</h1><p id="33a7" class="pw-post-body-paragraph ku kv it kw b kx ng ju kz la nh jx lc ld ni lf lg lh nj lj lk ll nk ln lo lp im bi translated">像往常一样，我们将使用 Jupyter 笔记本。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="109e" class="of mp it ob b gy og oh l oi oj">#all plotly<br/>from plotly.offline import init_notebook_mode,iplot<br/>import plotly.graph_objects as go<br/>import cufflinks as cf<br/>init_notebook_mode(connected=True)</span><span id="68b4" class="of mp it ob b gy ok oh l oi oj">#others<br/>import pandas as pd<br/>import numpy as np</span></pre><h2 id="53fd" class="of mp it bd mq ol om dn mu on oo dp my ld op oq na lh or os nc ll ot ou ne ov bi translated">导入数据集</h2><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="b14b" class="of mp it ob b gy og oh l oi oj">df = pd.read_csv(filepath)</span></pre><h1 id="f021" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">下拉菜单</h1><p id="a992" class="pw-post-body-paragraph ku kv it kw b kx ng ju kz la nh jx lc ld ni lf lg lh nj lj lk ll nk ln lo lp im bi translated">让我们使用我在本文中第一次展示的选项，<br/>下拉菜单。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/6c523967eed0535eb7c1dc175ce2e556.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*sFSwSJLZUcW-uZ2yJQcJ3w.gif"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Dropdown Menu from <a class="ae lq" href="https://plot.ly/python/dropdowns/" rel="noopener ugc nofollow" target="_blank">Plotly</a></figcaption></figure><p id="914b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您想在<strong class="kw iu">保留地块上的空间</strong>的同时允许一系列选项，下拉菜单非常有用。我们不想让那些看你图表的人被一堆选项淹没。因此，我们将它们<strong class="kw iu">隐藏在下拉列表中</strong>,如果他们愿意，允许他们访问这些选项。</p><p id="b98f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你还没有读过我的关于 Plotly 基础的文章<a class="ae lq" rel="noopener" target="_blank" href="/python-for-data-science-a-guide-to-data-visualization-with-plotly-969a59997d0c"/>，<br/>我们需要在 Plotly 中定义 3 个重要参数。<br/><strong class="kw iu">数据</strong>、<strong class="kw iu">布局</strong>和<strong class="kw iu">图</strong>参数。<br/>我们在绘图中添加下拉菜单的方法是在 Plotly 的<strong class="kw iu">布局</strong>参数中添加该命令。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="9cc3" class="of mp it ob b gy og oh l oi oj">layout=go.Layout(updatemenus=list([dict(buttons= list_updatemenus)]))</span></pre><p id="ba0b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这将为我们设置下拉菜单。然而，我们需要定义在下拉菜单上显示什么，以及在选择这些选项时要应用的更改。我们可以通过定义<strong class="kw iu"> list_updatemenus </strong>参数来实现以上所有功能。</p><p id="f4e4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">特别说明</strong>:plot ly 中的下拉菜单不仅可以改变数据，还可以改变你的布局和播放动画。在本文中，我们将只讨论与数据的交互。你可以在这里做更多的研究，也许有一天我会写这个话题。嗯（表示踌躇等）..精神食粮。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/1517f6dc51466d5e8798d548a91cd465.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PdBEavP1gF4lagofFGX7VA.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Dropdown Menu by <a class="ae lq" href="https://plot.ly/python/dropdowns/" rel="noopener ugc nofollow" target="_blank">Plotly</a>z</figcaption></figure><p id="7984" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">回到手头的事情，<strong class="kw iu"> list_updatemenus </strong>是一个字典列表。<br/>对于每个字典，下拉菜单中都会生成一个选项。<br/>我们在每个字典中定义了这些选项的功能。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ox nn l"/></div></figure><p id="1944" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当我这么说的时候，听起来很混乱，<br/>，但是当你用代码来处理它的时候，它实际上要简单得多。<br/>我们开始吧。</p><p id="4d46" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于<strong class="kw iu"> list_updatemenus、<br/> </strong>中的每一个字典，我们可以把这个字典的每一个都称为一个<strong class="kw iu">选项。<br/> </strong>对于每个<strong class="kw iu">选项</strong>，我们至少需要定义 3 个参数:</p><ul class=""><li id="e2a7" class="oy oz it kw b kx ky la lb ld pa lh pb ll pc lp pd pe pf pg bi translated">标签(字符串)—要在下拉菜单上显示的文本</li><li id="c1e8" class="oy oz it kw b kx ph la pi ld pj lh pk ll pl lp pd pe pf pg bi translated">方法(字符串)-选择选项时要执行的更新方法</li><li id="08d2" class="oy oz it kw b kx ph la pi ld pj lh pk ll pl lp pd pe pf pg bi translated"><strong class="kw iu"> args </strong> (list) —包括将改变显示数据的参数</li></ul><p id="b263" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于<strong class="kw iu"> args </strong>参数，我们应该在列表中至少有两个参数:</p><ul class=""><li id="6778" class="oy oz it kw b kx ky la lb ld pa lh pb ll pc lp pd pe pf pg bi translated">可见(列表)-确定应该和不应该显示哪些数据</li><li id="3080" class="oy oz it kw b kx ph la pi ld pj lh pk ll pl lp pd pe pf pg bi translated">标题(字符串)-显示为图形标题的文本</li></ul><p id="bb48" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里有一个图表可以帮助你理解正在发生的事情。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pm"><img src="../Images/29bd8c1151a1f5aaf4db4c868c473b7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/format:webp/1*RDlVRd0pG8y4jqmZYWRtrA.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Dropdown Menu Simplified</figcaption></figure><h2 id="ae65" class="of mp it bd mq ol om dn mu on oo dp my ld op oq na lh or os nc ll ot ou ne ov bi translated">可见参数</h2><p id="270d" class="pw-post-body-paragraph ku kv it kw b kx ng ju kz la nh jx lc ld ni lf lg lh nj lj lk ll nk ln lo lp im bi translated"><strong class="kw iu"> Args </strong>中的‘<strong class="kw iu">Visible</strong>’定义了我们的图中显示的内容。<br/>是我们在 plotly 中定义的<strong class="kw iu">数据</strong>参数对应的布尔值列表。</p><p id="87e3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">同样，我们的<strong class="kw iu">数据</strong>参数是我们为绘制图表而定义的图表对象列表。通过定义 visible 参数，我们可以选择交互显示哪个/哪些图形对象。</p><p id="dbc7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里有个例子，假设我们的数据是</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="ee46" class="of mp it ob b gy og oh l oi oj">data= [<br/>go.Histogram(x=option1,name='option1'),<br/>go.Histogram(x=option2,name='option2',<br/>go.Histogram(x=option3,name='option3')<br/>]</span></pre><p id="c6f7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">通过使用这里的 visible 参数，我们可以选择只显示列表中图形对象的任意组合。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="7f2a" class="of mp it ob b gy og oh l oi oj">#Show first graph object<br/>{'visible':[True, False, False]}</span><span id="6fde" class="of mp it ob b gy ok oh l oi oj">#Show second graph object<br/>{'visible':[False, True, False]}</span><span id="ebae" class="of mp it ob b gy ok oh l oi oj">#Show first and third graph object<br/>{'visible':[True, False, True]}</span></pre><p id="7a3e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">既然你已经理解了每样东西的含义，这里有一个模板来定义你的下拉菜单。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="ce04" class="of mp it ob b gy og oh l oi oj">list_updatemenus = <br/>[{'label': 'Option 1',<br/>  'method': 'update',<br/>  'args': [{'visible': [True, False, False]}, {'title': 'Title is Option 1'}]},<br/> {'label': 'Option 2',<br/>  'method': 'update',<br/>  'args': [{'visible': [False, True, False]}, {'title': 'Title is Option 2'}]},<br/> {'label': 'Option 3',<br/>  'method': 'update',<br/>  'args': [{'visible': [False, False, True]}, {'title': 'Title is Option 3'}]}]</span><span id="c868" class="of mp it ob b gy ok oh l oi oj">layout=go.Layout(title = 'default title',<br/>updatemenus=list([dict(buttons= list_updatemenus)]))</span></pre><p id="d822" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里有一个关于<a class="ae lq" href="https://www.kaggle.com/c/titanic/data" rel="noopener ugc nofollow" target="_blank">泰坦尼克号数据集</a>的例子。<br/>我们想按等级和性别显示票价的分布。<br/>我们可以通过以下方式实现:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="6eb1" class="of mp it ob b gy og oh l oi oj">#defining list_updatemenus<br/>list_updatemenus = [{'label': 'Survived',<br/>  'method': 'update',<br/>  'args': [{'visible': [False, False, False, True, True, True]}, {'title': 'Distribution of Age for Survived Passengers'}]},<br/> {'label': 'Non Survived',<br/>  'method': 'update',<br/>  'args': [{'visible': [True, True, True, False, False, False]}, {'title': 'Distribution of Age for Non-Survived Passengers'}]}]</span><span id="6b3e" class="of mp it ob b gy ok oh l oi oj">#defining all graph objects<br/>x_pclass3 = df[df['Pclass']==3]['Fare']<br/>x_pclass1 = df[df['Pclass']==1]['Fare']<br/>x_pclass2 = df[df['Pclass']==2]['Fare']<br/>x_male = df[df['Sex']=='male']['Fare']<br/>x_female = df[df['Sex']=='female']['Fare']</span><span id="e5c3" class="of mp it ob b gy ok oh l oi oj">#defining data<br/>data=[go.Histogram(x=x_pclass3,name='3rd Class'),go.Histogram(x=x_pclass1,name='1st Class',opacity = .5,nbinsx=60),go.Histogram(x=x_pclass2,name='2nd Class',opacity = .5),go.Histogram(x=x_male,name='Male',opacity = .5),go.Histogram(x=x_female,name='female',opacity = .5)]</span><span id="ce88" class="of mp it ob b gy ok oh l oi oj">#defining layout<br/>layout=go.Layout(title='Distribution of Fares by Pclass and Gender',updatemenus=list([dict(buttons= list_updatemenus)]),barmode='overlay')</span><span id="24e9" class="of mp it ob b gy ok oh l oi oj">#defining figure and plotting<br/>fig = go.Figure(data,layout)<br/>iplot(fig)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/df23d0e002ee042e8b59060c4f2b28a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*yXLjsjf1ZmfcyWL-tUjq2A.gif"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Distribution of Fares by Gender and Pclass</figcaption></figure><p id="b2c0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从这个图中，我们可以<strong class="kw iu">与它交互</strong>来显示按性别或阶级的票价分布。然后我们可以通过点击图例分别显示每个 p 类或性别<strong class="kw iu"/>或集体显示<strong class="kw iu"/>。现在，你应该意识到这有多强大了。</p><p id="c042" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这个例子中，我们只使用直方图。您也可以选择其他图，以不同的方式可视化相同的指标。在这一点上，如何呈现数据完全取决于你的想象。</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="7e38" class="mo mp it bd mq mr nv mt mu mv nw mx my jz nx ka na kc ny kd nc kf nz kg ne nf bi translated">自定义按钮</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/5643ea17e8177c6ecd2c8403753b77a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*MGCTg_KQHmK-Eq4XNRBjJQ.gif"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Custom Buttons from <a class="ae lq" href="https://plot.ly/python/custom-buttons/" rel="noopener ugc nofollow" target="_blank">Plotly</a></figcaption></figure><p id="f45b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">自定义按钮的作用与下拉菜单相同。唯一不同的是，自定义按钮将所有选项<strong class="kw iu">提前</strong>显示在图上，让全世界都能看到。如果你想让你的观众提前知道你所有的选择，这可能会也可能不会帮助他们更好地理解你试图展示的东西。</p><p id="2612" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">添加自定义按钮的语法也与下拉菜单非常相似。<br/>唯一不同的是你在<strong class="kw iu">布局</strong>中添加了“type = buttons”。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="2276" class="of mp it ob b gy og oh l oi oj">layout=go.Layout(updatemenus=list([dict(buttons= list_updatemenus), type = buttons]))</span></pre><p id="2765" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">差不多就是这样。让我们来看另一个例子。</p><p id="b31b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于这个例子，我们试图通过 Pclass 显示幸存和非幸存乘客的年龄分布。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="2126" class="of mp it ob b gy og oh l oi oj">#defining list_updatemenus<br/>list_updatemenus = [{'label': 'Survived',<br/>  'method': 'update',<br/>  'args': [{'visible': [False, False, False, True, True, True]}, {'title': 'Distribution of Fares by Pclass'}]},<br/> {'label': 'Non Survived',<br/>  'method': 'update',<br/>  'args': [{'visible': [True, True, True, False, False, False]}, {'title': 'Distribution of Fares by Gender'}]}]</span><span id="8694" class="of mp it ob b gy ok oh l oi oj">#defining graph objects<br/>x_pclass3_nonsurvived = df[df['Pclass']==3][df['Survived']==0]['Age']<br/>x_pclass1_nonsurvived = df[df['Pclass']==1][df['Survived']==0]['Age']<br/>x_pclass2_nonsurvived = df[df['Pclass']==2][df['Survived']==0]['Age']<br/>x_pclass3_survived = df[df['Pclass']==3][df['Survived']==1]['Age']<br/>x_pclass1_survived = df[df['Pclass']==1][df['Survived']==1]['Age']<br/>x_pclass2_survived = df[df['Pclass']==2][df['Survived']==1]['Age']</span><span id="74bf" class="of mp it ob b gy ok oh l oi oj">#defining data<br/>data=[go.Histogram(x=x_pclass3_nonsurvived,name='Died 3rd Class',nbinsx=60),go.Histogram(x=x_pclass1_nonsurvived,name='Died 1st Class',opacity = .5,nbinsx=60),go.Histogram(x=x_pclass2_nonsurvived,name='Died 2nd Class',opacity = .5,nbinsx=60),go.Histogram(x=x_pclass3_survived,name='Survived 3rd Class',nbinsx=60),go.Histogram(x=x_pclass1_survived,name='Survived 1st Class',opacity = .5,nbinsx=60),go.Histogram(x=x_pclass2_survived,name='Survived 2nd Class',opacity = .5,nbinsx=60)]</span><span id="7ad6" class="of mp it ob b gy ok oh l oi oj">#defining layout<br/>layout=go.Layout(title='Distribution of Age by Pclass',updatemenus=list([dict(buttons= list_updatemenus,type = 'buttons')]),barmode='overlay')</span><span id="0b1e" class="of mp it ob b gy ok oh l oi oj">#defining layout and plotting<br/>fig = go.Figure(data,layout)<br/>iplot(fig)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/d6d7b7a9aeda1be1b850ec082b7f7f1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*MJytLch18NGQmfv5zYpxrQ.gif"/></div></figure><p id="7c61" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">观察剧情，我们可以看到大多数非幸存者购买了泰坦尼克号上的<strong class="kw iu">3 级</strong>T7 级。这些第三类非幸存者的年龄大多在<strong class="kw iu"> 15 </strong>和<strong class="kw iu"> 35 </strong>之间。这让我相信，Pclass 列肯定在决定幸存者是否幸存方面发挥了作用。</p><p id="fef5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有了自定义按钮，对观众来说更加<strong class="kw iu">明显</strong>你在过滤幸存和非幸存的乘客。在某些情况下，这将使你的演示看起来更专业，更容易理解。</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="1ceb" class="mo mp it bd mq mr nv mt mu mv nw mx my jz nx ka na kc ny kd nc kf nz kg ne nf bi translated">滑块</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/11e9ad0f2b423f98f0254babf4aaae8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*-Uvhwq9fNtHXZoN-pZKs8A.gif"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Sliders from <a class="ae lq" href="https://plot.ly/python/sliders/" rel="noopener ugc nofollow" target="_blank">Plotly</a></figcaption></figure><p id="78c2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">虽然按钮和下拉菜单擅长显示不同的图表，但我发现滑块擅长在<strong class="kw iu">改变</strong> <strong class="kw iu">某些变量的值</strong>时显示图表。如果所述变量是连续的<strong class="kw iu">数字</strong>变量，则更加明显。年龄可以是一个完美的例子。</p><p id="673a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">滑块的工作方式与下拉菜单和按钮相同。不同之处在于，滑块允许你在与滑块交互时显示大量的选项。滑块本身也给人一种增加和减少某个值的错觉，但事实可能并非如此。</p><p id="ba3b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以像使用下拉菜单和按钮一样使用滑块，通过从<strong class="kw iu">不同角度</strong>切片数据来显示不同类型的图表。然而，我更喜欢展示某个情节，同时能够<strong class="kw iu">操纵</strong>一个变量来更好地讲述一个故事。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pn nn l"/></div></figure><p id="04bd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">就像下拉菜单和按钮一样，我们在绘图中添加滑块的方式是在我们的<strong class="kw iu">布局</strong>中添加一个简单的参数。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="33c7" class="of mp it ob b gy og oh l oi oj">layout=go.Layout(<br/>    sliders=sliders<br/>)</span></pre><p id="a711" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们通过定义<strong class="kw iu">滑块和步骤</strong>参数来定义在滑块上显示的内容和应用的更改，就像我们如何定义下拉菜单的<strong class="kw iu"> list_updatemenus </strong>一样。</p><p id="d6c9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">类似地，<strong class="kw iu">滑块</strong>参数是一个字典列表。<br/>对于每个字典，在图上生成一个滑块。</p><p id="90b6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">滑块</strong>保存定义默认值的参数，如:</p><ul class=""><li id="e629" class="oy oz it kw b kx ky la lb ld pa lh pb ll pc lp pd pe pf pg bi translated">currentvalue(字典)—显示在滑块顶部的文本</li><li id="ba99" class="oy oz it kw b kx ph la pi ld pj lh pk ll pl lp pd pe pf pg bi translated">活动(整数)-要显示的默认步骤</li><li id="c21a" class="oy oz it kw b kx ph la pi ld pj lh pk ll pl lp pd pe pf pg bi translated"><strong class="kw iu">步骤</strong>(列表)—包括将改变显示数据的参数</li></ul><p id="198b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">步骤</strong>参数相当于下拉菜单的<strong class="kw iu"> list_updatemenus </strong>。<br/>这是一个字典列表，每个字典在滑块上生成一个选项。我们通过定义以下内容来定义这些选项的功能:</p><ul class=""><li id="db9b" class="oy oz it kw b kx ky la lb ld pa lh pb ll pc lp pd pe pf pg bi translated">标签(字符串)—要在滑块上显示的文本</li><li id="e8e1" class="oy oz it kw b kx ph la pi ld pj lh pk ll pl lp pd pe pf pg bi translated">方法(字符串)-选择选项时要执行的更新方法</li><li id="fdb3" class="oy oz it kw b kx ph la pi ld pj lh pk ll pl lp pd pe pf pg bi translated"><strong class="kw iu"> args </strong>(列表)—包括将改变显示数据的参数</li><li id="ae70" class="oy oz it kw b kx ph la pi ld pj lh pk ll pl lp pd pe pf pg bi translated"><strong class="kw iu">可见</strong>(列表)—决定哪些数据应该显示，哪些不应该显示</li></ul><p id="9412" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里有一个图表可以帮助你理解正在发生的事情。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi po"><img src="../Images/002f9c9bf6ff064111120b9b2c4564f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8SIJXJjnOHU1Ye_jvMxPTg.png"/></div></div></figure><p id="91e8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们看一个例子来帮助你更好地理解这一点。<br/>为此，我们打算展示随着泰坦尼克号上乘客年龄的增长，生存能力的<strong class="kw iu">变化</strong>。</p><p id="1821" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在我的脑海中，我正在描绘一个条形图，显示我们操作滑块时幸存的 0 和 1 的计数。既然我们在操纵年龄，我们应该为年龄设置滑块。我们还必须为年龄增长的每一步创建一个图表对象。我们是这样做的。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="5b2a" class="of mp it ob b gy og oh l oi oj"># Create figure<br/>fig = go.Figure()</span><span id="ed3a" class="of mp it ob b gy ok oh l oi oj"># Create Graph Object for every increase of 2 years of Age<br/>for step in np.arange(0, 80, 2):<br/>    y=[]<br/>    for i in list(df['Survived'].unique()):<br/>        result = df[df['Age']&lt;=step][df['Survived']==i]['Survived'].count()<br/>        y.append(result)<br/>    fig.add_trace(<br/>        go.Bar(<br/>            visible=False,<br/>            x = list(df['Survived'].unique()),<br/>            y= y,<br/>            name="Age = " + str(step)))</span></pre><p id="c45b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于这个代码块，我们为从 0 岁到 80 岁的每两步增长创建一个图形对象(条形图)。因此，我们这里基本上有 40 个<strong class="kw iu">步骤</strong>和<strong class="kw iu">图形对象</strong>。滑块将能够有效地浏览这些步骤和图形对象。</p><p id="1ff2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，我们定义我们的<strong class="kw iu">滑块</strong>和<strong class="kw iu">步进</strong>参数。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="f6f2" class="of mp it ob b gy og oh l oi oj">#defining sliders<br/>sliders = [dict(<br/>    currentvalue={"prefix": "Age less than "},<br/>    active=1,<br/>    steps=steps<br/>)]</span><span id="3dd4" class="of mp it ob b gy ok oh l oi oj">#defining steps <br/>steps = []<br/>for i in range(len(fig.data)):<br/>    step = dict(<br/>        label = str([i for i in np.arange(0, 80, 2)][i]),<br/>        method="restyle",<br/>        args=["visible", [False] * len(fig.data)],<br/>    )<br/>    step["args"][1][i] = True  # Toggle i'th trace to "visible"<br/>    steps.append(step)</span></pre><p id="68a6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这个代码块中，我们创建了一个字典，并将其追加到年龄每增加 2 岁的 steps 参数中，同时包含了对每个步骤所做的所有更改。</p><p id="7a80" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，我们定义我们的布局并绘制图表。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="2c2b" class="of mp it ob b gy og oh l oi oj">#defining layout and plotting <br/>fig.update_layout(<br/>    title = 'Change of Survivability with Age',<br/>    yaxis=dict(title='Count of Survived'),<br/>    sliders=sliders<br/>)<br/>fig.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/7b52bb363a98155506162e1a6f707bc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*eBRbG9G9rFN3lh-Y-xLsmg.gif"/></div></figure><p id="ae10" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">瞧，多么美丽的情节。我们看到，一旦我们到了 18 岁，非幸存者人数开始超过幸存者人数。我们也可以有把握地说，对于所有 18 岁以下的乘客，他们中的大多数都活了下来。这可能为我们的分析提供有用的信息。</p><p id="288d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你还没明白，滑块在显示数值变化方面非常有效。如果您试图显示相对于时间<strong class="kw iu">和时间</strong>的数据，它也会发挥巨大的作用。这是一个非常强大的工具，我希望你开始在你的分析中更多地使用它。</p><p id="cfa6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面是我们刚刚在本文中运行的所有内容的完整代码:</p><div class="lr ls gp gr lt lu"><a href="https://github.com/nickefy/advance-guide-to-data-visualization-with-plotly/blob/master/Advance%20Guide%20to%20Data%20Visualization%20with%20Plotly.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd iu gy z fp lz fr fs ma fu fw is bi translated">nickefy/advance-用绘图引导数据可视化</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">github.com</p></div></div><div class="md l"><div class="pp l mf mg mh md mi ks lu"/></div></div></a></div></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h1 id="7cd0" class="mo mp it bd mq mr nv mt mu mv nw mx my jz nx ka na kc ny kd nc kf nz kg ne nf bi translated">恭喜</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pq"><img src="../Images/6b5eff4a5763b13b91cc12c020621961.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oUBclkkoFpmxjAHn"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Photo by <a class="ae lq" href="https://unsplash.com/@brucemars?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">bruce mars</a> on <a class="ae lq" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="784a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">欢欣鼓舞。你坚持到了最后。要接受的东西很多。我明白了。</p><p id="2963" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本指南中，您已经学习了 Plotly 的 3 个主要交互工具，它们是:</p><ul class=""><li id="3c17" class="oy oz it kw b kx ky la lb ld pa lh pb ll pc lp pd pe pf pg bi translated">下拉菜单</li><li id="1aa2" class="oy oz it kw b kx ph la pi ld pj lh pk ll pl lp pd pe pf pg bi translated">小跟班</li><li id="90dd" class="oy oz it kw b kx ph la pi ld pj lh pk ll pl lp pd pe pf pg bi translated">滑块</li></ul><p id="34c2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这些工具在试图理解数据集、执行有价值的分析和向利益相关者展示时，肯定会给你带来优势。</p><h1 id="1bd6" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">在你走之前</h1><p id="c3ea" class="pw-post-body-paragraph ku kv it kw b kx ng ju kz la nh jx lc ld ni lf lg lh nj lj lk ll nk ln lo lp im bi translated">我们的数据之旅还没有结束。我正在撰写更多关于数据行业的故事、文章和指南。你绝对可以期待更多这样的帖子。与此同时，请随意查看我的其他文章，以暂时满足您对数据的渴望。</p><p id="aff5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在继续吧，我的朋友们，向世界展示我们数据从业者有多强大。<br/>和往常一样，我以一句名言结束。</p><blockquote class="pr ps pt"><p id="9771" class="ku kv pu kw b kx ky ju kz la lb jx lc pv le lf lg pw li lj lk px lm ln lo lp im bi translated">如果没有大数据，你会又瞎又聋，还在高速公路上。—杰弗里·摩尔</p></blockquote></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h2 id="46a0" class="of mp it bd mq ol om dn mu on oo dp my ld op oq na lh or os nc ll ot ou ne ov bi translated"><a class="ae lq" href="https://www.nicholas-leong.com/sign-up-here" rel="noopener ugc nofollow" target="_blank">订阅我的时事通讯，保持联系。</a></h2><p id="3640" class="pw-post-body-paragraph ku kv it kw b kx ng ju kz la nh jx lc ld ni lf lg lh nj lj lk ll nk ln lo lp im bi translated">也可以通过<a class="ae lq" href="https://nickefy.medium.com/membership" rel="noopener"> <strong class="kw iu">我的链接</strong> </a>注册中等会员来支持我。你将能够从我和其他不可思议的作家那里读到无限量的故事！</p><p id="bf76" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我正在撰写更多关于数据行业的故事、文章和指南。你绝对可以期待更多这样的帖子。与此同时，可以随时查看我的其他<a class="ae lq" href="https://medium.com/@nickmydata" rel="noopener"> <strong class="kw iu">文章</strong> </a>来暂时填补你对数据的饥渴。</p><p id="b29c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu"> <em class="pu">感谢</em> </strong> <em class="pu">阅读！如果你想与我取得联系，请随时联系我在 nickmydata@gmail.com 或我的</em> <a class="ae lq" href="https://www.linkedin.com/in/nickefy/" rel="noopener ugc nofollow" target="_blank"> <em class="pu"> LinkedIn 个人资料</em> </a> <em class="pu">。也可以在我的</em><a class="ae lq" href="https://github.com/nickefy" rel="noopener ugc nofollow" target="_blank"><em class="pu">Github</em></a><em class="pu">中查看之前的撰写代码。</em></p></div></div>    
</body>
</html>