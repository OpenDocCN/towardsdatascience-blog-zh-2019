<html>
<head>
<title>How frustrated are Premier League fans with VAR? A look at their reactions using Sentiment Analysis in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有 VAR 的英超球迷有多沮丧？用情感分析来观察他们的反应</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-frustrated-are-premier-league-fans-with-var-c8ae9c227418?source=collection_archive---------32-----------------------#2019-11-20">https://towardsdatascience.com/how-frustrated-are-premier-league-fans-with-var-c8ae9c227418?source=collection_archive---------32-----------------------#2019-11-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a2cf" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><strong class="ak">什么是 VAR？</strong></h2></div><p id="e0f5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">国际足联引入了视频助理裁判(VAR)来支持裁判的决策过程。过去有许多有争议的事件导致了 VAR 的引入。其中一次是在 2010 年世界杯淘汰赛中，英国队以 2:1 落后于德国队，当时<a class="ae lb" href="https://www.theguardian.com/football/2010/jul/05/frank-lampard-england-germany" rel="noopener ugc nofollow" target="_blank">弗兰克·兰帕德的</a>射门击中横梁下侧，弹过了大约一码的球门线。但是裁判没看到。德国以 4 比 1 赢得了比赛，英格兰被淘汰出局。另一个是臭名昭著的<a class="ae lb" href="https://www.theguardian.com/football/2009/nov/19/thierry-henry-handball-football-worlcup" rel="noopener ugc nofollow" target="_blank">蒂埃里·亨利在 2009 年对阵爱尔兰的</a>手球。VAR 被设定为只在改变比赛的情况下使用，如进球、点球和红牌。这样，他们应该对游戏有最小的干扰。</p><h2 id="78d7" class="lc ld iq bd le lf lg dn lh li lj dp lk ko ll lm ln ks lo lp lq kw lr ls lt lu bi translated"><strong class="ak">为什么 VAR 出现在新闻中的原因是错误的？</strong></h2><p id="a6b3" class="pw-post-body-paragraph kf kg iq kh b ki lv jr kk kl lw ju kn ko lx kq kr ks ly ku kv kw lz ky kz la ij bi translated">从本赛季(2019–20)开始在英超联赛中引入 VAR。自本赛季开始以来，VAR 在英超联赛中购买的争议多于解决方案。11 月 10 日利物浦对曼城的比赛中发生的两起事件(特伦特·亚历山大-阿诺德的手球和莫·萨拉赫的越位判罚)最近成为英超联赛中的热门话题。本赛季有类似的事件发生，这使得范质疑 VAR 在英超联赛中的使用。</p><p id="e357" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过对英超球迷关于 VAR 的推文进行情感分析，我试图理解:</p><p id="40a5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ma"> 1。总体而言，英超球迷对 VAR 的使用持积极还是消极态度？</em></p><p id="5711" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ma"> 2。他们在关于 VAR 的推文中表现出什么样的情绪？</em></p><p id="4854" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ma"> 3。英超球迷在发关于 VAR 的微博时常用的词语有哪些？</em></p><p id="c431" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ma"> 4。基于他们支持的俱乐部，球迷对 VAR 的反应有什么不同吗？</em></p><h2 id="d136" class="lc ld iq bd le lf lg dn lh li lj dp lk ko ll lm ln ks lo lp lq kw lr ls lt lu bi translated"><strong class="ak">为什么使用 Twitter 进行情感分析？</strong></h2><p id="cb44" class="pw-post-body-paragraph kf kg iq kh b ki lv jr kk kl lw ju kn ko lx kq kr ks ly ku kv kw lz ky kz la ij bi translated">社交媒体已经从人们相互交谈的平台转变为人们分享观点、表达不满以及赞扬或批评机构和公众人物的媒介。在社交媒体平台中，Twitter 是人们用来评论或抱怨产品和事件以及谈论个性的主要平台。与其他写长篇故事的平台不同，由于大小限制，用户可以专注于他们的关键信息，因此很容易在 Twitter 上找到主题的脉搏。</p><h2 id="8d3e" class="lc ld iq bd le lf lg dn lh li lj dp lk ko ll lm ln ks lo lp lq kw lr ls lt lu bi translated"><strong class="ak">如何在 R 中做情感分析？</strong></h2><p id="7fbc" class="pw-post-body-paragraph kf kg iq kh b ki lv jr kk kl lw ju kn ko lx kq kr ks ly ku kv kw lz ky kz la ij bi translated">r 中有许多可用于分析 Twitter 情绪的软件包。下面给出了一个广泛使用的软件包的逐步流程:</p><p id="f016" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">创建 Twitter 应用</strong></p><p id="7b83" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Twitter 开发了一个 API，可以用来分析用户发布的推文。这个 API 帮助我们以结构化的格式提取数据，以便于分析。这里的<a class="ae lb" href="https://iag.me/socialmedia/how-to-create-a-twitter-app-in-8-easy-steps/" rel="noopener ugc nofollow" target="_blank">给出了创建 twitter 应用程序的过程</a>。当您创建一个在分析过程中提取推文所需的 twitter 应用程序时，会生成以下四个键:</p><p id="57e5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">消费者密钥(API 密钥)</p><p id="f2e5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">消费者秘密(API 秘密)</p><p id="c434" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">访问令牌</p><p id="c7bc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">访问令牌秘密</p><p id="181e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">安装包并提取 tweet </strong></p><p id="8951" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装情感分析所需的软件包。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="c92f" class="lc ld iq mg b gy mk ml l mm mn"># Install packages<br/>install.packages("twitteR")<br/>install.packages("RCurl")<br/>install.packages("httr")<br/>install.packages("syuzhet")</span><span id="009e" class="lc ld iq mg b gy mo ml l mm mn"># Load the required Packages<br/>library(twitteR)<br/>library(RCurl)<br/>library(httr)<br/>library(tm)<br/>library(wordcloud)<br/>library(syuzhet)</span></pre><p id="d11c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">TwitteR 包提供了对 Twitter API 的访问。<strong class="kh ir"> RCurl </strong>和<strong class="kh ir"> httr </strong>包提供的功能允许用户编写 HTTP 请求并处理 Web 服务器返回的结果。Syuzhet 包用于从文本中提取情感和基于情感的情节弧线。syuzhet 包下的<strong class="kh ir"> nrc </strong> lexicon <strong class="kh ir"> </strong>让用户在一个文本文件中计算出除了两种情绪之外的八种不同情绪的存在及其相应的效价。</p><p id="5c47" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于免费的 twitter 应用程序只允许用户提取过去 7 天的推文，我分析了英超球迷对 2019 年 11 月 9 日和 10 日举行的 Gameweek 12 比赛的 VAR 的反应。以下是 Gameweek 12 的成绩:</p><figure class="mb mc md me gt mq gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mp"><img src="../Images/81635b579ca50355e4fbf3e7e96b6e6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8IqDKx4H0UKtP_dETojpVw.png"/></div></div></figure><p id="7cd8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装必要的包后的下一步是设置 Twitter API，调用 Twitter 应用程序并使用关键字提取数据。用于提取推文的关键词是“VAR”和“epl”。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="76a5" class="lc ld iq mg b gy mk ml l mm mn"># authorisation keys<br/>consumer_key = "XXXXXXXXXXXXXXXX" <br/>consumer_secret = "XXXXXXXXXXXXXXX" <br/>access_token = "XXXXXXXXXXXXXXX" <br/>access_secret ="XXXXXXXXXXXXXXX" <br/><br/># set up<br/>setup_twitter_oauth(consumer_key,consumer_secret,access_token, access_secret)</span><span id="d739" class="lc ld iq mg b gy mo ml l mm mn"># search for tweets in english language<br/>tweetVAR = searchTwitter("VAR epl", n = 10000, lang = "en")</span><span id="2f34" class="lc ld iq mg b gy mo ml l mm mn"># store the tweets into a dataframe<br/>tweetsVAR.df = twListToDF(tweetVAR)</span></pre><p id="66b8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">数据清理<br/> Gsub </strong>功能从推文中删除不想要的内容，如标签、数字、停用词和 URL，以便推文可以进行分析。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="2b0e" class="lc ld iq mg b gy mk ml l mm mn">#cleaning tweets<br/>tweetsVAR.df$text=gsub("&amp;amp", "", tweetsVAR.df$text)<br/>tweetsVAR.df$text = gsub("&amp;amp", "", tweetsVAR.df$text)<br/>tweetsVAR.df$text = gsub("(RT|via)((?:\\b\\W*@\\w+)+)", "", tweetsVAR.df$text)<br/>tweetsVAR.df$text = gsub("@\\w+", "", tweetsVAR.df$text)<br/>tweetsVAR.df$text = gsub("[[:punct:]]", "", tweetsVAR.df$text)<br/>tweetsVAR.df$text = gsub("[[:digit:]]", "", tweetsVAR.df$text)<br/>tweetsVAR.df$text = gsub("http\\w+", "", tweetsVAR.df$text)<br/>tweetsVAR.df$text = gsub("[ \t]{2,}", "", tweetsVAR.df$text)<br/>tweetsVAR.df$text = gsub("^\\s+|\\s+$", "", tweetsVAR.df$text)<br/>tweetsVAR.df$text = gsub("penalty", "", tweetsVAR.df$text)<br/>tweetsVAR.df$text = gsub("football", "", tweetsVAR.df$text)</span><span id="4b4e" class="lc ld iq mg b gy mo ml l mm mn">tweetsVAR.df$text &lt;- iconv(tweetsVAR.df$text, "UTF-8", "ASCII", sub="")</span></pre><p id="68a1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">分析情绪和可视化</strong></p><p id="811f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Syuzhet 根据 2 种情绪和 8 种情感对每条推文进行评分。在下一步中，我使用了一个条形图来可视化在推文中占主导地位的情绪类型。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="33f8" class="lc ld iq mg b gy mk ml l mm mn"># Emotions for each tweet using NRC dictionary<br/>emotions &lt;- get_nrc_sentiment(tweetsVAR.df$text)<br/>emo_bar = colSums(emotions)<br/>emo_sum = data.frame(count=emo_bar, emotion=names(emo_bar))<br/>emo_sum$emotion = factor(emo_sum$emotion, <br/>                         levels=emo_sum$emotion[order(emo_sum$count, decreasing = TRUE)])</span><span id="b1d4" class="lc ld iq mg b gy mo ml l mm mn"># Visualize the emotions from NRC sentiments<br/>var &lt;- ggplot(emo_sum, aes(x=emotion, y= count, fill = emotion))+<br/>  geom_bar (stat = "identity")+<br/>  ggtitle("Sentiments and Emotions about VAR in EPL")</span><span id="d77e" class="lc ld iq mg b gy mo ml l mm mn">var</span></pre><h2 id="2cf8" class="lc ld iq bd le lf lg dn lh li lj dp lk ko ll lm ln ks lo lp lq kw lr ls lt lu bi translated"><strong class="ak">情感分析的结果</strong></h2><p id="57a1" class="pw-post-body-paragraph kf kg iq kh b ki lv jr kk kl lw ju kn ko lx kq kr ks ly ku kv kw lz ky kz la ij bi translated"><strong class="kh ir">有哪些关于 VAR 的感悟，展现了怎样的情绪？</strong></p><p id="bffe" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">英超球迷对 VAR 的使用总体持负面看法，因为负面看法的数量高于正面看法。就表达的情绪而言，悲伤、愤怒和恐惧等负面情绪主导了喜悦和惊喜等情绪。情况可能是这样的，消极情绪在本周的比赛中特别严重，因为在几场比赛中有许多有争议的决定，特别是利物浦对曼城和热刺对谢菲尔德联队。</p><figure class="mb mc md me gt mq gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mx"><img src="../Images/aba58d687c12d3c380524c715215a564.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Di1_BPHO6jFCx-_QS0k-g.png"/></div></div></figure><p id="7c1c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">英超球迷在发关于 VAR 的微博时常用的词语有哪些？</strong></p><p id="8625" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我使用了<strong class="kh ir"> wordcloud </strong>软件包来了解不同类型的情绪是由哪些词组成的。<strong class="kh ir"> comparison.cloud </strong>功能可以比较不同类别中不同单词的使用频率。在这种情况下，我比较了不同类型情绪下的单词频率。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="4c4e" class="lc ld iq mg b gy mk ml l mm mn"># Create comparison word cloud visualization</span><span id="4c3b" class="lc ld iq mg b gy mo ml l mm mn">wordcloud_tweet = c(<br/>  paste(tweetsVAR.df$text[emotions$anger &gt; 0], collapse=" "),<br/>  paste(tweetsVAR.df$text[emotions$anticipation &gt; 0], collapse=" "),<br/>  paste(tweetsVAR.df$text[emotions$disgust &gt; 0], collapse=" "),<br/>  paste(tweetsVAR.df$text[emotions$fear &gt; 0], collapse=" "),<br/>  paste(tweetsVAR.df$text[emotions$joy &gt; 0], collapse=" "),<br/>  paste(tweetsVAR.df$text[emotions$sadness &gt; 0], collapse=" "),<br/>  paste(tweetsVAR.df$text[emotions$surprise &gt; 0], collapse=" "),<br/>  paste(tweetsVAR.df$text[emotions$trust &gt; 0], collapse=" ")<br/>)</span><span id="a75d" class="lc ld iq mg b gy mo ml l mm mn"># create corpus<br/>corpus = Corpus(VectorSource(wordcloud_tweet))</span><span id="8154" class="lc ld iq mg b gy mo ml l mm mn"># remove punctuation, convert every word in lower case and remove stop words<br/>corpus = tm_map(corpus, tolower)<br/>corpus = tm_map(corpus, removePunctuation)<br/>corpus = tm_map(corpus, removeWords, c(stopwords("english")))<br/>corpus = tm_map(corpus, stemDocument)</span><span id="e032" class="lc ld iq mg b gy mo ml l mm mn"># create document term matrix<br/>tdm = TermDocumentMatrix(corpus)</span><span id="c547" class="lc ld iq mg b gy mo ml l mm mn"># convert as matrix<br/>tdm = as.matrix(tdm)<br/>tdmnew &lt;- tdm[nchar(rownames(tdm)) &lt; 11,]</span><span id="e92d" class="lc ld iq mg b gy mo ml l mm mn"># column name binding<br/>colnames(tdm) = c('anger', 'anticipation', 'disgust', 'fear', 'joy', 'sadness', 'surprise', 'trust')<br/>colnames(tdmnew) &lt;- colnames(tdm)<br/>par(mar = rep(0, 4)) <br/>comparison.cloud(tdmnew, random.order=FALSE,<br/>                 colors = c("#00B2FF", "red", "#FF0099", "#6600CC", "green", "orange", "blue", "brown"),<br/>                 title.size=1, max.words=250, scale=c(2.5, 0.4),rot.per=0.4)</span></pre><figure class="mb mc md me gt mq gh gi paragraph-image"><div class="gh gi my"><img src="../Images/7baf8fe847207353e6f75da3a49bed06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/format:webp/1*MwVqwOns6ldqRQ_crQvr5Q.png"/></div></figure><p id="4c21" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我最初运行代码时，我发现像“惩罚”这样的词被归类到情绪的恐惧类别下，而“足球”被归类到快乐类别下。对于一般文本的情感分析，这是有意义的，因为处罚意味着支付罚款，而足球意味着进行一项可以归类为快乐的运动。但是对于这个特定的分析，这些分类没有意义，因此使用<strong class="kh ir"> gsub </strong>函数<strong class="kh ir">将这些词从 tweets 中删除。</strong></p><p id="45c5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">基于球迷支持的俱乐部，球迷对 VAR 的反应有什么不同吗？</strong></p><p id="54bb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我假设英超球迷对使用 VAR 的反应取决于他们的俱乐部在特定比赛周的表现，以及使用 VAR 对他们的球队产生积极还是消极的结果。因此，我为四家俱乐部(利物浦、曼联、阿森纳和托特纳姆热刺)创建了单独的数据框架，以使用“VAR”和各自俱乐部的官方 twitter id 作为关键词来提取推文。然后我对四个俱乐部进行了情绪分析。</p><figure class="mb mc md me gt mq gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mz"><img src="../Images/2d26f0b19ca1ef78dd3d565a9db18a8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_9SZqtHnFQogNPCeC8lFtA.png"/></div></div></figure><p id="8c97" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如假设的那样，在利物浦和曼联的球迷中，他们的球队在这个特定的比赛周赢得了比赛，而在阿森纳和托特纳姆的球迷中，他们对 VAR 的整体情绪是积极的，而在他们各自输掉的比赛中，他们的整体情绪是消极的。</p><p id="eb34" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本赛季被引入英超之前，VAR 已经在 2018 年 FIFA 世界杯和欧洲俱乐部比赛中使用。事实证明，在很多情况下，这对于帮助裁判做出正确的决定至关重要。在 2019 年 4 月的冠军联赛半决赛中，VAR 排除了拉希姆·斯特林(Raheem Sterling)最后一分钟的进球，这个进球本来可以让曼城晋级。那个进球因越位被判无效，托特纳姆反而进步了。令人惊讶的是，英超裁判从未使用过球场边的监视器来辅助裁判。最近的<a class="ae lb" href="https://www.premierleague.com/news/1494932" rel="noopener ugc nofollow" target="_blank">股东大会</a>上，英超联赛和 PGMOL 承诺改善 VAR 的实施和裁判对球场边监视器的定期使用，预计将减少围绕 VAR 的争议并改变围绕 VAR 的情绪。</p></div></div>    
</body>
</html>