<html>
<head>
<title>How To Build a Model on SageMaker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在 SageMaker 上建立模型</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-build-a-model-on-sagemaker-da03be698a9c?source=collection_archive---------6-----------------------#2019-08-11">https://towardsdatascience.com/how-to-build-a-model-on-sagemaker-da03be698a9c?source=collection_archive---------6-----------------------#2019-08-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/314e4cf5b546ef56fa77001c6a2e4775.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Tz1hUusNhxc7qN3g"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@samuelzeller?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Samuel Zeller</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7dd9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">数据科学项目往往以报告的准确性和圆滑的情节而告终。在这篇文章中，我们将探讨下一步:如何创建一个可以部署的模型。</p><p id="13ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们将使用<a class="ae kc" href="https://aws.amazon.com/sagemaker/" rel="noopener ugc nofollow" target="_blank"> Amazon SageMaker </a>并分解从实验到生产就绪的步骤。我们将遵循高层次的方法，这意味着 AWS 将为我们挑选一些参数。</p><p id="a96b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在继续之前，确保你有一个 AWS 账户和一个<a class="ae kc" href="https://jupyter.org" rel="noopener ugc nofollow" target="_blank"> Jupyter 笔记本</a>的访问权限。</p><h1 id="8ac9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">设置笔记本实例</h1><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lz"><img src="../Images/06a919d09c395df8b5f7084931700a5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*u1BVsof_SxjEFrj7"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@westwardwayphotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">ASHLEY EDWARDS</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e90b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一步是登录<a class="ae kc" href="http://console.aws.amazon.com" rel="noopener ugc nofollow" target="_blank">亚马逊控制台</a>，寻找 SageMaker，以防它不可见。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi me"><img src="../Images/cd410b129e7f7887f41ed12be602a167.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WFIkP3gUgv69iNqbICvx-g.png"/></div></div></figure><p id="4cff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们点击<em class="mf">创建笔记本实例</em>。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mg"><img src="../Images/7f1023e11a018b3df524eb3419cbaeb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dUu_s4BGQeumXDP43yyQYQ.png"/></div></div></figure><p id="c4cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们给笔记本命名，运行它的价格由实例类型决定。这里我们使用<em class="mf"> ml.t2.medium </em>，但是建议查看<a class="ae kc" href="https://aws.amazon.com/sagemaker/pricing/" rel="noopener ugc nofollow" target="_blank">定价页面</a>以获得最佳选择。对于这种应用，我们可以保持<a class="ae kc" href="https://docs.aws.amazon.com/sagemaker/latest/dg/ei.html" rel="noopener ugc nofollow" target="_blank">弹性推断</a>为<em class="mf">无</em>。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mh"><img src="../Images/98c39367cdc6f3d11043e1b18e0d9217.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xBXfgyqIwXUH-zb8--eB0w.png"/></div></div></figure><p id="de6f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们要设置<em class="mf">角色</em>，它是一种安全证书，决定权限，比如笔记本可以访问哪些资源。我们点击它并选择<em class="mf">创建一个新角色</em></p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mi"><img src="../Images/a471e3037bfcb9c2f084d865e56c3367.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wRjCr4NvEgLa83cEAU2OpA.png"/></div></div></figure><p id="f3a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于没有我们希望笔记本访问的额外存储桶，我们选择<em class="mf"> None </em>并点击<em class="mf"> create role。</em>这里最重要的条件是第二行。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mj"><img src="../Images/2695ee244ee770b7f10aedbc3bb2b45b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kqWAuNJJc9vOlVJzS05QVw.png"/></div></div></figure><p id="4fe2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们单击页面最底部的“板条箱笔记本实例”。过一会儿，你的笔记本的状态应该会显示<em class="mf">在使用中</em>。一旦发生这种情况，AWS 将向我们收取使用该实例的费用，所以请确保在不使用时将其关闭。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mk"><img src="../Images/3584a40d882b87eca3cddb903b81f8f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pJcvstOhBlMBU4KhxxSJ4A.png"/></div></div></figure><h1 id="82c3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">克隆部署笔记本</h1><p id="bbff" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">从上图中点击<em class="mf">打开 Jupyter </em>进入熟悉的设置。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mq"><img src="../Images/be3f9ad0132ed5b0bb97013f1a8986b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q6PZsIvVMQwCyxRnTn4rXg.png"/></div></div></figure><p id="0f9a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在右上角点击<em class="mf">新建</em>并打开一个<em class="mf">终端</em>并改变目录。然后我们克隆这个包含笔记本<a class="ae kc" href="https://github.com/NadimKawwa/sagemaker_ml/blob/master/SageMaker_IMDB_highlevel.ipynb" rel="noopener ugc nofollow" target="_blank">和</a>的<a class="ae kc" href="https://github.com/NadimKawwa/sagemaker_ml" rel="noopener ugc nofollow" target="_blank"> git 仓库</a>，并在完成后关闭它。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="18ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">回到主页选项卡，我们看到添加了一个 sagemaker 目录。我们导航到笔记本在 sagemaker_ml 文件夹中的位置。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mt"><img src="../Images/757dad5036be8316e71f31a517a3ee78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0eX1u82R_xH9lnQ7_qu4AA.png"/></div></div></figure><h1 id="f8fd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">下载数据</h1><p id="5ca1" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">对于一般的数据科学家，特别是 NLP 实践者来说,<a class="ae kc" href="http://ai.stanford.edu/~amaas/data/sentiment/" rel="noopener ugc nofollow" target="_blank"> IMDB 数据集</a>就像是一个成年礼。我们将通过<a class="ae kc" href="https://xgboost.readthedocs.io" rel="noopener ugc nofollow" target="_blank"> XGBoost </a>使用这些数据来预测用户情绪。</p><p id="fb41" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一步是下载数据。我们可以在笔记本中使用命令行代码:</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="5394" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://www.gnu.org/software/wget/manual/html_node/Download-Options.html#Download-Options" rel="noopener ugc nofollow" target="_blank"> GNU </a>文档为上面的命令提供了充足的资源。</p><h1 id="25f4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">准备数据</h1><p id="1810" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">这里我们不会详细讨论这个问题，只提供一个简要的概述。不过，您可以在<a class="ae kc" href="https://github.com/NadimKawwa/sagemaker_ml/blob/master/SageMaker_IMDB_highlevel.ipynb" rel="noopener ugc nofollow" target="_blank">笔记本</a>中查看整个过程。</p><p id="6905" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是一个 NLP 练习，所以我们需要将原始信息处理成数据和相应的标签。然后，我们剥离所有 html 标签的文本，用<a class="ae kc" href="http://www.nltk.org" rel="noopener ugc nofollow" target="_blank"> NLTK </a>执行词干提取，并提取一个<a class="ae kc" href="https://en.wikipedia.org/wiki/Bag-of-words_model" rel="noopener ugc nofollow" target="_blank">单词包</a>。</p><p id="1ceb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个过程的最后，我们应该准备好我们的测试和训练数据。</p><h1 id="72fd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">用 XGBoost 分类</h1><p id="fa39" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">XGBoost clasifier 要求将数据集更好地写入文件，并使用亚马逊 S3 存储。我们进一步将训练数据集分为两部分:训练和验证。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="499b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将把这些数据集写入一个文件，并将文件上传到 S3。此外，我们将做同样的测试集输入上传到 S3。这样，一旦拟合完成，我们就可以使用 SageMaker 的<a class="ae kc" href="https://docs.aws.amazon.com/sagemaker/latest/dg/how-it-works-batch.html" rel="noopener ugc nofollow" target="_blank">批量转换</a>功能来测试模型。</p><p id="9cf2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">SageMaker 中 XGBoost 算法的<a class="ae kc" href="https://docs.aws.amazon.com/sagemaker/latest/dg/xgboost.html" rel="noopener ugc nofollow" target="_blank">文档要求保存的数据集不应包含标题或索引，对于训练和验证数据，标签应首先出现在每个样本中。</a></p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="289c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此时，节省可用内存是一个好的做法，我们可以将 text_X、train_X、val_X、train_y 和 val_y 设置为<em class="mf"> None </em>:</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="mr ms l"/></div></figure><h1 id="b959" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将培训验证文件上传至 S3</h1><p id="c51a" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">对于这一部分，我们将大量参考<a class="ae kc" href="http://sagemaker.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> SageMaker API 文档</a>和<a class="ae kc" href="https://docs.aws.amazon.com/sagemaker/latest/dg/" rel="noopener ugc nofollow" target="_blank"> SageMaker 开发者指南</a>。</p><p id="f55f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://sagemaker.readthedocs.io/en/latest/session.html?highlight=upload_data#sagemaker.session.Session.upload_data" rel="noopener ugc nofollow" target="_blank"> upload_data </a>方法将本地文件或目录上传到 S3。它是代表我们当前 SageMaker 会话的对象的成员。这个方法将数据上传到 AWS 为我们创建的默认 bucket，如果它还不存在的话，上传到由变量<em class="mf"> key_prefix </em>描述的路径中。如果我们导航到 S3 控制台，我们应该在那里找到我们的文件。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="mr ms l"/></div></figure><h1 id="70e4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建 XGBoost 模型</h1><p id="cd92" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">我们认为 SageMaker 上的模型由三部分组成:</p><ul class=""><li id="839d" class="mu mv iq kf b kg kh kk kl ko mw ks mx kw my la mz na nb nc bi translated">模型工件</li><li id="c044" class="mu mv iq kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated">培训代码(集装箱)</li><li id="7e6d" class="mu mv iq kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated">推理代码(容器)</li></ul><p id="c44f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mf">模型工件</em>是实际的模型本身。在这种情况下，工件是在训练期间创建的树。</p><p id="b76f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mf">训练代码</em>和<em class="mf">推理代码</em>用于操作训练工件。训练代码使用提供的训练数据和创建的模型工件，推理代码使用模型工件对新数据进行预测。</p><p id="eeea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">SageMaker 通过使用<a class="ae kc" href="https://sagemaker-workshop.com/custom/containers.html#the-dockerfile" rel="noopener ugc nofollow" target="_blank"> docker 容器</a>来运行训练和推理代码，这是一种打包代码并确保依赖关系不会成为问题的方法。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="mr ms l"/></div></figure><h1 id="5cef" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">拟合 XGBoost</h1><p id="cbf4" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">通过访问 S3 输入来拟合模型。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="6f22" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用 SageMaker 拟合模型时，过程如下。</p><ul class=""><li id="fb99" class="mu mv iq kf b kg kh kk kl ko mw ks mx kw my la mz na nb nc bi translated">一个计算实例(某处的服务器)使用我们指定的属性启动。</li><li id="00d6" class="mu mv iq kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated">当计算实例准备就绪时，用于适应模型的容器形式的代码被加载和执行。</li><li id="f705" class="mu mv iq kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated">当这个代码被执行时，它被提供对存储在 S3 上的训练(以及可能的验证)数据的访问。</li><li id="3bf2" class="mu mv iq kf b kg nd kk ne ko nf ks ng kw nh la mz na nb nc bi translated">一旦计算实例完成了对模型的拟合，生成的模型工件就被存储在 S3 上，并且计算实例被关闭。</li></ul><h1 id="4e26" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">试验</h1><p id="7695" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">我们使用批量转换以非实时的方式对大型数据集进行推理。这让我们可以看到我们的模型执行得有多好。</p><p id="3d07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样做的好处是，我们不需要立即使用模型的结果，而是可以对大量样本进行推断。这种方法也很有用，因为我们可以对整个测试集进行推理。</p><p id="3cde" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要执行转换作业，我们需要指定要发送的数据类型，以便在后台正确序列化。这里我们为模型提供 csv 数据，因此我们指定<em class="mf">文本/csv </em>。</p><p id="d33e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，如果数据太大，无法一次性处理，那么我们需要指定数据文件应该如何分割。同样，这是一个 csv 文件，因此每一行是一个单独的条目，我们告诉 SageMaker 在每一行拆分输入。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="3f6f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用上面的代码，转换在后台运行。我们调用<em class="mf"> wait </em>方法等待转换工作完成并接收一些反馈。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="4edf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">转换作业被执行，并且每个评论的估计情绪被保存在 S3 上。我们想在本地处理这个文件，并将它复制到数据目录<em class="mf"> data_dir </em>。</p><p id="2a54" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一种方便的方法是在 jupyter 中找到<a class="ae kc" href="https://docs.aws.amazon.com/cli/latest/reference/s3/cp.html#examples" rel="noopener ugc nofollow" target="_blank"> AWS CLI 命令参考</a>。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="5fc2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们可以从模型中读取输出。</p><p id="aa96" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们需要将输出转换成对我们的目的更有用的东西。我们将情绪转换为<em class="mf">正</em>的<code class="fe ni nj nk nl b">1</code>和<em class="mf">负</em>的<code class="fe ni nj nk nl b">0</code>。最后我们可以打印出准确率:<strong class="kf ir"> 86% </strong>，还不错！</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="mr ms l"/></div></figure><h1 id="1fdb" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">清除</h1><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/880f558ba837d899912f25285afada64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*l-a6U7u4ez0SSEPk"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@pawel_czerwinski?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Paweł Czerwiński</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f6a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们对越来越大的数据执行操作时，跟踪我们使用了多少内存变得至关重要。我们可能会在执行操作时耗尽内存和/或产生昂贵的费用。</p><p id="e373" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">SageMaker 上的默认 notebook 实例可能没有太多多余的磁盘空间。当我们重复类似的练习时，我们最终可能会填满分配的磁盘空间，导致难以诊断的错误。</p><p id="6207" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦我们完成了一个 notebok，删除我们在这个过程中创建的文件是一个很好的做法。我们可以从终端或笔记本电脑中心完成这项工作。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="f87d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">完成后，请务必返回 SageMaker <em class="mf">笔记本实例</em>并停止该实例。</p><h1 id="457e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">总结和后续步骤</h1><p id="59e3" class="pw-post-body-paragraph kd ke iq kf b kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">在这篇文章中，我们看到了如何在 AWS SageMaker 上创建一个可以部署的模型。工作流程应该与典型的机器学习练习相同，只是增加了一些额外的步骤。</p><p id="6906" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">主要的收获是关注数据存储的位置和方式，代表我们做出的决策，以及如何防止内存溢出。</p><p id="8927" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">恭喜你！我们现在已经有了一个可以部署的情感分析模型！</p></div></div>    
</body>
</html>