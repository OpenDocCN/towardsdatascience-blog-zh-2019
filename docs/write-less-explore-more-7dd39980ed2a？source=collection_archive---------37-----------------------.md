# 少写，多探索

> 原文：<https://towardsdatascience.com/write-less-explore-more-7dd39980ed2a?source=collection_archive---------37----------------------->

我经常陷入写代码的困境——我关注的是代码，而不是代码产生了什么。这从本质上来说并不是不好的做法，但是在排除的情况下，它没有实现探索性数据分析的目标。EDA 的目标是建立数据的心理模型。如果你把 90%的时间花在代码上，10%的时间花在数据上，那么在实现你想要的结果时，你只有 10%的效率。了解这一点后，您应该最大限度地利用您浏览数据的时间。如果你发现你在 EDA 上花了很多时间，但是感觉你不理解数据，考虑改变你的过程。改变你的过程的一个快速方法是问你自己，“我现在写的东西会提高我对数据的理解吗，或者它会帮助我实现另一个目标吗？”

重新调整你的过程是获得更好结果的捷径，但是改变你的习惯会有更深远的影响。改变两个习惯对我的探索性数据分析产生了巨大的影响:使用简单的图形和自动化我的过程。

# 简单的图形传达理解

![](img/2f8b39b0a65146da9199516de305b4e3.png)

If you squint and focus really hard you can see The Matrix! Oh wait, not, it’s just a regular matrix.

这不是一个简单的图形。它*包含*简单的元素，但作为一个整体，它是一个复杂的信息数组。研究它 15 秒钟。你看到了什么？

如果你在 15 秒后的回答是，“有些特征是相关的，有些是不相关的”，那么你就在一个好公司里。你甚至可以说，“有一些相关性，一些特征是离散的，而一些是连续的。”甚至更好！但总的来说，你并没有真正学到什么，是吗？当您导入数据时，您应该已经知道一些特征是离散的，并且我想您期望一些事情是相关的。所以总的来说，看了这张图之后，你的情况并不比看之前好多少！

这幅图信息密集，但含义却出人意料地浅。图表不能帮助你理解，也不能传达你对数据的理解。请记住，你的目标是开发一个心智模型——你通过将数据处理成一系列关系来实现这一点，而不是通过盲目记忆信息。为了有效地做到这一点，你应该致力于制作在信息密度和含义密度之间取得平衡的图形。这可能说起来容易做起来难。我将向您展示两个例子来启发这个概念，并希望帮助您改进实践。

## 使用离散数据探索要素的散点图

具有离散数据的要素散点图看起来很混乱。在最好的情况下，您会对特征的一些描述性统计数据(平均值、众数、最小值、最大值)有所了解，并对相关性有一个模糊的认识。这是国王郡住房数据中房价与卧室数量的散点图。

![](img/1ca5159ade70fca8d1a62e6540dd20c8.png)

What am I supposed to get out of this?

这只是你在上面的散点图中看到的一个图表的放大版。在这种情况下，我们甚至无法了解价格对卧室的反应，因为存在我们看不到的潜在关系。简而言之，我不能从这个图表中推导出很多意义，因为有太多的信息需要处理，有些信息被隐藏了。

> 旨在制作在信息密度和意义密度之间取得平衡的图形

确定离散预测值和目标值(如果存在)之间关系的一种方法是查看预测值中每个离散值的*可比数据*。为了做到这一点，我们假设数据在每个离散值上表现相同。也就是说，离散值的目标分布(例如，有 3 间卧室的房屋的价格)具有与其他离散值的目标分布(例如，有 1 间、2 间、4 间等卧室的房屋的价格)相同的*一般形状*。这允许我们在给定的离散值下比较目标的平均值、中值或众数，以评估关系。考虑起来有点棘手，但下图应该有助于明确这个想法:

![](img/8063e38336b3abc736bd2fd676c97462.png)

This is a graphic that allows me to extract meaning!

看起来价格和卧室之间的关系是线性的，尽管有很多卧室的房子也有问题。快速浏览一下预测值中的唯一值就会发现，拥有 8 间以上卧室的房子并不多。我们应该只考虑少于 8 间卧室的房子的数据，因为这符合我们关于分布行为的假设。

## 决定何时(以及如何)装箱

决定何时以及如何装箱并不总是那么简单。有时可以在散点图中发现要素中的离散分组，但通常您最终看到的是没有多大意义的散点图。这里有一个不是特别有用的价格和地段差异散点图(地段差异是一所房子和它的 15 个最近邻居之间的地段大小的比例差异)。

![](img/c22cd62af57131e54823d5d7c066c36d.png)

Relationship status: Complicated

价格和批次差异之间看起来肯定没有关系，但也许分位数分类的数据子集是有预测性的。问题是，你如何决定在哪里切断你的垃圾箱？为了回答这个问题，你需要平衡信息密度和图形的含义密度。

宁滨数据的目的是创建具有显著不同均值的组(1 ≠ 2 ≠ 3 … ≠ n)。在这种情况下，最好的图形叠加了分箱数据的分布，以便您可以快速评估宁滨是否合适。

![](img/bbf2251dfa7feaf800cb6245910b3de4.png)

That blue, green, red combination makes a gross color. This is a reminder to yourself not use those colors in the future.

从这个图表中可以清楚地看出，宁滨的这个数据并不能预测价格，即使它被归入极端分位数。我很有信心做出这个声明，因为不同组的分布没有显著差异，这一点我只需看一下图表就能知道。查看最有意义的图形使我能够理解数据中的细微差别，这意味着在这种情况下，我不会在我们的模型中找到一个无意义的预测值。

## 使用简单的图形

前面例子的成功在于它们的简单性。一眼看去，你和其他任何人都能够理解所描述的关系。你应该尽可能简化你的图形，遵循平衡信息密度和意义密度的原则。

# 自动化您的流程

到目前为止，如果你对自相矛盾的信息感到恼火，你可能并不孤单。我开始写这篇文章是让你“少写”和“多探索”，但是到目前为止我告诉你的是你应该多写和多探索。

事实是，没有一些摩擦你就无法探索，在我们的例子中就是写代码。所以，是的，为了探索更多，你必须多写一点代码。然而，关键是增加探索与写作的比例。最好的方法之一是有效地重用代码来自动制作图表。

> 您应该最大限度地利用浏览数据的时间

为此，我使用了 ipywidgets。Ipywidgets 是一个简单的模块，它允许您通过将控件嵌入到输出中来动态地与函数的参数进行交互。用一个例子来解释更容易，所以这里有一段代码和结果输出。

![](img/1c5e89bfe4026ec539e6e73894f5f839.png)

If only this was interactive!

不太明显的是，这段代码允许我查看这个数据集的小提琴图的 60 种不同组合！这是一个令人眼花缭乱的数量，但选择情节的能力提高了我理解我正在看的东西的可能性。原因很简单:我已经准备好更新我的心理模型，我可以有目的地浏览情节。

现在我已经向您展示了 ipywidgets，我可以澄清上一节中的示例了。这些图形都是使用 ipywidgets 自动生成的。他们都是一个更大的调查的一部分:第一个例子检查了离散的预测因子和它们与目标的关系；第二个示例检查邻居的数据。

如果你有兴趣了解关于 ipywidgets 的更多信息，那么我推荐你阅读链接到这里的 Will Koehrsen 的题为“Jupyter 笔记本中的交互控件”的文章。他通过大量的例子一步一步地向您介绍如何使用 ipywidgets。[ipywidgets](https://ipywidgets.readthedocs.io/en/stable/)上的文档也为那些想直接找到源代码的人写得非常好。

有了 ipywidgets，您现在应该可以轻松地通过简单的图形探索更多的数据了。祝你好运，探索愉快！