<html>
<head>
<title>Automating Lights with Computer Vision and NodeJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用计算机视觉和节点实现灯光自动化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/automating-lights-with-computer-vision-nodejs-fb9b614b75b2?source=collection_archive---------27-----------------------#2019-12-06">https://towardsdatascience.com/automating-lights-with-computer-vision-nodejs-fb9b614b75b2?source=collection_archive---------27-----------------------#2019-12-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="563e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">基于智能计算机视觉和 NodeJS 的解决方案，可以在不使用时关闭灯，从而节省电能。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/66fb9edbe1b4d4523ac59aca3dd07745.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*106Y3-16-d4b7zYhNr-P8w.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@henrymcintosh?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Henry McIntosh</a> on <a class="ae kv" href="https://unsplash.com/@henrymcintosh?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="60fd" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak">挑战</strong></h1><p id="1fc7" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">常见的情况是，在家庭和办公室中，被照亮的空间附近很少有人或没有人。</p><p id="8648" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">除了花费更多，这种照明对环境也有负面影响。我们越来越依赖有限的、不可再生的能源来发电，而这些能源经常被浪费掉。</p><p id="0059" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">虽然我们在家里的能源使用是名义上的，但在办公室，我们的能源使用要多得多。因此，对环境和成本的负面影响要大得多。这需要我们采取积极的行动。</p><p id="cebb" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">当张贴“离开前请关灯”的标志影响很小或没有影响时，考虑到灯的数量、覆盖的区域和其他因素，损失的大小更大。让某人每次都简单地关灯来解决过度照明的问题是不可行的。人类的记忆变化无常，不可依赖。</p><p id="62d9" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我们来了解一下单个灯泡的影响。一个 10 瓦的灯泡每小时耗电 0.01 千瓦。我们假设 1 度电的成本是 12 美分。那么每一个不需要时点亮的 10 瓦灯泡，每小时将花费 0.12 美分。</p><p id="1814" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我会让你运用基本的算术技巧，通过将灯的数量乘以上述数字来计算整个办公室的总成本。</p><h1 id="a7ce" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">那么我们如何解决这个问题呢？</h1><p id="0406" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">虽然市场上有许多智能控制和自动化解决方案，但大多数解决方案都需要定期安装额外的硬件，并导致额外的维护成本。</p><p id="df5c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">有没有更好的方法来应对这一挑战？</p><p id="b831" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">所有办公场所都安装了摄像头来监控该区域。我和我的同事们集思广益，想出了用最少的投资解决这个问题的方法。然后灵光一现！💡</p><p id="fa2b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">为什么不使用这些捕捉不同画面的相机来自动关灯呢？</p><h1 id="6ca4" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">我们的回应</h1><p id="fb9c" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">解决方案是通过计算机的眼睛——通过<strong class="lq ir">计算机视觉</strong>来表达我们节约能源的意图。</p><p id="addc" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">那么到底什么是计算机视觉呢？</p><blockquote class="mp"><p id="d98b" class="mq mr iq bd ms mt mu mv mw mx my mj dk translated">“计算机视觉，通常缩写为 CV，被定义为一个研究领域，旨在开发技术来帮助计算机‘看’和理解数字图像(如照片和视频)的内容。”</p><p id="8e0f" class="mq mr iq bd ms mt mu mv mw mx my mj dk translated">—杰森·布朗利，在他关于机器学习的<a class="ae kv" href="https://machinelearningmastery.com/what-is-computer-vision/" rel="noopener ugc nofollow" target="_blank">文章</a>中。</p></blockquote><p id="d83a" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">举例来说，就像一个生态友好的人，寻找无人居住的照明房间或空间，关灯，我们的系统将被编程为自动这样做。该系统将查看来自摄像机的输入流，这实质上是摄像机的视野。每个捕获的帧被分成 4 个象限。并且如果在特定的象限中没有人，则属于该象限的灯将被关闭。</p><p id="df90" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这个解决方案是用<a class="ae kv" href="https://github.com/justadudewhohacks/opencv4nodejs#readme" rel="noopener ugc nofollow" target="_blank"> opencv4Nodejs </a>实现的，它是流行的开源计算机视觉库<a class="ae kv" href="https://opencv.org/" rel="noopener ugc nofollow" target="_blank"> OpenCV </a>的 Node.js 包装器。与<a class="ae kv" href="https://socket.io/" rel="noopener ugc nofollow" target="_blank">一起，socket.io </a>和<a class="ae kv" href="https://expressjs.com/" rel="noopener ugc nofollow" target="_blank"> express </a>用于渲染一个 web 应用程序，以显示实时视频流并模拟灯光的打开和关闭。</p><h1 id="90a5" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">实施步骤</h1><ol class=""><li id="8afc" class="ne nf iq lq b lr ls lu lv lx ng mb nh mf ni mj nj nk nl nm bi translated">导入所需的库。</li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="718b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">2.开始从摄像机捕捉视频。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="9ed5" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">3.读取 feed 并以固定的帧速率将其传输到 web 应用程序。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="642f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">4.以大于实时流的时间间隔读取订阅源，以确定用户是否存在。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="5428" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">5.使用任何 OpenCV 分类器检测人。在这个解决方案中，使用了“哈尔正面人脸分类器”。检测到的相对于帧的面部位置被存储以备后用。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="c9ac" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">6.在框架上标记面部，以便可视化检测。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="aafb" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">7.确定人们相对于画面的位置，以决定他们在哪个象限，以便只照亮那些部分。识别的结果然后被发送到网络应用程序进行照明模拟。灯泡颜色会发生变化，以模拟点亮哪个象限。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/96925b2d8409a3c9bd0e9dbdef79101a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EGHHLGsoSypdj1ZS5RB1kg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Since people are present in Quadrant 2, the system lights up only quadrant 2</figcaption></figure><h1 id="5f9e" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="33de" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">这是众多例子中的一个，展示了技术如何通过节约能源来改善地球。您还可以通过这个简单的实现了解如何解决常见的工作场所挑战。</p><p id="8870" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">请参考上述解决方案的源代码:</p><div class="nq nr gp gr ns nt"><a href="https://github.com/Mudassir-23/opencv-nodejs-energy-saver" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">mudas sir-23/opencv-nodejs-节能器</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">基于 opencv 和 nodejs 的节能解决方案。通过以下方式为 mudas sir-23/opencv-nodejs-energy-saver 开发做出贡献…</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">github.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh kp nt"/></div></div></a></div><p id="0001" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">还可以查看基于 opencv4nodejs、express 和 socket.io 的应用程序的<a class="ae kv" href="https://github.com/Mudassir-23/opencv4nodejs-express-websockets" rel="noopener ugc nofollow" target="_blank">样板</a>代码。</p><p id="1014" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这个解决方案可以扩展到不仅仅是模拟。</p><p id="3bf8" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">您可以使用已建立的套接字连接到 express 应用程序，并从每个象限接收二进制数据。您可以通过继电器决定在哪个象限打开或关闭物理灯！⚡️</p></div></div>    
</body>
</html>