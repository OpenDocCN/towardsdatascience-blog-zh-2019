<html>
<head>
<title>4 NumPy Tricks Every Python Beginner should Learn</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">每个 Python 初学者都应该学习的 4 个 NumPy 技巧</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/4-numpy-tricks-every-python-beginner-should-learn-bdb41febc2f2?source=collection_archive---------4-----------------------#2019-12-29">https://towardsdatascience.com/4-numpy-tricks-every-python-beginner-should-learn-bdb41febc2f2?source=collection_archive---------4-----------------------#2019-12-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="e046" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">Python 初学者</h2><div class=""/><div class=""><h2 id="d07e" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">编写可读代码的技巧</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/4b5280959db0aa44b7fc44784eccde2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xN38Jt1h_ApMetc5"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Photo by <a class="ae lh" href="https://unsplash.com/@bamin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Pierre Bamin</a> on <a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6216" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> NumPy </strong>是<strong class="lk jd"> Python </strong>中最流行的库之一，鉴于它的优点，几乎每个 Python 程序员都用它来进行算术计算。Numpy 数组比 Python 列表更紧凑。这个库也非常方便，许多常见的矩阵运算以非常高效的计算方式实现。</p><p id="236d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在帮助同事和朋友解决数字问题后，我总结了 4 个数字技巧，Python 初学者应该学习。这些技巧会帮助你写出更加整洁和可读的代码。</p><p id="9f99" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在学习 numpy 技巧之前，请确保您熟悉以下文章中的一些 Python 内置特性。</p><div class="me mf gp gr mg mh"><a rel="noopener follow" target="_blank" href="/5-python-features-i-wish-i-had-known-earlier-bc16e4a13bf4"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd jd gy z fp mm fr fs mn fu fw jc bi translated">我希望我能早点知道的 5 个 Python 特性</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">超越 lambda、map 和 filter 的 Python 技巧</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">towardsdatascience.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv lb mh"/></div></div></a></div></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h1 id="02e0" class="nd ne it bd nf ng nh ni nj nk nl nm nn ki no kj np kl nq km nr ko ns kp nt nu bi translated">1.参数函数—位置</h1><p id="f751" class="pw-post-body-paragraph li lj it lk b ll nv kd ln lo nw kg lq lr nx lt lu lv ny lx ly lz nz mb mc md im bi translated">对于数组<code class="fe oa ob oc od b">arr</code>、<code class="fe oa ob oc od b">np.argmax(arr)</code>、<code class="fe oa ob oc od b">np.argmin(arr)</code>和<code class="fe oa ob oc od b">np.argwhere(condition(arr))</code>，分别返回最大值、最小值和满足用户定义条件的值的索引。虽然这些 arg 函数被广泛使用，但我们经常忽略函数<code class="fe oa ob oc od b">np.argsort()</code>,它返回对数组排序的<strong class="lk jd">索引。</strong></p><p id="db7c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们可以使用<code class="fe oa ob oc od b">np.argsort</code>到<strong class="lk jd">根据另一个数组</strong>对数组的值进行排序。下面是一个使用考试成绩对学生姓名进行排序的示例。排序后的名称数组也可以使用<code class="fe oa ob oc od b">np.argsort(np.argsort(score))</code>转换回原来的顺序。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="46cd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">它的性能比使用内置 Python 函数<code class="fe oa ob oc od b">sorted(zip())</code>更快，并且更具可读性。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi og"><img src="../Images/0fca49145e9cb17f68dcc6eb1edcbafd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3bqB37o9PGYpgabJ"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Photo by <a class="ae lh" href="https://unsplash.com/@katanassov?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kamen Atanassov</a> on <a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h1 id="5126" class="nd ne it bd nf ng nh ni nj nk nl nm nn ki no kj np kl nq km nr ko ns kp nt nu bi translated">2.广播-形状</h1><p id="ee59" class="pw-post-body-paragraph li lj it lk b ll nv kd ln lo nw kg lq lr nx lt lu lv ny lx ly lz nz mb mc md im bi translated">广播是一个初学者可能无意中尝试过的事情。许多 numpy 算术运算在逐个元素的基础上应用于具有<strong class="lk jd">相同形状</strong>的数组对。广播对数组操作进行矢量化<strong class="lk jd">，而不会产生不必要的数据副本</strong>。这导致了高效的算法实现和更高的代码可读性。</p><p id="2c27" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">例如，您可以使用<code class="fe oa ob oc od b">arr + 1</code>将数组中的所有值递增 1，而不考虑<code class="fe oa ob oc od b">arr</code>的维度。还可以通过<code class="fe oa ob oc od b">arr &gt; 2</code>检查数组中的所有值是否都大于 2。</p><p id="8ac4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">但是我们怎么知道两个数组是否兼容广播呢？</p><pre class="ks kt ku kv gt oh od oi oj aw ok bi"><span id="9337" class="ol ne it od b gy om on l oo op">Argument 1  (4D array): 7 × 5 × 3 × 1<br/>Argument 2  (3D array):     1 × 3 × 9<br/>Output      (4D array): 7 × 5 × 3 × 9</span></pre><p id="7eef" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">两个数组的每个维度必须是<strong class="lk jd">等于</strong>，或者<strong class="lk jd">其中一个是 1 </strong>。它们不需要有相同的维数。上面的例子说明了这些规则。</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h1 id="ff5d" class="nd ne it bd nf ng nh ni nj nk nl nm nn ki no kj np kl nq km nr ko ns kp nt nu bi translated">3.省略和新轴——维度</h1><p id="4879" class="pw-post-body-paragraph li lj it lk b ll nv kd ln lo nw kg lq lr nx lt lu lv ny lx ly lz nz mb mc md im bi translated">分割 numpy 数组的语法是<code class="fe oa ob oc od b">i:j</code>，其中<em class="oq"> i，j </em>分别是起始索引和停止索引。比如上一篇文章中提到的——5 个我希望早点知道的 Python 特性，对于一个 numpy 数组<code class="fe oa ob oc od b">arr = np.array(range(10))</code>，调用<code class="fe oa ob oc od b">arr[:3]</code>给出<code class="fe oa ob oc od b">[0, 1, 2]</code>。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi or"><img src="../Images/a1e3b56880f14361272cfa171806a1e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*J1bPVcwDwodQPphw"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Photo by <a class="ae lh" href="https://unsplash.com/@daryan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Daryan Shamkhali</a> on <a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e398" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当处理高维数组时，我们使用<code class="fe oa ob oc od b">:</code>来选择每个轴上的所有索引。我们也可以使用<code class="fe oa ob oc od b">…</code>选择多个轴上的所有指标<strong class="lk jd">。展开的轴的确切数量是从<strong class="lk jd">推断出来的</strong>。</strong></p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="b91b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">另一方面，如上图所示使用<code class="fe oa ob oc od b">np.newaxis</code><strong class="lk jd">在用户定义的轴位置插入一个新轴</strong>。此操作将数组的形状扩展一个单位的维度。虽然这也可以通过<code class="fe oa ob oc od b">np.expand_dims()</code>来完成，但是使用<code class="fe oa ob oc od b">np.newaxis</code>可读性更好，也更优雅。</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h1 id="b354" class="nd ne it bd nf ng nh ni nj nk nl nm nn ki no kj np kl nq km nr ko ns kp nt nu bi translated">4.屏蔽阵列—选择</h1><p id="b197" class="pw-post-body-paragraph li lj it lk b ll nv kd ln lo nw kg lq lr nx lt lu lv ny lx ly lz nz mb mc md im bi translated">数据集是不完美的。它们总是包含缺少或无效条目的数组，我们经常想忽略那些条目。例如，由于传感器故障，气象站的测量值可能包含缺失值。</p><p id="ba4b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">Numpy 有一个子模块<code class="fe oa ob oc od b">numpy.ma</code>，支持带有掩码的数据数组<strong class="lk jd">。被屏蔽的数组包含一个普通的 numpy 数组和一个掩码<strong class="lk jd">指示无效条目的位置</strong>。</strong></p><pre class="ks kt ku kv gt oh od oi oj aw ok bi"><span id="1d29" class="ol ne it od b gy om on l oo op">np.ma.MaskedArray(data=arr, mask=invalid_mask)</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi os"><img src="../Images/5d6f0519bdc91c0f12e4fda30359edef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*agfDX5ZjKFE4Xw1_"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk">Photo by <a class="ae lh" href="https://unsplash.com/@nachoscense?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Nacho Bilbao</a> on <a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0bef" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">数组中的无效条目有时用负值或字符串标记。如果我们知道屏蔽值，比如说<code class="fe oa ob oc od b">-999</code>，我们也可以使用<code class="fe oa ob oc od b">np.ma.masked_values(arr, value=-999)</code>创建一个屏蔽数组。任何以掩码数组作为参数的 numpy 操作都会自动忽略那些无效的条目，如下所示。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="oe of l"/></div></figure></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h2 id="e2bb" class="ol ne it bd nf ot ou dn nj ov ow dp nn lr ox oy np lv oz pa nr lz pb pc nt iz bi translated">相关文章</h2><p id="1623" class="pw-post-body-paragraph li lj it lk b ll nv kd ln lo nw kg lq lr nx lt lu lv ny lx ly lz nz mb mc md im bi translated">感谢您的阅读。你可以<a class="ae lh" href="http://edenau.mailchimpsites.com/" rel="noopener ugc nofollow" target="_blank">注册我的时事通讯</a>来接收我的新文章的更新。如果您对 Python 感兴趣，以下文章可能会有用:</p><div class="me mf gp gr mg mh"><a rel="noopener follow" target="_blank" href="/5-python-features-i-wish-i-had-known-earlier-bc16e4a13bf4"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd jd gy z fp mm fr fs mn fu fw jc bi translated">我希望我能早点知道的 5 个 Python 特性</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">超越 lambda、map 和 filter 的 Python 技巧</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">towardsdatascience.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv lb mh"/></div></div></a></div><div class="me mf gp gr mg mh"><a rel="noopener follow" target="_blank" href="/6-new-features-in-python-3-8-for-python-newbies-dc2e7b804acc"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd jd gy z fp mm fr fs mn fu fw jc bi translated">Python 3.8 中针对 Python 新手的 6 项新特性</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">请做好准备，因为 Python 2 不再受支持</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">towardsdatascience.com</p></div></div><div class="mq l"><div class="pd l ms mt mu mq mv lb mh"/></div></div></a></div><p id="be99" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="oq">最初发表于</em><a class="ae lh" href="https://edenau.github.io/" rel="noopener ugc nofollow" target="_blank"><em class="oq">edenau . github . io</em></a><em class="oq">。</em></p></div></div>    
</body>
</html>