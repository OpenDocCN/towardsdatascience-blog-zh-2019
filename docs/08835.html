<html>
<head>
<title>Patient Sentiment for Pharmaceutical Drugs from Twitter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">来自 Twitter 的患者对药品的看法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/extracting-patient-sentiment-for-pharmaceutical-drugs-from-twitter-2315870a0e3c?source=collection_archive---------38-----------------------#2019-11-25">https://towardsdatascience.com/extracting-patient-sentiment-for-pharmaceutical-drugs-from-twitter-2315870a0e3c?source=collection_archive---------38-----------------------#2019-11-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/1db90a96b101bc72fc381068e89d42f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xkGmhMxNn5aZ_qcy9j-qsg.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Photo by <a class="ae kf" href="https://www.pexels.com/@pixabay" rel="noopener ugc nofollow" target="_blank">Pixabay</a> on <a class="ae kf" href="https://www.pexels.com/photo/bunch-of-white-oval-medication-tablets-and-white-medication-capsules-159211/" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><p id="b868" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">制药公司面临的一个常见问题是根据患者的旅程预测患者是否会更换药物。指示寻求转换处方药的患者的信息可以出现在社交媒体帖子中。分析患者在关于处方药的推文中表达的情绪，可能是朝着解决这个问题的正确方向迈出的一步。</p><p id="153c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本帖中，我们将提取美国一些最常见处方药的患者情绪。我们将关注在美国开出的前 10 种药物中的 5 种:</p><ol class=""><li id="aa03" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated"><strong class="ki iu">维柯丁</strong>:一种用于治疗中度至重度疼痛的药物</li><li id="2b33" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><strong class="ki iu">辛伐他汀</strong>:一种 HMG-CoA 还原酶抑制剂(他汀类)，用于降低中风和心脏病发作的风险</li><li id="7f3e" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><strong class="ki iu">赖诺普利</strong>:一种血管紧张素转换酶(ACE)抑制剂，用于降低高血压和预防糖尿病引起的肾衰竭</li><li id="3ca0" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><strong class="ki iu">立普妥</strong>:一种用于预防冠心病患者中风和心脏病发作的他汀类药物</li><li id="2f08" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated"><strong class="ki iu">二甲双胍</strong>:治疗二型糖尿病的药物</li></ol><p id="4ebd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，你需要申请一个 Twitter 开发者账户:</p><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/8de478e493cd200d2ddb35292f06e27d.png" data-original-src="https://miro.medium.com/v2/resize:fit:808/format:webp/1*0xmSHPJRMafMjW4Zr4atYQ.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk"><a class="ae kf" href="https://projects.raspberrypi.org/en/projects/getting-started-with-the-twitter-api/3" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure><p id="a903" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您的开发人员帐户获得批准后，您需要创建一个 Twitter 应用程序:</p><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lx"><img src="../Images/535749c04db1726dafff300aac41628c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5EGnUjPFY2dF-jUkTdd6QA.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk"><a class="ae kf" href="https://projects.raspberrypi.org/en/projects/getting-started-with-the-twitter-api/4" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure><p id="f9b6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">申请 Twitter 开发者账户和创建 Twitter 应用程序的步骤在这里<a class="ae kf" href="https://projects.raspberrypi.org/en/projects/getting-started-with-the-twitter-api/4" rel="noopener ugc nofollow" target="_blank">列出</a>。</p><p id="2741" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了访问 Twitter API，我们将使用免费的 python 库 tweepy。tweepy 的文档可以在<a class="ae kf" href="https://tweepy.readthedocs.io/en/latest/getting_started.html" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><ol class=""><li id="44fd" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated"><strong class="ki iu">安装</strong></li></ol><p id="4861" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，确保您已经安装了 tweepy。打开命令行并键入:</p><pre class="lt lu lv lw gt ly lz ma mb aw mc bi"><span id="a36d" class="md me it lz b gy mf mg l mh mi">pip install tweepy</span></pre><p id="8039" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2.<strong class="ki iu">导入库</strong></p><p id="23e6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，打开您最喜欢的编辑器，导入 tweepy 和 pandas 库:</p><pre class="lt lu lv lw gt ly lz ma mb aw mc bi"><span id="725b" class="md me it lz b gy mf mg l mh mi">import tweepy<br/>import pandas as pd</span></pre><p id="9918" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">3.<strong class="ki iu">认证</strong></p><p id="b15e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们需要我们的消费者密钥和访问令牌:</p><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mj"><img src="../Images/6e8d1ea132e104bb6c262ddad9d50495.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7TxOpsOni5I1HAdafJ9BWw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk"><a class="ae kf" href="https://projects.raspberrypi.org/en/projects/getting-started-with-the-twitter-api/4" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure><p id="d398" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意，该网站建议您保持您的密钥和令牌私有！这里我们定义了一个假的密钥和令牌，但是在创建 Twitter 应用程序时，您应该使用真正的密钥和令牌，如上所示:</p><pre class="lt lu lv lw gt ly lz ma mb aw mc bi"><span id="7ab4" class="md me it lz b gy mf mg l mh mi">consumer_key = '5GBi0dCerYpy2jJtkkU3UwqYtgJpRd' <br/>consumer_secret = 'Q88B4BDDAX0dCerYy2jJtkkU3UpwqY'<br/>access_token = 'X0dCerYpwi0dCerYpwy2jJtkkU3U'<br/>access_token_secret = 'kly2pwi0dCerYpjJtdCerYkkU3Um'</span></pre><p id="39f9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下一步是创建 OAuthHandler 实例。我们传递上面定义的消费者密钥和访问令牌:</p><pre class="lt lu lv lw gt ly lz ma mb aw mc bi"><span id="607d" class="md me it lz b gy mf mg l mh mi">auth = tweepy.OAuthHandler(consumer_key, consumer_secret)<br/>auth.set_access_token(access_token, access_token_secret)</span></pre><p id="6ffd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们将 OAuthHandler 实例传递给 API 方法:</p><pre class="lt lu lv lw gt ly lz ma mb aw mc bi"><span id="7715" class="md me it lz b gy mf mg l mh mi">api = tweepy.API(auth)</span></pre><p id="58f6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">4.<strong class="ki iu"> TWITTER API 请求</strong></p><p id="2cca" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们为我们有兴趣分析的字段初始化列表。现在，我们可以查看推文字符串、用户和推文时间。接下来，我们在一个 tweepy“Cursor”对象上编写一个 for 循环。在“Cursor”对象中，我们传递“api.search”方法，为我们想要搜索的内容设置查询字符串，并设置“count”= 1000，这样我们就不会超过 twitter 的速率限制。在这里，我们将搜索关于维柯丁的推文，维柯丁是一种用于治疗中度至重度疼痛的止痛药。我们还使用“item()”方法将“Cursor”对象转换为 iterable。</p><p id="c42f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了简化查询，我们可以删除转发，只包含英文推文。为了了解该请求返回的内容，我们还可以打印附加到每个列表的值:</p><pre class="lt lu lv lw gt ly lz ma mb aw mc bi"><span id="7e95" class="md me it lz b gy mf mg l mh mi">twitter_users = []<br/>tweet_time = []<br/>tweet_string = []<br/>for tweet in tweepy.Cursor(api.search,q='Vicodin', count=1000).items(1000):<br/>            if (not tweet.retweeted) and ('RT @' not in tweet.text):<br/>                if tweet.lang == "en":<br/>                    twitter_users.append(tweet.user.name)<br/>                    tweet_time.append(tweet.created_at)<br/>                    tweet_string.append(tweet.text)<br/>                    print([tweet.user.name,tweet.created_at,tweet.text])</span></pre><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mk"><img src="../Images/e3af3fae1481e9cceabed5bfa5390dae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KoegtRj-KKZC1qc4OojgxQ.png"/></div></div></figure><p id="ae7a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以看看辛伐他汀的微博:</p><pre class="lt lu lv lw gt ly lz ma mb aw mc bi"><span id="933d" class="md me it lz b gy mf mg l mh mi">twitter_users = []<br/>tweet_time = []<br/>tweet_string = []<br/>for tweet in tweepy.Cursor(api.search,q='Simvastatin', count=1000).items(1000):<br/>            if (not tweet.retweeted) and ('RT @' not in tweet.text):<br/>                if tweet.lang == "en":<br/>                    twitter_users.append(tweet.user.name)<br/>                    tweet_time.append(tweet.created_at)<br/>                    tweet_string.append(tweet.text)<br/>                    print([tweet.user.name,tweet.created_at,tweet.text])</span></pre><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ml"><img src="../Images/231317ac034c5e8762350c2b0f63b9f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OI_3xRjz_cTDIQ0IxMsz-g.png"/></div></div></figure><p id="a0f4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了实现可重用性，我们可以将它封装在一个函数中，该函数将药物关键字作为输入。我们还可以将结果存储在数据帧中并返回值:</p><pre class="lt lu lv lw gt ly lz ma mb aw mc bi"><span id="9658" class="md me it lz b gy mf mg l mh mi">def get_related_tweets(key_word):</span><span id="04af" class="md me it lz b gy mm mg l mh mi">twitter_users = []<br/>    tweet_time = []<br/>    tweet_string = [] <br/>    for tweet in tweepy.Cursor(api.search,q=key_word, count=1000).items(1000):<br/>            if (not tweet.retweeted) and ('RT @' not in tweet.text):<br/>                if tweet.lang == "en":<br/>                    twitter_users.append(tweet.user.name)<br/>                    tweet_time.append(tweet.created_at)<br/>                    tweet_string.append(tweet.text)<br/>                    print([tweet.user.name,tweet.created_at,tweet.text])<br/>    df = pd.DataFrame({'name':twitter_users, 'time': tweet_time, 'tweet': tweet_string})<br/>    <br/>    return df</span></pre><p id="f3a2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们可以用药物名称‘赖诺普利’调用函数时，我们得到:</p><pre class="lt lu lv lw gt ly lz ma mb aw mc bi"><span id="cdbe" class="md me it lz b gy mf mg l mh mi">get_related_tweets('Lisinopril')</span></pre><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mn"><img src="../Images/5ff091b12de63c43b3f64f33d66e56c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZW3Csvbx8hJnYG7ok08PGA.png"/></div></div></figure><p id="d0dc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于“立普妥”:</p><pre class="lt lu lv lw gt ly lz ma mb aw mc bi"><span id="097c" class="md me it lz b gy mf mg l mh mi">get_related_tweets('Lipitor')</span></pre><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mo"><img src="../Images/04c0b6ecc940c37a6e61645c4f449bf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pwfj6Khpz9uyV3cfNHvIhw.png"/></div></div></figure><p id="ebae" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后是“二甲双胍”:</p><pre class="lt lu lv lw gt ly lz ma mb aw mc bi"><span id="61e3" class="md me it lz b gy mf mg l mh mi">get_related_tweets('Metformin')</span></pre><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/b9398c1bf8c3cf1733218d4b7d3df551.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RSgb8sINZiBzS7dOjP_dFg.png"/></div></div></figure><p id="65e9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了获得情感分数，我们需要导入一个名为 textblob 的 python 包。textblob 的文档可以在这里找到<a class="ae kf" href="https://textblob.readthedocs.io/en/dev/" rel="noopener ugc nofollow" target="_blank">。要安装 textblob，请打开命令行并键入:</a></p><pre class="lt lu lv lw gt ly lz ma mb aw mc bi"><span id="28f6" class="md me it lz b gy mf mg l mh mi">pip install textblob</span></pre><p id="9259" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下次导入 textblob:</p><pre class="lt lu lv lw gt ly lz ma mb aw mc bi"><span id="e7e0" class="md me it lz b gy mf mg l mh mi">from textblob import TextBlob</span></pre><p id="4a82" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将使用极性得分作为积极或消极感觉的衡量标准。极性得分是一个从-1 到+1 的浮点数。</p><p id="9bf6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们定义一个 textblob 对象并传入句子“我喜欢 Aetna 的健康保险计划”,我们应该得到一个正值的极性得分:</p><pre class="lt lu lv lw gt ly lz ma mb aw mc bi"><span id="9545" class="md me it lz b gy mf mg l mh mi">sentiment_score = TextBlob(“I love my health insurance plan with Aetna”).sentiment.polarity<br/>print("Sentiment Polarity Score:", sentiment_score)</span></pre><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/253128ecb458653109d39f488a603869.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*24k0IGZu_2mj4ZWFtKyiBg.png"/></div></figure><p id="2682" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们给关于“维柯丁”的推文打分:</p><pre class="lt lu lv lw gt ly lz ma mb aw mc bi"><span id="3502" class="md me it lz b gy mf mg l mh mi">df = get_related_tweets("Vicodin")<br/>df['sentiment'] = df['tweet'].apply(lambda tweet: TextBlob(tweet).sentiment.polarity)<br/>print(df.head()</span></pre><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mr"><img src="../Images/069b5dc3571a71640bc63f6021136979.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R8PIe5TmYE_QNGNajdicDQ.png"/></div></div></figure><p id="2bb0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以计算积极和消极情绪的数量:</p><pre class="lt lu lv lw gt ly lz ma mb aw mc bi"><span id="5518" class="md me it lz b gy mf mg l mh mi">df_pos = df[df['sentiment'] &gt; 0.0]<br/>df_neg = df[df['sentiment'] &lt; 0.0]<br/>print("Number of Positive Tweets", len(df_pos))<br/>print("Number of Positive Tweets", len(df_neg))</span></pre><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/ab148c213edef9919c2b87a6f1dcbee7.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*pEdyNy9IL0vNhYEuGvMosg.png"/></div></figure><p id="bfff" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，对于代码重用，我们可以将其全部封装在一个函数中:</p><pre class="lt lu lv lw gt ly lz ma mb aw mc bi"><span id="ae18" class="md me it lz b gy mf mg l mh mi">def get_sentiment(key_word):<br/>    df = get_related_tweets(key_word)<br/>    df['sentiment'] = df['tweet'].apply(lambda tweet: TextBlob(tweet).sentiment.polarity)<br/>    df_pos = df[df['sentiment'] &gt; 0.0]<br/>    df_neg = df[df['sentiment'] &lt; 0.0]<br/>    print("Number of Positive Tweets about {}".format(key_word), len(df_pos))<br/>    print("Number of Negative Tweets about {}".format(key_word), len(df_neg))</span></pre><p id="fde8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们用“立普妥”调用这个函数，我们得到:</p><pre class="lt lu lv lw gt ly lz ma mb aw mc bi"><span id="cbb2" class="md me it lz b gy mf mg l mh mi">get_sentiment(“Lipitor”)</span></pre><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/1a59a593b68c27e45f787762228140ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*p9hFwOhzg28bbCFWNoxUlg.png"/></div></figure><p id="1ad1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们能以编程方式可视化这些结果，那将会很方便。让我们导入 seaborn 和 matplotlib 并修改我们的 get _ 情操函数:</p><pre class="lt lu lv lw gt ly lz ma mb aw mc bi"><span id="2109" class="md me it lz b gy mf mg l mh mi">import seaborn as sns<br/>import matplotlib.pyplot as plt</span><span id="76a4" class="md me it lz b gy mm mg l mh mi">def get_sentiment(key_word):<br/>    df = get_related_tweets(key_word)<br/>    df['sentiment'] = df['tweet'].apply(lambda tweet: TextBlob(tweet).sentiment.polarity)<br/>    df_pos = df[df['sentiment'] &gt; 0.0]<br/>    df_neg = df[df['sentiment'] &lt; 0.0]<br/>    print("Number of Positive Tweets about {}".format(key_word), len(df_pos))<br/>    print("Number of Negative Tweets about {}".format(key_word), len(df_neg))<br/>    sns.set()<br/>    labels = ['Postive', 'Negative']<br/>    heights = [len(df_pos), len(df_neg)]<br/>    plt.bar(labels, heights, color = 'navy')<br/>    plt.title(key_word)</span><span id="cbd7" class="md me it lz b gy mm mg l mh mi">get_sentiment(“Lipitor”)</span></pre><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mu"><img src="../Images/019db9ca03b6161afe10393e678cd4dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4L-ZTK9EcvNY2dysd2DQhQ.png"/></div></div></figure><p id="1338" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">其他四种药物的结果是:</p><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mv"><img src="../Images/9f0242a912f36952a6f6f15263943332.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VyQ9m9EQiH7o_5aV98t_VA.png"/></div></div></figure><p id="4899" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如您所见，维柯丁、辛伐他汀、二甲双胍和立普妥的积极情绪多于消极情绪，赖诺普利的消极情绪略多于积极情绪。我鼓励读者对其他药物进行同样的分析，看看推特上对该药物的普遍看法。收集几年的数据来观察某些药物的情绪得分是否存在任何时间依赖性(季节性)将是有趣的。也许我会把它留到以后的文章里。</p><p id="5fa3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢您的阅读。这篇文章的代码可以在<a class="ae kf" href="https://github.com/spierre91/medium_code" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。祝好运，机器学习快乐！</p><p id="4718" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu"> <em class="mw">注来自《走向数据科学》的编辑:</em> </strong> <em class="mw">虽然我们允许独立作者根据我们的</em> <a class="ae kf" rel="noopener" target="_blank" href="/questions-96667b06af5"> <em class="mw">规则和指导方针</em> </a> <em class="mw">发表文章，但我们不认可每个作者的贡献。你不应该在没有寻求专业建议的情况下依赖一个作者的作品。详见我们的</em> <a class="ae kf" rel="noopener" target="_blank" href="/readers-terms-b5d780a700a4"> <em class="mw">读者术语</em> </a> <em class="mw">。</em></p></div></div>    
</body>
</html>