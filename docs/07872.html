<html>
<head>
<title>Come On, Lint A Little: Cleaning Up Your Code With Linters</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">来吧，棉绒一点:用棉绒清理你的代码</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/come-on-lint-a-little-cleaning-up-your-code-with-linters-5d16b1bf19bd?source=collection_archive---------32-----------------------#2019-10-30">https://towardsdatascience.com/come-on-lint-a-little-cleaning-up-your-code-with-linters-5d16b1bf19bd?source=collection_archive---------32-----------------------#2019-10-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="20bf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你知道他们怎么说的，“内在才是最重要的。”虽然这可能是真的，但你仍然必须找到一种方式来表达里面的内容，以便人们能够理解它。您可能拥有您所编写过的功能最强的代码。这可能是优雅的，彻底的，万无一失的。但看起来还是这样:</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="80dd" class="kx ky it kt b gy kz la l lb lc">def buy_me_dinner():<br/>    "lala"<br/>    print("yummy dinner")<br/>def attack(): <br/>    "oh"<br/>    print("I love you" to)</span><span id="6280" class="kx ky it kt b gy ld la l lb lc">from fileinput import input<br/>  <br/>     suspects = input()[9:].split(',')<br/> weapons = input()[8:].split(',')<br/>        rooms = input()[6:].split(',')</span><span id="9bc8" class="kx ky it kt b gy ld la l lb lc">clues = input()   <br/> for line in input():  <br/>     clue = line.split(' ')<br/>      if clue[1] != 'the':  <br/>          suspects.remove(" ".join(clue[1:]))  <br/>        <br/>        <br/>    else:  <br/>        thing = " ".join(clue[2:])   <br/>           if thing in weapons:<br/>               weapons.remove(thing)  <br/>            <br/>            <br/>        else:  <br/>            rooms.remove(thing)  <br/>     print(suspects[0])  <br/>       print("in the " + rooms[0])  <br/>     print("with the " + weapons[0])</span></pre><p id="298d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这就是棉绒派上用场的地方。linter 是一种分析代码以标记风格或编程错误的工具。我今天使用的 linter 是<a class="ae le" href="https://pypi.org/project/pycodestyle/" rel="noopener ugc nofollow" target="_blank"> pycodestyle </a>，它基于 Python 的 Pep-8 风格指南。Linter 会给你一个发现错误的列表，这样你就可以一个一个的修复它们，并且希望在将来学习如何编写更好的代码来遵循你选择的风格指南。还有其他像<a class="ae le" href="https://github.com/psf/black" rel="noopener ugc nofollow" target="_blank">布莱克</a>这样的 linters，它会自动重新格式化你的代码，但是你不会通过这种方式学到任何东西，所以当开始使用 linters 时，最好使用一些冗长的东西。</p><p id="6a5f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们看看当我们用 pycodestyle lint 上面的代码时会发生什么。安装完成后，只需在终端上输入</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="b138" class="kx ky it kt b gy kz la l lb lc">pycodestyle &lt;name of file to lint&gt;</span></pre><p id="ca2f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你会得到这样的回报:</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="a07c" class="kx ky it kt b gy kz la l lb lc">messy.py:4:1: E302 expected 2 blank lines, found 0<br/>messy.py:4:14: W291 trailing whitespace<br/>messy.py:13:1: E303 too many blank lines (6)<br/>messy.py:13:1: E402 module level import not at top of file<br/>messy.py:14:1: W293 blank line contains whitespace<br/>messy.py:15:6: E111 indentation is not a multiple of four<br/>messy.py:15:6: E113 unexpected indentation<br/>messy.py:16:2: E901 IndentationError: unindent does not match any outer indentation level</span></pre><p id="410f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所以第 4 行的第一个字符在空行的数量上有问题，然后第 14 个字符后面有尾随空格，依此类推。在我们采纳了它的建议后，代码看起来是什么样的？有趣的是，有时修复一个错误会暴露另一个错误。但最终我们会得到这样的结果:</p><figure class="ko kp kq kr gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/a5385a716f9d88edf84cd968a33d4af8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s8cLkflIYXW6iCWjWkkpEg.png"/></div></div></figure><p id="61a7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">只要看看它，你就能知道 Pep-8 是如何格式化代码的。在导入库之后应该有 2 个空格，在声明一个函数之后应该有 2 个空格，并且在文件的末尾应该有一个新行。这些棉绒并不完美，有时你会发现他们没有发现的风格错误。此外，pycodestyle 不会发现功能错误。但是我可以用<a class="ae le" href="https://mypy.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> mypy </a>检查这段代码中的某些类型的错误。mypy 的用法也一样。</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="49f3" class="kx ky it kt b gy kz la l lb lc">mypy &lt;name of file to check&gt;</span></pre><p id="3a14" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它会检查错误。对于上面的代码，它返回</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="a7ec" class="kx ky it kt b gy kz la l lb lc">messy.py:12: error: invalid syntax</span></pre><p id="6ea6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它告诉我 print 语句中第 11 行的语法错误。使用像这样的简单工具可以使您的代码看起来有很大的不同，并减少调试时的挫败感。我听说过一些经理甚至不看没有经过测试的代码，所以养成这个习惯是个好习惯，除此之外，这也是了解你的代码应该是什么样子，以及你最常犯错误的地方的好方法。</p><p id="4a6d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">快乐的编码冒险！</p></div></div>    
</body>
</html>