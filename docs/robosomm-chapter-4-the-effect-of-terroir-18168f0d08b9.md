# 风土的影响

> 原文：<https://towardsdatascience.com/robosomm-chapter-4-the-effect-of-terroir-18168f0d08b9?source=collection_archive---------18----------------------->

## [机器人主持人](https://towardsdatascience.com/tagged/robosomm)

## 风土成分的量化及其对葡萄酒风味特征的影响

葡萄酒研究的一个核心概念是风土:影响葡萄酒味道的环境因素。葡萄酒界有很多关于风土的神话。[已经有书籍](https://www.amazon.com/Terroir-Other-Myths-Winegrowing-Matthews/dp/0520276957)讨论风土是否是一个有效的概念，而[的科学家](https://www.decanter.com/magazine/wine-terroir-soil-taste-405096/)试图解开风土的哪些成分影响风味、香味和口感。

在这篇文章中，我们将使用数据科学技术来了解土壤的哪些成分(如果有的话)对葡萄酒的感官特征有影响。点击这里查看 GitHub 库及所有相关代码[。](https://github.com/RoaldSchuring/studying_terroir/blob/master/Investigating%20Terroir.ipynb)

![](img/3a4c80ca9e5eff91742cb5a58119dc74.png)

*Photo (Grape 1368):* [*Reign of Terroir*](https://grape1368.wordpress.com/2013/04/29/reign-of-terroir/)

**量化风味特征**

在 RoboSomm 系列的前一章[中，我们使用专业葡萄酒评论中包含的信息来生成“葡萄酒嵌入”:超过 150，000 种独特葡萄酒的风味特征的矢量表示。我们现在将探索这些风味特征在多大程度上可以用风土属性来解释。](/robosomm-chapter-3-wine-embeddings-and-a-wine-recommender-9fc678f1041e?source=friends_link&sk=2823c32030f1f56594b8128167973130)

**风土属性**

我们的 150，000+葡萄酒数据集包含位置和年份信息。我们可以利用这些信息引入各种不同的与土壤相关的属性的外部数据:

![](img/cfda737303739e0b6c182b6547e034ce.png)

Data on soil type was retrieved from the [SoilGrids API](https://rest.soilgrids.org/), while precipitation and temperature data was pulled from [Google BigQuery](https://console.cloud.google.com/bigquery?p=bigquery-public-data&d=samples&t=gsod&page=table&_ga=2.35989664.-1222802223.1565057200&_gac=1.250923698.1565141557.EAIaIQobChMI77_Q0s7v4wIVjYCfCh2iiAvIEAAYASAAEgKFfvD_BwE). Altitude information was pulled from the [Google Elevation API](https://developers.google.com/maps/documentation/elevation/start).

并非我们数据集中所有的葡萄酒评论都有可用的风土数据。对于天气来说尤其如此。此外，对于我们数据集中的一些葡萄酒，最近的气象站在数百公里之外。由于这不太可能产生可靠的天气数据，任何距离超过 150 公里的此类实例都被删除。

在删除所有缺失土壤、天气或海拔值的观测值后，我们剩下大约 33，000 个可用的观测值。

为了完整起见，我们为每种葡萄酒增加了两个可能影响风味的已知属性:葡萄品种和年份。这使我们能够控制似乎与这些属性相关的风味变化，并更密切地研究风土的真实影响。

**建模对风味特征的影响**

现在我们准备建立一个模型！眼前的问题是一个多元回归问题:我们希望使用我们的风土、品种和年份数据来预测一个 300 维的葡萄酒嵌入向量。这些葡萄酒嵌入的高维度是一个挑战。我们可以使用主成分分析(PCA)将我们的 300 维输出向量压缩到更低维的空间中。似乎我们葡萄酒嵌入的 70%的变化可以用 41 个维度来解释。因此，这些 41 维的压缩葡萄酒嵌入将是我们多元回归问题中的因变量。这仍然是一个很高的维数，但比我们开始时的 300 维有所提高。

我们将基于数据集中 80%的观察值构建模型，保留 20%作为测试集。SciKit-Learn 中的随机森林回归器本身支持多输出回归，是我们的首选模型。

即使在超参数调整之后，我们的模型在我们的测试集上也只达到了 36 **%** 的 R 平方值。换句话说:在我们的模型中，风土、葡萄品种和年份可以解释葡萄酒风味差异的三分之一以上。这是否意味着葡萄酒口味的其他三分之二的变化是由其他变量如酿酒风格来解释的？

嗯，可能不会。由于收集当地天气、土壤和海拔数据的不完善，36%很可能是人为的低。这个百分比还基于这样一个假设，即我们能够在我们的葡萄酒嵌入中完全解释葡萄酒的风味特征；这又依赖于专业侍酒师的评估。

尽管有这些警告，似乎风土能够解释一些风味的变化。但是风土的哪些成分最有冲击力？

**哪些风土属性最重要？**

我们可以使用两种技术来评估特征的重要性:对预测葡萄酒嵌入有最大影响的土壤属性。

![](img/9a043e8bda2c480a927e866434cd0ee3.png)

Feature importance, mean impurity method

首先，我们可以使用平均减少杂质方法来计算[特征重要性](https://alexisperrier.com/datascience/2015/08/27/feature-importance-random-forests-gini-accuracy.html)。

从相邻的图表中，我们可以看到年龄似乎有着最大的影响。其次是一些精选的葡萄品种，海拔也有很大贡献。首先出现的土壤属性是 CEC sol _ 0(0cm 深度的阳离子交换容量)和 SLT PPT _ 30(30cm 深度的土壤质地部分粉砂)。看起来最重要的天气属性是秋季第三个月的降水(收获？)和第二个夏季月份的平均最高温度。

![](img/3a096a9cd401d474fd420b940e5a5257.png)

Feature importance, Shapley value method

作为现实检查，我们将使用第二种技术来评估特性的重要性:Shapley 值。Shapley 值是博弈论中的一个概念，它计算每个特征对整体预测的边际贡献。我们可以对训练数据集中的所有观察结果进行汇总，以评估哪些功能具有最大的影响。

再次，年龄似乎是风味的主要贡献者。CECSOL_0 和 SLTPPT_30 似乎又是起最大作用的土壤因素。突出了海拔的重要性，以及第二个夏季月份的平均最高温度。

了解了哪些土壤变量对风味特征有最大的影响后，让我们更仔细地检查那些有最大明显影响的变量。

**海拔高度**

在高海拔地区种植的葡萄受制于低海拔地区所没有的独特的[条件](https://www.stonestreetwines.com/how-does-altitude-affect-wine)。白天更多的阳光直射会使葡萄长出更厚的皮，据说这有助于提高浓度和单宁。此外，白天和夜晚之间更大的温度波动允许这些葡萄保留更多的天然酸度。

为了了解海拔如何建立风味特征，我们可以计算低海拔(底部四分位数)葡萄酒与高海拔(顶部四分位数)葡萄酒中描述符的相对频率。两个类别中相对频率差异最大的描述符可以总结为一个词云:

![](img/75535f5530a475a28979acf79a88e0c6.png)

虽然我们没有控制葡萄品种，年龄或任何其他与风土相关的变量，但我们可以看到低海拔和高海拔葡萄酒之间的一些有趣的差异。高海拔的葡萄酒似乎比低海拔的葡萄酒表现出更丰富、成熟和浓厚的特征。这可能是他们接受阳光量的结果。“坚定”意味着高水平的单宁和/或酸度，这与高海拔葡萄酒的普遍看法一致。相反，低海拔的葡萄酒似乎透露出更多的红色水果和橡木的味道。有趣的是，这些葡萄酒似乎也更具草本和泥土气息。这可能是葡萄经受较高平均温度的产物。

**秋季降水**

众所周知，酿酒师担心收获季节的降雨量。如果葡萄吸收水分，这有可能稀释葡萄中的糖分和味道。水也可能粘在葡萄树的叶子和树枝上，无意中与收获的葡萄一起被加工。收获期间过多的降雨也会提高葡萄的 pH 值，降低葡萄酒的酸度。再一次，让我们通过查看我们的相对频率描述词来测试这些理论。

![](img/a813e67148d75b1ed159a78689751640.png)

“低秋雨”这个词描绘了一幅生动的画面。这些葡萄酒与更多的浓度，丰富和成熟联系在一起。此外，左边单词 cloud 中出现“crisp”似乎表明酸度较高。这似乎与关于晚季降水影响的流行理论相一致。

**夏季平均最高气温**

夏季第二个月的日平均最高温度似乎对风味特征有显著影响。传统上，高温与较高的酒精含量和较低的酸度联系在一起。

![](img/c47169f61363c843c3f4e69c9fe7fc29.png)

在我们的数据中，夏季低温与黑莓和黑醋栗等浆果口味有关。甜味和草本特征似乎在夏季平均温度较低的葡萄酿造的葡萄酒中更为普遍。较高的最高平均温度更多地与樱桃味以及八角和丁香等香料气味联系在一起。

**阳离子交换容量**

阳离子交换容量(CECSOL)是对土壤保持正电荷阳离子能力的一种度量。具有更高 CECSOL 值的土壤通常具有更高的粘土含量和更大的保持养分的能力。关于 CECSOL 值对葡萄酒风味影响的理论很少。

![](img/ff5237c5a8eda317d36b9a4fd4909706.png)

词云中的描述词与葡萄酒颜色高度相关。在左边，我们看到几乎所有与白葡萄酒相关的描述符注释，而右边的词云主要包含红葡萄酒描述符注释。这使得很难挑出与 CECSOL 相关的感官品质。我们可以在未来的研究中重新审视这一点，同时控制葡萄品种。

**含泥量**

据说，生长在淤泥含量高的土壤中的葡萄能够产出酸度较低的顺滑葡萄酒。淤泥经常与“[黄土](https://en.wikipedia.org/wiki/Loess)联系在一起，这是一个更通用的术语，描述由风吹尘埃堆积形成的沉积物。黄土酿出的酒，可以酿造出具有矿物特色的酒。

![](img/ea5a3c2b8e65aa15b522cd37850af06f.png)

在我们的数据中，低水平的淤泥似乎与更干、更结实和更成熟的葡萄酒相关联。“新鲜”是酸度较高的指标，也似乎与低含量的淤泥有关。这符合关于淤泥和酒的流行思维。高水平的淤泥与更美味的葡萄酒相关，可以被描述为草本或绿色。

**结论**

模拟风土对葡萄酒的影响是一项具有挑战性的工作。这篇文章的分析开始揭示似乎具有最大影响的风土因素。海拔、土壤类型、降水和温度都有影响。在这些因素中，海拔似乎影响最大。虽然我们表面上已经开始识别与这些风土相关的描述符，但我们才刚刚开始剥洋葱皮。根据年龄和葡萄品种等因素，风土表现可能完全不同。这种分析的下一个好的步骤是关注土壤的细微差别，同时更好地控制这些因素。关于葡萄酒和大自然母亲，还有很多需要学习的地方…