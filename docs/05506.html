<html>
<head>
<title>Simple Ways to Improve Your Matplotlib</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">改进 Matplotlib 的简单方法</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/simple-ways-to-improve-your-matplotlib-b64eebccfd5?source=collection_archive---------4-----------------------#2019-08-14">https://towardsdatascience.com/simple-ways-to-improve-your-matplotlib-b64eebccfd5?source=collection_archive---------4-----------------------#2019-08-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="cf28" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Matplotlib 的默认属性经常产生不吸引人的图。这里有几个简单的方法来美化你的形象。</h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/c0827a70eb09c2e84f2c8bdfb147ab99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P8WORgPuVIpn0W55r6GzJg.jpeg"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk"><a class="ae kw" href="http://bit.ly/31rt1Zq" rel="noopener ugc nofollow" target="_blank">Photo by Alice Bartlett.</a> Cropped and resized by author.</figcaption></figure><p id="d92d" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><a class="ae kw" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> Matplotlib </a>通常是 Python 程序员学习的第一个数据可视化包。虽然它的用户可以用几行代码创建基本的图形，但这些默认的图形在设计美学和交流能力方面往往是不够的。然而，简单的调整可以带来巨大的改进，在这篇文章中，我将分享一些关于如何升级 Matplotlib 图形的技巧。</p><p id="faee" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在接下来的例子中，我将使用在<a class="ae kw" href="https://www.kaggle.com/crawford/80-cereals" rel="noopener ugc nofollow" target="_blank">这个关于谷物</a>的 Kaggle 数据集中找到的信息。我通过食用量标准化了三个特征(卡路里、脂肪和糖),以便更好地比较谷物营养和评级。关于这些数据转换的细节和用于生成每个示例图的代码可以在我的<a class="ae kw" href="https://github.com/kimfetti/Blog/blob/master/matplotlib_improvements.ipynb" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。</p><h1 id="d166" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">移除脊椎</h1><p id="3d3a" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">默认要更新的第一个 Matplotlib 是每个图周围的黑框，由四个所谓的“脊骨”组成为了调整它们，我们首先<a class="ae kw" href="https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.gca.html" rel="noopener ugc nofollow" target="_blank">通过 pyplot 获得我们的图形的轴</a>，然后根据需要改变每个单独脊椎的可见性。</p><p id="563a" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">比方说，我们想要删除顶部和右侧的脊椎。如果我们导入了 Matplotlib 的 pyplot 子模块:</p><pre class="kh ki kj kk gt mq mr ms mt aw mu bi"><span id="f353" class="mv lu iq mr b gy mw mx l my mz">from matplotlib import pyplot as plt</span></pre><p id="9a9e" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们只需要在代码中添加以下内容:</p><pre class="kh ki kj kk gt mq mr ms mt aw mu bi"><span id="eeec" class="mv lu iq mr b gy mw mx l my mz">plt<strong class="mr ir">.</strong>gca()<strong class="mr ir">.</strong>spines['top']<strong class="mr ir">.</strong>set_visible(False)<br/>plt<strong class="mr ir">.</strong>gca()<strong class="mr ir">.</strong>spines['right']<strong class="mr ir">.</strong>set_visible(False)</span></pre><p id="a92f" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">顶部和右侧的脊柱将不再出现。移除这些分散注意力的线条可以将更多的注意力放在你的数据上。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi na"><img src="../Images/20d73d7025101fa27eb9a57ec11be1ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9GRsfHtPZ3m1pmVKNYAYBA.png"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk">Removing distracting spines can help people focus on your data.</figcaption></figure><h1 id="76ac" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">探索颜色选项</h1><p id="a5d3" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">Matplotlib 的<a class="ae kw" href="https://matplotlib.org/3.1.1/users/dflt_style_changes.html#colors-color-cycles-and-color-maps" rel="noopener ugc nofollow" target="_blank">默认颜色刚刚得到升级</a>，但是你仍然可以很容易地改变它们，使你的图更有吸引力，甚至反映你公司的品牌颜色。</p><h2 id="f732" class="mv lu iq bd lv nb nc dn lz nd ne dp md lg nf ng mf lk nh ni mh lo nj nk mj nl bi translated">十六进制代码</h2><p id="f220" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">我最喜欢的更新 Matplotlib 颜色的方法之一是直接将十六进制代码<a class="ae kw" href="https://htmlcolorcodes.com/" rel="noopener ugc nofollow" target="_blank">传递给颜色参数，因为它允许我非常具体地选择颜色。</a></p><pre class="kh ki kj kk gt mq mr ms mt aw mu bi"><span id="bde5" class="mv lu iq mr b gy mw mx l my mz">plt<strong class="mr ir">.</strong>scatter(<strong class="mr ir">...</strong>, color<strong class="mr ir">=</strong>'#0000CC')</span></pre><p id="7382" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><a class="ae kw" href="https://www.w3schools.com/colors/colors_picker.asp" rel="noopener ugc nofollow" target="_blank">这个方便的工具</a>可以帮助你选择一个合适的十六进制颜色，通过测试它与白色和黑色文本，以及比较几个较亮和较暗的阴影。或者，在选择调色板时，你可以采取更科学的方法，看看布朗可视化研究实验室的康纳·格拉马齐奥的<a class="ae kw" href="http://vrl.cs.brown.edu/color" rel="noopener ugc nofollow" target="_blank">色彩学</a>。Colorgorical 工具允许您通过平衡各种偏好(如人类感知差异和审美愉悦)来构建调色板。</p><h2 id="ae33" class="mv lu iq bd lv nb nc dn lz nd ne dp md lg nf ng mf lk nh ni mh lo nj nk mj nl bi translated">xkcd 颜色</h2><p id="71b5" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">xkcd 颜色库提供了另一种更新 Matplotlib 默认颜色的好方法。这 954 种颜色是由 xkcd 颜色名称调查<a class="ae kw" href="https://blog.xkcd.com/2010/05/03/color-survey-results/" rel="noopener ugc nofollow" target="_blank">的几十万参与者特别策划和命名的。您可以在 Matplotlib 中使用它们，方法是在它们的名称前加上“xkcd:”前缀。</a></p><pre class="kh ki kj kk gt mq mr ms mt aw mu bi"><span id="14cc" class="mv lu iq mr b gy mw mx l my mz">plt<strong class="mr ir">.</strong>scatter(<strong class="mr ir">...</strong>, color<strong class="mr ir">=</strong>'xkcd:lightish blue')</span></pre><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi nm"><img src="../Images/b4b33b1150ab949a72e3c161a88afea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MebH0uID8uuKpJB_6xh5ig.png"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk"><em class="kf">Matplotlib’s default colors can easily be updated by passing hex codes or referencing the xkcd library.</em></figcaption></figure><h1 id="3d70" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">图层图形对象</h1><p id="5958" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">Matplotlib 允许用户将多个图形层层叠加，这在比较结果或设置基线时非常方便。在分层的时候应该利用两个有用的属性:1) <code class="fe nn no np mr b">alpha</code>用于控制每个组件的不透明度，2) <code class="fe nn no np mr b">zorder</code>用于将对象移动到前景或背景。</p><h2 id="feae" class="mv lu iq bd lv nb nc dn lz nd ne dp md lg nf ng mf lk nh ni mh lo nj nk mj nl bi translated">不透明</h2><p id="8f33" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">Matplotlib 中的 alpha 属性调整对象的不透明度。该值的范围从 0 到 1，其中 0 表示完全透明(不可见👀)和一个完全不透明的。减少 alpha 将使您的绘图对象透明，允许同时看到多个层，并允许区分重叠点，比如在散点图中。</p><pre class="kh ki kj kk gt mq mr ms mt aw mu bi"><span id="6304" class="mv lu iq mr b gy mw mx l my mz">plt<strong class="mr ir">.</strong>scatter(<strong class="mr ir">...</strong>, alpha<strong class="mr ir">=</strong>0.5)</span></pre><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi na"><img src="../Images/16e7baf5e1af565a028a2a54897a2f7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ixwop_dBemeSFlCzJ9pL-Q.png"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk"><em class="kf">Decreasing alpha reduces opacity and can help you visualize overlapping points.</em></figcaption></figure><h2 id="813e" class="mv lu iq bd lv nb nc dn lz nd ne dp md lg nf ng mf lk nh ni mh lo nj nk mj nl bi translated">命令</h2><p id="2e2a" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">Matplotlib 的 zorder 属性决定了对象与前景的距离。具有较小 zorder 值的对象看起来更靠近背景，而具有较大 z order 值的对象更靠近前面。例如，如果我正在制作一个散点图和一个伴随的线图，我可以通过增加它的 zorder 来使线前移。</p><pre class="kh ki kj kk gt mq mr ms mt aw mu bi"><span id="f3f2" class="mv lu iq mr b gy mw mx l my mz">plt<strong class="mr ir">.</strong>scatter(<strong class="mr ir">...</strong>, zorder<strong class="mr ir">=</strong>1)  <em class="nq">#background</em><br/>plt<strong class="mr ir">.</strong>plot(<strong class="mr ir">...</strong>, zorder<strong class="mr ir">=</strong>2)     <em class="nq">#foreground</em></span></pre><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/0b31a3dc430a9fe01050542f2472d1fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1164/format:webp/1*yzjwRxu9BZFU0kH8EniQvA.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk"><em class="kf">Plot objects can be brought to the foreground or pushed to the background by adjusting zorder.</em></figcaption></figure></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><figure class="kh ki kj kk gt kl"><div class="bz fp l di"><div class="nz oa l"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk">For more tips just like these, check out my full <strong class="ak"><em class="kf">Matplotlib Tips</em></strong> playlist on YouTube.</figcaption></figure></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><h1 id="51a1" class="lt lu iq bd lv lw ob ly lz ma oc mc md jw od jx mf jz oe ka mh kc of kd mj mk bi translated">注释要点或例子</h1><p id="5bd8" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">许多视觉效果可以从主要观点的注释或具体的、说明性的例子中受益，因为这些直接传达了想法并提高了结果的有效性。要向 Matplotlib 图形添加文本，只需包含指定所需文本及其位置的注释代码。</p><pre class="kh ki kj kk gt mq mr ms mt aw mu bi"><span id="250a" class="mv lu iq mr b gy mw mx l my mz">plt<strong class="mr ir">.</strong>annotate(TEXT, (X_POSITION, Y_POSITION), <strong class="mr ir">...</strong>)</span></pre><p id="ccc9" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">用来制作这个博客视觉效果的谷物数据集包含了几种品牌谷物的营养信息，以及一个标记为“评级”的特征人们可能首先认为“评级”是一个表明消费者偏好的谷物的分数。然而，在上面的 zorder 图中，我建立了一个快速线性回归模型，表明每杯卡路里和评级之间的相关性实际上不存在。卡路里似乎不可能不成为消费者偏好的因素，所以我们可能已经对我们最初关于“评级”的假设产生了怀疑。</p><p id="0901" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">当检查极端情况时，这种误解变得更加明显:Cap'n Crunch 是评级最低的谷物，而全麸额外纤维评级最高。用这些有代表性的例子来注释这个图，立刻消除了关于“评级”的错误假设这种评级信息更有可能表明谷物的营养价值。(我也标注过每杯热量最多的麦片；葡萄坚果不太可能被大量食用！😆)</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi og"><img src="../Images/395e40380ad377398c325eae5d7428f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*PWk5OUY27ETHRQ1ndacHiQ.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk"><em class="kf">Annotating your visuals with a few examples can improve communication and add legitimacy.</em></figcaption></figure><h1 id="6deb" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">基线和突出显示</h1><p id="d4e4" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">给你的视觉效果添加基线有助于设定期望值。一条简单的水平线或垂直线为其他人提供了适当的背景，通常会加速他们对你的结果的理解。同时，突出感兴趣的特定区域可以进一步强调你的结论，也有助于与你的听众交流。Matplotlib 为基线和突出显示提供了几个选项，包括水平线和垂直线、矩形等形状、水平和垂直跨度阴影以及两条线之间的填充。</p><h2 id="0582" class="mv lu iq bd lv nb nc dn lz nd ne dp md lg nf ng mf lk nh ni mh lo nj nk mj nl bi translated">水平线和垂直线</h2><p id="8e92" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">现在让我们考虑一下谷物数据集中脂肪和糖之间的相互作用。起初，这种关系的基本散点图似乎并不有趣，但在进一步探索后，我们发现每杯谷物的脂肪中位数仅为 1 克，因为许多谷物根本不含脂肪。添加这条基线有助于人们更快地得出这一发现。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi oh"><img src="../Images/01f69deb3f85c83ca55fae01891d5373.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7-njent0_trdZV1gdQ2Qnw.png"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk"><em class="kf">A horizontal or vertical baseline can help set the stage for your data.</em></figcaption></figure><p id="cd38" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在其他情况下，您可能希望完全删除 Matplotlib 提供的默认 x 轴和 y 轴，并基于一些数据集合创建自己的轴。这个过程需要三个关键步骤:1)删除所有默认的脊线，2)删除刻度线，3)添加新的轴作为水平线和垂直线。</p><pre class="kh ki kj kk gt mq mr ms mt aw mu bi"><span id="b5f8" class="mv lu iq mr b gy mw mx l my mz"><em class="nq">#1. Remove spines</em><br/>for spine in plt.gca().spines.values():<br/>    spine.set_visible(False)</span><span id="f99a" class="mv lu iq mr b gy oi mx l my mz"><em class="nq">#2. Remove ticks</em><br/>plt.xticks([])<br/>plt.yticks([])</span><span id="3fc7" class="mv lu iq mr b gy oi mx l my mz"><em class="nq">#3. Add horizontal and vertical lines</em><br/>plt.axhline(Y_POSITION, ...)  <em class="nq">#horizontal line</em><br/>plt.axvline(X_POSITION, ...)  <em class="nq">#vertical line</em></span></pre><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/9d8ae21ee6c85faf8d98851acc33ecde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*U3ygZtM8o4vl-TZYRXD4GA.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk"><em class="kf">You can also create new axes for your data by removing spines and ticks and adding custom lines.</em></figcaption></figure><h2 id="9675" class="mv lu iq bd lv nb nc dn lz nd ne dp md lg nf ng mf lk nh ni mh lo nj nk mj nl bi translated">矩形</h2><p id="742b" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">既然我们已经把谷物的脂肪和糖含量标绘在新的坐标轴上，看来很少有谷物是低糖高脂肪的。也就是说，左上象限几乎是空的。这似乎是合理的，因为谷物通常不好吃。为了使这一点非常清楚，我们可以通过在它周围画一个矩形并加以注释，将注意力引向这个低糖、高脂肪的区域。Matplotlib 通过其<a class="ae kw" href="https://matplotlib.org/3.1.1/api/patches_api.html#module-matplotlib.patches" rel="noopener ugc nofollow" target="_blank">补丁模块</a>提供了对几种形状的访问，包括一个矩形甚至一个<a class="ae kw" href="https://matplotlib.org/3.1.1/gallery/shapes_and_collections/dolphin.html#sphx-glr-gallery-shapes-and-collections-dolphin-py" rel="noopener ugc nofollow" target="_blank">海豚</a>。首先导入矩形的代码:</p><pre class="kh ki kj kk gt mq mr ms mt aw mu bi"><span id="d42f" class="mv lu iq mr b gy mw mx l my mz">from matplotlib.patches import Rectangle</span></pre><p id="6a53" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">然后，要在图形上创建一个矩形，请抓取当前轴，并添加一个矩形补片及其位置、宽度和高度:</p><pre class="kh ki kj kk gt mq mr ms mt aw mu bi"><span id="5d73" class="mv lu iq mr b gy mw mx l my mz">plt<strong class="mr ir">.</strong>gca()<strong class="mr ir">.</strong>add_patch(Rectangle((X_POSITION, Y_POSITION), <br/>                              WIDTH, HEIGHT, <strong class="mr ir">...</strong>)</span></pre><p id="426e" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这里，x 和 y 位置指的是矩形左下角的位置。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/35214b6f64dd7ac7728a27d390def3a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*lWZSZUnus-oq9OKgPHJVrg.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk"><em class="kf">To direct people toward a particular part of your visual, consider adding a rectangle.</em></figcaption></figure><h2 id="fe81" class="mv lu iq bd lv nb nc dn lz nd ne dp md lg nf ng mf lk nh ni mh lo nj nk mj nl bi translated">明暗法</h2><p id="ddd2" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">阴影提供了另一种选择，用于将注意力吸引到图形的特定区域，有几种方法可以使用 Matplotlib 添加阴影。</p><p id="cb4f" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">如果您打算突出显示整个水平或垂直区域，只需在视觉效果中添加一个跨度:</p><pre class="kh ki kj kk gt mq mr ms mt aw mu bi"><span id="dbd9" class="mv lu iq mr b gy mw mx l my mz">plt<strong class="mr ir">.</strong>axhspan(Y_START, Y_END, <strong class="mr ir">...</strong>)  <em class="nq">#horizontal shading</em><br/>plt<strong class="mr ir">.</strong>axvspan(X_START, X_END, <strong class="mr ir">...</strong>)  <em class="nq">#vertical shading</em></span></pre><p id="597c" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">之前讨论过的属性像<code class="fe nn no np mr b">alpha</code>和<code class="fe nn no np mr b">zorder</code>在这里很关键，因为你可能想要让你的阴影透明和/或把它移到背景。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi ol"><img src="../Images/23259643501ef4b02a5b687e1d521304.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bAGbYe7-hHBIJweHaTyLog.png"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk"><em class="kf">Shading also provides an effective way to highlight a particular region of your plot.</em></figcaption></figure><p id="f8d8" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">但是，如果您想要着色的区域遵循更复杂的逻辑，您可以在两条用户定义的线之间使用<a class="ae kw" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.fill_between.html" rel="noopener ugc nofollow" target="_blank">着色。这种方法需要一组 x 值，第一行和第二行的两组 y 值，以及一个可选的<code class="fe nn no np mr b">where</code>参数，该参数允许您使用逻辑过滤到您感兴趣的区域。</a></p><pre class="kh ki kj kk gt mq mr ms mt aw mu bi"><span id="f0b1" class="mv lu iq mr b gy mw mx l my mz">plt<strong class="mr ir">.</strong>gca()<strong class="mr ir">.</strong>fill_between(X_VALUES, Y_LINE1, Y_LINE2, <br/>                       WHERE<strong class="mr ir">=</strong>FILTER LOGIC, <strong class="mr ir">...</strong>)</span></pre><p id="ca2e" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">要使之前用矩形突出显示的相同区域变暗，只需为 x 轴定义一个等距糖值数组，在 y 轴上填充中间值和最大脂肪值(高脂肪)，并向下过滤小于中间值的糖值(低糖)。</p><pre class="kh ki kj kk gt mq mr ms mt aw mu bi"><span id="0b62" class="mv lu iq mr b gy mw mx l my mz">sugars <strong class="mr ir">=</strong> np<strong class="mr ir">.</strong>linspace(df<strong class="mr ir">.</strong>sugars_per_cup<strong class="mr ir">.</strong>min(),       <br/>                     df<strong class="mr ir">.</strong>sugars_per_cup<strong class="mr ir">.</strong>max(), <br/>                     1000)</span><span id="a145" class="mv lu iq mr b gy oi mx l my mz">plt<strong class="mr ir">.</strong>gca()<strong class="mr ir">.</strong>fill_between(sugars, <br/>                       df<strong class="mr ir">.</strong>fat_per_cup<strong class="mr ir">.</strong>median(), <br/>                       df<strong class="mr ir">.</strong>fat_per_cup<strong class="mr ir">.</strong>max(), <br/>                       WHERE<strong class="mr ir">=</strong>sugars <strong class="mr ir">&lt;</strong> df<strong class="mr ir">.</strong>sugars_per_cup<strong class="mr ir">.</strong>median(), <br/>                       <strong class="mr ir">...</strong>)</span></pre><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/b0b6bcb527cc115713da0581c7c3a8b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*2AATaQJiqHhk-3P-hoGQGw.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk"><em class="kf">More complex shading logic is accomplished by filling between two lines and applying a filter.</em></figcaption></figure><h1 id="5455" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">结论</h1><p id="f6a0" class="pw-post-body-paragraph kx ky iq kz b la ml jr lc ld mm ju lf lg mn li lj lk mo lm ln lo mp lq lr ls ij bi translated">Matplotlib 的名声很差，因为它的缺省值很差，而且需要大量代码来产生看起来不错的视觉效果。希望这篇博客中提供的技巧能帮助你解决第一个问题，尽管我承认最后几个示例图需要很多更新和大量代码。如果所需的大量代码困扰着你，那么<a class="ae kw" href="https://seaborn.pydata.org/" rel="noopener ugc nofollow" target="_blank"> Seaborn </a>可视化库是 Matplotlib 的一个很好的替代品。它提供了更好的默认设置，需要更少的代码行，并且如果需要的话，支持通过传统的 Matplotlib 语法进行定制。</p><p id="39b8" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">当您可视化数据时，无论您选择哪个包，都要记住的主要事情是您的受众。我在这里提供的建议旨在通过以下方式平滑数据交流过程:1)删除多余的部分，如不必要的线条或刻度线；2)通过设置分层和基线来更快地讲述数据故事；3)通过阴影和注释突出主要结论。由此带来的美感也有所改善，但主要目标是更强大、更无缝的数据通信。</p><p id="dcfb" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated"><em class="nq">我最近在</em> <a class="ae kw" href="https://odsc.com/training/portfolio/custom-data-visualizations-with-python/" rel="noopener ugc nofollow" target="_blank"> <em class="nq"> ODSC 纽约</em> </a> <em class="nq">的一次数据可视化演讲中分享了类似的内容。你可以在这里访问我的会议资料</em><a class="ae kw" href="http://bit.ly/odscNyc19_dataviz" rel="noopener ugc nofollow" target="_blank"><em class="nq"/></a><strong class="kz ir"><em class="nq"/></strong><em class="nq">以及我的 GitHub</em><strong class="kz ir"><em class="nq"/></strong><a class="ae kw" href="https://github.com/kimfetti/Blog/blob/master/matplotlib_improvements.ipynb" rel="noopener ugc nofollow" target="_blank"><em class="nq"/></a><em class="nq">上的各个幂例图。</em></p><p id="8776" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">[1] J.D. Hunter，<a class="ae kw" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank">Matplotlib:2D 图形环境</a> (2007)，科学计算&amp;工程。</p><p id="1ba5" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">[2] C .克劳福德，<a class="ae kw" href="https://www.kaggle.com/crawford/80-cereals" rel="noopener ugc nofollow" target="_blank"> 80 谷物</a> (2017)，卡格尔。</p><p id="c6d6" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">[3] C.C. Gramazio，D.H .莱德劳和 K.B. Schloss，<a class="ae kw" href="http://vrl.cs.brown.edu/color" rel="noopener ugc nofollow" target="_blank"> Colorgorical:为信息可视化创建可区分和优选的调色板</a> (2017)，IEEE 可视化和计算机图形学汇刊。</p></div></div>    
</body>
</html>