<html>
<head>
<title>Visualizing the 2017 wildfire season</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可视化 2017 年野火季节</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/visualizing-the-2017-wildfire-season-2053fe72525f?source=collection_archive---------27-----------------------#2019-04-23">https://towardsdatascience.com/visualizing-the-2017-wildfire-season-2053fe72525f?source=collection_archive---------27-----------------------#2019-04-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="f70f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2017 年是美国野火灾难性的一年，特别是在加利福尼亚州，发生了 9000 多起火灾，燃烧面积超过 130 万英亩。</p><p id="e92b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">斯坦福新闻和民主倡议的一个项目“大地方新闻”开发了一个数据库，用来追踪由联邦政府管理的大面积野火(100 多英亩)。根据该数据，2017 年美国发生了超过 23，000 起野火，比前一年增加了 21%，比数据开始的 2014 年增加了近 80%。</p><p id="b8a8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">虽然这个数据库并没有全面的显示这个国家的野火情况，但是它显示了野火的增加，T2，专家认为这是全球变暖造成的。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/5227e827775311ea4e5a8ac306a19c9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QeyL7yHKemyvNaCxxTYm4g.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Data from <a class="ae ko" href="https://searchworks.stanford.edu/view/xj043rd8767" rel="noopener ugc nofollow" target="_blank">Big Local News</a> / Chart by Jared Whalen.</figcaption></figure></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><p id="ebad" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">方法论</strong></p><p id="e616" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">从大型本地新闻<a class="ae ko" href="https://searchworks.stanford.edu/view/xj043rd8767" rel="noopener ugc nofollow" target="_blank">数据集</a> ( <em class="lm">美国野火的成本(2014–2017</em>)开始，我按唯一标识符统计记录，并按日期分组。没有事故日期的记录被删除。</p><p id="13fd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">工具:R (dplyr，lubridate，ggplot)，Illustrator</p><p id="d50c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">流程</strong></p><p id="82d5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我是通过 Buzzfeed 的 Jeremy Singer-Vine 每周收集的数据集<a class="ae ko" href="https://tinyletter.com/data-is-plural" rel="noopener ugc nofollow" target="_blank"> Data is Plural 简讯</a>偶然发现这个数据集的。在四处探索之后，它看起来像是一个有趣的图表。</p><p id="380e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">谈到野火这个话题，我想选择一种视觉上看起来像火焰的图表类型。这让我想起了 Nadieh Bremer 在她的作品<a class="ae ko" href="https://www.visualcinnamon.com/portfolio/baby-spike" rel="noopener ugc nofollow" target="_blank"> <em class="lm"> The Baby Spike </em> </a>中的<a class="ae ko" href="https://twitter.com/NadiehBremer" rel="noopener ugc nofollow" target="_blank">美丽的可视化，它使用了径向面积图和生动的颜色着色。深受布雷默文章的启发，我想加入一个使用平均值作为基线的径向面积图设计。</a></p><p id="b95b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">至于数据，我在 r 中完成了所有的争论和分析。我的主要代码只是对大规模数据集进行精简，然后按日期进行汇总。</p><pre class="kq kr ks kt gt ln lo lp lq aw lr bi"><span id="f281" class="ls lt it lo b gy lu lv l lw lx">library(tidyverse)<br/>library(lubridate)</span><span id="b5f6" class="ls lt it lo b gy ly lv l lw lx"># identify unique records<br/>fireData_unique &lt;- fireData %&gt;%<br/> group_by(INC_IDENTIFIER) %&gt;%<br/> filter(n() == 1) %&gt;%<br/> ungroup()<br/># make field selections and convert dates<br/>fireData_sel &lt;- fireData_unique %&gt;%<br/> select(INCIDENT_NAME,<br/> DISCOVERY_DATE) %&gt;% <br/> mutate(day = yday(ymd_hms(DISCOVERY_DATE)),<br/> week = week(ymd_hms(DISCOVERY_DATE)),<br/> year = year(ymd_hms(DISCOVERY_DATE))<br/> ) %&gt;%<br/> # remove records with missing or erroneous dates <br/> filter(<br/> !year %in% c(“2011”, NA)<br/> ) %&gt;%<br/> # get count by day<br/> group_by(day, year) %&gt;%<br/> summarise(count = n())</span><span id="aa91" class="ls lt it lo b gy ly lv l lw lx"># create average df<br/>fireData_avg &lt;- fireData_sel %&gt;%<br/> group_by(day) %&gt;% <br/> summarise(mean = mean(count))</span></pre><p id="c542" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">虽然我在 Illustrator 中做了大量的工作，但大部分繁重的工作来自下面使用 ggplot 的代码。</p><pre class="kq kr ks kt gt ln lo lp lq aw lr bi"><span id="3c5d" class="ls lt it lo b gy lu lv l lw lx"># function to shift baseline by mean<br/>shiftBase = function(x) {<br/> x — mean(fireData_avg$mean)<br/>}</span><span id="affa" class="ls lt it lo b gy ly lv l lw lx"># Make the plot<br/> ggplot() +<br/> geom_area(data=filter(fireData_sel, year==2017), aes(x=day, y=count-mean(fireData_avg$mean)), fill=”#FFBF3F”, alpha=1) +<br/> facet_grid(~year) +<br/> geom_area(data=fireData_avg, aes(x=day, y=mean-mean(fireData_avg$mean)), fill=”#547C8E”, alpha=0.2) +<br/> theme_minimal() +<br/> geom_hline(yintercept=0, color=”#FF9843") +<br/> coord_polar(start = 0.1) +<br/>  scale_y_continuous(<br/>    breaks=shiftBase(c(0,100,200,300)),<br/>    labels = function(x){<br/>      round(x+mean(fireData_avg$mean),-2)<br/>    },<br/>    limits=c(-150,max(fireData_sel$count))<br/>  )</span></pre><p id="ead4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">独立图表</strong></p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/4e9c7d3c78765f0e4ffc0ea53f624b53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IFbVy26uqJHHxrpogXvgcg.png"/></div></div></figure></div></div>    
</body>
</html>