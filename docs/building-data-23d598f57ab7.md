# 建筑数据

> 原文：<https://towardsdatascience.com/building-data-23d598f57ab7?source=collection_archive---------7----------------------->

## 基础设施、信任、欣赏和决策

## 失败(fālˈyər)

> 没有达到预期目的的情况或事实:实验的失败。

我失败了。作为多伦多一家初创公司的第一位[数据工程师](https://www.cio.com/article/3292983/what-is-a-data-engineer.html)，我有崇高的目标，伟大的新想法/稍微借鉴的想法，我甚至有*阶段*，所以一切都会很好地融入我的宏伟计划。不要误解我，失败并不是一件坏事，我已经做了很多事情。但是我知道问题，我知道解决方法，我把所有的事情都分阶段进行。我怎么会失败呢？我怎么会？？？

让我们从头开始，第 0 天，我想了很久，想了很久，想了很久，想了很久，想了很久，想了很久，想了很久，想了很久，想了很久，想了很久，该怎么做，所以让我们从这里开始吧。让数据民主化！

**第 1 阶段**将移除或更新传统事件跟踪目标，并替换为来自[segment.com](http://segment.com)的整合第三方 API。我会尽可能保持其他一切不变，同时重建，因为商业需求不能让位于伟大。

**第 2 阶段**是现代无服务器数据基础设施诞生的地方。我会使用最新和最伟大的数据技术，一切开源，甚至一些“出血边缘”阿尔法狗屎，使一个傻瓜(和未来)证明基础设施。这将为我们提供我们可以预见的所有可扩展性，同时还允许分析师和数据科学家*访问、发现和构建可操作的见解* ←是我借用的一个想法。

**第三期**等一下……自助。还需要我多说吗？任何关于数据工程、数据文化或数据驱动的决策制定的讨论，如果没有一个每个员工都知道、使用和喜爱 SQL 的自助式报告 BI 平台的梦想，都是不完整的。

**第 4 阶段**数据产品，面向内部和外部。数据团队不仅应该促进提供易于访问和发现的数据，而且，特别是在小公司，应该推动 A/B 实验平台、数据科学工作流、产品团队可以使用的数据 API，以及整个组织中所有数据相关文档的官方主页，如 [Airbnb 的知识报告](https://github.com/airbnb/knowledge-repo)。

![](img/93fca24bbc3b5d851b71b7b38da14a12.png)

Photo by [Brooke Cagle](https://unsplash.com/@brookecagle?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

与此同时，还有午餐学习、数据调查、制定数据驱动决策的最佳实践等等。你的基本[数据——公司内部的大学](https://medium.com/airbnb-engineering/how-airbnb-democratizes-data-science-with-data-university-3eccc71e073a)方法。

我失败了。我不仅失败得快而且经常失败，而且失败得相当慢，努力去理解眼前发生的事情。

今天，我想写一个小故事，讲述我在数据职业生涯中的亲身经历，以及我通过阅读其他媒体上的故事所学到的东西。也许与此同时，我会想出我会有什么不同的做法。

理论上，数据工程师不负责组织中的“所有数据”。互联网上的默认角色描述中没有一句台词是这样的

> 数据工程师收集、转换和发布数据，使组织能够做出数据驱动的决策……他们还创建、维护和传播我们都知道、喜欢和想要的数据文化。

但是在相当多的情况下，特别是在早期的“数据成熟”公司中，无论员工或雇主是否知道，这都是一个要求。

**数据文化**是你经常听到的东西，就我个人而言，我是自上而下的数据文化方法的强烈支持者，这意味着，如果你的首席执行官不喜欢它，并且不要求他的直接下属提供数据支持的结果，你将无法让其他人关心数据驱动的文化。

但在大多数创业公司中，至少从我能讲的来看，似乎是这样的。主要是因为小公司要么有一两个“数据人”，所以任何与数据相关的责任都从其他人身上转移到了数据人身上。在处于早期数据成熟阶段的公司，尤其是初创公司，第一个数据工程师几乎总是必须承担在公司推广数据知识和热情的角色，以及正常的预期数据工程工作。

不管是好是坏，这就是所发生的事情，与其争论如何解决它，我想写下我处理它的经历。我目前是一名数据工程师，但我在企业和初创公司中担任过多个数据分析师和软件开发人员的角色。在每一个新的角色中，我大脑中的科学家部分总是想要证明，这使我成为我所在的公司或团队的数据人员。

当我第一次加入目前的公司时，培养数据文化是一件非常令人兴奋的事情。建立新的东西，而不仅仅是基础设施，以某种方式指导公司的整体数据战略的想法令人兴奋。但是我如何创建这种数据文化呢？我们能定义它吗？互联网给你的感觉是*数据文化*是一个单一的、从固体金属切割而成的复杂模型，直接看着它让人无法理解如此复杂的东西是如何被人类创造出来的。

但是对我来说，数据文化是一把包罗万象的伞，为了清楚起见，我想把它分成 4 个部分。我自己的私人捕捉所有迷你伞。这就是我对**构建数据**的看法和经验的开始。

![](img/43a1690de474cd993c3d62d77d359636.png)

Photo by [Stephen Dawson](https://unsplash.com/@srd844?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

## 1.构建数据基础设施

最近，似乎每个公司都想要或需要一名数据工程师。这个人为公司做什么在很大程度上取决于公司的行业和数据成熟度。这可以跨越从初创公司到大型企业公司。

我的主要职责是解决问题、支持员工和建立基础设施。但不是这么几句话，更像是

> 简化、整合、管理、维护并向组织内的所有利益相关方提供可靠的数据，但首先要修复、移除和/或替换不工作的数据，这是典型的启动数据工程需求

这个概念非常简单，但总有一个问题，其中之一就是要记住，当你在建设基础设施时，公司仍然需要运转。这意味着，公司的当前和短期需求仍然必须得到支持，利益相关者仍然需要指标来查看，BI 分析师仍然需要仪表板和图表来分析。这是非常好的优先级技能、多任务技能、沟通和期望管理技能发挥作用的地方。如果你没有这些，那么成为你公司的第一个(或第一批)数据工程师对你和你的公司来说可能是个坏主意。

排在“明白”列表之后的第二个问题是，在想要和需要之间进行斗争有多困难，以及平衡未来建设而不是遥远未来建设的真正需要。除非你是一家专门的“数据”公司，或者可能是一家 IOT 公司，否则你对数据基础设施的第一次尝试不应该是大肆宣传的[数据湖](https://en.wikipedia.org/wiki/Data_lake)。这也适用于你的数据工具，我正看着你的 [Looker](https://looker.com/) 。想想婴儿的步伐，或许不是婴儿的步伐，而是蹒跚学步的步伐。不需要启动一个 [kubernetes](https://kubernetes.io/) 集群来在 [Docker](https://www.docker.com/) 容器中运行您的两个 Python 脚本。但这并不意味着你的基础设施是从你办公桌下的服务器上运行的 cron 开始的。

一个好的、简单的、典型的 starter 批处理基础设施可能看起来像 AWS S3、Redshift、EC2/hosted(或 AWS Glue)上的 Airflow 以及您选择的 BI 工具。您可能还想添加一个监控堆栈，无论是 Prom+Grafana 还是 AWS CloudWatch。通过这种设置，您可以轻松地纵向扩展和横向扩展、更换部件或将整个系统转移给另一家提供商(有限的供应商锁定)。您还可以轻松地为数据科学家或数据分析师添加工作流工具，目前，您的公司可能还没有这些工具。一家拥有第一位数据工程师的公司现在可能正在期待一些数据民主化的发生(对于那些不了解情况的人来说，这是数据和民主之间的“协同作用”),随之而来的是大肆宣传的**自助式商业智能平台/分析工具。**

“自助”这个词就像愚人的黄金或者宠物蛇或者[蝎子和青蛙](https://en.wikipedia.org/wiki/The_Scorpion_and_the_Frog)，基本上是任何一开始看起来很棒，然后一有机会就咬你屁股的东西。

[](https://en.wikipedia.org/wiki/The_Scorpion_and_the_Frog#/media/File:Tortoise_and_Scorpion.jpg) [## 蝎子和青蛙-维基百科

### 一只蝎子让一只青蛙背它过河。青蛙犹豫了，害怕被蝎子螫伤，但是…

en.wikipedia.org](https://en.wikipedia.org/wiki/The_Scorpion_and_the_Frog#/media/File:Tortoise_and_Scorpion.jpg) 

自助式 BI，也称为民主化数据，是指当有人想象一个世界，其中具有直观拖放界面的工具实际上对所有人都是直观的，人们只问他们自己无法回答的问题，每个人都知道 SQL。如果有合适的资源可以帮助，使用 excel 的用户很可能会使用任何工具。这些用户热衷于学习更多关于工具和数据的知识，并且不介意与奖励相关的学习曲线。然而，在现实中，创建一个自助式分析环境会给你一个大规模混乱、伟大和愚蠢的大杂烩，比如

1.  认为谷歌表单的旧方式更好的用户
2.  人们提出了许多很棒的新问题
3.  很多不太好的问题已经被提出来了
4.  大家都讨厌 SQL。人人
5.  解释拖放界面的工作原理

自我服务会让你不知所措，让你的利益相关者不知所措。如果你没有准备好大量的资源——需要帮助的人、文档、消磨时间——这个项目会扼杀你作为数据工程师的生产力，甚至可能扼杀你的灵魂。你最好与其他团队的一两个关键成员密切合作，帮助他们学习新系统，发现数据，让这些半数据人员直接在他们自己的团队中工作，然后在以后打开称为自助式 BI 环境的闸门。

## 2.建立数据信任

如果没有人相信你提供的数据，那就不值得提供。我很快认识到，一个看起来不太好的基础设施产生数据是不够的。人们需要使用这些数据来查看结果，并深入了解从营销活动和转化率到 A/B 实验和用户应用内行为的任何事情。如果您的最终用户不相信您提供的指标，他们会很快停止使用您的数据。如果你幸运的话，他们至少会告诉你他们不相信这些数据——是的，这就是幸运。唯一比最终用户不信任你的数据更糟糕的是，用户不信任你的数据，停止使用它，寻找替代品，并且永远不会告诉你。

就数据信任而言，单一(一个)真实来源是区分好坏的好方法。

> 在[信息系统](https://en.wikipedia.org/wiki/Information_systems)设计和理论中，**单一真实来源** ( **SSOT** )是结构化信息模型和相关联的[数据模式](https://en.wikipedia.org/wiki/Database_schema)的实践，这样每个数据元素被精确地存储一次。到这个数据元素的任何可能的链接(可能在关系模式的其他区域或者甚至在遥远的[联合数据库](https://en.wikipedia.org/wiki/Federated_database)中)只通过[引用](https://en.wikipedia.org/wiki/Reference_(computer_science))—[维基百科](https://en.wikipedia.org/wiki/Single_source_of_truth)

在英语中，在上下文中，让您的度量依赖于一个表或过程会给您带来两个好处:1)单点故障，但也是修复该故障的单点故障；2)如果度量是错误的，使用该度量的每个人都是同样程度的错误。

我认为我的第一点很容易理解和欣赏。如果某些东西损坏了，就像不可避免的那样，它只能在一个地方损坏，您只需要修复那个地方，就可以获得每个下游流程，并再次使用正确的指标进行报告。但是让我深入到第二点(2)一点，因为没有人喜欢得到错误的数据，但听起来好像我在说这是一件好事。我没有。我是说*每个人都错* *到同样程度*是好事。根据我的经验，可能发生的最糟糕的事情之一是工作管道错误地处理数据；然而，比这更糟糕的是，下游流程和报告要求相同的指标，但却有**不同的**错误答案。当你意识到问题时，你会静静地坐在那里盯着屏幕，深呼吸，然后说“妈的。那可不好”。这就是 SSOT 的切入点。您可以使用不同的数据源，一起转换和争论您的数据，但最终如果您的指标使用一个表、一组表或流程作为其基础，而所有其他流程使用其输出作为自己的基础，您将永远不会得到一个跨管道给出不同错误答案的指标。

难以置信，但这一切都要追溯到数据信任。如果利益相关者没有或失去了对数据的信任，就很难挽回。SSOT 有助于防止这种情况发生，因此对于任何数据工程师来说，在这里花费大量时间都是非常值得的，尤其是那些受托建立依赖数据的文化的人。

## 3.建筑数据增值

一种感激。不是说需要人们欣赏你的工作，而是数据本身，以及他们如何利用它来实现自己的目标。需要在团队成员和整个公司中培养数据欣赏能力，如果没有这一点，那又如何？—态度总是会妨碍人们利用你提供的一切。

> 如果一个数据工程师创建了可发现的、可靠的、值得信赖的数据集市，但最终用户却不在乎，那么这个数据工程师真的成功了吗？

这可能更像是一个公司文化的话题，但是如果给你一些工具来帮助你在你的职位上取得成功，你会使用它们吗？这就是数据增值的用武之地，你的终端用户关心你在做什么，更重要的是他们关心你为什么这么做。您和您的基础架构的存在只有一个原因—直接或间接地提供业务洞察力，您的基础架构必须促进这一点。如果用户不能，不管是自愿的还是通过其他方式，欣赏你苦心提供的那些宽维度表或时间序列指标，你就没有任何意义。句号。

在一家初创公司(或任何处于数据成熟早期阶段的公司)，你作为数据工程师的角色可能意味着你不仅要构建基础设施，还要构建对数据的“欣赏”，在组织内部和整个组织中传播数据。没有有效地做到这一点会导致你整体工作的失败。**建造它，他们将使用它**，**，**在这里并不适用。

## 4.构建数据(驱动)决策

D 数据驱动的决策或这一主题的任何迭代基本上是业务用户在采取行动之前利用数据洞察来制定、验证和/或确认其决策的概念。这些决策可能是实验假设的基础，也可能是对失败的营销活动的解释，或者是投资特定产品功能的原因。关键是，你依靠数据来帮助你做决定，这有助于更有效的过程，并允许你做重要的事情，为你和你的组织带来价值的事情。

虽然许多人喜欢数据驱动决策的概念，并要求更多的数据，但其他人则反对。想要继续做你正在使用的事情是很自然的，我自己也经常这样做，这就是为什么我之前提到我是自上而下的数据文化方法的强烈支持者，原因是这样的——想象你是一个功能团队的高级经理，刚刚在你的惊人产品中部署了一个很棒的新功能。帮我回答这些问题

1.  有多少客户在使用你这个很酷的新功能？
2.  您的功能被使用的频率是多少？
3.  你会开发很酷的 v2 功能吗？

很简单的问题，你可能会在第三季度猜个大大的是，因为你为什么不修复几个 bug 并增强一些已经在生产中的功能呢？但是，如果你的老板以一种自上而下的方式要求你向她提交的任何决定都必须有数据支持，那该怎么办呢？现在，您有了一整套新问题，比如，*“我是否甚至用这个新特性来捕获回答这些问题所需的数据？”*或者*“为什么数据显示很少有客户真正使用该功能，但我的直觉告诉我做得很好？”*。既然 v1 没有数据支持它的成功，那么版本 2 就有点难以证明了。

当您引用数据时，会出现更多的问题和见解，有好有坏，但如果数据驱动的文化不是自上而下的，这些都是不可能的。你要么急于得到数据，要么没有。如果你不是，除非你被轻轻推向正确的方向，否则很容易忽视额外的努力。

尽管你不是那些数据驱动决策的*制定者*，但我们正在讨论的情况是，你是公司中唯一的数据人员，所有与数据相关的事情都落在你的肩上。这可能是**在任何公司构建数据时最难(也是最重要)的角色**部分。

![](img/8665b82996134b9421ff8fa3c7d76ef1.png)

Photo by [Franki Chamaki](https://unsplash.com/@franki?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

## 建立结论

作为一个关于构建数据的故事，你可能已经对一些技术图表、某处的示例气流 DAG 代码块或至少一些伪代码有了印象或预期。但我认为所有这些事情来来去去。要么是行业发生了变化，角色描述发生了变化，要么是技术、流程和技巧发生了变化。此外，已经有很多媒体在谈论如何构建数据基础设施，或者如何在 K8s 中使用 Airflow。

对我来说，在这个故事的背景下，构建数据不仅仅是 Y 公司在启动阶段 z 的技术堆栈 X。在
公司生命的某个阶段，他们需要他们的第一个员工来帮助编写新功能，第一个 IT 人员来帮助供应所有这些新的笔记本电脑，第一个人力资源成员以及他们的第一个数据人员。那个数据人，第一个真正的全职数据人，数据工程师，将不可避免地做更多的事情，而不仅仅是写几个 cron 任务，python 脚本和把一个工具和另一个工具联系起来。为了不失败，这个人将需要建立一个数据基础设施，她将需要在最终用户和她提供的数据之间建立信任，她将需要建立用户对他们拥有的工具和可以帮助他们实现公司目标的数据的欣赏，她将需要在她的同事中建立一个数据驱动的决策思维。作为*数据人员，作为数据工程师，所有这些都包含在她的角色中，所有这些都包含在从零开始在公司创造数据文化中。所有这些都封装在**建筑数据**中。*