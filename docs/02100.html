<html>
<head>
<title>How to Get Twitter Notifications on Currency Exchange Rate: Web Scraping and Automation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何获得关于货币汇率的 Twitter 通知:网络抓取和自动化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-get-twitter-notifications-on-currency-exchange-rate-web-scraping-and-automation-94a7eb240d60?source=collection_archive---------19-----------------------#2019-04-06">https://towardsdatascience.com/how-to-get-twitter-notifications-on-currency-exchange-rate-web-scraping-and-automation-94a7eb240d60?source=collection_archive---------19-----------------------#2019-04-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/801f852bb0668bab4c3d37e05b7eaeae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VL1Jd-KRY5aGLU14qaaJ2g.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Image by Photo Mix from Pixabay</figcaption></figure><p id="a68b" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">随着世界变得更加一体化，我们比以往任何时候都更加紧密地联系在一起。更多的学生出国留学，更多的人环游世界。无论是为了教育还是为了旅游，当我们出国或向外国汇款时，我们不得不考虑汇率。出于这个原因，我创建了一个自动通知系统，当指定货币的汇率下降或上升时，我们可以收到 Twitter 警报。</p><p id="1a13" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在本文中，我将解释我是如何从雅虎财经搜集汇率数据，并通过 Twitter 建立自动通知系统的。我们开始吧！</p></div><div class="ab cl ld le hx lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="im in io ip iq"><h1 id="1563" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated"><strong class="ak"> 1。安装网页抓取所需的软件包</strong></h1><figure class="mi mj mk ml gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="ecd1" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我首先安装了几个必需的包。BeautifulSoup 用于解析 HTML 页面，与时间相关的包用于记录货币兑换的日期和时间。</p></div><div class="ab cl ld le hx lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="im in io ip iq"><h1 id="af7c" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">2.使用 BeautifulSoup 从 Yahoo Finance 中删除汇率数据</h1><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mo"><img src="../Images/ab2305dbc9e8e7a2acb1937c8b5888a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QpW9V5q3Tkg8ltQKpMo_6g.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Structure of Yahoo Finance</figcaption></figure><p id="cc3e" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如上图所示，雅虎财经由“符号”、“名称”、“最后价格”和“变化”组成。对于这篇文章，我只使用了“名称”和“最后价格”。</p><figure class="mi mj mk ml gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="4435" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">使用 BeautifulSoup，我解析了汇率页面。</p><figure class="mi mj mk ml gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="f0b8" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">解析之后，我使用 for 循环语句提取一些信息。因为我不需要完整的数据，所以我在第 40 次观察时开始解析，在第 404 次观察时停止，间隔为 14，并创建了一个只有“名称”和“最后价格”信息的货币数据帧。</p><p id="b8d8" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">由于我对美元/日元汇率感兴趣(1 美元等于多少日元？)，我选择了第 16 次观察，赋给 now_usd_jpy(当前美元/JPY 汇率)。</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/bde87534a73e0c23e689257b7cffedbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*uDh7Z7s9vnwxYs_NiFIv-g.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">dataframe “Currency”</figcaption></figure><figure class="mi mj mk ml gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="dde0" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我从雅虎财经提取的汇率记录在我创建的文本文件“usdyen”中。如果当前汇率与旧汇率不同，则当前汇率会替换旧汇率。</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mq"><img src="../Images/c3c04e70665fd0b56947fc99d85ad573.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KOk_6f2uc6NoW4_P2yLzjA.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Text file where I recorded the current USD/JPY exchange rate</figcaption></figure></div><div class="ab cl ld le hx lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="im in io ip iq"><h1 id="ccd2" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">3.通过 Twitter 建立一个自动通知系统</h1><p id="80d8" class="pw-post-body-paragraph kf kg it kh b ki mr kk kl km ms ko kp kq mt ks kt ku mu kw kx ky mv la lb lc im bi translated">现在是时候通过 Twitter 建立一个自动通知系统了。让我们根据文本文件中记录的汇率向我们的 Twitter 关注者发送汇率通知。</p><figure class="mi mj mk ml gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="a877" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">为了做到这一点，我安装了 TwitterAPI 并请求 Twitter 提供访问令牌(更多详细信息，请参考【https://developer.twitter.com/】en/docs/basics/authentic ation/guides/access-tokens . html)。有了访问令牌，我的程序现在可以用“1 美元兑日元= 111.6(日本时间 05:06:37 04–05–19)”的格式发布美元兑日元的汇率。</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mx"><img src="../Images/d733749aa36a8aa90cf5b402d346f759.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qhxa0wqlNJ47D40XVcwJmQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">USD/JPY exchange rate tweet</figcaption></figure><figure class="mi mj mk ml gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="d942" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如果我们只是在 Twitter 上更新汇率，那就没什么意思了。每当我们想知道汇率时，手动运行程序实际上没有意义。说到这里，我让程序全天候运行。每隔 5 小时(60 秒 x 60 秒 x 5 小时)，我的算法会自动检查当前的货币汇率并更新旧的货币汇率，然后发布到 Twitter 上。由于 Twitter 不允许发布相同的消息，所以我使用 try 和 except block 使其可以接受。</p></div><div class="ab cl ld le hx lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="im in io ip iq"><p id="2fdb" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">上面提到的 web 抓取和自动化算法非常易于使用，并且可以灵活地应用于加密货币和股票价格等其他主题。在下一篇文章中，我想讨论 Rasberry pi——我们如何使用 Raspberry pi 让程序 24/7 运行，因为在我们的计算机或笔记本电脑上整天运行这个 python 脚本不是很实际。</p></div><div class="ab cl ld le hx lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="im in io ip iq"><p id="cc11" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">感谢您的阅读！我希望我的文章是有帮助的，并且容易理解。如果您有任何意见或反馈，请随时在下面留下您的评论。</p><p id="cfb0" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如果你喜欢我做的事情，请不要犹豫，在<a class="ae mw" href="https://github.com/dkewon" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上关注我，在<a class="ae mw" href="https://www.linkedin.com/in/deborah-kewon/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>上与我联系。</p></div></div>    
</body>
</html>