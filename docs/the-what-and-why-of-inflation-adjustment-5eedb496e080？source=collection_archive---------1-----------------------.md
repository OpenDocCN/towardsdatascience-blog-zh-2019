# 如何压缩你的时间序列

> 原文：<https://towardsdatascience.com/the-what-and-why-of-inflation-adjustment-5eedb496e080?source=collection_archive---------1----------------------->

## 我们将看看什么是通货膨胀调整，以及为什么你应该紧缩你的时间序列。在这个过程中，我们将了解**消费者价格指数(CPI)** 以及它是如何计算的。

**通货膨胀调整**或**通货紧缩**是从数据中去除价格通胀影响的过程。只调整以这种方式表示的货币数据是有意义的。这类数据的例子有每周工资、存款利率或西雅图一袋 5 磅蛇果苹果的价格。如果你正在处理一个以货币命名的时间序列，缩小它将会消除它的上下波动的一部分，这是一般通货膨胀压力的结果。

在我们进入通货膨胀调整的“如何”之前，让我们看看通货膨胀调整可能产生的效果。

# 通货膨胀调整的影响

下面的时间序列代表了 1997-2017 年美国所有工薪阶层的平均年薪。数据显示，年同比平均增幅约为 3%。

![](img/1322e1344c29124a1ca1c29830348b98.png)

Source: Wages and salaries by Occupation: Total wage and salary earners (series id: CXU900000LB1203M). U.S. Bureau of Labor Statistics (Image by [Author](https://sachin-date.medium.com/))

当你根据通货膨胀调整这些数据时，图表明显变得起伏不定:

![](img/eb3292bfd31f36704b83b63bfb9e6ced.png)

Wages after adjusting for inflation (Image by [Author](https://sachin-date.medium.com/))

我们做了什么来得到第二张图？我们所做的是采用消费者价格指数，特别是美国劳工统计局发布的*CPI-城市工薪阶层和文职人员:所有项目 1982=100* ，我们将年薪数据除以当年的 CPI 值，然后将结果乘以 100。以 1997 年为例，我们将 43615 美元的工资除以 1997 年的消费物价指数 157.6，再乘以 100，得出经通货膨胀调整的工资(以 1982 年美元计算)为 43617/157.6 * 100 = 27674 美元。然后每年重复这一计算，得到如上所示的第二个图。

这是另一个说明通货膨胀调整效果的图表。

![](img/6effeb9bf65c3fcb478cd3bddc02d9b6.png)

(Image by [Author](https://sachin-date.medium.com/))

图中的蓝线表示通货紧缩前每年工资的百分比变化，橙线表示通货紧缩后“实际工资”的百分比变化，灰线表示每年的通货膨胀。

在很大程度上，经通货膨胀调整的工资的变化与未经调整的工资的变化是一致的。但在与前几年相比通货膨胀率较低的年份(如 2009 年和 2015 年)，经通货膨胀调整的工资大幅上升，而在与前一年相比通货膨胀率大幅上升的年份(如 2000 年、2008 年和 2011 年)，经通货膨胀调整的工资大幅下降。

**现在我们已经看到了几个通胀调整数据的例子，让我们来看看通胀调整是如何工作的具体细节。**

# 通货膨胀调整公式

正如我们所看到的，你可以通过将数据除以适当的消费价格指数，然后将结果乘以 100 来调整通货膨胀。

![](img/811e5edf05e8746969d03a12af01b5da.png)

Inflation Adjusted Value (Image by [Author](https://sachin-date.medium.com/))

这是一个重要的公式。让我们把它标为等式 I。我们很快会再次用到它。

使用此公式时，您应该知道两件事:

1.  在这个公式的分母中，使用正确的价格指数很重要——通常有几个价格指数可供选择，并且
2.  知道如何解释通货膨胀调整值是很重要的。你如何解释这个值取决于你有什么数据和你用什么价格指数来缩小它。

让我们详细检查每一点。

# 我应该使用哪个通货膨胀指数？

通常有几种可用的 CPI，您应该针对您的数据类别使用正确的 CPI。例如，美国劳工统计局(BLS)发布了大量的价格指数。以下是一组示例:

![](img/9452d9e2eac1c8a7027eb4c208ffc0a3.png)

Data source: U.S. Bureau of Labor Statistics (Image by [Author](https://sachin-date.medium.com/))

您使用哪个指数取决于您希望压缩什么数据以及您希望测量数据的什么属性。让我用两个例子来说明这一点:

**示例 1:** 假设您有一个美国所有城市地区苹果年平均价格的时间序列。如果你希望得到美国城市消费者经历的苹果价格的核心增长，*在扣除城市消费者经历的整体通货膨胀*的影响后，你应该使用***CPI-所有城市消费者:美国所有商品，1982–84 = 100***或***CPI-所有城市消费者:美国所有商品，1967=100*** 来降低你的苹果价格如果你错误地使用非常流行的指数***CPI——城市工薪阶层和文职人员*** 你会得到不正确的结果，因为这个指数只衡量城市工薪阶层经历的物价上涨，而不是所有的城市消费者。

**例子 2:** 假设你希望在抵消城市整体食品**通货膨胀**的影响后，得出苹果价格的核心增长，你应该使用指数***CPI-所有城市消费者:美国城市平均食品和饮料，所有城市消费者，不经季节调整*** 来压缩你的数据。这将会给你一个衡量苹果相对于其他食物变得更贵或更便宜的尺度，而且只对城市消费者而言。稍后我将更详细地描述 CPI 的这种特殊用途。

现在，我们已经了解了使用正确指数的重要性以及如何使用它来获得调整值，让我们更深入地了解调整值告诉我们什么。为此，我们首先需要理解 CPI 的概念。

# 如何解读通货膨胀调整值？

要知道如何解释紧缩值，必须了解什么是消费物价指数，以及它是如何计算的。CPI 的技术定义听起来很无聊，但事实就是这样:

> 消费者价格指数**衡量家庭消费的一篮子商品和服务的价格变化。**

要真正理解什么是 CPI，我们必须知道如何计算它，这个计算最好用一个例子来说明。因此，让我们启动一个迷你项目来创建一个闪亮的新指数。我们称之为**高谭市的虚拟 CPI 所有项目，不经季节调整。**

我们的第一个任务是计算一个在哥谭市的虚构家庭的年支出。

![](img/03d48db78849ecb504b21917366b580c.png)

Image credit: Pexels from Pixabay

我们还将做一个相当大胆的假设:我们将假设我们的虚拟家庭的消费完美地代表了哥谭市所有家庭的消费。有了这个假设，让我们开始计算家庭开支。

下表包含连续两年测量的家庭年度支出在 8 个类别中的细分:

![](img/2cef9184b4287a54e1a6c956c7ed46eb.png)

The market basket of our fictional household (Image by [Author](https://sachin-date.medium.com/))

在这个例子中，**市场篮子**是我们虚构的家庭每年消费的商品和服务的集合。对于哥谭市的虚构家庭，市场篮子的价格在 2018 年是 42000 美元，在 2019 年是 43260 美元，比 2018 年增长了 3%，我们将归因于通货膨胀。

请注意，购物篮分布在八个类别中。**这些也是美国劳工标准局在计算美国各种 CPI 时使用的一些类别。**

现在，让我们回忆一下，我们想要得出的是一个*指数*，而不是一篮子货币的绝对美元成本。一个指数需要一个基础，所有的未来值都可以很容易地与之进行比较。所以我们会任意假设 2018 年是我们的**基准年**，我们会把 2018 年的指数值设为 100 点。让我们把它重新命名为:

**哥谭市虚构的 CPI 所有项目，不经季节调整， *2018=100*** 。

我们现在可以计算 2019 年 **CPI 虚构**的值如下:

![](img/081e10dde79c9d0587cf61132e32f0a2.png)

(Image by [Author](https://sachin-date.medium.com/))

因此，2019 年的指数值= 43260 美元/42000 美元* 100 = 103。

> CPI 值 103 告诉我们的是，对于哥谭市的所有家庭来说，市场篮子在 2019 年变得更贵了 103/100 = 1.03 倍。

总的来说:

![](img/02e35777e8849b13064dea837136e887.png)

A simplified version of the formula for calculating the value of the index (Image by [Author](https://sachin-date.medium.com/))

> 对于时间段(或简称为期间)，我们通常是指特定的一天、一周、一个月、一个季度或一年。

假设在 2020 年至 2023 年的连续 4 年中测量市场篮子的价格，发现 2020 年为
44400 美元，2021 年为
46200 美元，2022 年为
43800 美元，2023 年为
45240 美元。

那么，在这些年里，我们的虚构指数取值如下:

在 2020 年，指数值= 44400 美元/42000 美元* 100 = 105.7143

在 2021 年，指数值= 46200 美元/42000 美元* 100 = 110

在 2022 年，指数值= 43800 美元/42000 美元* 100 = 104.2857

在 2023 年，指数值= 45240 美元/42000 美元* 100 = 107.7143

以下是结果值表:

![](img/cfc0d58771ee2961bdc5565012c180be.png)

CPI Fictitious in Gotham City — All Items, not seasonally adjusted, 2018=100 (Image by [Author](https://sachin-date.medium.com/))

一旦有了 CPI 数据，计算逐年通胀就非常容易了。公式如下:

![](img/162bff6bce6134be1b8d39485091356d.png)

Formula for rate of inflation (Image by [Author](https://sachin-date.medium.com/))

使用这个公式，我们可以看到哥谭市家庭在 2019 年至 2023 年经历了以下通货膨胀。

![](img/904b8dab793e791c3f886bfd38cb62bc.png)

Percentage Inflation Year over Year in Gotham City (Image by [Author](https://sachin-date.medium.com/))

现在让我们看看通货膨胀对购物篮中的一件商品的影响——比如一碗意大利面汤。

![](img/8eccd76e2d74047dc9ef6a69e216d939.png)

在 2018 年至 2023 年期间，假设 mulligatawny 汤呈现以下价格趋势:

![](img/78119b4c91c62e4e2650ae1e8c0bbd63.png)

Price of soup in Gotham from 2018 through 2023 (Image by [Author](https://sachin-date.medium.com/))

很明显，汤的价格上涨是因为那些年哥谭市经济的普遍通胀压力。我们看到哥谭市在 2019 年经历了 3%的整体通胀。我们将假设 mulligatawny 汤的成本在 2019 年也必须至少增加这么多。

设$X 为 2018 年汤的成本。如果在 3%的通胀率后，2019 年的成本变为 3.26 美元，那么 X * 103/100 = 3.26 美元。因此，2018 年的汤的成本应该是:

$3.26*100/103 = $3.16505

因此，3.16505 美元是汤*在 2018 年应该拥有的成本*，因为在价格上涨 3%后，它在 2019 年的成本为 3.26 美元。对 3.16505 美元价值的另一种解释是，这是 2019 年的汤的价格，*但在 2018 年是美元。*

我们从表中知道，3.08 美元是 2018 年以 2018 年美元计算的汤的价格。所以现在我们可以对两个成本进行比较:3.08 美元和 3.16505 美元，因为这两个成本都是以 2018 年的美元表示的。

我们现在可以计算出 2019 年哥谭市*汤成本的*内在通胀*对 2018 年至 2019 年*的整体通胀进行贴现后如下:

![](img/857d3311866c3ada933a963340f439bc.png)

Inflation in price of soup after adjusting for overall inflation from 2018 to 2019 (Image by [Author](https://sachin-date.medium.com/))

同样，2020 年的汤的价格可以通过除以哥谭市 2018 年至 2020 年经历的通货膨胀量来调整为 2018 年的美元。

为了计算这个膨胀量，回忆一下等式(III):膨胀的公式。我们将在下面复制它:

![](img/162bff6bce6134be1b8d39485091356d.png)

(Image by [Author](https://sachin-date.medium.com/))

我们可以重新使用这个公式，找出当前时间段与基准年(2018 年)相比的通货膨胀率。让我们算一算:

![](img/ab8b059ff60d430aaed281aa8408b237.png)

Calculating the cost of soup in 2018 dollars (Image by [Author](https://sachin-date.medium.com/))

还记得我们说过我们会重温方程(I)吗？又来了:

![](img/ee57ffd4c5be3f03cce3da300f112c7c.png)

(Image by [Author](https://sachin-date.medium.com/))

我们可以通过将等式(IV)的分母表示为如下，用等式(I)来表示等式(IV):

![](img/81870b02ca4b73dde5cdc684dd486a2c.png)

(Image by [Author](https://sachin-date.medium.com/))

现在回到等式 I，2020 年的 CPI 是指数值，2018 年的 CPI 总是 100，因为它是基年。因此，

![](img/24edc4eae2d259697b53fc5a9c7edf99.png)

(Image by [Author](https://sachin-date.medium.com/))

这和我们之前用不同但等价的公式得到的一样。

无论如何，我们现在已经将 2019 年和 2020 年的汤的成本调整到相同的基数，即 2018 年的美元。因此，像我们之前所做的一样，**让我们在扣除整体价格通胀的影响后，比较从 2019 年到 2020 年汤类价格的实际百分比变化**。价格的“核心”变化是:

![](img/f5c6bdca813b59bef2f4000de983bc47.png)

(Image by [Author](https://sachin-date.medium.com/))

我们现在可以陈述计算一个项目的价格相对于感兴趣的 CPI 的真实(内在)变化的一般公式:

![](img/1447944f5c1f85d830036856e2ea86ab.png)

Formula for intrinsic inflation in an item (Image by [Author](https://sachin-date.medium.com/))

下表显示了 2019 年至 2023 年哥谭市在调整整体通胀之前和之后的汤价通胀。

![](img/86fcac39a9ccf41de598d3d20fb5f018.png)

(Image by [Author](https://sachin-date.medium.com/))

这是一剂有益的数学良药。让我们休息一下，喝点汤，然后再继续工作。

![](img/30a1f358d9b1db757a313a523b126687.png)

Image credit: [GeoTrinity](https://commons.wikimedia.org/wiki/User:GeoTrinity) CC BY-SA 3.0

我们虚构的 CPI 例子对我们很有帮助。到目前为止，它向我们展示了如何计算指数，如何计算指数中的通货膨胀，如何解释通货膨胀调整值，以及如何根据适当的指数计算一个项目价格的内在增长。

但是现在，冒着降低我们所有蝙蝠侠粉丝的兴趣(和自尊心)的风险，我们必须回到现实。

## **现实的快速剂量**

每年，美国 BLS(或其他国家的相应政府机构)都会采访成千上万不同金融阶层(低、中、高收入)和不同职业的家庭，以收集他们的消费习惯数据。这项工作的结果是计算了几十个更小、更集中的指数。然后，使用一个权重系统将这些指数汇总起来，形成几个顶级消费物价指数。精确的计算可能会很复杂，但概念很简单。你想找出“普通”家庭在商品和服务上的花费，然后将这个数字指数化到某个任意的基准年。然后每个月、每个季度、每年重复这一计算，以了解与前一时期相比，生活成本变得贵了(或便宜了)多少。

## 如果您正在训练货币计价数据的模型…

如果你正在训练一个模型，*如果你不紧缩你的货币计价数据*，你的训练不会失败。与此同时，你应该考虑缩减它，因为这样做将从你的数据中移除那部分“信号”,那是由于普遍的通货膨胀压力。除了通货紧缩，您还应该考虑一个或多个其他转换，如对数转换(使趋势呈线性)、季节调整和差异。所有这些操作都将从数据中删除信号的相应部分。剩下的就是你的训练算法现在可以关注的残差趋势。此外，当然还会有噪声——你的算法必须学会忽略它！

快乐放气！

*我写关于数据科学的主题，特别关注时间序列分析和预测。*

*如果你喜欢这篇文章，请在*[***Sachin Date***](https://timeseriesreasoning.medium.com)**关注我，获取关于时间序列分析、建模和预测的技巧、操作方法和编程建议。**