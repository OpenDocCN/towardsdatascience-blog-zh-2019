<html>
<head>
<title>Deploying your first Deep Learning Model: MNIST in production environment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">éƒ¨ç½²æ‚¨çš„ç¬¬ä¸€ä¸ªæ·±åº¦å­¦ä¹ æ¨¡å‹:ç”Ÿäº§ç¯å¢ƒä¸­çš„ MNIST</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://towardsdatascience.com/deploying-your-first-deep-learning-model-mnist-in-production-environment-510bfdc4808d?source=collection_archive---------19-----------------------#2019-10-19">https://towardsdatascience.com/deploying-your-first-deep-learning-model-mnist-in-production-environment-510bfdc4808d?source=collection_archive---------19-----------------------#2019-10-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="2580" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">è®©ä½ çš„æ·±åº¦å­¦ä¹ æ¨¡å‹é£èµ·æ¥</h2><div class=""/><p id="68c1" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">å¦‚ä½•åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²æ‚¨çš„ MNIST æ¨¡å‹</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi kx"><img src="../Images/d3abc43c4a111768338326a0be13b8c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qofNH7sKIVji5UF-"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">Photo by <a class="ae ln" href="https://unsplash.com/@ravi_roshan_inc?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ravi Roshan</a> on <a class="ae ln" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="75d9" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated"><a class="ae ln" href="http://yann.lecun.com/exdb/mnist/" rel="noopener ugc nofollow" target="_blank"><strong class="kb jd"/></a>æ•°æ®é›†å¯¹äºåƒæˆ‘ä»¬è¿™æ ·çš„å¤§å¤šæ•° ML çˆ±å¥½è€…æ¥è¯´æ˜¯ä¸€ä¸ª hello world æ•°æ®é›†ã€‚åœ¨æŸä¸ªæ—¶å€™ï¼Œæ¯ä¸ªå·²ç»å¼€å§‹è¿™ä¸ªé¢†åŸŸçš„æ—…ç¨‹æˆ–æ„¿æ„å¼€å§‹çš„äººéƒ½ä¼šé‡åˆ°è¿™ä¸ªæ•°æ®é›†ï¼Œå¹¶è‚¯å®šä¼šå¾—åˆ°å®ƒã€‚</p><blockquote class="lo lp lq"><p id="8fe7" class="jz ka lr kb b kc kd ke kf kg kh ki kj ls kl km kn lt kp kq kr lu kt ku kv kw im bi translated">å¯¹äºé‚£äº›å¸Œæœ›åœ¨çœŸå®ä¸–ç•Œæ•°æ®ä¸Šå°è¯•å­¦ä¹ æŠ€æœ¯å’Œæ¨¡å¼è¯†åˆ«æ–¹æ³•ï¼ŒåŒæ—¶èŠ±è´¹æœ€å°‘ç²¾åŠ›è¿›è¡Œé¢„å¤„ç†å’Œæ ¼å¼åŒ–çš„äººæ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ•°æ®é›†ã€‚â€”â€”æ‰¬Â·å‹’æ˜†</p></blockquote><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/5bf3081c5bf4cef0407d058931405075.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/0*vMa8mjiz7BbsCXQ3.png"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk"><a class="ae ln" href="http://yann.lecun.com/exdb/mnist/" rel="noopener ugc nofollow" target="_blank">MNIST</a></figcaption></figure><h1 id="4a1a" class="lw lx it bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">æˆ‘ä»¬åœ¨å»ºé€ ä»€ä¹ˆï¼Ÿ</h1><p id="f0da" class="pw-post-body-paragraph jz ka it kb b kc mu ke kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw im bi translated">åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†è®²è¿°æ¯ä¸ªå®Œæˆ MNIST çš„äººå¦‚ä½•åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ Django å’Œ Heroku å°†è®­ç»ƒå¥½çš„æ¨¡å‹éƒ¨ç½²ä¸ºæ¼‚äº®çš„ web åº”ç”¨ç¨‹åºã€‚</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/165abe47abd820cfe560b86c5674e57d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*O7dIAVNyGA-J4U3fcQLZNg.gif"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">MNIST Web App Demo</figcaption></figure><h2 id="4b65" class="na lx it bd ly nb nc dn mc nd ne dp mg kk nf ng mk ko nh ni mo ks nj nk ms iz bi translated">å…ˆå†³æ¡ä»¶</h2><p id="c0b7" class="pw-post-body-paragraph jz ka it kb b kc mu ke kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw im bi translated">æ‚¨åº”è¯¥å…·å¤‡ä»¥ä¸‹åŸºæœ¬çŸ¥è¯†:</p><ol class=""><li id="fc53" class="nl nm it kb b kc kd kg kh kk nn ko no ks np kw nq nr ns nt bi translated">Python ç¼–ç¨‹è¯­è¨€</li><li id="b51b" class="nl nm it kb b kc nu kg nv kk nw ko nx ks ny kw nq nr ns nt bi translated"><a class="ae ln" href="https://www.djangoproject.com/" rel="noopener ugc nofollow" target="_blank"> Django </a> â€” Web åº”ç”¨æ¡†æ¶</li><li id="0381" class="nl nm it kb b kc nu kg nv kk nw ko nx ks ny kw nq nr ns nt bi translated"><a class="ae ln" href="https://dashboard.heroku.com/" rel="noopener ugc nofollow" target="_blank">Heroku</a>â€”â€”å¹³å°å³æœåŠ¡(<strong class="kb jd">å¯é€‰</strong>:ä½ å°†åœ¨è¿™ç¯‡æ–‡ç« ä¸­å­¦ä¹ å¦‚ä½•ä½¿ç”¨å®ƒ)</li></ol><p id="fe55" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">å¹¶ä¸”ä½ åº”è¯¥æœ‰ä¸€ä¸ªåŸºäº<strong class="kb jd"> Keras </strong>çš„<strong class="kb jd"> MNIST </strong>çš„æ¨¡å‹æ–‡ä»¶ï¼›<strong class="kb jd"> </strong>æˆ–è€…ä½ å¯ä»¥é©¬ä¸Šå¼€å§‹ç”¨<strong class="kb jd"/><a class="ae ln" href="https://colab.research.google.com/drive/16wrpQXdtYLjp2Kvtl4uxCyX4oVmgmHvo" rel="noopener ugc nofollow" target="_blank"><strong class="kb jd"/></a>çš„å°æœ¬å­æ•´ç†æ–‡ä»¶ã€‚</p></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><h1 id="cbcc" class="lw lx it bd ly lz og mb mc md oh mf mg mh oi mj mk ml oj mn mo mp ok mr ms mt bi translated">å‡†å¤‡å¥½æ‚¨çš„åç«¯</h1><p id="b0c0" class="pw-post-body-paragraph jz ka it kb b kc mu ke kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw im bi translated">é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ CMD æˆ– bash ç»ˆç«¯å®‰è£… Django å¦‚æœä½ è¿˜æ²¡æœ‰è¿™æ ·åšã€‚</p><blockquote class="lo lp lq"><p id="6b4c" class="jz ka lr kb b kc kd ke kf kg kh ki kj ls kl km kn lt kp kq kr lu kt ku kv kw im bi translated">å¦‚æœä½ ä»¥å‰æ²¡æœ‰ Django çš„ç»éªŒï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šå…è´¹çš„èµ„æºã€‚è¯·è€ƒè™‘çœ‹çœ‹ã€‚å¯¹äºä½¿ç”¨ Python æ„å»º Web åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„æ¡†æ¶ã€‚æ²¡ä»€ä¹ˆå¯å¤±å»çš„ã€‚</p></blockquote><h2 id="da7b" class="na lx it bd ly nb nc dn mc nd ne dp mg kk nf ng mk ko nh ni mo ks nj nk ms iz bi translated">å¯åŠ¨é¡¹ç›®</h2><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/709d8deef16b1702303c7cc9828c6952.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*j6QXFviQla8-Cjs-f07W0A.gif"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk"><a class="ae ln" href="https://media.giphy.com/media/Y3MbPtRn74uR3Ziq4P/giphy.gif" rel="noopener ugc nofollow" target="_blank">SOURCE</a></figcaption></figure><pre class="ky kz la lb gt om on oo op aw oq bi"><span id="fed0" class="na lx it on b gy or os l ot ou">pip install django</span></pre><p id="b05d" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">è¿™å°†ä¸ºæ‚¨å®‰è£… Djangoï¼Œæ‚¨å°†å¯ä»¥è®¿é—® Django CLI æ¥åˆ›å»ºæ‚¨çš„é¡¹ç›®æ–‡ä»¶å¤¹ã€‚</p><pre class="ky kz la lb gt om on oo op aw oq bi"><span id="1597" class="na lx it on b gy or os l ot ou">django-admin startproject digitrecognizer</span></pre><p id="adfa" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">æˆ‘å°†æŠŠæˆ‘çš„é¡¹ç›®å‘½åä¸º<strong class="kb jd"> digitrecognizer </strong>ä½ å¯ä»¥éšæ„å‘½åã€‚ä¸€æ—¦ä½ è¿™æ ·åšäº†ï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸€äº›æ–‡ä»¶ã€‚</p><p id="85f6" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">è®©æˆ‘ä»¬ä½¿ç”¨<strong class="kb jd"> mange.py </strong> cli åœ¨è¯¥æ–‡ä»¶å¤¹ä¸­åˆ›å»ºæˆ‘ä»¬çš„æ–°åº”ç”¨ç¨‹åº<strong class="kb jd"> main </strong>ã€‚</p><pre class="ky kz la lb gt om on oo op aw oq bi"><span id="20b1" class="na lx it on b gy or os l ot ou">python manage.py startapp main</span></pre><p id="f827" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">è¿™å°†ä¸ºæ‚¨åˆ›å»ºä¸€ä¸ªåä¸º<strong class="kb jd"> main </strong>çš„æ–°åº”ç”¨ç¨‹åºã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨<strong class="kb jd"> views.py </strong>æ–‡ä»¶ä¸­ç¼–å†™æˆ‘ä»¬çš„ä¸»è¦ä»£ç äº†ã€‚</p><h2 id="55eb" class="na lx it bd ly nb nc dn mc nd ne dp mg kk nf ng mk ko nh ni mo ks nj nk ms iz bi translated">ä»£ç éƒ¨åˆ†</h2><p id="cfa1" class="pw-post-body-paragraph jz ka it kb b kc mu ke kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw im bi translated">è®©æˆ‘ä»¬åœ¨<strong class="kb jd"> views.py </strong>æ–‡ä»¶ä¸­ç¼–å†™ä¸€äº›ä»£ç :</p><pre class="ky kz la lb gt om on oo op aw oq bi"><span id="fe87" class="na lx it on b gy or os l ot ou">## Views.py</span><span id="1eb5" class="na lx it on b gy ov os l ot ou">from django.shortcuts import render<br/>from scipy.misc.pilutil import imread, imresize<br/>import numpy as np<br/>import re<br/>import sys<br/>import os<br/>sys.path.append(os.path.abspath("./model"))<br/>from .utils import *<br/>from django.http import JsonResponse<br/>from django.views.decorators.csrf import csrf_exempt<br/>global model, graph<br/>model, graph = init()<br/>import base64</span><span id="67b2" class="na lx it on b gy ov os l ot ou">OUTPUT = os.path.join(os.path.dirname(__file__), 'output.png')</span><span id="aac1" class="na lx it on b gy ov os l ot ou">from PIL import Image<br/>from io import BytesIO</span><span id="9da5" class="na lx it on b gy ov os l ot ou">def getI420FromBase64(codec):<br/>    base64_data = re.sub('^data:image/.+;base64,', '', codec)<br/>    byte_data = base64.b64decode(base64_data)<br/>    image_data = BytesIO(byte_data)<br/>    img = Image.open(image_data)<br/>    img.save(OUTPUT)</span><span id="0e01" class="na lx it on b gy ov os l ot ou">def convertImage(imgData):<br/>    getI420FromBase64(imgData)</span><span id="fd10" class="na lx it on b gy ov os l ot ou"><a class="ae ln" href="http://twitter.com/csrf_exempt" rel="noopener ugc nofollow" target="_blank">@csrf_exempt</a><br/>def predict(request):</span><span id="ca22" class="na lx it on b gy ov os l ot ou">imgData = request.POST.get('img')</span><span id="9dd0" class="na lx it on b gy ov os l ot ou">convertImage(imgData)<br/>    x = imread(OUTPUT, mode='L')<br/>    x = np.invert(x)<br/>    x = imresize(x, (28, 28))<br/>    x = x.reshape(1, 28, 28, 1)<br/>    with graph.as_default():<br/>        out = model.predict(x)<br/>        print(out)<br/>        print(np.argmax(out, axis=1))<br/>        response = np.array_str(np.argmax(out, axis=1))<br/>        return JsonResponse({"output": response})</span></pre><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/d527f558f9ea94313358490a02f0ddec.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/0*n3TU1qHP10F32Mzs"/></div></figure><p id="ebc3" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">çœ‹èµ·æ¥å¾ˆå¤šï¼Œå…¶å®ä¸æ˜¯ï¼ğŸ˜‚ç›¸ä¿¡æˆ‘ã€‚</p></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><h1 id="7aff" class="lw lx it bd ly lz og mb mc md oh mf mg mh oi mj mk ml oj mn mo mp ok mr ms mt bi translated">æˆ‘ä»¬æ¥åˆ†è§£ä¸€ä¸‹</h1><p id="6e6d" class="pw-post-body-paragraph jz ka it kb b kc mu ke kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw im bi translated">åœ¨ä»£ç çš„æœ€å¼€å§‹ï¼Œæˆ‘ä»¬å¯¼å…¥æ¯ä¸ªéœ€è¦çš„åº“å’Œæ¨¡å—ã€‚</p><h2 id="d053" class="na lx it bd ly nb nc dn mc nd ne dp mg kk nf ng mk ko nh ni mo ks nj nk ms iz bi translated">è¿›å£</h2><p id="0264" class="pw-post-body-paragraph jz ka it kb b kc mu ke kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw im bi translated">æ¯ä¸€ä¸ªå¯¼å…¥éƒ½æ˜¯ä¸è¨€è‡ªæ˜çš„ï¼Œæˆ‘ä¹Ÿè¯„è®ºäº†é‡è¦çš„éƒ¨åˆ†ï¼Œè€ƒè™‘çœ‹çœ‹å®ƒã€‚</p><pre class="ky kz la lb gt om on oo op aw oq bi"><span id="a9e0" class="na lx it on b gy or os l ot ou">from django.shortcuts import render<br/>from scipy.misc.pilutil import imread, imresize<br/>import numpy as np<br/>import re<br/>import sys</span><span id="ef29" class="na lx it on b gy ov os l ot ou">## Apending MNIST model path<br/>import os<br/>sys.path.append(os.path.abspath("./model"))</span><span id="e84d" class="na lx it on b gy ov os l ot ou">## custom utils file create for writing some helper func<br/>from .utils import *</span><span id="f8e0" class="na lx it on b gy ov os l ot ou">from django.http import JsonResponse<br/>from django.views.decorators.csrf import csrf_exempt</span><span id="a6b4" class="na lx it on b gy ov os l ot ou">## Declaring global variable<br/>global model, graph</span><span id="9089" class="na lx it on b gy ov os l ot ou">## initializing MNIST model file (It comes from utils.py file)<br/>model, graph = init()</span><span id="a415" class="na lx it on b gy ov os l ot ou">import base64<br/>from PIL import Image<br/>from io import BytesIO</span><span id="25b4" class="na lx it on b gy ov os l ot ou">## Declaring output path to save our image</span><span id="22d9" class="na lx it on b gy ov os l ot ou">OUTPUT = os.path.join(os.path.dirname(__file__), 'output.png')</span></pre><h2 id="bcfa" class="na lx it bd ly nb nc dn mc nd ne dp mg kk nf ng mk ko nh ni mo ks nj nk ms iz bi translated">ä»€ä¹ˆæ˜¯ utils.py æ–‡ä»¶ï¼Ÿ</h2><p id="28a0" class="pw-post-body-paragraph jz ka it kb b kc mu ke kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw im bi translated">å¯¼å…¥æ‰€éœ€çš„åº“ä¹‹åï¼Œè®©æˆ‘ä»¬ç¼–å†™ä¸€äº›åŠ©æ‰‹å‡½æ•°æ¥å¤„ç†ä¸€ä¸ª<strong class="kb jd"> utils.py </strong>æ–‡ä»¶ä¸­çš„ MNIST æ¨¡å‹ã€‚</p><pre class="ky kz la lb gt om on oo op aw oq bi"><span id="204b" class="na lx it on b gy or os l ot ou">## utils.py</span><span id="5532" class="na lx it on b gy ov os l ot ou">from keras.models import model_from_json<br/>from scipy.misc.pilutil import imread, imresize, imshow<br/>import tensorflow as tf<br/>import os</span><span id="b9c5" class="na lx it on b gy ov os l ot ou">JSONpath = os.path.join(os.path.dirname(__file__), 'models', 'model.json')<br/>MODELpath = os.path.join(os.path.dirname(__file__), 'models', 'mnist.h5')</span><span id="ea7b" class="na lx it on b gy ov os l ot ou">def init():<br/>    json_file = open(JSONpath, 'r')<br/>    loaded_model_json = json_file.read()<br/>    json_file.close()<br/>    loaded_model = model_from_json(loaded_model_json)<br/>    loaded_model.load_weights(MODELpath)<br/>    print("Loaded Model from disk")<br/>    loaded_model.compile(loss='categorical_crossentropy',<br/>                         optimizer='adam', metrics=['accuracy'])</span><span id="aecb" class="na lx it on b gy ov os l ot ou">    graph = tf.get_default_graph()</span><span id="563f" class="na lx it on b gy ov os l ot ou">    return loaded_model, graph</span></pre><p id="37a1" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">è¿™ä¸ªæ–‡ä»¶åŒ…å«äº†<strong class="kb jd"> init </strong>å‡½æ•°ï¼Œå®ƒåŸºæœ¬ä¸Šåˆå§‹åŒ–äº†æˆ‘ä»¬ä½¿ç”¨<strong class="kb jd"> Keras </strong>ä¿å­˜çš„<strong class="kb jd"> MNIST </strong>æ¨¡å‹æ–‡ä»¶ã€‚å®ƒæŠ“å–æˆ–æ¨¡å‹æ–‡ä»¶åŠ è½½å®ƒä»¬ï¼Œå¹¶ä½¿ç”¨<strong class="kb jd"> adam </strong> optimizer ç¼–è¯‘å®ƒä»¬ï¼Œä½¿å®ƒä»¬ä¸ºé¢„æµ‹åšå¥½å‡†å¤‡ã€‚</p><p id="b12f" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨<strong class="kb jd">åˆ†ç±»äº¤å‰ç†µ</strong>ä½œä¸ºæˆ‘ä»¬çš„æŸå¤±å‡½æ•°ï¼Œ<strong class="kb jd"> adam </strong>ä½œä¸ºæˆ‘ä»¬çš„ä¼˜åŒ–å™¨ï¼Œè€Œ<strong class="kb jd">å‡†ç¡®æ€§</strong>ä½œä¸ºæˆ‘ä»¬çš„æ€§èƒ½æµ‹é‡æŒ‡æ ‡ã€‚</p><p id="0f0a" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">ä½ å¯ä»¥ä»<a class="ae ln" href="https://machinelearningmastery.com/save-load-keras-deep-learning-models/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb jd">è¿™é‡Œ</strong> </a>å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Keras ä¿å­˜æ¨¡å‹ã€‚</p><h2 id="889a" class="na lx it bd ly nb nc dn mc nd ne dp mg kk nf ng mk ko nh ni mo ks nj nk ms iz bi translated">ç»§ç»­æŸ¥çœ‹. py</h2><p id="78fd" class="pw-post-body-paragraph jz ka it kb b kc mu ke kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw im bi translated">è¿™é‡Œæˆ‘ä»¬æœ‰å¦ä¸€ä¸ªå¸®åŠ©å‡½æ•°æ¥å¸®åŠ©æˆ‘ä»¬è½¬æ¢æˆ‘ä»¬çš„<strong class="kb jd"> BASE64 </strong>å›¾åƒæ–‡ä»¶ï¼›å®ƒæ˜¯ä»å®¢æˆ·ç«¯æŠ“å–åˆ°ä¸€ä¸ª<strong class="kb jd"> PNG </strong>æ–‡ä»¶ï¼›å¹¶ä¿å­˜ä¸º<strong class="kb jd">è¾“å‡º</strong>å˜é‡ä¸­çš„ä»»ä½•å†…å®¹ï¼›å³åœ¨å½“å‰ç›®å½•ä¸‹ä¿å­˜ä¸º output.png æ–‡ä»¶ã€‚</p><pre class="ky kz la lb gt om on oo op aw oq bi"><span id="2ba5" class="na lx it on b gy or os l ot ou">def getI420FromBase64(codec):<br/>    base64_data = re.sub('^data:image/.+;base64,', '', codec)<br/>    byte_data = base64.b64decode(base64_data)<br/>    image_data = BytesIO(byte_data)<br/>    img = Image.open(image_data)<br/>    img.save(OUTPUT)</span><span id="d670" class="na lx it on b gy ov os l ot ou">def convertImage(imgData):<br/>    getI420FromBase64(imgData)</span></pre><h2 id="e91f" class="na lx it bd ly nb nc dn mc nd ne dp mg kk nf ng mk ko nh ni mo ks nj nk ms iz bi translated">ç¼–å†™æˆ‘ä»¬çš„ API</h2><p id="5cf9" class="pw-post-body-paragraph jz ka it kb b kc mu ke kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw im bi translated">ç°åœ¨è®©æˆ‘ä»¬æŠŠä¸»è¦çš„ API å†™åˆ°:</p><ol class=""><li id="d427" class="nl nm it kb b kc kd kg kh kk nn ko no ks np kw nq nr ns nt bi translated">è·å–å®¢æˆ·ç«¯æäº¤çš„ base64 å›¾åƒæ–‡ä»¶</li><li id="7684" class="nl nm it kb b kc nu kg nv kk nw ko nx ks ny kw nq nr ns nt bi translated">å°†å…¶è½¬æ¢æˆ png æ–‡ä»¶</li><li id="fee8" class="nl nm it kb b kc nu kg nv kk nw ko nx ks ny kw nq nr ns nt bi translated">å¤„ç†å®ƒä»¥é€‚åº”æˆ‘ä»¬çš„è®­ç»ƒæ¨¡å‹æ–‡ä»¶</li><li id="7a40" class="nl nm it kb b kc nu kg nv kk nw ko nx ks ny kw nq nr ns nt bi translated">ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰çš„å¸®åŠ©å‡½æ•°é¢„æµ‹å›¾åƒï¼Œå¹¶è·å¾—ç›¸åº”çš„æ€§èƒ½æŒ‡æ ‡</li><li id="cd8a" class="nl nm it kb b kc nu kg nv kk nw ko nx ks ny kw nq nr ns nt bi translated">å°†å…¶ä½œä¸º JSON å“åº”è¿”å›</li></ol><pre class="ky kz la lb gt om on oo op aw oq bi"><span id="2012" class="na lx it on b gy or os l ot ou"><a class="ae ln" href="http://twitter.com/csrf_exempt" rel="noopener ugc nofollow" target="_blank">@csrf_exempt</a><br/>def predict(request):</span><span id="da02" class="na lx it on b gy ov os l ot ou">imgData = request.POST.get('img')</span><span id="222c" class="na lx it on b gy ov os l ot ou">convertImage(imgData)<br/>    x = imread(OUTPUT, mode='L')<br/>    x = np.invert(x)<br/>    x = imresize(x, (28, 28))<br/>    x = x.reshape(1, 28, 28, 1)<br/>    with graph.as_default():<br/>        out = model.predict(x)<br/>        print(out)<br/>        print(np.argmax(out, axis=1))<br/>        response = np.array_str(np.argmax(out, axis=1))<br/>        return JsonResponse({"output": response})</span></pre><p id="2035" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">å®ƒä½¿ç”¨<strong class="kb jd"> csrf_exempt </strong> decoratorï¼Œå› ä¸º Django å¯¹å®‰å…¨æ€§éå¸¸ä¸¥æ ¼ã€‚é€šè¿‡ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬åªæ˜¯ç¦ç”¨ CSRF éªŒè¯ã€‚</p><p id="aa49" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†åº”ç”¨ç¨‹åºåç«¯ä»£ç çš„ç¼–å†™ï¼Œå¯ä»¥å¯¹ç»™å®šå›¾åƒçš„æ ‡ç­¾è¿›è¡Œåˆ†ç±»ã€‚</p><h2 id="6ccd" class="na lx it bd ly nb nc dn mc nd ne dp mg kk nf ng mk ko nh ni mo ks nj nk ms iz bi translated">æä¾›è·¯çº¿</h2><p id="6fe3" class="pw-post-body-paragraph jz ka it kb b kc mu ke kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw im bi translated">ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä¸ºæˆ‘ä»¬çš„ä¸»è¦åŠŸèƒ½æä¾›ä¸€æ¡è·¯çº¿ã€‚</p><p id="da73" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">è½¬åˆ° settings.py å’Œ urls.py æ–‡ä»¶æ‰€åœ¨çš„é¡¹ç›®æ–‡ä»¶å¤¹ã€‚</p><p id="4813" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">åœ¨ INSTALLED_APPS æ•°ç»„ä¸‹çš„ settings.py æ–‡ä»¶ä¸­ï¼Œå®‰è£…æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ç”¨äºç¼–å†™å‡½æ•°çš„ä¸»åº”ç”¨ç¨‹åºã€‚</p><pre class="ky kz la lb gt om on oo op aw oq bi"><span id="f0bf" class="na lx it on b gy or os l ot ou">INSTALLED_APPS = [<br/>    'django.contrib.admin',<br/>    'django.contrib.auth',<br/>    'django.contrib.contenttypes',<br/>    'django.contrib.sessions',<br/>    'django.contrib.messages',<br/>    'django.contrib.staticfiles',</span><span id="5256" class="na lx it on b gy ov os l ot ou">    ## our main application<br/>    'main'<br/>]</span></pre><p id="0e2e" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">ä¹‹åï¼Œè¿”å› urls.py æ–‡ä»¶ï¼Œç¼–å†™ä¸€æ¡åˆ°è¾¾æˆ‘ä»¬çš„ predict å‡½æ•°çš„è·¯å¾„ã€‚</p><pre class="ky kz la lb gt om on oo op aw oq bi"><span id="a926" class="na lx it on b gy or os l ot ou">from django.contrib import admin<br/>from django.urls import path, include<br/>from main.views import predict</span><span id="08e4" class="na lx it on b gy ov os l ot ou">urlpatterns = [<br/>    path('', include('main.urls')),<br/>    path('api/predict/', predict)<br/>]</span></pre><p id="a4db" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">ä¿å­˜æ‰€æœ‰ä¸œè¥¿ï¼Œç°åœ¨æˆ‘ä»¬çš„åç«¯ API å·²ç»å‡†å¤‡å¥½äº†ã€‚</p><h1 id="741a" class="lw lx it bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">å‰ç«¯éƒ¨åˆ†</h1><p id="ea45" class="pw-post-body-paragraph jz ka it kb b kc mu ke kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw im bi translated">ç°åœ¨æ˜¯æ—¶å€™å†™æˆ‘ä»¬çš„å‰ç«¯ä»£ç ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿä¸æˆ‘ä»¬çš„åç«¯ API è¿›è¡Œäº¤äº’ã€‚</p><p id="4b85" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">æˆ‘ä»¬ä½¿ç”¨ Django çš„æ¨¡æ¿æ¥ç¼–å†™æˆ‘ä»¬çš„å‰ç«¯ã€‚</p><p id="e4d4" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">è®©æˆ‘ä»¬åœ¨ä¸»æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨é‡Œé¢åˆ›å»ºä¸€ä¸ª<strong class="kb jd">index.html</strong>æ–‡ä»¶ã€‚</p><p id="3499" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">åœ¨ HTML æ–‡ä»¶ä¸­ï¼Œè®©æˆ‘ä»¬ç¼–å†™ä¸€äº›ä»£ç æ¥åˆ›å»ºä¸€ä¸ªç”»å¸ƒï¼Œå¹¶æäº¤ç”¨æˆ·åœ¨è¯¥ç”»å¸ƒä¸­ç»˜åˆ¶çš„å›¾åƒã€‚</p><pre class="ky kz la lb gt om on oo op aw oq bi"><span id="bcc4" class="na lx it on b gy or os l ot ou">&lt;canvas<br/>          id="canvas"<br/>          width="280"<br/>          height="280"<br/>          style="border:2px solid; float: left; border-radius: 5px; cursor: crosshair;"<br/>        &gt;&lt;/canvas&gt;</span><span id="d2bb" class="na lx it on b gy ov os l ot ou">&lt;p id="result" class="text-center text-success"&gt;&lt;/p&gt;<br/>&lt;a href="#" class="btn btn-success btn-block p-2"  id="predictButton"&gt;<br/>            Predict<br/>&lt;/a&gt;<br/>&lt;input<br/>        type="button"<br/>        class="btn btn-block btn-secondary p-2"<br/>        id="clearButton"<br/>        value="Clear"<br/> /&gt;</span></pre><p id="443f" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">ä½ å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°è®¾è®¡ä½ çš„å‰ç«¯ï¼Œå¹¶åœ¨é‡Œé¢åˆ›å»ºç”»å¸ƒã€‚</p><p id="bcd7" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">æ˜¾ç¤ºç”»å¸ƒåï¼Œè®©æˆ‘ä»¬ç”¨ä¸€äº› JS(Jquery)ä½¿å®ƒå˜å¾—éš¾ä»¥å¤„ç†ã€‚</p><pre class="ky kz la lb gt om on oo op aw oq bi"><span id="267a" class="na lx it on b gy or os l ot ou">(function()<br/>{<br/> var canvas = document.querySelector( "#canvas" );<br/> canvas.width = 280;<br/> canvas.height = 280;<br/> var context = canvas.getContext( "2d" );<br/> var canvastop = canvas.offsetTop</span><span id="b926" class="na lx it on b gy ov os l ot ou">var lastx;<br/>   var lasty;</span><span id="4fa5" class="na lx it on b gy ov os l ot ou">context.strokeStyle = "#000000";<br/>   context.lineCap = 'round';<br/>   context.lineJoin = 'round';<br/>   context.lineWidth = 5;</span><span id="fef8" class="na lx it on b gy ov os l ot ou">function dot(x,y) {<br/>     context.beginPath();<br/>     context.fillStyle = "#000000";<br/>     context.arc(x,y,1,0,Math.PI*2,true);<br/>     context.fill();<br/>     context.stroke();<br/>     context.closePath();<br/>   }</span><span id="dcd6" class="na lx it on b gy ov os l ot ou">function line(fromx,fromy, tox,toy) {<br/>     context.beginPath();<br/>     context.moveTo(fromx, fromy);<br/>     context.lineTo(tox, toy);<br/>     context.stroke();<br/>     context.closePath();<br/>   }</span><span id="f12c" class="na lx it on b gy ov os l ot ou">canvas.ontouchstart = function(event){<br/>     event.preventDefault();</span><span id="a0f5" class="na lx it on b gy ov os l ot ou">lastx = event.touches[0].clientX;<br/>     lasty = event.touches[0].clientY - canvastop;</span><span id="c9fe" class="na lx it on b gy ov os l ot ou">dot(lastx,lasty);<br/>   }</span><span id="a338" class="na lx it on b gy ov os l ot ou">canvas.ontouchmove = function(event){<br/>     event.preventDefault();</span><span id="f034" class="na lx it on b gy ov os l ot ou">var newx = event.touches[0].clientX;<br/>     var newy = event.touches[0].clientY - canvastop;</span><span id="976d" class="na lx it on b gy ov os l ot ou">line(lastx,lasty, newx,newy);</span><span id="6f3f" class="na lx it on b gy ov os l ot ou">lastx = newx;<br/>     lasty = newy;<br/>   }</span><span id="0735" class="na lx it on b gy ov os l ot ou">var Mouse = { x: 0, y: 0 };<br/> var lastMouse = { x: 0, y: 0 };<br/> context.fillStyle="white";<br/> context.fillRect(0,0,canvas.width,canvas.height);<br/> context.color = "black";<br/> context.lineWidth = 10;<br/>    context.lineJoin = context.lineCap = 'round';</span><span id="af65" class="na lx it on b gy ov os l ot ou">debug();</span><span id="96f9" class="na lx it on b gy ov os l ot ou">canvas.addEventListener( "mousemove", function( e )<br/> {<br/>  lastMouse.x = Mouse.x;<br/>  lastMouse.y = Mouse.y;</span><span id="da99" class="na lx it on b gy ov os l ot ou">Mouse.x = e.pageX - this.offsetLeft;<br/>  Mouse.y = e.pageY - this.offsetTop;</span><span id="c356" class="na lx it on b gy ov os l ot ou">}, false );</span><span id="75ff" class="na lx it on b gy ov os l ot ou">canvas.addEventListener( "mousedown", function( e )<br/> {<br/>  canvas.addEventListener( "mousemove", onPaint, false );</span><span id="78f5" class="na lx it on b gy ov os l ot ou">}, false );</span><span id="0a4c" class="na lx it on b gy ov os l ot ou">canvas.addEventListener( "mouseup", function()<br/> {<br/>  canvas.removeEventListener( "mousemove", onPaint, false );</span><span id="4d29" class="na lx it on b gy ov os l ot ou">}, false );</span><span id="2fed" class="na lx it on b gy ov os l ot ou">var onPaint = function()<br/> {<br/>  context.lineWidth = context.lineWidth;<br/>  context.lineJoin = "round";<br/>  context.lineCap = "round";<br/>  context.strokeStyle = context.color;</span><span id="ab35" class="na lx it on b gy ov os l ot ou">context.beginPath();<br/>  context.moveTo( lastMouse.x, lastMouse.y );<br/>  context.lineTo( Mouse.x, Mouse.y );<br/>  context.closePath();<br/>  context.stroke();<br/> };</span><span id="81fb" class="na lx it on b gy ov os l ot ou">function debug()<br/> {<br/>  /* CLEAR BUTTON */<br/>  var clearButton = $( "#clearButton" );</span><span id="be3a" class="na lx it on b gy ov os l ot ou">clearButton.on( "click", function()<br/>  {</span><span id="ee47" class="na lx it on b gy ov os l ot ou">context.clearRect( 0, 0, 280, 280 );<br/>    context.fillStyle="white";<br/>    context.fillRect(0,0,canvas.width,canvas.height);</span><span id="1169" class="na lx it on b gy ov os l ot ou">});</span><span id="a6e0" class="na lx it on b gy ov os l ot ou">/* COLOR SELECTOR */</span><span id="7ac5" class="na lx it on b gy ov os l ot ou">$( "#colors" ).change(function()<br/>  {<br/>   var color = $( "#colors" ).val();<br/>   context.color = color;<br/>  });</span><span id="de0b" class="na lx it on b gy ov os l ot ou">/* LINE WIDTH */</span><span id="68f4" class="na lx it on b gy ov os l ot ou">$( "#lineWidth" ).change(function()<br/>  {<br/>   context.lineWidth = $( this ).val();<br/>  });<br/> }<br/>}());</span></pre><p id="585d" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">è¿™åŸºæœ¬ä¸Šæ˜¯æˆ‘ä»¬çš„ JS å‡½æ•°ï¼Œå…è®¸ç”¨æˆ·åœ¨æˆ‘ä»¬çš„ç”»å¸ƒå†…ç»˜å›¾ã€‚å®ƒæŠ“ä½ç”¨æˆ·çš„é¼ æ ‡+è§¦æ‘¸ç¬”åˆ’ï¼Œå¹¶æ ¹æ®ä»–ä»¬çš„ç»˜å›¾åœ¨ç”»å¸ƒå†…ç»˜åˆ¶çº¿æ¡ã€‚</p><p id="98f7" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">ä¹‹åï¼Œè®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªä»£ç ï¼Œå°†è¿™äº›ç»˜åˆ¶çš„çº¿æ¡ä½œä¸º base64 å›¾åƒæ–‡ä»¶æäº¤åˆ°åç«¯ã€‚</p><pre class="ky kz la lb gt om on oo op aw oq bi"><span id="ff3f" class="na lx it on b gy or os l ot ou">&lt;script type="text/javascript"&gt;<br/>      $("#predictButton").click(function() {<br/>        var $SCRIPT_ROOT = "/api/predict/";<br/>        var canvasObj = document.getElementById("canvas");<br/>        var context = canvas.getContext( "2d" );<br/>        var img = canvasObj.toDataURL();<br/>        $.ajax({<br/>          type: "POST",<br/>          url: $SCRIPT_ROOT,<br/>          data: { img: img },<br/>          success: function(data) {<br/>            $("#result").text("Predicted Output is: " + data.output);</span><span id="b8d7" class="na lx it on b gy ov os l ot ou">context.clearRect( 0, 0, 280, 280 );<br/>            context.fillStyle="white";<br/>            context.fillRect(0,0,canvas.width,canvas.height);</span><span id="0172" class="na lx it on b gy ov os l ot ou">}<br/>        });<br/>      });<br/>    &lt;/script&gt;</span></pre><p id="c110" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ jquery æ¥:</p><ol class=""><li id="385d" class="nl nm it kb b kc kd kg kh kk nn ko no ks np kw nq nr ns nt bi translated">æ”¶å¬æˆ‘ä»¬çš„æŒ‰é’®ç‚¹å‡»äº‹ä»¶</li><li id="c5da" class="nl nm it kb b kc nu kg nv kk nw ko nx ks ny kw nq nr ns nt bi translated">å®šä¹‰æˆ‘ä»¬çš„ API è·¯ç”±è·¯å¾„</li><li id="f207" class="nl nm it kb b kc nu kg nv kk nw ko nx ks ny kw nq nr ns nt bi translated">æŠ“ä½æˆ‘ä»¬çš„ç”»å¸ƒå…ƒç´ </li><li id="0246" class="nl nm it kb b kc nu kg nv kk nw ko nx ks ny kw nq nr ns nt bi translated">ä»¥ base64 å›¾åƒçš„å½¢å¼è·å–ç”»å¸ƒçš„ä¸Šä¸‹æ–‡</li><li id="0a03" class="nl nm it kb b kc nu kg nv kk nw ko nx ks ny kw nq nr ns nt bi translated">ä½¿ç”¨ ajax è¯·æ±‚å°†å…¶æäº¤åˆ°æˆ‘ä»¬çš„åç«¯</li><li id="05cc" class="nl nm it kb b kc nu kg nv kk nw ko nx ks ny kw nq nr ns nt bi translated">ä»æˆ‘ä»¬çš„åç«¯è·å¾—ä¸€ä¸ªå“åº”ï¼Œå¹¶æ˜¾ç¤ºåœ¨æˆ‘ä»¬çš„è¾“å‡ºéƒ¨åˆ†ã€‚</li></ol><p id="a339" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">ç°åœ¨æœ€åï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªè·¯ç”±åˆ°æˆ‘ä»¬çš„å‰ç«¯ï¼Œå¹¶ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æœåŠ¡æˆ‘ä»¬çš„ä¸»åº”ç”¨ç¨‹åºä¸­çš„ HTML æ–‡ä»¶ã€‚</p><pre class="ky kz la lb gt om on oo op aw oq bi"><span id="9682" class="na lx it on b gy or os l ot ou"># views.py</span><span id="c3cb" class="na lx it on b gy ov os l ot ou">def index(request):<br/>    return render(request, 'index.html', {})</span><span id="0de0" class="na lx it on b gy ov os l ot ou"># urls.py<br/>from django.urls import path<br/>from .views import index</span><span id="74f7" class="na lx it on b gy ov os l ot ou">urlpatterns = [<br/>    path('', index, name="index")<br/>]</span></pre><p id="aff9" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">å°±æ˜¯è¿™æ ·ï¼æˆ‘ä»¬å·²ç»æˆåŠŸåœ°å®Œæˆäº†æˆ‘ä»¬çš„åç«¯+å‰ç«¯å¼€å‘ï¼Œä»¥è¯†åˆ«æ‰‹å†™æ•°å­—ã€‚</p><p id="b61d" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">ç°åœ¨è®©æˆ‘ä»¬éƒ¨ç½²å®ƒã€‚</p></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><h1 id="f172" class="lw lx it bd ly lz og mb mc md oh mf mg mh oi mj mk ml oj mn mo mp ok mr ms mt bi translated">éƒ¨ç½²</h1><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi ox"><img src="../Images/0556f705f286d674ee4bff0d7659426c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SmAESFpJZQFkklcU.png"/></div></div></figure><p id="4172" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">æˆ‘ä»¬å°†ä½¿ç”¨<a class="ae ln" href="https://dashboard.heroku.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb jd"> Heroku </strong> </a> <strong class="kb jd"> </strong>æ¥éƒ¨ç½²æˆ‘ä»¬çš„ Django é¡¹ç›®ï¼Œå› ä¸ºå®ƒå¾ˆæ£’è€Œä¸”å…è´¹ï¼</p><blockquote class="lo lp lq"><p id="f836" class="jz ka lr kb b kc kd ke kf kg kh ki kj ls kl km kn lt kp kq kr lu kt ku kv kw im bi translated">ä½ å¯ä»¥ä» heroku çš„å®˜æ–¹æ–‡æ¡£é¡µé¢äº†è§£æ›´å¤šã€‚å®ƒå¾ˆæ¼‚äº®ï¼Œä¸€åˆ‡éƒ½æœ‰æ®å¯æŸ¥ã€‚</p></blockquote><p id="059a" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">åœ¨ä½ çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šå®‰è£… Heroku CLIï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚</p><p id="2343" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">ä¸ºäº†å‡†å¤‡å¥½æˆ‘ä»¬çš„ Django é¡¹ç›® Herokuï¼Œè®©æˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸­ç¼–å†™ä¸€ä¸ª<strong class="kb jd"> Procfile </strong>ã€‚</p><pre class="ky kz la lb gt om on oo op aw oq bi"><span id="c834" class="na lx it on b gy or os l ot ou"># Procfile</span><span id="998f" class="na lx it on b gy ov os l ot ou">web: gunicorn digitrecognizer.wsgi --log-file - --log-level debug</span></pre><p id="7ffc" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">ç°åœ¨è®©æˆ‘ä»¬åœ¨ Heroku ä¸­åˆ›å»ºæ–°çš„åº”ç”¨ç¨‹åºå­˜å‚¨åº“ï¼Œå¹¶è·å–è¯¥åº”ç”¨ç¨‹åºçš„è¿œç¨‹ URLã€‚</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi oy"><img src="../Images/970d8689c472e37587661603b9b24db6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9wCklu0S9ATZ-u6AxMwO3g.png"/></div></div></figure><p id="f86b" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">ä¹‹åï¼Œgit åˆå§‹åŒ–æˆ‘ä»¬çš„é¡¹ç›®ç›®å½•ï¼Œå°† git è¿œç¨‹ URL æ·»åŠ åˆ° Heroku urlï¼Œå¹¶å°†æˆ‘ä»¬çš„é¡¹ç›®æ–‡ä»¶å¤¹æ¨é€åˆ° Herokuï¼Œå…¶ä¸­åŒ…å«<strong class="kb jd"> requirements.txt </strong>æ–‡ä»¶ã€‚</p><p id="87af" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">è¿™å°±æ˜¯éƒ¨ç½²ğŸ˜Šã€‚æˆ‘ä»¬å·²ç»æˆåŠŸåœ°åœ¨äº‘ä¸­éƒ¨ç½²äº†æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œç°åœ¨å®ƒå·²ç»ä¸Šçº¿äº†ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ Heroku åœ¨æ‚¨çš„åº”ç”¨ä»ªè¡¨æ¿ä¸­æä¾›çš„ URL æ¥è®¿é—®è¯¥åº”ç”¨ã€‚</p></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><h1 id="4f6b" class="lw lx it bd ly lz og mb mc md oh mf mg mh oi mj mk ml oj mn mo mp ok mr ms mt bi translated">æœ€åçš„æƒ³æ³•</h1><p id="6dcc" class="pw-post-body-paragraph jz ka it kb b kc mu ke kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw im bi translated">åœ¨çœŸå®ç¯å¢ƒä¸­éƒ¨ç½²æ‚¨çš„é¡¹ç›®ä»¥å±•ç¤ºæ‚¨çš„é¡¹ç›®æ˜¯éå¸¸é‡è¦çš„ã€‚è¿™å¯¹ä½ çš„é¡¹ç›®ç»„åˆå¾ˆæœ‰å¸®åŠ©ã€‚</p><p id="5247" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">æˆ‘å¸Œæœ›æ‚¨å·²ç»å­¦åˆ°äº†ä¸€äº›ä¸œè¥¿ï¼Œå°è¯•æ„å»ºè‡ªå·±çš„æ‰‹å†™æ•°å­—åˆ†ç±»å™¨ï¼Œå¹¶å°†å…¶éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚ä½ å¯ä»¥ä»<a class="ae ln" href="https://digit-recog.herokuapp.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb jd">è¿™é‡Œ</strong> </a>æŸ¥çœ‹æˆ‘çš„æ¼”ç¤º appã€‚</p></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><h1 id="969b" class="lw lx it bd ly lz og mb mc md oh mf mg mh oi mj mk ml oj mn mo mp ok mr ms mt bi translated">å‚è€ƒ</h1><p id="19cf" class="pw-post-body-paragraph jz ka it kb b kc mu ke kf kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw im bi translated">[1] <em class="lr">ç†Šä¼ŸÂ·å¼—è±å¡”æ–¯ï¼Œ</em>å¦‚ä½•åœ¨ Heroku ä¸Šéƒ¨ç½² Django åº”ç”¨ï¼Œ2016 å¹´ 8 æœˆ 9 æ—¥[ <a class="ae ln" href="https://simpleisbetterthancomplex.com/tutorial/2016/08/09/how-to-deploy-django-applications-on-heroku.html" rel="noopener ugc nofollow" target="_blank">åœ¨çº¿</a> ]</p><p id="10e2" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">[2] <em class="lr">æ‰¬Â·å‹’åº“æ©ï¼Œ</em> MNIST æ•°æ®åº“ï¼Œ1998 [ <a class="ae ln" href="http://yann.lecun.com/exdb/mnist/" rel="noopener ugc nofollow" target="_blank">åœ¨çº¿</a> ]</p></div></div>    
</body>
</html>