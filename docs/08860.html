<html>
<head>
<title>How to Build a Semantic Search Engine in 3 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在 3 分钟内建立一个语义搜索引擎</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-build-a-semantic-search-engine-in-3-minutes-9e579da92913?source=collection_archive---------17-----------------------#2019-11-26">https://towardsdatascience.com/how-to-build-a-semantic-search-engine-in-3-minutes-9e579da92913?source=collection_archive---------17-----------------------#2019-11-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a44c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">与标准 TF-IDF 相比，搜索相关性提高 80%</h2></div><p id="51a6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">合著者<a class="le lf ep" href="https://medium.com/u/a97c68c557df?source=post_page-----9e579da92913--------------------------------" rel="noopener" target="_blank"> Jack Pertschuk </a></p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lg"><img src="../Images/10e6a921d0e15397d7529c768ee590e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZKeXrVLr2BotUBfW.png"/></div></div></figure><p id="e925" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本教程是用<a class="ae ls" href="https://www.elastic.co/" rel="noopener ugc nofollow" target="_blank"> Elasticsearch </a>和<a class="ae ls" href="https://github.com/koursaros-ai/nboost" rel="noopener ugc nofollow" target="_blank"> NBoost </a>建立语义搜索引擎的快速指南。本指南不作为语义搜索的介绍。查看<a class="ae ls" href="https://medium.com/koursaros-ai/boost-search-api-performance-e-g-410868e82b22" rel="noopener">这篇文章</a>了解背景。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="057f" class="ma mb it bd mc md me mf mg mh mi mj mk jz ml ka mm kc mn kd mo kf mp kg mq mr bi translated">在 3 分钟内设置一个神经代理来进行弹性搜索</h1><p id="9e38" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">在这个例子中，我们将在客户端和 Elasticsearch 之间设置一个代理来提高搜索结果。</p><h2 id="02b3" class="mx mb it bd mc my mz dn mg na nb dp mk kr nc nd mm kv ne nf mo kz ng nh mq ni bi translated">使用 tensorflow 安装 NBoost</h2><p id="6db6" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">如果您想在 GPU 上运行该示例，请确保您有 tensor flow 1.14–1.15(带 CUDA)来支持建模功能。但是，如果你只是想在 CPU 上运行，就不用担心了。对于这两种情况，只需运行:</p><pre class="lh li lj lk gt nj nk nl nm aw nn bi"><span id="92fc" class="mx mb it nk b gy no np l nq nr">pip install nboost[tf]</span></pre><h2 id="87f9" class="mx mb it bd mc my mz dn mg na nb dp mk kr nc nd mm kv ne nf mo kz ng nh mq ni bi translated">设置 Elasticsearch 服务器</h2><blockquote class="ns nt nu"><p id="1cd7" class="ki kj nv kk b kl km ju kn ko kp jx kq nw ks kt ku nx kw kx ky ny la lb lc ld im bi translated"><em class="it">🔔如果你已经有一个 Elasticsearch 服务器，你可以跳过这一步！</em></p></blockquote><p id="8ea0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你没有 Elasticsearch，不用担心！你可以使用 docker 建立一个本地的 Elasticsearch 集群。首先，通过运行以下命令获取 ES 映像:</p><pre class="lh li lj lk gt nj nk nl nm aw nn bi"><span id="5bf7" class="mx mb it nk b gy no np l nq nr">docker pull elasticsearch:7.4.2</span></pre><p id="d5a0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦有了图像，您就可以通过以下方式运行 Elasticsearch 服务器:</p><pre class="lh li lj lk gt nj nk nl nm aw nn bi"><span id="9e3b" class="mx mb it nk b gy no np l nq nr">docker run -d -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" elasticsearch:7.4.2</span></pre><h2 id="91c6" class="mx mb it bd mc my mz dn mg na nb dp mk kr nc nd mm kv ne nf mo kz ng nh mq ni bi translated">部署代理</h2><p id="488d" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">现在我们准备好部署我们的神经代理了！做到这一点非常简单，只需运行:</p><pre class="lh li lj lk gt nj nk nl nm aw nn bi"><span id="c4a1" class="mx mb it nk b gy no np l nq nr">nboost --uport 9200</span></pre><blockquote class="ns nt nu"><p id="7a00" class="ki kj nv kk b kl km ju kn ko kp jx kq nw ks kt ku nx kw kx ky ny la lb lc ld im bi translated"><em class="it">📢</em><code class="fe nz oa ob nk b"><em class="it">--uhost</em></code><em class="it"/><code class="fe nz oa ob nk b"><em class="it">--uport</em></code><em class="it">应该和上面的 Elasticsearch 服务器一样！Uhost 和 uport 是 upstream-host 和 upstream-port(指上游服务器)的简称。</em></p></blockquote><p id="ab12" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你收到这个消息:<code class="fe nz oa ob nk b">Listening: &lt;host&gt;:&lt;port&gt;</code>，那么我们可以走了！</p><h2 id="c94a" class="mx mb it bd mc my mz dn mg na nb dp mk kr nc nd mm kv ne nf mo kz ng nh mq ni bi translated">索引一些数据</h2><p id="e9da" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">NBoost 内置了一个方便的索引工具(<code class="fe nz oa ob nk b">nboost-index</code>)。出于演示的目的，我们将通过 NBoost 索引<a class="ae ls" href="https://microsoft.github.io/TREC-2019-Deep-Learning/" rel="noopener ugc nofollow" target="_blank">一组关于旅游和酒店的段落</a>。您可以通过运行以下命令将索引添加到您的 Elasticsearch 服务器:</p><blockquote class="ns nt nu"><p id="77a9" class="ki kj nv kk b kl km ju kn ko kp jx kq nw ks kt ku nx kw kx ky ny la lb lc ld im bi translated"><code class="fe nz oa ob nk b"><em class="it">travel.csv</em></code>T24 自带 NBoost </p></blockquote><pre class="lh li lj lk gt nj nk nl nm aw nn bi"><span id="0701" class="mx mb it nk b gy no np l nq nr">nboost-index --file travel.csv --name travel --delim ,</span></pre><p id="4037" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们来测试一下！点击弹性搜索:</p><pre class="lh li lj lk gt nj nk nl nm aw nn bi"><span id="cd48" class="mx mb it nk b gy no np l nq nr">curl "http://localhost:8000/travel/_search?pretty&amp;q=passage:vegas&amp;size=2"</span></pre><p id="95b8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果 Elasticsearch 结果中有<code class="fe nz oa ob nk b">_nboost</code>标签，那么恭喜它成功了！</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi oc"><img src="../Images/440b4ad81ef9a902bf3b2065a692357d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S2hGYSVR0MRb_HQPLwf2KA.png"/></div></div></figure><h2 id="228f" class="mx mb it bd mc my mz dn mg na nb dp mk kr nc nd mm kv ne nf mo kz ng nh mq ni bi translated">刚刚发生了什么？</h2><p id="d7d7" class="pw-post-body-paragraph ki kj it kk b kl ms ju kn ko mt jx kq kr mu kt ku kv mv kx ky kz mw lb lc ld im bi translated">让我们来看看 NBoost 前端。转到您的浏览器并访问<a class="ae ls" href="http://localhost:8000/nboost" rel="noopener ugc nofollow" target="_blank"> localhost:8000/nboost </a>。</p><blockquote class="ns nt nu"><p id="448a" class="ki kj nv kk b kl km ju kn ko kp jx kq nw ks kt ku nx kw kx ky ny la lb lc ld im bi translated"><em class="it">如果您无法访问浏览器，您可以</em> <code class="fe nz oa ob nk b"><em class="it">curl http://localhost:8000/nboost/status</em></code> <em class="it">获取相同的信息。</em></p></blockquote><figure class="lh li lj lk gt ll gh gi paragraph-image"><div class="ab gu cl od"><img src="../Images/491bcc3c337e1ee7b09ff4b016d83481.png" data-original-src="https://miro.medium.com/v2/format:webp/0*IJZttbXQw-bOf299.png"/></div></figure><p id="db7e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">前端记录了发生的一切:</p><ol class=""><li id="5ac8" class="oe of it kk b kl km ko kp kr og kv oh kz oi ld oj ok ol om bi translated">NBoost 收到了对 2 个搜索结果的请求。<em class="nv"> (0.32 毫秒)</em></li><li id="e021" class="oe of it kk b kl on ko oo kr op kv oq kz or ld oj ok ol om bi translated">NBoost 连接到服务器。<em class="nv"> (0.13 毫秒)</em></li><li id="5fe6" class="oe of it kk b kl on ko oo kr op kv oq kz or ld oj ok ol om bi translated">NBoost 向服务器发送了 10 个搜索结果的请求。<em class="nv"> (0.12 毫秒)</em></li><li id="32d2" class="oe of it kk b kl on ko oo kr op kv oq kz or ld oj ok ol om bi translated">NBoost 从服务器收到了 10 个搜索结果。<em class="nv"> (120.33 毫秒)</em></li><li id="f20d" class="oe of it kk b kl on ko oo kr op kv oq kz or ld oj ok ol om bi translated">这个模型挑选了最好的两个搜索结果。<em class="nv"> (300 毫秒)</em></li><li id="210d" class="oe of it kk b kl on ko oo kr op kv oq kz or ld oj ok ol om bi translated">NBoost 将搜索结果返回给客户端。<em class="nv"> (0.10 毫秒)</em></li></ol></div></div>    
</body>
</html>