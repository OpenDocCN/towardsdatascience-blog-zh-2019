# Python 列表索引和切片的基础

> 原文：<https://towardsdatascience.com/the-basics-of-indexing-and-slicing-python-lists-2d12c90a94cf?source=collection_archive---------2----------------------->

## 初学者指南，由初学者编写

![](img/ac549e8ba329842e51249065a278a4d1.png)

Photo by [Igor Miske](https://unsplash.com/@igormiske?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/search/photos/slice?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

几天前，我正准备向一群 Python 初学者演示索引和切片列表，我被一些看起来很基本的用例卡住了。所以，为了摆脱困境，我四处逛了逛，觉得值得分享一下我学到的东西。

访问列表中的条目(以及其他[可条目](https://stackoverflow.com/questions/9884132/what-exactly-are-iterator-iterable-and-iteration)中的条目，如元组和字符串)是 Python 程序员的一项基本技能，许多 Python 工具都遵循类似的索引和切片约定(例如`numpy Arrays`和`pandas DataFrames`)。所以熟悉一下来龙去脉还是值得的。

# 定义和舞台设置

“索引”是指通过元素在可迭代对象中的位置来引用可迭代对象的元素。“切片”意味着根据索引从 iterable 中获取元素的子集。

打个比方，我最近被召集去做陪审员，他们给每个潜在的陪审员分配了一个号码。你可能会说我的陪审员号是我的索引。当他们说，“42 号陪审员；请站起来，”我知道他们在和我说话。当他们说，“37 号到 48 号陪审员，请在下午 3:30 回来报到，”那一大群人中的*片*集体叹了口气，去吃午饭了。

让我们首先创建一个列表，我们可以使用[列表理解](/python-basics-list-comprehensions-631278f22c40)来处理它:

```
my_list = [_ for _ in 'abcdefghi']
my_list['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i']
```

# 索引

为了检索列表中的元素，我们使用了*索引操作符* ( `[]`):

```
my_list[0]'a'
```

列表是“零索引”的，所以`[0]`返回列表中的第零个(*即*最左边的)，而`[1]`返回第一个(*即*第零个右边的一个)。由于我们的列表中有 9 个元素(`[0]`到`[8]`)，尝试访问`my_list[9]`会抛出一个`IndexError: list index out of range`，因为它实际上是在尝试获取第 10 个元素，而实际上并没有。

Python 还允许使用负数从列表的*结尾*开始索引，其中`[-1]`返回最后一个元素。这非常有用，因为这意味着您不必通过编程来找出 iterable 的长度，以便处理它末尾的元素。`my_list`的索引和反向索引如下:

```
 0    1    2    3    4    5    6    7    8
  ↓    ↓    ↓    ↓    ↓    ↓    ↓    ↓    ↓
['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i']
  ↑    ↑    ↑    ↑    ↑    ↑    ↑    ↑    ↑
 -9   -8   -7   -6   -5   -4   -3   -2   -1
```

# 限幅

一个*片*是列表元素的子集。在列表的情况下，单个切片总是由连续的元素组成。切片符号采用以下形式

```
my_list[*start*:*stop*]
```

其中`*start*`是要包含的第一个元素的索引，`*stop*`是要在*处停止但不包含在切片*中的项目的索引。于是`my_list[1:5]`返回`['b', 'c', 'd', 'e']`:

```
 0    ***1    2    3    4    5***    6    7    8
  ×    **↓    ↓    ↓    ↓ **   ×    ×    ×    ×
['a', ***'b', 'c', 'd', 'e'*,** 'f', 'g', 'h', 'i']
```

将任一切片边界留空意味着从列表的末尾开始(或转到列表的末尾)。例如:

```
my_list[5:]['f', 'g', 'h', 'i'] my_list[:4]['a', 'b', 'c', 'd']
```

使用负索引器将设置相对于它们从列表的*端*的位置的开始/停止界限，因此`my_list[-5:-2]`返回`['e', 'f', 'g']`:

```
['a', 'b', 'c', 'd', ***'e', 'f', 'g',*** 'h', 'i']
  ×    ×    ×    ×    **↑    ↑    ↑**    ×    ×
 -9   -8   -7   -6   ***-5   -4   -3   -2***   -1
```

注意，如果你尝试`my_list[-2:-5]`，你会得到一个空列表。这是我犯的一个错误，但是事情是这样的:为了包含在切片中，一个元素必须在`*start*`边界的右边和`*stop*`边界的左边。因为`-2`已经在`-5`的*右侧*，所以切片器在将任何值填充到切片中之前停止。

一个`for`循环的工作方式完全相同；下面的第一个循环没有输出，但第二个有输出:

```
for i in range(-2,-5):
    print(i)for i in range(-5,-2):
    print(i)-5
-4
-3
```

# 步进

切片器可以接受可选的第三个参数，该参数设置切片中包含元素的间隔。所以`my_list[::2]`返回`['a', 'c', 'e', 'g', 'i']`:

```
 ***0    1    2    3    4    5    6    7    8***  **↓**    ×¹ **↓**²×¹ **↓**²   ×¹ **↓**²   ×¹ **↓**²
[***'a',*** 'b', ***'c',*** 'd', ***'e',*** 'f', ***'g',*** 'h', ***'i'***]
```

并且`my_list[1::2]`返回`['b', 'd', 'f', 'h']`:

```
 0 ***1    2    3    4    5    6    7    8***  ×    **↓** ×¹ **↓**²×¹ **↓**²   ×¹ **↓**²   ×¹
['a', ***'b'***, 'c', ***'d'***, 'e', ***'f'***, 'g', ***'h'***, 'i']
```

负步长值反转切片器遍历原始列表的方向:

```
my_list[::-1]['i', 'h', 'g', 'f', 'e', 'd', 'c', 'b', 'a']
```

列表元素的索引位置不会改变，但是元素返回的顺序会改变。`*start*`和`*stop*`边界的意义也是相反的，所以`*start*`值应该在切片的最右边，而`*stop*`值应该在它的左边。所以`my_list[5:3:-1]`给了我们`[‘f’, ‘e’]`:

```
<----<----<----<----<----<----<----<----<--
  0    1    2    ***3    4    5***    6    7    8
  ×    ×    ×    × **↓    ↓**   ×    ×    ×
['a', 'b', 'c', 'd', ***'e', 'f'***, 'g', 'h', 'i']
```

同样，`my_list[-2:-5:-1]`给了我们`['h', 'g', 'f']`:

```
['a', 'b', 'c', 'd', 'e', ***'f', 'g', 'h',*** 'i']
  ×    ×    ×    ×    ×    **↑**    **↑**   ** ↑ **   ↑
 -9   -8   -7   -6   ***-5   -4   -3   -2***   -1
<----<----<----<----<----<----<----<----<--
```

而`my_list[-1:-8:-3]`给了我们`['i', 'f', 'c']`:

```
['a', 'b', ***'c',*** 'd', 'e', ***'f',*** 'g', 'h', ***'i'***]
  ×    ×¹   **↑**³   ×²   ×¹   **↑**³   ×²  ×¹   ↑
 -9   ***-8   -7   -6   -5   -4   -3   -2   -1***
<----<----<----<----<----<----<----<----<--
```

我希望这能为您省去一些我在索引和切片工作中遇到的困惑，尤其是对于负步骤。