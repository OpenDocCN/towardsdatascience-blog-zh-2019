<html>
<head>
<title>Build your own pandas (like) library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">建立你自己的熊猫(喜欢)图书馆</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-your-own-pandas-like-library-7aac66c1f3d7?source=collection_archive---------25-----------------------#2019-04-02">https://towardsdatascience.com/build-your-own-pandas-like-library-7aac66c1f3d7?source=collection_archive---------25-----------------------#2019-04-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/03edcccf736ac8854b71d186198eab42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*1N7CCwiZQA4o24s5P-5c5g.jpeg"/></div></figure><p id="e4b9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我主要通过泰德·彼得鲁的烹饪书了解熊猫。而现在，Ted 又想出了另一个有趣的项目:<strong class="jw ir"> <em class="kt">建造我们自己的熊猫像库</em> </strong>。它包含一系列需要完成的步骤，以便构建一个类似于熊猫的全功能库，称为<a class="ae ks" href="https://github.com/tdpetrou/pandas_cub" rel="noopener ugc nofollow" target="_blank"> pandas_cub </a>。图书馆将拥有熊猫最有用的特征。</p><h2 id="30c0" class="ku kv iq bd kw kx ky dn kz la lb dp lc kf ld le lf kj lg lh li kn lj lk ll lm bi translated">我喜欢这个项目的地方</h2><ol class=""><li id="f4ad" class="ln lo iq jw b jx lp kb lq kf lr kj ls kn lt kr lu lv lw lx bi translated">项目规模:该项目为熟悉 Python 的人提供了一个编写大代码的绝佳机会。</li><li id="3a40" class="ln lo iq jw b jx ly kb lz kf ma kj mb kn mc kr lu lv lw lx bi translated">设置环境:这个项目帮助你学习如何为你的项目创建一个独立的环境。这是使用<code class="fe md me mf mg b">conda</code>包管理器完成的。</li><li id="123b" class="ln lo iq jw b jx ly kb lz kf ma kj mb kn mc kr lu lv lw lx bi translated">测试驱动开发:你也学习测试驱动开发，这意味着你首先写测试，然后你写代码通过测试。在这个过程中你会学到 python 库<code class="fe md me mf mg b">pytest</code>。</li></ol><p id="6031" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">先决条件和设置可以在项目的<a class="ae ks" href="https://github.com/tdpetrou/pandas_cub" rel="noopener ugc nofollow" target="_blank"> Github 页面</a>上找到，但我仍然会提供一个快速浏览。</p><p id="968d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">步骤 1: <strong class="jw ir">派生存储库</strong></p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi mh"><img src="../Images/c5495839d113c802bcc9fce6c74ff821.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DcmD8lE44H4TV4_-EWxofw.png"/></div></div></figure><p id="69a8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><a class="ae ks" href="https://in.udacity.com/course/version-control-with-git--ud123" rel="noopener ugc nofollow" target="_blank"> Git </a>和<a class="ae ks" href="https://in.udacity.com/course/github-collaboration--ud456" rel="noopener ugc nofollow" target="_blank"> GitHub </a>入门课程，以防你不熟悉。</p><p id="eb1a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">第二步:<strong class="jw ir">克隆你的本地拷贝</strong></p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi mq"><img src="../Images/296efd2f16775da9f7ecdf2241564fde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4tG1anJqIGFOO3BwzDeLIQ.png"/></div></div></figure><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi mr"><img src="../Images/bc92760359cb7d7f079abc6da69d9621.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xM8F6VYhmVFjvKmIlw8RJw.png"/></div></div></figure><p id="9d85" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">没错。现在，我们可以填写我们的代码，并将其推送到我们的项目副本中。但是，如果项目的创建者修改了原来的项目呢？我们希望我们的分叉版本中也有这些修改。为此，我们可以将一个名为<code class="fe md me mf mg b">upstream</code>的遥控器添加到原始存储库中，并在我们想要同步二者时从那里添加<code class="fe md me mf mg b">pull</code>。然而，这并不是这个项目所必需的。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ms"><img src="../Images/bb597fd80d2000a36783557d748ed7ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*44SZpS2vSmYCK8Ob4ceaTg.png"/></div></div></figure><p id="0de9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">第三步:<strong class="jw ir">环境设置</strong></p><p id="cf91" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这意味着下载构建这个项目所需的特定库和工具集。该项目有一个名为<code class="fe md me mf mg b">environment.yml</code>的文件，其中列出了所有这些库。一个简单的<code class="fe md me mf mg b">conda env create -f environment.yml</code>将为我们安装它们。我已经安装好了。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi mt"><img src="../Images/15706ffae0851f8b4cfda8456514049c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WY8L7KjmF8Unjzh9jYf5GQ.png"/></div></div></figure><p id="e4b1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们现在可以使用<code class="fe md me mf mg b">conda activate pandas_cub</code>和<code class="fe md me mf mg b">conda deactivate</code>来激活和停用我们的环境。</p><p id="715e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">步骤 4: <strong class="jw ir">检查测试</strong></p><p id="0486" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">所有的测试都包含在位于<code class="fe md me mf mg b">tests</code>目录下的一个名为<code class="fe md me mf mg b">test_dataframe.py</code>的文件中。</p><p id="374e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">运行所有测试:</p><pre class="mi mj mk ml gt mu mg mv mw aw mx bi"><span id="6731" class="ku kv iq mg b gy my mz l na nb">$ pytest tests/test_dataframe.py</span></pre><p id="2834" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">运行特定类别的测试:</p><pre class="mi mj mk ml gt mu mg mv mw aw mx bi"><span id="337e" class="ku kv iq mg b gy my mz l na nb">$ pytest tests/test_dataframe.py::ClassName</span></pre><p id="e9c0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">运行该类的特定函数:</p><pre class="mi mj mk ml gt mu mg mv mw aw mx bi"><span id="51e1" class="ku kv iq mg b gy my mz l na nb">$ pytest tests/test_dataframe.py::ClassName::FuncName</span></pre><p id="cf17" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">最后，您需要确保 Jupyter 运行在正确的环境中。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nc"><img src="../Images/56c188c344ad5fed5b6b56d997d61044.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z5g6deX39T5f02whbo5vqA.png"/></div></div></figure><p id="bb03" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">第五步:<code class="fe md me mf mg b">__init.py__</code></p><p id="04ba" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">一旦一切都设置好了，让我们从检查<code class="fe md me mf mg b">__init.py__</code>开始，这是我们将在整个项目中编辑的文件。第一个任务要求我们检查用户提供的输入是否是正确的格式。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/279b1c09ed94588cd6f963c1465cb9ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*ms9AoSXtNo-bE6jBPWuoxA.png"/></div></figure><p id="adf7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">先来举个<code class="fe md me mf mg b">TypeError</code>如果<code class="fe md me mf mg b">data</code>不是字典的话。我们的做法如下:</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ne"><img src="../Images/90bc257a82c06ad5695b209220aa0b71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fuqqL40CuBOtNtHr_ZF-ww.png"/></div></div></figure><p id="3fec" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">为了测试这个案例，我们将打开一个新的 Jupyter 笔记本(您也可以使用现有的测试笔记本)并执行以下操作:</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nf"><img src="../Images/9e4888f539c67d8962b7b05e90c6e0ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*36asIWUaZ3EPaQ0W2okNMA.png"/></div></div></figure><p id="c9bb" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">注意</strong>:确保你的笔记本上有这些神奇的代码行。它们将确保无论何时您编辑库代码，它都将反映在您的笔记本中，而无需重新启动。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/27edc4aa6dc3327a6276916678876c34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*yzbvR0jlOKUP4Q96i6ev5g.png"/></div></figure><p id="80dc" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在我们传一本字典，看看有没有用。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nh"><img src="../Images/f8d9565aaea25d25a7dd0d39ad3c0a79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*STndPgQNWD8GR1Ut-ieLOw.png"/></div></div></figure><p id="ca9c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">的确如此。一旦我们编写了所有的案例，我们就可以从<code class="fe md me mf mg b">test_dataframe.py</code>开始运行测试，看看它们是否都通过了。总的来说，这似乎是一个非常有趣的项目，并且提供了很多可以学习的东西。浏览一遍，告诉我你喜不喜欢。也告诉我你做过的其他有趣的项目。</p><p id="28a4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">~快乐学习。</p></div></div>    
</body>
</html>