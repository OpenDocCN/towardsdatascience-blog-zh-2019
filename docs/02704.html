<html>
<head>
<title>Machine Learning — Diagnosing faults on vehicle trackers with a CNN</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">机器学习——用 CNN 诊断车辆追踪器故障</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/machine-learning-diagnosing-faults-on-vehicle-trackers-with-a-cnn-5b471a86b7c0?source=collection_archive---------19-----------------------#2019-05-02">https://towardsdatascience.com/machine-learning-diagnosing-faults-on-vehicle-trackers-with-a-cnn-5b471a86b7c0?source=collection_archive---------19-----------------------#2019-05-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/61e31688a4257059024c6e746f011e64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VoYrarHb9DLoPn5uAlAXOg.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Photo by <a class="ae kf" href="https://unsplash.com/photos/rZ7aO1lorLU?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Omer Rana</a> on <a class="ae kf" href="https://unsplash.com/search/photos/parking-lot?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="6164" class="kg kh it bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">初步考虑</h1><p id="d70b" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">几周前，我发表了另一篇标题几乎相同的文章:</p><div class="mc md gp gr me mf"><a rel="noopener follow" target="_blank" href="/machine-learning-diagnosing-faults-on-vehicle-fleet-trackers-56b123d77cf5"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd iu gy z fp mk fr fs ml fu fw is bi translated">机器学习——诊断车队跟踪器的故障</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">一种数据驱动的跟踪模块故障诊断方案。</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">towardsdatascience.com</p></div></div><div class="mo l"><div class="mp l mq mr ms mo mt jz mf"/></div></div></a></div><p id="e2c1" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">在这个故事中，我使用了跟踪模块操作的一些特定知识来手动提取特征；现在，在这个故事中，我的目标是在没有任何特征提取的情况下，在同一个数据集上诊断故障。对于没有阅读第一篇文章的人来说，介绍和问题描述将是相同的。然而，所有的发展都不会。</p><h1 id="fdd6" class="kg kh it bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">介绍</h1><p id="399a" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">许多运输和物流公司使用模块来跟踪他们的车辆，一些模块不能按预期工作并不罕见。例如，可能需要丢弃追踪器，可能会收集到车辆的错误数据，或者可能会将技术支持人员派到很远的地方去分析问题。因此，有必要对这些模块进行远程故障诊断，因为当它们出现故障时，可能会造成经济损失。</p><p id="01db" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">由于这些模块不断地向数据库发送数据，本研究的目的是使用这些数据来诊断模块上的故障。有必要开发一种方法来预处理由车辆模块发送的收集数据。在此之后，机器学习技术被应用于创建模型，模型被分析和比较。但是，错在哪里呢？</p><p id="262a" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">故障是系统的至少一个属性或特定参数的不允许的偏差[1]。此外，诊断故障有三个步骤，即:</p><ol class=""><li id="a952" class="mz na it lg b lh mu ll mv lp nb lt nc lx nd mb ne nf ng nh bi translated"><strong class="lg iu">故障检测</strong>:是故障诊断最基本的任务，用于检查系统中的故障或失效，并确定故障发生的时间；</li><li id="de7e" class="mz na it lg b lh ni ll nj lp nk lt nl lx nm mb ne nf ng nh bi translated"><strong class="lg iu">故障隔离</strong>:隔离的作用是检测故障的位置或者哪个是有缺陷的部件；</li><li id="a22a" class="mz na it lg b lh ni ll nj lp nk lt nl lx nm mb ne nf ng nh bi translated"><strong class="lg iu">故障标识</strong>:该标识用于确定故障的类型、形式和大小。</li></ol><p id="0d5b" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">通常，故障识别过程只包括故障检测和隔离(FDI)。这并没有否定故障识别的效用。然而，如果不涉及重新配置动作，这个过程可能不是必需的[2]。</p></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="fcc6" class="kg kh it bd ki kj nu kl km kn nv kp kq kr nw kt ku kv nx kx ky kz ny lb lc ld bi translated">问题描述</h1><p id="6399" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">首先，要执行任何机器学习解决方案，都需要数据。在本案例研究中，一家巴西物流公司提供了许多追踪器发送的一些数据，<strong class="lg iu">因此所有使用的数据都是真实的。</strong></p><p id="ede9" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">安装在车辆中的模块在整个运行期间发送数据。该公司提供了 12586 个注册表。该公司提供了 12586 个注册表。注册表由一个模块在一天内传输的所有数据组成。平均每个模块每天发 1116.67 分。每个点有八个属性:</p><ul class=""><li id="b19b" class="mz na it lg b lh mu ll mv lp nb lt nc lx nd mb nz nf ng nh bi translated"><strong class="lg iu">电池电压</strong>:车载电池电压的浮动值；</li><li id="ea19" class="mz na it lg b lh ni ll nj lp nk lt nl lx nm mb nz nf ng nh bi translated"><strong class="lg iu">经度</strong>:车辆经度的浮点值；</li><li id="1c0c" class="mz na it lg b lh ni ll nj lp nk lt nl lx nm mb nz nf ng nh bi translated"><strong class="lg iu">纬度</strong>:车辆纬度的浮点值；</li><li id="42f6" class="mz na it lg b lh ni ll nj lp nk lt nl lx nm mb nz nf ng nh bi translated"><strong class="lg iu">点火</strong>:表示点火<br/>是否开启的布尔值；</li><li id="4050" class="mz na it lg b lh ni ll nj lp nk lt nl lx nm mb nz nf ng nh bi translated"><strong class="lg iu">里程表</strong>:车辆里程表的浮点值；</li><li id="3edf" class="mz na it lg b lh ni ll nj lp nk lt nl lx nm mb nz nf ng nh bi translated"><strong class="lg iu"> GPS 信号</strong>:表示 GPS 信号<br/>是否有效的布尔值；</li><li id="ec88" class="mz na it lg b lh ni ll nj lp nk lt nl lx nm mb nz nf ng nh bi translated"><strong class="lg iu">速度</strong>:车速的浮点值；</li><li id="985a" class="mz na it lg b lh ni ll nj lp nk lt nl lx nm mb nz nf ng nh bi translated"><strong class="lg iu">内存索引</strong>:模块中<br/>点保存的内存位置的整数值。</li></ul><p id="384f" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">因为模块根据每个模块以不同的频率定期发送数据，所以每个注册表具有不同的大小。这样，每个注册表的大小就是发送的点数乘以 8(属性的数量)。</p><p id="57f8" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">目的是识别注册中心可能存在的错误或其是否正常工作。这样，这是一个多类分类问题，这里有八类；一类为无故障的注册表，七种可能的故障，如下所列:</p><ul class=""><li id="b645" class="mz na it lg b lh mu ll mv lp nb lt nc lx nd mb nz nf ng nh bi translated"><strong class="lg iu">故障 1 </strong>:脉冲设置错误；</li><li id="2d1d" class="mz na it lg b lh ni ll nj lp nk lt nl lx nm mb nz nf ng nh bi translated"><strong class="lg iu">故障二</strong>:里程表锁定；</li><li id="a5c3" class="mz na it lg b lh ni ll nj lp nk lt nl lx nm mb nz nf ng nh bi translated"><strong class="lg iu">故障三</strong> : GPS 锁定；</li><li id="66a3" class="mz na it lg b lh ni ll nj lp nk lt nl lx nm mb nz nf ng nh bi translated"><strong class="lg iu">故障 4 </strong>:点火线释放；</li><li id="93d5" class="mz na it lg b lh ni ll nj lp nk lt nl lx nm mb nz nf ng nh bi translated"><strong class="lg iu">故障 5 </strong>:加速计故障；</li><li id="263d" class="mz na it lg b lh ni ll nj lp nk lt nl lx nm mb nz nf ng nh bi translated"><strong class="lg iu">故障 6 </strong>:模块缓冲器有问题；</li><li id="7808" class="mz na it lg b lh ni ll nj lp nk lt nl lx nm mb nz nf ng nh bi translated"><strong class="lg iu">故障 7 </strong> : GPS 出现位置跳变；</li></ul><p id="e0c7" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">这些故障中的一些有几次出现得太低。不足 3%的瑕疵都被贴上了“其他”的标签。每次故障的数据量见下表。</p><figure class="ob oc od oe gt ju gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/f66fea3b41f9ef1d96e59de633ff5c73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/1*EHoIxQXsO3_Eyx6aLmHOGQ.png"/></div></figure><h1 id="16cc" class="kg kh it bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">发展</h1><p id="5acb" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我的目标是检测和隔离故障；然而，虽然仅仅检测故障是一个二元问题，但是检测和隔离是一个多类问题。检测故障可能容易得多。从公司方面来看，几乎总是，当一个模块出现故障时，他们需要更换它。所以不管是什么故障，我们都需要更换模块。</p><blockquote class="of og oh"><p id="3559" class="le lf oi lg b lh mu lj lk ll mv ln lo oj mw lr ls ok mx lv lw ol my lz ma mb im bi translated">我们在这里提出模型，一个用于检测故障，另一个用于检测和隔离故障。</p></blockquote><h2 id="eec9" class="om kh it bd ki on oo dn km op oq dp kq lp or os ku lt ot ou ky lx ov ow lc ox bi translated">数据预处理</h2><p id="5116" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">由于我们的目标是在不使用任何关于系统操作的特定知识的情况下对数据集进行微小的更改，因此数据预处理相当简单。</p><p id="085e" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">我们选择保留所有数据，不执行任何异常值分析。大多数离群值强烈表明存在错误，如果我们丢弃所有离群值，许多有问题的注册中心将会消失。这样，我们唯一要做的就是使用鲁棒定标器进行归一化。传统的归一化会导致数据被某个高值抑制，因此使用 RobustScaler。此缩放器使用第一个和第三个四分位数作为约束，而不是最大值和最小值，因此这种归一化更健壮，并保留了异常值。</p><p id="fb96" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">考虑到注册表具有可变长度，不可能用该数据集直接构建 ML 模型。这样，有必要为所有重试设置一个默认大小。已知注册表中存在的最大点数是 6410，点数的平均值是 1116.67，标准偏差是 1155.75，具有较小数据量的注册表以“0”完成，直到它们具有与最大注册表相同的数据量。</p><p id="3297" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">可以执行不同的方法来设置注册表的默认大小，例如从高于平均值的注册表中截断数据量，并且用“0”来填充低于平均值的注册表，或者从比较小的注册表具有更多数据的所有注册表中截断数据量。然而，由于 CNN 的分歧，这些方法被测试并被认为是不可行的。</p><h2 id="de9f" class="om kh it bd ki on oo dn km op oq dp kq lp or os ku lt ot ou ky lx ov ow lc ox bi translated">CNN 架构</h2><p id="7575" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我根据 VGG 16 号做了一个模型。</p><blockquote class="of og oh"><p id="8137" class="le lf oi lg b lh mu lj lk ll mv ln lo oj mw lr ls ok mx lv lw ol my lz ma mb im bi translated">使用 4 个卷积块。每个像 Conv-&gt;Conv-&gt;统筹。然后是两个完全连接的层。</p></blockquote><p id="d568" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">卷积的思想是让过滤器选择和修改属性。为此，我们使用(8，6410，1)形状来处理每个注册表。这样，CNN 就像威胁图像一样威胁数据。要更深入地检查架构，请检查我的 GitHub(链接在介绍和结论中)。</p><p id="86c8" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">使用的批量大小为 1，学习率为 0.0001，he_uniform 初始化器。batch_size 可以更大。然而，由于硬件限制，三个对我来说更高。</p><h2 id="c62e" class="om kh it bd ki on oo dn km op oq dp kq lp or os ku lt ot ou ky lx ov ow lc ox bi translated">模特培训</h2><p id="ca19" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">训练两个模型，一个用于故障检测，另一个用于故障检测和隔离。因此，定义了同一数据集的两种结构。这些结构描述如下:</p><ul class=""><li id="ebbd" class="mz na it lg b lh mu ll mv lp nb lt nc lx nd mb nz nf ng nh bi translated"><strong class="lg iu">结构 1 </strong>:用于实验检测系统是否有故障。它包含 12586 条记录，其中 7480 条有缺陷，5106 条无缺陷；</li><li id="1b02" class="mz na it lg b lh ni ll nj lp nk lt nl lx nm mb nz nf ng nh bi translated"><strong class="lg iu">结构 2 </strong>:在实验中用于检测和隔离故障。它包含 5106 条无缺陷记录、2170 条失败 2 记录、1573 条失败 3 记录、1702 条失败 4 记录和 2035 条“其他”失败记录，总共 12586 条记录。</li></ul><p id="1150" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">所有模型都是用 Python 3.6 和 Sk-learn 0.20.2 编写的，在 Ubuntu 18.04 上运行，采用英特尔 i7–7700 HQ、16Gb 内存、GTX 1050Ti。</p><p id="996c" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">为了运行算法，数据集被分成训练集和测试集。对于每个实验，20%的注册表用于测试，80%用于训练。</p><h2 id="1537" class="om kh it bd ki on oo dn km op oq dp kq lp or os ku lt ot ou ky lx ov ow lc ox bi translated">模型评估</h2><p id="9ffe" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">度量标准需要充分的解释。在所讨论的案例研究中，最大限度地减少误报的数量至关重要，因为这将涉及派遣技术人员执行不必要的维护。而假阳性意味着接收到对某个故障模块的投诉。那么，从财务角度来看，召回的相关性大于精确度。</p><p id="cd03" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">对于 88.42 的精度和 87.96 的召回，故障检测的混淆矩阵可以如下所示:</p><figure class="ob oc od oe gt ju gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/270e3a92d1adef9729eeeafce1e4eb77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*hc4dAYExbZTpWwcGJ6yN5A.png"/></div></figure><p id="9472" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">对于 54.98 的精度和 52.57 的召回，用于故障检测和隔离的混淆矩阵可以如下所示:</p><figure class="ob oc od oe gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oz"><img src="../Images/a565256daa8a7afcb01fa6c6a0498cfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*FGb8FGZbu1_FnhMX2sU0MA.png"/></div></div></figure><p id="069f" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">对于这两个模型，都存在高方差和高偏差。如果架构更深入或者改变一些超参数，模型会有更好的结果。或者，甚至执行更广泛的数据预处理。</p><h1 id="5af3" class="kg kh it bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">结论</h1><p id="9e1b" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">正如所提出的，这些模型可以检测和隔离车队跟踪模块上的故障。然而，评价性指标不适合使用模型。在我的另一篇文章中，使用来自系统的知识，可以在公司实现更高的指标来远程诊断他们模块上的故障。</p><p id="3d03" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">所采用的方法的局限性包括模型不能发现未被映射的故障，因此任何未被学习的故障将被错误地分类为已知故障之一。</p><p id="bc1d" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">和文章中一样，这里没有任何代码，你可以在我的 GitHub 库中随意查看。</p><div class="mc md gp gr me mf"><a href="https://github.com/lmeazzini/Tracker-fault-diagnosis" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd iu gy z fp mk fr fs ml fu fw is bi translated">lmeazzini/Tracker-故障诊断</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">故障诊断模型检测和隔离车队跟踪模块上的故障。…</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">github.com</p></div></div><div class="mo l"><div class="pa l mq mr ms mo mt jz mf"/></div></div></a></div><h1 id="5f0e" class="kg kh it bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">参考</h1><p id="1b44" class="pw-post-body-paragraph le lf it lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">[1] D. van Schrick，“对<br/>监督、故障检测和诊断领域术语的评论”，IFAC 会议录<br/>卷，第 30 卷，第 18 期，第 959-964 页，1997 年。</p><p id="6a14" class="pw-post-body-paragraph le lf it lg b lh mu lj lk ll mv ln lo lp mw lr ls lt mx lv lw lx my lz ma mb im bi translated">[2] D. Wang 和 W. T. Peter，“基于移动平均磨损退化指数和一般<br/>序贯蒙特卡罗方法的<br/>泥浆泵预测”，机械系统和<br/>信号处理，第 56 卷，第 213–229 页，2015 年。</p></div></div>    
</body>
</html>