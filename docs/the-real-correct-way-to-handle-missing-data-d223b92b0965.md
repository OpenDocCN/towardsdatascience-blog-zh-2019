# 处理缺失数据的真正正确方法

> 原文：<https://towardsdatascience.com/the-real-correct-way-to-handle-missing-data-d223b92b0965?source=collection_archive---------13----------------------->

![](img/816b1ddea7e2fbf002b3b6c908fe5dbb.png)

作为一家咨询公司的首席数据科学家，我工作的一个重要部分是面试和聘用数据科学人才，以满足我们不断增长的客户群的需求。我们的数据科学团队的结构对医疗行业的人来说肯定是熟悉的。当你生病或受伤时，你通常会去医院。医院在任何时候都有很多病人，所以给你看病的医生几乎肯定不会是主治医生或内科主任。相反，你更有可能首先被住院医生或实习医生，或者现在的医生助理或执业护士看到。

这些专业人员是第一道防线，必须接受培训，以处理大多数基本和世俗的案件。主治医生监督病人的护理，只有当实习医生或住院医生不确定该如何处理时，他才会被叫去看望某个病人。同样，我们的咨询业务在任何时候都有很多客户，我监督我们所有的项目。然而，因为我不能同时出现在所有地方，所以我通常不是部署到客户站点的顾问。我会派我们的顾问去，因为我知道他或她至少有能力处理客户需要解决的大部分任务。我希望顾问们能够独立处理项目，只需要在最具挑战性的问题上找我。

因为这是我们的商业模式，我需要确保我们只引进最优秀的人才。我在筛选过程中非常仔细。如果顾问没有技能和知识，他们最终会向我寻求帮助。然后那些顾问的项目占用了我所有的时间。我最终加班加点，只是为了跟上项目进度，并确保我们的交付物是高质量和准时的。

在我的筛选工作中，我开始注意到我面试的候选人中的一个趋势。这种趋势体现在我对一个具体问题的回答中:“你如何处理丢失的数据？”最近每次我问这个问题，总是得到这样的回答:“你要么删除带有缺失信息的观察值，要么用某种集中趋势的度量来填充缺失值，比如数值变量的均值或分类变量的模式。”这个答案如此一致，以至于我觉得有必要解决它。

你可能会问自己，“这个答案有什么问题？我以前也这样做过。”我也是。然而，这通常不是我做过的项目，当我做过的时候，这是最后的手段。这个答案我称之为象牙塔答案，因为它来自纯理论。这表明，作为一名行业数据科学家或在项目中与客户打交道，绝对没有实际知识。

那么，真正的答案是什么？简单。你和你的客户谈过了。现在，这个答案是如此的简短，如此的简单，以至于对你们中的一些人来说，这个答案可能会彻底的令人失望。那么请允许我通过分享一个我曾经的经历来阐述。

几年前，我是一个团队的成员，该团队为一个客户建立了一个模型，该客户的业务主要是围绕大订单报价而建立的。该模型向报价专家提供建议，说明如何根据订单中的内容、订购的数量以及客户之前的购买行为等对报价中的项目进行折扣。我们的想法是建立一个可以达到理想平衡的模型，在这个模型中，商品的折扣只是足以让客户购买订单，但不会超过必要的折扣，这样利润仍然可以最大化。

除了你可能会想到的所有贝叶斯统计和机器学习算法都进入了这个模型的设计之外，对客户来说，我们纳入某些业务规则也很重要。例如，他们希望对任何售出的商品保持 25%的最低利润率。客户也希望尊重公布的标价。也就是说，即使数据表明客户可能会支付更高的价格，客户也不会想要出价高于标价。模型的这些限制要求我们知道客户目录中每件商品的成本和标价。

客户拥有这些数据似乎是理所当然的。然而，一旦管理人员将他们目录中所有商品的数据集发给我们，我们发现我们要么遗漏了成本，要么遗漏了相当大一部分商品的标价。举个例子，这个客户卖的东西少则 10 美分，多则 4000 美元。将所有缺失的成本或标价设定为平均值不太可能给出合理的值。那么，我们做了什么？

我们和客户公司的销售主管通了五分钟的电话。我们解释了情况，他告诉我们，他们几乎总是调整价格，使成本在标价的 40%左右。因此，只要我们有标价，但没有成本，我们就可以估算标价 40%的成本。对于任何有成本但没有标价的项目，我们可以估算标价，这样成本就是估算标价的 40%。就这么简单！

在这种情况下，没有集中趋势或数学定理可以给我们正确的答案。我们只知道通过与我们的客户交谈来做什么，所以我们可以理解围绕所讨论的变量的业务逻辑。一些读者可能会想，也许我们可以构建一个简单的模型来推断成本和标价之间的关系。虽然这可能是真的，但这仍然是一个非常象牙塔的答案。使用模型来推断这种关系仍然比不上直接洞察客户的业务逻辑，更重要的是，在商定的前进道路上获得客户的祝福。

这就把我们带到了“利益相关者买入”的话题上要有一个成功的数据科学项目，您需要利益相关者认可您正在做的事情、您是如何做的以及使用哪些数据。我已经看到一个项目中的分析和建模的整个途径被减慢或完全停止，因为，虽然分析背后的数学和理论是合理的，但是涉众就是不能或不愿意参与进来。有时，这可以通过简单地找到一种更清晰和简洁的方式向涉众解释分析来解决。然而，有时这是不可能的，因为利益相关者反对的原因与他们的商业逻辑、价值观或目标有关。

这一点的重要性怎么强调都不为过。我们应该始终考虑客户的商业逻辑、价值观和目标，确保客户的目标就是我们的目标。强力方法，如放弃观察或假设所有缺失值都可以用平均值代替，只应在客户没有明确指导的情况下作为最后手段使用。即使在这些情况下，你也只有在得到客户同意的情况下才能这么做。你肯定不希望在你已经采用这种方法后，发现公司领导觉得这种方法有点过于粗糙或随意。相反，最好是确保每个人都对项目在每个阶段的进展感到满意。

这看起来似乎是低效和缓慢的，截止日期是任何咨询工作中非常真实的一部分。花更多的时间做额外的分析来看看你得到了什么样的结果，用集中趋势的度量来代替缺失的值，以确定要使用的最佳度量，并向你的客户清楚地解释任何特定选择的利弊，这可能很难让人感觉良好。然而，您的项目时间范围正是您需要以这种方式处理这个问题的原因。它最终会节省时间，确保你不会浪费时间去追求那些你的利益相关者会怀疑，并且可能永远不会同意的事情。

如果您的客户无法提供任何关于如何处理丢失数据的有用指导，那么如何继续的最后一个想法是:看看您是否可以为他们尽可能小而简单地解决问题。假设我们与销售主管的谈话并不顺利。说他们在成本和标价之间的关系上没有一个清晰一致的战略。然后呢？作为头脑风暴解决方案过程的一部分，我会把重点放在减少我们为了解决问题所需的要求的方法上。

在这个特殊的例子中，我们很幸运。这些项目被组织成部门，并在每个部门内被划分成项目类别。我不会简单地计算整个数据集的平均成本或标价，而是会尝试在计算集中趋势之前，将项目类别和子类别中的项目聚集起来。这样，我可以知道，并告诉我的客户，所使用的措施只涉及类似的项目。这样，我就不会要求涉众接受如此粗糙的东西。此外，如果在某些情况下，他们对取得的结果不满意，那么我需要成本或标价的数据点就会少得多。使用这种方法，我对客户的要求可能比试图找出所有项目的平均值要小得多，也简单得多。

我确信会有读者想出各种各样的“如果”,关于一个人可能会发现自己在不同的特定场景中会怎样。我不可能在这篇文章中涵盖所有可能的场景。这些例子只是为了说明处理这个问题时的一般方法和思维方式。我将尝试用几条简单的规则来总结这些想法。

1.总是和你的客户谈论数据中缺失的值。

2.如果他们有明确的指导，就接受吧。如果没有，看看你能否理解数据所描述的过程，以及细节如何转化为你在数据中看到的具体表现。尝试了解他们的业务逻辑、价值和围绕数据中表示的流程的目标。即使他们对你有明确的指导，你也应该试着理解所有这些。如果他们不这样做，这应该用来尝试得出你可以遵循的明确的指导方针。

3.如果所有其他方法都失败了，继续使用简单的模型来推断关系，或者测量集中趋势。

4.在进行之前，一定要获得客户的同意，用你认为最好的方法进行。

遵循这些指导方针总会让你的项目进行得更顺利，让你的客户比你先求助于上面提到的象牙塔答案更开心。