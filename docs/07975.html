<html>
<head>
<title>Worth it? Predicting the Price of Used Cars in Singapore</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">值得吗？预测新加坡二手车的价格</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/project-2-worth-it-predicting-the-price-of-used-cars-in-singapore-e9afe63c75d0?source=collection_archive---------14-----------------------#2019-11-03">https://towardsdatascience.com/project-2-worth-it-predicting-the-price-of-used-cars-in-singapore-e9afe63c75d0?source=collection_archive---------14-----------------------#2019-11-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><h1 id="d376" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">介绍</h1><p id="2b47" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">这个项目的目的是实施一个小型项目，该项目涵盖了数据科学过程的大部分—从数据收集(网络抓取:BeautifulSoup，Python)，数据清理，探索性数据分析，模型训练和测试阶段。数据来源来自新加坡的在线汽车销售门户网站<a class="ae lj" href="https://www.sgcarmart.com/main/index.php" rel="noopener ugc nofollow" target="_blank"> SgCarMart </a>。</p><p id="0877" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated"><strong class="kn ir"> <em class="lp">概述:<br/> </em> </strong>该项目主要围绕几个核心技能展开:</p><ul class=""><li id="3590" class="lq lr iq kn b ko lk ks ll kw ls la lt le lu li lv lw lx ly bi translated"><em class="lp">网络抓取</em></li><li id="226b" class="lq lr iq kn b ko lz ks ma kw mb la mc le md li lv lw lx ly bi translated"><em class="lp">数据清理</em></li><li id="0c2d" class="lq lr iq kn b ko lz ks ma kw mb la mc le md li lv lw lx ly bi translated"><em class="lp">暴露于 sklearn，statsmodel </em></li><li id="1a24" class="lq lr iq kn b ko lz ks ma kw mb la mc le md li lv lw lx ly bi translated"><em class="lp">利用 OLS 回归</em></li><li id="3b10" class="lq lr iq kn b ko lz ks ma kw mb la mc le md li lv lw lx ly bi translated"><em class="lp">通过评估模式的 p 值和 R 值，消除对响应变量影响不大的特征</em></li></ul><p id="06af" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">买车可能只是你人生中最大的一笔购买(尤其是在新加坡，我们的汽车价格过高是出了名的)。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi me"><img src="../Images/9836bb9338b2c8f799d6a02e426085ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ISSDzCiVLEk9Lj_oMnLO-A.png"/></div></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">Vin Diesel also seems to agree (<a class="ae lj" href="https://www.asiaone.com/static/multimedia/gallery/130523_ffcars/pic35.html" rel="noopener ugc nofollow" target="_blank">photo credits here</a>)</figcaption></figure><p id="f654" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">因此，如果一个人想在新加坡拥有一辆车，他应该花相当多的时间去思考他到底在寻找什么。</p><p id="dbcb" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">然而，决定新加坡汽车价格的因素非常复杂(想想税收、COE、销售人员追加销售等)。因此，量化一辆物有所值的汽车会是一个令人沮丧和耗时的过程。</p><h1 id="2941" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">该项目的目标</h1><p id="9cbc" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">为了弥合这一差距，本项目旨在<strong class="kn ir"> <em class="lp">利用数据</em> </strong>实现一个<strong class="kn ir"> <em class="lp">线性回归模型</em> </strong> <em class="lp"> </em>来调查影响<strong class="kn ir"><em class="lp"/></strong>二手车价格的因素，并提供一种比较基准的形式，量化一辆车的合理价格范围。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mu"><img src="../Images/2b39eb0dcd8b2512d7d8760ede0ff26f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0wi3K7Uz59PmwOu-1x1sZA.png"/></div></div></figure><p id="597f" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">希望我的模型能够根据二手车的一些典型的、容易获得的特征来预测汽车的价格，以告知潜在的车主做出更好的购买决定。</p><p id="2c74" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">本项目只考虑乘用车(毕竟这是自用)。普通大众不使用的货车/卡车、公共汽车和货车等商用车辆不包括在本分析中。</p><h1 id="dad7" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">第一部分:网页抓取</h1><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/f4d24a1974bf154deb6ae7946ea08d8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:682/format:webp/1*WO-0nEPd0rTUnkCGvwYkqQ.jpeg"/></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk"><a class="ae lj" href="http://aitechcentral.com/blog/web-scraping-techniques-python-beautifulsoup/" rel="noopener ugc nofollow" target="_blank">Photo credits</a></figcaption></figure><p id="f9ff" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">啊，是的。项目中最乏味、最耗时的部分。问问任何经历过梅蒂斯训练营的人，当你提到“网络搜集”时，他们会不寒而栗。我已经为 web 抓取 sgcarmart 编写了代码(包括 try-except 函数，用于处理实际抓取过程中可能出现的错误),如果您打算使用它的话。代码可以在我的 github 上的<a class="ae lj" href="https://github.com/xianjinseow92/projects/tree/master/Project_2_SgCarMart%20Price%20Prediction_2" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="d040" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">web 抓取过程是使用 Python 3.7.3 结合一个名为 BeautifulSoup 的包来完成的。</p><p id="1e6c" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">这是通过遍历包含 100 个二手车个人列表搜索结果的<a class="ae lj" href="https://www.sgcarmart.com/used_cars/listing.php?BRSR=0&amp;RPG=20&amp;AVL=2&amp;VEH=1" rel="noopener ugc nofollow" target="_blank">搜索页面来完成的。然后，每个个人列表</a>的<a class="ae lj" href="https://www.sgcarmart.com/new_cars/newcars_overview.php?CarCode=12518" rel="noopener ugc nofollow" target="_blank">链接被附加到一个列表中，并且每个个人链接被访问以抓取二手车的特征。在抓取这些特征时，它们随后被附加到数据帧。</a></p><h1 id="6e36" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">第 2 部分:数据</h1><p id="c3b9" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在网络抓取之后，我的数据框架包含 3987 行(观察)和 17 列(特征)的数据。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mw"><img src="../Images/28a22c468c860cfbe50af9ba5e8c946e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qs5SNIUo2oVB2EgYmUiseA.png"/></div></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">A random sample of 5 rows of my dataframe</figcaption></figure><p id="8cff" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">经检查，我的数据帧中有空值。这是因为有时并非所有卖家都会在列表中提供完整的汽车信息。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mx"><img src="../Images/44da69c636f0f478f3dc897ac7de0fc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oGsyoIybYAG_vvVOxmq1Vg.png"/></div></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">As seen above.</figcaption></figure><p id="07a1" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">因为这些条目非常特定于汽车列表，所以我决定删除缺少值的数据行，因为这将严重影响我的分析结果。在去掉 NaN 值之后，我的数据帧只剩下 2584 行(观察值)和 17 列(特征)的数据——对于训练线性回归模型来说，这仍然是一个相当大的数量。</p><p id="41c3" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">一个新的特性<strong class="kn ir"> <em class="lp">，</em> </strong>车龄，也被用来代替“制造年份”，因为对我来说，更直观地了解一辆车的年龄而不是它的制造时间。</p><p id="b61b" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">通过创建虚拟变量，车辆类型和汽车品牌也被附加到数据框架中。</p><p id="f580" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated"><strong class="kn ir">挑战:细分汽车</strong></p><p id="2ee3" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">从基本的奇瑞 QQ 到豪华的宾利欧陆 GT，汽车的声望各不相同。还可以从在这个维度上分割车辆中获得进一步的见解。浏览数据，我们可以通过几种潜在的方法对车辆进行细分:</p><ol class=""><li id="dc21" class="lq lr iq kn b ko lk ks ll kw ls la lt le lu li my lw lx ly bi translated"><strong class="kn ir">车型</strong> ( <code class="fe mz na nb nc b">VEHICLE_TYPE</code>):车型分为 7 类，分别是中型轿车、豪华轿车、两厢轿车、MPV、SUV、跑车、旅行车。每辆车只能分配一种车型。这种分类可能是模糊的，因为高档和大众市场品牌在所有这些细分市场生产汽车。例如，根据 sgcarmart 的定义，丰田凯美瑞、宝马 520i 和劳斯莱斯 Ghost 都属于豪华轿车。车辆类型不是分割车辆的好方法。</li><li id="3ed7" class="lq lr iq kn b ko lz ks ma kw mb la mc le md li my lw lx ly bi translated"><strong class="kn ir">品牌</strong> ( <code class="fe mz na nb nc b">BRAND</code>):一辆车的品牌可以告诉我们很多关于一辆车的信誉水平。仅品牌本身就能告诉我们很多关于汽车的<strong class="kn ir"> <em class="lp">感知合意性</em> </strong>的信息。例如，当我们听到有人开宝马时，一般外行人的第一个想法可能是“这是一个有声望的品牌”。因此，将车辆归入各自的品牌是有意义的。</li></ol><p id="63c5" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">根据我对新加坡汽车品牌的了解(也是在谷歌的帮助下)，汽车被分为 6 个部分，分别是<em class="lp">异国情调、超豪华、豪华、中级、经济</em>和<em class="lp">预算</em>。</p><p id="4c1b" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">提议的分段及其各自的构成如下:</p><ol class=""><li id="3d92" class="lq lr iq kn b ko lk ks ll kw ls la lt le lu li my lw lx ly bi translated"><strong class="kn ir">异国情调</strong>:阿斯顿·马丁、法拉利、兰博基尼、迈凯轮</li><li id="d3b7" class="lq lr iq kn b ko lz ks ma kw mb la mc le md li my lw lx ly bi translated"><strong class="kn ir">超豪华</strong>:宾利、路虎、玛莎拉蒂、保时捷、劳斯莱斯</li><li id="992e" class="lq lr iq kn b ko lz ks ma kw mb la mc le md li my lw lx ly bi translated"><strong class="kn ir">豪华车</strong>:奥迪、宝马、捷豹、吉普、雷克萨斯、莲花、奔驰、三菱、沃尔沃</li><li id="5a7c" class="lq lr iq kn b ko lz ks ma kw mb la mc le md li my lw lx ly bi translated"><strong class="kn ir">中级</strong>:阿尔法罗密欧、克莱斯勒、英菲尼迪、迷你、欧宝、萨博、大众</li><li id="3895" class="lq lr iq kn b ko lz ks ma kw mb la mc le md li my lw lx ly bi translated"><strong class="kn ir">经济</strong>:雪佛兰、雪铁龙、菲亚特、福特、本田、现代、起亚、马自达、三菱、日产、标致、雷诺、斯柯达、双龙、斯巴鲁、铃木、丰田</li><li id="057e" class="lq lr iq kn b ko lz ks ma kw mb la mc le md li my lw lx ly bi translated"><strong class="kn ir">预算</strong>:大发、宝腾</li></ol><p id="4fc3" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">在将车辆划分为不同的声望类别后，就会出现列数过多的问题。数据集中的一些汽车品牌在新加坡太不常见，因此可能会扭曲定价，因为它们的稀有性与其感知的合意性相反。因此，我将以下品牌更名为“其他”。</p><p id="4b29" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">7.<strong class="kn ir">其他:</strong>欧宝、双龙、宝腾、大发、菲亚特、阿尔法罗密欧、斯柯达、悍马、阿斯顿马丁、路特斯、福特、Jeep。</p><p id="8844" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">现在我们已经准备好了数据框架，是时候进入构建线性回归模型的下一步了。</p><h1 id="b63d" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">第 3 部分:特性选择</h1><p id="8d19" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">首先进行特征选择，不包括汽车的<strong class="kn ir"><em class="lp"/></strong>品牌，以仅基于它们的特征(里程、发动机容量、车龄、公开市场价值等)获得一辆汽车的基本价格。绘制了要素相对于价格的相关矩阵的热图，以便于可视化任何具有多重共线性或与价格拟合不佳的预测变量(要素)。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nd"><img src="../Images/ebacd262161e8642fd2ccbd0c1663dc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2-NLr-5-72_mjGRXxnz0Bg.png"/></div></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">Correlation Matrix Heatmap</figcaption></figure><p id="9e2d" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">我们可以立刻从热图(被亮红点降级)中看到，<strong class="kn ir"> OMV </strong>和<strong class="kn ir"> ARF </strong>高度相关(<strong class="kn ir"> 0.96 相关</strong>)。这是理所当然的——ARF，额外的注册费(天哪，在新加坡拥有一辆汽车涉及的费用实在太多了),实际上是根据车辆的<strong class="kn ir"> OMV </strong>(公开市场价值)的百分比计算出来的价值。我们还观察到<strong class="kn ir">发动机容量</strong>和<strong class="kn ir">道路税</strong>有很高的相关性——因为<strong class="kn ir">道路税</strong>本质上是从<strong class="kn ir">发动机容量</strong>计算出来的。我们不需要这些高度相关的预测变量，因为它们只是在解释同样的事情。然后去掉高度相关的变量，我们最后得到这个:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi ne"><img src="../Images/ddbf40cf72542e46c980f473ed60bcd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C1Ya2isjsHdGHTuCoKvkeQ.png"/></div></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">A much more managaeable dataset with fewer features</figcaption></figure><p id="5e74" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated"><strong class="kn ir"> Pairplot:可视化价格特征趋势</strong></p><p id="5184" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">在绘制配对图时，我们看到特征(配对图的顶行)与价格之间存在某种线性关系。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nf"><img src="../Images/97f9769126687225d16bf679975a34fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wnT4NkDHuRmcbaujs6Ibjw.png"/></div></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">Price vs Un-Transformed Features relationships</figcaption></figure><p id="691c" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">然而，数据点似乎沿着 y 轴有点间隔。因此，我们仍然可以通过对价格和里程应用对数变换来改进数据点的拟合。</p><div class="mf mg mh mi gt ab cb"><figure class="ng mj nh ni nj nk nl paragraph-image"><img src="../Images/0f7cc5f0fdad8216f63d88e8b3098523.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*qPz5Roxa3HnyhEirhMfRFQ.png"/></figure><figure class="ng mj nh ni nj nk nl paragraph-image"><img src="../Images/f8a8486ede65e4248b122beded804c26.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*YeLQN1GkCDliVmeGe877Tg.png"/><figcaption class="mq mr gj gh gi ms mt bd b be z dk nm di nn no">Price Distribution before (left) and after (right) Applying a Log Transformation</figcaption></figure></div><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi np"><img src="../Images/2c774a1a65e82540e00dbf67d7de4e4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gDL2i0zGAyieztkL_XDAmg.png"/></div></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">Log Price and Feature relationships after applying Log Transformation</figcaption></figure><p id="2964" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">将 log 应用于 price 后，我们可以看到这些特性现在与 log price 有了更清晰的线性关系(参见 pairplots 的第一行)。</p><p id="9359" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">我已经尝试将汽车品牌纳入模型。然而，他们在模型中引入了太多的共线性和噪声，导致它产生了不切实际的好结果(非常好的 R 分数)。因此，本分析不包括它们。用于训练模型的最终特征是:</p><p id="d574" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated"><strong class="kn ir"> <em class="lp">【目标变量(1) </em> </strong>:日志价格</p><p id="ddd1" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated"><strong class="kn ir"> <em class="lp">预测变量(9): </em> </strong> <em class="lp"> </em>日志里程(km)、发动机容量(CC)、车龄(年数)、OMV(公开市场价值，美元)、COE 价格(美元)、COE 剩余天数(天数)、整备重量(kg)、车主数量(整数)、变速器(1 或 0)</p><h1 id="7060" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">第 4 部分:模型选择</h1><p id="efc5" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">有了最终确定的特征，我考虑使用简单的线性回归、Lasso、Ridge、ElasticNet 和多项式回归对数据建模。下面的步骤强调了我为这种情况选择最佳模型的方法。</p><p id="3113" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">我首先找出 Lasso、Ridge、ElasticNet 和 ElasticNet 的最佳 Alphas，然后将数据分成 60–20–20 训练/交叉验证/测试分割，用于模型选择。Lasso、Ridge 和 ElasticNet 中的最佳 alphas 用于此训练/交叉验证测试。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nq"><img src="../Images/2b3bc1d767e1c0e84713082d996d3a40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y79NvkELrCb2f7tsucvPgw.png"/></div></div></figure><p id="8298" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">该模型在整个数据集的 60%上进行训练，并针对整个数据集的 20%进行验证。这种训练/验证通过 5 重验证来完成，以便更全面地获得每个测试模型的 R 值。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nr"><img src="../Images/853f19e3e54b9b01f5a923ad2906aa76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ShP-naN078-_xTdMNGC4NA.png"/></div></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">Mean R² scores of each Linear Model over 5-fold validation test</figcaption></figure><p id="8fd8" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">如上所述，在 5 重训练/交叉验证测试中，所有模型的平均 R 值均为 0.913，多项式回归的例外为 0.829。由于它们如此相似，我选择使用最普通的线性回归形式:<strong class="kn ir"> <em class="lp">简单线性回归</em> </strong>来对数据建模，以便于使用(不像其他模型那样需要烦人的超参数)。</p><h1 id="4f4b" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">第 5 部分:训练/测试简单线性回归模型</h1><p id="de39" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">完成训练/交叉验证后，最后是在整个数据集上训练模型(phew)的时候了。这一次，它以 80–20 的比例完成(80%的数据用于训练模型，20%的未知数据用于测试模型的功效)，从而为模型提供更多的训练数据以提高其性能。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi ns"><img src="../Images/19b93af7c13dbf0f33a7659f76479c64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8r_F44cOnA_VRa_Vg1MZyg.png"/></div></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">80% of data used for training, and 20% for testing</figcaption></figure><p id="dda8" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">运行测试后，简单的线性回归返回 0.91 的 R 值。这意味着该模型解释了 91%的数据变化，另外 9%是由于随机噪声造成的。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nt"><img src="../Images/0804f9abe6031360f7bb9fed0131b9ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K-ZOW1C9YHZIB9zzAV4FMw.png"/></div></div></figure><h1 id="5926" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">第 6 部分:使用模型</h1><p id="1c2a" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">那么这对我们意味着什么呢？从结果总结中，它告诉我们，<strong class="kn ir"> <em class="lp">系数最高的特征</em> </strong>是车龄和发动机 CC(意思是这些对价格影响最大！)在做了一些反向转换之后(不要忘了——我们的目标变量被记录了)这个模型基本上告诉我们:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nu"><img src="../Images/435fd199e86ec0e8d3370859c033a77b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rufk62CqyGHJfpK-u8eThw.png"/></div></div></figure><p id="5a11" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">其结果我们可以直观地理解。一辆车越旧，它的价值就越贬值。此外，发动机容量的增加通常归因于更大的汽车或更强大的汽车。因此，发动机排量的增加也会导致价格的增加。虽然我们已经直观地知道了这些事情，但模型为我们提供了一个估计，以量化这些因素对价格上涨的影响程度。</p><p id="f6a2" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">这个模型怎么用？嗯，只需要汽车的典型的、容易获得的信息(车龄、里程、发动机 cc 等)。)，我们可以根据汽车的物理特征(不考虑品牌)得出汽车的价格基准。</p><p id="caa8" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">然后，用户可以将这一基准与二手车列表价格进行交叉检查，然后根据汽车的品牌或其他特殊功能，自己决定是否接受更高的价格。</p><h1 id="b878" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">第 7 部分:来自模型的洞察力</h1><p id="55ba" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><strong class="kn ir"> <em class="lp">什么时候买车好？</em>T11】</strong></p><ul class=""><li id="7e85" class="lq lr iq kn b ko lk ks ll kw ls la lt le lu li lv lw lx ly bi translated">新上市的汽车型号通常定价较高。耐心点，等一会儿价格降下来再买。</li><li id="fb27" class="lq lr iq kn b ko lz ks ma kw mb la mc le md li lv lw lx ly bi translated">价格下降的唯一时间是价格下降的时候。真正的好买卖是在 COE 低的时候。</li></ul><p id="d30f" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">当然，除了这个模型告诉我们的以外，对于任何进行金融投资(比如汽车)的人来说，还有更多建议:</p><p id="beb2" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated"><strong class="kn ir"> <em class="lp">在买车之前，结合使用这款车型，你可以问自己几个问题:</em> </strong></p><ol class=""><li id="0eb6" class="lq lr iq kn b ko lk ks ll kw ls la lt le lu li my lw lx ly bi translated">我的预算是多少？<br/> 定一个预算，不要超出。</li><li id="cf3d" class="lq lr iq kn b ko lz ks ma kw mb la mc le md li my lw lx ly bi translated"><em class="lp">我需要什么类型的汽车？<br/> </em>需要大型 MPV 摆渡全家吗？或者你的驾驶技术如此糟糕，以至于你需要一辆小车来避免太多的道路危险？(我说的是我自己，很明显。)</li><li id="0dc6" class="lq lr iq kn b ko lz ks ma kw mb la mc le md li my lw lx ly bi translated"><em class="lp">我想要什么</em> <strong class="kn ir"> <em class="lp">品牌</em> </strong> <em class="lp">的车？把你的选择范围缩小到几个品牌。从太多的品牌中选择会非常累人和耗时。总的来说，<em class="lp">日本</em>品牌代表着最佳性价比(有趣的是，这也反映在我从 sgcarmart 获得的数据中，丰田在所有汽车品牌中转售频率最高)。<em class="lp">韩国</em>、<em class="lp">马来西亚</em>、<em class="lp">中国</em>品牌是为预算<strong class="kn ir"><em class="lp"/></strong>紧张的买家准备的。</em></li></ol><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nv"><img src="../Images/0a7b0f7e4f03957f019682b707486af6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tMNEPygBRVWhOVbxJUMp-A.png"/></div></div></figure><h1 id="20d2" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">第八部分:未来</h1><p id="1a47" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">使用我创建的当前模型可以做更多的事情。将来，除了利用汽车的物理特征为用户提供更多的粒度和定制外，我还希望将品牌<strong class="kn ir"><em class="lp"/></strong>纳入模型的预测功能。</p><h1 id="96e8" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">第 9 部分:有趣的发现</h1><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/f49e20ec9a35e3790caea3fbdcd0791c.png" data-original-src="https://miro.medium.com/v2/resize:fit:380/format:webp/1*z-vbI_4vjAk_YLFln9zNBg.png"/></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">That’s bollocks</figcaption></figure><p id="01ec" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">豪华品牌梅赛德斯-奔驰实际上是转售频率第二高的汽车，在整个 2584 次观察中有 374 次。谁会想到呢？人们对他们的奔驰不满意吗？维护太贵了吗？或者可能是因为卖奔驰容易？这无疑是进一步探索的一些思考。</p><h1 id="13df" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">第十部分:临别赠言——个人学习要点</h1><ol class=""><li id="da49" class="lq lr iq kn b ko kp ks kt kw nx la ny le nz li my lw lx ly bi translated">尽可能不要变换你的预测变量。很难向他人解释你的预测因素的变化是如何导致你的预测增加的。在我的例子中，我对目标变量(价格)应用了一个 log。因此，结果必须用百分比来解释，而不是实际的、外行人的值(例如，x 增加一个单位将导致 y 增加 100 美元)。</li><li id="d3de" class="lq lr iq kn b ko lz ks ma kw mb la mc le md li my lw lx ly bi translated">规模。数据的规模非常重要。例如，我的价格值与里程数的比例如此不同。因此，模型中出现的系数<strong class="kn ir"> <em class="lp">极小</em> </strong>。人们(包括我自己)很难理解每增加 1 公里里程会导致价格上涨 0.0000001。</li><li id="80f0" class="lq lr iq kn b ko lz ks ma kw mb la mc le md li my lw lx ly bi translated">因此，在开始任何项目之前，也要时刻记住受众。你想给人们带来哪些真知灼见？你如何为人们增值？以一种你想把这个模型卖给人们的方式来设计你的项目，并找到最简单的方法来解释和说服人们它的功效。</li></ol><p id="4284" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">和往常一样，如果你认为我可以改进我的代码，如果你在重现这些步骤时有困难，或者如果你认为这对你有帮助，请在评论中告诉我！</p><p id="be70" class="pw-post-body-paragraph kl km iq kn b ko lk kq kr ks ll ku kv kw lm ky kz la ln lc ld le lo lg lh li ij bi translated">也可以在<a class="ae lj" href="https://www.linkedin.com/in/seow-xian-jin/" rel="noopener ugc nofollow" target="_blank"> linkedin </a>上联系我。你可以在这里找到我的 github <a class="ae lj" href="https://github.com/xianjinseow92/projects" rel="noopener ugc nofollow" target="_blank">回购</a>。</p></div></div>    
</body>
</html>