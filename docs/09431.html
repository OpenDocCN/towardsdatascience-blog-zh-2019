<html>
<head>
<title>Knowledge Graph Queries Using Stardog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Stardog 的知识图查询</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/knowledge-graph-queries-using-stardog-ba882f84ceea?source=collection_archive---------21-----------------------#2019-12-12">https://towardsdatascience.com/knowledge-graph-queries-using-stardog-ba882f84ceea?source=collection_archive---------21-----------------------#2019-12-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="363f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Stardog:一个允许你探索和查询知识图表的平台。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/436a360a2d977bb76503a2856ceaed9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gOfURMkow-VYuHhH6EGGmA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Image by Stardog. Knowledge graph visualization in Studio</figcaption></figure><p id="06a2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Stardog 不仅仅是一个查询引擎，它是一个前沿平台，允许你探索和查询知识图表。</p><p id="1efd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Stardog 可用于在知识图上运行 SPARQL 查询。如果你不熟悉知识图或者 SPARQL 查询，我建议你看我的博客:<a class="ae lu" rel="noopener" target="_blank" href="/extract-and-query-knowledge-graphs-using-apache-jena-sparql-engine-5c66648797a4">使用 Apache Jena (SPARQL 引擎)提取和查询知识图</a>。对于本教程，您可以下载任何知识图表，如<a class="ae lu" href="http://aims.fao.org/vest-registry/vocabularies/agrovoc" rel="noopener ugc nofollow" target="_blank"> AGROVOC </a>，或者您可以创建自己的图表，如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/2e3ff476e249fc13e3670f860e41a6d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hQQmlfDJrf2aatKlmEYPow.png"/></div></div></figure><p id="218e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">目前，图表如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lw"><img src="../Images/3d0208e93f01e730ad5f5608b4d2af77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IFBIKcMhgd2q2UGiXbgahQ.png"/></div></div></figure><h1 id="a398" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">明星日志</h1><blockquote class="mp mq mr"><p id="c585" class="ky kz ms la b lb lc ju ld le lf jx lg mt li lj lk mu lm ln lo mv lq lr ls lt im bi translated">知识图的功能取决于它所能访问的数据，因此我们构建了数据库连接器来简化数据的统一。Stardog 拥有所有主要 SQL 系统和最流行的 NoSQL 数据库的连接器。此外，我们构建了 BITES 管道来处理您的非结构化数据，如研究论文、简历和监管文档。BITES 使用 NLP 实体识别来识别和提取概念，将这些数据关系添加到知识图中。一旦你的数据在 Stardog 中统一，你就可以在每个数据点上看到 360 度的视图。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/ebdbd6dbde2fd7b7cdbeadd37b92e5d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*_0_aOERLerPm_Lk5-Qwxmw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Image from <a class="ae lu" href="https://www.stardog.com/" rel="noopener ugc nofollow" target="_blank">Stardog</a></figcaption></figure><h1 id="79b2" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">下载并安装 Stardog</h1><p id="9d96" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">有不同的下载选项，您可以轻松运行下面的<code class="fe nc nd ne nf b">curl</code>命令:</p><pre class="kj kk kl km gt ng nf nh ni aw nj bi"><span id="cda2" class="nk ly it nf b gy nl nm l nn no">curl <a class="ae lu" href="https://downloads.stardog.com/stardog/stardog-latest.zip" rel="noopener ugc nofollow" target="_blank">https://downloads.stardog.com/stardog/stardog-latest.zip</a> –output stardog-latest.zip</span></pre><p id="cf4e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后使用以下命令将其解压缩:</p><pre class="kj kk kl km gt ng nf nh ni aw nj bi"><span id="ccdf" class="nk ly it nf b gy nl nm l nn no">unzip stardog-latest.zip</span></pre><p id="e958" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在你应该可以运行命令<code class="fe nc nd ne nf b">./stardog-admin.</code>了，我建议你添加路径到你的<code class="fe nc nd ne nf b">.bsahrc</code>或者你可以直接使用<code class="fe nc nd ne nf b">export PATH=/home/.../stardog:$PATH.</code>之后，你需要使用下面的命令启动 Stardog 引擎:</p><pre class="kj kk kl km gt ng nf nh ni aw nj bi"><span id="57cb" class="nk ly it nf b gy nl nm l nn no">stardog-admin server start</span></pre><p id="ed43" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您应该得到以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/3e31ac9a26adaf8ee35d26c3a477e949.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*irpxNiKzTSy-NPLstlfezQ.png"/></div></div></figure><h1 id="33e9" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">建立一个数据库</h1><p id="0ada" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">然后打开另一个终端，运行下面的命令，从给定的知识图构建一个数据库。</p><pre class="kj kk kl km gt ng nf nh ni aw nj bi"><span id="e759" class="nk ly it nf b gy nl nm l nn no">stardog-admin db create -n MoDB data.nt</span></pre><p id="cb3a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果运行成功，您应该会得到类似的输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/f5ccbe3e403d2d5dd918b1a126018267.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tIIciNHfcjH7NFLp0PVKGg.png"/></div></div></figure><p id="f3a5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">注意:<code class="fe nc nd ne nf b">MoDB</code>是数据库名，<code class="fe nc nd ne nf b">data.nt</code>是你的知识图名。</p><h1 id="fb93" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">运行 SPARQL 查询</h1><p id="4fe0" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">最简单的查询之一是返回所有的三元组。这是查询:</p><pre class="kj kk kl km gt ng nf nh ni aw nj bi"><span id="f981" class="nk ly it nf b gy nl nm l nn no">stardog query MoDB "select * where { ?s ?p ?o }"</span></pre><p id="b8c2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是输出结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/0bd6bdde2a1e7c9f19c7fd273acd1484.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*plPnEW22NpLNja2KAZd5QQ.png"/></div></div></figure><p id="2f27" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">或者你可以通过提问来搜索所有感兴趣的东西<code class="fe nc nd ne nf b">Mohamed</code>？(该查询将返回所有的三元组，其中<code class="fe nc nd ne nf b">interestedIn</code>是关系)</p><pre class="kj kk kl km gt ng nf nh ni aw nj bi"><span id="4a7c" class="nk ly it nf b gy nl nm l nn no">stardog query MoDB "select * where { ?s &lt;<a class="ae lu" href="http://example.com#interestedIn" rel="noopener ugc nofollow" target="_blank">http://example.com#interestedIn</a>&gt; ?o }"</span></pre><p id="c66a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/3a832cd3da71a4d9ec6dc8bd09119a68.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*B4TQwixgNFso0gJTCoByFw.png"/></div></figure><p id="947b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">到目前为止，我们一直直接从终端运行查询。相反，您可以将查询写到一个文件中，我们称之为<code class="fe nc nd ne nf b">que.sparql.</code>要从文件中执行前面的查询，请在<code class="fe nc nd ne nf b">que.sparql</code>中粘贴以下内容:</p><pre class="kj kk kl km gt ng nf nh ni aw nj bi"><span id="07c5" class="nk ly it nf b gy nl nm l nn no">select * where {<br/> ?s &lt;<a class="ae lu" href="http://example.com#interestedIn" rel="noopener ugc nofollow" target="_blank">http://example.com#interestedIn</a>&gt; ?o<br/> }</span></pre><p id="c5be" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要执行查询文件，请运行以下命令:</p><pre class="kj kk kl km gt ng nf nh ni aw nj bi"><span id="c7ca" class="nk ly it nf b gy nl nm l nn no">stardog query MoDB que.sparql</span></pre><h1 id="f10f" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">返回最短路径</h1><p id="64ba" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">以下查询将返回两个实体之间的最短路径，在我们的示例中为<code class="fe nc nd ne nf b">Mohamed</code>和<code class="fe nc nd ne nf b">Jim</code>:</p><pre class="kj kk kl km gt ng nf nh ni aw nj bi"><span id="6b75" class="nk ly it nf b gy nl nm l nn no">stardog query MoDB "PATHS START ?x = &lt;<a class="ae lu" href="http://example.com/Mohamed" rel="noopener ugc nofollow" target="_blank">http://example.com/Mohamed</a>&gt; END ?y = &lt;<a class="ae lu" href="http://example.com/Jim" rel="noopener ugc nofollow" target="_blank">http://example.com/Jim</a>&gt; VIA ?p"</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/aabbe595abd4e8fdd81035a13ba0aca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ghwdO2iIe9FbSgv7RaFH4g.png"/></div></div></figure><h1 id="b611" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">返回所有可能的路径</h1><p id="e2ad" class="pw-post-body-paragraph ky kz it la b lb mx ju ld le my jx lg lh mz lj lk ll na ln lo lp nb lr ls lt im bi translated">默认情况下，Stardog 将返回最短路径。要返回所有路径，只需在<code class="fe nc nd ne nf b">PATHS</code>后添加关键字<code class="fe nc nd ne nf b">ALL</code>:</p><pre class="kj kk kl km gt ng nf nh ni aw nj bi"><span id="7a0a" class="nk ly it nf b gy nl nm l nn no">stardog query MoDB "PATHS ALL START ?x = &lt;<a class="ae lu" href="http://example.com/Mohamed" rel="noopener ugc nofollow" target="_blank">http://example.com/Mohamed</a>&gt; END ?y = &lt;<a class="ae lu" href="http://example.com/Jim" rel="noopener ugc nofollow" target="_blank">http://example.com/Jim</a>&gt; VIA ?p"</span></pre><p id="8b54" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/f13424c48cbc1b906723dc5f590ba8d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n-CSgVcZQYye5SN55wgZLA.png"/></div></div></figure><p id="e979" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请注意，如果您从<code class="fe nc nd ne nf b">Mohamed</code>查询到<code class="fe nc nd ne nf b">Mike</code>，您将只获得一条路径，因为从<code class="fe nc nd ne nf b">pasta</code>到<code class="fe nc nd ne nf b">Mike</code>没有关系。</p><p id="e91e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这些查询可以应用于任何知识图。</p></div></div>    
</body>
</html>