<html>
<head>
<title>Recommender System in Python — Part 1 (Preparation and Analysis)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 中的推荐系统第一部分(准备和分析)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/recommender-system-in-python-part-1-preparation-and-analysis-d6bb7939091e?source=collection_archive---------7-----------------------#2019-10-02">https://towardsdatascience.com/recommender-system-in-python-part-1-preparation-and-analysis-d6bb7939091e?source=collection_archive---------7-----------------------#2019-10-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/b9cb133f8513cc7fe3de22163f5076f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ujOKHsXX0ysxCBbAtj1INg.jpeg"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Photo by <a class="ae jg" href="https://www.pexels.com/@pixabay?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pixabay </a>from <a class="ae jg" href="https://www.pexels.com/photo/close-up-of-human-hand-327533/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><div class=""/><p id="a2c3" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就像我几天前做的 Kickstart 活动分析项目一样，今天我将分析电影评级。如果你错过了上一篇文章，这里有它的链接:</p><div class="is it gp gr iu le"><a rel="noopener follow" target="_blank" href="/analyzing-380k-kickstarter-campaigns-10649bbf4e91"><div class="lf ab fo"><div class="lg ab lh cl cj li"><h2 class="bd jk gy z fp lj fr fs lk fu fw ji bi translated">分析 38 万 Kickstarter 活动</h2><div class="ll l"><h3 class="bd b gy z fp lj fr fs lk fu fw dk translated">让我们探讨一下 Kickstarter 活动的一些注意事项</h3></div><div class="lm l"><p class="bd b dl z fp lj fr fs lk fu fw dk translated">towardsdatascience.com</p></div></div><div class="ln l"><div class="lo l lp lq lr ln ls ja le"/></div></div></a></div><p id="d040" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">推荐系统是大多数较大的(<em class="lt">和较小的</em>)网上商店、像<a class="ae jg" href="https://www.netflix.com/" rel="noopener ugc nofollow" target="_blank">【网飞】</a>这样的电影/电视节目网站以及许多其他网站的核心。根据维基百科，这是“官方”的定义:</p><blockquote class="lu lv lw"><p id="6f3e" class="kg kh lt ki b kj kk kl km kn ko kp kq lx ks kt ku ly kw kx ky lz la lb lc ld im bi translated">推荐系统是<a class="ae jg" href="https://en.wikipedia.org/wiki/Information_filtering_system" rel="noopener ugc nofollow" target="_blank">信息过滤系统</a>的一个子类，它试图预测用户对一个项目的“评分”或“偏好”。它们主要用于商业应用。[1]</p></blockquote><p id="fc8c" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">存在两种主要类型的推荐系统:</p><ol class=""><li id="f8cf" class="ma mb jj ki b kj kk kn ko kr mc kv md kz me ld mf mg mh mi bi translated">协作过滤(Collaborative Filtering)——基于这样的假设:过去同意的人将来也会同意，并且他们会像过去一样喜欢相似种类的项目</li><li id="419b" class="ma mb jj ki b kj mj kn mk kr ml kv mm kz mn ld mf mg mh mi bi translated"><strong class="ki jk">基于内容的</strong> —基于项目的描述和用户偏好的配置文件。他们将推荐视为特定于用户的分类问题，并根据产品特征学习用户喜欢和不喜欢的分类器。</li></ol><p id="f713" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当然，这两者之间存在一些派生，但目前这已经足够了。让我们把重点放在这篇文章要讲的内容上。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="f009" class="mv mw jj bd mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns bi translated">为什么要看这篇文章？</h1><p id="1c2f" class="pw-post-body-paragraph kg kh jj ki b kj nt kl km kn nu kp kq kr nv kt ku kv nw kx ky kz nx lb lc ld im bi translated">有两个主要好处:</p><ol class=""><li id="3482" class="ma mb jj ki b kj kk kn ko kr mc kv md kz me ld mf mg mh mi bi translated">你将深入到推荐系统的世界中——有很多有趣的事情要做，也是添加到简历中的一件好事</li><li id="8b94" class="ma mb jj ki b kj mj kn mk kr ml kv mm kz mn ld mf mg mh mi bi translated">您将经历另一个探索性的数据分析过程，进一步提高您在该领域的技能</li></ol><p id="d197" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki jk"> <em class="lt">听起来像是对你有益的事情？</em> </strong>好，我们开始吧。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="efa3" class="mv mw jj bd mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns bi translated">这篇文章的结构是怎样的？</h1><p id="bb65" class="pw-post-body-paragraph kg kh jj ki b kj nt kl km kn nu kp kq kr nv kt ku kv nw kx ky kz nx lb lc ld im bi translated">这是我将要写的关于推荐系统的两篇文章中的第一篇。它涵盖了数据收集、探索性数据分析和数据可视化的过程。虽然这篇文章不会完全涵盖创建推荐系统的过程，但是每个数据科学项目都必须首先熟悉数据本身。</p><p id="c9c1" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想知道，本系列的第二篇文章将介绍如何用 Python 从头开始构建推荐系统，所以那篇文章将是本系列的核心，而这篇文章将会让你感到温暖。</p><p id="5ee2" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">帖子内容如下:</p><ol class=""><li id="d377" class="ma mb jj ki b kj kk kn ko kr mc kv md kz me ld mf mg mh mi bi translated">数据收集和导入</li><li id="f41e" class="ma mb jj ki b kj mj kn mk kr ml kv mm kz mn ld mf mg mh mi bi translated">基础数据准备</li><li id="4f1b" class="ma mb jj ki b kj mj kn mk kr ml kv mm kz mn ld mf mg mh mi bi translated">探索电影发行年份</li><li id="202c" class="ma mb jj ki b kj mj kn mk kr ml kv mm kz mn ld mf mg mh mi bi translated">评级探索</li><li id="c0ae" class="ma mb jj ki b kj mj kn mk kr ml kv mm kz mn ld mf mg mh mi bi translated">电影类型探索</li><li id="6f68" class="ma mb jj ki b kj mj kn mk kr ml kv mm kz mn ld mf mg mh mi bi translated">按流派计算评分</li><li id="1abf" class="ma mb jj ki b kj mj kn mk kr ml kv mm kz mn ld mf mg mh mi bi translated">可视化评级数量</li><li id="640c" class="ma mb jj ki b kj mj kn mk kr ml kv mm kz mn ld mf mg mh mi bi translated">结论</li></ol><p id="0bd5" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">是的，我知道你在想什么，我也知道有很多事情要谈。但我会尽量简短，尽可能切题。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="e425" class="mv mw jj bd mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns bi translated">数据收集和导入</h1><p id="3f6e" class="pw-post-body-paragraph kg kh jj ki b kj nt kl km kn nu kp kq kr nv kt ku kv nw kx ky kz nx lb lc ld im bi translated">数据集可以在官方<a class="ae jg" href="https://grouplens.org/datasets/movielens/" rel="noopener ugc nofollow" target="_blank"> GroupLens 网站</a>上找到。所以去那里选一个你喜欢的吧。它们分为几种尺寸:</p><ul class=""><li id="37cf" class="ma mb jj ki b kj kk kn ko kr mc kv md kz me ld ny mg mh mi bi translated"><a class="ae jg" href="http://files.grouplens.org/datasets/movielens/ml-100k.zip" rel="noopener ugc nofollow" target="_blank"> 100K 数据集</a></li><li id="23f8" class="ma mb jj ki b kj mj kn mk kr ml kv mm kz mn ld ny mg mh mi bi translated"><a class="ae jg" href="http://files.grouplens.org/datasets/movielens/ml-1m.zip" rel="noopener ugc nofollow" target="_blank"> 1M 数据集</a></li><li id="0f46" class="ma mb jj ki b kj mj kn mk kr ml kv mm kz mn ld ny mg mh mi bi translated"><a class="ae jg" href="http://files.grouplens.org/datasets/movielens/ml-20m.zip" rel="noopener ugc nofollow" target="_blank"> 20M 数据集</a></li><li id="e040" class="ma mb jj ki b kj mj kn mk kr ml kv mm kz mn ld ny mg mh mi bi translated"><a class="ae jg" href="http://files.grouplens.org/datasets/movielens/ml-20mx16x32.tar" rel="noopener ugc nofollow" target="_blank"> 1B 数据集</a></li></ul><p id="1c6b" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由于较大的内存问题，我下载了第一个。如果你的电脑比我的更强(I5–8300h，8GB 内存)，请随意下载任何更大的。但是话说回来，如果你不想等待计算完成太久，下载 100K 数据集，结果一般不会有太大变化。</p><p id="e522" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki jk"> <em class="lt">好了，数据集下载了吗？</em> </strong>我们用 Python 导入吧。这里是您需要的所有库，以及<strong class="ki jk"> CSV </strong>读取和合并过程:</p><figure class="nz oa ob oc gt iv"><div class="bz fp l di"><div class="od oe l"/></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Imports — <a class="ae jg" href="https://gist.github.com/dradecic/61ceda3fcf0c2619f2b62774f88439e7" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/dradecic/61ceda3fcf0c2619f2b62774f88439e7</a></figcaption></figure><p id="bf04" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">完成后，数据集将如下所示:</p><figure class="nz oa ob oc gt iv gh gi paragraph-image"><div class="gh gi of"><img src="../Images/12ebfc2ee3d5a4b793596030813fb8e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*yh0FAp9Q11eGcUnOfqX43Q.png"/></div></figure></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="fdde" class="mv mw jj bd mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns bi translated">基础数据准备</h1><p id="0a8f" class="pw-post-body-paragraph kg kh jj ki b kj nt kl km kn nu kp kq kr nv kt ku kv nw kx ky kz nx lb lc ld im bi translated">我必须向你承认，我在整个数据清理过程中撒了谎。这个数据集不会有，因为它已经尽可能干净了:</p><figure class="nz oa ob oc gt iv gh gi paragraph-image"><div class="gh gi og"><img src="../Images/de1ff314baa8ebeedcc53a25bbc4f158.png" data-original-src="https://miro.medium.com/v2/resize:fit:332/format:webp/1*SgOi1oW9gTWTy7OxNKxRHw.png"/></div></figure><p id="2195" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一个价值都没有丢失，这种情况很少见。上帝保佑教育数据集！</p><figure class="nz oa ob oc gt iv gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/05933d8de563fbbc06d2ef3cfbee3882.png" data-original-src="https://miro.medium.com/v2/resize:fit:208/format:webp/1*H3PjDlB7keaR1gpMKlnzAA.png"/></div></figure><p id="af2a" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从数据集标题可以推断，有 100K 个条目。但是<strong class="ki jk">电影有多少？</strong></p><figure class="nz oa ob oc gt iv gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/6336be50c4fffffafae59cf30d200527.png" data-original-src="https://miro.medium.com/v2/resize:fit:390/format:webp/1*ML9XxmCZ7-B8Su8gkVa1qQ.png"/></div></figure><p id="8662" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在 10K 周围。很好，实际上，我认为这将足以对电影市场得出一些一般性的结论。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="8e5a" class="mv mw jj bd mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns bi translated">探索电影发行年份</h1><p id="e4b0" class="pw-post-body-paragraph kg kh jj ki b kj nt kl km kn nu kp kq kr nv kt ku kv nw kx ky kz nx lb lc ld im bi translated">这一步需要做一些准备。我们的目标是分析电影发行年份的分布，但是这些信息还没有以预期的形式出现。</p><p id="1ba9" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">出版年份在标题栏中，在标题的末尾用括号括起来。然而，对于一些电影来说，情况并非如此，这使得提取过程有点困难。所以，逻辑如下:</p><ul class=""><li id="f3b1" class="ma mb jj ki b kj kk kn ko kr mc kv md kz me ld ny mg mh mi bi translated">如果存在出版年份，请删除括号并保留年份的整数表示</li><li id="c71f" class="ma mb jj ki b kj mj kn mk kr ml kv mm kz mn ld ny mg mh mi bi translated">否则，将 9999 作为年份，这是缺少年份的明显标志</li></ul><p id="7703" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该代码块实现了所描述的逻辑:</p><figure class="nz oa ob oc gt iv"><div class="bz fp l di"><div class="od oe l"/></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Years — <a class="ae jg" href="https://gist.github.com/dradecic/d3224dfd866d8444fd03cc3cfd4cb526" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/dradecic/d3224dfd866d8444fd03cc3cfd4cb526</a></figcaption></figure><p id="50fb" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">事实证明，只有 30 个实例没有年份信息，这并不可怕(<em class="lt">因为我们有 100K 行</em>)。现在让我们绘制一个这些年(<em class="lt">不包括 9999 年</em>)的<strong class="ki jk">柱状图</strong>。代码如下:</p><figure class="nz oa ob oc gt iv"><div class="bz fp l di"><div class="od oe l"/></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Histogram — <a class="ae jg" href="https://gist.github.com/dradecic/f6c28a9cb3f0f04b74c2bccf35b811a5" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/dradecic/f6c28a9cb3f0f04b74c2bccf35b811a5</a></figcaption></figure><p id="779e" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦这个单元的代码被执行，下面是结果图表:</p><figure class="nz oa ob oc gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oj"><img src="../Images/4626073931a152518469d6d7453419ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nYHcHLYHQ7ntmPJ6mOc_gQ.png"/></div></div></figure><p id="309e" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">看起来，大多数电影都是在 1995 年到 2005 年之间上映的。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="e767" class="mv mw jj bd mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns bi translated">评级探索</h1><p id="c157" class="pw-post-body-paragraph kg kh jj ki b kj nt kl km kn nu kp kq kr nv kt ku kv nw kx ky kz nx lb lc ld im bi translated">此处可以使用来自<strong class="ki jk"> <em class="lt"> make_histogram </em> </strong>函数的逻辑，无需任何其他准备或数据操作，即可绘制电影评级的直方图。只要确保将<strong class="ki jk"> <em class="lt">评级</em> </strong>作为属性传递，而不是<strong class="ki jk"> <em class="lt">电影年份</em> </strong>。</p><figure class="nz oa ob oc gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ok"><img src="../Images/ecd53e64bb764ebd61d1d6cf3803cf8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rz9A9HtDwCqp2gNWAPvqLg.png"/></div></div></figure><p id="6edd" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">看起来平均评分会在 3.5 左右，而且看起来用户更倾向于给满分而不是 0.5。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="9db1" class="mv mw jj bd mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns bi translated">电影类型探索</h1><p id="0c82" class="pw-post-body-paragraph kg kh jj ki b kj nt kl km kn nu kp kq kr nv kt ku kv nw kx ky kz nx lb lc ld im bi translated">与出版年份一样，需要做一些准备。看看流派栏是什么样子的:</p><figure class="nz oa ob oc gt iv gh gi paragraph-image"><div class="gh gi of"><img src="../Images/12ebfc2ee3d5a4b793596030813fb8e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*yh0FAp9Q11eGcUnOfqX43Q.png"/></div></figure><p id="c703" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">没有办法像现在这样分析它。我想完成以下任务:</p><ul class=""><li id="285f" class="ma mb jj ki b kj kk kn ko kr mc kv md kz me ld ny mg mh mi bi translated">拆分竖线(|)字符上的字符串</li><li id="c6a4" class="ma mb jj ki b kj mj kn mk kr ml kv mm kz mn ld ny mg mh mi bi translated">为每个流派创建一个新条目</li></ul><p id="2805" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以，1 行<em class="lt">冒险|动画|儿童|喜剧|奇幻</em>应该变成 5 行，其他信息保持不变。熊猫提供了一个很好的方式来实现这一点:</p><figure class="nz oa ob oc gt iv"><div class="bz fp l di"><div class="od oe l"/></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Genres — <a class="ae jg" href="https://gist.github.com/dradecic/179d68a33510f8f25291e27c0b86eca1" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/dradecic/179d68a33510f8f25291e27c0b86eca1</a></figcaption></figure><p id="987e" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这样就创建了一个新的数据帧，前几行如下所示:</p><figure class="nz oa ob oc gt iv gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/e083168f955ec3ba44d0b9b31c527f2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:318/format:webp/1*RvxBzeLVl1mAcH9XxD8W_A.png"/></div></figure><p id="deea" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这 5 行现在代表原始数据集中的 1 行，所以，是的，这就是我的笔记本电脑在大型数据集上失败的地方— <em class="lt">它无法在内存中容纳 1 亿行。</em></p><p id="70a2" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">类似地，我现在可以声明一个绘制条形图的函数:</p><figure class="nz oa ob oc gt iv"><div class="bz fp l di"><div class="od oe l"/></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Bar Chart — <a class="ae jg" href="https://gist.github.com/dradecic/1f1d1519e55e3875942c927136161603" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/dradecic/1f1d1519e55e3875942c927136161603</a></figcaption></figure><p id="13e8" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我知道为一张图表做了很多准备，但这是值得的:</p><figure class="nz oa ob oc gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi om"><img src="../Images/6c168869a8e036b398268587120617c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i6ipgAFY88Pnp4JK5ev9Ww.png"/></div></div></figure><p id="03ef" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">大多数电影都属于<strong class="ki jk"> <em class="lt">剧情类</em> </strong>或<strong class="ki jk"> <em class="lt">喜剧类</em> </strong>类别——这里没什么稀奇的。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="21ef" class="mv mw jj bd mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns bi translated">按流派计算评分</h1><p id="e108" class="pw-post-body-paragraph kg kh jj ki b kj nt kl km kn nu kp kq kr nv kt ku kv nw kx ky kz nx lb lc ld im bi translated">获得这些信息可能是这篇文章中最困难的任务。这主要是因为它涉及到一些准备工作，背后的逻辑可能不像前面那样直观。您需要:</p><ul class=""><li id="2d26" class="ma mb jj ki b kj kk kn ko kr mc kv md kz me ld ny mg mh mi bi translated">计算每部电影在单个流派级别上的评级(<em class="lt">流派字符串由| </em>分割)</li><li id="5591" class="ma mb jj ki b kj mj kn mk kr ml kv mm kz mn ld ny mg mh mi bi translated">将每种类型的分级列表添加到词典中</li><li id="74a0" class="ma mb jj ki b kj mj kn mk kr ml kv mm kz mn ld ny mg mh mi bi translated">计算平均评分，作为字典中列表的平均值</li></ul><p id="c6ba" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki jk"> <em class="lt">听起来让人迷惑？</em></strong></p><figure class="nz oa ob oc gt iv"><div class="bz fp l di"><div class="od oe l"/></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Rating by Genre — <a class="ae jg" href="https://gist.github.com/dradecic/7a65cac23c59c8206417ec26a6411641" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/dradecic/7a65cac23c59c8206417ec26a6411641</a></figcaption></figure><p id="c43d" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这里，您可以轻松地按流派划分等级:</p><figure class="nz oa ob oc gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi on"><img src="../Images/527dac7a9296bc2f4a91d87802ac29af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2cYwCtfgZBhgCwD6n826xw.png"/></div></div></figure><p id="28df" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">似乎黑色电影做得最好，但是，这种类型的电影数量最少。<strong class="ki jk"> <em class="lt">恐怖</em> </strong>电影做得更糟，这是有道理的，有一吨只是可怕的恐怖。纪录片和战争电影往往比大多数电影都要好，这也是有道理的——<em class="lt">每个人都喜欢一部好的二战电影</em>，如果它以纪录片的形式呈现，我会给它打五星！</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="8dbe" class="mv mw jj bd mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns bi translated">可视化评级数量</h1><p id="d331" class="pw-post-body-paragraph kg kh jj ki b kj nt kl km kn nu kp kq kr nv kt ku kv nw kx ky kz nx lb lc ld im bi translated">你已经完成了最后一部分，干得好！现在让我们深入了解一下<strong class="ki jk">评级可视化</strong>的数量。它也将涉及一些准备工作，但没有什么要求。您必须:</p><ul class=""><li id="037d" class="ma mb jj ki b kj kk kn ko kr mc kv md kz me ld ny mg mh mi bi translated">创建一个数据帧，将<strong class="ki jk"> <em class="lt"> movieId </em> </strong>列分组，并对实例进行计数</li><li id="92e6" class="ma mb jj ki b kj mj kn mk kr ml kv mm kz mn ld ny mg mh mi bi translated">将其与原始数据集合并</li><li id="1265" class="ma mb jj ki b kj mj kn mk kr ml kv mm kz mn ld ny mg mh mi bi translated">重命名合并时出错的列</li></ul><figure class="nz oa ob oc gt iv"><div class="bz fp l di"><div class="od oe l"/></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Num Ratings — <a class="ae jg" href="https://gist.github.com/dradecic/ef33ad4c942c2d013def6ed0c4945bc8" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/dradecic/ef33ad4c942c2d013def6ed0c4945bc8</a></figcaption></figure><p id="a7a1" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在进入可视化之前，我们先来看看根据收视率排名的前 10 部电影:</p><figure class="nz oa ob oc gt iv"><div class="bz fp l di"><div class="od oe l"/></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Top 10 — <a class="ae jg" href="https://gist.github.com/dradecic/a5a6a669de0d6b380cad745d57a231f0" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/dradecic/a5a6a669de0d6b380cad745d57a231f0</a></figcaption></figure><figure class="nz oa ob oc gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oo"><img src="../Images/a5d90f8a340f56aee3554d88329fcc8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0WVgXXRPb9BSF0tuMScI6w.png"/></div></div></figure><p id="0644" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我对结果相当满意。这些顶级的都是经典之作，值得拥有。</p><p id="2e6d" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki jk"> <em class="lt">为什么按收视率数量而不是纯收视率排序？</em> </strong></p><p id="93e8" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">啊，问得好。原因是，我想避免被评为 5 星的电影，但只有一个或几个用户。如果这些电影足够受欢迎，会有更多的用户对它们进行评级，那么它们就是不相关的。</p><p id="3489" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你现在可以绘制一个直方图的<strong class="ki jk"> <em class="lt">列和</em> </strong>列:</p><figure class="nz oa ob oc gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi om"><img src="../Images/2258ec889a52c85f1a1ee8a55d897abd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pe6W45YEMnRacVyzVQwrfg.png"/></div></div></figure><p id="b9b0" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是意料之中的。大多数电影没有很好的预算，总的来说，这导致了一部不太受欢迎的电影。如果电影不流行，大多数人不会看，因此，不会评价它。爱它或恨它，这就是它的工作方式。</p><p id="2041" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，让我们用一个很好的评分与评分数量散点图来结束这一部分。代码如下:</p><figure class="nz oa ob oc gt iv"><div class="bz fp l di"><div class="od oe l"/></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Scatter Plot — <a class="ae jg" href="https://gist.github.com/dradecic/874c6f56bc1d92d3de45f6c170a5837f" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/dradecic/874c6f56bc1d92d3de45f6c170a5837f</a></figcaption></figure><p id="c484" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是我的图表的样子:</p><figure class="nz oa ob oc gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi op"><img src="../Images/a16a4746213278b3a0320dad5e77f98b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zhrP_iW6pj6o4h10dwbqKg.png"/></div></div></figure><p id="29de" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可以在这里看到一个趋势——随着电影获得更多的评级，其平均评级往往会增加。如果你仔细想想，这也很有道理。如果越来越多的人在看一部特定的电影，它可能有很好的预算和很好的营销，这将意味着它是某种类型的大片，他们通常评价很高。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="2166" class="mv mw jj bd mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns bi translated">结论</h1><p id="12b7" class="pw-post-body-paragraph kg kh jj ki b kj nt kl km kn nu kp kq kr nv kt ku kv nw kx ky kz nx lb lc ld im bi translated">这是一个很长的帖子，我知道。然而，它涵盖了探索性数据分析的每一个重要部分。现在你对数据本身更熟悉了，这意味着你在进一步的分析中不太可能犯一些愚蠢的错误。</p><p id="3520" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下一篇文章将在几天后发布，在这篇文章中，你将创建你的第一个(<em class="lt">可能是</em>)推荐系统。它将被链接到这里，所以请把这篇文章放在你身边(<em class="lt">这听起来很奇怪</em>)。</p><div class="is it gp gr iu le"><a rel="noopener follow" target="_blank" href="/recommender-system-in-python-part-2-content-based-system-693a0e4bb306"><div class="lf ab fo"><div class="lg ab lh cl cj li"><h2 class="bd jk gy z fp lj fr fs lk fu fw ji bi translated">Python 中的推荐系统——第二部分(基于内容的系统)</h2><div class="ll l"><h3 class="bd b gy z fp lj fr fs lk fu fw dk translated">深入推荐系统的神奇世界，并自己构建一个(第 2 部分)</h3></div><div class="lm l"><p class="bd b dl z fp lj fr fs lk fu fw dk translated">towardsdatascience.com</p></div></div><div class="ln l"><div class="oq l lp lq lr ln ls ja le"/></div></div></a></div><p id="7284" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki jk"> <em class="lt">你有什么想法？你的分析中还包括了其他内容吗？如果有，请在评论区分享。</em>T3】</strong></p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><p id="9d14" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="lt">喜欢这篇文章吗？成为</em> <a class="ae jg" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="lt">中等会员</em> </a> <em class="lt">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="is it gp gr iu le"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="lf ab fo"><div class="lg ab lh cl cj li"><h2 class="bd jk gy z fp lj fr fs lk fu fw ji bi translated">通过我的推荐链接加入 Medium-Dario rade ci</h2><div class="ll l"><h3 class="bd b gy z fp lj fr fs lk fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="lm l"><p class="bd b dl z fp lj fr fs lk fu fw dk translated">medium.com</p></div></div><div class="ln l"><div class="or l lp lq lr ln ls ja le"/></div></div></a></div></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="5df1" class="mv mw jj bd mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns bi translated">资源</h1><p id="4e5c" class="pw-post-body-paragraph kg kh jj ki b kj nt kl km kn nu kp kq kr nv kt ku kv nw kx ky kz nx lb lc ld im bi translated">[1]<a class="ae jg" href="https://en.wikipedia.org/wiki/Recommender_system" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Recommender_system</a></p></div></div>    
</body>
</html>