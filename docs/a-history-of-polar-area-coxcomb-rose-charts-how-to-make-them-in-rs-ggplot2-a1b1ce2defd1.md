# 极区/花簇/玫瑰图的历史&如何在 R 的 ggplot2 中制作它们

> 原文：<https://towardsdatascience.com/a-history-of-polar-area-coxcomb-rose-charts-how-to-make-them-in-rs-ggplot2-a1b1ce2defd1?source=collection_archive---------26----------------------->

## 探索图表名称背后的故事及其潜在的使用案例

![](img/583533ac1224bc71382019afa577d060.png)

A sample Polar Area Chart created in R using data from transfermarkt.com

这张图表有几个不同的名字:极地区域图，风玫瑰图，玫瑰图，花花公子图，甚至是顾问图。我将从概述图表的历史和我在网上搜索观察到的一些差异开始。在底部有一个关于如何在 R 的 ggplot2 包中创建图表的技术解释。

首先，我们来处理一下名字。[数据即 Projec](https://datavizproject.com/) t 使用以下描述将极区、Coxcomb &玫瑰图组合在一起:

> *“极区图类似于通常的饼图，除了扇形是等角的，并且每个扇形从圆心延伸的距离不同。”*

《T4 可视化数据》一书的作者安迪·基尔克用同样的方式对它们进行分类，尽管不包括玫瑰图，包括圆形柱状图。他的定义稍微详细一些，如下:

> *'极坐标图在同一个显示屏上显示三个或更多不同定量指标的值。它使用一个放射状(圆形)布局，包括几个等角度的扇形，就像比萨饼的切片，每个测量一个。与雷达图(使用沿刻度的位置)相比，极坐标图使用扇形区域大小的变化来表示定量值。这实际上是一个放射状绘制的条形图。*

因此，该图表是条形图(使用长度作为预先注意的特征)和饼图(本质上是放射状的，顶部较宽，中间较薄的部分，即。极坐标)。这有助于我们理解图表的形式作为一种表示数据的方式，但仍然没有告诉我们为什么这种图表类型在涉及到不同的名称时如此贪婪！

为了回答这个问题，我们先来看看这张图表在野外的首次出现。根据大多数资料，它首次出现是在克里米亚战争期间，佛罗伦萨·南丁格尔在她的统计图中使用它来显示一年中几个月的死亡原因。

![](img/ef6aab917c0dd1c266a8fcda599678b7.png)

Nightingale’s Diagram on the Causes of Mortality in the Crimean War

出于这个原因，可以理解为什么它有时被称为“夜莺的玫瑰”——向外延伸的部分类似于玫瑰的形状。作为它的一个变体,“风玫瑰图”采用了类似的格式，但是这些线段是根据指南针的指向来显示风向和风力的。在足球分析领域，风玫瑰图被用来显示特定位置或球员的传球方向和数量。

然而，弗罗伦斯·南丁格尔自己从来没有把图表称为玫瑰，这个名字是后来才有的。与普遍看法相反，她也没有把它们称为“花花公子”图表。更详细的解释可以在这里找到[，但是看起来‘花花公子’这个名字已经因为一个误解而随着时间的流逝而消失了！](http://www.florence-nightingale-avenging-angel.co.uk/GraphicsPaper/Graphics.htm)

![](img/ed58c1f518a6d2506e198d55e333760b.png)

A Cockerel’s Coxcomb

到底什么是花花公子？它可以指一种花的形式，但是，考虑到图表的视觉特性，误解很可能是在与另一个定义进行比较时产生的:公鸡头顶上的红色羽冠(自己看吧！)

本质上，虽然南丁格尔在她的报告中使用了 coxcomb 这个词，但她指的不是图表本身，而是图表的位置和一份更大的报告----皇家委员会报告----的报告。

我们现在已经讨论了玫瑰和花花公子，只剩下极地区域图和顾问图(不可否认不太为人所知，不在本文讨论之列)。

在数学中，极坐标系是一种二维坐标系，其中平面上的每一点都由与参考点的距离和与参考方向的角度来确定。参考点称为极点，从极点沿参考方向发出的射线为极轴。这与我们大多数人习惯的坐标系不同；“笛卡尔”坐标系。这包括线性、垂直/水平方向的标准 x、y 坐标。

![](img/c46a795568149117ab6f2694e3b474a4.png)

Same Chart using Cartesian (x,y) coordinates

上面的例子是与原始图表完全相同的图表，但没有 r 中的 coord_polar()指令。你可以明白为什么安迪·基尔克将该图表描述为“实际上是一个径向绘制的条形图”。通过使用极坐标，您可以将整个图表环绕在一个中心点周围，使其向外呈扇形增大。

它与径向条形图的不同之处在于，当你远离中心时，它的宽度会增加，形成楔形或比萨饼切片，而不是矩形条。这就是极区图中“面积”部分的由来。我相信这使得极区图更适合跨类别的快速比较，正如我们在阿森纳比较中所做的那样，因为可视化利用长度和宽度来表示数据。由于 viz 中覆盖的表面积更大，我的眼睛能够更快地注意到较高和较低的值&对不同的玩家进行比较。

因此，总之，对于大多数用例来说，**极区**图应该是该图的常用名称。**玫瑰图/风玫瑰图**适用于可视化采用预先获得的罗盘/特定方向知识，以强调每个线段长度上的运动。据我们所知，这张**花花公子**图的命名是错误的，尽管它至少保留了与该图的原始设计者——弗洛伦斯·南丁格尔的联系。最终，和大多数语言情况一样，只要你的听众明白你在说什么，你叫它什么并不重要！

**如何制作 R 中的极区图**

本博客的第二部分现在将分解如何在 R 中构建极区图。这假设对 R、RStudio &如何安装包有基本的了解。下面是创建相对无格式的极区图的完整代码。请参阅下面的逐行描述。用您自己的数据框替换**粗体彩色**指标。

> ggplot( **数据**，aes(x= **公制**，y= **长度**)+

*   这一行调用 ggplot2 包，将您的数据绑定到绘图，并允许您选择将用于可视化的“美学”(aes)。
*   在这种情况下，我们希望 x 轴上是我们的度量，y 轴上是我们的值。请记住，我们正在创建一个柱形图，直到 coord_polar 命令。
*   使用“+”号将各行链接在一起。

> geom_col(fill = " **red** "，alpha=1，width=1)+

*   这将调用 geom_col 函数，这是制作柱形图/垂直条形图所必需的。
*   fill 参数设置列的填充颜色。这里可以使用十六进制代码/RGB。
*   alpha 设置透明度(0 =透明，1=不透明)。
*   宽度设置列之间的间隙(0 =无栏，1=并排接触)。

> geom_hline(yintercept = seq(0，100，by = 10)，
> 
> color = "grey "，size = 1) +
> 
> geom_vline(xintercept = seq(.5，16.5，by = 1)，
> 
> color = "grey "，size = 1) +

*   这些线条为我们的图表添加了一些方便的网格线。
*   geom_hline 设置圆形网格线，geom_vline 设置线段边界线。
*   seq()在两个数字之间创建一个序列,“by”参数说明了间隔。
*   颜色设置线条颜色。
*   大小设置线条宽度。

> 坐标极坐标()+

*   神奇就发生在这里。从笛卡尔坐标转换到极坐标。

> facet _ wrap(vars(**Player**))

*   使用“facet”函数获得每个特定指标的小倍数。点击阅读更多关于这个[的内容。](https://ggplot2.tidyverse.org/reference/facet_grid.html)

图表的所有其他格式，例如添加标题、副标题、背景颜色和小平面的方框，都可以在主题()中实现。下面是我为我的兵工厂图表创建的主题的一个例子。