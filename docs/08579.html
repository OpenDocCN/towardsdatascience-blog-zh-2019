<html>
<head>
<title>Hands-on: Setup Your Data Science Environment With Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实践:使用 Docker 设置您的数据科学环境</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/hands-on-setup-your-data-environment-with-docker-dca629607148?source=collection_archive---------30-----------------------#2019-11-19">https://towardsdatascience.com/hands-on-setup-your-data-environment-with-docker-dca629607148?source=collection_archive---------30-----------------------#2019-11-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="e5c9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">每当你开始一个新的数据项目或有一个处理数据的好主意时，最初的概念验证可能是必要的。当然，您不希望，也可能没有时间花几个小时来建立一个全新的数据环境，甚至连数据本身都不看一眼。在下面的文章中，您将了解 Docker 如何帮助您建立一个可复制的数据环境，而不必一次又一次地浪费您的时间。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/2194108c16547467f63a7fc48bed4de8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZfoFsBYlIxBTb5HRT-vRew.jpeg"/></div></div></figure><h2 id="d117" class="lb lc it bd ld le lf dn lg lh li dp lj kb lk ll lm kf ln lo lp kj lq lr ls lt bi translated">Docker 是什么，为什么要试一试？</h2><p id="cc12" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">Docker 是一种最简单、最灵活的方法，可以在特定的环境中创建、部署和运行您想要的应用程序，也就是所谓的容器。你当然会问自己什么是容器？</p><p id="f3b3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">非技术性的解释:</strong>就像上图一样，想象一下，在我们的例子中，你的本地机器是一个你已经在生产东西的孤岛。为了改善这一点，你需要额外的工具，这些工具(就像 Docker 标志一样)装在小容器里。一旦您设置并运行它们，它们就可以运行了。</p><p id="5c29" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">技术解释:</strong>容器是软件的一个标准单元，它封装了代码及其所有依赖关系，因此应用程序可以快速可靠地从一个计算环境运行到另一个计算环境。Docker 容器映像是一个轻量级的、独立的、可执行的软件包，包括运行应用程序所需的一切:代码、运行时、系统工具、系统库和设置。其他重要术语:</p><ul class=""><li id="c0eb" class="lz ma it js b jt ju jx jy kb mb kf mc kj md kn me mf mg mh bi translated">图片:只是你的容器的快照。</li><li id="4773" class="lz ma it js b jt mi jx mj kb mk kf ml kj mm kn me mf mg mh bi translated">Dockerfile:这是一个 yaml 文件，用来建立你的形象。在本课程结束时，您将拥有一个 yaml 文件模板，并将其用于您自己的容器规范。</li><li id="9dd1" class="lz ma it js b jt mi jx mj kb mk kf ml kj mm kn me mf mg mh bi translated"><a class="ae mn" href="https://docs.docker.com/docker-hub/" rel="noopener ugc nofollow" target="_blank"> Docker hub: </a>在这里你可以推拉 Docker 图片，并根据自己的需要使用。基本上 GitHub 只是针对 Docker 的。</li></ul><h2 id="de7c" class="lb lc it bd ld le lf dn lg lh li dp lj kb lk ll lm kf ln lo lp kj lq lr ls lt bi translated">为什么要用 Docker？</h2><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/7af1c6345eb5e0d0ea6a2b6bb6214529.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bDeTeVyV5J4IbpoNurg4SQ.jpeg"/></div></div></figure><p id="f2fa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我向你概述一下我喜欢使用 Docker 的主要原因:</p><ul class=""><li id="3a31" class="lz ma it js b jt ju jx jy kb mb kf mc kj md kn me mf mg mh bi translated">对于作为数据科学家或数据分析师的您来说，docker 意味着您可以专注于探索、转换和建模数据，而无需首先考虑数据环境所运行的系统。通过使用 Docker 容器中数以千计的应用程序中的一个，您不必担心单独安装和连接它们。Docker 允许您在几秒钟内部署您选择的工作环境——只要您需要。</li><li id="7aa1" class="lz ma it js b jt mi jx mj kb mk kf ml kj mm kn me mf mg mh bi translated">让我们假设您不是项目中唯一的工作人员，但是您的团队成员也需要接触代码。现在唯一的选择是每个队友在他们自己的环境中运行代码，使用不同的架构、不同的库和不同版本的应用程序。docker 选项是每个成员都可以访问同一个容器映像，用 docker 启动映像并准备好。Docker 为团队中的每个人提供了可重复的数据环境，因此您可以立即开始协作。</li></ul><p id="0dca" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Docker 肯定还有其他一些好处，尤其是如果您正在使用企业版的话。这绝对值得探索，不仅对作为数据科学家的你有好处。</p><h2 id="d6f3" class="lb lc it bd ld le lf dn lg lh li dp lj kb lk ll lm kf ln lo lp kj lq lr ls lt bi translated">安装和运行 Docker</h2><p id="a8fa" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">您可以安装 Docker desktop，这是您需要立即开始的东西:访问<a class="ae mn" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker Hub 这里</a>，为您的 Mac 或 Windows 选择 Docker 版本并安装它。一旦在本地 machina 上启动 Docker，你就可以在顶部导航栏上看到这条可爱的小鲸鱼——干得好。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/5216392f7d6881ac6a038126cf4ba939.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*263Ky5Z26n2k17MxAPYA9w.png"/></div></figure><p id="bdae" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过点击 Docker 的标志，你可以看到 Docker 是否正在运行。另一种方法是打开命令行并输入“docker info ”,这样你就可以看到正在运行的程序。以下是一些基本的 Docker 命令:</p><p id="11ee" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe mp mq mr ms b"><strong class="js iu">docker login #Log in to Docker registry<br/>docker run &lt;image&gt; #create a new container and start it <br/>docker start &lt;image&gt; #start an existing container</strong></code><br/><code class="fe mp mq mr ms b"><strong class="js iu">docker stop &lt;name|id&gt; #stop a running container</strong></code><br/><code class="fe mp mq mr ms b"><strong class="js iu">docker ps [-a include stopped containers] #show all containers</strong></code><br/>T3】</p><p id="fa0a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可以从一个简单的例子开始，用 Jupyter 笔记本试试看。你所要做的就是在 Docker Hub 中寻找一个图像，打开你的终端，运行 Docker。在下面的例子中，您可以找到在 localhost:8888 上运行的 Jupyter 很容易！</p><pre class="kq kr ks kt gt mt ms mu mv aw mw bi"><span id="25da" class="lb lc it ms b gy mx my l mz na">docker run -p 8888:8888 jupyter/scipy-notebook:2c80cf3537ca</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nb"><img src="../Images/4b087051c7b9f1775bdd0f8b5ae6bc3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xjHVIvajixGU9fKsT-BmzQ.png"/></div></div></figure><p id="0402" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">虽然我们现在可以在我们的容器中摆弄我们的应用程序，但它并不是高级数据科学家正在寻找的完整的数据环境。您可能希望使用更高级的工具，比如 Nifi 用于数据接收和处理，Kafka 用于数据流，SQL 或非 SQL 数据库用于存储中间的一些表。我们还能用 Docker 做所有这些吗？答案是:当然可以——Docker compose up 是为您管理这一切的。</p><h2 id="09d7" class="lb lc it bd ld le lf dn lg lh li dp lj kb lk ll lm kf ln lo lp kj lq lr ls lt bi translated">Docker Compose:将所有内容整合在一起</h2><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/80bec8463d46304362ae3cf62c192b27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wtu-ZFPEbHU1mOhvdUuAoA.jpeg"/></div></div></figure><p id="185e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了设置您想要的数据环境，您可能希望在我们的本地机器上运行几个容器。这就是我们使用 Docker Compose 的原因。Compose 是一个定义和运行多容器 Docker 应用程序的工具。虽然单独连接每个容器可能很耗时，但 docker compose 允许多个容器的集合通过它们自己的网络以非常直接的方式进行交互。使用 compose，首先使用一个 yaml 文件来配置应用程序的服务，然后使用一个命令(docker compose up)就可以创建并启动先前定义的所有服务。<a class="ae mn" href="https://github.com/docker/compose" rel="noopener ugc nofollow" target="_blank"> * </a></p><p id="fb0f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在下文中，您可以找到开始的主要步骤:</p><ol class=""><li id="5595" class="lz ma it js b jt ju jx jy kb mb kf mc kj md kn nc mf mg mh bi translated">用一个<code class="fe mp mq mr ms b">Dockerfile</code>来定义你的应用环境，以便于复制</li><li id="cd40" class="lz ma it js b jt mi jx mj kb mk kf ml kj mm kn nc mf mg mh bi translated">在<code class="fe mp mq mr ms b">docker-compose.yml</code>中指定组成您的数据环境的所有服务</li><li id="8f56" class="lz ma it js b jt mi jx mj kb mk kf ml kj mm kn nc mf mg mh bi translated">在你保存 yaml 文件的文件夹中打开你的终端并运行<code class="fe mp mq mr ms b">docker-compose up</code></li></ol><p id="6959" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一个<code class="fe mp mq mr ms b">docker-compose.yml</code>可能看起来像你在下面看到的一样。尽管您肯定可以使用以下内容作为模板，但您肯定应该为自己配置一次:</p><pre class="kq kr ks kt gt mt ms mu mv aw mw bi"><span id="6088" class="lb lc it ms b gy mx my l mz na">version: '3'<br/>services:<br/>  zookeeper:<br/>    hostname: zookeeper<br/>    container_name: zookeeper_dataenv<br/>    image: 'bitnami/zookeeper:latest'<br/>    environment:<br/>      - ALLOW_ANONYMOUS_LOGIN=yes<br/>  nifi:<br/>    image: mkobit/nifi<br/>    container_name: nifi_dataenv<br/>    ports:<br/>      - 8080:8080<br/>      - 8081:8081<br/>    environment:<br/>      - NIFI_WEB_HTTP_PORT=8080<br/>      - NIFI_ZK_CONNECT_STRING=zookeeper:2181<br/>  minimal-jupyter-notebook:<br/>    image: jupyter/minimal-notebook:latest<br/>    ports:<br/>      - 8888:8888<br/>  mongodb:<br/>    image: mongo:latest<br/>    container_name: mongodb_dataenv<br/>    environment:<br/>      - MONGO_DATA_DIR=/data/db<br/>      - MONGO_LOG_DIR=/dev/null<br/>    ports:<br/>        - 27017:27017<br/>  grafana:<br/>    image: bitnami/grafana:latest<br/>    container_name: grafana_dataenv<br/>    ports:<br/>      - 3000:3000<br/>  db:<br/>    image: 'postgres:9.6.3-alpine'<br/>    container_name: psql_dataenv<br/>    ports:<br/>      - 5432:5432<br/>    environment:<br/>      POSTGRES_DB: psql_data_environment<br/>      POSTGRES_USER: psql_user<br/>      POSTGRES_PASSWORD: psql<br/>      PGDATA: /opt/psql_data<br/>    restart: "no"</span></pre><p id="b782" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">就是这样！您刚刚学习了如何在几秒钟内随时随地部署您自己的数据环境的基础知识，这意味着在设置方面浪费更少的时间，而有更多的时间来提高工作效率。</p><p id="723d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi">**************************************************************</p><p id="aaf4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可能也喜欢阅读的文章:</p><p id="c573" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae mn" rel="noopener" target="_blank" href="/hands-on-customer-segmentation-9aeed83f5763">动手操作:客户细分</a></p><p id="709d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae mn" href="https://blog.markgrowth.com/eliminating-churn-is-growth-hacking-2-0-47a380194a06" rel="noopener ugc nofollow" target="_blank">消除流失是增长黑客 2.0 </a></p><p id="32a6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae mn" rel="noopener" target="_blank" href="/misleading-with-data-statistics-c6d506bdb9cf">数据误导&amp;统计</a></p><p id="9be1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae mn" rel="noopener" target="_blank" href="/generate-your-sample-dataset-a-must-have-skill-for-data-scientists-36ded8600b79">学习创建自己的样本数据集</a></p><p id="043a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi">***************************************************************</p><p id="4c7b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">请注意，还有很多其他的容器软件选项。我只是喜欢和 Docker 一起工作，并想和你分享我的经验</p><p id="d4d9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">用于编写 Docker 的资源:</p><div class="nd ne gp gr nf ng"><a href="https://github.com/docker/compose" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd iu gy z fp nl fr fs nm fu fw is bi translated">docker/撰写</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">Compose 是一个定义和运行多容器 Docker 应用程序的工具。使用合成，您可以使用合成文件…</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">github.com</p></div></div><div class="np l"><div class="nq l nr ns nt np nu kz ng"/></div></div></a></div></div></div>    
</body>
</html>