<html>
<head>
<title>An efficient and fast way to control your robots. Truly.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一种高效快速的方法来控制你的机器人。真的。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/an-efficient-and-fast-way-to-control-your-robots-truly-92ee93aadff5?source=collection_archive---------21-----------------------#2019-09-15">https://towardsdatascience.com/an-efficient-and-fast-way-to-control-your-robots-truly-92ee93aadff5?source=collection_archive---------21-----------------------#2019-09-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="ddef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">去年，我们的教授提出了一个新的课堂项目。从零开始创造机器人手臂。在机器人爱好者的生活中，第一个 DIY 机器人可能会改变游戏规则。应该是！—一个简单的机器人项目肯定是从这个问题开始的:这个机器人的目的是什么？</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/79766bd9ccabacd57a42af8806ef4f27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fvh2cvyMr5bF4UxV7hviPQ.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">School project (Sorbonne Université, Paris)</figcaption></figure><p id="0b01" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了解决这个问题，你自然要探索硬件设计领域。那么你可能会在系统的电子架构中找到一些灵感。在这个思考过程的最后，你设计的机器人看起来很棒，你可能对你的机器人会是什么有一个清晰的想法。这是你需要暂停的时候。你考虑过如何驾驶机器人吗？需要什么样的软件或几何模型？对我来说，这一步是一个巨大的挫折。事实上，命令软件可能是你的项目中最模糊的一点。</p><blockquote class="lb lc ld"><p id="5e9c" class="jn jo le jp b jq jr js jt ju jv jw jx lf jz ka kb lg kd ke kf lh kh ki kj kk ij bi translated">在下面的文件中，我会试着给你一些我希望去年在项目实施过程中知道的信息。</p></blockquote><h2 id="d006" class="li lj iq bd lk ll lm dn ln lo lp dp lq jy lr ls lt kc lu lv lw kg lx ly lz ma bi translated">如何获得和使用你的机器人的几何模型？</h2><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mb"><img src="../Images/c45dcb264c625431da1e090d3805be4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LKXkZ1yyQYCh8enUsGgLcg.png"/></div></div></figure><p id="c398" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">基本上，直接的几何模型非常容易获得。它是关于根据关节的角度位置计算效应器的最终位置。这是一个简单的数学演算。</p><p id="d720" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们使用机器人手臂的简化模型来确定直接模型，您可以通过更改这些方程中的一些参数来将解决方案推广到所有项目。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mc"><img src="../Images/989d237aa5f4b781e6c8a8d8ed2a723e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_sOf5ggg_AUqRBW46OmZiQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Simplified Model of a 3 joints robotic arm</figcaption></figure><p id="695d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用这个简单的 3 关节机械臂模型，我们得到:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi md"><img src="../Images/736c907ddecce2ae2bd2fbba42b7967e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/1*o7IaOKY2cKWtLWg4zlYHKA.gif"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">X coordinate</figcaption></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi md"><img src="../Images/5c3a587307e66e3439aa5b68c65b2284.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/1*7smDDh2euPY7vFuxZguwXg.gif"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Y coordinate</figcaption></figure><p id="6956" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用这个直接模型，我们现在可以根据角度三元组创建一组笛卡尔坐标。这是一个单向过程——这是几何求解的最初步骤。实际上，人们通常对另一种方式感兴趣:从笛卡尔的一对数字(X，Y)到角度三元组:(θ1，θ2，θ3)</p><blockquote class="lb lc ld"><p id="c6a1" class="jn jo le jp b jq jr js jt ju jv jw jx lf jz ka kb lg kd ke kf lh kh ki kj kk ij bi translated">好的，那么你的最终目标是获得关于机器人效应器位置的角度三元组。</p></blockquote><p id="796a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为此，您可以尝试计算间接模型。这是人们首先要做的，但有时可能会很困难和/或很耗时。为了解决这个问题，我想给你介绍一下<strong class="jp ir">监督学习过程。</strong></p><blockquote class="me"><p id="22a5" class="mf mg iq bd mh mi mj mk ml mm mn kk dk translated">命令软件可能是你项目最模糊的点。</p></blockquote><figure class="mp mq mr ms mt kq gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/30954d47078529ca38aa72168c378834.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*6qs56IpIbrzoz3_UIs5lNw.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Supervised Learning Model</figcaption></figure><blockquote class="lb lc ld"><p id="d143" class="jn jo le jp b jq jr js jt ju jv jw jx lf jz ka kb lg kd ke kf lh kh ki kj kk ij bi translated">我们之前计算的直接模型用于计算分别与所谓的角三元组关联的笛卡尔坐标。</p></blockquote><h2 id="dbc8" class="li lj iq bd lk ll lm dn ln lo lp dp lq jy lr ls lt kc lu lv lw kg lx ly lz ma bi translated">使用 MLP 回归器预测角形三胞胎</h2><p id="b1a9" class="pw-post-body-paragraph jn jo iq jp b jq mu js jt ju mv jw jx jy mw ka kb kc mx ke kf kg my ki kj kk ij bi mz translated">首先你需要实现你的模型并定义你的机器人关节的参数。这些参数是机器人关节的不同长度。它们也可能是一些预先确定的常数参数，限制你的机器人的移动。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ni nj l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Robot’s model</figcaption></figure><p id="8d3c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi mz translated"><span class="l na nb nc bm nd ne nf ng nh di"> S </span>秒您需要创建用于生成模型的数据集。该数据集由角度三元组和笛卡尔位置组成，两者都与直接模型相关联并通过直接模型计算。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ni nj l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Dataset Generation</figcaption></figure><p id="bdf3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您还需要生成数据集的分割。第一部分用来训练你的模型，另一部分用来评估它的性能。您应该使用某种洗牌率来避免“糟糕”的学习和灾难性的泛化-永远不要忘记在数据集生成过程中引入洗牌，尽管您可能希望在没有洗牌的情况下尝试观察结果。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/a5e81427678ad233c6c2b8b8705df998.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/1*t5wY2fS72Ja7RFUEZYGY_Q.png"/></div></figure><p id="1094" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi mz translated"><span class="l na nb nc bm nd ne nf ng nh di"> T </span> hird，我们使用 keras 顺序实现定义多层感知器。随意改变网络的超参数:隐藏层的数量、学习率、网络的深度、退出、正则化等。所有这些变化都将是适合你自己的基于数据的问题的关键。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ni nj l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">MLP</figcaption></figure><p id="ea6c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，您需要使用 Keras API 函数训练模型以适应您的数据:</p><pre class="km kn ko kp gt nl nm nn no aw np bi"><span id="e4c5" class="li lj iq nm b gy nq nr l ns nt">model.fit</span></pre><p id="40ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi mz translated"><span class="l na nb nc bm nd ne nf ng nh di">第四，你应该为你的模型建立一个基准来评估它的性能和准确性。要对其评分，您可以使用 Keras 函数并将其应用于验证数据集:</span></p><pre class="km kn ko kp gt nl nm nn no aw np bi"><span id="86ee" class="li lj iq nm b gy nq nr l ns nt">model.evaluate</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/8a8668b3e70eface0259585ecad55026.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*t1lrEXKgKHw301aC_WNqKA.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Evaluation of the model</figcaption></figure><h2 id="5c1b" class="li lj iq bd lk ll lm dn ln lo lp dp lq jy lr ls lt kc lu lv lw kg lx ly lz ma bi translated">图形评估</h2><p id="00e5" class="pw-post-body-paragraph jn jo iq jp b jq mu js jt ju mv jw jx jy mw ka kb kc mx ke kf kg my ki kj kk ij bi translated">我相信机器人的模型达到了一个很好的精度水平，特别是如果你看一下培训时间，碰巧是很短的一段时间。下面是一些使用 Matplotlib 的结果显示。查看 colab 以获得关于这个问题的更多注释和细节。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nv"><img src="../Images/3f224fcc5258dbbe6faed6dc6cda81c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*_GR5mQ84zQj6eeWpYfSWZg.gif"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Command is x = 20 and y = 20–40</figcaption></figure><p id="92d2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你应该尝试许多轨迹来弄清楚你的机器人是否能够响应你最初的目的。</p><blockquote class="me"><p id="c1ff" class="mf mg iq bd mh mi mj mk ml mm mn kk dk translated">别忘了这是基于数据的问题。</p></blockquote><p id="3140" class="pw-post-body-paragraph jn jo iq jp b jq nw js jt ju nx jw jx jy ny ka kb kc nz ke kf kg oa ki kj kk ij bi translated">有时您会想要约束角度范围。基本上，我的机器人的第一个关节在物理上不能承受负角度:因此，我没有在我的三联输入中引入任何负角度θ1。</p><h2 id="0d85" class="li lj iq bd lk ll lm dn ln lo lp dp lq jy lr ls lt kc lu lv lw kg lx ly lz ma bi translated"><strong class="ak">用途</strong></h2><p id="cc76" class="pw-post-body-paragraph jn jo iq jp b jq mu js jt ju mv jw jx jy mw ka kb kc mx ke kf kg my ki kj kk ij bi translated">最后，利用模型进行预测。您可以使用同一个 Keras API 中的函数:</p><pre class="km kn ko kp gt nl nm nn no aw np bi"><span id="37f3" class="li lj iq nm b gy nq nr l ns nt">model.predict</span><span id="b481" class="li lj iq nm b gy ob nr l ns nt">#Save the model<br/>model.save_weights(‘model_weights.h5’)</span><span id="be7d" class="li lj iq nm b gy ob nr l ns nt">model.save(‘model.h5’)</span></pre><p id="c99e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">预测的输入可能如下所示:</p><pre class="km kn ko kp gt nl nm nn no aw np bi"><span id="b43f" class="li lj iq nm b gy nq nr l ns nt">posCartesian = np.array([[posX, posY]])</span><span id="1796" class="li lj iq nm b gy ob nr l ns nt">prediction = model.predict(posCartesian)</span></pre><p id="1b59" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">非常感谢您的阅读，如果您有任何问题，或者您有合理的批评，或者只是想交流您的项目，请随时联系我们。</p><p id="bb18" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一篇文章将关注使用 Python-Arduino 协作在真实机器上的模型部署。敬请期待！</p><h2 id="5925" class="li lj iq bd lk ll lm dn ln lo lp dp lq jy lr ls lt kc lu lv lw kg lx ly lz ma bi translated">参考资料:</h2><p id="eeb7" class="pw-post-body-paragraph jn jo iq jp b jq mu js jt ju mv jw jx jy mw ka kb kc mx ke kf kg my ki kj kk ij bi translated">您应该在此处访问该项目的 Colab:</p><p id="5c4c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae oc" href="https://gist.github.com/Momento624/d5c3d85f6ff1bd507f092ddb53d655f0" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/momento 624/d5c 3d 85 f 6 ff 1 BD 507 f 092 DDB 53d 655 f 0</a></p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="b990" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">张量流:<a class="ae oc" href="https://en.wikipedia.org/wiki/TensorFlow" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/TensorFlow</a></p><p id="bc24" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">https://en.wikipedia.org/wiki/Scikit-learn</p><p id="a6e6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">https://en.wikipedia.org/wiki/NumPy<a class="ae oc" href="https://en.wikipedia.org/wiki/NumPy" rel="noopener ugc nofollow" target="_blank">号</a></p><p id="efe4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">https://en.wikipedia.org/wiki/Matplotlib<a class="ae oc" href="https://en.wikipedia.org/wiki/Matplotlib" rel="noopener ugc nofollow" target="_blank"/></p><p id="679b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">https://en.wikipedia.org/wiki/Keras</p></div></div>    
</body>
</html>