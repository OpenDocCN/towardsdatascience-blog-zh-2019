<html>
<head>
<title>A Complete Exploratory Data Analysis and Visualization for Text Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">文本数据的完整探索性数据分析和可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-complete-exploratory-data-analysis-and-visualization-for-text-data-29fb1b96fb6a?source=collection_archive---------3-----------------------#2019-03-18">https://towardsdatascience.com/a-complete-exploratory-data-analysis-and-visualization-for-text-data-29fb1b96fb6a?source=collection_archive---------3-----------------------#2019-03-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/c38d01f8c7cf28f438e5df69487224a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aJEp998491GN212bfizaUQ.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo credit: Pixabay</figcaption></figure><div class=""/><div class=""><h2 id="4f6f" class="pw-subtitle-paragraph kc je jf bd b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt dk translated">如何将可视化和自然语言处理结合起来，以一种直观的方式产生洞察力</h2></div><p id="c8ea" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">可视化表示文本文档的内容是<a class="ae lq" href="https://en.wikipedia.org/wiki/Text_mining" rel="noopener ugc nofollow" target="_blank">文本挖掘</a>领域最重要的任务之一。作为一名数据科学家或<a class="ae lq" href="https://plot.ly/python/" rel="noopener ugc nofollow" target="_blank"> NLP </a>专家，我们不仅从不同的方面和不同的细节层次探索文档的内容，而且我们还总结单个文档，显示单词和主题，检测事件，并创建故事情节。</p><p id="9193" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">然而，在可视化非结构化(文本)数据和结构化数据之间存在一些差距。例如，许多文本可视化不直接表示文本，它们表示语言模型的输出(字数、字符长度、单词序列等)。).</p><p id="c5e6" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">在本帖中，我们将使用<a class="ae lq" href="https://www.kaggle.com/nicapotato/womens-ecommerce-clothing-reviews" rel="noopener ugc nofollow" target="_blank">女装电子商务评论数据集</a>，并使用<a class="ae lq" href="https://plot.ly/python/" rel="noopener ugc nofollow" target="_blank"> Plotly 的 Python 绘图库</a>和<a class="ae lq" href="https://bokeh.pydata.org/en/latest/" rel="noopener ugc nofollow" target="_blank">散景可视化库</a>，尽可能多地探索和可视化。我们不仅要探索文本数据，还要可视化数字和分类特征。我们开始吧！</p><h1 id="1505" class="lr ls jf bd lt lu lv lw lx ly lz ma mb kl mc km md ko me kp mf kr mg ks mh mi bi translated">数据</h1><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="9a06" class="ms ls jf mo b gy mt mu l mv mw">df = pd.read_csv('Womens Clothing E-Commerce Reviews.csv')</span></pre><figure class="mj mk ml mm gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mx"><img src="../Images/2bc80c1f70c72f7f6c5087ea372ecdaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1E-zIJXMas05676qvuWSzw.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">table 1</figcaption></figure><p id="9390" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">在对数据进行简单检查后，我们发现需要进行一系列的数据预处理。</p><ul class=""><li id="c8f6" class="my mz jf kw b kx ky la lb ld na lh nb ll nc lp nd ne nf ng bi translated">删除“标题”功能。</li><li id="e558" class="my mz jf kw b kx nh la ni ld nj lh nk ll nl lp nd ne nf ng bi translated">删除缺少“审查文本”的行。</li><li id="ceb8" class="my mz jf kw b kx nh la ni ld nj lh nk ll nl lp nd ne nf ng bi translated">清理“审阅文本”列。</li><li id="b126" class="my mz jf kw b kx nh la ni ld nj lh nk ll nl lp nd ne nf ng bi translated">使用<a class="ae lq" href="https://textblob.readthedocs.io/en/dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw jg"> TextBlob </strong> </a>计算情绪极性，该极性位于[-1，1]范围内，其中 1 表示积极情绪，-1 表示消极情绪。</li><li id="5d3b" class="my mz jf kw b kx nh la ni ld nj lh nk ll nl lp nd ne nf ng bi translated">为评论的长度创建新的特征。</li><li id="97a4" class="my mz jf kw b kx nh la ni ld nj lh nk ll nl lp nd ne nf ng bi translated">为评论的字数创建新功能。</li></ul><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">text_preprocessing.py</figcaption></figure><p id="7b28" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">为了预览情感极性得分是否有效，我们随机选择了 5 条情感极性得分最高的评论(1):</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="1c11" class="ms ls jf mo b gy mt mu l mv mw">print('5 random reviews with the highest positive sentiment polarity: \n')<br/>cl = df.loc[df.polarity == 1, ['Review Text']].sample(5).values<br/>for c in cl:<br/>    print(c[0])</span></pre><figure class="mj mk ml mm gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi no"><img src="../Images/54f0aef66b1a38672a19444521c5b900.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TK40esWITCAcFu6QzXFbnQ.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 1</figcaption></figure><p id="6f60" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">然后随机选择 5 条最中性情感极性得分(零)的评论:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="f487" class="ms ls jf mo b gy mt mu l mv mw">print('5 random reviews with the most neutral sentiment(zero) polarity: \n')<br/>cl = df.loc[df.polarity == 0, ['Review Text']].sample(5).values<br/>for c in cl:<br/>    print(c[0])</span></pre><figure class="mj mk ml mm gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/05a52a4204bd4a203d7f80820be90163.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tvAJ4q8qldsPARCsPCedhg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 2</figcaption></figure><p id="84b9" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">只有 2 篇评论的负面情绪极性得分最高:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="fb67" class="ms ls jf mo b gy mt mu l mv mw">print('2 reviews with the most negative polarity: \n')<br/>cl = df.loc[df.polarity == -0.97500000000000009, ['Review Text']].sample(2).values<br/>for c in cl:<br/>    print(c[0])</span></pre><figure class="mj mk ml mm gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nq"><img src="../Images/0cae333f3941b90063ed7123a05b560b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-UYbEjFfnpzyeBgAmugT6Q.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 3</figcaption></figure><p id="1f36" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">成功了！</p><h1 id="d7a6" class="lr ls jf bd lt lu lv lw lx ly lz ma mb kl mc km md ko me kp mf kr mg ks mh mi bi translated">Plotly 单变量可视化</h1><p id="30b0" class="pw-post-body-paragraph ku kv jf kw b kx nr kg kz la ns kj lc ld nt lf lg lh nu lj lk ll nv ln lo lp ij bi translated">单变量或单变量可视化是最简单的可视化类型，它仅由对单个特征或属性的观察组成。单变量可视化包括直方图、条形图和折线图。</p><h2 id="32b1" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated"><strong class="ak">评论情绪极性得分分布</strong></h2><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="8a60" class="ms ls jf mo b gy mt mu l mv mw">df['polarity'].iplot(<br/>    kind='hist',<br/>    bins=50,<br/>    xTitle='polarity',<br/>    linecolor='black',<br/>    yTitle='count',<br/>    title='Sentiment Polarity Distribution')</span></pre><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="oh nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 4</figcaption></figure><p id="565e" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">绝大多数情感极性得分都大于零，这意味着它们中的大多数都非常积极。</p><h2 id="7212" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated">评论等级的分布</h2><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="2a83" class="ms ls jf mo b gy mt mu l mv mw">df['Rating'].iplot(<br/>    kind='hist',<br/>    xTitle='rating',<br/>    linecolor='black',<br/>    yTitle='count',<br/>    title='Review Rating Distribution')</span></pre><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="oh nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 5</figcaption></figure><p id="609f" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">评级与极性得分一致，也就是说，大多数评级在 4 或 5 的范围内相当高。</p><h2 id="2182" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated">审稿人年龄分布</h2><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="6943" class="ms ls jf mo b gy mt mu l mv mw">df['Age'].iplot(<br/>    kind='hist',<br/>    bins=50,<br/>    xTitle='age',<br/>    linecolor='black',<br/>    yTitle='count',<br/>    title='Reviewers Age Distribution')</span></pre><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="oh nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 6</figcaption></figure><p id="461a" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">大多数评论者年龄在 30 到 40 岁之间。</p><h2 id="b612" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated">分发检查文本长度</h2><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="41f9" class="ms ls jf mo b gy mt mu l mv mw">df['review_len'].iplot(<br/>    kind='hist',<br/>    bins=100,<br/>    xTitle='review length',<br/>    linecolor='black',<br/>    yTitle='count',<br/>    title='Review Text Length Distribution')</span></pre><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="oh nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 7</figcaption></figure><h2 id="9788" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated">评论字数的分布</h2><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="83d2" class="ms ls jf mo b gy mt mu l mv mw">df['word_count'].iplot(<br/>    kind='hist',<br/>    bins=100,<br/>    xTitle='word count',<br/>    linecolor='black',<br/>    yTitle='count',<br/>    title='Review Text Word Count Distribution')</span></pre><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="oh nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 8</figcaption></figure><p id="4018" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">有相当多的人喜欢留下长篇评论。</p><p id="847a" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">对于分类特征，我们简单地使用条形图来表示频率。</p><h2 id="0a1f" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated">分裂的分布</h2><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="7705" class="ms ls jf mo b gy mt mu l mv mw">df.groupby('Division Name').count()['Clothing ID'].iplot(kind='bar', yTitle='Count', linecolor='black', opacity=0.8,<br/>                                                           title='Bar chart of Division Name', xTitle='Division Name')</span></pre><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="oh nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 9</figcaption></figure><p id="1171" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">一般分部的评论数最多，Initmates 分部的评论数最少。</p><h2 id="1f23" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated">部门分布</h2><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="21da" class="ms ls jf mo b gy mt mu l mv mw">df.groupby('Department Name').count()['Clothing ID'].sort_values(ascending=False).iplot(kind='bar', yTitle='Count', linecolor='black', opacity=0.8,<br/>                                                           title='Bar chart of Department Name', xTitle='Department Name')</span></pre><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="oh nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 10</figcaption></figure><p id="0315" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">说到部门，Tops 部门的评论最多，Trend 部门的评论最少。</p><h2 id="ab29" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated">阶级的分布</h2><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="bb3c" class="ms ls jf mo b gy mt mu l mv mw">df.groupby('Class Name').count()['Clothing ID'].sort_values(ascending=False).iplot(kind='bar', yTitle='Count', linecolor='black', opacity=0.8,<br/>                                                           title='Bar chart of Class Name', xTitle='Class Name')</span></pre><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="oh nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 11</figcaption></figure><p id="fe59" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">现在我们来看“评论文本”特征，在探索这个特征之前，我们需要提取<a class="ae lq" href="https://en.wikipedia.org/wiki/N-gram" rel="noopener ugc nofollow" target="_blank"> N-Gram </a>特征。<a class="ae lq" href="https://en.wikipedia.org/wiki/N-gram" rel="noopener ugc nofollow" target="_blank">N-gram</a>用于描述作为观察点的词的数量，例如，unigram 表示单词，bigram 表示双词短语，trigram 表示三词短语。为了做到这一点，我们使用了<a class="ae lq" href="https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html" rel="noopener ugc nofollow" target="_blank"> scikit-learn 的</a> <code class="fe oi oj ok mo b"><a class="ae lq" href="https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html" rel="noopener ugc nofollow" target="_blank">CountVectorizer</a></code> <a class="ae lq" href="https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html" rel="noopener ugc nofollow" target="_blank">函数</a>。</p><p id="8f3a" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">首先，比较去掉停用词前后的 unigrams 会很有趣。</p><h2 id="eef9" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated"><strong class="ak">移除停用词前的顶级单字分布</strong></h2><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">top_unigram.py</figcaption></figure><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="oh nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 12</figcaption></figure><h2 id="7851" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated">去除停用词后的顶级单字分布</h2><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">top_unigram_no_stopwords.py</figcaption></figure><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="oh nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 13</figcaption></figure><p id="1a21" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">第二，我们想比较去除停用词前后的二元模型。</p><h2 id="bd9a" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated"><strong class="ak">去除停用词前的顶级二元模型分布</strong></h2><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">top_bigram.py</figcaption></figure><figure class="mj mk ml mm gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ol"><img src="../Images/c9e8c42f045d7b87e3f16fbf97e80277.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yxyOZISLc7sLZVcRtBzDOw.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 14</figcaption></figure><h2 id="ad72" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated">去除停用词后的顶级二元模型分布</h2><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">top_bigram_no_stopwords.py</figcaption></figure><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="oh nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 15</figcaption></figure><p id="c44d" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">最后，我们比较去除停用词前后的三元模型。</p><h2 id="e4ff" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated"><strong class="ak">去除停用词前的顶级三元组分布</strong></h2><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">top_trigram.py</figcaption></figure><figure class="mj mk ml mm gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi om"><img src="../Images/44cdcc3a121258d9d5921289c578a334.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*anQqprZzdRECJCqEo8zPqA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 16</figcaption></figure><h2 id="8fe7" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated">去除停用词后的顶三元模型分布</h2><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">top_trigram_no_stopwords.py</figcaption></figure><figure class="mj mk ml mm gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi on"><img src="../Images/70af59d7b448c72a529a83b88ea90acd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-KdN_PTCOURWrBAV6kpO6g.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 17</figcaption></figure><p id="e31f" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated"><a class="ae lq" href="https://en.wikipedia.org/wiki/Part-of-speech_tagging" rel="noopener ugc nofollow" target="_blank"> <strong class="kw jg"> <em class="oo">【词性标注】</em></strong></a><strong class="kw jg"><em class="oo"/></strong>是给每个词分配词性的过程，如名词、动词、形容词等</p><p id="1226" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">我们使用一个简单的<a class="ae lq" href="https://textblob.readthedocs.io/en/dev/" rel="noopener ugc nofollow" target="_blank"><strong class="kw jg"><em class="oo">Text blob</em></strong></a>API 来深入到我们的数据集中的“查看文本”特征的位置，并可视化这些标签。</p><h2 id="1f3d" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated"><strong class="ak">评论语料库顶级词性标签分布</strong></h2><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">POS.py</figcaption></figure><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="oh nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 18</figcaption></figure><p id="d4b5" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">箱线图用于比较电子商务商店的每个部门或分部的情感极性得分、评级、评论文本长度。</p><h2 id="5ce4" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated">这些部门对情绪极性有什么看法</h2><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">department_polarity.py</figcaption></figure><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="oh nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 19</figcaption></figure><p id="23e2" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">除了趋势部门之外，所有六个部门都获得了最高的情绪极性得分，而 Tops 部门收集了最低的情绪极性得分。而趋势部极性得分中值最低。如果你记得的话，潮流系的评论数量最少。这解释了为什么它不像其他部门那样有各种各样的分数分布。</p><h2 id="4114" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated">各部门对评级有什么看法</h2><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">rating_division.py</figcaption></figure><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="oh nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 20</figcaption></figure><p id="7e34" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">除了趋势部，其他部门的中值都是 5 分。总的来说，在这个评论数据集中，评分很高，情绪也很积极。</p><h2 id="31ba" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated">按部门审查长度</h2><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">length_department.py</figcaption></figure><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="oh nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 21</figcaption></figure><p id="4386" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">Tops 和 immune 部门的审查长度中位数相对低于其他部门。</p><h1 id="cafe" class="lr ls jf bd lt lu lv lw lx ly lz ma mb kl mc km md ko me kp mf kr mg ks mh mi bi translated">用 Plotly 实现二元可视化</h1><p id="b795" class="pw-post-body-paragraph ku kv jf kw b kx nr kg kz la ns kj lc ld nt lf lg lh nu lj lk ll nv ln lo lp ij bi translated">二元可视化是一种一次包含两个特征的可视化。它描述了两个特征之间的关联或关系。</p><h2 id="3d5d" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated"><strong class="ak">推荐的情感极性得分分布</strong></h2><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">polarity_recommendation.py</figcaption></figure><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="oh nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 22</figcaption></figure><p id="449e" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">显然，具有较高极性分数的评论更有可能被推荐。</p><h2 id="be15" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated">按建议的评级分布</h2><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">rating_recommendation.py</figcaption></figure><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="oh nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 23</figcaption></figure><p id="de7e" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">推荐的评论比不推荐的评论有更高的评级。</p><h2 id="ff2f" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated"><strong class="ak">按建议分配审查长度</strong></h2><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">review_length_recommend.py</figcaption></figure><figure class="mj mk ml mm gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi op"><img src="../Images/6175159152cc3825a4d9c19c9c25dfc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XGXvYtu6LdyydE9Lh0FXzw.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 24</figcaption></figure><p id="a5e9" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">推荐评论往往比非推荐评论更长。</p><h2 id="8bcb" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated"><strong class="ak">情感极性与评分的 2D 密度联合图</strong></h2><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">sentiment_polarity_rating.py</figcaption></figure><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="oh nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 24</figcaption></figure><h2 id="1146" class="ms ls jf bd lt nw nx dn lx ny nz dp mb ld oa ob md lh oc od mf ll oe of mh og bi translated"><strong class="ak"> 2D 密度年龄与情感极性交汇图</strong></h2><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">age_polarity.py</figcaption></figure><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="oh nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 25</figcaption></figure><p id="7afb" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">很少有人非常积极或非常消极。给予中性到正面评价的人更有可能是 30 多岁。这些年龄的人可能更活跃。</p><h1 id="1f2e" class="lr ls jf bd lt lu lv lw lx ly lz ma mb kl mc km md ko me kp mf kr mg ks mh mi bi translated">寻找特征术语及其关联</h1><p id="7e8a" class="pw-post-body-paragraph ku kv jf kw b kx nr kg kz la ns kj lc ld nt lf lg lh nu lj lk ll nv ln lo lp ij bi translated">有时，我们希望分析不同类别使用的单词，并输出一些显著的术语关联。我们将使用<a class="ae lq" href="https://github.com/JasonKessler/scattertext#using-scattertext-as-a-text-analysis-library-finding-characteristic-terms-and-their-associations" rel="noopener ugc nofollow" target="_blank">分散文本</a>和<a class="ae lq" href="https://github.com/explosion/spaCy" rel="noopener ugc nofollow" target="_blank">空间</a>库来完成这些。</p><p id="0f07" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">首先，我们需要将数据框架转换成一个分散文本语料库。要查找部门名称的差异，请将<code class="fe oi oj ok mo b">category_col</code>参数设置为<code class="fe oi oj ok mo b">'Department Names'</code>，并使用<code class="fe oi oj ok mo b">Review Text</code>列中的查看，通过设置<code class="fe oi oj ok mo b">text</code>列参数进行分析。最后，向<code class="fe oi oj ok mo b">nlp</code>参数传递一个空间模型，并调用<code class="fe oi oj ok mo b">build()</code>来构建语料库。</p><p id="9687" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">以下是区别评论文本和一般英语语料库的术语。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="2d1c" class="ms ls jf mo b gy mt mu l mv mw">corpus = st.CorpusFromPandas(df, category_col='Department Name', text_col='Review Text', nlp=nlp).build()<br/>print(list(corpus.get_scaled_f_scores_vs_background().index[:10]))</span></pre><figure class="mj mk ml mm gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oq"><img src="../Images/f395b429e1be168161c2f83018afd972.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*11SFKxPE7nWgFyROgqAdQA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 26</figcaption></figure><p id="0b15" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">以下是审查文本中与 Tops 部门最相关的术语:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="6894" class="ms ls jf mo b gy mt mu l mv mw">term_freq_df = corpus.get_term_freq_df()<br/>term_freq_df['Tops Score'] = corpus.get_scaled_f_scores('Tops')<br/>pprint(list(term_freq_df.sort_values(by='Tops Score', ascending=False).index[:10]))</span></pre><figure class="mj mk ml mm gt is gh gi paragraph-image"><div class="gh gi or"><img src="../Images/b1184788d032b8ec4e1e2389229b0364.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*mgw9XY-UdwtZMG4lRDuv5w.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 27</figcaption></figure><p id="b398" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">以下是与服装部门联系最紧密的术语:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="1a61" class="ms ls jf mo b gy mt mu l mv mw">term_freq_df['Dresses Score'] = corpus.get_scaled_f_scores('Dresses')<br/>pprint(list(term_freq_df.sort_values(by='Dresses Score', ascending=False).index[:10]))</span></pre><figure class="mj mk ml mm gt is gh gi paragraph-image"><div class="gh gi os"><img src="../Images/0c4fc02d2a1ffabfc39763b7468289ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:550/format:webp/1*9qEJlNDGBFF65LTptdecCg.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 28</figcaption></figure><h1 id="c3eb" class="lr ls jf bd lt lu lv lw lx ly lz ma mb kl mc km md ko me kp mf kr mg ks mh mi bi translated">主题建模评论文本</h1><p id="aded" class="pw-post-body-paragraph ku kv jf kw b kx nr kg kz la ns kj lc ld nt lf lg lh nu lj lk ll nv ln lo lp ij bi translated">最后，我们希望探索这个数据集的主题建模算法，看看它是否会提供任何好处，以及是否适合我们正在为我们的评论文本功能所做的工作。</p><p id="404f" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">我们将在主题建模中试验潜在语义分析(LSA)技术。</p><ul class=""><li id="42d1" class="my mz jf kw b kx ky la lb ld na lh nb ll nc lp nd ne nf ng bi translated">将我们的文档术语矩阵从评论文本生成为一个包含<a class="ae lq" href="https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.TfidfVectorizer.html" rel="noopener ugc nofollow" target="_blank"> TF-IDF 特性</a>的矩阵。</li><li id="05a2" class="my mz jf kw b kx nh la ni ld nj lh nk ll nl lp nd ne nf ng bi translated">LSA 模型用 TF-IDF 得分替换文档术语矩阵中的原始计数。</li><li id="edbc" class="my mz jf kw b kx nh la ni ld nj lh nk ll nl lp nd ne nf ng bi translated">使用<a class="ae lq" href="https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.TruncatedSVD.html" rel="noopener ugc nofollow" target="_blank">截断奇异值分解</a>对文档术语矩阵进行降维。</li><li id="e237" class="my mz jf kw b kx nh la ni ld nj lh nk ll nl lp nd ne nf ng bi translated">因为部门的数量是 6，所以我们设置<code class="fe oi oj ok mo b">n_topics=6</code>。</li><li id="088e" class="my mz jf kw b kx nh la ni ld nj lh nk ll nl lp nd ne nf ng bi translated">取该主题矩阵中每个评论文本的<code class="fe oi oj ok mo b">argmax</code>，将给出数据中每个评论文本的预测主题。然后我们可以将这些分类成每个主题的数量。</li><li id="252a" class="my mz jf kw b kx nh la ni ld nj lh nk ll nl lp nd ne nf ng bi translated">为了更好的理解每个题目，我们会找到每个题目中出现频率最高的三个词。</li></ul><figure class="mj mk ml mm gt is"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">topic_model_LSA.py</figcaption></figure><figure class="mj mk ml mm gt is gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/5a83c96fccb25de065d2aa59dfe6c61d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*fJyNhWujbPjMluWyY6bnlw.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 29</figcaption></figure><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="6a0a" class="ms ls jf mo b gy mt mu l mv mw">top_3_words = get_top_n_words(3, lsa_keys, document_term_matrix, tfidf_vectorizer)<br/>labels = ['Topic {}: \n'.format(i) + top_3_words[i] for i in lsa_categories]</span><span id="e62f" class="ms ls jf mo b gy ou mu l mv mw">fig, ax = plt.subplots(figsize=(16,8))<br/>ax.bar(lsa_categories, lsa_counts);<br/>ax.set_xticks(lsa_categories);<br/>ax.set_xticklabels(labels);<br/>ax.set_ylabel('Number of review text');<br/>ax.set_title('LSA topic counts');<br/>plt.show();</span></pre><figure class="mj mk ml mm gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ov"><img src="../Images/a54d0a948602cd8ef5304fa7812ed5ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CccrIoMfxRb74oYr8E6LhA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Figure 30</figcaption></figure><p id="f0e6" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">通过查看每个主题中最常用的词，我们有一种感觉，我们可能无法在主题类别之间达到任何程度的分离。换句话说，我们不能使用主题建模技术按部门分离评论文本。</p><p id="9f0f" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">主题建模技术有许多重要的局限性。首先,“主题”这个术语有些模糊，到目前为止，很明显主题模型不会为我们的数据产生高度细微的文本分类。</p><p id="6543" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">此外，我们可以观察到绝大多数的复习文本都被归类到第一个主题(主题 0)。LSA 主题建模的 t-SNE 可视化效果不会很好。</p><p id="aa37" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">所有的代码都可以在<a class="ae lq" href="https://github.com/susanli2016/NLP-with-Python/blob/master/EDA%20and%20visualization%20for%20Text%20Data.ipynb" rel="noopener ugc nofollow" target="_blank"> Jupyter 笔记本</a>上找到。代码和交互式可视化可以在<a class="ae lq" href="https://nbviewer.jupyter.org/github/susanli2016/NLP-with-Python/blob/master/EDA%20and%20visualization%20for%20Text%20Data.ipynb" rel="noopener ugc nofollow" target="_blank">的 NBC viewer</a>上查看。</p><p id="f6b3" class="pw-post-body-paragraph ku kv jf kw b kx ky kg kz la lb kj lc ld le lf lg lh li lj lk ll lm ln lo lp ij bi translated">周一快乐！</p></div></div>    
</body>
</html>