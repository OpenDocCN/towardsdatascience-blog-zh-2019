<html>
<head>
<title>Using Standard Deviation in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Python 中使用标准差</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/using-standard-deviation-in-python-77872c32ba9b?source=collection_archive---------3-----------------------#2019-08-15">https://towardsdatascience.com/using-standard-deviation-in-python-77872c32ba9b?source=collection_archive---------3-----------------------#2019-08-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/d2bda09501378aca9c56797ae5ea9ee8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PCMZh7xGtjnSXwxyvuEzkg.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Standard Deviation in Practice</figcaption></figure><div class=""/><div class=""><h2 id="1366" class="pw-subtitle-paragraph kf jh ji bd b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw dk translated">Python 中的均值、标准差和误差线</h2></div><p id="36a7" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">正如<a class="ae lt" href="https://www.dummies.com/education/math/statistics/why-standard-deviation-is-an-important-statistic/" rel="noopener ugc nofollow" target="_blank">这篇文章</a>提到的，通过标准差，你可以了解你的数据是接近平均值还是分布在很大范围内。例如，如果一个雇主想确定他的一个部门的工资对所有员工是否公平，或者是否有很大的差异，他可以使用标准差。为此，他可以找到该部门的平均工资，然后计算标准偏差。一个场景可能如下所示:他发现标准差略高于他的预期，他进一步检查了数据，发现虽然大多数员工都属于类似的薪酬等级，但有四名忠诚的员工在该部门工作了 15 年或更长时间，比其他人长得多，由于他们在该公司工作的时间长，他们的薪酬也高得多。</p><p id="b05c" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">一般来说，低标准偏差意味着数据与平均值非常接近，因此非常可靠，而高标准偏差意味着数据与统计平均值之间存在较大差异，因此不太可靠。</p><p id="2ed4" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">标准差最重要的应用之一是比较两个数据集。如果两个数据集有相同的平均值，这并不意味着它们一定完全相同，对吗？例如，数据集<code class="fe lu lv lw lx b">199, 200, 201</code>和<code class="fe lu lv lw lx b">0, 200, 400</code>都具有相同的平均值(<code class="fe lu lv lw lx b">200</code>，但是第一个数据集与第二个数据集(<em class="ly"> s </em> =200)相比具有非常小的标准差(<em class="ly"> s </em> =1)。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="7e6e" class="mg mh ji bd mi mj mk ml mm mn mo mp mq ko mr kp ms kr mt ks mu ku mv kv mw mx bi translated">样本或总体的标准偏差</h1><p id="97f0" class="pw-post-body-paragraph kx ky ji kz b la my kj lc ld mz km lf lg na li lj lk nb lm ln lo nc lq lr ls im bi translated"><strong class="kz jj"> <em class="ly">群体</em> </strong>数据集包含指定组的所有成员(可能数据值的完整列表)。例如，人口可能是“居住在加拿大的所有人”。<strong class="kz jj"> <em class="ly">样本</em> </strong>数据集包含群体的一部分或子集。样本的大小总是小于被抽取样本的总体大小。例如，样本可能是“生活在加拿大的一些人”。</p><p id="3868" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我们通常对了解<strong class="kz jj"> <em class="ly">总体</em> </strong> <strong class="kz jj"> <em class="ly">标准差</em> </strong>感兴趣，因为它包含了我们想要分析的所有值。如果我们有整个人口或更大人口的样本，我们通常会计算人口标准差，但我们不想将我们的发现推广到整个人口。在许多情况下，我们有一个样本数据，我们想从中归纳出一个群体的分析。一般来说，如果您只有一个数据样本，并且想要对从中抽取样本的总体标准偏差进行陈述，则需要使用样本标准偏差。在本文中，我将重点讨论总体标准差。<strong class="kz jj">总体标准差</strong>公式如下:</p><figure class="ne nf ng nh gt iv gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/930f6170ace244256dc1963ad2068915.png" data-original-src="https://miro.medium.com/v2/resize:fit:528/format:webp/1*fWLk5NLbJ3X0farGthyxQw.png"/></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">formula from <a class="ae lt" href="https://statistics.laerd.com/statistical-guides/measures-of-spread-standard-deviation.php" rel="noopener ugc nofollow" target="_blank">here</a></figcaption></figure><p id="fb00" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">例如，如果我们的数据集是<code class="fe lu lv lw lx b">[13, 22, 26, 38, 36, 42,49, 50, 77, 81, 98, 110]</code>，总体均值或平均值将是:数据集中所有单个项目的总和除以项目数，结果将是<code class="fe lu lv lw lx b">53.5</code>。</p><p id="c88d" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">现在，从集合中的每个项目中减去平均值，并计算每个数字与平均值之间的差值的平方。例如，对于第一个项目<code class="fe lu lv lw lx b">13</code>，我们有:</p><pre class="ne nf ng nh gt ni lx nj nk aw nl bi"><span id="a9fc" class="nm mh ji lx b gy nn no l np nq">(13–53.5)=(-40.5) and square of (-40.5) will be: 1,640.25</span></pre><p id="dbc6" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">然后，对所有的平方差求和(<code class="fe lu lv lw lx b">10,581</code>)，并将这个和除以项目数。结果将是<code class="fe lu lv lw lx b">881.75‬</code>。这个数字被称为<strong class="kz jj">方差</strong>。求方差的平方根，求出标准差。所以这个数据集的标准差会是<code class="fe lu lv lw lx b">29.69</code>。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="6f05" class="mg mh ji bd mi mj mk ml mm mn mo mp mq ko mr kp ms kr mt ks mu ku mv kv mw mx bi translated">Python 中的标准差</h1><p id="1f5e" class="pw-post-body-paragraph kx ky ji kz b la my kj lc ld mz km lf lg na li lj lk nb lm ln lo nc lq lr ls im bi translated">可以使用 Python 中的<code class="fe lu lv lw lx b">Numpy</code>库计算数据集的总体均值和标准差。下面的代码展示了这项工作:</p><pre class="ne nf ng nh gt ni lx nj nk aw nl bi"><span id="4128" class="nm mh ji lx b gy nn no l np nq">import numpy as np<br/>dataset=[13, 22, 26, 38, 36, 42,49, 50, 77, 81, 98, 110]</span><span id="75c5" class="nm mh ji lx b gy nr no l np nq">print('Mean:', np.mean(dataset))<br/>print('Standard Deviation:', np.std(dataset))</span><span id="e453" class="nm mh ji lx b gy nr no l np nq">Mean:53.5<br/>Standard Deviation: 29.694275542602483</span></pre><h1 id="c8f1" class="mg mh ji bd mi mj ns ml mm mn nt mp mq ko nu kp ms kr nv ks mu ku nw kv mw mx bi translated">在 Python 中使用标准差比较两个数据集</h1><p id="78eb" class="pw-post-body-paragraph kx ky ji kz b la my kj lc ld mz km lf lg na li lj lk nb lm ln lo nc lq lr ls im bi translated">下面的两个数据集显示了两个城市在 15 天内的高温(以华氏度为单位)。我们想比较这两个城市气温的平均值和标准偏差。</p><pre class="ne nf ng nh gt ni lx nj nk aw nl bi"><span id="8aa7" class="nm mh ji lx b gy nn no l np nq">City A= 36, 37, 36, 34, 39, 33, 30, 30, 32, 31, 31, 32, 32, 33, 35</span><span id="faa3" class="nm mh ji lx b gy nr no l np nq">City B= 41, 35, 28, 29, 25, 36, 36, 32, 38, 40, 40, 34, 31, 28, 30</span></pre><p id="bf3f" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">两个城市的平均气温分别是 A 市的<code class="fe lu lv lw lx b">33.4</code>和 B 市的<code class="fe lu lv lw lx b">33.5</code>，非常接近。两个城市都有点冷。但是 A 市的标准差<code class="fe lu lv lw lx b">2.60</code>远小于有<code class="fe lu lv lw lx b">4.83</code>的 B 市。这表明城市 A 的温度比城市 B 更稳定。换句话说，城市 B 的温度每天变化更大。</p><p id="e219" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">为了在图中显示这种变化，我在 Python 中使用了误差线。误差线对问题解决者很有用，因为它们显示了一组计算值的置信度或精度。可以使用 Python 中的<code class="fe lu lv lw lx b">matlibplot</code>库来描述平均值和标准偏差。如下图所示，与城市 b 相比，城市 A 的变化较小。</p><figure class="ne nf ng nh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nx"><img src="../Images/4ae0f856f6fb925825833a0e03155a67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8bsylsdErKoI5ud1v03TqA.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Error bar with mean and standard deviation</figcaption></figure><h1 id="6700" class="mg mh ji bd mi mj ns ml mm mn nt mp mq ko nu kp ms kr nv ks mu ku nw kv mw mx bi translated">用于创建误差线的 Python 代码</h1><p id="27ea" class="pw-post-body-paragraph kx ky ji kz b la my kj lc ld mz km lf lg na li lj lk nb lm ln lo nc lq lr ls im bi translated">现在我将解释我是如何创建误差线的。</p><p id="57b1" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">首先，在导入库之后，我计算了两个数据集的平均值和标准差:</p><pre class="ne nf ng nh gt ni lx nj nk aw nl bi"><span id="6986" class="nm mh ji lx b gy nn no l np nq">City_A=[36,37,36,34,39,33,30,30,32,31,31,32,32,33,35] <br/>City_B=[41,35,28,29,25,36,36,32,38,40,40,34,31,28,30] </span><span id="2754" class="nm mh ji lx b gy nr no l np nq">Mean_City_A=np.mean(City_A)<br/>Mean_City_B=np.mean(City_B) </span><span id="283d" class="nm mh ji lx b gy nr no l np nq">STDV_City_A=np.std(City_A)<br/>STDV_City_B=np.std(City_B)</span></pre><p id="c634" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">然后，我创建一个图形对象并设置轴标签:</p><pre class="ne nf ng nh gt ni lx nj nk aw nl bi"><span id="dafa" class="nm mh ji lx b gy nn no l np nq"># Create a figure with customized size<br/>fig = plt.figure(figsize=(10, 8))<br/>ax = fig.add_subplot(111) </span><span id="ad1d" class="nm mh ji lx b gy nr no l np nq"># Set the axis lables<br/>ax.set_xlabel('Day', fontsize = 18)<br/>ax.set_ylabel('Temperature', fontsize = 18)</span></pre><p id="fc81" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我们需要给 X 轴分配天数(15 天的周期):</p><pre class="ne nf ng nh gt ni lx nj nk aw nl bi"><span id="c974" class="nm mh ji lx b gy nn no l np nq"># X axis is day numbers from 1 to 15<br/>xaxis = np.array(range(1,16))</span></pre><p id="04bb" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">当我们在线上创建误差线时，我们也可以设置该图形的颜色和线条设置:</p><pre class="ne nf ng nh gt ni lx nj nk aw nl bi"><span id="8f04" class="nm mh ji lx b gy nn no l np nq"># Line color for error bar<br/>color_City_A = 'red'<br/>color_City_B = 'darkgreen' </span><span id="3587" class="nm mh ji lx b gy nr no l np nq"># Line style for each dataset<br/>lineStyle_City_A={"linestyle":"--", "linewidth":2, "markeredgewidth":2, "elinewidth":2, "capsize":3}</span><span id="0532" class="nm mh ji lx b gy nr no l np nq">lineStyle_City_B={"linestyle":"-", "linewidth":2, "markeredgewidth":2, "elinewidth":2, "capsize":3}</span></pre><p id="d18e" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">现在，我们为每个数据集项、标准偏差和我们设置的线条样式创建两个误差线。</p><pre class="ne nf ng nh gt ni lx nj nk aw nl bi"><span id="7b2a" class="nm mh ji lx b gy nn no l np nq"># Create an error bar for each dataset</span><span id="c82d" class="nm mh ji lx b gy nr no l np nq">line_City_A=ax.errorbar(xaxis, City_A, yerr=STDV_City_A, **lineStyle_City_A, color=color_City_A, label='City A')</span><span id="f4a1" class="nm mh ji lx b gy nr no l np nq">line_City_B=ax.errorbar(xaxis, City_B, yerr=STDV_City_B, **lineStyle_City_B, color=color_City_B, label='City B')</span></pre><p id="b8ca" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我想在每一行上显示数字，这就是为什么，我使用<code class="fe lu lv lw lx b">annotate </code>函数给点添加文本。功能中的<code class="fe lu lv lw lx b">xy</code>显示数字在图形上的位置，<code class="fe lu lv lw lx b">xytext</code>显示标签的位置。</p><pre class="ne nf ng nh gt ni lx nj nk aw nl bi"><span id="b28a" class="nm mh ji lx b gy nn no l np nq"># Label each dataset on the graph, xytext is the label's position for i, txt in enumerate(City_A):   <br/>     ax.annotate(txt, xy=(xaxis[i], City_A[i]), <br/>             xytext=(xaxis[i]+0.03,City_A[i]+0.3),<br/>             color=color_City_A) </span><span id="7b4b" class="nm mh ji lx b gy nr no l np nq">for i, txt in enumerate(City_B):        <br/>     ax.annotate(txt, xy=(xaxis[i], City_B[i]), <br/>            xytext=(xaxis[i]+0.03,<br/>            City_B[i]+0.3),color=color_City_B)</span></pre><p id="298d" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">此外，我将为图形绘制一个图例，以及关于图例样式、轴字体样式的其他设置，并向图形添加一个灰色网格:</p><pre class="ne nf ng nh gt ni lx nj nk aw nl bi"><span id="71e5" class="nm mh ji lx b gy nn no l np nq"># Customize the legend font and handle <br/>lengthparams = {'legend.fontsize': 13,          'legend.handlelength': 2}<br/>plt.rcParams.update(params) </span><span id="da93" class="nm mh ji lx b gy nr no l np nq"># Customize the font<br/>font = {'family' : 'Arial', 'weight':'bold','size': 12}<br/>matplotlib.rc('font', **font) </span><span id="a379" class="nm mh ji lx b gy nr no l np nq"># Draw a grid for the graph and set face color to the graph<br/>ax.grid(color='lightgrey', linestyle='-')<br/>ax.set_facecolor('w')</span></pre><p id="06a5" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">最后，使用<code class="fe lu lv lw lx b">plt.show()</code>命令显示误差栏。</p><p id="ef30" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">在下面找到 Python 代码:</p><figure class="ne nf ng nh gt iv"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="72ba" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">感谢您阅读本文！</p></div></div>    
</body>
</html>