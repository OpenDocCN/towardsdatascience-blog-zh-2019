<html>
<head>
<title>Data Cleaning, Detection and Imputation of Missing Values in R Markdown — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R 降价中缺失值的数据清理、检测和插补—第 2 部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-cleaning-and-detecting-missing-values-from-australian-open-tennis-data-in-r-part-2-b4f6f32beffd?source=collection_archive---------12-----------------------#2019-01-11">https://towardsdatascience.com/data-cleaning-and-detecting-missing-values-from-australian-open-tennis-data-in-r-part-2-b4f6f32beffd?source=collection_archive---------12-----------------------#2019-01-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="e8a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用 2000 年至 2018 年男子巡回赛的澳大利亚网球公开赛数据在 R 中进行数据清洗和转换变量。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/8db37554952fa7ce28d1816b7ba01ec5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4oU70xGdb8yeZbLOdiJATQ.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo by <a class="ae lb" href="https://unsplash.com/photos/cpIgNaazQ6w?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">The Creative Exchange</a> on <a class="ae lb" href="https://unsplash.com/search/photos/cleaning?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="39c8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天是第 4 天，标志着我的# 29 Day 数据科学项目训练营和我在数据科学中学到的东西的继续。这是一个清洗和预处理 2000 年至 2019 年澳大利亚网球公开赛网球数据的教程指南，以使用 r 预测谁可能获胜。昨天，我们合并了多个 csv 文件，并子集化了您可能会关注的数据<a class="ae lb" href="https://medium.com/@wendy_wong7/predicting-who-will-win-the-2019-australian-tennis-open-in-the-mens-tour-merging-and-filtering-2eabffd633e9" rel="noopener">此处</a>来自博客帖子。</p><h1 id="9183" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">什么是 CRISP-DM 方法论？</h1><p id="057c" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">如果你在<a class="ae lb" href="https://generalassemb.ly/?utm_source=google&amp;utm_medium=cpc&amp;utm_campaign=Google_Brand_SYD_9B_General-Assembly&amp;gclid=CjwKEAjwrpGuBRCkqeXpn-rt5hsSJAC9rxrPngSFB9v5nBfVzpynEhorCQgkk0ivBqj6RD-cuTCsdhoCLH7w_wcB" rel="noopener ugc nofollow" target="_blank">大会</a>上一堂数据分析课，在你的大学上一门数据科学算法的数据科学课程，选修一门感兴趣的 IT 选修课，学习一门在线课程，或者你可能为你的教授做一个数据挖掘项目，你会遇到 CRISP-DM 的数据挖掘原理。</p><p id="bd33" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">CRISP-DM 是数据挖掘的跨行业流程<strong class="jp ir">。这也是我在悉尼大会上学到的一个规定的分析工作流程，当你在政府部门咨询时，这些原则会被用在数据科学项目中。</strong></p><p id="f762" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是 CRISP-DM 方法的工作流程，用于指导您解决数据分析和数据科学问题。您可以回顾 2018 年欧洲智能视觉展的每个步骤。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/df0b47d2ebf855b85fead4e732d55722.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*wdIYO3JrGL2KDrOLhMoKGw.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Source: <a class="ae lb" href="https://www.sv-europe.com/crisp-dm-methodology/" rel="noopener ugc nofollow" target="_blank">Smart Vision 2018</a></figcaption></figure><h1 id="6ff6" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">商业理解</h1><p id="10ad" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">这不是一个商业问题，但问题陈述的范围是根据 2000 年至 2018 年的数据预测今年澳大利亚网球公开赛决赛的冠军。</p><h1 id="6a01" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">数据理解</h1><p id="94e7" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">以前，我们获得了一个数据字典，并通过分析数据的整体结构来研究数据。</p><p id="40ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以下是变量的数据字典:</p><pre class="km kn ko kp gt mg mh mi mj aw mk bi"><span id="cc0b" class="ml ld iq mh b gy mm mn l mo mp">ATP = Tournament number (men)<br/>WTA = Tournament number (women)<br/>Location = Venue of tournament<br/>Tournament = Name of tounament (including sponsor if relevant)<br/>Data = Date of match (note: prior to 2003 the date shown for all matches played in a single tournament is the start date)<br/>Series = Name of ATP tennis series (Grand Slam, Masters, International or International Gold)<br/>Tier = Tier (tournament ranking) of WTA tennis series.<br/>Court = Type of court (outdoors or indoors)<br/>Surface = Type of surface (clay, hard, carpet or grass)<br/>Round = Round of match<br/>Best of = Maximum number of sets playable in match<br/>Winner = Match winner<br/>Loser = Match loser<br/>WRank = ATP Entry ranking of the match winner as of the start of the tournament<br/>LRank = ATP Entry ranking of the match loser as of the start of the tournament<br/>WPts = ATP Entry points of the match winner as of the start of the tournament<br/>LPts = ATP Entry points of the match loser as of the start of the tournament<br/>W1 = Number of games won in 1st set by match winner<br/>L1 = Number of games won in 1st set by match loser<br/>W2 = Number of games won in 2nd set by match winner<br/>L2 = Number of games won in 2nd set by match loser<br/>W3 = Number of games won in 3rd set by match winner<br/>L3 = Number of games won in 3rd set by match loser<br/>W4 = Number of games won in 4th set by match winner<br/>L4 = Number of games won in 4th set by match loser<br/>W5 = Number of games won in 5th set by match winner<br/>L5 = Number of games won in 5th set by match loser<br/>Wsets = Number of sets won by match winner<br/>Lsets = Number of sets won by match loser<br/>Comment = Comment on the match (Completed, won through retirement of loser, or via Walkover)</span></pre><h1 id="824c" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">数据准备—数据清理</h1><p id="09a5" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">通过分类变量的编码、转换变量和缺失值的检测，对数据进行了清理。我们已经合并了原始数据，并使用 StringAsfactors =FALSE 将“aus_open.csv”数据帧读入 R 中，以确保所有变量不会自动作为因子读取。</p><pre class="km kn ko kp gt mg mh mi mj aw mk bi"><span id="10e2" class="ml ld iq mh b gy mm mn l mo mp">###################################<br/># Pre-Processing the Training Data<br/>###################################<br/><br/># Exported aust_open.csv file was exported and a new column was created in Excel to extract the year from the data with non-standardised formatting<br/><br/>a &lt;- read.csv("aus_open.csv",stringsAsFactors = FALSE,header = TRUE)</span></pre><h1 id="3d6f" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">探索性数据分析</h1><p id="3512" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">使用 Hadley Wickham 的<strong class="jp ir"> dplyr </strong>包，我使用函数 glimpse()探索了数据的结构。</p><pre class="km kn ko kp gt mg mh mi mj aw mk bi"><span id="6753" class="ml ld iq mh b gy mm mn l mo mp">#############################<br/># Exploratory Data Analysis<br/>#############################<br/><br/>glimpse(a)  # view the structure of the training data</span></pre><h1 id="6256" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">描述统计学</h1><p id="37ea" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">下面提供了描述性统计的输出，是所有数值变量和缺失值的汇总。</p><pre class="km kn ko kp gt mg mh mi mj aw mk bi"><span id="6df0" class="ml ld iq mh b gy mm mn l mo mp">summary(a) # descriptive statistics<br/>      ATP      Location          Tournament            Date          <br/> Min.   :6   Length:2413        Length:2413        Length:2413       <br/> 1st Qu.:6   Class :character   Class :character   Class :character  <br/> Median :6   Mode  :character   Mode  :character   Mode  :character  <br/> Mean   :6                                                           <br/> 3rd Qu.:6                                                           <br/> Max.   :6                                                           <br/>                                                                     <br/>      Year         Series             Court             Surface         <br/> Min.   :2000   Length:2413        Length:2413        Length:2413       <br/> 1st Qu.:2004   Class :character   Class :character   Class :character  <br/> Median :2009   Mode  :character   Mode  :character   Mode  :character  <br/> Mean   :2009                                                           <br/> 3rd Qu.:2014                                                           <br/> Max.   :2018                                                           <br/>                                                                        <br/>    Round              Best.of     Winner             Loser          <br/> Length:2413        Min.   :5   Length:2413        Length:2413       <br/> Class :character   1st Qu.:5   Class :character   Class :character  <br/> Mode  :character   Median :5   Mode  :character   Mode  :character  <br/>                    Mean   :5                                        <br/>                    3rd Qu.:5                                        <br/>                    Max.   :5                                        <br/>                                                                     <br/>     WRank           LRank                 W1             L1           <br/> Min.   :  1.00   Length:2413        Min.   :    0   Length:2413       <br/> 1st Qu.: 10.00   Class :character   1st Qu.:    7   Class :character  <br/> Median : 28.00   Mode  :character   Median :  860   Mode  :character  <br/> Mean   : 46.97                      Mean   : 1863                     <br/> 3rd Qu.: 65.00                      3rd Qu.: 2145                     <br/> Max.   :768.00                      Max.   :16790                     <br/>                                     NA's   :128                       <br/>       W2              L2              W3              L3       <br/> Min.   :0.000   Min.   :0.000   Min.   :0.000   Min.   :0.000  <br/> 1st Qu.:6.000   1st Qu.:3.000   1st Qu.:6.000   1st Qu.:2.000  <br/> Median :6.000   Median :4.000   Median :6.000   Median :4.000  <br/> Mean   :5.687   Mean   :4.027   Mean   :5.743   Mean   :3.903  <br/> 3rd Qu.:6.000   3rd Qu.:6.000   3rd Qu.:6.000   3rd Qu.:6.000  <br/> Max.   :7.000   Max.   :7.000   Max.   :7.000   Max.   :7.000  <br/> NA's   :10      NA's   :10      NA's   :33      NA's   :33     <br/>       W4              L4              W5               L5        <br/> Min.   :0.000   Min.   :0.000   Min.   : 0.000   Min.   : 0.000  <br/> 1st Qu.:6.000   1st Qu.:2.000   1st Qu.: 6.000   1st Qu.: 2.000  <br/> Median :6.000   Median :4.000   Median : 6.000   Median : 4.000  <br/> Mean   :5.753   Mean   :3.734   Mean   : 5.883   Mean   : 3.813  <br/> 3rd Qu.:6.000   3rd Qu.:6.000   3rd Qu.: 6.000   3rd Qu.: 6.000  <br/> Max.   :7.000   Max.   :7.000   Max.   :21.000   Max.   :19.000  <br/> NA's   :346     NA's   :346     NA's   :1440     NA's   :1440    <br/>     Wsets            Lsets        Comment         <br/> Min.   : 0.000   Min.   : 0.0   Length:2413       <br/> 1st Qu.: 3.000   1st Qu.: 0.0   Class :character  <br/> Median : 3.000   Median : 1.0   Mode  :character  <br/> Mean   : 4.192   Mean   : 1.7                     <br/> 3rd Qu.: 6.000   3rd Qu.: 2.0                     <br/> Max.   :22.000   Max.   :20.0                     <br/> NA's   :1444     NA's   :1444</span></pre><h1 id="cc37" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">转换和编码分类变量</h1><p id="4704" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">从上面的结构可以看出，一些数据属性没有转换成正确的数据类型。这是我最喜欢的部分转换变量的机会！开始了…</p><pre class="km kn ko kp gt mg mh mi mj aw mk bi"><span id="0f73" class="ml ld iq mh b gy mm mn l mo mp"># Transform character variables into numeric variables </span><span id="2d38" class="ml ld iq mh b gy mq mn l mo mp">a$W1 &lt;- as.numeric(a$W1)<br/>a$L1 &lt;- as.numeric(a$L1)<br/>a$WRank &lt;- as.numeric(a$WRank)<br/>a$LRank &lt;- as.numeric(a$LRank)<br/><br/>##########################################################<br/># encoding categorical features<br/>##########################################################<br/><br/># Convert categorical variables into factors to represent their levels<br/>a$Location &lt;- factor(a$Location)<br/>a$Tournament &lt;- factor(a$Tournament)<br/>a$Series &lt;- factor(a$Series)<br/>a$Court &lt;- factor(a$Court)<br/>a$Surface &lt;- factor(a$Surface)<br/>a$Best.of &lt;- factor(a$Best.of)<br/>a$Round &lt;- factor(a$Round)<br/>a$Winner &lt;- factor(a$Winner)<br/>a$Loser &lt;- factor(a$Loser)<br/>a$Comment &lt;- factor(a$Comment)<br/><br/><br/>glimpse(a)  # check that structure of categorical variables have converted with levels</span></pre><h1 id="4a12" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">#为两级以上的分类变量创建虚拟变量</h1><pre class="km kn ko kp gt mg mh mi mj aw mk bi"><span id="58f4" class="ml ld iq mh b gy mm mn l mo mp">library(dummies)<br/><br/>Round &lt;- dummy(a$Round)<br/>Best.of &lt;- dummy(a$Best.of)<br/>Winner &lt;- dummy(a$Winner)<br/>Loser &lt;- dummy(a$Loser)<br/>Comment &lt;- dummy(a$Comment)<br/><br/>head(a)   # check that the values are been converted to dummy variables<br/>str(a)</span></pre><h1 id="02ad" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">总结描述性统计数据，并检查转换变量的结构</h1><pre class="km kn ko kp gt mg mh mi mj aw mk bi"><span id="bf6e" class="ml ld iq mh b gy mm mn l mo mp"># Descriptive statistics<br/>summary(a)</span><span id="57ef" class="ml ld iq mh b gy mq mn l mo mp"># View the structure of the transformed variables the 'dplyr' way<br/> <br/> &gt; glimpse(a)</span><span id="d74f" class="ml ld iq mh b gy mq mn l mo mp">Observations: 2,413<br/>Variables: 27<br/>$ ATP        &lt;int&gt; 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, ...<br/>$ Location   &lt;fct&gt; Melbourne, Melbourne, Melbourne, Melbourne, Melbourne,...<br/>$ Tournament &lt;fct&gt; Australian Open, Australian Open, Australian Open, Aus...<br/>$ Date       &lt;chr&gt; "1/17/00", "1/17/00", "1/17/00", "1/17/00", "1/17/00",...<br/>$ Year       &lt;int&gt; 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, ...<br/>$ Series     &lt;fct&gt; Grand Slam, Grand Slam, Grand Slam, Grand Slam, Grand ...<br/>$ Court      &lt;fct&gt; Outdoor, Outdoor, Outdoor, Outdoor, Outdoor, Outdoor, ...<br/>$ Surface    &lt;fct&gt; Hard, Hard, Hard, Hard, Hard, Hard, Hard, Hard, Hard, ...<br/>$ Round      &lt;fct&gt; 1st Round, 1st Round, 1st Round, 1st Round, 1st Round,...<br/>$ Best.of    &lt;fct&gt; 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, ...<br/>$ Winner     &lt;fct&gt; Agassi A., Alami K., Arazi H., Behrend T., Bjorkman J....<br/>$ Loser      &lt;fct&gt; Puerta M., Manta L., Alonso J., Meligeni F., Stoltenbe...<br/>$ WRank      &lt;dbl&gt; 1, 35, 41, 106, 76, 151, 39, 54, 30, 64, 98, 29, 34, 6...<br/>$ LRank      &lt;dbl&gt; 112, 107, 111, 28, 81, 57, 22, 66, 51, 155, 119, 257, ...<br/>$ W1         &lt;dbl&gt; 6, 6, 6, 6, 6, 7, 3, 7, 7, 7, 6, 6, 6, 6, 6, 7, 6, 6, ...<br/>$ L1         &lt;dbl&gt; 2, 4, 3, 2, 7, 6, 6, 6, 6, 6, 4, 7, 7, 4, 3, 6, 4, 3, ...<br/>$ W2         &lt;int&gt; 6, 7, 7, 4, 6, 6, 6, 6, 6, 5, 6, 7, 6, 6, 6, 6, 7, 6, ...<br/>$ L2         &lt;int&gt; 2, 6, 6, 6, 4, 1, 1, 4, 4, 7, 4, 6, 3, 4, 3, 3, 6, 3, ...<br/>$ W3         &lt;int&gt; 6, 7, 6, 6, 6, 6, 6, NA, 6, 6, 7, 1, 7, 7, 4, 7, 4, 6,...<br/>$ L3         &lt;int&gt; 3, 5, 2, 7, 4, 4, 4, NA, 4, 3, 6, 6, 5, 6, 6, 6, 6, 2,...<br/>$ W4         &lt;int&gt; NA, NA, NA, 6, 0, NA, 7, NA, NA, 7, NA, 6, 6, NA, 7, N...<br/>$ L4         &lt;int&gt; NA, NA, NA, 3, 6, NA, 6, NA, NA, 5, NA, 3, 1, NA, 6, N...<br/>$ W5         &lt;int&gt; NA, NA, NA, 6, 6, NA, NA, NA, NA, NA, NA, 6, NA, NA, N...<br/>$ L5         &lt;int&gt; NA, NA, NA, 0, 4, NA, NA, NA, NA, NA, NA, 1, NA, NA, N...<br/>$ Wsets      &lt;int&gt; 3, 3, 3, 3, 3, 3, 3, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, ...<br/>$ Lsets      &lt;int&gt; 0, 0, 0, 2, 2, 0, 1, 0, 0, 1, 0, 2, 1, 0, 1, 0, 2, 0, ...<br/>$ Comment    &lt;fct&gt; Completed, Completed, Completed, Completed, Completed,...</span></pre><h1 id="99a1" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">检测缺失值</h1><p id="33ef" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我们将尝试一些方法来检测缺失值，例如计算每列缺失值的数量、求和并取平均值。</p><pre class="km kn ko kp gt mg mh mi mj aw mk bi"><span id="e925" class="ml ld iq mh b gy mm mn l mo mp"># Sum the number of missing values</span><span id="e89f" class="ml ld iq mh b gy mq mn l mo mp">&gt; sum(is.na(a)) <br/>[1] 6810</span><span id="bf74" class="ml ld iq mh b gy mq mn l mo mp"># average of the missing values in each column</span><span id="2828" class="ml ld iq mh b gy mq mn l mo mp">&gt; mean(is.na(a)) <br/>[1] 0.1045264</span><span id="5f12" class="ml ld iq mh b gy mq mn l mo mp"># Count the number of missing values per column</span><span id="c995" class="ml ld iq mh b gy mq mn l mo mp">&gt; colSums(is.na(a)) </span><span id="b318" class="ml ld iq mh b gy mq mn l mo mp">       ATP   Location Tournament       Date       Year     Series      Court <br/>         0          0          0          0          0          0          0 <br/>   Surface      Round    Best.of     Winner      Loser      WRank      LRank <br/>         0          0          0          0          0          0          5 <br/>        W1         L1         W2         L2         W3         L3         W4 <br/>       128        131         10         10         33         33        346 <br/>        L4         W5         L5      Wsets      Lsets    Comment <br/>       346       1440       1440       1444       1444          0</span></pre><h1 id="cd6c" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">获取缺失值的百分比</h1><p id="09b4" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">在检测缺失值时，5%是每列的可接受阈值。输出确认了 L4、W4、L5、W5、Wsets 和 Lsets 列的缺失值大于 5%,可以删除或估算。</p><pre class="km kn ko kp gt mg mh mi mj aw mk bi"><span id="fbfb" class="ml ld iq mh b gy mm mn l mo mp">sapply(a, function(df){<br/>  sum(is.na(df) ==TRUE)/length(df);<br/> })<br/>        ATP    Location  Tournament        Date        Year      Series <br/>0.000000000 0.000000000 0.000000000 0.000000000 0.000000000 0.000000000 <br/>      Court     Surface       Round     Best.of      Winner       Loser <br/>0.000000000 0.000000000 0.000000000 0.000000000 0.000000000 0.000000000 <br/>      WRank       LRank          W1          L1          W2          L2 <br/>0.000000000 0.002072109 0.053046001 0.054289266 0.004144219 0.004144219 <br/>         W3          L3          W4          L4          W5          L5 <br/>0.013675922 0.013675922 0.143389971 0.143389971 0.596767509 0.596767509 <br/>      Wsets       Lsets     Comment <br/>0.598425197 0.598425197 0.000000000</span></pre><p id="1cf8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们通过 install . packages(“Amelia”)将<strong class="jp ir"> Amelia 包</strong>安装到控制台中，以帮助绘制可视化缺失值的地图。从该图中，我们观察到从以下各列中检测到缺失值:</p><ul class=""><li id="0c3b" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated">Lsets —失败者集合</li><li id="657f" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">Wsets —获胜者集合</li><li id="3955" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">W5——第五盘的获胜者</li><li id="1d41" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">第五盘输了</li><li id="d7a9" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">l4——第四盘输了</li><li id="44e5" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">W4——第四盘的赢家</li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nf"><img src="../Images/1c368b0cdec645d0f46524b73dfabc58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i3PKL0QXQar-KcBEN5hofA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Plot of the percentage of missing values</figcaption></figure><h1 id="f4d6" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">为什么我没有删除所有丢失的值？</h1><p id="455c" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我试过了，但是最后一行代码帮助我创建了一个向量来删除 NAs，但是它也删除了我 50%以上的训练数据，所以它没有帮助！</p><p id="f31b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">view(a)# view missing values<br/>complete . cases(a)# view missing values<br/>which(complete . cases(a))# view 哪个行有全行值位于<br/>哪个(！complete.cases(a)) #查看哪一行的值为 l</p><p id="43ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">na_vec  na_vec &lt; -哪个(！complete.cases(a)) #创建 NA 值的向量</p><p id="a05f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">移除 na 行的[-na_vec] # vector。</p><h1 id="df89" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated"><strong class="ak">如何估算缺失数据？—数字变量</strong></h1><p id="5050" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">绘制估算数据是为了理解原始数据的分布。我遵循的估算技术来自作者 Michy Alice 的博客。这些是步骤:</p><pre class="km kn ko kp gt mg mh mi mj aw mk bi"><span id="1136" class="ml ld iq mh b gy mm mn l mo mp"># Impute missing values with "pmm" - predicted mean matching. m=5 imputed data sets is default</span><span id="2294" class="ml ld iq mh b gy mq mn l mo mp">imputed_Data &lt;- mice(a.mis, m=5, maxit = 50, method = 'pmm', seed = 500)<br/>summary(imputed_Data)<br/><br/># inspect that missing data has been imputed<br/>imputed_Data$imp$Lsets<br/><br/># check imputed method<br/>imputed_Data$meth</span><span id="8e06" class="ml ld iq mh b gy mq mn l mo mp"># Plot the imputed data and inspect the distribution</span><span id="b09c" class="ml ld iq mh b gy mq mn l mo mp">xyplot(imputed_Data,WRank ~ W1+L1+W2+L2+W3+L3+W4+L4+L5+W5+LRank,pch=18,cex=1)</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/8d1a4f71a7a8b88e767f6ad5c57c2906.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*IjJkPukAo3_qXmMR8xAXkQ.png"/></div></figure><h1 id="6585" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">探索性数据分析</h1><h1 id="b0dc" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">ggplot 数值变量的密度图</h1><p id="66da" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我使用 ggplot 来检查缺失值少于 5%的数值属性，以便通过密度图进行可视化。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/4be9876614c0b9e65027b008cf3ea2ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*THQcLJ0pJ6aIwW8GXF7RBg.png"/></div></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/59a16db8afb29c1ba63f918d5dbae9ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*RZ2M_eb42ehfv8Wnu6QOAg.png"/></div></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/dbc63f0599da493ba52e13e9cbccc682.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*-ccUVis3nKWKOg0DLPD4Yw.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Lsets had &gt; 5% of missing values.</figcaption></figure><pre class="km kn ko kp gt mg mh mi mj aw mk bi"><span id="c424" class="ml ld iq mh b gy mm mn l mo mp">p1 &lt;- ggplot(a, aes(x=a$Year)) + geom_histogram() + ggtitle(" Histogram of Year")<br/>p1<br/><br/>p2 &lt;- ggplot(a, aes(x=a$WRank)) + geom_histogram()+ ggtitle(" Histogram of Winner's Ranking")<br/>p2<br/><br/>p3 &lt;- ggplot(a, aes(x=a$LRank)) + geom_histogram()+ ggtitle(" Histogram of Loser's Ranking")<br/>p3<br/><br/>p4 &lt;- ggplot(a, aes(x=a$W1)) + geom_histogram()+ ggtitle(" Histogram of Winner in the first set")<br/>p4<br/><br/>p5 &lt;- ggplot(a, aes(x=a$L1)) + geom_histogram()+ ggtitle(" Histogram of Loser in the first set")<br/>p5<br/><br/>p6 &lt;- ggplot(a, aes(x=a$W2)) + geom_histogram()+ ggtitle(" Histogram of Winner in the second set")<br/>p6<br/><br/>p7 &lt;- ggplot(a, aes(x=a$L2)) + geom_histogram()+ ggtitle(" Histogram of Loser in the second set")<br/>p7<br/><br/>p8 &lt;- ggplot(a, aes(x=a$W3)) + geom_histogram()+ ggtitle(" Histogram of Winner in the third set")<br/>p8<br/><br/>p9 &lt;- ggplot(a, aes(x=a$L3)) + geom_histogram()+ ggtitle(" Histogram of Loser in the third set")<br/>p9</span></pre><h1 id="8fa3" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">可视化已被虚拟编码或一次性编码的分类变量</h1><pre class="km kn ko kp gt mg mh mi mj aw mk bi"><span id="5744" class="ml ld iq mh b gy mm mn l mo mp">p16 &lt;- plot(x = a$Comment,<br/>     main = "Distribution of Comment", xlab = "Comment",<br/>     ylab = "count")<br/>p16<br/><br/>p17 &lt;- plot(x= a$Winner,main = "Distribution of Winner", xlab = "Winner",<br/>     ylab = "count")<br/>p17<br/><br/>p18 &lt;- plot( x = a$Loser, main = "Distribution of Loser", xlab = "Loser",<br/>      ylab = "Count")<br/>p18<br/><br/>p19 &lt;- plot( x = a$Best.of, main = "Distribution of Best.of", xlab = "Best Of",<br/>      ylab = "Count")<br/>p19<br/><br/>p20 &lt;- plot( x = a$Round, main = "Distribution of Tennis Round", xlab = "Round",<br/>      ylab = "Count")<br/>p20</span></pre><p id="b173" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是估算数字数据的密度图:</p><p id="1a03" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">密度图(估算数据)</p><p id="1ea4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">关键:洋红色(估算数据)和蓝色(观察数据)</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/eef7bb110d54dec254d9865f73f80218.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*isjzaTwi2z5eTjwn8Jqh5Q.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Density plot of the imputed data containing numeric variables</figcaption></figure><pre class="km kn ko kp gt mg mh mi mj aw mk bi"><span id="1169" class="ml ld iq mh b gy mm mn l mo mp"># View the data as individual points<br/>stripplot(imputed_Data, pch = 20, cex = 1.2)</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/0530d9d572d59736abf3bc640a8ee937.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*G31vdvCCnwwjI2b3fZY_MA.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Stripplot of the individual imputed variables containing numeric variables</figcaption></figure><p id="b097" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个预处理和 EDA 的 R 脚本<strong class="jp ir">在<a class="ae lb" href="https://github.com/wendy-wong/wendywong.github.io/blob/master/AustOpen.R" rel="noopener ugc nofollow" target="_blank"> Github </a>上分享。</strong></p><p id="1dbe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> R Markdown 脚本</strong>也保存在<a class="ae lb" href="https://github.com/wendy-wong/wendywong.github.io/blob/master/Aus_Open.Rmd" rel="noopener ugc nofollow" target="_blank"> Github </a>中，并且可以通过命令 Knit to html 查看为 Html 文件，这在网络浏览器上对所有数据属性的绘图特别有用。</p><p id="b98e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ni"> **给自己的提示:</em></p><p id="ce38" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ni"> 1。使用 R Markdown 时，根据下面的截图，在` `{r cars}下面插入 R 代码，确切地说是第 23 行:</em></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nj"><img src="../Images/0bbd0b5583861c4005c17a544f3c7e48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9BRgKMQzXrvOl2LRkEUoTA.png"/></div></div></figure><p id="ed22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ni"> 2。其次，我将与</em> <strong class="jp ir"> <em class="ni">图表</em> </strong> <em class="ni">和</em> <strong class="jp ir"> <em class="ni">图</em> </strong> <em class="ni">相关的第二段 R 代码插入到``` `{r pressure，echo=FALSE}部分下面，代码插入到第 214 行。</em></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nk"><img src="../Images/cb227b7d25239bdcbc00485e0adbd5cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GValyvgzzxpYH00G-oRseQ.png"/></div></div></figure><p id="0c0d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们可视化了 R 中的数据之后，我们希望使用其他分析工具，比如 Tableau，来探索和可视化澳大利亚网球公开赛的数据。</p><p id="5ff6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">快乐编码，我们将在第 3 部分继续 Tableau 的下一篇文章！</p></div></div>    
</body>
</html>