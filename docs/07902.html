<html>
<head>
<title>Histograms in Image Processing with skimage-Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">skimage-Python 在图像处理中的直方图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/histograms-in-image-processing-with-skimage-python-be5938962935?source=collection_archive---------2-----------------------#2019-11-01">https://towardsdatascience.com/histograms-in-image-processing-with-skimage-python-be5938962935?source=collection_archive---------2-----------------------#2019-11-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/089c743158a6757fbe6f2acee392dd0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*Vd5OY8LRaybkFj2NjBbpbA.png"/></div></figure><p id="c8b0" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">可视化一直是表示和解释许多统计细节的有效方法。在图像处理中，直方图用于描述我们正在处理的图像的许多方面。比如，</p><ul class=""><li id="c5d1" class="kv kw it jz b ka kb ke kf ki kx km ky kq kz ku la lb lc ld bi translated">暴露</li><li id="a357" class="kv kw it jz b ka le ke lf ki lg km lh kq li ku la lb lc ld bi translated">对比</li><li id="4147" class="kv kw it jz b ka le ke lf ki lg km lh kq li ku la lb lc ld bi translated">动态量程</li><li id="d190" class="kv kw it jz b ka le ke lf ki lg km lh kq li ku la lb lc ld bi translated">浸透</li></ul><p id="7f3f" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">还有很多。通过可视化直方图，我们可以改善图像的视觉呈现，并且我们还可以通过比较图像的直方图来找出可以应用什么类型的图像处理。</p><h1 id="4ba1" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">什么是直方图？</h1><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/f38eeaef4d9f92fa9f21f5eeac90f56a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*bV7S0zACdidh11ikjYpLpQ.png"/></div></figure><p id="cf97" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">图像存储为像素值，每个像素值代表一个颜色强度值。直方图是图像中出现的这些强度值的频率分布。</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="9865" class="mr lk it mn b gy ms mt l mu mv">h(i) = the number of pixels in I(image) with the intensity value i</span></pre><p id="8a41" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">例如，如果 i = 0，则 h(0)是值为 0 的像素数。</p><h1 id="347e" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">用 skimage 创建图像的直方图</h1><p id="4966" class="pw-post-body-paragraph jx jy it jz b ka mw kc kd ke mx kg kh ki my kk kl km mz ko kp kq na ks kt ku im bi translated"><strong class="jz iu">灰度图像</strong></p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/dfebe6a7fda6d0bf0bc05581b48031c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*udh0oq7IlT3nC9Pc0LWNiQ.png"/></div></figure><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="ec9b" class="mr lk it mn b gy ms mt l mu mv">from skimage import io<br/>import matplotlib.pyplot as plt</span><span id="4997" class="mr lk it mn b gy nc mt l mu mv">image = io.imread('~/Desktop/Lenna_gray.png')</span><span id="878b" class="mr lk it mn b gy nc mt l mu mv">ax = plt.hist(image.ravel(), bins = 256)<br/>plt.show()</span><span id="79bd" class="mr lk it mn b gy nc mt l mu mv">Output: Figure-1</span></pre><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/0e2d573ad6974f829a492ba71da72f75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*YEMxjvxxH5NhA5viZnoK7g.png"/></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">Figure-1</figcaption></figure><p id="d1f7" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在上面的代码中，我们已经加载了 Lenna 的灰度图像，并使用 matplotlib 生成了它的直方图。由于图像是以 2D 有序矩阵的形式存储的，我们使用 ravel()方法将其转换为 1D 数组。</p><p id="77cc" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">彩色图像</strong></p><p id="a8b9" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在彩色图像中，我们有 3 个颜色通道代表 RGB。在组合颜色直方图中，强度计数是所有三个颜色通道的总和。</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="0085" class="mr lk it mn b gy ms mt l mu mv">h(i) = h_red(i) + h_green(i) + h_blue(i)</span></pre><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/5ed9a76f0d8c3944d76122ed275feb12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*gUoANPVUnpV-5hNg2HRX5Q.png"/></div></figure><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="c27c" class="mr lk it mn b gy ms mt l mu mv">from skimage import io<br/>import matplotlib.pyplot as plt</span><span id="c6af" class="mr lk it mn b gy nc mt l mu mv">image = io.imread('~/Desktop/Lenna.png')</span><span id="36e0" class="mr lk it mn b gy nc mt l mu mv"><br/>_ = plt.hist(image.ravel(), bins = 256, color = 'orange', )</span><span id="0489" class="mr lk it mn b gy nc mt l mu mv">_ = plt.hist(image[:, :, 0].ravel(), bins = 256, color = 'red', alpha = 0.5)</span><span id="c445" class="mr lk it mn b gy nc mt l mu mv">_ = plt.hist(image[:, :, 1].ravel(), bins = 256, color = 'Green', alpha = 0.5)</span><span id="a2ec" class="mr lk it mn b gy nc mt l mu mv">_ = plt.hist(image[:, :, 2].ravel(), bins = 256, color = 'Blue', alpha = 0.5)</span><span id="25e8" class="mr lk it mn b gy nc mt l mu mv">_ = plt.xlabel('Intensity Value')<br/>_ = plt.ylabel('Count')<br/>_ = plt.legend(['Total', 'Red_Channel', 'Green_Channel', 'Blue_Channel'])<br/>plt.show()</span><span id="8806" class="mr lk it mn b gy nc mt l mu mv">Output: Figure-2</span></pre><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/b64e54974cb040b097473ceb2305fd9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*o0vPp3MykBj-xgHP964NCw.png"/></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">Figure-2</figcaption></figure><h1 id="d256" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated"><strong class="ak">什么是直方图宁滨？</strong></h1><p id="32b0" class="pw-post-body-paragraph jx jy it jz b ka mw kc kd ke mx kg kh ki my kk kl km mz ko kp kq na ks kt ku im bi translated">通常，在 8 位 representation(2⁸).中，图像的亮度值范围是从[0–255]但是图像也可以使用 2 ⁶、2 比特等来表示。在这种情况下，强度范围很大，很难在直方图中表示每个强度值。</p><p id="8797" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我们用宁滨来克服上述问题。这里我们将范围量化为几个桶。举个例子，</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="1553" class="mr lk it mn b gy ms mt l mu mv">if we quantize 0-255 into 8 bins, here our bins will be<br/>0-31, 32-63, 64-95, 96-127, 128-159, 160-191, 192-223, 224-255</span></pre><p id="7ffa" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">现在，我们需要找到一种方法将每个亮度值放入适当的箱中。我们可以简单地解决这个问题，</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="5ae7" class="mr lk it mn b gy ms mt l mu mv">k = 256 #number of possible integer values in 8 bit representation<br/>b = 8   #number of bins</span><span id="64e7" class="mr lk it mn b gy nc mt l mu mv">j = floor( (h(i)*b)/k )</span><span id="4390" class="mr lk it mn b gy nc mt l mu mv">#j is the bin number of the intensity value at position i</span></pre><p id="051a" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">让我们再次绘制灰度 Lenna 图像的直方图，</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="31aa" class="mr lk it mn b gy ms mt l mu mv">from skimage import io<br/>import matplotlib.pyplot as plt</span><span id="4007" class="mr lk it mn b gy nc mt l mu mv">image = io.imread('~/Desktop/Lenna_gray.png')</span><span id="dfe3" class="mr lk it mn b gy nc mt l mu mv">_ = plt.hist(image.ravel(), bins = 8 )<br/>_ = plt.xlabel('Intensity Value')<br/>_ = plt.ylabel('Count')<br/>plt.show()</span><span id="07af" class="mr lk it mn b gy nc mt l mu mv">Output: Figure-3</span></pre><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/739619ff84dca42dc86487a96546ffe7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*Rjg0n3y3uPyE7N8o6sASYQ.png"/></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">Figure-3</figcaption></figure><h1 id="033d" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">什么是累积直方图？</h1><p id="2099" class="pw-post-body-paragraph jx jy it jz b ka mw kc kd ke mx kg kh ki my kk kl km mz ko kp kq na ks kt ku im bi translated">累积直方图是一种特殊的直方图，可以从正常直方图中导出。我们找到从 0 到 255 的每个强度值的计数，然后将每个后续计数相加，</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="555d" class="mr lk it mn b gy ms mt l mu mv">if i = 0 then H(i) = h(0)<br/>else H(i) = H(i-1) + h(0)</span></pre><p id="de3a" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">累积直方图在许多图像处理应用中是有用的，如直方图均衡化等。</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="9da9" class="mr lk it mn b gy ms mt l mu mv">from skimage import io<br/>import matplotlib.pyplot as plt</span><span id="30dc" class="mr lk it mn b gy nc mt l mu mv">image = io.imread('~/Desktop/Lenna_gray.png')</span><span id="58bd" class="mr lk it mn b gy nc mt l mu mv">_ = plt.hist(image.ravel(), bins = 256, cumulative = True)<br/>_ = plt.xlabel('Intensity Value')<br/>_ = plt.ylabel('Count') <br/>plt.show()</span><span id="7226" class="mr lk it mn b gy nc mt l mu mv">Output: Figure-4</span></pre><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/bd575eb9e44a72cdd2ede2aef2a1a601.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*z9P7QUSvCZEXbK3w1HAymw.png"/></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">Figure-4</figcaption></figure><p id="d1d4" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我希望你明白什么是直方图，以及如何使用 skimage 创建直方图。让我们再见面，我会告诉你一些直方图在图像处理中的用例。</p></div></div>    
</body>
</html>