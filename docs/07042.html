<html>
<head>
<title>Exploring Highcharts in R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索 R 中的高图表</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/exploring-highcharts-in-r-f754143efda7?source=collection_archive---------9-----------------------#2019-10-05">https://towardsdatascience.com/exploring-highcharts-in-r-f754143efda7?source=collection_archive---------9-----------------------#2019-10-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4739" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用《我如何遇见你的母亲》中的数据可视化趋势和模式</h2></div><p id="f4a3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这篇文章最初是作为探索性的探索开始的，目的是为了理解 r 语言中的可视化数据。随后是一系列的实验、测试和探索。在此期间，我还重新观看了我最喜欢的节目《我是如何遇见你母亲的》，这次是看一些重复出现的模式&amp;它留下的数据集。在这两种相似性之间建立联系的需要促使我记录并分享这种学习，这本身仍然是这篇文章的灵感来源。</p><p id="6961" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一般的 R viz 空间目前是相当令人兴奋的，g <a class="ae lb" href="https://ggplot2.tidyverse.org/" rel="noopener ugc nofollow" target="_blank"> gplot2 </a>主宰了与 Hadley Wickham 的商标学校的游戏，使复杂的操作非常轻盈。它能够快速可视化趋势，并定制您想要的任何东西，这使得它成为一个可靠的工具。<a class="ae lb" href="https://plot.ly/r/" rel="noopener ugc nofollow" target="_blank"> Plotly </a>另一方面，让你建立非常美丽的 D3 情节，特别是网站，仪表板。它允许您灵活地悬停键盘或鼠标并查看数据标签，并允许您自定义缩放以查看特定细节，使其成为 R shiny apps &amp; markdown 文档的典范。</p><p id="ca77" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2009 年进入数据 viz 空间的是 D3JS 模块“Highcharts ”,其目前的客户吹嘘脸书、微软和 Stack Overflow。</p><p id="4f7b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Highcharts 的<a class="ae lb" href="https://www.highcharts.com/blog/about/" rel="noopener ugc nofollow" target="_blank">故事</a>也许是一个时代的故事。它的制造商 Torstein hnsi 位于一个被峡湾、山脉和溪流环绕的挪威小镇，他正在寻找一个适中的制图工具，以更新他的主页，其中包括他家在当地山区 Vikjafjellet 的积雪深度测量结果。由于对不断遇到的插件感到厌烦，他采取了启动 Highcharts 的飞跃。自 2009 年以来，它一直是该公司 Highsoft 最畅销的产品&amp;它作为一种主要的图表工具而闻名于世。</p><p id="ce11" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Joshua Kunst 在 R 中的<a class="ae lb" href="http://jkunst.com/highcharter/" rel="noopener ugc nofollow" target="_blank"> Highcharter </a>包是原始 Highcharts Java Script 库的包装函数。本文利用一档以图表和 viz- <em class="lc">《我是如何遇见你的母亲》著称的节目的相关数据，探索了它的一些视觉功能。</em></p><figure class="le lf lg lh gt li gh gi paragraph-image"><div class="gh gi ld"><img src="../Images/00e5102113f6c6fe4d73ef04ff2a1a0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*6ZVmtYeCRXhjpE3WGWb8bg.png"/></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">HIMYM features makes use of many aesthetic charts</figcaption></figure><p id="64e2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">软件包中有两个主要功能，即 hcharts()和 highcharts()，类似于 Ggplot2 的 qplot()和 Ggplot()。前者是单键快捷方式，而后者利用 html 小工具和动画。由于本文绘制了一些非常简单的图表，hcharts()函数足以满足大多数图表的需求。我在最终的图表中使用了更复杂的 highcharts()函数来组合极坐标图和折线图。</p><p id="1256" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们跳进来吧！-</p><p id="8717" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">分组柱形图</strong></p><p id="e9a9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">很好的老式柱形图可能是显示分类数据的最佳图表选择，理由很充分。它以一种易于阅读的方式有效地比较和对比数据。</p><p id="302d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面我画出了 HIMYM 一伙在这个系列中喝的酒的数量。</p><p id="a162" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该语法很容易导航，使用 hcharts()快捷方式，第一个命令本身就足以完成创建原始柱形图的任务，而随后的命令行增加了美观和信息的层次。这里-标题，副标题，学分&amp;一个自定义主题。</p><p id="e93d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里要注意的另一个方面是广泛使用了<em class="lc">马格里特的</em>(它的共同开发者 Stefan Bache 在短片中坚持说它应该用复杂的法国口音发音)% &gt; %，即“管道”，使得语法对 tidyverse 用户友好。</p><pre class="le lf lg lh gt lp lq lr ls aw lt bi"><span id="3418" class="lu lv iq lq b gy lw lx l ly lz">Number_of_drinks %&gt;% <br/>    <br/>  hchart(type = 'column', hcaes(x = `HIMYM Character`, y = `Number of Drinks`, group = Type)) %&gt;%<br/>    <br/>  hc_title(text = "How much did the gang really drink?",<br/>           style = list(fontWeight = "bold", fontSize = "30px"),<br/>           align = "center") %&gt;% <br/>  <br/>  hc_subtitle(text = <br/>                    "'All I want was to have a regular beer at my            regular bar with my regular friends in my regular city.'-Ted Mosby", <br/>              style = list(fontWeight = "bold"),<br/>              align = "center") %&gt;% <br/>  <br/>  hc_credits(enabled = TRUE, <br/>             text = "Data Source: HIMYM;<a class="ae lb" href="https://imgur.com/user/haaaaaaaveyoumetted" rel="noopener ugc nofollow" target="_blank">https://imgur.com/user/haaaaaaaveyoumetted</a>",<br/>             style = list(fontSize = "10px")) %&gt;% <br/>  <br/>  hc_add_theme(hc_theme_ffx())</span></pre><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi ma"><img src="../Images/54317d896cad88a706242fd09ab73285.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SUlZMQyA-Ehqwvoa0WQCNw.jpeg"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Number of drinks by types of drinks &amp; show characters.</figcaption></figure><p id="b608" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">饼状图&amp;彩色面积图</strong></p><p id="b222" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">幸运的是，highcharter 包的作者可能是该节目的粉丝，并在包中包含了一些基于该节目的数据集。对于这两个图表，我使用了那些数据集——马歇尔最喜欢的条形图和馅饼。在节目中，Marshall 以饼状图和条形图的形式向大家展示了他对自己喜欢的棒饼的偏好。在这里，他的偏好以饼状图的形式显现出来&amp;彩色区域图。使用的语法与创建的第一个图表非常相似。我已经根据十六进制代码<a class="ae lb" href="https://htmlcolorcodes.com/" rel="noopener ugc nofollow" target="_blank">给这些图表添加了定制的颜色。尽管可以将自定义主题编码到图表中，但软件包本身有一个巨大的迷人主题库。在整篇文章中，我使用了“ffx”主题，灵感来自 Mozilla Firefox 浏览器。</a></p><pre class="le lf lg lh gt lp lq lr ls aw lt bi"><span id="ddb8" class="lu lv iq lq b gy lw lx l ly lz">#pie chart</span><span id="5acb" class="lu lv iq lq b gy mf lx l ly lz">favorite_bars %&gt;% </span><span id="1460" class="lu lv iq lq b gy mf lx l ly lz"> hchart(type = ‘pie’, hcaes(bars, percent)) %&gt;% </span><span id="0fa5" class="lu lv iq lq b gy mf lx l ly lz"> hc_title(text = “Marshall’s Favorite bars”,<br/> align = “center”,<br/> style = list(fontWeight = “bold”, fontSize = “30px”)) %&gt;% <br/> hc_tooltip(enabled = T) %&gt;% </span><span id="6e35" class="lu lv iq lq b gy mf lx l ly lz"> hc_subtitle(text = “In Percentage of Awesomness!”,<br/> align = “center”,<br/> style = list(fontWeight = “bold”)) %&gt;% </span><span id="69a0" class="lu lv iq lq b gy mf lx l ly lz"> hc_add_theme(hc_theme_ffx()) %&gt;% </span><span id="a883" class="lu lv iq lq b gy mf lx l ly lz"> hc_credits(enabled = T,text = “Data source:HIMYM”)</span><span id="dbab" class="lu lv iq lq b gy mf lx l ly lz">#colored area graph<br/><br/>  favorite_pies %&gt;% </span><span id="e096" class="lu lv iq lq b gy mf lx l ly lz">  mutate( segmentColor = c("#000004", "#3B0F70", "#8C2981",  "#DE4968", "#FE9F6D"))%&gt;% </span><span id="a024" class="lu lv iq lq b gy mf lx l ly lz">  hchart(type = 'coloredarea', hcaes(x = pies, y = percent))%&gt;% <br/>  hc_title(text = "Marshall's favorite pies",<br/>           style = list(fontWeight = "bold", fontSize = "30px"),<br/>           align = "center") %&gt;% </span><span id="5445" class="lu lv iq lq b gy mf lx l ly lz">  hc_subtitle(text = "In Percentage Of Tastiness!",<br/>              style = list(fontWeight = "bold"),<br/>              align = "center") %&gt;% </span><span id="f404" class="lu lv iq lq b gy mf lx l ly lz">  hc_add_theme(hc_theme_ffx())</span></pre><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mg"><img src="../Images/2f63de7ae3ff4e3a38bca7daa9acd9b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2zGDgFvZxBD3cSJ_Iui5Gg.png"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Marshall’s favorite bars &amp; pies- in a pie chart &amp; colored area graph respectively</figcaption></figure><p id="3473" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">气泡图</strong></p><p id="31c0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">倒数第二个图表是一个气泡图，直观地显示了收视率最高的剧集。与散点图不同，气泡图允许绘制 3 D 数据——气泡的大小增加了数据的维度。这里-X 轴代表剧集的名称，Y 轴代表剧集的评分，而气泡代表 IMDB 上的投票数。这有助于我们推断，尽管《三天法则》被评为十大剧集之一，但它的票数很少，因此必须谨慎解读。像这样的标注和注释也可以添加到图表中来指出某些事实——HC _ annotation()函数也允许这样做。</p><pre class="le lf lg lh gt lp lq lr ls aw lt bi"><span id="d301" class="lu lv iq lq b gy lw lx l ly lz">HighestRated %&gt;% </span><span id="11d5" class="lu lv iq lq b gy mf lx l ly lz"> hchart(type = “bubble”, hcaes(x = ‘Episode’, y = Rating, size = Votes, color = <br/> Votes), maxSize = “20%”) %&gt;% </span><span id="2b8f" class="lu lv iq lq b gy mf lx l ly lz"> hc_title(text = “Top Rated Episodes of HIMYM”,<br/> style =list(fontWeight = “bold”, fontSize = “30px”),<br/> align = “center”) %&gt;% </span><span id="6aa6" class="lu lv iq lq b gy mf lx l ly lz"> hc_subtitle(text = “What was your favorite episode?”, <br/> align = “center”,<br/> style =list(fontWeight = “bold”)) %&gt;% </span><span id="5d8c" class="lu lv iq lq b gy mf lx l ly lz"> hc_credits(enabled = T, text = “Size by Number of Votes,<br/> Colored by Rating.<br/> | Data Source- IMDB”) %&gt;% </span><span id="16d1" class="lu lv iq lq b gy mf lx l ly lz"> hc_add_theme(hc_theme_ffx())</span></pre><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mh"><img src="../Images/589ec48438931ab320fad03f4a8560e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CtP8c4u8GesNRN1jfIbstQ.jpeg"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Top Rated episodes of the series, by Ratings &amp; Votes on IMDB</figcaption></figure><p id="d9be" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">极线图</strong></p><p id="c5e1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，极线图被用来衡量人们对备受争议的 HIMYM 大结局的反应。</p><p id="1d42" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个数据集有一个有趣的旋转。《HIMYM》的大结局播出后遭到了一些严重的嘲笑(这里读<a class="ae lb" href="https://mashable.com/2014/04/01/how-i-met-your-mother-finale-reaction/" rel="noopener ugc nofollow" target="_blank"/>，这里读<a class="ae lb" href="https://www.comedycentral.co.uk/news/how-i-met-your-mother-finale-reaction" rel="noopener ugc nofollow" target="_blank"/>，这里读<a class="ae lb" href="https://www.usatoday.com/story/life/entertainthis/2016/03/31/how-i-met-your-mother-series-finale-two-years-later-still-mad/82465776/" rel="noopener ugc nofollow" target="_blank"/>&amp;<a class="ae lb" href="https://www.businessinsider.in/entertainment/tv/fans-are-not-happy-with-the-how-i-met-your-mother-series-finale/articleshow/33057530.cms" rel="noopener ugc nofollow" target="_blank">这里读</a>)。事实上，即使是为这篇文章做研究，也激起了我在 5 年多前看完大结局后第一次感受到的愤怒。但是这些数据，就像人们有时知道的那样，告诉我们一个惊人的变化的故事。</p><p id="e57e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">社交分析平台<a class="ae lb" href="http://canvs.tv/" rel="noopener ugc nofollow" target="_blank"> Canvs </a>研究的大多数人对结局感到乐观。Canvs 算法利用人们对 twitter 反应的情感分析来计算人们对娱乐形式的感受。</p><p id="82b4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面的图表以极坐标图的形式显示了这一数据集，将最常分享的“观点”用粉红色着色，即高于反应平均阈值的反应，而其余的用黄色突出显示。</p><pre class="le lf lg lh gt lp lq lr ls aw lt bi"><span id="e0f1" class="lu lv iq lq b gy lw lx l ly lz">highchart() %&gt;% </span><span id="b560" class="lu lv iq lq b gy mf lx l ly lz"> hc_chart(polar = TRUE) %&gt;% </span><span id="5215" class="lu lv iq lq b gy mf lx l ly lz"> hc_title(text = “HIMYM Finale Reactions”,<br/> style = list(fontWeight = “bold”, fontSize = “30px”),<br/> align = “center”) %&gt;% </span><span id="362d" class="lu lv iq lq b gy mf lx l ly lz"> hc_subtitle(text = “‘And that kids is the story of how I met your mother’”,<br/> style = list(fontWeight = “bold”),<br/> align = “center”) %&gt;% </span><span id="e1c6" class="lu lv iq lq b gy mf lx l ly lz"> hc_xAxis(categories = fans_react$Fans,<br/> style = list(fontWeight = “bold”)) %&gt;% </span><span id="459f" class="lu lv iq lq b gy mf lx l ly lz">hc_credits(enabled = TRUE,<br/> text = “Data Source:Based on a study done by Canvs as reported by The Atlantic”) %&gt;% </span><span id="6a8e" class="lu lv iq lq b gy mf lx l ly lz">hc_add_theme(hc_theme_ffx()) %&gt;%</span><span id="8680" class="lu lv iq lq b gy mf lx l ly lz"> hc_legend(enabled = FALSE) %&gt;% </span><span id="97e0" class="lu lv iq lq b gy mf lx l ly lz"> hc_series(<br/> list(<br/> name = “Bars”,<br/> data = fans_react$Contribution,<br/> colorByPoint = TRUE,<br/> type = “column”,<br/> colors = ifelse(fans_react$Contribution &lt; mean(fans_react$Contribution),”#ffeda0",”#c51b8a”)<br/> ),<br/> list(<br/> name = “line”,<br/> data = fans_react$Contribution,<br/> pointPlacement = “on”,<br/> type = “line”))</span></pre><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mh"><img src="../Images/ae1ede19a8c0b71468b7383b719cdb11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SR0xlsFoN-TVBipvg0nghg.jpeg"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">HIMYM Finale reactions on twitter bucketed and visualized</figcaption></figure><p id="6e64" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关键要点-</p><ol class=""><li id="ac12" class="mi mj iq kh b ki kj kl km ko mk ks ml kw mm la mn mo mp mq bi translated">R 中的 Highcharter 包具有可导航的特性、可抓取的语法和高级 D3JS 视觉效果，是对 R viz 空间的一个很好的补充，目前由 graphics Ggolot2 包的语法所主导。</li><li id="8eea" class="mi mj iq kh b ki mr kl ms ko mt ks mu kw mv la mn mo mp mq bi translated">它可以使用相似的语法和参数创建各种各样的图表，如气泡图、柱形图、树状图、时序图等。</li><li id="3a3c" class="mi mj iq kh b ki mr kl ms ko mt ks mu kw mv la mn mo mp mq bi translated">它不仅支持 R 对象，还使用了广受欢迎的%&gt;% '管道'操作符，让 tidyverse 用户对它非常熟悉。这种简单的语法加上令人惊叹的视觉效果使它成为 R 闪亮应用程序和 R markdown 文档的首选工具。</li></ol><p id="e255" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">代码和所有使用的数据集可以在 github <a class="ae lb" href="https://github.com/manasi1096/Highcharts-HIMYM" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="fa97" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢阅读！你可以在这里联系我<a class="ae lb" href="https://twitter.com/ManasiM_10?s=09" rel="noopener ugc nofollow" target="_blank"/>。</p></div></div>    
</body>
</html>