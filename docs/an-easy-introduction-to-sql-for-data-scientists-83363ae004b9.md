# 面向数据科学家的 SQL 简单介绍

> 原文：<https://towardsdatascience.com/an-easy-introduction-to-sql-for-data-scientists-83363ae004b9?source=collection_archive---------6----------------------->

![](img/e42dcd0b2983396c452048ebae38ff4a.png)

> 想获得灵感？快来加入我的 [**超级行情快讯**](https://www.superquotes.co/?utm_source=mediumtech&utm_medium=web&utm_campaign=sharing) 。😎

SQL(结构化查询语言)是一种为数据存储和管理而设计的标准化编程语言。它允许人们快速、轻松地创建、解析和操作数据。

随着近年来人工智能的大肆宣传，服务于各种行业的技术公司被迫变得更加数据驱动。当一家为数以千计的客户提供服务的公司由数据驱动时，他们将需要一种方法来存储和频繁访问大约*数百万*甚至*数十亿*个数据点的数据。

这就是 SQL 的用武之地。

SQL 很受欢迎，因为它既快又容易理解。它被设计成以类似于英语的方式阅读和书写。当使用 SQL 查询来检索数据时，数据不会被复制到任何地方，而是直接在存储数据的地方被访问，这使得该过程比其他方法快得多。

本教程将教您 SQL 的基础知识，包括:

*   创建数据库表
*   用真实数据填充数据库表
*   检索数据以用于数据科学或机器学习任务

让我们直接开始吧！

# 安装 MySQL

我们要做的第一件事就是安装我们的 SQL server！这将为我们提供一个工作台，开始使用数据库和 SQL 查询。

要安装 MySQL 服务器，您可以从终端运行以下命令:

```
sudo apt-get install mysql-server
```

现在我们将启动我们的 MySQL 服务器。这类似于我们在终端中通过键入“python”来启动 Python。这里唯一的区别是给我们的服务器 root 特权很方便，这样我们就可以灵活地访问任何东西。

```
sudo mysql -u root -p
```

太好了！现在我们的 mysql 服务器正在运行，我们可以开始发出 MySQL 命令了。

在我们继续前进之前，需要记住几件事:

*   所有 MySQL 命令都以分号结尾。如果你输入的命令不是以分号结尾，那么它就不起作用！
*   MySQL 命令通常以大写字母书写，而任何用户定义的文本或数字都以小写字母书写，以便于区分。这并不是严格要求的(如果不遵循这一点，您不会得到任何错误)，但是为了可读性，通常推荐这样做。

# 创建 SQL 数据库和表

现在我们准备创建我们的第一个 SQL 数据库。

[*数据库*](http://en.wikipedia.org/wiki/Database) 是有组织的数据集合。实际上，您可以将数据库视为层次结构中的最高级别。

一个*表*在行(元组)和列(属性)中存储数据。一个数据库可以并且通常由多个表组成

在本教程的其余部分，我们将使用足球(或者您喜欢的足球)运动员的统计数据作为数据库中的数据。

我们要做的第一件事是用“create”命令创建一个名为“soccer_data”的数据库。然后，我们可以用“USE”命令“激活”我们的新数据库。

```
CREATE DATABASE soccer_stats
USE soccer_stats
```

就像我们在 Excel 或 Google Sheets 中创建任何表格一样，我们将定义每一列的名称，以及该列中的数据类型。

我们的“统计”表将跟踪每个足球运动员的进球、助攻、得分和射门次数:

```
CREATE TABLE stats (id INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT, name TEXT, goals INTEGER, assists INTEGER, points INTEGER, shots INTEGER);
```

上面的命令为我们做了几件事:

1.  它在“soccer_stats”数据库中创建了一个名为“stats”的表
2.  我们在表格中设置了 6 列——id、姓名、进球、助攻、得分和射门
3.  对于每一列，我们已经定义了希望该列存储的数据类型。
4.  “id”列有一个特殊的类型(INTEGER NOT NULL PRIMARY KEY AUTO _ INCREMENT ),它自动对每一行进行编号。在构建 SQL 表时，最好给每一行一个惟一的 id，以防两行数据完全相同。

我们可以检查数据库中有哪些表，如下所示:

```
SHOW TABLES;+------------------------+
| Tables_in_soccer_stats |
+------------------------+
| stats                  |
+------------------------+
```

更进一步，我们可以看到关于我们新创建的表的一些信息:

```
DESCRIBE stats;+---------+---------+------+-----+---------+----------------+
| Field   | Type    | Null | Key | Default | Extra          |
+---------+---------+------+-----+---------+----------------+
| id      | int(11) | NO   | PRI | NULL    | auto_increment |
| name    | text    | YES  |     | NULL    |                |
| goals   | int(11) | YES  |     | NULL    |                |
| assists | int(11) | YES  |     | NULL    |                |
| points  | int(11) | YES  |     | NULL    |                |
| shots   | int(11) | YES  |     | NULL    |                |
+---------+---------+------+-----+---------+----------------+
```

# 向我们的 SQL 表添加数据

现在我们开始用足球统计数据填充我们的表！

还记得我说过 SQL 非常易读吗？可以使用名为 INSERT 的命令将数据插入到我们的表中，该命令后跟表名和我们想要插入的数据的简单元组。

```
INSERT INTO stats VALUES (NULL, "John", 26, 22, 26+22, 104);
INSERT INTO stats VALUES (NULL, "Jessica", 126, 82, 126+82, 312);
INSERT INTO stats VALUES (NULL, "Nick", 8, 25, 8+25, 51);
INSERT INTO stats VALUES (NULL, "Mike", 52, 12, 52+12, 174);
INSERT INTO stats VALUES (NULL, "Katie", 26, 92, 26+92, 188);
```

插入数据时要记住几件事:

*   我们可以将 id 设置为 NULL，因为它会自动递增(如前一节所述)
*   请确保正在插入的数据的数据类型与已定义的表的数据类型相匹配

要显示表中的所有数据，只需运行:

```
SELECT * FROM stats;+----+---------+-------+---------+--------+-------+
| id | name    | goals | assists | points | shots |
+----+---------+-------+---------+--------+-------+
|  1 | John    |    26 |      22 |     48 |   104 |
|  2 | Jessica |   126 |      82 |    208 |   312 |
|  3 | Nick    |     8 |      25 |     33 |    31 |
|  4 | Mike    |    52 |      12 |     64 |   174 |
|  5 | Katie   |    26 |      92 |    118 |    88 |
+----+---------+-------+---------+--------+-------+
```

这是我们所有的足球数据。

请注意“SELECT *”是如何从我们的表中获取所有内容的。如果您只需要目标的名称和数量，您可以指定要检索的列:

```
SELECT name,goals FROM stats;
+---------+-------+
| name    | goals |
+---------+-------+
| John    |    26 |
| Jessica |   126 |
| Nick    |     8 |
| Mike    |    52 |
| Katie   |    26 |
+---------+-------+
```

要更新表中的一行，我们可以使用…..你猜对了，更新命令！

```
UPDATE stats SET goals=28 WHERE name="John";
SELECT * FROM stats;+----+---------+-------+---------+--------+-------+
| id | name    | goals | assists | points | shots |
+----+---------+-------+---------+--------+-------+
|  1 | John    |    28 |      22 |     48 |   104 |
|  2 | Jessica |   126 |      82 |    208 |   312 |
|  3 | Nick    |     8 |      25 |     33 |    31 |
|  4 | Mike    |    52 |      12 |     64 |   174 |
|  5 | Katie   |    26 |      92 |    118 |    88 |
+----+---------+-------+---------+--------+-------+
```

在上面的查询中:

*   更新允许我们选择要更新数据的表
*   SET 执行实际的更新
*   其中定义了哪个数据单元将接收特定的更新

# 使用 SQL 查询检索数据

现在我们已经用数据填充了表，我们将学习如何实际检索它。对于那些从事数据科学或机器学习的人来说，这将是大量 SQL 工作的地方——检索数据，为探索和培训做准备。

在上一节中，您已经使用 SELECT 命令完成了一个查询。这次我们将运行一些更复杂的查询。

我们可以限制检索的行数:

```
SELECT * FROM stats LIMIT 3;+----+---------+-------+---------+--------+-------+
| id | name    | goals | assists | points | shots |
+----+---------+-------+---------+--------+-------+
|  1 | John    |    28 |      22 |     48 |   104 |
|  2 | Jessica |   126 |      82 |    208 |   312 |
|  3 | Nick    |     8 |      25 |     33 |    31 |
+----+---------+-------+---------+--------+-------+
```

或者根据球员的进球数对我们的输出进行排序:

```
SELECT * FROM stats ORDER BY goals DESC;+----+---------+-------+---------+--------+-------+
| id | name    | goals | assists | points | shots |
+----+---------+-------+---------+--------+-------+
|  2 | Jessica |   126 |      82 |    208 |   312 |
|  4 | Mike    |    52 |      12 |     64 |   174 |
|  1 | John    |    28 |      22 |     48 |   104 |
|  5 | Katie   |    26 |      92 |    118 |    88 |
|  3 | Nick    |     8 |      25 |     33 |    31 |
+----+---------+-------+---------+--------+-------+
```

我们可以将 SELECT 语句与 WHERE 命令结合起来，创建一种用于检索数据的 if-else 查询:

```
SELECT * FROM stats WHERE goals > 20 and assists > 50;+----+---------+-------+---------+--------+-------+
| id | name    | goals | assists | points | shots |
+----+---------+-------+---------+--------+-------+
|  2 | Jessica |   126 |      82 |    208 |   312 |
|  5 | Katie   |    26 |      92 |    118 |    88 |
+----+---------+-------+---------+--------+-------+
```

MySQL 甚至为我们提供了执行计算的能力。看看我们如何计算每个球员的投篮命中率，并根据这些数字对表格进行排序:

```
SELECT *, points/shots FROM stats ORDER BY points / shots DESC;+----+---------+-------+---------+--------+-------+--------------+
| id | name    | goals | assists | points | shots | points/shots |
+----+---------+-------+---------+--------+-------+--------------+
|  2 | Jessica |   126 |      82 |    208 |   312 |       0.6667 |
|  3 | Nick    |     8 |      25 |     33 |    51 |       0.6471 |
|  5 | Katie   |    26 |      92 |    118 |   188 |       0.6277 |
|  1 | John    |    28 |      22 |     48 |   104 |       0.4615 |
|  4 | Mike    |    52 |      12 |     64 |   174 |       0.3678 |
+----+---------+-------+---------+--------+-------+--------------+
```

我们对 SQL 的简单介绍到此结束！

如果你想练习使用 SQL 查询，我强烈建议你试试 [HackerRank challenges](https://www.hackerrank.com/domains/sql) ，它已经为查询练习提供了预构建的数据库和表格。

# 喜欢学习？

在[推特](https://twitter.com/GeorgeSeif94)上关注我，我会在那里发布所有最新最棒的人工智能、技术和科学！也在 [LinkedIn](https://www.linkedin.com/in/georgeseif/) 上和我联系吧！