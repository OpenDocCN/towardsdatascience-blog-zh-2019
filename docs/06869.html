<html>
<head>
<title>A Guide to Mining and Analysing Tweets with R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 R 挖掘和分析 Tweets 的指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-guide-to-mining-and-analysing-tweets-with-r-2f56818fdd16?source=collection_archive---------2-----------------------#2019-09-30">https://towardsdatascience.com/a-guide-to-mining-and-analysing-tweets-with-r-2f56818fdd16?source=collection_archive---------2-----------------------#2019-09-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5610" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">撰写深刻的 Twitter 分析报告的简单步骤</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/74b5db0ad5d1e4e96084b6f001327f65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qiLMpHZZ9DHPMceajckxgg.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@kmuza?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Carlos Muza</a> on <a class="ae kv" href="https://unsplash.com/search/photos/analytics-report?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6074" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Twitter 为我们提供了大量用户生成的语言数据——这是任何想要进行文本分析的人的梦想。更重要的是，推特让我们能够洞察在线公共行为。因此，分析 Twitter 已经成为品牌和代理商的重要信息来源。</p><p id="5708" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">几个因素让 Twitter 在分析方面比其他社交媒体平台有相当大的优势。首先，推特有限的字符大小为我们提供了一个相对同质的语料库。其次，每天发布的数百万条推文允许访问大量数据样本。第三，tweets 是公开的，容易访问，也可以通过 API 检索。</p><p id="4e98" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管如此，提取这些见解仍然需要一些编码和编程知识。这就是为什么大多数情况下，品牌和机构依赖于易于使用的分析工具，如 SproutSocial 和 Talkwalker，这些工具只需点击一下即可提供这些见解。</p><p id="7166" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇文章中，我帮助你打破这些障碍，并为你提供一个简单的指南，告诉你如何用编程软件 r 提取和分析推文。</p><p id="b4f3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是你可能选择这样做的 3 个原因:</p><ul class=""><li id="8512" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><strong class="ky ir">使用 R 是免费的</strong>，也就是说，你将能够免费制作一份 Twitter 分析报告，同时学习如何编码！</li><li id="0330" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir"> R 给你无限的分析机会</strong>。因此，用它来分析 Twitter，可以让你根据你想要分析的内容进行量身定制的分析，而不是依赖一份一刀切的报告</li><li id="3584" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir"> R 允许你分析任何你想要的 Twitter 账户，即使你没有登录信息</strong>。与许多分析工具相比，这是一个巨大的优势，许多分析工具要求您首先拥有登录详细信息以便分析信息。</li></ul><p id="8855" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">深信不疑？那我们开始吧！</p><h1 id="d35b" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">步骤 1:获取 Twitter API 访问权限</h1><p id="56e9" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">为了开始，您首先需要获得一个 Twitter API。这将允许你检索推文——没有它，你不能做任何事情。获得一个 Twitter API 很容易。首先确保你有一个 Twitter 账户，否则就创建一个。然后，通过以下网站申请开发者帐号:<a class="ae kv" href="https://developer.twitter.com/en/apply-for-access.html" rel="noopener ugc nofollow" target="_blank">https://developer.twitter.com/en/apply-for-access.html</a>。你需要填写一份申请表，包括对你希望分析的内容做更多的解释。</p><p id="de0a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦你的申请被 Twitter 接受(这不会花太长时间)，你将收到以下凭证，你需要保持安全:</p><ul class=""><li id="e7bc" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><strong class="ky ir">消费者密钥</strong></li><li id="e581" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">消费者秘密</strong></li><li id="0792" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">访问令牌</strong></li><li id="9745" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">访问密码</strong></li></ul><h1 id="0295" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">第二步:挖掘推文</h1><p id="60b3" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">一旦有了上面的信息，启动 R 并下载“rtweet”包，我将用它来提取 tweets。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="5ddc" class="ni mh iq ne b gy nj nk l nl nm">install.packages("rtweet")<br/>library (rtweet)</span></pre><p id="92b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，设置连接 Twitter 的身份验证。你可以通过输入你的应用名称、消费者密钥和消费者秘密来做到这一点——所有这些都是你在申请 Twitter API 时收到的信息。您将被重定向到一个 Twitter 页面，并被要求接受认证。一旦完成，你就可以返回 R，开始分析你的推文了！</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="e8ad" class="ni mh iq ne b gy nj nk l nl nm">twitter_token &lt;- create_token(<br/>  app = ****,<br/>  consumer_key = ****,<br/>  consumer_secret = ****,<br/>  set_renv = TRUE)</span></pre><h2 id="399f" class="ni mh iq bd mi nn no dn mm np nq dp mq lf nr ns ms lj nt nu mu ln nv nw mw nx bi translated"><strong class="ak">搜索推文</strong></h2><p id="a883" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">根据您希望执行的分析，您可能希望搜索包含特定单词或标签的推文。请注意，您只能提取过去 6 到 9 天的推文，因此在分析时请记住这一点。</p><p id="7ad8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要做到这一点，只需使用<strong class="ky ir"> search_tweets </strong>函数，后跟一些规范:要提取的 tweets 的数量(n)，是否包括转发和 tweets 的语言。作为示例，请参见下面的代码行。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="d596" class="ni mh iq ne b gy nj nk l nl nm">climate &lt;- search_tweets(“climate”, n=1000, include_rts=FALSE, lang=”en”)</span></pre><h2 id="8e4f" class="ni mh iq bd mi nn no dn mm np nq dp mq lf nr ns ms lj nt nu mu ln nv nw mw nx bi translated">搜索特定的用户帐户</h2><p id="ba8a" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">或者，您可能希望分析特定的用户帐户。在这种情况下，使用<strong class="ky ir"> get_timeline </strong>函数，后跟 twitter 句柄和您希望提取的 tweets 数量。注意，这里只能提取最后 3200 条推文。</p><p id="95c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个例子中，我选择了提取比尔·盖茨的推文。这里的优势是比尔·盖茨的账户总共有 3169 条推文，低于 3200 条的门槛。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="d3e7" class="ni mh iq ne b gy nj nk l nl nm">Gates &lt;- get_timeline("@BillGates", n= 3200)</span></pre><h1 id="14be" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">第三步:分析推文</h1><p id="a7e3" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">在这一部分，我向你展示了你应该包含在每一份 Twitter 分析报告中的 8 个关键观点。为此，让我们更深入地研究一下比尔·盖茨的 Twitter 账户吧！</p><h2 id="77d1" class="ni mh iq bd mi nn no dn mm np nq dp mq lf nr ns ms lj nt nu mu ln nv nw mw nx bi translated">1.显示什么效果最好，什么效果不好</h2><p id="387c" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">任何报告的第一部分都应该提供清晰的信息，说明什么效果最好，什么效果不好。找出表现最好和最差的推文可以快速清晰地了解账户的整体情况。</p><p id="0db2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了做到这一点，你首先需要区分有机推文、转发和回复。下面一行代码向您展示了如何从您的样本中删除转发和回复，只保留有机的推文——就内容而言，这些是您想要分析的推文！</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="9645" class="ni mh iq ne b gy nj nk l nl nm"># Remove retweets<br/>Gates_tweets_organic &lt;- Gates_tweets[Gates_tweets$is_retweet==FALSE, ] </span><span id="ddde" class="ni mh iq ne b gy ny nk l nl nm"># Remove replies<br/>Gates_tweets_organic &lt;- subset(Gates_tweets_organic, is.na(Gates_tweets_organic$reply_to_status_id)) </span></pre><p id="6566" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，你需要通过查看变量来分析参与度:<strong class="ky ir"> favorite_count </strong>(即喜欢的数量)或<strong class="ky ir"> retweet_count </strong>(即转发的数量)。只需将它们按降序排列(变量前有一个减号“-”)即可找到点赞或转发数量最多的一个，或按升序排列(没有减号)即可找到参与次数最少的一个。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="a17d" class="ni mh iq ne b gy nj nk l nl nm">Gates_tweets_organic &lt;- Gates_tweets_organic %&gt;% arrange(-favorite_count)<br/>Gates_tweets_organic[1,5]</span><span id="cdec" class="ni mh iq ne b gy ny nk l nl nm">Gates_tweets_organic &lt;- Gates_tweets_organic %&gt;% arrange(-retweet_count)<br/>Gates_tweets_organic[1,5]</span></pre><h2 id="3196" class="ni mh iq bd mi nn no dn mm np nq dp mq lf nr ns ms lj nt nu mu ln nv nw mw nx bi translated">2.显示回复/转发/有机推文的比率</h2><p id="861c" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">分析回复、转发和有机推文的比例可以告诉你很多你正在分析的账户类型。例如，没有人喜欢一个专门转发的 Twitter 账户，没有任何个人内容。因此，如果一个人希望提高他或她的账户的性能，找到回复、转发和有机推文的良好比例是一个关键的监控指标。</p><p id="8c29" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为第一步，确保创建三个不同的数据集。由于您已经在前面的步骤中创建了一个仅包含有机推文的数据集，现在只需创建一个仅包含转发的数据集和一个仅包含回复的数据集。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="3910" class="ni mh iq ne b gy nj nk l nl nm"># Keeping only the retweets<br/>Gates_retweets &lt;- Gates_tweets[Gates_tweets$is_retweet==TRUE,]</span><span id="8aba" class="ni mh iq ne b gy ny nk l nl nm"># Keeping only the replies<br/>Gates_replies &lt;- subset(Gates_tweets, !is.na(Gates_tweets$reply_to_status_id))</span></pre><p id="f348" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，创建一个单独的数据框，包含有机推文、转发和回复的数量。这些数字很容易找到:它们是你的三个数据集的观测值。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="2ac5" class="ni mh iq ne b gy nj nk l nl nm"># Creating a data frame<br/>data &lt;- data.frame(<br/>  category=c("Organic", "Retweets", "Replies"),<br/>  count=c(2856, 192, 120)<br/>)</span></pre><p id="379c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完成后，您可以开始为圆环图准备数据框，如下所示。这包括添加计算比率和百分比的列，以及一些可视化调整，如指定图例和舍入数据。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="a8bc" class="ni mh iq ne b gy nj nk l nl nm"># Adding columns <br/>data$fraction = data$count / sum(data$count)<br/>data$percentage = data$count / sum(data$count) * 100<br/>data$ymax = cumsum(data$fraction)<br/>data$ymin = c(0, head(data$ymax, n=-1))</span><span id="72ff" class="ni mh iq ne b gy ny nk l nl nm"># Rounding the data to two decimal points<br/>data &lt;- round_df(data, 2)</span><span id="5d92" class="ni mh iq ne b gy ny nk l nl nm"># Specify what the legend should say<br/>Type_of_Tweet &lt;- paste(data$category, data$percentage, "%")</span><span id="6ada" class="ni mh iq ne b gy ny nk l nl nm">ggplot(data, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=Type_of_Tweet)) +<br/>  geom_rect() +<br/>  coord_polar(theta="y") + <br/>  xlim(c(2, 4)) +<br/>  theme_void() +<br/>  theme(legend.position = "right")</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/196849aced7be107e310f203ba767d75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*mWEEHvAw5Ub6tjMkw31Eyg.png"/></div></figure><h2 id="9922" class="ni mh iq bd mi nn no dn mm np nq dp mq lf nr ns ms lj nt nu mu ln nv nw mw nx bi translated">3.显示推文发布的时间</h2><p id="7c8b" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">多亏了从每条推文中提取的日期和时间，了解比尔·盖茨最常发推文的时间非常容易分析。这可以让我们对账户的活动有一个总体的了解，也是一个有用的指标，可以用来分析表现最好和最差的推文。</p><p id="96d0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个例子中，我按年份分析了推文的频率。请注意，您也可以通过简单地将下面一行代码中的“year”改为“month”来按月执行此操作。或者，您也可以使用 R 包 hms 和 scales 按小时分析发布行为。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="c839" class="ni mh iq ne b gy nj nk l nl nm">colnames(Gates_tweets)[colnames(Gates_tweets)=="screen_name"] &lt;- "Twitter_Account"</span><span id="ca3f" class="ni mh iq ne b gy ny nk l nl nm">ts_plot(dplyr::group_by(Gates_tweets, Twitter_Account), "year") +<br/>  ggplot2::theme_minimal() +<br/>  ggplot2::theme(plot.title = ggplot2::element_text(face = "bold")) +<br/>  ggplot2::labs(<br/>    x = NULL, y = NULL,<br/>    title = "Frequency of Tweets from Bill Gates",<br/>    subtitle = "Tweet counts aggregated by year",<br/>    caption = "\nSource: Data collected from Twitter's REST API via rtweet"<br/>  )</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/ba46cd264c297965fdb60e80cba93ac5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*5gs_G6x4Mro06u_Y-93F9A.png"/></div></figure><h2 id="2c0a" class="ni mh iq bd mi nn no dn mm np nq dp mq lf nr ns ms lj nt nu mu ln nv nw mw nx bi translated">4.显示推文发布的位置</h2><p id="9755" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">分析发布推文的平台的来源是另一个很酷的洞察。其中一个原因是，我们可以在一定程度上推断出比尔·盖茨是不是发微博的人。因此，这有助于我们定义推文的个性。</p><p id="111d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这一步中，您对 rtweet 包收集的源变量感兴趣。下面一行代码向您展示了如何按来源类型聚合这些数据，并分别统计每种类型的 tweets 的频率。请注意，为了简化可视化过程，我只保留了发表了超过 11 条推文的来源。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="1bcb" class="ni mh iq ne b gy nj nk l nl nm">Gates_app &lt;- Gates_tweets %&gt;% <br/>  select(source) %&gt;% <br/>  group_by(source) %&gt;%<br/>  summarize(count=n())</span><span id="3ed5" class="ni mh iq ne b gy ny nk l nl nm">Gates_app &lt;- subset(Gates_app, count &gt; 11)</span></pre><p id="72bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦完成，这个过程类似于之前已经创建的圆环图！</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="bc79" class="ni mh iq ne b gy nj nk l nl nm">data &lt;- data.frame(<br/>  category=Gates_app$source,<br/>  count=Gates_app$count<br/>)</span><span id="21a9" class="ni mh iq ne b gy ny nk l nl nm">data$fraction = data$count / sum(data$count)<br/>data$percentage = data$count / sum(data$count) * 100<br/>data$ymax = cumsum(data$fraction)<br/>data$ymin = c(0, head(data$ymax, n=-1))</span><span id="0dd5" class="ni mh iq ne b gy ny nk l nl nm">data &lt;- round_df(data, 2)</span><span id="4ad2" class="ni mh iq ne b gy ny nk l nl nm">Source &lt;- paste(data$category, data$percentage, "%")</span><span id="cba5" class="ni mh iq ne b gy ny nk l nl nm">ggplot(data, aes(ymax=ymax, ymin=ymin, xmax=4, xmin=3, fill=Source)) +<br/>  geom_rect() +<br/>  coord_polar(theta="y") + # Try to remove that to understand how the chart is built initially<br/>  xlim(c(2, 4)) +<br/>  theme_void() +<br/>  theme(legend.position = "right")</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/0ee31da0bb2abcaef10591fe4454b504.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*pwq5nEu1SNRQ7qzQP1q_sg.png"/></div></figure><p id="b785" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，比尔·盖茨的大多数推文来自 Twitter 网络客户端 Sprinklr 和 Hootsuite——这表明比尔·盖茨很可能不是自己发推文的人！</p><h2 id="bb7f" class="ni mh iq bd mi nn no dn mm np nq dp mq lf nr ns ms lj nt nu mu ln nv nw mw nx bi translated">5.显示在推文中找到的最常用的词</h2><p id="7029" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">Twitter 分析报告当然应该包括对推文内容的分析，这包括找出哪些词用得最多。</p><p id="2f39" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为您正在分析文本数据，所以请确保首先清理它，并从您不想在分析中显示的任何字符(如超链接、@提及或标点符号)中删除它。下面几行代码为你提供了清理 tweets 的基本步骤。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="2fb4" class="ni mh iq ne b gy nj nk l nl nm">Gates_tweets_organic$text &lt;-  gsub("https\\S*", "", Gates_tweets_organic$text)</span><span id="c126" class="ni mh iq ne b gy ny nk l nl nm">Gates_tweets_organic$text &lt;-  gsub("@\\S*", "", Gates_tweets_organic$text) </span><span id="15e0" class="ni mh iq ne b gy ny nk l nl nm">Gates_tweets_organic$text  &lt;-  gsub("amp", "", Gates_tweets_organic$text) </span><span id="1a6f" class="ni mh iq ne b gy ny nk l nl nm">Gates_tweets_organic$text  &lt;-  gsub("[\r\n]", "", Gates_tweets_organic$text)</span><span id="607b" class="ni mh iq ne b gy ny nk l nl nm">Gates_tweets_organic$text  &lt;-  gsub("[[:punct:]]", "", Gates_tweets_organic$text)</span></pre><p id="268c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二步，确保从文本中删除停用词。这对于您分析最常用的单词非常重要，因为您不希望出现最常用的单词，如“to”或“and ”,因为这些单词对您的分析没有太大意义。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="99f2" class="ni mh iq ne b gy nj nk l nl nm">tweets &lt;- Gates_tweets_organic %&gt;%<br/>  select(text) %&gt;%<br/>  unnest_tokens(word, text)</span><span id="6e40" class="ni mh iq ne b gy ny nk l nl nm">tweets &lt;- tweets %&gt;%<br/>  anti_join(stop_words)</span></pre><p id="e8d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，您可以按照下面的简单步骤，标出推文中出现频率最高的单词。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="9707" class="ni mh iq ne b gy nj nk l nl nm">tweets %&gt;% # gives you a bar chart of the most frequent words found in the tweets<br/>  count(word, sort = TRUE) %&gt;%<br/>  top_n(15) %&gt;%<br/>  mutate(word = reorder(word, n)) %&gt;%<br/>  ggplot(aes(x = word, y = n)) +<br/>  geom_col() +<br/>  xlab(NULL) +<br/>  coord_flip() +<br/>  labs(y = "Count",<br/>       x = "Unique words",<br/>       title = "Most frequent words found in the tweets of Bill Gates",<br/>       subtitle = "Stop words removed from the list")</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/651346eca811f57b871e85d08c6d4b58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*bRL5yxHM_myqiD7sEi2UZg.png"/></div></figure><h2 id="3a24" class="ni mh iq bd mi nn no dn mm np nq dp mq lf nr ns ms lj nt nu mu ln nv nw mw nx bi translated">6.显示最常用的标签</h2><p id="560f" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">你可以对标签做同样的分析。在这种情况下，您需要使用 rtweet 包中的<strong class="ky ir"> hashtags </strong>变量。形象化这些的一个好方法是使用如下所示的单词云。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="ad96" class="ni mh iq ne b gy nj nk l nl nm">Gates_tweets_organic$hashtags &lt;- as.character(Gates_tweets_organic$hashtags)<br/>Gates_tweets_organic$hashtags &lt;- gsub("c\\(", "", Gates_tweets_organic$hashtags)</span><span id="3a5a" class="ni mh iq ne b gy ny nk l nl nm">set.seed(1234)<br/>wordcloud(Gates_tweets_organic$hashtags, min.freq=5, scale=c(3.5, .5), random.order=FALSE, rot.per=0.35, <br/>          colors=brewer.pal(8, "Dark2"))</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/2caa91ea5c817de296c8abbb084bf713.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*jDvQqQ_Pty1zrmF4yri9Bw.png"/></div></figure><h2 id="44dd" class="ni mh iq bd mi nn no dn mm np nq dp mq lf nr ns ms lj nt nu mu ln nv nw mw nx bi translated">7.显示转发次数最多的账户</h2><p id="5b1b" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">从一个账户大量转发通常不是人们在 Twitter 账户中寻找的。因此，一个有用的见解是监控和了解大多数转发来自哪个账户。这里您要分析的变量是<strong class="ky ir"> retweet_screen_name </strong>，可视化的过程类似于之前使用单词云描述的过程。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="8409" class="ni mh iq ne b gy nj nk l nl nm">set.seed(1234)<br/>wordcloud(Gates_retweets$retweet_screen_name, min.freq=3, scale=c(2, .5), random.order=FALSE, rot.per=0.25, <br/>          colors=brewer.pal(8, "Dark2"))</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/8f3a3c0129778aad207855d3652dbcfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:570/format:webp/1*72W9_aM5Q_O8R_L24F3aqg.png"/></div></figure><h2 id="d863" class="ni mh iq bd mi nn no dn mm np nq dp mq lf nr ns ms lj nt nu mu ln nv nw mw nx bi translated">8.对推文进行情感分析</h2><p id="bf50" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">最后，你可能想在 Twitter 分析报告的末尾添加一个情感分析。使用“syuzhet”软件包很容易做到这一点，并允许您通过把握推文的语气来进一步深化您的分析。没有人喜欢一个只会传播愤怒或悲伤推文的推特账号。捕捉你的推文的语气以及它们是如何平衡的，是你的账户表现的一个很好的指标。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="558e" class="ni mh iq ne b gy nj nk l nl nm">library(syuzhet)</span><span id="299e" class="ni mh iq ne b gy ny nk l nl nm"># Converting tweets to ASCII to trackle strange characters<br/>tweets &lt;- iconv(tweets, from="UTF-8", to="ASCII", sub="")</span><span id="d349" class="ni mh iq ne b gy ny nk l nl nm"># removing retweets, in case needed <br/>tweets &lt;-gsub("(RT|via)((?:\\b\\w*@\\w+)+)","",tweets)</span><span id="d5ad" class="ni mh iq ne b gy ny nk l nl nm"># removing mentions, in case needed<br/>tweets &lt;-gsub("@\\w+","",tweets)</span><span id="7479" class="ni mh iq ne b gy ny nk l nl nm">ew_sentiment&lt;-get_nrc_sentiment((tweets))<br/>sentimentscores&lt;-data.frame(colSums(ew_sentiment[,]))</span><span id="541b" class="ni mh iq ne b gy ny nk l nl nm">names(sentimentscores) &lt;- "Score"</span><span id="34f1" class="ni mh iq ne b gy ny nk l nl nm">sentimentscores &lt;- cbind("sentiment"=rownames(sentimentscores),sentimentscores)</span><span id="7f2f" class="ni mh iq ne b gy ny nk l nl nm">rownames(sentimentscores) &lt;- NULL</span><span id="c246" class="ni mh iq ne b gy ny nk l nl nm">ggplot(data=sentimentscores,aes(x=sentiment,y=Score))+<br/>  geom_bar(aes(fill=sentiment),stat = "identity")+<br/>  theme(legend.position="none")+<br/>  xlab("Sentiments")+ylab("Scores")+<br/>  ggtitle("Total sentiment based on scores")+<br/>  theme_minimal()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/ec59564e85471bdbd1fcc233db14d4bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OiViLXPg_ucax_UUowlNMw.png"/></div></div></figure><h1 id="914e" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated"><strong class="ak">总结</strong></h1><p id="eb63" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">在这篇文章中，我旨在展示如何使用免费的编程软件 r 提取和分析推文。我希望这个指南有助于您构建自己的 Twitter 分析报告，其中包括:</p><ul class=""><li id="d5d6" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">显示哪些推文效果最好，哪些效果不好</li><li id="9e7d" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">有机推文/回复/转发的比率，推文发布的时间和发布推文的平台。<strong class="ky ir">这些都是关于推特行为的见解。</strong></li><li id="bef7" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">推文中使用最频繁的词，标签，转发最多的账户，以及捕捉推文语气的情感分析。<strong class="ky ir">这些都是对推文内容的见解。</strong></li></ul></div><div class="ab cl oc od hu oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ij ik il im in"><div class="kg kh ki kj gt oj"><a href="https://medium.com/data-social/mining-tweets-of-us-candidates-on-mass-shootings-before-and-after-the-2018-midterms-90cc18ff652a" rel="noopener follow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd ir gy z fp oo fr fs op fu fw ip bi translated">挖掘 2018 年中期选举前后美国候选人关于大规模枪击事件的推文</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">与卡洛斯·阿胡马达合作撰写的文章</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">medium.com</p></div></div><div class="os l"><div class="ot l ou ov ow os ox kp oj"/></div></div></a></div></div><div class="ab cl oc od hu oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ij ik il im in"><p id="faa8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我定期撰写关于数据科学和自然语言处理的文章。关注我的 <a class="ae kv" href="https://twitter.com/celine_vdr" rel="noopener ugc nofollow" target="_blank"> <em class="oy"> Twitter </em> </a> <em class="oy">或</em><a class="ae kv" href="https://medium.com/@celine.vdr" rel="noopener"><em class="oy">Medium</em></a><em class="oy">查看更多类似的文章或简单地更新下一篇文章！</em></p></div></div>    
</body>
</html>