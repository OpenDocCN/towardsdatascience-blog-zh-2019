<html>
<head>
<title>How to write Web apps using simple Python for Data Scientists?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为数据科学家使用简单的 Python 编写 Web 应用？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-write-web-apps-using-simple-python-for-data-scientists-a227a1a01582?source=collection_archive---------1-----------------------#2019-10-13">https://towardsdatascience.com/how-to-write-web-apps-using-simple-python-for-data-scientists-a227a1a01582?source=collection_archive---------1-----------------------#2019-10-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/0ad632312185ecf9b53009d2aad583fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wteXTeRpOCjgGJUs"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Relax and Code on. Photo by <a class="ae jg" href="https://unsplash.com/@cblack09?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Cody Black</a> on <a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><div class=""><h2 id="c02c" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">无需了解任何 web 框架，即可轻松将您的数据科学项目转换为酷炫的应用程序</h2></div><p id="cadb" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们没有一个好的方式来展示它，机器学习项目就永远不会真正完成。</p><p id="f20f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在过去，一个制作精良的可视化工具或一个小 PPT 足以展示一个数据科学项目，随着 RShiny 和 Dash 等仪表板工具的出现，一名优秀的数据科学家需要具备相当多的 web 框架知识。</p><p id="5872" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Web 框架很难学。为了一些看似简单的事情，我仍然会对所有的 HTML、CSS 和 Javascript 感到困惑。</p><p id="4eb1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">更不用说做同一件事的许多方法，这让我们数据科学的人感到困惑，因为 web 开发对他们来说是次要技能。</p><p id="e612" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk"> <em class="lu">那么，我们注定要学习 web 框架吗？或者半夜打电话给我们的开发者朋友问些愚蠢的问题？</em> </strong></p><p id="e5dd" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这就是 StreamLit 的用武之地，它承诺只用 Python 创建 web 应用。</p><blockquote class="lv"><p id="a0c0" class="lw lx jj bd ly lz ma mb mc md me lt dk translated">Python 的禅:简单比复杂好，简化让创建应用程序变得非常简单。</p></blockquote><p id="fbb5" class="pw-post-body-paragraph ky kz jj la b lb mf kk ld le mg kn lg lh mh lj lk ll mi ln lo lp mj lr ls lt im bi translated"><strong class="la jk"> <em class="lu">本文旨在了解如何使用 Streamlit 创建支持数据科学项目的应用。</em>T11】</strong></p><p id="3abf" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了更好地理解导致 streamlit 的架构和思维过程，请看最初的开发者/创始人之一 Adrien Treuille 的这篇精彩的<a class="ae jg" rel="noopener" target="_blank" href="/coding-ml-tools-like-you-code-ml-models-ddba3357eace">帖子</a>。</p><p id="d9b7" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你想在亚马逊 ec2 上部署一个 streamlit 应用，请查看我的下一篇<a class="ae jg" rel="noopener" target="_blank" href="/how-to-deploy-a-streamlit-app-using-an-amazon-free-ec2-instance-416a41f69dc3">帖子</a>。</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="7aee" class="mt mu jj bd mv mw mx my mz na nb nc nd kp ne kq nf ks ng kt nh kv ni kw nj nk bi translated">装置</h1><p id="3a19" class="pw-post-body-paragraph ky kz jj la b lb nl kk ld le nm kn lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">安装就像运行命令一样简单:</p><p id="f316" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe nq nr ns nt b">pip install streamlit</code></p><p id="f1b8" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要查看我们的安装是否成功，我们只需运行:</p><p id="12dc" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe nq nr ns nt b">streamlit hello</code></p><p id="41ef" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这应该会显示一个屏幕，上面写着:</p><figure class="nv nw nx ny gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nu"><img src="../Images/4740aae8df61609443e44d9ca78c1c1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DrJJOB7iqqXmeAs44Bb3Lg.png"/></div></div></figure><p id="bda2" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以在浏览器中访问本地网址:<code class="fe nq nr ns nt b">localhost:8501</code>,查看一个正在运行的 Streamlit 应用程序。开发者提供了一些很酷的演示，你可以玩玩。回来之前，一定要花时间感受一下这个工具的威力。</p><figure class="nv nw nx ny gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nz"><img src="../Images/c4c615d38af6ceb93bd71b61922354e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a6eedCjb-IcvoZ9MkoLVnQ.png"/></div></div></figure></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="a51f" class="mt mu jj bd mv mw mx my mz na nb nc nd kp ne kq nf ks ng kt nh kv ni kw nj nk bi translated">Streamlit Hello World</h1><p id="6974" class="pw-post-body-paragraph ky kz jj la b lb nl kk ld le nm kn lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">Streamlit 旨在使用简单的 Python 简化应用程序开发。</p><p id="152c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，让我们编写一个简单的应用程序，看看它是否能实现这一承诺。</p><p id="2067" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里我从一个简单的应用程序开始，我们称之为 streamlit 的 Hello World。只需将下面给出的代码粘贴到名为<code class="fe nq nr ns nt b">helloworld.py</code>的文件中</p><pre class="nv nw nx ny gt oa nt ob oc aw od bi"><span id="9efe" class="oe mu jj nt b gy of og l oh oi">import streamlit as st</span><span id="6949" class="oe mu jj nt b gy oj og l oh oi">x = st.slider('x')<br/>st.write(x, 'squared is', x * x)</span></pre><p id="2d02" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在终端上运行:</p><pre class="nv nw nx ny gt oa nt ob oc aw od bi"><span id="1193" class="oe mu jj nt b gy of og l oh oi">streamlit run helloworld.py</span></pre><p id="2927" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">瞧，你应该能在<code class="fe nq nr ns nt b">localhost:8501</code>看到一个简单的应用程序在你的浏览器中运行，它允许你移动滑块并给出结果。</p><figure class="nv nw nx ny gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ok"><img src="../Images/004c1d22328367d115e3fe10f1550183.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PXkvkSZ7EhyaNwLVhO2Gxw.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">A Simple slider widget app</figcaption></figure><p id="4eac" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这很容易。在上述应用中，我们使用了 Streamlit 的两个功能:</p><ul class=""><li id="5d62" class="ol om jj la b lb lc le lf lh on ll oo lp op lt oq or os ot bi translated">我们可以滑动这个<code class="fe nq nr ns nt b">st.slider</code>小部件来改变 web 应用程序的输出。</li><li id="c95e" class="ol om jj la b lb ou le ov lh ow ll ox lp oy lt oq or os ot bi translated">还有多才多艺的<code class="fe nq nr ns nt b">st.write</code>指挥。我很惊讶它是如何从图表、数据框架和简单文本中写出任何东西的。稍后将详细介绍。</li></ul><p id="4d9c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk"> <em class="lu">重要提示:记住每次我们改变 widget 值，整个 app 都是从上到下运行的。</em>T13】</strong></p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="791d" class="mt mu jj bd mv mw mx my mz na nb nc nd kp ne kq nf ks ng kt nh kv ni kw nj nk bi translated">简化小部件</h1><p id="9870" class="pw-post-body-paragraph ky kz jj la b lb nl kk ld le nm kn lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">小部件为我们提供了一种控制应用程序的方式。阅读这些小部件的最佳地方是<a class="ae jg" href="https://streamlit.io/docs/api.html" rel="noopener ugc nofollow" target="_blank"> API 参考</a>文档本身，但是我将描述一些您可能最终会使用的最突出的小部件。</p><h2 id="b6f6" class="oe mu jj bd mv oz pa dn mz pb pc dp nd lh pd pe nf ll pf pg nh lp ph pi nj pj bi translated">1.滑块</h2><pre class="nv nw nx ny gt oa nt ob oc aw od bi"><span id="9b9a" class="oe mu jj nt b gy of og l oh oi"><strong class="nt jk">streamlit.slider</strong><strong class="nt jk">(<em class="lu">label</em>, <em class="lu">min_value=None</em>, <em class="lu">max_value=None</em>, <em class="lu">value=None</em>, <em class="lu">step=None</em>, <em class="lu">format=None</em>)</strong></span></pre><p id="579f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们已经在上面看到了<code class="fe nq nr ns nt b">st.slider</code>的动作。它可以与最小值、最大值和步长一起使用，以获取某个范围内的输入。</p><h2 id="68d4" class="oe mu jj bd mv oz pa dn mz pb pc dp nd lh pd pe nf ll pf pg nh lp ph pi nj pj bi translated">2.文本输入</h2><p id="f645" class="pw-post-body-paragraph ky kz jj la b lb nl kk ld le nm kn lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">获取用户输入的最简单的方法是一些 URL 输入或一些用于情感分析的文本输入。它只需要一个标签来命名文本框。</p><pre class="nv nw nx ny gt oa nt ob oc aw od bi"><span id="58fa" class="oe mu jj nt b gy of og l oh oi">import streamlit as st</span><span id="74a4" class="oe mu jj nt b gy oj og l oh oi">url = st.text_input('Enter URL')<br/>st.write('The Entered URL is', url)</span></pre><p id="f654" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是应用程序的外观:</p><figure class="nv nw nx ny gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pk"><img src="../Images/b9cf15adb3f1864b1519373bb071ce0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YjvH_O8QPYbvdPDGN5C7Sw.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">A Simple text_input widget app</figcaption></figure><p id="1b65" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk">提示:</strong>你只需更改文件<code class="fe nq nr ns nt b">helloworld.py</code>并刷新浏览器即可。我的工作方式是在 sublime text 中打开并更改<code class="fe nq nr ns nt b">helloworld.py</code>，并在浏览器中并排查看更改。</p><h2 id="20a6" class="oe mu jj bd mv oz pa dn mz pb pc dp nd lh pd pe nf ll pf pg nh lp ph pi nj pj bi translated">3.检验盒</h2><p id="1c60" class="pw-post-body-paragraph ky kz jj la b lb nl kk ld le nm kn lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">复选框的一个用例是隐藏或显示/隐藏应用程序中的特定部分。另一个可能是在函数的参数中设置一个布尔值。<code class="fe nq nr ns nt b"><a class="ae jg" href="https://streamlit.io/docs/api.html#streamlit.checkbox" rel="noopener ugc nofollow" target="_blank">st.checkbox()</a></code>接受一个参数，即小部件标签。在这个应用程序中，复选框用于切换条件语句。</p><pre class="nv nw nx ny gt oa nt ob oc aw od bi"><span id="d6d4" class="oe mu jj nt b gy of og l oh oi">import streamlit as st<br/>import pandas as pd<br/>import numpy as np</span><span id="988e" class="oe mu jj nt b gy oj og l oh oi">df = pd.read_csv("football_data.csv")<br/>if st.checkbox('Show dataframe'):<br/>    st.write(df)</span></pre><figure class="nv nw nx ny gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pl"><img src="../Images/eb480e8db7b691bd9fe2d2d8ae7b4fbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hZbSLeeN3qtBW_-23klYwQ.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">A Simple checkbox widget app</figcaption></figure><h2 id="4c10" class="oe mu jj bd mv oz pa dn mz pb pc dp nd lh pd pe nf ll pf pg nh lp ph pi nj pj bi translated">4.选择框</h2><p id="a4dc" class="pw-post-body-paragraph ky kz jj la b lb nl kk ld le nm kn lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">我们可以使用<code class="fe nq nr ns nt b"><a class="ae jg" href="https://streamlit.io/docs/api.html#streamlit.selectbox" rel="noopener ugc nofollow" target="_blank">st.selectbox</a></code>从系列或列表中选择。通常情况下，用例是将其用作简单的下拉菜单，从列表中选择值。</p><pre class="nv nw nx ny gt oa nt ob oc aw od bi"><span id="75cf" class="oe mu jj nt b gy of og l oh oi">import streamlit as st<br/>import pandas as pd<br/>import numpy as np</span><span id="dd32" class="oe mu jj nt b gy oj og l oh oi">df = pd.read_csv("football_data.csv")</span><span id="cb85" class="oe mu jj nt b gy oj og l oh oi">option = st.selectbox(<br/>    'Which Club do you like best?',<br/>     df['Club'].unique())</span><span id="5d88" class="oe mu jj nt b gy oj og l oh oi">'You selected: ', option</span></pre><figure class="nv nw nx ny gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pm"><img src="../Images/04fdb1c7270597d22d449b25ff0e350e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*99ozNDQoSemBu14zu4NWgg.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">A Simple dropdown/selectbox widget app</figcaption></figure><h2 id="51a0" class="oe mu jj bd mv oz pa dn mz pb pc dp nd lh pd pe nf ll pf pg nh lp ph pi nj pj bi translated">5.多选</h2><p id="1bf4" class="pw-post-body-paragraph ky kz jj la b lb nl kk ld le nm kn lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">我们也可以使用下拉列表中的多个值。这里我们使用<code class="fe nq nr ns nt b">st.multiselect</code>在变量<code class="fe nq nr ns nt b">options</code>中获取多个值作为列表</p><pre class="nv nw nx ny gt oa nt ob oc aw od bi"><span id="fae4" class="oe mu jj nt b gy of og l oh oi">import streamlit as st<br/>import pandas as pd<br/>import numpy as np</span><span id="a3a4" class="oe mu jj nt b gy oj og l oh oi">df = pd.read_csv("football_data.csv")</span><span id="c9e0" class="oe mu jj nt b gy oj og l oh oi">options = st.multiselect(<br/> 'What are your favorite clubs?', df['Club'].unique())</span><span id="8782" class="oe mu jj nt b gy oj og l oh oi">st.write('You selected:', options)</span></pre><figure class="nv nw nx ny gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pn"><img src="../Images/d003a6891caffbbb8be0b4432599e71a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kdjybNZHHOBoD-4N2MN41Q.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">A Simple multiselect widget app</figcaption></figure></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="e473" class="mt mu jj bd mv mw mx my mz na nb nc nd kp ne kq nf ks ng kt nh kv ni kw nj nk bi translated">逐步创建我们简单的应用程序</h1><p id="d01f" class="pw-post-body-paragraph ky kz jj la b lb nl kk ld le nm kn lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">了解重要的小部件就到此为止。现在，我们将一次使用多个小部件创建一个简单的应用程序。</p><p id="d072" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，我们将尝试使用 streamlit 可视化我们的足球数据。借助上面的小部件，做到这一点非常简单。</p><pre class="nv nw nx ny gt oa nt ob oc aw od bi"><span id="f3fd" class="oe mu jj nt b gy of og l oh oi">import streamlit as st<br/>import pandas as pd<br/>import numpy as np</span><span id="64b5" class="oe mu jj nt b gy oj og l oh oi">df = pd.read_csv("football_data.csv")</span><span id="5f9c" class="oe mu jj nt b gy oj og l oh oi">clubs = st.multiselect('Show Player for clubs?', df['Club'].unique())</span><span id="d910" class="oe mu jj nt b gy oj og l oh oi">nationalities = st.multiselect('Show Player from Nationalities?', df['Nationality'].unique())</span><span id="36ea" class="oe mu jj nt b gy oj og l oh oi"># Filter dataframe<br/>new_df = df[(df['Club'].isin(clubs)) &amp; (df['Nationality'].isin(nationalities))]</span><span id="d906" class="oe mu jj nt b gy oj og l oh oi"># write dataframe to screen<br/>st.write(new_df)</span></pre><p id="5ef4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们简单的应用程序看起来像:</p><figure class="nv nw nx ny gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi po"><img src="../Images/66f1952048d268202a90c9c176549cf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IL7ROh6Kl9na8hk22So7XA.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Using multiple widgets in conjunction</figcaption></figure><p id="73be" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">那很容易。但是现在看起来很基本。我们可以添加一些图表吗？</p><p id="2606" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Streamlit 目前支持许多用于绘图的库。<strong class="la jk"> <em class="lu"> Plotly、Bokeh、Matplotlib、Altair 和 Vega 图表</em> </strong>就是其中的一些。<strong class="la jk"> <em class="lu"> Plotly Express </em> </strong>也是可以的，虽然他们在文档里没有明确说明。它也有一些内置的图表类型，像<code class="fe nq nr ns nt b">st.line_chart</code>和<code class="fe nq nr ns nt b">st.area_chart</code>。</p><p id="e04d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将在这里与<code class="fe nq nr ns nt b">plotly_express</code>合作。这是我们简单应用程序的代码。我们刚刚使用了四个调用来简化它。其余的都是简单的 python。</p><pre class="nv nw nx ny gt oa nt ob oc aw od bi"><span id="5d8c" class="oe mu jj nt b gy of og l oh oi">import streamlit as st<br/>import pandas as pd<br/>import numpy as np<br/>import plotly_express as px</span><span id="c879" class="oe mu jj nt b gy oj og l oh oi">df = pd.read_csv("football_data.csv")</span><span id="845b" class="oe mu jj nt b gy oj og l oh oi"><strong class="nt jk">clubs = st.multiselect('Show Player for clubs?', df['Club'].unique())<br/>nationalities = st.multiselect('Show Player from Nationalities?', df['Nationality'].unique())</strong></span><span id="660c" class="oe mu jj nt b gy oj og l oh oi">new_df = df[(df['Club'].isin(clubs)) &amp; (df['Nationality'].isin(nationalities))]<br/><strong class="nt jk">st.write(new_df)</strong></span><span id="1023" class="oe mu jj nt b gy oj og l oh oi"># create figure using plotly express<br/>fig = px.scatter(new_df, x ='Overall',y='Age',color='Name')</span><span id="ea2b" class="oe mu jj nt b gy oj og l oh oi"># Plot!<br/><strong class="nt jk">st.plotly_chart(fig)</strong></span></pre><figure class="nv nw nx ny gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pp"><img src="../Images/2f330671fa0b17b39f0c557a00563c82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C23bpH6xDxnmku7-idrMfQ.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Adding charts</figcaption></figure></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="df56" class="mt mu jj bd mv mw mx my mz na nb nc nd kp ne kq nf ks ng kt nh kv ni kw nj nk bi translated">丰富</h1><p id="e989" class="pw-post-body-paragraph ky kz jj la b lb nl kk ld le nm kn lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">一开始我们说过，每次我们更改任何小部件，整个应用程序都会从头到尾运行。当我们创建将服务于深度学习模型或复杂的机器学习模型的应用时，这是不可行的。Streamlit 通过引入<strong class="la jk"> <em class="lu">缓存</em> </strong>在这方面为我们做了介绍。</p><h2 id="2512" class="oe mu jj bd mv oz pa dn mz pb pc dp nd lh pd pe nf ll pf pg nh lp ph pi nj pj bi translated">1.贮藏</h2><p id="1d0a" class="pw-post-body-paragraph ky kz jj la b lb nl kk ld le nm kn lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">在我们简单的应用程序中。每当一个值改变时，我们就一遍又一遍地读取熊猫数据帧。虽然它适用于我们拥有的小数据，但它不适用于大数据，或者当我们必须对数据进行大量处理时。让我们使用 streamlit 中的<code class="fe nq nr ns nt b">st.cache</code> decorator 函数来使用缓存，如下所示。</p><pre class="nv nw nx ny gt oa nt ob oc aw od bi"><span id="0682" class="oe mu jj nt b gy of og l oh oi">import streamlit as st<br/>import pandas as pd<br/>import numpy as np<br/>import plotly_express as px</span><span id="6d30" class="oe mu jj nt b gy oj og l oh oi"><strong class="nt jk">df = st.cache(pd.read_csv)("football_data.csv")</strong></span></pre><p id="2e09" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">或者对于只需要运行一次的更复杂和耗时的函数(考虑加载大型深度学习模型)，使用:</p><pre class="nv nw nx ny gt oa nt ob oc aw od bi"><span id="3217" class="oe mu jj nt b gy of og l oh oi">@st.cache<br/>def complex_func(a,b):<br/>    DO SOMETHING COMPLEX</span><span id="5c89" class="oe mu jj nt b gy oj og l oh oi"># Won't run again and again.<br/>complex_func(a,b)</span></pre><p id="c0f8" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当我们用 streamlit 的 cache decorator 标记一个函数时，无论何时调用该函数，Streamlit 都会检查调用该函数时使用的输入参数。</p><p id="9fce" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la jk"> <em class="lu">如果这是 Streamlit 第一次看到这些参数，它将运行该函数并将结果存储在本地缓存中。</em> </strong></p><p id="f6aa" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下次调用该函数时，如果这些参数没有改变，Streamlit 知道它可以完全跳过执行该函数。它只是使用缓存中的结果。</p><h2 id="4640" class="oe mu jj bd mv oz pa dn mz pb pc dp nd lh pd pe nf ll pf pg nh lp ph pi nj pj bi translated">2.补充报道</h2><p id="40b0" class="pw-post-body-paragraph ky kz jj la b lb nl kk ld le nm kn lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">为了根据您的偏好获得更整洁的外观，您可能希望将您的小部件移动到侧边栏中，类似于 Rshiny dashboards。<strong class="la jk"> <em class="lu">这个挺简单的。只需在您的小部件代码中添加</em> </strong> <code class="fe nq nr ns nt b"><strong class="la jk"><em class="lu">st.sidebar</em></strong></code> <strong class="la jk"> <em class="lu">即可。</em> </strong></p><pre class="nv nw nx ny gt oa nt ob oc aw od bi"><span id="a452" class="oe mu jj nt b gy of og l oh oi">import streamlit as st<br/>import pandas as pd<br/>import numpy as np<br/>import plotly_express as px</span><span id="55ef" class="oe mu jj nt b gy oj og l oh oi">df = st.cache(pd.read_csv)("football_data.csv")</span><span id="07c5" class="oe mu jj nt b gy oj og l oh oi">clubs = <strong class="nt jk">st.sidebar.multiselect</strong>('Show Player for clubs?', df['Club'].unique())<br/>nationalities = <strong class="nt jk">st.sidebar.multiselect</strong>('Show Player from Nationalities?', df['Nationality'].unique())</span><span id="0386" class="oe mu jj nt b gy oj og l oh oi">new_df = df[(df['Club'].isin(clubs)) &amp; (df['Nationality'].isin(nationalities))]<br/>st.write(new_df)</span><span id="d03f" class="oe mu jj nt b gy oj og l oh oi"># Create distplot with custom bin_size<br/>fig = px.scatter(new_df, x ='Overall',y='Age',color='Name')</span><span id="0bb2" class="oe mu jj nt b gy oj og l oh oi"># Plot!<br/>st.plotly_chart(fig)</span></pre><figure class="nv nw nx ny gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pq"><img src="../Images/23382ade654fd4bb2105b824ab27f820.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RALVJB9JtIqvgwqguinTQQ.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Move widgets to the sidebar</figcaption></figure><h2 id="edb9" class="oe mu jj bd mv oz pa dn mz pb pc dp nd lh pd pe nf ll pf pg nh lp ph pi nj pj bi translated">3.降价？</h2><p id="62e1" class="pw-post-body-paragraph ky kz jj la b lb nl kk ld le nm kn lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">我喜欢用 Markdown 写作。我发现它没有 HTML 冗长，更适合数据科学工作。那么，我们可以在 streamlit 应用程序中使用 Markdown 吗？</p><p id="bf0d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">是的，我们可以。有几种方法可以做到这一点。在我看来，最好的方法是使用<a class="ae jg" href="https://streamlit.io/docs/api.html#id1" rel="noopener ugc nofollow" target="_blank">魔法指令</a>。神奇的命令让你写 markdown 像写注释一样容易。您也可以使用命令<code class="fe nq nr ns nt b">st.markdown</code></p><pre class="nv nw nx ny gt oa nt ob oc aw od bi"><span id="8f27" class="oe mu jj nt b gy of og l oh oi">import streamlit as st<br/>import pandas as pd<br/>import numpy as np<br/>import plotly_express as px</span><span id="51a1" class="oe mu jj nt b gy oj og l oh oi">'''<br/># Club and Nationality App</span><span id="cc46" class="oe mu jj nt b gy oj og l oh oi">This very simple webapp allows you to select and visualize players from certain clubs and certain nationalities.<br/>'''<br/>df = st.cache(pd.read_csv)("football_data.csv")</span><span id="6d7c" class="oe mu jj nt b gy oj og l oh oi">clubs = st.sidebar.multiselect('Show Player for clubs?', df['Club'].unique())<br/>nationalities = st.sidebar.multiselect('Show Player from Nationalities?', df['Nationality'].unique())</span><span id="c8ef" class="oe mu jj nt b gy oj og l oh oi">new_df = df[(df['Club'].isin(clubs)) &amp; (df['Nationality'].isin(nationalities))]<br/>st.write(new_df)</span><span id="5c75" class="oe mu jj nt b gy oj og l oh oi"># Create distplot with custom bin_size<br/>fig = px.scatter(new_df, x ='Overall',y='Age',color='Name')</span><span id="cf4d" class="oe mu jj nt b gy oj og l oh oi">'''<br/>### Here is a simple chart between player age and overall<br/>'''</span><span id="2f8a" class="oe mu jj nt b gy oj og l oh oi">st.plotly_chart(fig)</span></pre><figure class="nv nw nx ny gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pr"><img src="../Images/cdca15c418cc32399a64ced38cd1d1ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*cAIcD9pTmcgNQZ9CWf0J4w.gif"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Our final App Demo</figcaption></figure></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="1fb8" class="mt mu jj bd mv mw mx my mz na nb nc nd kp ne kq nf ks ng kt nh kv ni kw nj nk bi translated">结论</h1><p id="249f" class="pw-post-body-paragraph ky kz jj la b lb nl kk ld le nm kn lg lh nn lj lk ll no ln lo lp np lr ls lt im bi translated">Streamlit 使创建应用程序的整个过程民主化了，我不能再推荐它了。</p><p id="9646" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这篇文章中，我们创建了一个简单的 web 应用程序。但是可能性是无限的。这里举个例子就是细流网站的<a class="ae jg" href="https://research.nvidia.com/publication/2017-10_Progressive-Growing-of" rel="noopener ugc nofollow" target="_blank">脸甘</a>。它的工作原理与小部件和缓存的指导思想相同。</p><figure class="nv nw nx ny gt iv gh gi paragraph-image"><div class="gh gi ps"><img src="../Images/4378fa1b0ae13d7a438376e9365c8e04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ml_z_JVPD5VZxna9.gif"/></div></figure><p id="bbd4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我喜欢开发人员使用的默认颜色和样式，我发现它比使用 Dash 要舒服得多，直到现在我还在我的演示中使用 Dash。您还可以在您的 streamlit 应用程序中包含<a class="ae jg" href="https://streamlit.io/docs/api.html#display-interactive-widgets" rel="noopener ugc nofollow" target="_blank">音频</a>和视频。</p><p id="12c1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最重要的是，Streamlit 是一款免费的开源软件，而不是一款开箱即用的专有网络应用。</p><p id="a0cf" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在过去，我必须联系我的开发人员朋友来解决演示或演示中的任何一个变化；现在做那件事相对来说是微不足道的。</p><blockquote class="lv"><p id="3a05" class="lw lx jj bd ly lz ma mb mc md me lt dk translated">我的目标是从现在开始在我的工作流程中更多地使用它，考虑到它所提供的功能，我认为你也应该这样做。</p></blockquote><p id="ad18" class="pw-post-body-paragraph ky kz jj la b lb mf kk ld le mg kn lg lh mh lj lk ll mi ln lo lp mj lr ls lt im bi translated">我不知道它是否会在生产环境中表现良好，但它对于小型概念验证项目和演示来说是一个福音。我的目标是从现在开始在我的工作流程中更多地使用它，考虑到它所提供的功能，我认为你也应该这样做。</p><p id="8f6b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以在这里找到最终应用<a class="ae jg" href="https://github.com/MLWhiz/data_science_blogs/tree/master/streamlit_football_demo" rel="noopener ugc nofollow" target="_blank">的完整代码。如果你想在亚马逊 ec2 上部署这款应用，请查看我的下一篇</a><a class="ae jg" rel="noopener" target="_blank" href="/how-to-deploy-a-streamlit-app-using-an-amazon-free-ec2-instance-416a41f69dc3">帖子</a>。</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><p id="cc5a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你想了解创建可视化的最佳策略，我想从密歇根大学调出一门关于<a class="ae jg" href="https://coursera.pxf.io/e45JOX" rel="noopener ugc nofollow" target="_blank"> <strong class="la jk">数据可视化和应用绘图</strong> </a>的优秀课程，这是一门很好的<a class="ae jg" href="https://coursera.pxf.io/e45JOX" rel="noopener ugc nofollow" target="_blank"> <strong class="la jk">数据科学专业的一部分，Python </strong> </a>本身就是其中之一。一定要去看看。</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><p id="941b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">谢谢你的阅读。将来我也会写更多初学者友好的帖子。在<a class="ae jg" href="https://medium.com/@rahul_agarwal" rel="noopener"><strong class="la jk"/></a>关注我或者订阅我的<a class="ae jg" href="https://mlwhiz.ck.page/a9b8bda70c" rel="noopener ugc nofollow" target="_blank"> <strong class="la jk">博客</strong> </a>了解他们。一如既往，我欢迎反馈和建设性的批评，可以通过 Twitter <a class="ae jg" href="https://twitter.com/MLWhiz" rel="noopener ugc nofollow" target="_blank"> @mlwhiz </a>联系。</p><p id="5a84" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，一个小小的免责声明——这篇文章中可能会有一些相关资源的附属链接，因为分享知识从来都不是一个坏主意。</p></div></div>    
</body>
</html>