<html>
<head>
<title>Delivering Real-time Streaming Data to Amazon S3 Using Amazon Kinesis Data Firehose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用亚马逊 Kinesis Data Firehose 向亚马逊 S3 提供实时流数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/delivering-real-time-streaming-data-to-amazon-s3-using-amazon-kinesis-data-firehose-2cda5c4d1efe?source=collection_archive---------1-----------------------#2019-01-16">https://towardsdatascience.com/delivering-real-time-streaming-data-to-amazon-s3-using-amazon-kinesis-data-firehose-2cda5c4d1efe?source=collection_archive---------1-----------------------#2019-01-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/3f029ab8e65a15df65cf4b20318bffca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/0*UQBKjEff1uIsXH8W"/></div></figure><p id="0057" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在这篇文章中，让我们探索什么是流数据，以及如何使用亚马逊 Kinesis Firehose 服务来制作一个应用程序，将这些流数据存储到亚马逊 S3。作为实践体验，我们将使用 AWS 管理控制台接收模拟股票报价机数据，我们将从中创建一个交付流并保存到 S3。在实现之前，让我们先看看什么是流数据，什么是亚马逊 Kinesis。</p><p id="3db7" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">流数据是由许多数据源连续生成的数据。这些可以同时以小尺寸发送。这些流数据可以通过 Amazon Kinesis、Apache Kafka、Apache Spark 和许多其他框架等工具收集。流式数据的一些例子是</p><ul class=""><li id="a4df" class="kv kw it jz b ka kb ke kf ki kx km ky kq kz ku la lb lc ld bi translated">应用程序生成的日志文件</li><li id="c061" class="kv kw it jz b ka le ke lf ki lg km lh kq li ku la lb lc ld bi translated">来自 web 应用程序或移动应用程序的客户交互数据</li><li id="8380" class="kv kw it jz b ka le ke lf ki lg km lh kq li ku la lb lc ld bi translated">金融股票市场数据</li><li id="5fbe" class="kv kw it jz b ka le ke lf ki lg km lh kq li ku la lb lc ld bi translated">IOT 设备数据(传感器、性能监视器等..)</li></ul><p id="70a8" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">亚马逊 Kinesis 是亚马逊提供的一项服务，使其易于收集。处理和分析实时流数据。目前，亚马逊 Kinesis 提供了四种类型的 Kinesis 流数据平台。</p><ul class=""><li id="8da8" class="kv kw it jz b ka kb ke kf ki kx km ky kq kz ku la lb lc ld bi translated"><strong class="jz iu"> Kinesis 数据流</strong> —用于实时收集和处理大量数据记录</li><li id="965a" class="kv kw it jz b ka le ke lf ki lg km lh kq li ku la lb lc ld bi translated"><strong class="jz iu">kine sis Data fire hose</strong>——用于向亚马逊 S3、Redshift 等目的地传送实时流数据..</li><li id="5f26" class="kv kw it jz b ka le ke lf ki lg km lh kq li ku la lb lc ld bi translated"><strong class="jz iu">kines 数据分析</strong> —用于使用标准 SQL 处理和分析流数据</li><li id="76f7" class="kv kw it jz b ka le ke lf ki lg km lh kq li ku la lb lc ld bi translated"><strong class="jz iu"> Kinesis 视频流</strong>——用于全面管理从设备传输实时视频的服务</li></ul><h1 id="ef93" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">亚马逊 Kinesis 数据消防软管</h1><p id="4705" class="pw-post-body-paragraph jx jy it jz b ka mh kc kd ke mi kg kh ki mj kk kl km mk ko kp kq ml ks kt ku im bi translated">亚马逊 Kinesis data firehose 是亚马逊提供的一项完全托管的服务，用于向亚马逊服务提供的目的地交付实时流数据。目前，亚马逊 Kinesis Firehose 支持四类亚马逊服务作为目的地。</p><ul class=""><li id="023b" class="kv kw it jz b ka kb ke kf ki kx km ky kq kz ku la lb lc ld bi translated">亚马逊 S3——一个易于使用的对象存储</li><li id="cf28" class="kv kw it jz b ka le ke lf ki lg km lh kq li ku la lb lc ld bi translated">亚马逊红移—Pb 级数据仓库</li><li id="794c" class="kv kw it jz b ka le ke lf ki lg km lh kq li ku la lb lc ld bi translated">亚马逊弹性搜索服务——开源搜索和分析引擎</li><li id="4f71" class="kv kw it jz b ka le ke lf ki lg km lh kq li ku la lb lc ld bi translated">Splunk —用于分析机器生成数据的智能运营工具</li></ul><p id="663a" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在这篇文章中，我们将看看如何使用亚马逊 Kinesis Firehose 将流数据保存到亚马逊简单存储(S3)。在开始实现我们的应用程序之前，让我们先来看看 Amazon Kinesis Firehose 的关键概念。</p><p id="9e64" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu"> Kinesis 数据消防水带交付流</strong>—kine sis 数据消防水带的底层实体。</p><p id="57ed" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">数据生产者</strong> —将数据记录发送到 Kinesis 数据消防软管的实体。(例如:发送日志文件的 web 或移动应用程序)</p><p id="ddad" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">记录</strong>——我们的数据生成器发送给 Kinesis 消防水带交付流的数据。</p><p id="300e" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">缓冲区大小和缓冲区间隔</strong> —这些配置决定了在将它们传送到目的地之前需要多少缓冲。</p><p id="6ca3" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">现在我们已经学习了 Kinesis Firehose 的关键概念，让我们进入流程的实现部分。下图显示了我们的交付流的基本架构。数据生产者将记录发送到我们的流中，我们将使用 Lambda 函数对其进行转换。之后，转换后的记录将通过 Kinesis Firehose 保存到 S3。我们还将在转换之前将流数据备份到 S3 存储桶。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/445c8923cefec56bd687d41ae16c7a4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/0*5O8Lfq-M3xxfQuZI.jpg"/></div></figure><p id="5e26" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">对于这篇文章，我们将创建一个交付流，其中的记录将是股票行情数据。我们将使用 AWS 管理控制台接收模拟股票行情数据，并将 S3 作为我们的目的地。模拟数据将具有以下格式。</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="64f5" class="mw lk it ms b gy mx my l mz na">{"TICKER_SYMBOL":"JIB","SECTOR":"AUTOMOBILE","CHANGE":-0.15,"PRICE":44.89}</span></pre><h1 id="700c" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">创建亚马逊 Kinesis 数据消防水带交付流</h1><p id="46ad" class="pw-post-body-paragraph jx jy it jz b ka mh kc kd ke mi kg kh ki mj kk kl km mk ko kp kq ml ks kt ku im bi translated">可以通过控制台或 AWS SDK 创建 Kinesis 消防水带传输流。对于我们的博客文章，我们将使用 ole 来创建交付流。在交付流创建之后，我们可以随时更新和修改它。</p><p id="0ba7" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">首先转到分析类别下的 Kinesis 服务。如果你以前从未使用过 Kinesis，你会看到下面的欢迎页面。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nb"><img src="../Images/b8c876c5ba23e73e2c275b9c170456c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rBWnNEveKfacKB9v.png"/></div></div></figure><p id="54ab" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">点击开始创建我们的交付流。在下一页中，您将看到四种类型的向导，用于为四种类型的数据平台服务创建 Kinesis 流。在这篇文章中，我们使用的是<strong class="jz iu">通过 Kinesis Firehose 传送流</strong>传送流数据，这是第二种选择。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi ng"><img src="../Images/5170e572c87d1df3e9370305db22e626.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*z1MSig2Q0Qwv4bwq.png"/></div></div></figure><p id="d96d" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">提供传送流名称的名称。在来源下选择<strong class="jz iu">直接上传或其他来源</strong>。该选项将创建生产者应用程序直接写入的交付流。如果选择了<strong class="jz iu"> Kinesis 流</strong>，那么传送流将使用 Kinesis 数据流作为数据源。为简单起见，我们选择了第一个选项。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nh"><img src="../Images/662a1280d0e5d0b988c6a061bc8f2399.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RuqzH10Qo00bTX7l.png"/></div></div></figure><h2 id="f43f" class="mw lk it bd ll ni nj dn lp nk nl dp lt ki nm nn lx km no np mb kq nq nr mf ns bi translated">转换记录</h2><p id="a27d" class="pw-post-body-paragraph jx jy it jz b ka mh kc kd ke mi kg kh ki mj kk kl km mk ko kp kq ml ks kt ku im bi translated">在下一页中，我们将需要配置数据转换配置。Kinesis Firehose 可以调用 Lambda 函数来转换传入的源数据，并将转换后的数据传送到目的地。Lambda 函数的蓝图由 AWS 提供。但是在创建 Lambda 函数之前，让我们看看在转换数据之前我们需要知道的需求。</p><p id="2a98" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">来自 lambda 函数的所有转换记录都应该包含下面描述的参数。</p><ul class=""><li id="0fe2" class="kv kw it jz b ka kb ke kf ki kx km ky kq kz ku la lb lc ld bi translated"><strong class="jz iu"> recordid </strong> —调用过程中从 Kinesis Firehose 传递到 Lambda 的记录 id。转换后的记录应该包含相同的 id。</li><li id="7ce3" class="kv kw it jz b ka le ke lf ki lg km lh kq li ku la lb lc ld bi translated"><strong class="jz iu">结果</strong> —已被 Lambda 函数转换的数据的状态。</li><li id="5c75" class="kv kw it jz b ka le ke lf ki lg km lh kq li ku la lb lc ld bi translated"><strong class="jz iu">数据</strong> —转换后的数据</li></ul><p id="9b7c" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">有几个为我们提供的 Lambda 蓝图，我们可以使用它们来创建用于数据转换的 Lambda 函数。我们将使用这些蓝图之一来创建我们的 Lambda 函数。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nt"><img src="../Images/92c80d1472437be5be2b3e00809eb094.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uXw0GE5U5huTo4RI.png"/></div></div></figure><p id="5dfd" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在<strong class="jz iu">过程记录页面中<strong class="jz iu">的</strong> s 转换源记录，AWS Lambda </strong>选择启用。这将提示您选择一个 Lambda 函数。选择新建。在这里，我们得到了数据转换的 Lambda 蓝图。选择<strong class="jz iu">通用水龙带加工</strong>作为我们的蓝图。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nu"><img src="../Images/046f2b8727d87de24ef8fadac12e1ab9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JnjTn9Lbzo03IdwD.png"/></div></div></figure><p id="4b4b" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">这将把我们带到 Lambda 函数创建页面。为我们的函数提供一个名称。然后，我们需要提供一个 IAM 角色，它能够访问我们的消防软管交付流，并被允许调用<strong class="jz iu">腐败批次</strong>操作。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nv"><img src="../Images/6320c8cce3b18229dc697fcb227383b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OJaZwoGd-QPWW31Y.png"/></div></div></figure><p id="8272" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在查看策略文档中，选择编辑并将以下内容添加到策略中。</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="61ef" class="mw lk it ms b gy mx my l mz na">{<br/>            "Effect": "Allow",<br/>            "Action": [<br/>                "firehose:PutRecordBatch"<br/>            ],<br/>            "Resource": [<br/>                "arn:aws:firehose:your-region:your-aws-account-id:deliverystream/your-stream-name"<br/>            ]<br/>        }</span></pre><p id="c1fe" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">确保在保存策略之前编辑<strong class="jz iu">您的地区、您的 aws 帐户 id、您的流名称</strong>。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nw"><img src="../Images/4e0e8fe66d71f9877d4da3402f2e8774.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YRuMSuC80Jqy1rqn.png"/></div></div></figure><p id="d83d" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">创建 IAM 角色后，我们将被重定向回 Lambda 函数创建页面。在此选择创建的角色。之后，我们需要编写自己的 Lambda 函数代码来转换我们的数据记录。Lambda blueprint 已经用我们需要遵循的预定义规则填充了代码。</p><p id="90d0" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如上所述，我们的流数据将具有以下格式。</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="3368" class="mw lk it ms b gy mx my l mz na">{"TICKER_SYMBOL":"JIB","SECTOR":"AUTOMOBILE","CHANGE":-0.15,"PRICE":44.89}</span></pre><p id="2392" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">为了这篇文章的简单，我们将对这个记录做一个简单的转换。在流式传输记录时，我们将忽略“更改”属性。因此，我们转换后的记录将只有属性<strong class="jz iu"> ticker_symbol </strong>、<strong class="jz iu"> sector </strong>和<strong class="jz iu"> price </strong>属性。将以下代码粘贴到 Lambda 函数中来实现这一点。</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="84c0" class="mw lk it ms b gy mx my l mz na">'use strict';<br/>console.log('Loading function');</span><span id="6751" class="mw lk it ms b gy nx my l mz na">exports.handler = (event, context, callback) =&gt; {<br/>    /* Process the list of records and transform them */<br/>    const output = event.records.map((record) =&gt; {<br/>        console.log(record.recordId);<br/>        const payload =JSON.parse((Buffer.from(record.data, 'base64').toString()))</span><span id="0eb7" class="mw lk it ms b gy nx my l mz na">        const resultPayLoad = {<br/>                ticker_symbol : payload.ticker_symbol,<br/>                sector : payload.sector,<br/>                price : payload.price,<br/>            };<br/>            <br/>        return{<br/>            recordId: record.recordId,<br/>            result: 'Ok',<br/>            data: (Buffer.from(JSON.stringify(resultPayLoad))).toString('base64'),<br/>        };<br/>    });<br/>    console.log(`Processing completed.  Successful records ${output.length}.`);<br/>    callback(null, { records: output });<br/>};</span></pre><p id="0033" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">创建 Lambda 函数后，返回到交付流创建页面。在这里选择我们刚刚创建的新 Lambda 函数。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi ny"><img src="../Images/16f54b31266cb5a0aea24bcb70ed6f79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LWfavL94jO_4d5D7.png"/></div></div></figure><h2 id="ca35" class="mw lk it bd ll ni nj dn lp nk nl dp lt ki nm nn lx km no np mb kq nq nr mf ns bi translated">目的地</h2><p id="98b3" class="pw-post-body-paragraph jx jy it jz b ka mh kc kd ke mi kg kh ki mj kk kl km mk ko kp kq ml ks kt ku im bi translated">在下一页中，我们将被提示选择目的地。在这篇文章中，我们将把我们的记录保存到 S3。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nz"><img src="../Images/2ef6169be489d871dbf20431fedbcee4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pz7DULNM43Dgt5aN.png"/></div></div></figure><p id="2dab" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在 S3 目的地选择 S3 桶，我们将存储我们的记录。如果您尚未创建 S3 存储桶，您可以选择创建新的。如果您想在 Lambda 完成转换过程之前备份记录，那么您也可以选择一个备份存储桶。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi oa"><img src="../Images/0de873f22aeacec467e47a5abf46c63f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NAmp39pP3TCOy-jB.png"/></div></div></figure><p id="601a" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">选择目的地后，我们将被重定向到配置页面。在这里，我们可以首先选择缓冲区大小和缓冲区间隔、S3 压缩和加密以及错误日志。除了 IAM 角色之外，保留所有配置设置的默认值。我们需要为 Kinesis 提供一个 IAM 角色来访问我们的 S3 桶。如果您已经有一个 IAM 角色，您可以在不创建新角色的情况下选择它。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi ob"><img src="../Images/a209b0562bbe6b6cee3fd10fc9522812.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*W3gKF2R8wJPU8z7a.png"/></div></div></figure><p id="6fea" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">查看我们的配置后，点击<strong class="jz iu">创建交付流</strong>创建我们的亚马逊 Kinesis 消防软管交付流。新的 Kinesis 消防水带交付流将在<strong class="jz iu">创建</strong>状态中花费一些时间，然后才可供我们使用。在交付流状态变为<strong class="jz iu">活动</strong>后，我们可以开始从生产者向其发送数据。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi oc"><img src="../Images/c958435c8f72c2fface5bdafb73f089f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IrVADvyGoo_eBkW6.png"/></div></div></figure><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi od"><img src="../Images/f4180b853d15aa884e19de188d931757.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*q_pKrIvonFBRYiV6.png"/></div></div></figure><p id="270b" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">现在我们已经创建了交付流。现在让我们测试我们创建的交付流。点击交付流并打开带有演示数据的测试节点。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi oe"><img src="../Images/1d03b87cd6b95416813e905a2fc605ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dyvFPCnunzx-n2_f.png"/></div></div></figure><p id="4930" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">点击<strong class="jz iu">开始发送演示数据</strong>。这将开始向我们的交付流发送记录。发送演示数据后，点击<strong class="jz iu">停止发送演示数据</strong>以避免进一步充电。请注意，根据您的存储桶的缓冲配置，新对象可能需要几分钟才会出现在您的存储桶中。为了确认我们的流数据保存在 S3，我们可以去目的地 S3 桶和验证。验证流数据是否也没有更改属性。转换前的所有流记录都可以在备份 S3 存储桶中找到。</p><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi of"><img src="../Images/731af62c52a46e22e976867d5465eba6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_0JvmFQB0p09xZyQ.png"/></div></div></figure><figure class="mn mo mp mq gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi og"><img src="../Images/bff3ad7ad689df899a4d4fd0dea45ce9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0kyNbMEdE99_nRSf.png"/></div></div></figure><p id="9ead" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我们现在已经使用亚马逊 Kinesis Firehose 为 S3 成功创建了一个交付流，并成功进行了测试。你可以更深入地了解 Kinesis Firehose，它的目的地可能是亚马逊红移，也可能是 Kinesis 数据流的生产商。跟随这个<a class="ae oh" href="https://docs.aws.amazon.com/firehose/latest/dev/what-is-this-service.html" rel="noopener ugc nofollow" target="_blank">文档</a>深入了解亚马逊 Kinesis Firehose。</p></div></div>    
</body>
</html>