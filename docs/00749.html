<html>
<head>
<title>Best Practices — Creating An ETL Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">最佳实践——创建 ETL 第 1 部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/best-practices-creating-an-etl-part-1-bdb563381025?source=collection_archive---------16-----------------------#2019-02-04">https://towardsdatascience.com/best-practices-creating-an-etl-part-1-bdb563381025?source=collection_archive---------16-----------------------#2019-02-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="6b3d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ETL(和 ELT 的表亲相差不远)是一个通常不会在大学教授的概念，至少不会在本科课程中教授。然而，ELT 在几乎每个公司的日常运营中都扮演着重要的角色。</p><p id="7dee" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ETL 是将数据填充到业务仪表盘和算法中的管道，这些仪表盘和算法为管理者提供重要的见解和指标。这些管道从将数据从操作数据库提取到数据仓库的非常简单的过程，到支持更复杂的转换和应用的复杂的分析层。</p><p id="fe75" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">问题是，我们的许多 IT 毕业生没有学到这一非常重要的技能，如果他们决定从事数据科学或数据工程方面的职业，他们很可能会在日常生活中使用这一技能。虽然数据科学工作在技术上并不真正包括 ETL，但是他们所做的很多工作最终会与数据工程师交叉。</p><p id="996f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们希望涵盖 ETL 和良好的 ETL 设计的基础。</p><p id="f966" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一个好的 ETL 看起来像什么，关键组件是什么，是什么使管道可维护和健康？这些都是数据工程师和数据库经理在开始新项目之前需要问的重要问题。</p><p id="c3cf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将是几篇文章中的第一篇。在这篇文章中，我们将涉及一些基本概念，如提取/加载原始数据和日志记录。这些都是重要的话题，有很多细微的差别，我们想开始讨论</p><p id="c3f2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们还将在 2 月 23 日上午 10 点(太平洋时间)提供一个<a class="ae ko" href="https://goo.gl/forms/cZ1hUi64Z5PJlgWB2" rel="noopener ugc nofollow" target="_blank">免费网络研讨会来讨论这个话题。我们希望您能参加！</a></p><h1 id="8ff2" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">操作到原始</h1><p id="05c2" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated"><strong class="js iu">作战数据库</strong></p><p id="a31b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您的 ETL 将接收的所有数据都有一些来源，这些来源代表现实生活中的一种或另一种事务。这些数据可以代表去医院就诊的患者、在社交媒体上发帖的人或购买产品的客户。有些人可能会问，为什么不能只分析来自操作数据库的数据，而要通过额外的步骤将数据处理到另一个系统中。</p><p id="1f35" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最大的问题是，试图运行从运营数据库中聚合和分析大型数据集的分析流程会降低客户运营数据库的速度。此外，操作数据库高度规范化，从分析的角度来看，这使得它们的查询效率很低。这就是开发这种或那种形式的数据仓库的原因。</p><figure class="ls lt lu lv gt lw"><div class="bz fp l di"><div class="lx ly l"/></div></figure><p id="a6e1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="lz">下面是一个向 SQL Server 中批量插入数据的方法示例</em></p><p id="17ef" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">流程的第一步是将数据提取为某种形式的原始格式。</p><p id="c1a8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">原始文件提取</strong></p><p id="2386" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">从操作数据库中提取数据的方式可能会有所不同。然而，最一致的方法之一是将数据提取到一个原始文件中，如 CSV 或 XML 文件。将数据提取到原始文件中有几个好处。第一，提取数据的直接链接限制了外部系统与操作数据库的交互。这将避免阻塞需要发生的重要操作任务。此外，它还创建了数据在提取时的快照。如果您因为管道中可能发生的问题而需要重新加载数据，这可能是有益的。</p><p id="3877" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">拥有这种数据备份是有益的，以防有人意外删除重要数据。然后你会很高兴有容易重装的生抽。应该在某个表中跟踪这些原始摘录，该表记录了加载了哪些文件以及它们存在于何处。这样，您可以轻松地自动进行任何重新加载。此外，文件应该有一个命名标准。</p><p id="0be8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="lz">一个简单的例子是 date extracted _ DateRangeInTheFile _ business object(例如 2017 01 01 _ 2016 09 01 _ 2016 12 31 _ customers . CSV)</em></p><p id="9237" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">元数据库和日志</strong></p><p id="6706" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在开发一个自动化的、可维护的和健壮的系统时，跟踪 ETL 过程中发生的事情是至关重要的一步。您的跟踪和日志记录的范围取决于您的公司有多大，以及需要进行多少 ETL/ELT 和其他数据转换。较大的公司可能有一个标准化的工具，如 Airflow，来帮助管理 Dag 和日志记录。</p><p id="efae" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但是，如果你是一家初创公司或者非科技公司，有一个简化的日志系统可能就可以了。该系统的目的是管理需要加载/已经加载的文件，跟踪已运行的存储过程、错误、依赖性等。</p><p id="6610" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">深入了解系统的这些方面将有助于维护、改进系统，并填充任何丢失或加载不正确的数据。这意味着您实际上需要创建 3-4 个表(至少)来跟踪正在运行的内容、运行时间、计算等。特别是当我们推动越来越多的自动化系统时，这将是确保系统可维护性的关键。</p><p id="8ae5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">将原始数据加载到原始表格中</strong></p><p id="a715" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一旦您从操作数据库中提取了原始数据并用新的文件信息更新了元表，那么您就可以开始专注于加载数据了。</p><p id="46fe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">尝试在 raw 的初始加载中添加许多复杂的业务逻辑可能很有诱惑力。这似乎可以简化过程，减少加载数据的步骤。所以为什么要增加更多的步骤。事实是，在早期添加太多的逻辑会使跟踪错误发生的地方变得困难。错误发生在摘录中、业务逻辑中还是其他地方？此外，更新新逻辑变得更加困难，因为您必须分析更新逻辑的最佳位置。</p><p id="9e45" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所有这些额外的考虑使整个系统更难维护。这就是按原样加载原始数据非常重要的原因。如果需要进行重复数据消除逻辑或映射，则可以在管道的暂存部分进行。</p><p id="e0d8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将数据加载到原始数据库后，接下来的步骤是 QA 和将数据加载到临时数据库。我们将在下一篇文章中继续讨论。如果你想了解更多关于 ETL 开发/ <a class="ae ko" href="http://www.acheronanalytics.com/acheron-blog" rel="noopener ugc nofollow" target="_blank">自动化</a>的知识，那么就注册我们的 ETL 网络研讨会，在这里我们将从头到尾讨论创建 ETL 的过程。</p><figure class="ls lt lu lv gt lw"><div class="bz fp l di"><div class="lx ly l"/></div></figure><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi ma"><img src="../Images/254fad9db4af037fdddca0c6f5cd5f42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rlJ_zkGiivquWP2Zu8J0SA.png"/></div></div></figure></div></div>    
</body>
</html>