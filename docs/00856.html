<html>
<head>
<title>Python List Comprehensions in 5-minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">5 分钟内理解 Python 列表</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-list-comprehensions-in-5-minutes-40a68cbe4561?source=collection_archive---------3-----------------------#2019-02-09">https://towardsdatascience.com/python-list-comprehensions-in-5-minutes-40a68cbe4561?source=collection_archive---------3-----------------------#2019-02-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2ede" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">对这些棘手的 Pythonic 命令行程序的可视化介绍</h2></div></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="01c8" class="kv kw iq kr b gy kx ky l kz la">Just show me the code! Quick link: <a class="ae lb" href="https://github.com/mrdbourke/python-list-comprehensions-tutorial/blob/master/python-list-comprehensions-in-5-minutes.ipynb" rel="noopener ugc nofollow" target="_blank"><strong class="kr ir">Jupyter Notebook on GitHub</strong></a></span></pre></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><p id="1559" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">你为什么想要理解 Python 列表？</p><p id="a675" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">为了节省代码行。</p><p id="e600" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">可能有更多的原因，但根据我的经验，这是唯一的原因——如果你有更好的原因，请留下评论，我会更新文章。</p><p id="0d26" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">你可以用几行额外的代码完成完全相同的事情。但是浏览任何 Python 栈溢出问题，你很可能会发现有人在问<em class="ly">Python 版本</em>或<em class="ly">Python 单行程序</em>。</p><p id="4348" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">列表理解是用 iterables(列表)实现 Pythonic 式一行程序的一种方式。</p><p id="aced" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">单行定义:</p><ul class=""><li id="62e7" class="lz ma iq le b lf lg li lj ll mb lp mc lt md lx me mf mg mh bi translated"><strong class="le ir"> List </strong> =可以迭代的 Python 对象(iterable)。</li><li id="7508" class="lz ma iq le b lf mi li mj ll mk lp ml lt mm lx me mf mg mh bi translated"><strong class="le ir">迭代过</strong> =逐个经历某事。</li></ul><p id="6545" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">一个很好的例子是在收银台清空你的购物车，你把每样东西一件一件拿出来放在柜台上，你的购物车可以被认为是可重复的。</p><p id="ffe3" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">我们将用这个例子来看一些代码。我们在一家数学商店购物，所以我们买的都是数字。</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="b8cd" class="kv kw iq kr b gy kx ky l kz la"># Create a list of numbers (our shopping cart)<br/>cart = [3, 4, 12, 17, 19, 21, 23, 26, 30]</span><span id="42fa" class="kv kw iq kr b gy mn ky l kz la"># Pass items to the cashier<br/>cashier = []<br/>for item in cart:<br/>    cashier.append(item)<br/>print(cashier)</span><span id="4fb1" class="kv kw iq kr b gy mn ky l kz la"># The output is the same as the cart<br/>Output: [3, 4, 12, 17, 19, 21, 23, 26, 30]</span></pre><p id="8cf2" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">这里发生了什么？</p><ol class=""><li id="a61f" class="lz ma iq le b lf lg li lj ll mb lp mc lt md lx mo mf mg mh bi translated">我们在<code class="fe mp mq mr kr b">cart</code>中创建了一个项目列表</li><li id="52a1" class="lz ma iq le b lf mi li mj ll mk lp ml lt mm lx mo mf mg mh bi translated">我们创建了一个空的<code class="fe mp mq mr kr b">cashier</code>列表(<code class="fe mp mq mr kr b">cashier</code>还没有我们的任何项目)</li><li id="a3e6" class="lz ma iq le b lf mi li mj ll mk lp ml lt mm lx mo mf mg mh bi translated">我们使用 for 循环来迭代我们的<code class="fe mp mq mr kr b">cart</code>中的每个<code class="fe mp mq mr kr b">item</code></li><li id="0237" class="lz ma iq le b lf mi li mj ll mk lp ml lt mm lx mo mf mg mh bi translated">对于每个<code class="fe mp mq mr kr b">item</code>，我们用<code class="fe mp mq mr kr b">.append()</code>将其添加到收银台列表中</li><li id="b0c4" class="lz ma iq le b lf mi li mj ll mk lp ml lt mm lx mo mf mg mh bi translated">然后我们用<code class="fe mp mq mr kr b">print()</code>检查<code class="fe mp mq mr kr b">cashier</code>有哪些项目</li></ol><p id="35fc" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">我们怎样才能做同样的事情呢？</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="c2bf" class="kv kw iq kr b gy kx ky l kz la"># Pass items to second cashier but with a list comprehension<br/>cashier_2 = [item for item in cart]<br/>print(cashier_2)</span><span id="8f1d" class="kv kw iq kr b gy mn ky l kz la"># The output is the same as cashier (and the same as cart)<br/>Output: [3, 4, 12, 17, 19, 21, 23, 26, 30]</span></pre><p id="42c1" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">这里发生了什么？</p><p id="4d9e" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">与上面完全相同的步骤，只是以不同的方式编写。我们来对比一下。</p><figure class="km kn ko kp gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi ms"><img src="../Images/ddd0499eda40c09627916c6704226d6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RycJnooSC4_amWAXsvvKhw.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk">A non-list comprehension and list comprehension comparison of the same code.</figcaption></figure><ol class=""><li id="74dd" class="lz ma iq le b lf lg li lj ll mb lp mc lt md lx mo mf mg mh bi translated"><code class="fe mp mq mr kr b">cashier</code>是用蓝色创建的。在左边，它是在自己的行上创建的。在右边，它是在其他事物被创造的同时被创造的。</li><li id="53a4" class="lz ma iq le b lf mi li mj ll mk lp ml lt mm lx mo mf mg mh bi translated"><code class="fe mp mq mr kr b">cart</code>正在被绿色迭代。<code class="fe mp mq mr kr b">item</code>创建为 for 循环运行。这一步与从购物车中一次取出一个<code class="fe mp mq mr kr b">item</code>并将其交给收银员是一样的。</li><li id="411c" class="lz ma iq le b lf mi li mj ll mk lp ml lt mm lx mo mf mg mh bi translated"><code class="fe mp mq mr kr b">cashier</code>随着每个<code class="fe mp mq mr kr b">item</code>更新为红色。唯一的区别在左边，需要一个<code class="fe mp mq mr kr b">.append()</code>语句。右边的列表理解否定了对<code class="fe mp mq mr kr b">.append()</code>语句的需要</li></ol><p id="3847" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">我们用 1 行代码而不是 3 行代码完成了相同的步骤。这可能看起来不多，但是假设你有一个 1000 行的 Python 项目。你可以将你的项目从 1000 行减少到 300 行。这种减少不会总是发生，但它是如何用<em class="ly">python 一行程序</em>完成相同任务的一个例子。</p><h1 id="1be0" class="ne kw iq bd nf ng nh ni nj nk nl nm nn jw no jx np jz nq ka nr kc ns kd nt nu bi translated">你还能用 Python 列表理解做什么？</h1><p id="332a" class="pw-post-body-paragraph lc ld iq le b lf nv jr lh li nw ju lk ll nx ln lo lp ny lr ls lt nz lv lw lx ij bi translated">现在你已经有了一点直觉，让我们再看几个例子。</p><p id="85b0" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">只处理偶数。我们该如何处理这件事？</p><p id="e1ae" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">通过使用一个<strong class="le ir">条件</strong>。</p><ul class=""><li id="ebd2" class="lz ma iq le b lf lg li lj ll mb lp mc lt md lx me mf mg mh bi translated"><strong class="le ir">条件</strong> =另一种说法，真则做某事，假则停止。</li></ul><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="3f07" class="kv kw iq kr b gy kx ky l kz la"># Make a new cart<br/>cart = [5, 7, 9, 10, 12, 15, 19, 20, 22]</span><span id="479a" class="kv kw iq kr b gy mn ky l kz la"># Only give cashier_3 even numbers<br/>cashier_3 = []<br/>for item in cart:<br/>    if item % 2 == 0:<br/>        cashier_3.append(item)<br/>print(cashier_3)</span><span id="319d" class="kv kw iq kr b gy mn ky l kz la"># Thanks to the conditional the output is only the even numbers<br/>Output: [10, 12, 20, 22]</span></pre><p id="c2da" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">用列表理解怎么样？</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="d816" class="kv kw iq kr b gy kx ky l kz la">cashier_3 = [item for item in cart if item % 2 == 0]<br/>print(cashier_3)</span><span id="26db" class="kv kw iq kr b gy mn ky l kz la"># The output is the same as above<br/>Output: [10, 12, 20, 22]</span></pre><p id="400f" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">这里发生了什么事？</p><figure class="km kn ko kp gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi oa"><img src="../Images/2354fec787a4a2f29af851c486b21725.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dV1zP8TZ2PcIgdWyT5-Z4Q.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk">Example of a non-list comprehension and a list comprehension with a conditional.</figcaption></figure><p id="c119" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">这类似于上面的例子，除了黄色的条件。</p><ol class=""><li id="1dd2" class="lz ma iq le b lf lg li lj ll mb lp mc lt md lx mo mf mg mh bi translated"><code class="fe mp mq mr kr b">cashier_3</code>以蓝色创建。</li><li id="12c8" class="lz ma iq le b lf mi li mj ll mk lp ml lt mm lx mo mf mg mh bi translated"><code class="fe mp mq mr kr b">cart</code>正在被绿色迭代。<code class="fe mp mq mr kr b">item</code>在 for 循环运行时被创建。</li><li id="3e1c" class="lz ma iq le b lf mi li mj ll mk lp ml lt mm lx mo mf mg mh bi translated">当每个<code class="fe mp mq mr kr b">item</code>被传递到<code class="fe mp mq mr kr b">cashier_3</code>时，它被检查是否与黄色的条件匹配。</li><li id="a702" class="lz ma iq le b lf mi li mj ll mk lp ml lt mm lx mo mf mg mh bi translated">只要满足黄色条件，每个<code class="fe mp mq mr kr b">item</code>都会以红色更新<code class="fe mp mq mr kr b">cashier_3</code>。</li></ol><h2 id="b656" class="kv kw iq bd nf ob oc dn nj od oe dp nn ll of og np lp oh oi nr lt oj ok nt ol bi translated">100 多岁</h2><p id="53e7" class="pw-post-body-paragraph lc ld iq le b lf nv jr lh li nw ju lk ll nx ln lo lp ny lr ls lt nz lv lw lx ij bi translated"><code class="fe mp mq mr kr b">cashier_4</code>只接受 100 以上的奇数。你怎么能这样做？</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="73af" class="kv kw iq kr b gy kx ky l kz la"># Reminder of what cart looks like<br/>cart = [5, 7, 9, 10, 12, 15, 19, 20, 22]</span><span id="cb1e" class="kv kw iq kr b gy mn ky l kz la"># Non-list comprehension for cashier_4<br/>cashier_4 = []<br/>for item in cart:<br/>    item += 100 # add 100 to each item to bring them over 100<br/>    if item % 2 == 1: # check to see if they're odd or not<br/>        cashier_4.append(item)<br/>print(cashier_4)</span><span id="165d" class="kv kw iq kr b gy mn ky l kz la"># The output is all odd numbers over 100<br/>Output: [105, 107, 109, 115, 119]</span></pre><p id="e42b" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">现在用列表理解。</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="56fe" class="kv kw iq kr b gy kx ky l kz la"># List comprehension for cashier_4<br/>cashier_4 = [item+100 for item in cart if item % 2 == 1]<br/>print(cashier_4)</span><span id="2fba" class="kv kw iq kr b gy mn ky l kz la"># The output is all odd numbers over 100 (same as above)<br/>Output: [105, 107, 109, 115, 119]</span></pre><h1 id="8559" class="ne kw iq bd nf ng nh ni nj nk nl nm nn jw no jx np jz nq ka nr kc ns kd nt nu bi translated">下一步是什么？</h1><p id="0adc" class="pw-post-body-paragraph lc ld iq le b lf nv jr lh li nw ju lk ll nx ln lo lp ny lr ls lt nz lv lw lx ij bi translated">本教程仅仅触及了 Python 列表理解的皮毛。一旦您开始掌握它们，您将开始意识到它们对于编写简洁而强大的 Pythonic 代码是多么有价值。</p><p id="ace1" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">如果你想了解更多，我建议查看 DataCamp 上的<a class="ae lb" href="https://www.datacamp.com/community/tutorials/python-list-comprehension" rel="noopener ugc nofollow" target="_blank"> Python 列表理解教程。</a></p><p id="9e2d" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">本文中的所有代码都可以在 GitHub 上找到，本文的视频版本可以在 YouTube 上找到。</p><figure class="km kn ko kp gt mt"><div class="bz fp l di"><div class="om on l"/></div></figure></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><p id="f0a8" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">对下一篇文章有建议？请随意留下回复或通过<a class="ae lb" href="http://bit.ly/mrdbourketwitter" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae lb" href="http://bit.ly/mrdbourkelinkedin" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>、<a class="ae lb" href="mailto:daniel@mrdbourke.com" rel="noopener ugc nofollow" target="_blank"> Email </a>联系。</p></div></div>    
</body>
</html>