<html>
<head>
<title>Auth Schemes of REST API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">REST API 的授权方案</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/api-authentication-schemes-dc3f73753b29?source=collection_archive---------8-----------------------#2019-05-15">https://towardsdatascience.com/api-authentication-schemes-dc3f73753b29?source=collection_archive---------8-----------------------#2019-05-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/e2395c5de8cfd1bcd1d929055a25b2b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6aCJg2YEMrLiXqh6Z29THw.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Image by Gerd Altmann from Pixabay</figcaption></figure><div class=""/><div class=""><h2 id="d130" class="pw-subtitle-paragraph kf jh ji bd b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw dk translated">策略、密钥管理、安全性和 OAuth</h2></div><p id="1d8d" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">用户数据是驱动 API 经济的基础货币。像任何货币一样，你需要小心处理，小心运输，以防被盗。</p><p id="1582" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">不同的设备和平台有不同的漏洞。你家里的桌面不像手机那么不堪一击。手机更容易丢。有人可以访问你手机上应用程序存储的本地文件。这改变了移动应用的认证和授权流程。</p><p id="5e05" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">类似地，对于单页 web 应用程序(SPA ),整个 Javascript 可以被视为一个源代码。您不希望您的凭据成为 SPA 中本地数据存储的一部分。</p><p id="f376" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">有许多安全模型。根据设备和用途，有多种身份验证方式。不同的认证方式被称为方案。</p><p id="493b" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">没有一种方法可以保证您的 API 适用于所有情况。但是，你可以学习这些方案，研究最大的社交网络是如何处理的，并找出行业标准；然后以你认为合适的方式应用到你的项目中。</p><p id="defe" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">REST API 认证的 4 个主要方案是</p><ol class=""><li id="0320" class="lt lu ji kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated">基本认证</li><li id="0270" class="lt lu ji kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">基于令牌的认证</li><li id="007c" class="lt lu ji kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">基于 API 密钥的认证</li><li id="46c3" class="lt lu ji kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">开放授权</li></ol><p id="f769" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">您可能已经注意到 OAuth 说的是授权而不是认证。这两个术语不能互换。我们将在本文的后面讨论这些区别。</p><p id="5056" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">在这篇文章的结尾，你会对不同的方案有一个清晰的理解。</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><p id="d8df" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">在我们开始讨论这些方案之前，让我们先来讨论一些建立在讨论基础上的基本概念。</p><h2 id="8d0d" class="mo mp ji bd mq mr ms dn mt mu mv dp mw lg mx my mz lk na nb nc lo nd ne nf ng bi translated">秘密和钥匙</h2><blockquote class="nh"><p id="c403" class="ni nj ji bd nk nl nm nn no np nq ls dk translated">认证是用秘密打开事物的艺术。每个认证的核心是一个共享的秘密！</p></blockquote><p id="e0d4" class="pw-post-body-paragraph kx ky ji kz b la nr kj lc ld ns km lf lg nt li lj lk nu lm ln lo nv lq lr ls im bi translated">您的 ATM 卡密码是您和银行之间的共享秘密。</p><p id="ba30" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">你银行保险箱的密码是另一个共享的秘密。</p><p id="46b6" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">您登录电子邮件的密码是您和电子邮件提供商之间共享的秘密。</p><p id="78a3" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">这个秘密可以给你，就像进入夜总会的密码，或者你可以生成这个秘密，并像你的银行卡的 pin 码一样存储在系统中。</p><p id="b435" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">不管怎样，这个秘密有两份。一份在系统，一份在你。你的副本被称为<em class="nw">私有</em>密钥。</p><p id="58e6" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">你能控制系统里的拷贝吗？不，但是存储在他们服务器上的拷贝不能被另一个人或另一台机器读取。服务器只有您的机密的高度加密版本；它不知道解密后的值是什么样的。服务器可能需要几千年才能解密。</p><p id="07c2" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">这就是为什么如果你忘记了密码，你需要重新设置。你可以在这里找到破解密码<a class="ae nx" href="https://random-ize.com/how-long-to-hack-pass/" rel="noopener ugc nofollow" target="_blank">需要多长时间。</a></p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h2 id="cde5" class="mo mp ji bd mq mr ms dn mt mu mv dp mw lg mx my mz lk na nb nc lo nd ne nf ng bi translated">公钥和私钥</h2><p id="0825" class="pw-post-body-paragraph kx ky ji kz b la ny kj lc ld nz km lf lg oa li lj lk ob lm ln lo oc lq lr ls im bi translated">你的前门锁是公开的。任何人都可以来到你的前门，用他们的钥匙试你的锁，但只有你的钥匙能打开它。你的钥匙是私人的，而你家的锁是公开的。</p><blockquote class="nh"><p id="686b" class="ni nj ji bd nk nl nm nn no np nq ls dk translated">在数字世界里，钥匙叫钥匙，锁也叫钥匙。所以有两把钥匙。一个是你的秘密副本——你的私钥，另一个是任何人都可以访问的公钥。这是公钥/私钥对。</p></blockquote><p id="7ed0" class="pw-post-body-paragraph kx ky ji kz b la nr kj lc ld ns km lf lg nt li lj lk nu lm ln lo nv lq lr ls im bi translated">例如，任何人都可以去 hotmail.com，输入你的电子邮件地址，但除非他们有你的密码(你的私人密钥)，否则他们无法登录。</p><p id="1f41" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">有不同的方法来管理您最终拥有的所有私钥，也有不同的方法来存储它们，使它们不容易被破坏。</p><p id="8e9b" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">找出窃取您的私钥的方法是黑客工作描述的一部分，找出安全管理、存储和传输密钥的方法是 API 工作的一部分；直接或通过第三方 API 管理服务。</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h2 id="5ae8" class="mo mp ji bd mq mr ms dn mt mu mv dp mw lg mx my mz lk na nb nc lo nd ne nf ng bi translated">因素</h2><blockquote class="nh"><p id="9a7f" class="ni nj ji bd nk nl nm nn no np nq ls dk translated">因素通过你是谁、你知道什么、你拥有什么来认证你。</p></blockquote><p id="f96b" class="pw-post-body-paragraph kx ky ji kz b la nr kj lc ld ns km lf lg nt li lj lk nu lm ln lo nv lq lr ls im bi translated">除了用户名和密码之外，认证还可以包括称为<em class="nw">因素</em>的附加信息。</p><ol class=""><li id="cf74" class="lt lu ji kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated">单因素—这是我们讨论过的用户名和密码。这是“你是谁”类型的认证。</li><li id="7e98" class="lt lu ji kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">两个因素——除了用户名和密码，您还需要回答另一个在注册时设置的机密问题。所以你有两把秘密钥匙。一个是你是谁，另一个是你知道什么。</li><li id="47c3" class="lt lu ji kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">多因素身份认证(MFA) —这是最难破解的。您使用您的密钥，并为服务器设置一个秘密位置，以便向您发送另一个密钥。当您使用第一个密钥时，服务器会将另一个密钥发送到您在注册过程中共同约定的秘密位置(通常人们会将此设置为他们的电话号码或电子邮件地址)。这个第二密钥通常只在几分钟内有效。在这段时间内，您需要使用第二个密钥登录。这将决定你是谁，你有什么(手机)类型的认证。</li><li id="7437" class="lt lu ji kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">生物认证——这是指纹 ID，它正成为手机认证的常见部分。我写这篇文章的<a class="ae nx" href="https://www.dell.com/en-us/shop/dell-laptops/xps-15/spd/xps-15-9570-laptop" rel="noopener ugc nofollow" target="_blank">戴尔笔记本电脑</a>有生物识别登录功能。我必须把食指放在电源按钮上才能登录。这是一个自动的“你是谁”类型的认证，你不需要手动输入用户名和密码。</li><li id="3e41" class="lt lu ji kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">验证码——有两种。一个你必须破译你看到的弯弯曲曲的单词并输入的地方。另一个是你必须在图片网格中识别山脉、汽车、店面或任何数量的事物。这些是最讨厌的，希望它们快点消失。有时候歪歪扭扭的字太让人费解，我不得不要第二套，然后打开音响听。</li></ol></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h2 id="5fb8" class="mo mp ji bd mq mr ms dn mt mu mv dp mw lg mx my mz lk na nb nc lo nd ne nf ng bi translated">认证和认证</h2><p id="c09d" class="pw-post-body-paragraph kx ky ji kz b la ny kj lc ld nz km lf lg oa li lj lk ob lm ln lo oc lq lr ls im bi translated"><em class="nw">认证</em>和<em class="nw">授权</em>是两回事。</p><blockquote class="nh"><p id="21aa" class="ni nj ji bd nk nl nm nn no np nq ls dk translated">身份验证让您登录到服务器。授权使您能够访问服务器上的资源。</p></blockquote><p id="84c2" class="pw-post-body-paragraph kx ky ji kz b la nr kj lc ld ns km lf lg nt li lj lk nu lm ln lo nv lq lr ls im bi translated">而<em class="nw">你</em>，是资源拥有者。你把你的资源交给服务器存储。像你的个人资料、爱好、你的购买、你的欲望、想要和需要(亚马逊上的愿望清单)、你的位置数据、你的关系状态、你的周年纪念日、你配偶的详细资料、你的孩子、孙子的名字、他们的照片、生日……以及你给例如脸书的更多生活数据！</p><p id="e1dc" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">需要访问该数据的其他应用程序将需要您的许可。</p><p id="a302" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">认证发生在授权之前。仅仅因为你已经登录并不意味着你可以访问一切。</p><p id="5c4e" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">认证是通过用户名、密码和其他我们讨论过的<em class="nw">因素</em>来协商的。授权是基于帐户上的策略协商的，例如<em class="nw">管理员</em>或<em class="nw">用户、超级用户、访客……</em>等。</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="1ce5" class="od mp ji bd mq oe of og mt oh oi oj mw ko ok kp mz kr ol ks nc ku om kv nf on bi translated">认证方案</h1><p id="cf3d" class="pw-post-body-paragraph kx ky ji kz b la ny kj lc ld nz km lf lg oa li lj lk ob lm ln lo oc lq lr ls im bi translated">在 REST API 中，发送一次凭证并登录是不够的。正如我们在本文中所讨论的，REST 是无状态的。因为是无状态的，REST API 不能记住你的凭证。所以你每次跟它说话都要告诉它你是谁！</p><p id="0d6e" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">记住这一点，让我们按照复杂程度的顺序深入研究这些方案。</p><h2 id="db6e" class="mo mp ji bd mq mr ms dn mt mu mv dp mw lg mx my mz lk na nb nc lo nd ne nf ng bi translated">1.基本认证</h2><p id="c3f0" class="pw-post-body-paragraph kx ky ji kz b la ny kj lc ld nz km lf lg oa li lj lk ob lm ln lo oc lq lr ls im bi translated">这是保护 API 的最简单的方法。每次发送请求时，让用户输入用户名和密码来标识自己。</p><p id="9fde" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">在标准 HTTP 规范中，有一个<em class="nw">授权</em>头字段可用于此目的。用户名和密码使用 Base 64 编码进行编码。任何人在数据传输到服务器的过程中截取数据，都会看到一长串的胡言乱语。不过，Base 64 编码可以在不到一秒的时间内轻松解码。</p><h2 id="a658" class="mo mp ji bd mq mr ms dn mt mu mv dp mw lg mx my mz lk na nb nc lo nd ne nf ng bi translated">黑客如何破解你的密码</h2><p id="5972" class="pw-post-body-paragraph kx ky ji kz b la ny kj lc ld nz km lf lg oa li lj lk ob lm ln lo oc lq lr ls im bi translated">拦截器可以复制这些胡言乱语，并将其粘贴到一个在线解码器中，以取回你的用户名和密码。这被称为中间人(MiTM)攻击。他们可能正坐在一家咖啡店里，用咖啡店的名字设置了 wifi。你可能没有注意到不同，而是和他们联系起来。现在你所有的数据都在他们的笔记本上流动。</p><p id="a6eb" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">这就是为什么基本认证是很好的…基本的。</p><p id="b9ef" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">对于移动应用程序和单页应用程序，基本身份验证不是一个好的方案，因为您不想将用户名和密码存储在设备上或 SPA 的 Javascript 代码中。</p><p id="3e1e" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">对于移动和 SPA，您可以改用基于令牌的身份验证。</p><h2 id="bc64" class="mo mp ji bd mq mr ms dn mt mu mv dp mw lg mx my mz lk na nb nc lo nd ne nf ng bi translated">2.基于令牌的认证</h2><p id="340e" class="pw-post-body-paragraph kx ky ji kz b la ny kj lc ld nz km lf lg oa li lj lk ob lm ln lo oc lq lr ls im bi translated">在这个方案中，用户将输入他们的用户名和密码(凭证)，服务器将根据这些凭证生成一个令牌。</p><p id="32b0" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">然后，服务器将这个令牌发送给用户。</p><p id="432f" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">现在，用户不需要在每次请求时都发送登录凭证。相反，他们只是发送编码的令牌，服务器验证令牌。</p><p id="3314" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">有多种方法可以将日期和时间编码到该令牌中，这样拦截该令牌的人就无法在特定时间后再次使用它。</p><p id="c1a2" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">当用户调用端点来访问资源时，需要通过头、体或作为查询参数传递该令牌。</p><p id="b475" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">最流行的令牌格式是 JSON Web 令牌(JWT)。令牌的字段是键/值对。这些密钥被称为声明。这些声明本质上是告诉 API 这些值应该是什么意思。您可以在<a class="ae nx" href="https://tools.ietf.org/html/rfc7519" rel="noopener ugc nofollow" target="_blank"> RFC 7519 </a>中找到所有标准声明的列表</p><p id="02ac" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">这是 JWT 声明集的一个例子。<em class="nw"> aud </em>字段是受众声明，它告诉服务器它包含客户端 ID。如果缺少这个，那么这个令牌将被拒绝。</p><pre class="oo op oq or gt os ot ou ov aw ow bi"><span id="c224" class="mo mp ji ot b gy ox oy l oz pa">{   <br/>"iss": "http://www.mysite.com",   <br/>"aud": "Client Secret",   <br/>"name": "first last",   <br/>"email": "firstlast@mysite.com",   <br/>}</span></pre><p id="470c" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">JWT 令牌基于 OpenID 连接协议(OIDC)进行协商。</p><p id="3caa" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">令牌可以设置为在一定时间后过期，因此用户需要再次登录。如果存在任何危害，也可以在服务器端撤销令牌。</p><h2 id="ffe5" class="mo mp ji bd mq mr ms dn mt mu mv dp mw lg mx my mz lk na nb nc lo nd ne nf ng bi translated">3.API 密钥和客户端机密</h2><p id="bbdd" class="pw-post-body-paragraph kx ky ji kz b la ny kj lc ld nz km lf lg oa li lj lk ob lm ln lo oc lq lr ls im bi translated">在这个方案中，需要访问资源的客户机需要向 API 注册自己。API 为每个注册的客户端生成一个密钥和一个秘密。然后，这些文件被存储在服务器中，并将它们的副本发送给客户端。当客户端尝试连接时，需要将这些内容传入。</p><p id="af1c" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">例如，如果你需要一个开发者来编写你的应用程序的一部分，那么你可以生成这个密钥和秘密，并把它交给他们。如果你需要向许多开发者分发密钥，你需要手动设置。问题是这很难扩展。</p><p id="3a67" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">API 密钥和客户端机密的另一个问题是密钥管理。你需要为他们提供一种方法—</p><p id="de40" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated"><strong class="kz jj"> a. </strong>生成密钥和秘密</p><p id="5060" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated"><strong class="kz jj"> b. </strong>发送给他们——这可以通过电子邮件或在 API 的开发人员帐户中显示</p><p id="26e6" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated"><strong class="kz jj"> c. </strong>保护密钥和秘密</p><p id="1e11" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">存储和管理密钥可能会变得复杂。这就是为什么一些组织更愿意雇佣第三方服务来完成这项工作。IBM、微软和其他供应商(如 Akana、Apigee 等)提供了许多 API 管理工具。<a class="ae nx" href="https://www.softwaretestinghelp.com/api-management-tools/" rel="noopener ugc nofollow" target="_blank">这里的</a>是十大 API 管理工具的列表。</p><p id="b83f" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">如果您想自己完成，而不是雇佣第三方服务，那么您会希望自动生成和交换密钥，这样您就可以扩展。对这种自动化的需求是开发 OAuth 这样的授权框架的主要原因之一。</p><h2 id="b955" class="mo mp ji bd mq mr ms dn mt mu mv dp mw lg mx my mz lk na nb nc lo nd ne nf ng bi translated">4.OAuth 2.0(开放式授权)</h2><p id="ebc3" class="pw-post-body-paragraph kx ky ji kz b la ny kj lc ld nz km lf lg oa li lj lk ob lm ln lo oc lq lr ls im bi translated">OAuth 自动生成和交换密钥。当应用程序需要您的许可/授权来代表您访问数据时，它会要求您登录到 API 提供程序。</p><p id="07f3" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">让我们看一个真实的例子。如果您希望 Joe 能够访问您的个人银行帐户以提取资金，下面是在这种情况下如何“OAuth”Joe。</p><ol class=""><li id="f2c9" class="lt lu ji kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated">你去银行，出示你的身份证—( <em class="nw">验证你自己</em>)</li><li id="422a" class="lt lu ji kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">告诉他们您希望 Joe 能够访问您的帐户— ( <em class="nw">授权 Joe </em>)</li><li id="8e05" class="lt lu ji kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">给银行 Joe 的电子邮件地址，这样银行可以给 Joe 发送一个访问令牌—( <em class="nw"> API Provider 调用一个网站重定向 URI，在响应体中使用访问令牌</em>)</li><li id="d23d" class="lt lu ji kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">Joe 带着访问令牌和他的 ID 来到银行— ( <em class="nw">客户验证自己并出示访问令牌</em>)</li><li id="6b67" class="lt lu ji kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">银行授权 Joe 访问您的帐户— ( <em class="nw"> API 提供者授权客户访问您的资源</em>)</li></ol><h1 id="a23b" class="od mp ji bd mq oe pb og mt oh pc oj mw ko pd kp mz kr pe ks nc ku pf kv nf on bi translated">摘要</h1><p id="6a92" class="pw-post-body-paragraph kx ky ji kz b la ny kj lc ld nz km lf lg oa li lj lk ob lm ln lo oc lq lr ls im bi translated">在本文中，您了解了一些不同的身份验证因素，如单因素、双因素和多因素身份验证。</p><p id="6bb4" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我们讨论了身份验证和授权之间的区别，所以现在您知道了，即使这些术语被随意使用，有时它们还是有很大的不同。</p><p id="c366" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">我们讨论了不同的认证方案，比如基本认证、令牌、jwt、API 密钥和 OAuth2.0</p><p id="2cfc" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated">至此，您应该对保护 API 的方法有了一个很好的概述。如果你想深入了解我们在这里提到的主题，这里有一些参考资料—</p><p id="6050" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated"><a class="ae nx" href="https://tools.ietf.org/html/rfc6749" rel="noopener ugc nofollow" target="_blank"><em class="nw">RFC 6749</em></a><em class="nw">-OAuth 2.0 授权框架</em></p><p id="0f83" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated"><a class="ae nx" href="https://tools.ietf.org/html/rfc2617" rel="noopener ugc nofollow" target="_blank"><em class="nw">RFC 2617</em></a><em class="nw">-HTTP 认证:基本和摘要访问认证</em></p><p id="b2ad" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated"><a class="ae nx" href="https://tools.ietf.org/html/rfc7235" rel="noopener ugc nofollow" target="_blank"> RFC7235 </a> -超文本传输协议(HTTP/1.1):认证</p><p id="940e" class="pw-post-body-paragraph kx ky ji kz b la lb kj lc ld le km lf lg lh li lj lk ll lm ln lo lp lq lr ls im bi translated"><a class="ae nx" href="https://tools.ietf.org/html/rfc7519" rel="noopener ugc nofollow" target="_blank">RFC 7519</a>-JSON Web Token(JWT)</p></div></div>    
</body>
</html>