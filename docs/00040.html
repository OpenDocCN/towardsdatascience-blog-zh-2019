<html>
<head>
<title>Music listener statistics: last.fm’s last.year as an R package</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">音乐听众统计:last.fm 的 last.year 作为 R 包</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/music-listener-statistics-last-fms-last-year-as-an-r-package-c21ac7eee102?source=collection_archive---------29-----------------------#2019-01-02">https://towardsdatascience.com/music-listener-statistics-last-fms-last-year-as-an-r-package-c21ac7eee102?source=collection_archive---------29-----------------------#2019-01-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="d7b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当开始用 last.week 和 last.year 函数分析<!-- -->last . FM<!-- -->scrobbbles 时，我总是缺少一些图表或纯数据表。这就是为什么我开发了包"<a class="ae kl" href="https://github.com/zappingseb/analyze_last_fm" rel="noopener ugc nofollow" target="_blank"> analyzelastfm </a>"作为一个简单的 R6 实现。我想有不同的专辑统计数据，例如，每张专辑的播放次数，除以专辑中的曲目数。这一点现已落实。要获得音乐收听统计数据，您可以从以下内容开始:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="65ec" class="kv kw iq kr b gy kx ky l kz la"># If you don't have it, install devtools<br/># install.packages("devtools")<br/>devtools::install_github("zappingseb/analyze_last_fm")<br/>library(analyzelastfm)</span></pre><p id="6e46" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，它允许您通过使用 last.fm REST API 导入您的<a class="ae kl" href="https://www.last.fm/user/zappingseb/listening-report/year" rel="noopener ugc nofollow" target="_blank"> last.year </a>数据。因此，您需要有一个 last.fm API 密钥。这个只要去<a class="ae kl" href="https://www.last.fm/api/account/create" rel="noopener ugc nofollow" target="_blank"> last.fm API 网站</a>就可以推导出来。从那里你将得到 32 个字符长的密钥。收到密钥后，我通过以下方式获得了 last.fm 数据:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="a477" class="kv kw iq kr b gy kx ky l kz la">api_key &lt;- "PLEASE ENTER YOUR KEY HERE"<br/>data &lt;- UserData$new("zappingseb",api_key,2018)</span></pre><p id="e750" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">数据对象现在包含函数<code class="fe lb lc ld kr b">albumstats</code>,它允许我获得我想要的特定信息。我会把艺术家“死德雷”排除在外？？?"因为这是一个来自德国的儿童侦探故事，我听了很多，它的专辑被分成 1 分钟的曲目，这真的打乱了我的统计。</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="14fe" class="kv kw iq kr b gy kx ky l kz la">View(data$albumstats(<br/>  sort_by="by_album_count", # album track plays / nr tracks on album<br/>  exclude_artist="Die drei ???", # exclude my audio book favorite<br/>  exclude_album=c(""), # exclude tracks without album name<br/>  min_tracks=5) # have minimum 5 tracks on the album (NO EPs)<br/>)</span></pre><p id="dffa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">结果看起来是这样的:</p><figure class="km kn ko kp gt lf gh gi paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gh gi le"><img src="../Images/2e4c6a4db0f25e4accd737bb17a4e092.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hdD4ETXB47W1S8lCyMTPNA.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk">Album statistics of 2018 of zappingseb</figcaption></figure><p id="3646" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">统计数据显示了<code class="fe lb lc ld kr b">n</code>播放次数、<code class="fe lb lc ld kr b">count</code>专辑曲目数和<code class="fe lb lc ld kr b">count_by_track=n/count</code>。</p><p id="5661" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在这里找到前 5 张专辑:</p><ul class=""><li id="add1" class="lq lr iq jp b jq jr ju jv jy ls kc lt kg lu kk lv lw lx ly bi translated"><a class="ae kl" href="https://www.amazon.de/gp/product/B0762Y3T14/ref=as_li_tl?ie=UTF8&amp;tag=zappingseb-21&amp;camp=1638&amp;creative=6742&amp;linkCode=as2&amp;creativeASIN=B0762Y3T14&amp;linkId=c2e12707d54eee718e3b30b91a967fed" rel="noopener ugc nofollow" target="_blank">哈克尼学院乐队——卷笔刀</a></li><li id="9245" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated"><a class="ae kl" href="https://www.amazon.de/gp/product/B06XS8TTS4/ref=as_li_tl?ie=UTF8&amp;tag=zappingseb-21&amp;camp=1638&amp;creative=6742&amp;linkCode=as2&amp;creativeASIN=B06XS8TTS4&amp;linkId=f712ea96a435a93e069b778990d66645" rel="noopener ugc nofollow" target="_blank">朱克斯先生——上帝第一</a></li><li id="cd4a" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated"><a class="ae kl" href="https://www.amazon.de/gp/product/B01M24YCCH/ref=as_li_tl?ie=UTF8&amp;tag=zappingseb-21&amp;camp=1638&amp;creative=6742&amp;linkCode=as2&amp;creativeASIN=B01M24YCCH&amp;linkId=8f3115b23d7953db404d1710a6cb797d" rel="noopener ugc nofollow" target="_blank">电动豪华圈</a></li><li id="57f1" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated"><a class="ae kl" href="https://www.amazon.de/gp/product/B07BS3SFDC/ref=as_li_tl?ie=UTF8&amp;tag=zappingseb-21&amp;camp=1638&amp;creative=6742&amp;linkCode=as2&amp;creativeASIN=B07BS3SFDC&amp;linkId=32d00c3201b0dc902a9c830a459ed266" rel="noopener ugc nofollow" target="_blank">汤姆·米施——地理</a></li><li id="1fb6" class="lq lr iq jp b jq lz ju ma jy mb kc mc kg md kk lv lw lx ly bi translated"><a class="ae kl" href="https://www.amazon.de/gp/product/B01M0G01UU/ref=as_li_tl?ie=UTF8&amp;camp=1638&amp;creative=6742&amp;creativeASIN=B01M0G01UU&amp;linkCode=as2&amp;tag=zappingseb-21&amp;linkId=abf7103142c4e6c2895766cd1c2d3dcc" rel="noopener ugc nofollow" target="_blank">彼尔德布赫——神奇的生活</a></li></ul><p id="9a8c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">除了这些计算，我还对我听音乐的时间感兴趣。因此我在包里添加了一些情节。第一个是监听时钟:</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="06d4" class="kv kw iq kr b gy kx ky l kz la">data$clock.plot()</span></pre><figure class="km kn ko kp gt lf gh gi paragraph-image"><div class="gh gi me"><img src="../Images/2be548789f0ccc013fcfcdc059193aea.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*r3l0qQzJraIley_HmETh6A.png"/></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk">Clock plot for my music history</figcaption></figure><p id="b02a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我通常在早上 7 点到 8 点和下午 5 点到 6 点骑车上班的路上听音乐。我最重要的统计数据是我一年中听音乐的时间。我最感兴趣的是一些特定的日子和一个平均的游戏/月，这可以告诉我当时的心情。因此我创建了函数<code class="fe lb lc ld kr b">daily_month_plot</code>。它将每月平均播放次数和每日播放次数绘制在一个图中。每月的平均播放量可以在每日峰值后看到。这里你可以看到二月对我来说是一个非常平静的月份。</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="cc41" class="kv kw iq kr b gy kx ky l kz la">data$daily_month_plot()</span></pre><figure class="km kn ko kp gt lf gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/731ebd721ca5d74ccddbf5234675a872.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*CUzCRzku2c8jQpyPj82oGQ.png"/></div></figure><p id="4cd2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于一些简单的统计数据，我还包含了一个名为<code class="fe lb lc ld kr b">barplots</code>的聚合绘图函数。它可以按工作日、周、月或日绘制聚合图。该函数的数据由函数<code class="fe lb lc ld kr b">bar_data</code>提供。</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="a9b3" class="kv kw iq kr b gy kx ky l kz la">data$barplots("weekdays")</span></pre><figure class="km kn ko kp gt lf gh gi paragraph-image"><div class="gh gi me"><img src="../Images/093a95e3a69f402c2076664f464fa161.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*xrh_HHV7NDqpbsnkeSjO5g.png"/></div></figure><p id="6f13" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每周(从 2017 年第 52 周开始):</p><pre class="km kn ko kp gt kq kr ks kt aw ku bi"><span id="9ee6" class="kv kw iq kr b gy kx ky l kz la">data$barplots(“week”)</span></pre><figure class="km kn ko kp gt lf gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/8b3f38beeebef690a30fb22cdadb5433.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*NONn2_xzHZ_NRc8SARpEHw.png"/></div></figure><p id="e1a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我可以清楚地看到，在今年年初，我并没有真正听很多音乐，到第 18 周，我的听力活动急剧增加。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><p id="ddd6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这篇文章有点超出了我的范围，主要是关于<a class="ae kl" rel="noopener" target="_blank" href="/interesting-packages-taken-from-r-pharma-e89639788180"> R 包对制药</a>有用的包。但我真的很喜欢音乐，认为音乐和数据科学是很好的结合。声音在一起很棒！</p><p id="a972" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请在<a class="ae kl" href="https://github.com/zappingseb/analyze_last_fm" rel="noopener ugc nofollow" target="_blank">https://github.com/zappingseb/analyze_last_fm</a>找到 R 包——开始行动永远不晚；)</p></div></div>    
</body>
</html>