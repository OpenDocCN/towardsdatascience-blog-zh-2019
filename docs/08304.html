<html>
<head>
<title>Getting to grips with parse trees</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">掌握解析树</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/getting-to-grips-with-parse-trees-6e19e7cd3c3c?source=collection_archive---------18-----------------------#2019-11-12">https://towardsdatascience.com/getting-to-grips-with-parse-trees-6e19e7cd3c3c?source=collection_archive---------18-----------------------#2019-11-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="8a2b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对 NLP 有用。没那么复杂。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/44f59247bcb5f27afba63edf936f367f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aatFoOBrI9OYGKCEruZD9w.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Source: Anni Roenkae for Pexels</figcaption></figure><p id="e1da" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然我们按顺序读、写、说，但实际上单词是按层次排列的。随着我们掌握了母语，这种等级制度就成了我们的第二天性，以至于我们很少需要停下来思考哪些单词应该放在哪里才能构成一个完整的句子。</p><p id="a8a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">解析树是在树形图中显式可视化这种层次的一种方式。</p><p id="a108" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">直到几年前，许多自然语言处理(NLP)都涉及到将句子解析成这样的图形并对其进行处理。例如，人们可以将树分成不同的结构类型；或者操纵一棵树来形成新的树，新的树可能对应于也可能不对应于具有相邻语义属性的新句子。</p><p id="2b1e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对一些人来说，足够的计算能力和深度神经网络的出现使所有这些努力都变得多余:如果一个词的完整上下文由其邻居决定，让你的网络处理足够的文本数据就足够了。</p><p id="dd42" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嗯，也许吧。然后，也许你有很多句子碰巧有相似的结构，简单地把它们分开会很有用。为了以防万一，解析树是一个很好的工具。</p><h1 id="0910" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">我们先从小事做起</strong></h1><p id="8ed6" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">让我们从一个微小的句子开始。我们将使用 spaCy 解析器对其进行解析，并以三种不同的方式呈现结果，以帮助将解析树结构上下文化。</p><p id="ec7f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第一个是句子中单词的有序列表，以及每个单词所扮演的角色。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi me"><img src="../Images/8e100b90230dc266265b63dc8575b6b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WjVxA6V2Wqit-E-wSfBmWQ.png"/></div></div></figure><p id="6d15" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第二个是相同的信息，展示了解析树在空间中的可视化方式。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mf"><img src="../Images/6ea011f10c5ebce95838ce3aa73cb1e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dg3bId472q-RQA8jIItGAg.png"/></div></div></figure><p id="cff7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第三张是同一棵树的稍微不同的插图，从上到下读起来很容易。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mg"><img src="../Images/8da93aaa96529950d1b34bf3b5022caa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j3WNJ1owpuAcUfAmKKvwsg.png"/></div></div></figure><p id="6744" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">下面是关于解析树需要注意的四件事:</strong> <br/> 1 .句子中的每个单词都是图表中的一个节点。我们所说的词实际上是指“句法词”，称为标记。例如，<em class="mh"> She 的</em>可以写成一个单词，但是表示“她是”，所以<em class="mh"> She </em>将是一个令牌，<em class="mh">的</em>将是第二个令牌，在它自己的节点中。</p><p id="4885" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.该树有一个根<strong class="jp ir">节点</strong>，树的其余部分从该节点流出。这是一个句子的主要动词。</p><p id="f13c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.如箭头所示，边缘是有方向的。如果一条边从一个节点到另一个节点，第一个节点是“父节点”，第二个节点是“子节点”。在解析树中，每个节点(根节点除外)都有一个父节点，并且可以有零个或多个子节点</p><p id="738b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.每个节点都有一个标签。每条边都有单独的标签。<strong class="jp ir">这是两套不同的标签</strong>。</p><p id="8f4f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可能对节点上的标签很熟悉，它们表示<strong class="jp ir">词性</strong>(词性):动词、名词、形容词等。<br/>这个清单比你想象的要长(稍后会有更多)。这里还有几个，完整的名单可以在这里找到<a class="ae mi" href="https://spacy.io/api/annotation#pos-tagging" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mj"><img src="../Images/14730fc69056c5e6438f714817916c6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DinNz1th_1SPiE0I3b7bww.png"/></div></div></figure><p id="71bd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">边缘的东西呢？</p><p id="12a7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它们被称为<strong class="jp ir">句法依赖标签</strong>，显然，有些是通用的(确切地说是 37 个)，而有些是语言依赖的。你可以在 spaCy 文档中找到一个<a class="ae mi" href="https://spacy.io/api/annotation#dependency-parsing" rel="noopener ugc nofollow" target="_blank">完整列表</a>，但是你真正需要做的是:a .识别它们是什么，b .理解它们有助于导航树，以及 c .记住那些碰巧对你有用的。</p><p id="013c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，<em class="mh"> nsubj </em>将是一个显而易见的答案，因为这通常是句子的主语。另一个流行的是<em class="mh"> amod </em>，这是一个形容词修饰语。在我们的例子中，这位女士驾驶的不是任何旧钢琴，而是一种特殊的钢琴——一架希腊钢琴。</p><h1 id="1004" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">细化词性标注</strong></h1><p id="acde" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">假设我们的句子改成“她<strong class="jp ir">驾驶</strong>希腊钢琴”。词性标注完全相同——drives 和 drives 都是动词。需要一个更精确的系统来区分这两者。</p><p id="183a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嗯，完整的 POS 标记系统确实适应这种区别。以下是<a class="ae mi" href="https://www.clips.uantwerpen.be/pages/mbsp-tags" rel="noopener ugc nofollow" target="_blank">不同标签</a>的列表；正如你所料，它比以前长了很多。再说一次，我不可能记住哪怕是一半，所以我把它保存在一个文档中作为参考。</p><p id="d3ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了区分简化的标记(它可能告诉你一个令牌是一个动词，但不是它的时态)和完整版本，spaCy 调用第一个 POS 和第二个标记。您的解析树可以显示标记的完整标记。在其文档中，spaCy 列出了标签及其相应的位置，这很有帮助。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mk"><img src="../Images/a2a1e96e7b891c09cf53703ee1000dea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Gu3mF2_G4DfwZXBdLsCrA.png"/></div></div></figure><h1 id="aedb" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">短语和子树</strong></h1><p id="4ed2" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">让我们看看当我们把“她”改成更具体的东西时会发生什么。句子的主语现在从一个单词变成了包含几个单词的名词短语。因此，<em class="mh"> nsubj </em>边指向“Queen ”,并从那里流出一个子树。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ml"><img src="../Images/76a661bc66cfc857304980bbb2a1dd1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ekxmgR-cu5cFeijzYDFvVQ.png"/></div></div></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mm"><img src="../Images/e5599aed917ee78e19448037dcfb2881.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-dilp6yDEUNb4qDZ6zkk3A.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">The subtree for the <em class="mn">sentence’s subject</em></figcaption></figure><p id="efe0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要知道子树在哪里开始，在哪里结束，我们可以在句子中寻找属于这个子树的最右边和最左边的标记，并获取它们之间的所有内容:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mo"><img src="../Images/be82caeaca582128ee4f4a7d9ece1b97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hKzJrlIAhEpM8I4eh2AleA.png"/></div></div></figure><p id="5af8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，看看下面这个新句子。尽管这个句子和我们之前的句子没有一个单词相同，我们还是觉得这两个句子有很大的相似之处。例如，在这里我们可以看到主题子树在语法上是相同的:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mo"><img src="../Images/358f7be8af64a06fb51a99e41ed0231b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lCGn6E9ojh9-lwdff-FdfA.png"/></div></div></figure><h1 id="f203" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">快速回顾</h1><p id="a142" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">解析树是表示句子的方向树:标记是节点，边是单词之间的语法关系，源于句子的主要动词。这意味着每个令牌都可以通过从根开始的单一路径到达。</p><p id="1309" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">树表示明确了句子的层次性质，因此句子中较小的句法单元对应于子树。</p><p id="62b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">节点和边都用两组不同的标签进行了标注。重要的是不要陷入这些标签的字母汤。请记住，它们可以用来导航树。这为基于规则的分析提供了坚实的基础，尤其是与正则表达式结合使用时。</p><h1 id="8407" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">摘要</h1><p id="e02f" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">在 2019 年 spaCy IRL 活动的<a class="ae mi" href="https://www.youtube.com/watch?v=e12danHhlic" rel="noopener ugc nofollow" target="_blank">主题演讲</a>中，NLP 研究员兼艾伦人工智能研究所研究主任 Yoav Goldberg 概括地描绘了用于分析文本的技术。</p><p id="71e6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">他补充说，大多数应用自然语言处理仍然使用基于规则的系统，而不是来自学术界的最新研究。基于规则的系统的优点是需要的数据更少，更透明，更容易调试。</p><p id="ac0c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，他们确实需要更多的语言知识。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mp"><img src="../Images/c56e91e43f62b65718707b55fc7e2877.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*59oQ8bW7oMVQtZgXagZSaw.png"/></div></div></figure><p id="4b54" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">基于规则的系统远非完美，NLP 的未来可能会将规则与机器学习和深度学习技术结合起来。</p><p id="8ee4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最终，我们的目标是让 NLP 不仅高效，而且让<em class="mh">更容易</em>(或者至少更容易)。这意味着降低专业知识的前期要求。不仅仅是机器学习，语言学也是如此。</p><p id="fa4e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我认为这篇文章有助于做到这一点。</p></div></div>    
</body>
</html>