<html>
<head>
<title>Learn Enough Python to be Useful Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习足够有用的 Python 第 2 部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/learn-enough-python-to-be-useful-part-2-34f0e9e3fc9d?source=collection_archive---------17-----------------------#2019-02-07">https://towardsdatascience.com/learn-enough-python-to-be-useful-part-2-34f0e9e3fc9d?source=collection_archive---------17-----------------------#2019-02-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="cc0c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何使用 if __name__ == "__main__ <code class="fe kf kg kh ki b"> ”</code></h2></div><p id="a2c9" class="pw-post-body-paragraph kj kk iq kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">本文是帮助您熟悉 Python 脚本的系列文章之一。它面向数据科学家和任何 Python 编程新手。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/6696acd6dc996ca852e1ddffbf956b1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A5WtEA4Hn0ETIgu8-XRySg.jpeg"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">cat_breed = maine_coon</figcaption></figure><p id="84ec" class="pw-post-body-paragraph kj kk iq kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated"><code class="fe kf kg kh ki b">if __name__ == "__main__":</code>是你在 Python 脚本中看到的那些经常不被解释的东西之一。你可能已经看过上百个关于 Python 列表理解的教程，但是 Python 脚本约定却没有得到足够的重视。在这篇文章中，我将帮助你把这些点联系起来。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/679a88a46dfc3899ecd3311371a9eed3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QnCy-4XoIlBOaGAcq_ACyw.jpeg"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">state = maine</figcaption></figure><p id="1c7e" class="pw-post-body-paragraph kj kk iq kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated"><code class="fe kf kg kh ki b">if __name__ == "__main__":</code>确保<em class="lv"> if </em>块中的代码只有在找到它的文件被直接运行时才运行。让我们来分析一下这是如何工作的。</p><h1 id="84a3" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">这是什么？</h1><p id="6b44" class="pw-post-body-paragraph kj kk iq kl b km mo jr ko kp mp ju kr ks mq ku kv kw mr ky kz la ms lc ld le ij bi translated">每个 Python 文件都有一个名为<code class="fe kf kg kh ki b">__name__</code>的特殊属性。</p><p id="cb67" class="pw-post-body-paragraph kj kk iq kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">测试一下。创建一个以<code class="fe kf kg kh ki b">print(__name__)</code>为唯一内容的 Python 文件<em class="lv"> my_script.py </em>。然后在您的终端中运行<code class="fe kf kg kh ki b">python my_script.py</code>。<code class="fe kf kg kh ki b">__main__</code>你将会看到。</p><p id="bea7" class="pw-post-body-paragraph kj kk iq kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">注意，<em class="lv">名字</em>两边都是双下划线。那些被称为<em class="lv"> dunders </em>的是<em class="lv">双下划线</em>。他们也被称为<em class="lv">魔法方法</em>或<em class="lv">特殊方法</em>。</p><p id="ddf2" class="pw-post-body-paragraph kj kk iq kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">您可能熟悉来自<em class="lv"> __init__ </em>方法的 dunders，该方法用于初始化您创建的类的对象。</p><h1 id="e1e9" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">为什么要用 __main__？</h1><p id="cfc9" class="pw-post-body-paragraph kj kk iq kl b km mo jr ko kp mp ju kr ks mq ku kv kw mr ky kz la ms lc ld le ij bi translated">如果您将文件作为模块导入，则代码不会运行。只有当该文件作为自身运行时，代码才会运行。</p><p id="2ada" class="pw-post-body-paragraph kj kk iq kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">看看这个例子。代码可从<a class="ae mt" href="https://github.com/discdiver/name-equals-main" rel="noopener ugc nofollow" target="_blank"> GitHub </a>获得。</p><pre class="lg lh li lj gt mu ki mv mw aw mx bi"><span id="1fe4" class="my lx iq ki b gy mz na l nb nc"># my_script<br/>print(f"My __name__ is: {__name__}")</span><span id="6a10" class="my lx iq ki b gy nd na l nb nc">def i_am_main():<br/>    print("I'm main!")</span><span id="77ae" class="my lx iq ki b gy nd na l nb nc">def i_am_imported():<br/>    print("I'm imported!")</span><span id="fc97" class="my lx iq ki b gy nd na l nb nc">if __name__ == "__main__":<br/>    i_am_main()<br/>else:<br/>    i_am_imported()</span></pre><p id="ea75" class="pw-post-body-paragraph kj kk iq kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">使用<code class="fe kf kg kh ki b">python my_script.py</code>在终端中运行程序会导致</p><pre class="lg lh li lj gt mu ki mv mw aw mx bi"><span id="588d" class="my lx iq ki b gy mz na l nb nc">My __name__ is: __main__<br/>I'm main!</span></pre><p id="e6f3" class="pw-post-body-paragraph kj kk iq kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">好的。这正是我们所期待的。😀<code class="fe kf kg kh ki b">__name__</code>被设置为<code class="fe kf kg kh ki b">__main__</code>,因为文件本身被执行。</p><p id="36f8" class="pw-post-body-paragraph kj kk iq kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">让我们看看如果导入文件会发生什么。用<code class="fe kf kg kh ki b">python</code>在终端中启动一个 IPython 会话，然后用<code class="fe kf kg kh ki b">import my_script</code>导入文件(用 no。py 扩展名)。这会产生以下输出:</p><pre class="lg lh li lj gt mu ki mv mw aw mx bi"><span id="044a" class="my lx iq ki b gy mz na l nb nc">My __name__ is: my_script<br/>I'm imported!</span></pre><p id="4ccd" class="pw-post-body-paragraph kj kk iq kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">狂野！文件导入后，<code class="fe kf kg kh ki b">__name__</code>成为文件名<code class="fe kf kg kh ki b">my_script</code>！又不是<code class="fe kf kg kh ki b"><em class="lv">__</em>main<em class="lv">__</em></code>！</p><p id="be3a" class="pw-post-body-paragraph kj kk iq kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">所执行的功能是<em class="lv"> else </em> bloc: <code class="fe kf kg kh ki b">i_am_imported</code>中的功能。</p><p id="93a4" class="pw-post-body-paragraph kj kk iq kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">当您创建一个真正的模块导入到您的程序中时，这个功能是很有用的。测试时也很方便。在这里阅读更多<a class="ae mt" href="https://stackoverflow.com/a/22493194/4590385" rel="noopener ugc nofollow" target="_blank"/>。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/e1c84c220828b08d6cf0564ffd37ef64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*tg6GBcV2HmmXqQqmU_94gA.jpeg"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">another_cat = maine_coon</figcaption></figure><h2 id="a9f8" class="my lx iq bd ly nf ng dn mc nh ni dp mg ks nj nk mi kw nl nm mk la nn no mm np bi translated">包装</h2><p id="7116" class="pw-post-body-paragraph kj kk iq kl b km mo jr ko kp mp ju kr ks mq ku kv kw mr ky kz la ms lc ld le ij bi translated">希望这个解释能让你在使用 Python 脚本时更加得心应手。去和<code class="fe kf kg kh ki b">if __name__ == "__main__":</code>玩玩，找个人解释一下，巩固你的知识。</p><p id="eb67" class="pw-post-body-paragraph kj kk iq kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">如果您对 Python 脚本的更多技巧感兴趣，请查看我写的这篇关于<code class="fe kf kg kh ki b">argparse</code>的文章。</p><div class="nq nr gp gr ns nt"><a rel="noopener follow" target="_blank" href="/learn-enough-python-to-be-useful-argparse-e482e1764e05"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">学习足够有用的 Python:arg parse</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">如何在脚本中加入命令行参数</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">towardsdatascience.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh lp nt"/></div></div></a></div><p id="1d1c" class="pw-post-body-paragraph kj kk iq kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">我正在撰写更多关于跳出 Jupyter 笔记本的文章，所以请关注<a class="ae mt" href="https://medium.com/@jeffhale" rel="noopener">我</a>并加入我的<a class="ae mt" href="https://dataawesome.com" rel="noopener ugc nofollow" target="_blank">数据惊人邮件列表</a>，确保你不会错过它们！🎉</p><p id="0994" class="pw-post-body-paragraph kj kk iq kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">我希望这个指南对你有所帮助。如果你有，请在你最喜欢的社交媒体渠道上分享，这样其他人也可以找到它。😃</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><a href="https://dataawesome.com"><div class="ab gu cl oi"><img src="../Images/ba32af1aa267917812a85c401d1f7d29.png" data-original-src="https://miro.medium.com/v2/format:webp/1*oPkqiu1rrt-hC_lDMK-jQg.png"/></div></a></figure><p id="d7bc" class="pw-post-body-paragraph kj kk iq kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">感谢阅读！👏</p></div></div>    
</body>
</html>