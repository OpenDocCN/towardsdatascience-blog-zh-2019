<html>
<head>
<title>Turning a Raspberry Pi 3B+ into a powerful object recognition edge server with Intel Movidius NCS2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">借助英特尔 Movidius NCS2，将 Raspberry Pi 3B+变成强大的对象识别边缘服务器</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/turning-a-raspberry-pi-3b-into-an-object-recognition-server-with-intel-movidius-ncs2-8dcfebebb2d6?source=collection_archive---------9-----------------------#2019-05-19">https://towardsdatascience.com/turning-a-raspberry-pi-3b-into-an-object-recognition-server-with-intel-movidius-ncs2-8dcfebebb2d6?source=collection_archive---------9-----------------------#2019-05-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9e4d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我们通过部署<a class="ae kf" href="https://github.com/chuanqi305/MobileNet-SSD" rel="noopener ugc nofollow" target="_blank"> MobileNet-SSD </a>架构，使用<a class="ae kf" href="https://software.intel.com/en-us/openvino-toolkit" rel="noopener ugc nofollow" target="_blank">英特尔 OpenVINO </a>平台，将 raspberry PI 3B+变成一个对象识别服务器。</h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/9b4d9a58de3d51d9c882784d942cbb39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8XL5Xjv2KICRAabJN8TBKA.jpeg"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk">The Intel NCS2 attached to a Raspberry Pi Model 3B+, the hardware used in this tutorial</figcaption></figure><p id="4125" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这一部分中，我们将在英特尔神经计算棒中使用一个易于编译的神经网络，以便它能够接收 Base64 编码的图像，并将它们转换为边界框预测。此外，还将提供一个向 PI 发送摄像机输入的前端示例。请不要忘记查看由 Mattio Varile 撰写的关于如何部署和测试模型的精彩 w <a class="ae kf" rel="noopener" target="_blank" href="/speed-up-predictions-on-low-power-devices-using-neural-compute-stick-and-openvino-98f3ae9dcf41">评论。</a></p><ul class=""><li id="10a9" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">预训练和编译的模型将在附件中提供。</li><li id="68ec" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">为自定义数据集训练和编译模型以及前端的更多细节将是另一个故事的一部分，敬请关注！</li></ul><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi mg"><img src="../Images/619f569150254ebfddb242c7e76951a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jyQx9TnZfLaLkxjU_5pA6w.png"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk">System diagram visualizing the flow of information via numbers. Click here for the draw.io diagram: <a class="ae kf" href="https://drive.google.com/file/d/17yTw1YnhjOJh_EjIYLqGVYuYjnB8pKyl/view?usp=sharing" rel="noopener ugc nofollow" target="_blank">https://drive.google.com/file/d/17yTw1YnhjOJh_EjIYLqGVYuYjnB8pKyl/view?usp=sharing</a></figcaption></figure><p id="c200" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kf" href="https://medium.com/p/8dcfebebb2d6#2e40" rel="noopener"> 0。要求</a></p><ul class=""><li id="c091" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><a class="ae kf" href="https://medium.com/p/8dcfebebb2d6#e6df" rel="noopener"> 1。准备树莓酱</a></li><li id="ce07" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kf" href="https://medium.com/p/8dcfebebb2d6#a219" rel="noopener"> 1.1。安装 NOOBS 镜像</a></li><li id="d868" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kf" href="https://medium.com/p/8dcfebebb2d6#73a4" rel="noopener"> 1.2。安装最新的英特尔 OpenVINO 软件</a></li><li id="8dde" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kf" href="https://medium.com/p/8dcfebebb2d6#ea8f" rel="noopener"> 1.3。在神经计算棒上部署对象检测</a></li><li id="1045" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kf" href="https://medium.com/p/8dcfebebb2d6#071e" rel="noopener"> 3。运行服务器并设置开机自动启动</a></li><li id="f7ac" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kf" href="https://medium.com/p/8dcfebebb2d6#05ea" rel="noopener"> 4。使用示例 GUI 部署我们的服务器</a></li><li id="16ec" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kf" href="https://medium.com/p/8dcfebebb2d6#4ad3" rel="noopener"> 5。结论和展望</a></li></ul><p id="6c9e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">更新 1，2019 年 5 月 29 日:现在包括系统图，<br/>更新 2，2019 年 8 月 5 日:pybase64 因未使用而从要求中删除</p><h1 id="2e40" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">0.要求</h1><ul class=""><li id="3277" class="ls lt iq ky b kz mz lc na lf nb lj nc ln nd lr lx ly lz ma bi translated">树莓派，最好是 3B+型，但其他型号也可以<a class="ae kf" href="https://www.raspberrypi.org/products" rel="noopener ugc nofollow" target="_blank">https://www.raspberrypi.org/products</a></li><li id="e134" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">英特尔 NCS 2<a class="ae kf" href="https://software.intel.com/en-us/neural-compute-stick" rel="noopener ugc nofollow" target="_blank">https://software.intel.com/en-us/neural-compute-stick</a></li></ul><p id="fc3d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">可选择的</p><ul class=""><li id="3e3d" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">一些 USB 摄像头</li><li id="78ce" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">一些其他的计算机来运行前端</li></ul><h1 id="e6df" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">1.准备树莓酱</h1><h1 id="a219" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">1.1.安装 NOOBS 映像</h1><p id="8726" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">在 FAT32 格式的微型 SD 卡上刷新 NOOBS 图像。<a class="ae kf" href="https://www.raspberrypi.org/downloads/" rel="noopener ugc nofollow" target="_blank">https://www.raspberrypi.org/downloads/</a></p><p id="868a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正常启动 USB 镜像，设置账户密码，连接互联网等…</p><p id="dbe6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">确保同时安装 python3、pip3 和 wget</p><pre class="kh ki kj kk gt nh ni nj nk aw nl bi"><span id="dcd3" class="nm mi iq ni b gy nn no l np nq">sudo apt-get update<br/>sudo apt-get install python3-picamera python3-pip wget</span></pre><h1 id="73a4" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">1.2.安装最新的英特尔 OpenVINO 软件</h1><p id="3307" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">下载 OpenVINO 工具包</p><pre class="kh ki kj kk gt nh ni nj nk aw nl bi"><span id="4661" class="nm mi iq ni b gy nn no l np nq">cd ~/Downloads &amp;&amp; wget <a class="ae kf" href="https://download.01.org/opencv/2019/openvinotoolkit/l_openvino_toolkit_raspbi_p_2019.1.094.tgz" rel="noopener ugc nofollow" target="_blank">https://download.01.org/opencv/2019/openvinotoolkit/l_openvino_toolkit_raspbi_p_2019.1.094.tgz</a></span></pre><p id="fda1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我建议遵循以下指南，直到(不包括)“构建和运行对象检测示例”一节。</p><div class="nr ns gp gr nt nu"><a href="https://docs.openvinotoolkit.org/latest/_docs_install_guides_installing_openvino_raspbian.html" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd ir gy z fp nz fr fs oa fu fw ip bi translated">为 Raspbian*操作系统安装 OpenVINO 工具包——open vino 工具包</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">open vino toolkit 以前被称为英特尔计算机视觉软件开发套件。这些步骤适用于 32 位 Raspbian* 9 操作系统…</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">docs.openvinotoolkit.org</p></div></div></div></a></div><p id="da0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">成功完成所有操作后，当您打开一个新的终端时，您应该会看到以下输出:</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi od"><img src="../Images/3a09d724665727242828e6dc13e73d1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SKd_7EcN7IRWhNdJJh8KXg.jpeg"/></div></div></figure><h1 id="ea8f" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">1.3.在神经计算棒上部署对象检测</h1><p id="6ab5" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">我们将使用 flask 服务器来接收用于预测的编码图像。你可以在下面的 github 库【https://github.com/AlexeyGy/NCS2-server T2】找到所有的代码</p><p id="95e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">a)首先在您的主文件夹中创建一个名为 detection_server 的新文件夹。</p><pre class="kh ki kj kk gt nh ni nj nk aw nl bi"><span id="96bb" class="nm mi iq ni b gy nn no l np nq">mkdir ~/detection_server &amp;&amp; cd detection_server</span></pre><p id="88f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">b)用以下内容创建一个 requirements.txt 文件。该文件包含所需的包。</p><ul class=""><li id="6b02" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">flask 是网络服务器，flask-cors 是传递 cors 头的包装器(跨站点脚本需要)，更多关于它的<a class="ae kf" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" rel="noopener ugc nofollow" target="_blank">在这里</a></li><li id="52ed" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">注意 OpenCV (cv2)不在这个包列表中，因为这个包是在步骤 1.2 中与 OpenVINO 一起安装的。这是因为 OpenVINO 提供了自己的 cv2 风格，包括对 CNN 架构的支持。</li></ul><pre class="kh ki kj kk gt nh ni nj nk aw nl bi"><span id="1a1f" class="nm mi iq ni b gy nn no l np nq">flask-cors<br/>flask</span></pre><p id="8db7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在快跑</p><pre class="kh ki kj kk gt nh ni nj nk aw nl bi"><span id="b8b5" class="nm mi iq ni b gy nn no l np nq">pip3 install -r requirements.txt</span></pre><p id="1939" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">自动安装软件包。</p><p id="6358" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">c)设置服务器启动脚本，创建一个名为 RUN 的文件。嘘</p><p id="e443" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">d)下载预训练的 MobileNet-SSD 架构中间表示文件，该文件可以区分螺钉和 rawl 钉。请继续关注本教程的第二部分，我们将讨论培训。</p><pre class="kh ki kj kk gt nh ni nj nk aw nl bi"><span id="e7ee" class="nm mi iq ni b gy nn no l np nq">mkdir models &amp;&amp; cd models &amp;&amp; wget <a class="ae kf" href="https://github.com/AlexeyGy/NCS2-server/raw/master/models/no_bn.bin" rel="noopener ugc nofollow" target="_blank">https://github.com/AlexeyGy/NCS2-server/raw/master/models/no_bn.bin</a> &amp;&amp; wget <a class="ae kf" href="https://github.com/AlexeyGy/NCS2-server/raw/master/models/labelmap.prototxt" rel="noopener ugc nofollow" target="_blank">https://github.com/AlexeyGy/NCS2-server/raw/master/models/labelmap.prototxt</a> &amp;&amp; wget <a class="ae kf" href="https://raw.githubusercontent.com/AlexeyGy/NCS2-server/master/models/no_bn.xml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/AlexeyGy/NCS2-server/master/models/no_bn.xml</a></span></pre><p id="34de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以看到该架构包含三个文件，一个包含可能标签的 labelmap，一个包含冻结网络权重的. bin 文件和一个包含网络拓扑的. xml 文件。更多信息可以在<a class="ae kf" href="https://software.intel.com/en-us/openvino-toolkit" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/62383feb399cdb40d083b549caabd9a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q9u1hB6Srximw1_d7S2_5w.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk">Intel IR model. Image courtesy of Intel <a class="ae kf" href="https://software.intel.com/sites/default/files/managed/ed/e9/inference-engine-700w-300h.png" rel="noopener ugc nofollow" target="_blank">https://software.intel.com/sites/default/files/managed/ed/e9/inference-engine-700w-300h.png</a></figcaption></figure><p id="278c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">e)现在让我们创建实际的服务器，使用以下内容创建文件 server.py。下面将提供关于各个功能的更多细节。</p><ul class=""><li id="31e7" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">在第 12 行，我们使用英特尔 OpenVino cv2.dnn.readNet 函数读取提供的模型文件</li><li id="765e" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 14 行为我们的计算设置了一个更好的运行目标</li><li id="ba68" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 17- 19 行包含了我们的 flask 服务器的一些标准配置，</li><li id="544c" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 23 行使用 flask-cors 包装器来设置 cors 头，更多信息<a class="ae kf" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" rel="noopener ugc nofollow" target="_blank">在这里</a></li><li id="0ff7" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 25–29 行是可选的，它们为所有不包含正确格式的 jpg 或 png 图像的输入数据设置了一个过滤器</li><li id="f98a" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 31 行为我们的 flask 服务器设置了默认路由，我们接受包含图像的 POST 请求</li><li id="625b" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">除了传递给服务器 s.t .的图像之外，第 37 行还允许我们接受一个阈值。所有低于阈值的预测都不会返回</li><li id="ec2c" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 43 行返回预测结果的 JSON</li><li id="2e95" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 46–50 行中的函数执行实际的图像处理，我们稍后将进入相应的 util_mobilnet.py 文件。以下是对其功能的高级概述<br/> —首先执行特定于 Mobilenet-SSD 架构的预处理和缩放步骤<br/> —然后网络进行推理(第 48-49 行)<br/> —最后执行后处理步骤，包括阈值过滤</li></ul><p id="71e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">f)最后，让我们创建并查看 util_mobilnet.py 文件</p><ul class=""><li id="8cb1" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">第 5 行配置了 mobilnet 需要的尺寸，因为它是在 300x300 的正方形图像上训练的，我们将它设置为我们的尺寸</li><li id="d41f" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">read_labels 函数逐行读取 labelmap 文件来定义支持的类</li><li id="abe5" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 21 行中的预处理函数处理传入图像的颜色和尺寸，mobilnet 需要任意的转换来正确处理图像</li><li id="3f04" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 32 行中的后处理函数检查所有预测，并过滤掉低于阈值的预测，此外，不返回背景预测</li></ul><h1 id="071e" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">3.运行服务器并设置启动时自动启动</h1><p id="1f6c" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">为了最小化 raspberry PI 上的资源使用，我们想要建立一个客户端服务器应用程序，其中 flask 服务器接收图片并返回边界框预测。</p><p id="e7a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我发现自动启动烧瓶的最佳方法是 a)将烧瓶启动添加到。b)使用自动登录将系统设置为自动启动到 cli。</p><p id="e9bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">a)至于将这些行添加到。bashrc 文件，确保将“Downloads”文件夹设置为您下载 OpenVINO 工具包的文件夹</p><p id="2c69" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">b)在终端中运行以下行</p><pre class="kh ki kj kk gt nh ni nj nk aw nl bi"><span id="0681" class="nm mi iq ni b gy nn no l np nq">sudo raspi-config</span></pre><p id="2038" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您将看到以下屏幕，您应该在其中选择选项 3 引导选项/ 1 桌面 CLI / 2 控制台自动登录</p><div class="kh ki kj kk gt ab cb"><figure class="of kl og oh oi oj ok paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><img src="../Images/70e06d22010f69d5b862874bedd9956e.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*xw7COcO4eznZIIWtUgR10Q.jpeg"/></div></figure><figure class="of kl og oh oi oj ok paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><img src="../Images/f29711035e8bbae7b545d83b2e0c6a4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*GGTh5VhCgH3oTuHmdvVqDw.jpeg"/></div></figure><figure class="of kl og oh oi oj ok paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><img src="../Images/3e9017dc9550ae473aa469d7dc5c65a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*OzZG_ifzXXEzzYfhO4WgcA.jpeg"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk ol di om on">select the options as per screenshots</figcaption></figure></div><p id="6a21" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，启动后，你会看到树莓会在端口 5000 上自动启动 flask 服务器，恭喜！</p><h1 id="05ea" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">4.使用示例 GUI 部署我们的服务器</h1><p id="f992" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">以下步骤应该在另一台机器上执行，但是如果您选择在 Raspberry 上运行 GUI，它们也可以在 Raspberry 上执行(这会导致性能降低)。</p><p id="bb20" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">克隆库<a class="ae kf" href="https://github.com/AlexeyGy/NCS2-frontend" rel="noopener ugc nofollow" target="_blank">https://github.com/AlexeyGy/NCS2-frontend</a></p><pre class="kh ki kj kk gt nh ni nj nk aw nl bi"><span id="67e0" class="nm mi iq ni b gy nn no l np nq">git clone <a class="ae kf" href="https://github.com/AlexeyGy/NCS2-frontend" rel="noopener ugc nofollow" target="_blank">https://github.com/AlexeyGy/NCS2-frontend</a></span></pre><p id="93fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">只需运行运行。SH 文件来运行一个简单的 python 服务器。你可以通过 localhost:8000 访问它，但是在你看到任何图像之前，你可能需要让它访问你的相机。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi oo"><img src="../Images/acc7c15a3fa821a8ac6ecb98962ce948.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q2uNyfr0eErBMQ6PgwS9eA.png"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk">permission request</figcaption></figure><p id="7007" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">服务器会将网络摄像头图片发布到地址<a class="ae kf" href="http://192.168.0.2:5000/" rel="noopener ugc nofollow" target="_blank"> http://192.168.0.2:5000/ </a>，如果您使用的不是您的 raspberry，请确保将其定制到您的 raspberry 的地址。</p><p id="319c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我会写另一篇文章，介绍 JavaScript 前端如何确保边界框绘图只有在收到来自我们的 raspberry 服务器的新响应时才会刷新。</p><p id="4718" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">给定的示例 GUI 来自 FIR 的一个试点演示器，我们用它来演示智能合同平台的可能用例。在以后的文章中会有更多的介绍。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi oo"><img src="../Images/759af322adb76a948985f531e3beb2f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F0WBBDO_Jocbz4v7X-sWzg.png"/></div></div></figure><p id="46d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以通过浏览器的 JavaScript 控制台调试设置。</p><h1 id="4ad3" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">5.结论和展望</h1><p id="dd18" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">这是前端和后端一起运行的整个系统的 gif 图:</p><p id="45da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">螺丝和罗尔塞的检测示例</p><p id="6dee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果在两台机器上运行，运行的系统能够传送 60fps 的视频，检测时大约 8 fps。用户体验不会受到影响，因为预测是由 JavaScript 前端以异步方式显示的。我发现太多的检测帧会导致糟糕的用户体验，因为检测更新得太快了！</p><p id="799e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着边缘计算的到来，像<a class="ae kf" href="https://cloud.google.com/edge-tpu/" rel="noopener ugc nofollow" target="_blank">谷歌这样的其他竞争对手也加入了这场竞赛</a>，我们将迎来神经计算棒的一些令人兴奋的未来用例。</p><h2 id="52fe" class="nm mi iq bd mj op oq dn mn or os dp mr lf ot ou mt lj ov ow mv ln ox oy mx oz bi translated">请继续关注培训和前端设计部分。</h2><h1 id="d623" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">资源</h1><ul class=""><li id="78da" class="ls lt iq ky b kz mz lc na lf nb lj nc ln nd lr lx ly lz ma bi translated"><a class="ae kf" rel="noopener" target="_blank" href="/speed-up-predictions-on-low-power-devices-using-neural-compute-stick-and-openvino-98f3ae9dcf41">Mattio Varile 撰写的关于如何部署和测试模型的文章</a></li><li id="e19c" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kf" href="https://software.intel.com/en-us/articles/get-started-with-neural-compute-stick" rel="noopener ugc nofollow" target="_blank">英特尔神经计算棒官方教程</a></li><li id="5531" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kf" href="https://www.pyimagesearch.com/2019/04/08/openvino-opencv-and-movidius-ncs-on-the-raspberry-pi/" rel="noopener ugc nofollow" target="_blank">更多关于 Movidius on Raspberry inc .的信息性能测量</a>作者<a class="ae kf" href="https://www.pyimagesearch.com/author/adrian/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">Adrian rose Brock</strong></a></li></ul></div></div>    
</body>
</html>