<html>
<head>
<title>VAEsemane — A Variational Autoencoder for musical human-robot interaction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">VAEsemane——一种用于音乐人机交互的可变自动编码器</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/vaesemane-a-variational-autoencoder-for-musical-human-robot-interaction-b588ca7b9d12?source=collection_archive---------21-----------------------#2019-04-05">https://towardsdatascience.com/vaesemane-a-variational-autoencoder-for-musical-human-robot-interaction-b588ca7b9d12?source=collection_archive---------21-----------------------#2019-04-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="d8c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">类人机器人解决越来越困难的任务，因为它们稳步提高了与环境智能互动的技能。这个项目的目标是用软件合成器或人形机器人<a class="ae kl" href="https://roboy.org/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">【Roboy】</strong></a><strong class="jp ir">交互式播放音乐。</strong>音乐即兴创作是对当前呈现的音乐序列产生自发反应的行为，要求对乐器和呈现的音乐序列在音调、节奏和和声方面有很高的理解，这使得将这一系统付诸实践尤为困难。</p><p id="f1a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">Google Magenta</strong>(<a class="ae kl" href="https://arxiv.org/abs/1803.05428" rel="noopener ugc nofollow" target="_blank">music vae</a>)和<strong class="jp ir">ETH Zurich</strong>(<a class="ae kl" href="https://arxiv.org/pdf/1809.07600.pdf" rel="noopener ugc nofollow" target="_blank">MIDI-VAE</a>)的研究人员最近一直在研究用软件生成音乐的<a class="ae kl" href="https://arxiv.org/abs/1312.6114" rel="noopener ugc nofollow" target="_blank">可变自动编码器(VAEs) </a>。乔治亚理工大学展示了一个软硬件结合的系统，名为<a class="ae kl" href="https://www.shimonrobot.com/" rel="noopener ugc nofollow" target="_blank">“西蒙机器人】</a>。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/997febcbea64b278148e80bf9e69588b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ACAYBzidynRk87cJ.jpg"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Fig. 1: Shimon robot developed at Georgia Tech University [Source: <a class="ae kl" href="https://www.shimonrobot.com/" rel="noopener ugc nofollow" target="_blank">https://www.shimonrobot.com/</a>]</figcaption></figure><p id="d626" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于这个项目，VAEs 被选为即兴创作的基础。VAEs 有一个很大的好处，那就是它们产生了一个连续的潜在空间，允许重建和解释数据。在 VAE 被训练之后，VAE 的解码器可以用来随机生成数据，该数据类似于它通过从单位高斯采样而被训练的数据。这种随机生成过程显示在下面的一个视频示例中。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="f739" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">该系统</h1><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mh"><img src="../Images/84b7a8bb52bc81a289c2384d135c9821.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e174QpSpDW5O_Z_1Se2xfQ.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Fig. 2: A full framework for robotic improvisation in real time</figcaption></figure><p id="dd65" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">系统等待音乐序列的输入，以即兴序列来响应。它被分成所示的模块(见图 2)。任何<strong class="jp ir"> MIDI 控制器、键盘或合成器</strong>都可以用来播放音乐序列，为系统提供现场输入。该序列由 VAE 的<strong class="jp ir">编码器处理，将其嵌入潜在空间。音乐序列的潜在表示也称为嵌入，可以使用称为<strong class="jp ir">潜在空间修改器</strong>的图形用户界面(GUI)来重建或修改。GUI 允许修改 100 维潜在向量的值，创建由<strong class="jp ir"> VAE 解码器</strong>解码的新潜在向量，以形成新的音乐序列。可选地，序列可以被音符平滑器模块平滑，该模块将短 MIDI 音符视为噪声，并根据用户定义的阈值删除它们。即兴序列可以由<strong class="jp ir">软件合成器</strong>演奏，或者通过机器人操作系统(ROS)发送给模拟的<strong class="jp ir">机器人 Roboy </strong>，以便机器人在木琴上演奏。</strong></p><p id="a26f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该系统使用卷积 VAE，而不是使用递归 VAE(如 Google Magenta 和 ETH Zurich 所示)。图 3 显示了 VAE 的<strong class="jp ir">编码器。</strong>解码器由编码器的逆映射组成。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mj"><img src="../Images/4ad0b38afae2fb26f8888778201ab32b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OrZR7-5FmMano24O05-uGw.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Fig. 3: Architecture of the VAE encoder (adapted from <a class="ae kl" href="https://arxiv.org/abs/1706.04486" rel="noopener ugc nofollow" target="_blank">Bretan et al. 2017</a>). The decoder consists of the inverse mapping without the reparametrization step. The figure was created using <a class="ae kl" href="http://alexlenail.me/NN-SVG/" rel="noopener ugc nofollow" target="_blank">NN-SVG</a>.</figcaption></figure><p id="7b35" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用<a class="ae kl" href="https://pytorch.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> PyTorch </strong> </a>实现 VAE，并用<a class="ae kl" href="https://arxiv.org/abs/1810.12247" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> MAESTRO 数据集</strong> </a>进行训练。图 3 显示了所有的卷积运算。在一个音乐序列被嵌入到一个<strong class="jp ir"> 100 维潜在向量之前有 4 个密集层。</strong>解码器由编码器的逆映射组成，没有重新参数化步骤。此外，批处理标准化和 ELU 激活函数适用于每一层。描述这个框架核心的 VAE 模型的代码如下所示。你可以在这里  <strong class="jp ir">找到</strong> <a class="ae kl" href="https://github.com/roboy/tss18-robotsinmusicalimprovisation" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">项目的<strong class="jp ir">完整源代码。</strong></strong></a></p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="ef88" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">模拟使用<a class="ae kl" href="https://roboy.org/cardsflow/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> CARDSFlow 框架</strong></a>(cards flow 的源代码<a class="ae kl" href="https://github.com/CARDSflow/CARDSflow" rel="noopener ugc nofollow" target="_blank">这里</a>，论文<a class="ae kl" href="https://roboy.org/wp-content/uploads/2018/11/C__1807_Gazebo_Cable_Driven_Rob.pdf" rel="noopener ugc nofollow" target="_blank">这里</a>)这是 Roboy 项目(与香港中文大学合作)开发的肌肉骨骼机器人的设计、模拟和控制的工作流。图 4 显示了从 Autodesk Fusion 360 中的机器人设计到实际硬件控制的流程。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mm"><img src="../Images/f175ef70791bfc61fbafd679ea443e65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T05JyasL9jdjqMFyPaGCIA.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Fig. 4: CARDSFlow pipeline. It consists of (from left to right): 1) Robot design in Autodesk Fusion 360, 2) Simulation in Gazebo, 3) Muscle control through CASPR in Gazebo and 4) Control of the real robot.</figcaption></figure><p id="6c83" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下图(图 5)展示了在 ROS 的可视化工具 RVIZ 中模拟 Roboy 机器人的设置。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mn"><img src="../Images/3fd45344e4d6f83f52fb9b9128dab576.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jt-esu3GwKOx8lWPgeBBYA.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Fig. 5: Setup of Simulation in RVIZ.</figcaption></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="2305" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">例子</h1><p id="f481" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">有五个典型的视频。其中三个展示了 VAE 模型在软件中生成音乐<strong class="jp ir">，而两个视频<strong class="jp ir">展示了机器人进行即兴创作</strong>。GUI，也称为潜在空间修改器，有 100 个数字电位计来修改当前嵌入序列的潜在向量。修改潜在向量导致解释或即兴创作，因为它略微改变了当前嵌入序列的高斯分布。在包括模拟 Roboy 机器人的示例中，绿色轮廓显示了机器人击打木琴球杆时的目标姿势。注:模拟机器人在演奏木琴时会跳过 MIDI 音符。这就是为什么它播放的音符比软件中生成的音符少的原因。</strong></p><h1 id="2d0e" class="lj lk iq bd ll lm mt lo lp lq mu ls lt lu mv lw lx ly mw ma mb mc mx me mf mg bi translated">生成模式</h1><p id="b2a5" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">第一个示例显示了 VAE 模型在“生成模式”下的性能。在这种模式下，从单位高斯分布中随机采样一个潜在向量<strong class="jp ir">，然后由 VAE 解码器<strong class="jp ir">解码以生成看不见的音乐序列</strong>。</strong></p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="my ml l"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Variational Autoencoder — “Generate Mode” (Software Generation)</figcaption></figure><h1 id="9186" class="lj lk iq bd ll lm mt lo lp lq mu ls lt lu mv lw lx ly mw ma mb mc mx me mf mg bi translated"><strong class="ak">交互模式</strong></h1><p id="8d3b" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">下面的例子使用了“交互模式”,它允许人机交互。软件/机器人等待人类输入，并基于当前输入序列产生音乐响应。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="my ml l"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Variational Autoencoder — “Interact Mode” (Software Improvisation)</figcaption></figure><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mz ml l"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Variational Autoencoder and Roboy robot — “Interact Mode” (Robotic Improvisation)</figcaption></figure><h1 id="16a2" class="lj lk iq bd ll lm mt lo lp lq mu ls lt lu mv lw lx ly mw ma mb mc mx me mf mg bi translated">无尽模式</h1><p id="0277" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">下面的例子显示了<strong class="jp ir">“无休止模式”</strong>，它等待人工输入，然后根据顺序开始播放音乐，直到你停止它。当前生成的序列(从 VAE 解码器输出)被馈送到输入端以产生解释。除了为软件/机器人即兴创作提供指导的第一个序列之外，没有其他互动。通过改变数字电位计的值，您可以遍历已学习的潜在空间，从而听到 VAE 模型学习了什么。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="my ml l"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Variational Autoencoder — “Endless Mode” (Software Improvisation)</figcaption></figure><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mz ml l"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Variational Autoencoder and Roboy robot — “Endless Mode” (Robotic Improvisation)</figcaption></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="2beb" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">机器人项目</h1><p id="97f3" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">Roboy 项目是一个用于肌肉骨骼机器人开发的<strong class="jp ir">开源平台</strong>，其目标是将人形机器人推进到机器人和人体一样好的状态。<strong class="jp ir"> Roboy </strong>从其他机器人中脱颖而出，因为它是由模仿人类肌肉和肌腱的电机和肌腱驱动的，而不是每个关节中的电机。查看机器人项目<a class="ae kl" href="https://roboy.org" rel="noopener ugc nofollow" target="_blank">网站</a>或<a class="ae kl" href="https://github.com/Roboy" rel="noopener ugc nofollow" target="_blank"> Github 账户</a>以获得更多信息。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi na"><img src="../Images/d492b831149a8795c7ce4697d1e20e31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fcdOaBAUujWCY5UF.jpg"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Chest of Roboy 2.0 [Source: <a class="ae kl" href="https://roboy.org" rel="noopener ugc nofollow" target="_blank">https://roboy.org</a>]</figcaption></figure></div></div>    
</body>
</html>