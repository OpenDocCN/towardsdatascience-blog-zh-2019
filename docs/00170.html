<html>
<head>
<title>What’s __init__ for me?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对我来说 __init__ 是什么？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/whats-init-for-me-d70a312da583?source=collection_archive---------2-----------------------#2019-01-08">https://towardsdatascience.com/whats-init-for-me-d70a312da583?source=collection_archive---------2-----------------------#2019-01-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="960f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">设计 Python 包导入模式</h2></div><p id="8111" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我最近有几次关于 Python 打包的谈话，特别是关于构造<code class="fe lb lc ld le b">import</code>语句来访问包的各种模块。这是我在<a class="ae lf" href="https://deppen8.github.io/posts/2018/09/python-packaging/" rel="noopener ugc nofollow" target="_blank">组织</a> <code class="fe lb lc ld le b"><a class="ae lf" href="https://deppen8.github.io/posts/2018/09/python-packaging/" rel="noopener ugc nofollow" target="_blank">leiap</a></code> <a class="ae lf" href="https://deppen8.github.io/posts/2018/09/python-packaging/" rel="noopener ugc nofollow" target="_blank">包</a>时不得不做的大量调查和实验。尽管如此，我还没有看到各种场景中最佳实践的好指南，所以我想在这里分享一下我的想法。</p><h1 id="bb05" class="lg lh iq bd li lj lk ll lm ln lo lp lq jw lr jx ls jz lt ka lu kc lv kd lw lx bi translated">导入模式</h1><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi ly"><img src="../Images/6c306c02dcb79adc1f85f56eabd1a369.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vUwIa0VdrWLjfThI"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Photo by <a class="ae lf" href="https://unsplash.com/@rocinante_11?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mick Haupt</a> on <a class="ae lf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="32a6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">设计用户如何与模块交互的关键是软件包的<code class="fe lb lc ld le b">__init__.py</code>文件。这将定义用<code class="fe lb lc ld le b">import</code>语句引入名称空间的内容。</p><h1 id="25c2" class="lg lh iq bd li lj lk ll lm ln lo lp lq jw lr jx ls jz lt ka lu kc lv kd lw lx bi translated">模块</h1><p id="9172" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">出于几个原因，将代码分成更小的模块通常是个好主意。主要地，模块可以包含与特定一致主题相关的所有代码(例如，所有 I/O 功能)，而不会被与完全不同的东西(例如，绘图)相关的代码弄得混乱。由于这个原因，大班得到一个专用模块是很常见的(例如，<code class="fe lb lc ld le b">geopandas</code>中的<code class="fe lb lc ld le b">geodataframe.py</code>)。其次，将代码划分成适当的逻辑单元会使其更容易阅读和理解。</p><p id="74e7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，对于<em class="mt">开发者</em>来说好的模块结构对于<em class="mt">用户</em>来说可能是也可能不是好的模块结构。在某些情况下，用户可能不需要知道包下面有各种模块。在其他情况下，可能有充分的理由让用户明确地只要求他们需要的模块。这就是我在这里想要探索的:不同的用例是什么，它们需要包开发人员采用什么方法。</p><h1 id="3dcc" class="lg lh iq bd li lj lk ll lm ln lo lp lq jw lr jx ls jz lt ka lu kc lv kd lw lx bi translated">一个示例包</h1><p id="4349" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">Python 包有多种结构，但是让我们在这里创建一个简单的演示包，我们可以在所有的例子中使用它。</p><pre class="lz ma mb mc gt mu le mv mw aw mx bi"><span id="65ab" class="my lh iq le b gy mz na l nb nc">/src<br/>    /example_pkg<br/>        __init__.py<br/>        foo.py<br/>        bar.py<br/>        baz.py<br/>    setup.py<br/>    README.md<br/>    LICENSE</span></pre><p id="9a94" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它由三个模块组成:<code class="fe lb lc ld le b">foo.py</code>、<code class="fe lb lc ld le b">bar.py</code>和<code class="fe lb lc ld le b">baz.py</code>，每个模块都有一个单独的函数，打印该函数所在模块的名称。</p><h2 id="f2b4" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated">foo.py</h2><pre class="lz ma mb mc gt mu le mv mw aw mx bi"><span id="211c" class="my lh iq le b gy mz na l nb nc">def foo_func():<br/>    print(‘this is a foo function’)</span></pre><h2 id="2fe0" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated">bar.py</h2><pre class="lz ma mb mc gt mu le mv mw aw mx bi"><span id="dda9" class="my lh iq le b gy mz na l nb nc">def bar_func():<br/>    print(‘this is a bar function’)</span></pre><h2 id="09eb" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated">baz.py</h2><pre class="lz ma mb mc gt mu le mv mw aw mx bi"><span id="d52a" class="my lh iq le b gy mz na l nb nc">def baz_func():<br/>    print(‘this is a baz function’)</span></pre><h1 id="a373" class="lg lh iq bd li lj lk ll lm ln lo lp lq jw lr jx ls jz lt ka lu kc lv kd lw lx bi translated">你的杂货店守则</h1><p id="2bea" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">现在是承认谈论<code class="fe lb lc ld le b">import</code>语句和包结构可能很难理解的时候了，尤其是在文本中。为了让事情更清楚，让我们把 Python 包想象成一个杂货店，把用户想象成购物者。作为开发商，你是商店的所有者和管理者。你的工作是想出如何建立你的商店，让你为你的顾客提供最好的服务。您的<code class="fe lb lc ld le b">__init__.py</code>文件的结构将决定设置。下面，我将介绍建立该文件的三种可选方法:普通商店、便利商店和在线商店。</p><h1 id="093b" class="lg lh iq bd li lj lk ll lm ln lo lp lq jw lr jx ls jz lt ka lu kc lv kd lw lx bi translated"><strong class="ak">综合商店</strong></h1><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi no"><img src="../Images/3da4e788ee8cd77185f98ca7a7283e6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bix8LKFmcvLdF0k_8GKCsg.jpeg"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Photo by <a class="ae lf" href="https://unsplash.com/@rocinante_11?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Mick Haupt</a> on <a class="ae lf" href="https://unsplash.com/s/visual/9b8309e3-2c1c-4c5b-b161-fd7dc6e587ca?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b791" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个场景中，用户可以在<code class="fe lb lc ld le b">import example_pkg</code>上立即访问一切。在他们的代码中，他们只需要键入包名和他们想要的类、函数或其他对象，而不管它位于源代码的哪个模块中。</p><p id="c0b5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个场景就像一个旧时代的普通商店。顾客一进门，就能看到所有商品毫不费力地摆放在商店里的箱子和货架上。</p><h2 id="6ed3" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated">在幕后</h2><pre class="lz ma mb mc gt mu le mv mw aw mx bi"><span id="2a78" class="my lh iq le b gy mz na l nb nc"># __init__.py<br/>from .foo import *<br/>from .bar import *<br/>from .baz import *</span></pre><h2 id="8c71" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated">用户实现</h2><pre class="lz ma mb mc gt mu le mv mw aw mx bi"><span id="18f1" class="my lh iq le b gy mz na l nb nc">import example_pkg</span><span id="618d" class="my lh iq le b gy np na l nb nc">example_pkg.foo_func()<br/>example_pkg.bar_func()<br/>example_pkg.baz_func()</span></pre><h2 id="f65d" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated"><strong class="ak">优点</strong></h2><ul class=""><li id="270e" class="nq nr iq kh b ki mo kl mp ko ns ks nt kw nu la nv nw nx ny bi translated">例如，用户不需要知道模块名或记住哪个功能在哪个模块中。他们只需要包名和函数名。在综合商店里，所有的产品都以最小的标识陈列着。顾客不需要知道去哪个通道。</li><li id="1b78" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">导入顶级包后，用户可以访问任何功能。所有的东西都陈列出来了。</li><li id="23c8" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">Tab 补全只需<code class="fe lb lc ld le b">example_pkg.&lt;TAB&gt;</code>就能给你一切。制表就像杂货店的杂货商，他知道所有东西的确切位置，并且乐于提供帮助。</li><li id="e974" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">当新特性被添加到模块中时，你不需要更新任何<code class="fe lb lc ld le b">import</code>语句；它们将自动包含在内。在一般的商店里，没有花哨的招牌可以换。只要在架子上放一个新的项目。</li></ul><h2 id="1931" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated"><strong class="ak">缺点</strong></h2><ul class=""><li id="fd34" class="nq nr iq kh b ki mo kl mp ko ns ks nt kw nu la nv nw nx ny bi translated">要求所有函数和类必须唯一命名(即在<code class="fe lb lc ld le b">foo</code>和<code class="fe lb lc ld le b">bar</code>模块中都没有名为<code class="fe lb lc ld le b">save()</code>的函数)。你不想把苹果放在两个不同的箱子里，让你的顾客感到困惑。</li><li id="003b" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">如果包很大，它会给名称空间增加很多东西，并且(取决于很多因素)会减慢速度。一家普通商店可能有许多个人顾客可能不想要的小杂物。这可能会让您的客户不知所措。</li><li id="228d" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">需要更多的努力和警惕来让一些元素远离用户。例如，您可能需要使用下划线来防止函数导入(例如，<code class="fe lb lc ld le b">_function_name()</code>)。大多数普通商店没有一个大的储藏区来存放扫帚和拖把之类的东西；这些项目对客户是可见的。即使他们不太可能拿起扫帚开始扫你的地板，你也可能不希望他们这样做。在这种情况下，您必须采取额外的措施来隐藏这些供应品。</li></ul><h2 id="8ddf" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated"><strong class="ak">建议</strong></h2><ul class=""><li id="89e0" class="nq nr iq kh b ki mo kl mp ko ns ks nt kw nu la nv nw nx ny bi translated">当很难预测典型用户的工作流程时使用(例如像<code class="fe lb lc ld le b">pandas</code>或<code class="fe lb lc ld le b">numpy</code>这样的通用包)。这是一般商店的“一般”部分。</li><li id="8092" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">当用户可能经常在不同模块之间来回切换时使用(例如，<code class="fe lb lc ld le b">leiap</code>包)</li><li id="1fec" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">当函数名和类名描述性很强且容易记忆，而指定模块名不会提高可读性时使用。如果你的产品是你熟悉的东西，比如水果和蔬菜，你就不需要很多标牌；顾客会很容易发现问题。</li><li id="355a" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">仅使用几个模块。如果有许多模块，新用户在文档中找到他们想要的功能会更加困难。如果你的综合商店太大，顾客将无法找到他们想要的东西。</li><li id="bdc3" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">在可能频繁添加或移除对象时使用。在普通商店添加和移除产品很容易，不会打扰顾客。</li></ul><h2 id="a0a6" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated"><strong class="ak">众所周知的例子</strong></h2><ul class=""><li id="c55b" class="nq nr iq kh b ki mo kl mp ko ns ks nt kw nu la nv nw nx ny bi translated"><code class="fe lb lc ld le b">pandas</code></li><li id="401b" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated"><code class="fe lb lc ld le b">numpy</code>(增加了复杂性)</li><li id="68cd" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated"><code class="fe lb lc ld le b">seaborn</code></li></ul><h1 id="3904" class="lg lh iq bd li lj lk ll lm ln lo lp lq jw lr jx ls jz lt ka lu kc lv kd lw lx bi translated"><strong class="ak">便利店</strong></h1><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi oe"><img src="../Images/47b7f006d95e2d32aa4cffc426bcc0cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1OC87lOo7lzH77uyKOkwOA.jpeg"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Photo by Caio Resende from Pexels</figcaption></figure><p id="29ff" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">到目前为止，最容易阅读和理解的是一般商店场景的变体，我称之为便利店。代替<code class="fe lb lc ld le b">from .module import *</code>，您可以在<code class="fe lb lc ld le b">__init__.py</code>中用<code class="fe lb lc ld le b">from .module import func</code>指定导入什么。</p><p id="5383" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">便利商店和普通商店有许多共同的特点。它的商品选择相对有限，可以随时更换，麻烦最小。顾客不需要很多标牌就能找到他们需要的东西，因为大多数商品都很容易看到。最大的区别是便利店的订单多一点。空盒子、扫帚和拖把都放在顾客看不见的地方，货架上只有待售的商品。</p><h2 id="dc71" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated">在幕后</h2><pre class="lz ma mb mc gt mu le mv mw aw mx bi"><span id="c47b" class="my lh iq le b gy mz na l nb nc"># __init__.py<br/>from .foo import foo_func<br/>from .bar import bar_func<br/>from .baz import baz_func</span></pre><h2 id="ce7e" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated">用户实现</h2><pre class="lz ma mb mc gt mu le mv mw aw mx bi"><span id="e45a" class="my lh iq le b gy mz na l nb nc">import example_pkg</span><span id="136e" class="my lh iq le b gy np na l nb nc">example_pkg.foo_func()<br/>example_pkg.bar_func()<br/>example_pkg.baz_func()</span></pre><h2 id="a7bc" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated"><strong class="ak">优点</strong></h2><p id="db49" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">分享普通商店的所有优势，并增加:</p><ul class=""><li id="2a2c" class="nq nr iq kh b ki kj kl km ko of ks og kw oh la nv nw nx ny bi translated">更容易控制哪些对象对用户可用</li></ul><h2 id="763d" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated"><strong class="ak">缺点</strong></h2><ul class=""><li id="0327" class="nq nr iq kh b ki mo kl mp ko ns ks nt kw nu la nv nw nx ny bi translated">如果有许多功能多样的模块，结果会非常混乱。像普通商店一样，过于杂乱的便利店会让顾客难以浏览。</li><li id="aa1e" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">当新特性被添加到一个模块时(即新的类或函数)，它们也必须被显式地添加到<code class="fe lb lc ld le b">__init__.py</code>文件中。现代 ide 可以帮助检测遗漏的导入，但是仍然很容易忘记。你的便利店有一些最小的标志和价格标签。当你改变书架上的东西时，你必须记得更新这些。</li></ul><h2 id="5017" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated"><strong class="ak">建议</strong></h2><p id="6afd" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">我将在综合商店的建议中增加以下内容:</p><ul class=""><li id="d890" class="nq nr iq kh b ki kj kl km ko of ks og kw oh la nv nw nx ny bi translated">当您的模块或多或少由一个<code class="fe lb lc ld le b">Class</code>(例如<code class="fe lb lc ld le b">from geopandas.geodataframe import GeoDataFrame</code>)组成时，这尤其有用</li><li id="3a3d" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">当有少量对象要导入时使用</li><li id="4397" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">当您的对象有明确的名称时使用</li><li id="8f16" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">当您确切知道用户需要哪些对象，不需要哪些对象时，请使用</li><li id="fbc4" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">当您不希望频繁添加大量需要导入的新模块和对象时，请使用。</li></ul><h2 id="5833" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated"><strong class="ak">众所周知的例子</strong></h2><ul class=""><li id="3277" class="nq nr iq kh b ki mo kl mp ko ns ks nt kw nu la nv nw nx ny bi translated"><code class="fe lb lc ld le b">geopandas</code></li></ul><h1 id="0e7c" class="lg lh iq bd li lj lk ll lm ln lo lp lq jw lr jx ls jz lt ka lu kc lv kd lw lx bi translated"><strong class="ak">网上购物</strong></h1><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="gh gi oi"><img src="../Images/bbd36ac35a618f2cee96d329a4b375ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*obAAXuUlT_RYOuwB"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Photo by <a class="ae lf" href="https://unsplash.com/@pickawood?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Pickawood</a> on <a class="ae lf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7d0b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">任何在网上买过杂货的人都知道，订购正确的产品可能需要顾客付出一些努力。你必须搜索产品、选择品牌、选择想要的尺寸等等。然而，所有这些步骤都可以让你从一个几乎无限的仓库里买到你想要的东西。</p><p id="110b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在 Python 包的情况下，在某些情况下，避免简单地导入整个包的便利性，而是迫使用户更清楚地知道导入的是什么部分，可能会更谨慎。这使得作为开发人员的您可以在不影响用户的情况下在包中包含更多的内容。</p><h2 id="c665" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated">在幕后</h2><pre class="lz ma mb mc gt mu le mv mw aw mx bi"><span id="faa0" class="my lh iq le b gy mz na l nb nc"># __init__.py<br/>import example_pkg.foo<br/>import example_pkg.bar<br/>import example_pkg.baz</span></pre><h2 id="8df8" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated">用户实现</h2><p id="7679" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">在这种情况下，用户可以采用(至少)三种不同的方法。</p><pre class="lz ma mb mc gt mu le mv mw aw mx bi"><span id="9e82" class="my lh iq le b gy mz na l nb nc">import example_pkg</span><span id="f082" class="my lh iq le b gy np na l nb nc">example_pkg.foo.foo_func()<br/>example_pkg.bar.bar_func()<br/>example_pkg.bar.baz_func()</span></pre><p id="5ded" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者</p><pre class="lz ma mb mc gt mu le mv mw aw mx bi"><span id="eee7" class="my lh iq le b gy mz na l nb nc">from example_pkg import foo, bar, baz</span><span id="6f46" class="my lh iq le b gy np na l nb nc">foo.foo_func()<br/>bar.bar_func()<br/>baz.baz_func()</span></pre><p id="8344" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者</p><pre class="lz ma mb mc gt mu le mv mw aw mx bi"><span id="ed13" class="my lh iq le b gy mz na l nb nc">import example_pkg.foo as ex_foo<br/>import example_pkg.bar as ex_bar<br/>import example_pkg.baz as ex_baz</span><span id="343c" class="my lh iq le b gy np na l nb nc">ex_foo.foo_func()<br/>ex_bar.bar_func()<br/>ex_baz.baz_func()</span></pre><h2 id="0650" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated"><strong class="ak">优点</strong></h2><ul class=""><li id="dad5" class="nq nr iq kh b ki mo kl mp ko ns ks nt kw nu la nv nw nx ny bi translated">简化了<code class="fe lb lc ld le b">__init__.py</code>文件。仅在添加新模块时需要更新。更新你的网上商店相对容易。您只需更改产品数据库中的设置。</li><li id="c238" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">它是灵活的。它可用于仅导入用户需要的内容或导入所有内容。网上商店的顾客可以只搜索他们想要或需要的东西。当你需要的只是一个苹果时，就没有必要再去翻“水果”箱了。但是如果他们真的想要“水果”箱里的所有东西，他们也可以得到。</li><li id="8513" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">别名可以清理长的 package.module 规范(如<code class="fe lb lc ld le b">import matplotlib.pyplot as plt</code>)。虽然网上购物一开始会很痛苦，但如果你把购物清单留到以后再用，购物会快很多。</li><li id="b698" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">可以有多个同名的对象(例如在<code class="fe lb lc ld le b">foo</code>和<code class="fe lb lc ld le b">bar</code>模块中都被称为<code class="fe lb lc ld le b">save()</code>的函数)</li></ul><h2 id="e12a" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated"><strong class="ak">缺点</strong></h2><ul class=""><li id="f3c6" class="nq nr iq kh b ki mo kl mp ko ns ks nt kw nu la nv nw nx ny bi translated">一些导入方法会使代码更难阅读。例如，<code class="fe lb lc ld le b">foo.foo_func()</code>并不表示<code class="fe lb lc ld le b">foo</code>来自哪个包。</li><li id="6238" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">可读性最强的方法(<code class="fe lb lc ld le b">import example_pkg</code>，没有别名)可能会产生很长的代码块(例如<code class="fe lb lc ld le b">example_pkg.foo.foo_func()</code>)，使事情变得混乱。</li><li id="0cff" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">用户可能很难找到所有可能的功能。在你的网上杂货店，购物者很难看到所有可能的商品。</li></ul><h2 id="4a6c" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated"><strong class="ak">建议</strong></h2><ul class=""><li id="c823" class="nq nr iq kh b ki mo kl mp ko ns ks nt kw nu la nv nw nx ny bi translated">当您有一个复杂的模块系列时使用，其中的大部分任何一个用户都不会需要。</li><li id="4d2e" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">当<code class="fe lb lc ld le b">import example_pkg</code>导入大量对象并且可能很慢时使用。</li><li id="3b50" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">当您可以为不同类型的用户定义非常清晰的工作流时使用。</li><li id="24d3" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated">当您希望用户能够很好地浏览您的文档时使用。</li></ul><h2 id="42ad" class="my lh iq bd li nd ne dn lm nf ng dp lq ko nh ni ls ks nj nk lu kw nl nm lw nn bi translated"><strong class="ak">例题</strong></h2><ul class=""><li id="53df" class="nq nr iq kh b ki mo kl mp ko ns ks nt kw nu la nv nw nx ny bi translated"><code class="fe lb lc ld le b">matplotlib</code> *</li><li id="efcd" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated"><code class="fe lb lc ld le b">scikit-learn</code> *</li><li id="8367" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated"><code class="fe lb lc ld le b">bokeh</code> *</li><li id="2dde" class="nq nr iq kh b ki nz kl oa ko ob ks oc kw od la nv nw nx ny bi translated"><code class="fe lb lc ld le b">scipy</code> *</li></ul><p id="a6cd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">*这些包实际上在它们的<code class="fe lb lc ld le b">__init__.py</code>文件中使用了不同方法的组合。我在这里包括它们是因为对于用户来说，它们通常是按菜单使用的(例如，<code class="fe lb lc ld le b">import matplotlib.pyplot as plt</code>或<code class="fe lb lc ld le b">import scipy.stats.kde</code>)。</p><h1 id="df69" class="lg lh iq bd li lj lk ll lm ln lo lp lq jw lr jx ls jz lt ka lu kc lv kd lw lx bi translated">结论</h1><p id="6d1c" class="pw-post-body-paragraph kf kg iq kh b ki mo jr kk kl mp ju kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">我概述的三个场景当然不是 Python 包的唯一可能的结构，但是我希望它们涵盖了任何从博客中了解到这一点的人可能会考虑的大多数情况。最后，我将回到我之前说过的一点:对于<em class="mt">开发者</em>来说好的模块结构对于<em class="mt">用户</em>来说可能是也可能不是好的模块结构。无论你做什么决定，不要忘记站在用户的角度考虑问题，因为那个用户很可能就是你。</p></div></div>    
</body>
</html>