# 如何建立一个只有两栏的社交网络

> 原文：<https://towardsdatascience.com/a-social-network-is-just-a-table-with-2-columns-c30d9c3b5e6e?source=collection_archive---------21----------------------->

## 好吧，如果你很挑剔的话，也许 3 张，如果你想让它真正有用的话，也许多几张桌子…

…但我的观点仍然成立。社交网络的本质可以很容易地存储在一个有两列的表中。

这篇文章的灵感来自于描述社交网络的复杂方式，尤其是在图表中，它让我思考如何简化它的想法，以便任何人都可以理解它。

# 让我们从概述什么是社交网络开始

简单来说，它是一个描述社会关系和互动的网络。他们在互联网出现之前就存在了。自从人类存在以来，事实上自从任何社会生物存在以来，城市、城镇、村庄和人们都有他们自己的小社会网络。

然而，一旦互联网允许社交网络被记录、存储和扩展，这个术语就爆炸了。

如今，你的社交网络可以不仅仅包括你认识的人，还包括你经常交往的人。它可以包括你从未谋面的人，或者仅仅通过网上交流认识的人。

**想想就有点疯狂。**

但是这些都不是新的。我们都很清楚这一点，但这些在线社交网络实际上在做什么呢？

![](img/c855b57b98368627b079b54e91261aa5.png)

Photo by [Dương Hữu](https://unsplash.com/@huuduong?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

> 它们存储了一个人(或者实体，如果你真的很迂腐的话)和另一个人之间的联系。

就是这样。**只是两个人之间简单的联系**。很多很多很多次。

这种规模就是为什么我认为我们把它们描绘成复杂的东西，但是如果你回到核心原则:存储两个人之间的联系，现在看起来并不太糟糕，对吗？

# 但是你说是两栏的表格，请解释一下…

…嗯，如果一个社交网络只是两个人之间的一个巨大的链接。那么你需要一种方法来存储两个人之间的链接。一种方法是创建一个表，存储代表每个人的两个用户标识符。

```
CREATE TABLE friend 
(
   user_id VARCHAR(64), 
   friend_user_id VARCHAR(64)
);
```

搞定了。

嗯，不完全是，但是你明白了。这个表现在可以很容易地存储两个用户之间的关系(我们称之为朋友)。

如果您想知道存储关系的顺序。如果是我设计的，我会把发起好友请求的人放在第一列，把他们请求的人放在第二列。

# 图遍历找朋友的朋友怎么样？

现在我们在谈话。现在我们来看看那些超级复杂的社交网络图片，它们让你大吃一惊。

![](img/44587f4a64e80c916912363730e428b6.png)

A super complex social network: [Image Source](https://thenextweb.com/socialmedia/2013/11/24/facebook-grandparents-need-next-gen-social-network/)

让我们从简单的开始。

对于一个用户来说，找到他们的朋友，然后找到他们所有的朋友，这些朋友还不是最初用户的朋友。

所有的社交网络都是这样开始向你展示“推荐的朋友”或“你可能认识的人”。逻辑是，如果你认识一个人，你可能也认识同样的人。

```
SELECT user.user_id, friends.friend_user_id
FROM friend user
LEFT JOIN friend friends ON user.friend_user_id = friends.user_id
LEFT JOIN friend same_friends ON same_friends.user_id = friends.friend_user_id 
WHERE a.user_id = 1 AND c.user_id IS NULL;
```

同样不太难。虽然我不想假装，当你想认识朋友的朋友的朋友等等的时候，它不会变得有点笨拙。

有趣的是，脸书遇到了同样的问题，并决定走图形数据库这条路。图形数据库旨在帮助解决这类问题，因为它们在构建时(显然)考虑了图形遍历。这使得询问更复杂的网络问题变得更加琐碎。

# 那么一个社交网络真的只是一个有两列的表格吗？

是也不是…

正如您所看到的，用一个表和两列来存储用户之间的关系是可能的。你甚至可以查询这些数据，并使用它们来查找推荐的朋友，以帮助用户建立他们的网络。

但实际上，你会希望它周围有很多额外的数据，以使它在现实世界中更有用。

首先，您将需要表来存储关于用户及其配置文件的数据。

你可能还想知道好友请求的概念，这样你就可以区分请求和真正的友谊。

您可能希望存储关于好友请求被发出和接受的事件的元数据。

然后扩展到构成社交网络的所有其他*东西*，包括帖子和赞——同样，赞只是用户和另一个实体之间的关系，更可能是用户和帖子之间的关系。

**希望这种对社交网络世界的简化看法引发了一些思考，即简单的想法如何能很快变成一些最大和最强大的工具。**