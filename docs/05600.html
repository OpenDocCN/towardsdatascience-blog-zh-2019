<html>
<head>
<title>Extracting Keywords from a Text Using R Regex (Easy)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 R Regex 从文本中提取关键字(简单)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/extracting-information-from-a-text-in-5-minutes-using-r-regex-520a859590de?source=collection_archive---------10-----------------------#2019-08-17">https://towardsdatascience.com/extracting-information-from-a-text-in-5-minutes-using-r-regex-520a859590de?source=collection_archive---------10-----------------------#2019-08-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b0a9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我们可以从美国的职位描述中提取相关信息，并将其可视化。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3fa718d759c070758f464673d30801e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nwK6Sznfn6T0lSZjWWbWLQ.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">photo credit to Jason from unsplash</figcaption></figure><p id="8d57" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当您有大量文本文件时，只提取相关信息并不容易。这既复杂又耗时。出于这个原因，我想向您展示我是如何使用 Regex 从美国职位描述中提取位置的。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="a905" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated"><strong class="ak">文本文件</strong></h1><p id="501c" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">以下是工作描述的结构。我的目标是从这个文本列中只提取州。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/aba4270e3fb4de6d84a60e0c0ff1fc11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cQHpIGcCE63eeVfUeKpF0w.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Preview of the job description</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/c50a8cf48aba92349ac3e8164f946886.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*igNyE76TlpCiXuCoN3VppA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Example of one job description</figcaption></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="33ca" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated"><strong class="ak">第一步。去掉标点符号和尾随空格</strong></h1><p id="433f" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">状态有一个尾随空格，它位于一行的末尾，后面没有任何字符。如果不删除它(\\n)，将会提取出多余的单词。</p><p id="0dab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此外，保持州名缩写为大写字母也很重要(对于加利福尼亚，用‘CA’而不是‘CA’)，因为如果你不这样做，它将提取所有包含‘CA’的单词。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="51d0" class="nf mc it nb b gy ng nh l ni nj"># deleting punctuations<br/>description$text&lt;-gsub("[[:punct:][:blank:]]+", " ", description$text)</span><span id="4dbd" class="nf mc it nb b gy nk nh l ni nj"># deleting trailing space<br/>description$text&lt;-gsub("\\n"," ", description$text)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/3768de33b1a376acef47cc9c4dad79c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0lGDEWV9Q51CmkMVBxFW_A.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Job description after cleaning</figcaption></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="e7d5" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated"><strong class="ak">第二步。使用正则表达式</strong></h1><p id="ba60" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">清理后，您可以按空格分割工作描述文本，并找到与州缩写列表(字典)匹配的字符串。完成后，您可以将其分配到 location 列，如下所示。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="8aa1" class="nf mc it nb b gy ng nh l ni nj">#creating a location column</span><span id="31da" class="nf mc it nb b gy nk nh l ni nj">description$location &lt;- NA </span><span id="3b25" class="nf mc it nb b gy nk nh l ni nj">#using for loop to extract all the states </span><span id="8356" class="nf mc it nb b gy nk nh l ni nj">for (i in 1:length(description$text)){    </span><span id="0eea" class="nf mc it nb b gy nk nh l ni nj">#split the text by space  <br/>split &lt;- strsplit(description$text[i]," ")[[1]]     </span><span id="d1b5" class="nf mc it nb b gy nk nh l ni nj">#comparing split with the state abbreviation   <br/>state &lt;- match(split, stateabbreviation$Abbreviation)    </span><span id="af31" class="nf mc it nb b gy nk nh l ni nj">#if it matches, get the position of each state  <br/>state &lt;- which(!is.na(state))    </span><span id="1e8a" class="nf mc it nb b gy nk nh l ni nj">#extract the state based on the position  <br/>state_split &lt;- split[state]    </span><span id="9288" class="nf mc it nb b gy nk nh l ni nj">#adding states to the new column   <br/>description$location[i] &lt;- state_split[1]  <br/>}</span></pre><p id="6d17" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了找到职位描述中的州缩写，我使用了自己创建的字典“stateabbreviation”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/28f541d3db0c51e88380c2d415e31346.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*JoPU4_hj2I2sWyvaV9X9EQ.png"/></div></figure><p id="9489" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">和...瞧啊。这是结果。</p><p id="907f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果还想提取城市，只需使用相同的代码和' which(！idspnonenote)即可。is.na(位置))-1 '。你用“-1”是因为城市在州的前面。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/66d31bd0769f0c8a0aef5c0fd64a5aa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*26ksSI8TtqeBBzr5ipWH7Q.png"/></div></div></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="c2b1" class="mb mc it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">第三步。可视化</h1><p id="2886" class="pw-post-body-paragraph ky kz it la b lb mt ju ld le mu jx lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">现在你可以把它形象化，以便更好地理解你的发现。</p><pre class="kj kk kl km gt na nb nc nd aw ne bi"><span id="9943" class="nf mc it nb b gy ng nh l ni nj">library(ggplot2)</span><span id="fbf4" class="nf mc it nb b gy nk nh l ni nj">state_count&lt;-table(description$location)</span><span id="3eda" class="nf mc it nb b gy nk nh l ni nj">state_count&lt;-as.data.frame(state_count)</span><span id="3837" class="nf mc it nb b gy nk nh l ni nj">ggplot(state_count, aes(x = as.character(state_count$Var1), y = state_count$Freq)) + geom_bar(stat="identity") + theme(axis.text.x = element_text(angle = 60, vjust = )) + labs(y = "Frequency", x= "States")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/276b51d1401fc2b0d3e22e3722da6516.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8BTafMapUC9giH2I5-iOfQ.png"/></div></div></figure><p id="3df9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是我工作的一部分，以便更好地了解当前的数据科学就业市场。根据这一结果，加利福尼亚州、纽约州和德克萨斯州非常需要精通数据/技术的专业人员。</p><p id="a21c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">关于我的文本挖掘项目的更多细节，请随时访问我的<a class="ae np" href="https://github.com/dkewon/Text-Mining-Entity-Extraction" rel="noopener ugc nofollow" target="_blank"> GitHub </a>页面。感谢您的阅读！</p><p id="fe7c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">另外，请随意查看我的其他文章:</p><p id="fba3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae np" rel="noopener" target="_blank" href="/how-to-get-twitter-notifications-on-currency-exchange-rate-web-scraping-and-automation-94a7eb240d60"> <em class="nq">如何获得关于货币汇率的 Twitter 通知:Web 抓取和自动化</em> </a></p><p id="b466" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae np" rel="noopener" target="_blank" href="/databricks-how-to-save-files-in-csv-on-your-local-computer-3d0c70e6a9ab">数据块:如何在本地计算机上将数据帧保存为 CSV 文件</a></p></div></div>    
</body>
</html>