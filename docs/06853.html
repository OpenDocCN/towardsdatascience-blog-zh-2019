<html>
<head>
<title>How To Install PySpark On A Remote Machine</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在远程机器上安装 PySpark</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-install-pyspark-on-a-remote-machine-a3c86e76729d?source=collection_archive---------18-----------------------#2019-09-29">https://towardsdatascience.com/how-to-install-pyspark-on-a-remote-machine-a3c86e76729d?source=collection_archive---------18-----------------------#2019-09-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="3c55" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">简单的方法。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/93f6c4964725301cce2e0e522a059eef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dxaFFIEGqkN6o9Vk.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Spark, <a class="ae le" href="https://en.wikipedia.org/wiki/Apache_Spark#/media/File:Apache_Spark_Logo.svg" rel="noopener ugc nofollow" target="_blank">Wikipedia</a>.</figcaption></figure><p id="80ed" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">假设您想在使用 python 的机器上运行 Spark。要做到这一点，您需要在机器上运行 PySpark，并在 Jupyter 或 python 中使用它，这需要在您的 shell 中进行一些安装和调试。我使用下面的过程解决了这个问题，成功地安装了 PySpark 并在 Jupyter 实验室中运行了演示代码。此程序旨在使用股票张量流 1.14 引导映像在基于 Gloud 的机器上执行，但是，这些指令也应该在本地机器上工作。</p><h2 id="c51e" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">安装 Java 1.8</h2><ol class=""><li id="4976" class="ly lz it js b jt ma jx mb kb mc kf md kj me kn mf mg mh mi bi translated">网上说很多版本都有兼容性问题，所以请安装 java 1.8:</li></ol><blockquote class="mj mk ml"><p id="e999" class="jq jr mm js b jt ju jv jw jx jy jz ka mn kc kd ke mo kg kh ki mp kk kl km kn im bi translated">sudo apt 更新</p></blockquote><p id="0e97" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.检查您的 java 版本</p><blockquote class="mj mk ml"><p id="528f" class="jq jr mm js b jt ju jv jw jx jy jz ka mn kc kd ke mo kg kh ki mp kk kl km kn im bi translated">java 版本</p></blockquote><p id="70f0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.如果没有安装 Java，请执行以下操作</p><blockquote class="mj mk ml"><p id="5e88" class="jq jr mm js b jt ju jv jw jx jy jz ka mn kc kd ke mo kg kh ki mp kk kl km kn im bi translated">apt 安装 openjdk-9-jre-headless</p></blockquote><p id="c3a7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">4.验证 java 的版本</p><blockquote class="mj mk ml"><p id="8c62" class="jq jr mm js b jt ju jv jw jx jy jz ka mn kc kd ke mo kg kh ki mp kk kl km kn im bi translated">java 版本</p></blockquote><p id="34d2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">5.您应该会得到与此类似的结果:</p><blockquote class="mj mk ml"><p id="928b" class="jq jr mm js b jt ju jv jw jx jy jz ka mn kc kd ke mo kg kh ki mp kk kl km kn im bi translated">openjdk 版本" 1.8.0_222" <br/> OpenJDK 运行时环境(build 1 . 8 . 0 _ 222–8u 222-b10–1 ~ deb9u 1-b10)<br/>open JDK 64 位服务器 VM (build 25.222-b10，混合模式)</p></blockquote><p id="4363" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">6.(可选)如果显示另一个版本的 java，请执行以下操作并选择指向 java-8 的版本。</p><blockquote class="mj mk ml"><p id="c3f0" class="jq jr mm js b jt ju jv jw jx jy jz ka mn kc kd ke mo kg kh ki mp kk kl km kn im bi translated">sudo 更新-备选方案-配置 java</p></blockquote><p id="0f4a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">输出:</p><pre class="kp kq kr ks gt mq mr ms mt aw mu bi"><span id="7e24" class="lf lg it mr b gy mv mw l mx my">There are 2 choices for the alternative java (providing /usr/lib/java).</span><span id="6d88" class="lf lg it mr b gy mz mw l mx my">Selection    Path                                            Priority   Status<br/>------------------------------------------------------------<br/>* 0            /usr/lib/java/java-11-openjdk-amd64/bin/java      <br/>  1            /usr/lib/java/java-11-openjdk-amd64/bin/java      <br/>  2            /usr/lib/java/java-8-openjdk-amd64/jre/bin/java    </span><span id="fdd4" class="lf lg it mr b gy mz mw l mx my">Press &lt;enter&gt; to keep the current choice[*], or type selection number:</span></pre><p id="b151" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">7.找到 java.home 在哪里</p><blockquote class="mj mk ml"><p id="3812" class="jq jr mm js b jt ju jv jw jx jy jz ka mn kc kd ke mo kg kh ki mp kk kl km kn im bi translated">Java-XshowSettings:properties-version 2 &gt; &amp; 1 &gt;/dev/null | grep ' Java . home '</p></blockquote><p id="c907" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">8.(或者)您可以设置 JAVA_HOME</p><blockquote class="mj mk ml"><p id="2e33" class="jq jr mm js b jt ju jv jw jx jy jz ka mn kc kd ke mo kg kh ki mp kk kl km kn im bi translated">导出 JAVA _ HOME = " $(/myJavaHome/JAVA _ HOME-v 1.8)"<br/>或者创建并添加到~/。bash _ profile</p></blockquote><p id="13ca" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后</p><blockquote class="mj mk ml"><p id="a7c0" class="jq jr mm js b jt ju jv jw jx jy jz ka mn kc kd ke mo kg kh ki mp kk kl km kn im bi translated">来源。bashrc</p></blockquote></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><p id="4964" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此时，您应该已经有了 java_home 目录，您可以开始安装 PySpark，过程是类似的，因此，我们还需要找到 Spark 的安装位置。</p><h2 id="cbdd" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">安装 PySpark</h2><ol class=""><li id="47ee" class="ly lz it js b jt ma jx mb kb mc kf md kj me kn mf mg mh mi bi translated">pip 安装以下项目:</li></ol><blockquote class="mj mk ml"><p id="fd72" class="jq jr mm js b jt ju jv jw jx jy jz ka mn kc kd ke mo kg kh ki mp kk kl km kn im bi translated">pip3 安装 findspark <br/> pip3 安装 pyspark</p></blockquote><p id="475d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.找到 pyspark 在哪里</p><blockquote class="mj mk ml"><p id="6679" class="jq jr mm js b jt ju jv jw jx jy jz ka mn kc kd ke mo kg kh ki mp kk kl km kn im bi translated">pip3 显示 pyspark</p></blockquote><p id="1263" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">输出:</p><blockquote class="mj mk ml"><p id="1670" class="jq jr mm js b jt ju jv jw jx jy jz ka mn kc kd ke mo kg kh ki mp kk kl km kn im bi translated">名称:pyspark <br/>版本:2.3.1 <br/>摘要:Apache spark Python API <br/>主页:<a class="ae le" href="https://github.com/apache/spark/tree/master/python" rel="noopener ugc nofollow" target="_blank">https://github.com/apache/spark/tree/master/python</a><br/>作者:Spark 开发者<br/>作者-邮箱:dev@spark.apache.org<br/>许可:<a class="ae le" href="http://www.apache.org/licenses/LICENSE-2.0" rel="noopener ugc nofollow" target="_blank">http://www.apache.org/licenses/LICENSE-2.0</a><br/><strong class="js iu">位置:/usr/local/lib/Python 3.5/site-packages<br/></strong>需求:py4j</p></blockquote></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><p id="226a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">至此，我们已经拥有了所需的一切，只需在下面的代码中替换主目录指针并运行演示程序。</p><h2 id="993b" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">初始化:</h2><p id="a2bd" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb nh kd ke kf ni kh ki kj nj kl km kn im bi translated">下面是在您的代码中配置一切，使用之前为 PySpark &amp; Java 找到的主目录信息。</p><blockquote class="mj mk ml"><p id="69cf" class="jq jr mm js b jt ju jv jw jx jy jz ka mn kc kd ke mo kg kh ki mp kk kl km kn im bi translated">导入 findspark <br/>导入 OS<br/>spark _ HOME = ' mySparkLocation '<br/>JAVA _ HOME = ' myJavaHome '<br/>OS . environ[' JAVA _ HOME ']= JAVA _ HOME find spark . init(spark _ HOME = spark _ dir)</p></blockquote><h2 id="c76e" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">演示:</h2><p id="eac0" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb nh kd ke kf ni kh ki kj nj kl km kn im bi translated">如果一切配置正确，这个演示将工作，祝你好运:)</p><blockquote class="mj mk ml"><p id="ecde" class="jq jr mm js b jt ju jv jw jx jy jz ka mn kc kd ke mo kg kh ki mp kk kl km kn im bi translated">从 pyspark.sql 导入 pyspark <br/>导入 spark session<br/>spark = spark session . builder . getor create()<br/>df = spark . SQL(" select ' spark ' as hello ")<br/>df . show()<br/>spark . stop()</p></blockquote><h2 id="340f" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">参考</h2><ol class=""><li id="31ed" class="ly lz it js b jt ma jx mb kb mc kf md kj me kn mf mg mh mi bi translated"><a class="ae le" href="https://medium.com/@ashok.tankala/run-your-first-spark-program-using-pyspark-and-jupyter-notebook-3b1281765169" rel="noopener">类似中帖</a></li><li id="f50f" class="ly lz it js b jt nk jx nl kb nm kf nn kj no kn mf mg mh mi bi translated"><a class="ae le" href="https://www.digitalocean.com/community/tutorials/how-to-install-java-with-apt-on-ubuntu-18-04" rel="noopener ugc nofollow" target="_blank">Ubuntu 上的 Java</a></li><li id="6963" class="ly lz it js b jt nk jx nl kb nm kf nn kj no kn mf mg mh mi bi translated"><a class="ae le" href="https://bigdata-madesimple.com/guide-to-install-spark-and-use-pyspark-from-jupyter-in-windows/" rel="noopener ugc nofollow" target="_blank"> finspark </a></li><li id="2d03" class="ly lz it js b jt nk jx nl kb nm kf nn kj no kn mf mg mh mi bi translated"><a class="ae le" href="https://www.baeldung.com/find-java-home" rel="noopener ugc nofollow" target="_blank">查找 java_home </a></li><li id="4e76" class="ly lz it js b jt nk jx nl kb nm kf nn kj no kn mf mg mh mi bi translated"><a class="ae le" href="https://stackoverflow.com/questions/53583199/pyspark-error-unsupported-class-file-major-version-55" rel="noopener ugc nofollow" target="_blank">寻找火花位置</a></li><li id="0328" class="ly lz it js b jt nk jx nl kb nm kf nn kj no kn mf mg mh mi bi translated"><a class="ae le" href="https://bigdata-madesimple.com/guide-to-install-spark-and-use-pyspark-from-jupyter-in-windows/" rel="noopener ugc nofollow" target="_blank"> pyspark 演示</a></li><li id="5e0e" class="ly lz it js b jt nk jx nl kb nm kf nn kj no kn mf mg mh mi bi translated"><a class="ae le" href="https://www.digitalocean.com/community/tutorials/how-to-install-java-with-apt-on-ubuntu-18-04" rel="noopener ugc nofollow" target="_blank">选择备用 java </a></li></ol></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><p id="b504" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Ori Cohen 博士拥有计算机科学博士学位，主要研究机器学习。他是 TLV 新遗迹公司的首席数据科学家，从事 AIOps 领域的机器和深度学习研究。</p></div></div>    
</body>
</html>