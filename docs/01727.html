<html>
<head>
<title>Why Measuring Accuracy is Hard (and important!) Part 4.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么测量精度很难(也很重要！)第四部分。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/why-measuring-accuracy-is-hard-and-important-part-4-how-to-measure-accuracy-better-e072a26f4827?source=collection_archive---------27-----------------------#2019-03-20">https://towardsdatascience.com/why-measuring-accuracy-is-hard-and-important-part-4-how-to-measure-accuracy-better-e072a26f4827?source=collection_archive---------27-----------------------#2019-03-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5406" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何更好地测量准确度</h2></div><p id="68e9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是关于测量精度的 4 篇系列文章中的最后一篇。</p><p id="358a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在第一篇文章中，我讨论了精确测量的重要性。如果你还没有，去看看这里:<a class="ae lb" href="https://www.electricbrain.io/blog/why-measuring-accuracy-is-hard-and-very-important-part-1" rel="noopener ugc nofollow" target="_blank">https://www . electric brain . io/blog/why-measuring-accuracy-is-hard-and-very-important-part-1</a></p><p id="86e8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本系列的第二篇文章中，我讨论了最常见的场景，这些场景阻碍了模型准确性的度量。如果你还没有看过这篇文章，可以看看这里:<a class="ae lb" href="https://www.electricbrain.io/blog/why-measuring-accuracy-is-hard-and-important-part-2" rel="noopener ugc nofollow" target="_blank">https://www . electric brain . io/blog/why-measuring-accuracy-is-hard-and-important-part-2</a></p><p id="c21c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本系列的第三篇文章中，我讨论了在度量模型准确性时出现的更困难和不寻常的场景。如果你还没有读过这篇文章，可以在这里读一读:<a class="ae lb" href="https://www.electricbrain.io/blog/why-measuring-accuracy-is-hard-and-important-part-3" rel="noopener ugc nofollow" target="_blank">https://www . electric brain . io/blog/why-measuring-accuracy-is-hard-and-important-part-3</a></p><p id="4bdb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，在本系列的第四部分也是最后一部分，我将讨论真正的内容——我们都渴望的信息。我们如何做得更好？在测量精度时会出现所有这些问题，我们如何避免陷阱并更好地测量精度？不幸的答案是——视情况而定。这个问题没有简单的答案，也没有放之四海而皆准的解决办法。因此，我不是仅仅给你一些提示和建议(会有一些)，而是想给你一个思考如何度量一个模型的框架。选择度量模型的标准是一项智力练习。最佳前进路线可能涉及几个不同的指标，不同的数字用于不同的原因。</p><p id="cac8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一般来说，我们的流程有几个步骤:</p><ul class=""><li id="49fa" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">仔细考虑并讨论您希望该指标做什么。该指标的目的是什么？它是一个沟通的标准吗，是为了让外部的涉众理解一个模型吗？或者它是一个研究指标，帮助指导你的团队研究模型？或者该指标是由模型本身的元素内部使用的？您是否有多种不同的度量目的/原因？</li><li id="543f" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">集体讨论候选指标列表。不要害怕设计你自己创造的标准或公式</li><li id="9b6d" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">对于每个指标，考虑相对于指标目的的利弊。不要只是把这些留在脑子里，真正把这些利弊写在纸上，摆在你面前。</li><li id="e060" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">选择一个指标，坚持下去，直到它达到目的。</li></ul><p id="0327" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们将逐一介绍这些步骤。</p><h1 id="88ec" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">定义指标的目的</h1><p id="257f" class="pw-post-body-paragraph kf kg iq kh b ki mi jr kk kl mj ju kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">测量模型的第一步是定义测量的目的。很容易就可以一头扎进去，写一堆模型代码，用五重交叉验证把它包起来，然后就到此为止。更难的是后退一步，看看你为什么要测量准确性，并仔细构建一个度量标准来为你的目的服务。</p><p id="0f4e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">度量可以有许多不同的目的，每一个都有自己的细微差别和问题。我发现这些目的可以分为几大类:</p><p id="7518" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">该指标用于与利益相关方沟通:</em></p><ul class=""><li id="f947" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">经理和老板可以用这个标准来评估团队的表现</li><li id="4359" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">产品经理和设计者可以使用该度量来理解算法的行为及其对用户的潜在影响</li><li id="ecd9" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">销售人员可以使用该度量向潜在客户兜售该系统的优势和功效</li><li id="e85e" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">客户可以使用该度量，以便了解相对于他们可获得的其他信息，他们应该对模型的结果有多信任</li><li id="d186" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">监管机构可以使用该指标来了解该模型的潜在社会影响</li><li id="3d7d" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">客户可以使用该指标来检查模型是否满足他们的性能要求</li><li id="b6e6" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">其他行业专家可能会使用该指标，以便将您的模型与其他模型进行比较</li><li id="ed17" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">各种各样的利益相关者可以使用该指标来确定是否应该使用该模型——它是否满足投入生产的最低性能水平</li></ul><p id="b053" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">该指标用于内部研发&amp;和研究:</em></p><ul class=""><li id="e5d4" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">该指标用于比较模型在一段时间内的性能，以及 R&amp;D 团队做出了多少改进</li><li id="4f90" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">该指标用于直接评估模型中的特定变化是否会导致更好或更差的性能</li><li id="51e6" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">该指标用于理解算法的行为，并生成关于什么可以提高性能的线索(而不是用于评估已经想到的特定变化)</li><li id="e750" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">该指标用于评估随着数据集大小的增加，您的模型预计会随着时间的推移而提高多少</li><li id="2e38" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">该指标用于解决模型的特定/离散问题，例如特定的表现不佳的组件或子系统，或者评估模型在重要数据子集上的表现</li></ul><p id="b289" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">该指标由算法本身在内部使用，以规范或改进其自身的行为:</em></p><ul class=""><li id="a68d" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">优化算法使用该度量来调整核心模型的超参数并最大化其准确性</li><li id="2583" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">该度量被广泛的模型搜索算法用来从各种不同的模型中自动选择，例如，在 AutoML</li><li id="7a6f" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">该度量用于对算法执行早期停止，例如，通过在神经网络过度拟合之前停止神经网络，或者选择提升树算法中的提升轮数</li><li id="388c" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">该指标用于设置算法结果的可接受置信度阈值</li></ul><p id="244e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">度量模型的每一个不同的目的都需要不同的度量模型的策略。您必须选择和设计适合您情况的指标。</p><p id="de77" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，让我们大致考虑一下为外部利益相关者设计的指标和为内部研发设计的指标之间的一些差异。</p><p id="c39d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">外部利益相关方的衡量标准</strong></p><ul class=""><li id="4923" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">必须简单，易于非技术人员理解</li><li id="df71" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">需要非常精确，给答案以信心</li><li id="6b9d" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">需要捕捉系统的端到端/最终结果行为</li><li id="b56b" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">需要可靠且无噪音，以设定正确的期望值</li><li id="6754" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">需要反映模型在生产中的当前性能，全面考虑</li><li id="cf49" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">需要从用户的角度反映数据分布，例如</li></ul><p id="e90e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">内部 R 的度量&amp; D </strong></p><ul class=""><li id="43eb" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">必须提供改善或倒退的明确指示</li><li id="2e5e" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">所需的精度因模型中的噪声水平以及您是要大的改进还是小的增益而异</li><li id="c5e7" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">需要捕捉系统的内部行为</li><li id="a0cb" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">需要相当快速且易于经常计算</li><li id="1998" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">需要作为一个长期稳定的基准，将研究团队对模型的影响与其他因素隔离开来</li><li id="e222" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">需要从研究的角度反映数据分布，例如，将类别余额标准化</li></ul><p id="c26c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如您所看到的，对于如此不同的受众和目的，度量的需求是非常不同的。</p><p id="3d34" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们的框架的第一步只是从您的指标的目的开始。不要只是在脑子里想——真正把你测量的原因写在纸上，写在文件里。您可能会发现测量模型有多种原因。如果您真的想更好地度量，这可能意味着您必须投资于维护多个不同的度量。这可能是很多额外的工作，但结果是你可以对你的测量有信心，并集中精力于你的研究目标。</p><p id="1381" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在经历这一过程时，请尝试回答以下问题:</p><ul class=""><li id="fa81" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">谁是该指标的受众？他们对技术了解多少？他们有多精通机器学习？</li><li id="421b" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">观众会对这个指标做什么呢？如果指标是好的，他们的行为会有什么不同？如果是坏的呢？</li><li id="20c9" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">观众会只使用一次这个指标吗？或者他们是否在监控指标随时间的变化？</li></ul><h1 id="e369" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">集体讨论/设计几个候选指标</h1><p id="2793" class="pw-post-body-paragraph kf kg iq kh b ki mi jr kk kl mj ju kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">更好地度量您的模型的下一步是集思广益，列出潜在的候选指标。像任何好的头脑风暴会议一样，最好不要过早下结论。真的试着吐槽一下，就如何衡量一个模型提出不同的想法。如果没有多种可能性可供选择，你就无法真正做出决定。</p><p id="1c1f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">头脑风暴时，你至少应该写下/考虑所有符合你目的的众所周知的指标。这可能需要您做一些研究，尤其是如果您正在将数据科学应用到一个您不擅长的新领域。</p><p id="5c21" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，您还应该考虑工程度量服务于特定目的的可能性。通常，这可能涉及以特定于您的问题的方式修改一个众所周知的指标。在其他方面，它可能涉及到真正地走出去到一个新的领域，创造新的方程式和原始的分析方法。构建指标的一些方法包括:</p><p id="1bf7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">评估众所周知的指标，但仅针对数据集的特定子集。</em></p><ul class=""><li id="bb89" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">例如，如果你是一家自动驾驶汽车公司，你可能更关心你的车辆在边缘情况下的性能。因此，尽管您的大数据集可能主要包含阳光充足的正常驾驶条件下的数据，但您可能会决定在各种恶劣的天气条件下(如下雨或下雪)测量您的模型，并在测量中完全忽略阳光充足的数据</li></ul><p id="8a6b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">专门为测量目的创建小数据集。</em></p><ul class=""><li id="f4fc" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">例如，在进行聚类时，您可能会遍历 100 或 200 个条目，然后自己手动将它们分成多个聚类。然后，您可以测量由算法聚类的项目被人类放入相同聚类的频率。</li><li id="a333" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">另一个例子是，如果您的算法在系统中间运行，但其输出要经过进一步的后处理才能产生最终结果。然后，您可能希望将最终结果的一个小数据集放在一起并进行验证，以确保您的后处理是正确的</li></ul><p id="1a61" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">对测量您的指标的数据应用某些类型的增强:</em></p><ul class=""><li id="cb69" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">比如做图像处理的时候，训练增强就是标配。但是在某些情况下，您可能也希望测量增强验证图像的准确性。例如，在处理药丸等完美圆形物体的图像时，您可能希望测量所有 360 度旋转角度的精度，以确保网络不会过度适应任何特定方向。</li></ul><p id="33ea" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">根据数据中的类别分解指标结果:</em></p><ul class=""><li id="ab48" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">例如，在处理多种形式的文档时，您可能希望测量不同格式的文档的不同准确性，即使您对所有这些文档共同训练算法也是如此</li></ul><p id="06c8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">如果您的模型处于典型指标的高端或低端，使您的指标“更难”或“更容易”:</em></p><ul class=""><li id="7b27" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">当在非常标准化的文档上执行某些类型的数据提取时，通过在一个单词一个单词的基础上进行测量，可能相对容易达到非常高的准确度。相反，您可以将您的度量转换为基于整个文档——只有当文档中的每个单词都被正确分析时才是正确的。</li></ul><p id="69f5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">考虑修改指标，以便某些被认为是失败的事情被积极地计算在内，反之亦然:</em></p><ul class=""><li id="5dab" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">例如，当做一个有大量标签的硬分类模型时，你可以考虑一个 Top-5 风格的度量。也就是说，如果正确的标签出现在前 5 个预测标签中的任何位置，则它被认为是正确的结果。</li><li id="794d" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">在许多情况下，当进行数据提取时，我们会遇到这样的问题:文档中的绝大多数单词都被预测为“空”或“不提取”。这可能会导致我们使用精度/召回/F1 分数等指标，但我们觉得这些指标很难向指标的受众(客户，非技术人员)解释。相反，我们选择了一个更简单的度量标准，测量原始精度，但有一个变化:排除任何在数据集中被预测为“null”和实际上“null”的条目。也就是说，我们测量了真阳性对假阳性和假阴性的准确性，但是我们从度量中排除了真阴性。这为该指标提供了非常需要的可解释性，但没有人为地将其夸大到接近 99%，因为有大量的真实否定。</li></ul><p id="b435" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">考虑在训练、测试和验证之间分割数据的不同方式:</em></p><ul class=""><li id="0f89" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">你可以根据情况考虑做或多或少的交叉验证。例如，对于大型深度学习模型，您可能只训练一个模型，而没有交叉验证。在高噪音的问题上，你可以用 10 倍的十字架来解决。</li><li id="26a5" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">您可以考虑沿着不同的维度拆分数据。例如，当试图预测用户购买行为时，你有几种可能的划分。通常，您可以对所有数据进行 70/20/10 的拆分。您也可以拆分 users 表，以查看您的算法如何在用户之间进行推广。你也可以在时间维度上进行拆分(有时称为回溯测试)，例如，给定 2 月份及之前的所有数据，你对 3 月份用户行为的预测有多准确。</li><li id="26ec" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">您还可以考虑为进入系统的“实时”数据制定一个指标。例如，如何根据 2018 年和 2019 年之前的数据实时训练模型</li></ul><p id="b4b5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">以各种方式规范度量:</em></p><ul class=""><li id="4be9" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">您可以使用一个典型的度量标准，但要对其进行修改，使其不受样本的巨大差异的影响，例如，在 0 和 1 之间进行标准化。</li><li id="7568" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">你可以试着使度量标准对不同样本中的等级不平衡保持不变</li><li id="e977" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">考虑到算法的噪声，您可能决定对您的度量及其变化使用统计 P-test，而不是直接查看度量</li></ul><p id="30ca" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">您可能只考虑您的模型相对于“基准”模型的性能:</em></p><ul class=""><li id="65ba" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">当进行各种形式的模型压缩时，我们采用深度神经网络并将其压缩，以便在手机和汽车等边缘设备上进行处理，我们可能会有一个全尺寸的模型，该模型已经过验证，可以高精度地工作。我们关心的是我们的缩小模型与全尺寸模型相比的性能。这种方法可以让我们在更大的数据集上测量性能，例如无法用于训练的未标记数据。我们可以使用全尺寸模型作为地面实况的基准来测量缩小模型的精确度</li></ul><p id="b25e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">你可以考虑使用某种验证程序来测量准确度。也就是说，如果你有一个有效的方法来验证模型的输出是否至少是好的(虽然不正确)，这可能会给你一个额外的方法来测量你的模型的未标记数据</em></p><ul class=""><li id="4328" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">例如，在构建收据处理技术时，我们实际上有一个简单的验证例程，可以在我们的模型的输出上运行，以查看它们是否有意义:我们获取所有提取的项目总数，并检查它们是否加起来就是收据底部的最终总数。如果所有的数字都加起来，我们可以知道我们的模型的输出至少是合理的，即使没有任何地面真理。在实践中，我们遇到了某些零售商的问题，他们的收据实际上并没有加起来(咳咳…沃尔玛，苹果)，但验证程序在大多数时候对大多数商家都有效。</li></ul><p id="3f4a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">创建你自己的方程式来描述你想要的行为:</em></p><ul class=""><li id="3c31" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">例如，在机器学习的更深奥和新颖的用途中，可能没有关于如何衡量你的模型的明确方向。很多生成模型和强化模型都属于这一类。使用一些熵统计和其他度量的科学怪人混搭，你可能会完全失去理智</li><li id="9303" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">在对深度神经网络进行贝叶斯优化的一种情况下，我遇到了网络很快陷入良好的局部最小值的问题，但之后没有改善。因此，我没有优化最终的验证精度，而是优化了算法训练的精度斜率。我想要一个不断改进的神经网络，而不是快速改进然后变平。令人惊讶的是，它成功了！</li></ul><p id="0dcf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">考虑到所有这些因素，您应该能够提出至少几种不同的方法来度量您的模型。同样重要的是，不要只抓着一些常用的指标不放，比如 F1 分数，然后用它来跑。如果你没有真正为自己考虑过各种选项，那么你可能最终会用一个让利益相关者困惑并且不能反映真实世界表现的指标来搬起石头砸自己的脚。</p><h1 id="24b3" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">评估每个指标的利弊</h1><p id="7a91" class="pw-post-body-paragraph kf kg iq kh b ki mi jr kk kl mj ju kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">有了多个可能的指标，您现在需要考虑每个指标相对于指标目的的利弊。</p><p id="6980" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">尝试考虑您的指标的每个属性:</p><ul class=""><li id="8702" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">该指标的“可解释”程度如何？也就是说，对于一个非技术外行人来说，被告知度量标准并预测模型应该表现得有多好容易吗？</li><li id="013b" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">度量的噪音有多大？你的目的能处理多少噪音？</li><li id="2cdb" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">该指标告诉您什么类型的概括？它可能忽略或没有捕捉到什么类型的概括？您的度量标准可能很好，而您的模型在某些方面仍然表现不佳吗？</li><li id="bb45" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">该指标没有捕捉到的成功案例有哪些？您的指标没有捕捉到哪些失败案例？你的衡量标准如何衡量不同类型的成功和失败案例？</li><li id="ed9c" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">你能想到这个指标的“更难”的版本吗？一个“简单”的版本？</li><li id="fc5a" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">这个指标应该获取的概括是否与您的模型在生产中需要的概括相匹配？</li><li id="9588" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">是否有某些你已经知道的失败案例，但不会在这个指标中强烈反映出来？</li><li id="f15b" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">该指标如何应对数据集中样本大小/属性/组成的变化？您的度量标准是否“有偏见”,因为它可能会过度表示或不足表示比其他数据更大或更复杂的数据的某些子集？</li><li id="52a7" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">有没有什么方法可以让这个指标很高，而模型仍然以您所关心的方式表现不佳？这个指标是直接衡量你关心的结果，还是仅仅间接衡量与你关心的事情相关的结果？</li><li id="1174" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">在本系列文章的第 2 篇和第 3 篇中讨论的测量准确性的失败案例是否适用于您的情况？这个指标如何解决这个问题？</li></ul><p id="adf2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们提供一些关于如何从糟糕的指标中挑出好的指标的技巧。这些只是我们自己的想法和想法，基于我们过去测量模型的经验。您应该彻底评估自己的情况，以确保您的指标符合目的:</p><p id="fde2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">面向非技术人员的指标需要简单。</p><ul class=""><li id="93da" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">它们不能从晦涩的数学方程式或统计数据中构建出来。即使是 MSE(均方误差)也不容易解释。相反，我发现 MAE(平均绝对误差),有时归一化为百分比，允许我的客户在他们的头脑中真实地可视化模型的性能。对于非技术人员来说，普通的准确性比模糊的统计数据更好，如 F1 分数或 AUC</li><li id="e2cd" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">他们需要讲一个故事。他们需要让人们在脑海中想象与模型交互的人，无论是成功还是出错。这意味着指标需要从最终用户的角度以及他们将如何体验该模型的角度来构建，而不是描述系统的一些内部属性。</li><li id="3743" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">他们需要人们理解的单位。在每一帧的基础上测量自动驾驶汽车的图像识别精度对于非技术观众来说没有意义。相反，更好地以分钟或小时来构建度量，例如没有错误的分钟或小时数。</li><li id="5211" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">它们通常应该更加简单——不那么规范化，并且包含类内平衡。你应该做的唯一的标准化工作就是用百分比来表示一个数字。非技术人员不喜欢 0 到 1 之间的数字，但是百分比很容易理解。</li></ul><p id="bcbd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">用于内部研发的指标&amp;需要稳定一致:</em></p><ul class=""><li id="93c1" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">如果你的指标会随着时间而变化，而代码没有任何变化，那么它对研发就没有用。例如，如果你的训练数据集随着时间快速增长。至少在继续之前，您需要锁定那些测试、培训和验证集。你可以在需要的时候定期更新它们，但是你应该至少用一两个月的时间来更新彼此可比的数字。时间越长越好。</li><li id="3062" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">您的度量标准需要对数据集中样本的各种属性保持相对不变。它应该根据样本的大小或复杂程度进行标准化。</li><li id="2802" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">理想情况下，您的度量对于数据集中任何已知的不平衡类都是不变的</li><li id="1421" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">您的度量标准需要相对“居中”，例如，它不应该真正接近完美，并且应该随着您的改进以有意义的方式改变。如果你已经接近 99.7%，但你的工作仍然是对那些 0.3%的误差进行改进，那么你可能会更好地重新定义你的指标“更难”，这样那些 0.3%误差的改进会被放大，更明显。不要测量前 5 个分类结果，而是向下移动到前 1 个测量。相反，即使你正在取得进步，一个指标保持在 0 附近也不是很有用。粒度必须适合你所在的研究阶段。</li><li id="5be5" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">该指标通常应该更倾向于“硬”的一面。这个指标的一个非常高的值应该给你最大的和完全的信心，你的模型真的很好。它不应留下任何不确定性或未决问题</li><li id="7928" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">度量标准应该提供一个“清晰的答案”，也就是说，当你得到度量标准的结果时，它不应该让你不确定你的改变实际上是更好还是更差。如果你用你的模型研究一个特定的子系统或问题，使用一个专门为该子系统或问题建立的指标会给你一个比你的通用端到端指标更清晰的答案。如果您的结果的噪声率大于您的预期改善，您需要增加交叉验证。</li><li id="b6d5" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">使用模糊的、结构化的指标更容易被接受。更容易接受的是拥有多个指标，系统特定子集的指标，并使用图形和图表来代替单一指标。</li></ul><p id="5514" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">用于衡量两个模型之间相对性能的指标不同于衡量其绝对性能的指标:</em></p><ul class=""><li id="cd8e" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">在衡量相对绩效时，我们有更多的自由来选择不同的指标。我们能想到的大多数指标都有一个“更好”或“更差”的良好定义，我们有与最终用户结果相关的合理预期。</li><li id="6116" class="lc ld iq kh b ki ll kl lm ko ln ks lo kw lp la lh li lj lk bi translated">当试图衡量绝对绩效时(例如，为了与经理、外部利益相关者沟通，或者仅仅是为了我们自己在产品发布前的评估)，我们需要更加挑剔。该指标需要与系统的“端到端”或“最终结果”行为非常一致。与非技术人员的度量标准非常相似，这些度量标准需要从用户的角度来构建。它们需要在最新可能的数据上完成，而不是在几个月前锁定的训练/测试集上完成。他们需要反映该模型的当前预期生产性能，如果它现在被部署到生产中的话。</li></ul><p id="cc97" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">用于编程目的的度量，如超参数优化或早期停止，对噪声的容忍度更高，但对差的度量构造的容忍度要低得多。</em></p><ul class=""><li id="25ae" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">根据定义，贝叶斯优化器是概率性且抗噪声的。这些算法可以从 5 倍的运行中获得更多的推理和知识，但是具有 5 倍的噪声结果，那么它们可以用 5 倍的运行减少 5 倍的噪声。如果您的度量标准构造得很差，问题就来了——现在您的贝叶斯优化器可能会使您的模型越来越适应您关心的方向，同时看起来会使它变得更好。当您接近模型的峰值性能时，通常会发生这种情况，此时定义不良的度量会阻止模型达到正确的峰值。</li></ul><p id="1547" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">用于所有目的的度量标准都需要捕捉你的算法用来概括的维度:</em></p><ul class=""><li id="6623" class="lc ld iq kh b ki kj kl km ko le ks lf kw lg la lh li lj lk bi translated">对于旨在根据过去的数据预测未来行为的系统，在广泛概括不同样本时测量算法性能的错误是常见的，而没有考虑这些样本是如何构造的。例如，对整个数据集进行 70/20/10 分割。但通常我们真正关心的是衡量它在时间维度上的表现。例如，基于用户在 9 月份及之前的数据来预测用户在 10 月份的行为。进行标准的 70/20/10 分割会给你的指标带来不公平的优势，因为该算法是根据未来的数据训练的，而衡量的是过去的数据。您的算法在真实的操作环境中实际上没有任何未来的数据可以学习，从而导致某种形式的泄漏。</li></ul><p id="3c8f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，这些只是我们注意到的关于选择好的度量标准的一些技巧和事情。对于如何衡量一个模型的问题，没有一个答案。稍微调整一下你的测量值，然后得到你想要的结果是非常容易的。如果你的模型表现不尽如人意，你可以调整你的衡量标准。但是这不是一个合理的科学实践——这只是自欺欺人。度量标准使用不当会导致错误的期望和错误的希望。</p><h1 id="08db" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">选择一个指标并坚持下去</h1><p id="3c5a" class="pw-post-body-paragraph kf kg iq kh b ki mi jr kk kl mj ju kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">当我第一次对数据科学和人工智能的理解变得复杂时，我在一家名为 Sensibill 的初创公司工作。我们的基本问题是从图像收据中提取结构化数据。但是我们都没有任何数据提取的专业知识——我们只是一群聚集在一起构建解决方案的全栈开发人员。在我们进行的过程中，他们操作的算法和数据集都被拼凑在一起。</p><p id="5f36" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我对测量精度问题的第一次体验来自于那些日子。在我开发这个系统的两年多时间里，我们不断引入越来越多的指标。当一个指标表明表现出色时，经理们会感到困惑，因为他们对现实世界中的表现的主观评价并不好。对此的回应将是引入一种新的衡量标准。这将每 3-6 个月重复一次。我们将创建用于测试的数据集的特定子集(一堆)。我们将对结果创建不同的验证程序，并根据它们来衡量我们的准确性。我们在不同的环境中会有不同的度量标准(生产对阶段对开发)。我们有滚动平均数和月度数字，最近 100 个数字，以及在测试集上即时计算的数字。我们会有一些指标报告优秀的结果，而其他指标似乎表明该模型几乎完全是狗屎。对我来说，它变成了度量沙拉，我们中没有人真正知道系统对我们的最终用户表现得有多好。我们也不清楚是什么让这个系统变得更好或更坏。</p><p id="ee8d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">随着经验的增加，回顾这些年，我开始明白问题不在于我们没有试图测量准确性。我们在系统的测量上投入了大量的精力。我们也不是不知道如何度量我们的系统——我们在这方面当然有很多专业知识，而且我们有的一些度量标准我现在会认为是我们应该信任的“正确”的(尽管我会做一些改进)。</p><p id="a69d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它不起作用的原因是我们从根本上混淆了不同指标的不同目的。我们知道我们想要回答的问题。但是，我们没有仔细选择哪些可用的指标可以给我们这些答案。此外，我们的度量标准并不真正适合我们的目的，并且总是有一些与我们所关心的相违背的缺陷。这个问题导致不同团队和部门之间的沟通中断，因为人们的期望与他们在应用程序中看到的不一致。这并不总是负面的——某些用户从应用程序中获得了异常好的结果——然而这只是因为他们上传了简短、简单的收据。这是一个有偏见的样本。期望和现实之间的这种不匹配导致花费更多的精力去开发更多的度量标准。</p><p id="8a60" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你已经仔细设计了你的度量标准，并且考虑了与之相关的所有问题；如果你确信它会真正回答你想回答的问题，那么就坚持下去。相信它。使用它来改进你的模型。适当地与人交流。当您添加新的指标时，请仔细考虑，不要让自己被指标沙拉淹没。为你的需求设计一些具体的、深思熟虑的度量标准。尝试升级、改进或替换现有指标，而不是创建额外的指标。创建临时的度量来解决特定的问题，然后在问题解决后丢弃它们，或者至少，将它们限制在自动化测试中。把你的眼睛放在奖品上。</p><h1 id="4ed6" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">结论</h1><p id="c62f" class="pw-post-body-paragraph kf kg iq kh b ki mi jr kk kl mj ju kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">在本文中，我们已经讨论了一个更好地度量模型的过程，通过一个深思熟虑的练习来了解您的度量需求。这个练习不应该超过几个小时，但是耗尽大脑能量并彻底完成这个过程可能会让你得到更好的模型。</p><p id="7f49" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该过程从考虑测量的原因开始。事实上，你会发现你有多个不同的目标。至少，每个人都会经历度量的外部沟通目的和度量的内部 R&amp;D 目的之间的二分法。</p><p id="7125" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们继续头脑风暴一堆候选指标。我们的目标不应该仅仅是假定一些常用的测量方法对我们来说是正确的。我们真的应该尝试考虑不同的测量方法，以及我们可以做出的潜在修改，以更好地服务于指标的目的。然后，只有在集思广益多个候选人的选择，我们评估每个人的利弊，为我们的目的。</p><p id="7163" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，在经历了这个过程并实际选择了一个(或多个)服务于您的目的的指标之后，您应该坚持使用它们。随着时间的推移，拥有一套可以作为可靠基准的指标对每个人都有好处——利益相关者、管理者和研究人员都受益。</p><p id="f910" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢您通读这一系列关于测量精度的文章。</p><p id="c71b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mn">原载于</em><a class="ae lb" href="https://www.electricbrain.io/blog/why-measuring-accuracy-is-hard-and-important-part-4-how-to-measure-accuracy-better" rel="noopener ugc nofollow" target="_blank"><em class="mn">www . electric brain . io</em></a><em class="mn">。</em></p></div></div>    
</body>
</html>