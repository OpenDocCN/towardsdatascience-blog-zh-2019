<html>
<head>
<title>Classification of Moscow Metro stations using Foursquare data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用 Foursquare 数据对莫斯科地铁站进行分类</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/classification-of-moscow-metro-stations-using-foursquare-data-fb8aad3e0e4?source=collection_archive---------17-----------------------#2019-06-12">https://towardsdatascience.com/classification-of-moscow-metro-stations-using-foursquare-data-fb8aad3e0e4?source=collection_archive---------17-----------------------#2019-06-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="4527" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">本帖是 Coursera </em> <a class="ae kp" href="https://www.coursera.org/specializations/ibm-data-science-professional-certificate" rel="noopener ugc nofollow" target="_blank"> <em class="ko"> IBM 数据科学专业专精</em> </a> <em class="ko">的压轴项目。完整的笔记本和数据在</em><a class="ae kp" href="https://github.com/theptyza/map_moscow_metro_foursquare" rel="noopener ugc nofollow" target="_blank"><em class="ko">Github</em></a><em class="ko">上有。</em></p><h1 id="5b3e" class="kq kr it bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">介绍</h1><p id="3505" class="pw-post-body-paragraph jq jr it js b jt lo jv jw jx lp jz ka kb lq kd ke kf lr kh ki kj ls kl km kn im bi translated">莫斯科地铁有 264 个车站，是世界上最大的公共交通系统之一。每天有超过 600 万人使用它。</p><p id="51a7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于这个项目，我们想看看地铁站周围的社区，并对它们进行分类。一些街区主要是住宅区，其他的周围有更多的商业区。离车站最近的场馆决定了人们使用它的原因和方式。例如，如果附近没有专业场所，居民可能会去其他地方工作。这造成了人们的日常迁移。</p><p id="79b5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过分析这些数据，我们可以根据站点的主要用途对其进行分类。这些数据有助于城市规划者确定人们最有可能去哪里工作和休闲，规划网络的进一步扩展和寻找新的发展空间。</p><h1 id="5cc1" class="kq kr it bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">数据</h1><p id="d186" class="pw-post-body-paragraph jq jr it js b jt lo jv jw jx lp jz ka kb lq kd ke kf lr kh ki kj ls kl km kn im bi translated">我们需要车站位置和离车站最近的场地的数据。</p><ol class=""><li id="3b02" class="lt lu it js b jt ju jx jy kb lv kf lw kj lx kn ly lz ma mb bi translated">站点列表及其地理坐标——从这个维基百科页面上刮下来的。</li></ol><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/8386a02dd591a31e904e8714d799fb26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*VuUcRBRZZRHanzmx5ZkSTw.png"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Stations data</figcaption></figure><p id="a93d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.Foursquare API 探索每个车站周围的场地类型。Foursquare 用更多的子类别概括了这些高层次的场馆类别。</p><ul class=""><li id="8ae8" class="lt lu it js b jt ju jx jy kb lv kf lw kj lx kn mo lz ma mb bi translated">艺术和娱乐(4d4b7104d754a06370d81259)</li><li id="631c" class="lt lu it js b jt mp jx mq kb mr kf ms kj mt kn mo lz ma mb bi translated">学院和大学(4d4b7105d754a06372d81259)</li><li id="8432" class="lt lu it js b jt mp jx mq kb mr kf ms kj mt kn mo lz ma mb bi translated">事件(4d4b7105d754a06373d81259)</li><li id="7050" class="lt lu it js b jt mp jx mq kb mr kf ms kj mt kn mo lz ma mb bi translated">食品(4d4b7105d754a06374d81259)</li><li id="ec66" class="lt lu it js b jt mp jx mq kb mr kf ms kj mt kn mo lz ma mb bi translated">夜生活场所(4d4b7105d754a06376d81259)</li><li id="9438" class="lt lu it js b jt mp jx mq kb mr kf ms kj mt kn mo lz ma mb bi translated">户外和娱乐(4d4b7105d754a06377d81259)</li><li id="a57f" class="lt lu it js b jt mp jx mq kb mr kf ms kj mt kn mo lz ma mb bi translated">专业和其他地方(4d4b7105d754a06375d81259)</li><li id="294a" class="lt lu it js b jt mp jx mq kb mr kf ms kj mt kn mo lz ma mb bi translated">住所(4e67e38e036454776db1fb3a)</li><li id="adb9" class="lt lu it js b jt mp jx mq kb mr kf ms kj mt kn mo lz ma mb bi translated">商店和服务(4d4b7105d754a06378d81259)</li><li id="ee8e" class="lt lu it js b jt mp jx mq kb mr kf ms kj mt kn mo lz ma mb bi translated">旅行和运输(4d4b7105d754a06379d81259)</li></ul><p id="1754" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将查询每个站点周围 1000 米半径范围内每个类别的场馆数量。选择这个半径是因为 1000 米是一个合理的步行距离。</p><h1 id="b194" class="kq kr it bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">方法学</h1><p id="6a61" class="pw-post-body-paragraph jq jr it js b jt lo jv jw jx lp jz ka kb lq kd ke kf lr kh ki kj ls kl km kn im bi translated">我们可以使用<a class="ae kp" href="https://developer.foursquare.com/docs/api/venues/explore" rel="noopener ugc nofollow" target="_blank"> Foursquare explore API </a>和<strong class="js iu">类别 ID </strong>来查询特定半径内每个类别的场馆数量。响应包含指定坐标、半径和类别的<strong class="js iu"> totalResults </strong>值。样品要求(1000 米半径和类别专业&amp;其他地方):</p><pre class="md me mf mg gt mu mv mw mx aw my bi"><span id="9a0d" class="mz kr it mv b gy na nb l nc nd">GET https://api.foursquare.com/v2/venues/explore?client_id={{client_id}}&amp;client_secret={{client_secret}}&amp;v={{v}}&amp;ll=<strong class="mv iu">55.7662,37.5692</strong>&amp;radius=<strong class="mv iu">1000</strong>&amp;categoryId=  <strong class="mv iu">4d4b7105d754a06375d81259</strong></span></pre><p id="8777" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">回应:</p><pre class="md me mf mg gt mu mv mw mx aw my bi"><span id="f4b9" class="mz kr it mv b gy na nb l nc nd">{<br/>    "meta": {<br/>        "code": 200,<br/>        "requestId": "5cfec0e31ed21914c1db7dd0"<br/>    },<br/>    "response": {<br/>        "suggestedFilters": {<br/>            "header": "Tap to show:",<br/>            "filters": [<br/>                {<br/>                    "name": "Open now",<br/>                    "key": "openNow"<br/>                }<br/>            ]<br/>        },<br/>        "headerLocation": "Presnensky",<br/>        "headerFullLocation": "Presnensky, Moscow",<br/>        "headerLocationGranularity": "neighborhood",<br/>        "query": "professional",<br/><strong class="mv iu">        "totalResults": 132,<br/>&lt;...&gt;<br/>}</strong></span></pre><p id="f956" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们已经获得了每个站点的数据。完整的 csv 可在<a class="ae kp" href="https://github.com/theptyza/map_moscow_metro_foursquare/blob/master/stations_venues_1000.csv" rel="noopener ugc nofollow" target="_blank"> Github </a>上获得。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi ne"><img src="../Images/639d319697541c7d04deabbe585a63c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jADr1Rlmdd3BeIQ3PWeI6Q.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Count of venues of each category in a 1000m radius for each station</figcaption></figure><h2 id="272b" class="mz kr it bd ks nj nk dn kw nl nm dp la kb nn no le kf np nq li kj nr ns lm nt bi translated">探索性分析和基本清理</h2><p id="8a5a" class="pw-post-body-paragraph jq jr it js b jt lo jv jw jx lp jz ka kb lq kd ke kf lr kh ki kj ls kl km kn im bi translated">我们来看数据。例如，我们可以看到，Turgenevskaya 站拥有最多的专业和其他场所(192)，而 Belokamennaya 站则为 0。</p><p id="e6b3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们以箱线图的形式显示场馆的数量(显示平均数量、分布和异常值)。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi nu"><img src="../Images/3e4d54233a3698bbfa174c2a82dcd8a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ALN4-H5YwQLdYk-wamxF7Q.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Boxplots of number of venues in each category</figcaption></figure><p id="56b7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以看到，最常见的场所类别是食品、商店和服务以及专业和其他场所。事件只有很少的数据，所以我们将丢弃它。</p><h2 id="ee55" class="mz kr it bd ks nj nk dn kw nl nm dp la kb nn no le kf np nq li kj nr ns lm nt bi translated">数据准备</h2><p id="082a" class="pw-post-body-paragraph jq jr it js b jt lo jv jw jx lp jz ka kb lq kd ke kf lr kh ki kj ls kl km kn im bi translated">让我们使用<a class="ae kp" href="https://en.wikipedia.org/wiki/Feature_scaling#Rescaling_(min-max_normalization)" rel="noopener ugc nofollow" target="_blank">最小-最大比例</a>来标准化数据(场馆数量从 0 到 1 的比例，其中 0 是一组中的最低值，1 是最高值)。这既规范了数据，同时也提供了一个易于解释的分数。缩放后的图表如下所示:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi nv"><img src="../Images/85b3fdfc4abc10f476d6ed636f2c98b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4L2UOMhgSwNgdYZHck4FJg.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Boxplots of scaled number of venues in each category</figcaption></figure><h2 id="8604" class="mz kr it bd ks nj nk dn kw nl nm dp la kb nn no le kf np nq li kj nr ns lm nt bi translated">使聚集</h2><p id="2b74" class="pw-post-body-paragraph jq jr it js b jt lo jv jw jx lp jz ka kb lq kd ke kf lr kh ki kj ls kl km kn im bi translated">我们将使用<a class="ae kp" href="https://en.wikipedia.org/wiki/K-means_clustering" rel="noopener ugc nofollow" target="_blank"> k 均值聚类</a>。这些是不同组数的初步结果:</p><ul class=""><li id="fe99" class="lt lu it js b jt ju jx jy kb lv kf lw kj lx kn mo lz ma mb bi translated">两个集群显示了住宅区/商业区的分界线</li><li id="129e" class="lt lu it js b jt mp jx mq kb mr kf ms kj mt kn mo lz ma mb bi translated">3 个集群增加了市区内的集群</li><li id="8abc" class="lt lu it js b jt mp jx mq kb mr kf ms kj mt kn mo lz ma mb bi translated">4 聚类还识别具有非常少数量的场所的邻近区域</li><li id="0e18" class="lt lu it js b jt mp jx mq kb mr kf ms kj mt kn mo lz ma mb bi translated">5 和更多的集群很难解释</li></ul><figure class="md me mf mg gt mh gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/ceaf485942094214856424967c15a9c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1098/1*x3-buZLKgIuin9m1jxovJw.gif"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Clustering with 2, 3 and 4 clusters.</figcaption></figure><p id="f40a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，让我们选择 4 个集群(0 到 3)。让我们用箱线图来直观地展示集群的轮廓。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi nx"><img src="../Images/7406a9b06dfaae938dd23d72694d10ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e1-S5rSPQ3-JnoHXysy_BQ.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Clusters and their relative count of venues</figcaption></figure><p id="c947" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">并将它们绘制在地图上(在<a class="ae kp" href="https://theptyza.github.io/map_moscow_metro_foursquare/map/" rel="noopener ugc nofollow" target="_blank">https://theptyza.github.io/map_moscow_metro_foursquare/map/</a>可获得完整的交互式地图)。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi ny"><img src="../Images/bfffbc94743eca450b4d2a555255b8d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hCBllihdVQHQYrljwNjQTA.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Clusters map. Cluster 0 is Blue, 1 is Green, 2 is Yellow and 3 is Red.</figcaption></figure><p id="4f7e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于每个电视台，我们将显示排名前 3 的场馆类别及其在该类别中的 0 到 1 分。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi nz"><img src="../Images/113ecb6f9a7cffdbccc92d014362ab2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m-czJhAZgz_4tahwzP4ROw.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Sample showing scores in top 3 venue categories</figcaption></figure><h1 id="a219" class="kq kr it bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">结果</h1><p id="483c" class="pw-post-body-paragraph jq jr it js b jt lo jv jw jx lp jz ka kb lq kd ke kf lr kh ki kj ls kl km kn im bi translated">下面是我们如何通过查看场地得分来描述集群的特征:</p><ul class=""><li id="1cb4" class="lt lu it js b jt ju jx jy kb lv kf lw kj lx kn mo lz ma mb bi translated">第 0 组(蓝色)在所有场馆类别中得分一直很高。这是这个城市发展最多样化的地区</li><li id="dd19" class="lt lu it js b jt mp jx mq kb mr kf ms kj mt kn mo lz ma mb bi translated">群组 1(绿色)在专业和其他地方得分最高。这是城市的商业区。</li><li id="8133" class="lt lu it js b jt mp jx mq kb mr kf ms kj mt kn mo lz ma mb bi translated">第 2 组(橙色)得分较低，在职业、居住和商店及服务方面得分最高。</li><li id="cb45" class="lt lu it js b jt mp jx mq kb mr kf ms kj mt kn mo lz ma mb bi translated">集群 3(红色)的分数普遍较低。这些似乎是不发达地区。</li></ul><p id="bcb2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在地图上绘制集群向我们展示了:</p><ul class=""><li id="0ec4" class="lt lu it js b jt ju jx jy kb lv kf lw kj lx kn mo lz ma mb bi translated">0 区是这座城市最古老的中心部分</li><li id="87e0" class="lt lu it js b jt mp jx mq kb mr kf ms kj mt kn mo lz ma mb bi translated">集群 1 也在市中心。这些车站大多位于<a class="ae kp" href="https://en.wikipedia.org/wiki/Koltsevaya_line" rel="noopener ugc nofollow" target="_blank">环线</a>内或附近，交通便利。</li><li id="a9e8" class="lt lu it js b jt mp jx mq kb mr kf ms kj mt kn mo lz ma mb bi translated">集群 2 和集群 3 的地理分布并不明显。第 3 组区域倾向于在郊区，但是一些区域位于更中心的位置。</li></ul><p id="f012" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一些站点被归类为第 3 类，尽管它们更靠近中心，更容易接近。这可能是关闭和废弃工厂的“锈带”的遗产。最近开通的<a class="ae kp" href="https://en.wikipedia.org/wiki/Moscow_Central_Circle" rel="noopener ugc nofollow" target="_blank">莫斯科中央环线</a>的许多车站都属于这一类。这些都是商业和住宅开发的黄金区域。</p><h1 id="184e" class="kq kr it bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">讨论</h1><p id="2b85" class="pw-post-body-paragraph jq jr it js b jt lo jv jw jx lp jz ka kb lq kd ke kf lr kh ki kj ls kl km kn im bi translated">公平地说，Foursquare 的数据并不包罗万象。数量最多的场馆是在食品和商店及服务类。数据没有考虑场地的大小(例如，大学建筑吸引的人比热狗摊多得多——每个人仍然是一个正方形的“场地”)。</p><h1 id="38bb" class="kq kr it bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">结论</h1><p id="b6ea" class="pw-post-body-paragraph jq jr it js b jt lo jv jw jx lp jz ka kb lq kd ke kf lr kh ki kj ls kl km kn im bi translated">Foursquare 的数据有限，但可以提供一个城市发展的洞察力。这些数据可以与其他来源(如城市居民人数数据)结合起来，以提供更准确的结果。</p></div></div>    
</body>
</html>