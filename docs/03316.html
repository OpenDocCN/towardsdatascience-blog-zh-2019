<html>
<head>
<title>Analyzing the Twitter Profile of India’s Newly Elected PM</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分析印度新当选总理的推特资料</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/analyzing-the-twitter-profile-of-indias-newly-elected-pm-b61ae0edf6a5?source=collection_archive---------15-----------------------#2019-05-27">https://towardsdatascience.com/analyzing-the-twitter-profile-of-indias-newly-elected-pm-b61ae0edf6a5?source=collection_archive---------15-----------------------#2019-05-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b789" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个简单的 Python 项目</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2ece730bdb55c3b6a0e373be8f855645.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bz3DVs69CUaN84bvdoCIdg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Source: Image by Author</figcaption></figure><p id="80d2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">免责声明:本博客与政治无关，只是出于学术兴趣而写。</p><p id="d9cc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">很长一段时间以来，我想写一篇关于使用 Python 分析真实用户数据的博客，以重温我的概念并探索新的主题。</p><p id="a6c9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">巧合的是，上周，6 亿印度人连续第二次投票选举纳伦德·莫迪为总理，莫迪是印度推特上关注最多的政治家，并有效地利用推特与选民沟通。因此，他的 Twitter 个人资料可能是一个成熟的分析数据的丰富来源。此外，分析一个政治家的声明是有趣的！</p><p id="0a84" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这就是为什么我决定为这个项目分析他的资料。这个博客对那些正在寻找基于真实数据的简单数据分析项目的人会有帮助。</p><p id="d0ac" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在深入细节之前，这里是项目的关键部分:</p><ul class=""><li id="953e" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt ma mb mc md bi translated">在 Twitter 上创建一个开发者账户</li><li id="6ccd" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">使用 Tweepy 删除推文</li><li id="6669" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">创建一个熊猫数据框架</li><li id="45a1" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">推文的统计分析</li><li id="98f3" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">情感分析</li><li id="52ca" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">词频分析</li><li id="5c5b" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">主题建模</li></ul><h1 id="5121" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">在 Twitter 上创建一个开发者账户</h1><p id="a4f8" class="pw-post-body-paragraph ky kz it la b lb nb ju ld le nc jx lg lh nd lj lk ll ne ln lo lp nf lr ls lt im bi translated">我只需要在<a class="ae ng" href="https://developer.twitter.com/en/account/get-started" rel="noopener ugc nofollow" target="_blank"> Twitter 开发者网站</a>上注册并回答几个问题。Twitter 的批准大约在 2-3 小时后发出。</p><p id="7e1e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们需要您的开发者帐户的以下信息:消费者密钥、消费者秘密、访问密钥和访问秘密。</p><h1 id="ca07" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">使用 Tweepy 删除推文</h1><p id="c2b2" class="pw-post-body-paragraph ky kz it la b lb nb ju ld le nc jx lg lh nd lj lk ll ne ln lo lp nf lr ls lt im bi translated"><a class="ae ng" href="https://tweepy.readthedocs.io/en/latest/getting_started.html#introduction" rel="noopener ugc nofollow" target="_blank"> Tweepy </a>是一个易于使用的 Python 库，用于访问 Twitter API。</p><p id="6a1d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，让我们导入我们将使用的所有库。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="d5c9" class="nm mk it ni b gy nn no l np nq">import tweepy <br/>import pandas as pd<br/>import numpy as np from IPython.display <br/>import display <br/>import matplotlib.pyplot as plt<br/>import seaborn as sns <br/>from textblob import TextBlob<br/>import re<br/>import warnings<br/>warnings.filterwarnings('ignore') <br/>%matplotlib inline</span></pre><p id="cc54" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，让我们保存所有的 Twitter 凭证。很明显我藏了我的。创建一个单独的文件来存储凭证是个好主意，但是我在同一个文件中使用了。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="0ae8" class="nm mk it ni b gy nn no l np nq">#It's not a good pratice to include the keys in the same code, as we have to display. However, I am lazy</span><span id="01e2" class="nm mk it ni b gy nr no l np nq">consumer_key = "XXXXXXXXXXXXXXXXX"<br/>consumer_secret = "XXXXXXXXXXXXXXXX"<br/>access_key = "XXXXXXXXXXXXXXXXXX"<br/>access_secret = "XXXXXXXXXXXXXXXXXX"</span></pre><p id="fbdb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，我们迭代提取推文，一次删除 200 条推文。在做这个分析时，我从鲁道夫·费罗对特朗普推文的博客情绪分析中获得了灵感。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h1 id="720a" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">创建一个熊猫数据框架</h1><p id="fce5" class="pw-post-body-paragraph ky kz it la b lb nb ju ld le nc jx lg lh nd lj lk ll ne ln lo lp nf lr ls lt im bi translated">让我们创建一个<a class="ae ng" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank">熊猫数据框架</a>，这将有助于分析 Twitter 数据。我们还需要了解我们下载的数据的结构。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/bd60d357eb0ab4b14d58127adf5d605d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jkw9BCmvuJGNaQsyIwNQdA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Source: Image by Author</figcaption></figure><p id="548a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，我们将把这些相关参数添加到数据帧中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h1 id="d48c" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">推文的统计分析</h1><p id="0f92" class="pw-post-body-paragraph ky kz it la b lb nb ju ld le nc jx lg lh nd lj lk ll ne ln lo lp nf lr ls lt im bi translated">这一段比较直截了当。我们希望得到简单的统计数据，比如推文的平均长度，最受欢迎的推文，以及多年来喜欢和转发的趋势。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="487f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，让我们看看过去两年中赞和转发的趋势。我还没有探究 Twitter 对 API 的一般访问的限制，但我相信它限制在 3200 条 tweets。这就是为什么我们只有最近两年的数据。</p><p id="803e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了绘制趋势，我们将创建熊猫系列，然后进行绘制。即使在这短暂的时间内，我们也可以观察到喜欢和转发的上升趋势。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="c2c3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们创建一些有趣的图表。</p><p id="b61e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首先，我们将创建一个关联图来了解被喜欢和转发的推文的特征。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/7d64885f58d935d3bc09d1c3ef23a8e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pFYmh85ycjRG4yNfkJcDhA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Source: Image by Author</figcaption></figure><p id="4c1a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一些不足为奇的发现是——RTs 和 Likes 高度相关。一些更有见地的学习包括:</p><ul class=""><li id="fe46" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt ma mb mc md bi translated">中等长度的推文会给莫迪带来更多的转发和点赞</li><li id="e1d6" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">这是有争议的。带有负面情绪的莫迪的推文通常会获得更多的 RTs 和赞。然而，它可能与表达对不幸事件的遗憾有关。</li></ul><p id="9f00" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">其次，让我们在散点图上绘制情感、喜欢和 RTs，以重新检查我们的假设。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="9f1c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这再次表明，带有负面情绪的推文获得了更多的即时战略和喜欢。然而，我们没有进行广泛的清理，印度英语(使用印地语)可能会影响这些结果。</p><h1 id="b41a" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">情感分析</h1><p id="0990" class="pw-post-body-paragraph ky kz it la b lb nb ju ld le nc jx lg lh nd lj lk ll ne ln lo lp nf lr ls lt im bi translated">对于情感分析，我们将使用 TextBlob。这是一个 Python 库，提供简单的 API 访问来执行基本的自然语言处理任务。</p><p id="a2cd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">TextBlob 的工作方式就像 Python 字符串一样，因此可以类似地用于转换数据。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="daa8" class="nm mk it ni b gy nn no l np nq">exampleText=TextBlog("Ajitesh")<br/>exampleText[1:3]</span></pre><p id="c46d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出→ TextBlob("ji ")</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="93ee" class="nm mk it ni b gy nn no l np nq">exampleText.upper()</span></pre><p id="562d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Output- TextBlob("AJITESH ")</p><p id="82e9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将分三步进行情感分析——清理 Tweet 的文本、标记化和情感分析。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/51cfed289daa8d772516c7b8a51d5364.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AsgkJeiUgESbuThA46Gwag.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Source: Image by Author</figcaption></figure><p id="ede5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在分析这些推文时，我们只想局限于莫迪发布的推文。尽管我们无法识别莫迪先生转发的推文。我们有一条捷径。我们可以忽略零赞的推文，因为 Twitter 不会给转发推文的用户指定“赞”。此外，莫迪的任何推文都不太可能没有“赞”。</p><p id="6c76" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们从数据清理步骤开始。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="4949" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，我们将做标记化和情感分析。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h1 id="7aff" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">词频分析</h1><p id="8de4" class="pw-post-body-paragraph ky kz it la b lb nb ju ld le nc jx lg lh nd lj lk ll ne ln lo lp nf lr ls lt im bi translated">对我来说，莫迪先生最令人难忘的倡议之一是“Swachh Bharat”，一项保持印度清洁的倡议。让我们看看他在这些推文中提到了多少次“Swachh Bharat”。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="3f06" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们先创建一个词云来可视化不同词的相对使用频率。我已经创建了一个简单的单词云，但是你可以想象一下，创建一个<a class="ae ng" href="http://amueller.github.io/word_cloud/auto_examples/colored.html#sphx-glr-auto-examples-colored-py" rel="noopener ugc nofollow" target="_blank">图像颜色的单词云</a>。</p><p id="2573" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有趣的是，西孟加拉邦和奥迪萨被提及的频率更高，莫迪的政党在这两个地方取得了惊人的进展。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="b67f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我还用旧的 python 方式创建了一个频率表:</p><ul class=""><li id="c18f" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt ma mb mc md bi translated">创建映射单词和频率的词典</li><li id="ff2a" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">然后，将单词及其频率作为元组存储在列表中</li><li id="3449" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated">最后，对列表进行排序并打印结果</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h1 id="eab0" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">主题建模</h1><p id="64d9" class="pw-post-body-paragraph ky kz it la b lb nb ju ld le nc jx lg lh nd lj lk ll ne ln lo lp nf lr ls lt im bi translated">假设你有圣雄甘地所有的文本形式的演讲。你可以使用主题模型来描绘这些演讲中的关键主题。</p><p id="6699" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我在 PyTexas 看到了 Christine Doig 关于主题建模的精彩演讲，并尝试在我们的案例中实现。</p><p id="6f9d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本质上，在主题建模中，我们使用统计模型来发现大量无组织文本中出现的抽象主题。这是一种无监督的学习方法。下图解释了我们通过主题建模想要达到的目标。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/61bdc209d890a7f56a267c8b412c5a35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xRpSZwhZTdL_n4tAdPsUhA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Source: <a class="ae ng" href="https://www.youtube.com/watch?v=BuMu-bdoVrU" rel="noopener ugc nofollow" target="_blank">Christine Doig</a> Slides (Image by Author)</figcaption></figure><p id="4cd1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有两种方法进行主题建模——LSA(潜在语义分析)和概率推理方法，如 LDA(潜在狄利克雷分配)。下面是 LSA 和 LDA 之间差异的图示。在我们的例子中，我们将使用 LDA。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/0bfb044e1627b1283cac40164f4c74c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i1iBSJAkpWm86G1LKlfnJQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Source — Topic Modelling by <a class="ae ng" href="https://www.youtube.com/channel/UCIXpjlxPL5Ow8rPO_gOHISQ" rel="noopener ugc nofollow" target="_blank">Jordan Boyd-Graber</a> (Image by Author)</figcaption></figure><p id="cfc8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们实现 LDA 来分析推文中的主题。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/c273b600a0a62937b9a245941d902b7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kHQHOpEPnfpff2wsdXTVKw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">source — Image by Author</figcaption></figure><p id="7738" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出是一个交互式图形，我不知道如何嵌入。然而，您可以在这里找到带有输出的<a class="ae ng" href="https://gist.github.com/ajitesh123/c0695b8185898202f1f2a45a6f4accb7" rel="noopener ugc nofollow" target="_blank">完整代码</a>。</p><p id="2982" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我可以看到两个清晰的主题——政治和感恩——分别用 4 和 1 来表示。然而，主题建模在这里没有多大用处。我可能会把这些应用到一系列的演讲中。</p><p id="d2ec" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我这边就这样。我知道我们可以在这里做更多的分析。请评论让我知道我还可以探索什么。</p></div></div>    
</body>
</html>