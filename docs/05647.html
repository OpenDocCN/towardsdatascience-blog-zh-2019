<html>
<head>
<title>Lifetime Value Calculation for Subscription Businesses</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">订阅业务的终身价值计算</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/calculating-life-time-value-for-subscription-businesses-d477a3194b32?source=collection_archive---------9-----------------------#2019-08-19">https://towardsdatascience.com/calculating-life-time-value-for-subscription-businesses-d477a3194b32?source=collection_archive---------9-----------------------#2019-08-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/3a335f2cb5a2342e21df0c6f687e073b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zCjHMaYYR9A6avVq"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Photo by <a class="ae kf" href="https://unsplash.com/@austindistel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Austin Distel</a> on <a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="670b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是千真万确的，如果你不能衡量它，你就不能管理你的业务。基于订阅的业务的一个关键指标是终身价值(LTV)或客户终身价值(CLV)。简而言之，LTV 意味着在客户的一生中产生的总预期价值。让我们进一步分解这个概念:</p><ul class=""><li id="82ad" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated">LTV 是一个<strong class="ki iu">期望值</strong>，这意味着它是平均的或统计推断的。</li><li id="720c" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">LTV 衡量<strong class="ki iu">价值</strong>，即企业关心的价值指标，如收入、利润等。</li><li id="f5ec" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">LTV 已经过了他的一生。例外的情况是，一家企业在一段时间后会终止与客户的关系😢，这是极不可能的，也是违背常识的。</li></ul><p id="c28c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在数学上，客户 LTV 可以表示为:</p><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ls"><img src="../Images/70fa64fb768abd55368d7384849cf4a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x2guwkZ5qO3yt98tdwKTsQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">LTV calculation</figcaption></figure><p id="4866" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">其中<code class="fe lx ly lz ma b">v_i</code>代表价值，<code class="fe lx ly lz ma b">s_i</code>代表计费周期<code class="fe lx ly lz ma b">i</code>的留存率或存活率。计费周期可以是一周、一个月、一个季度，甚至一年，这取决于商业模式。周期总数<code class="fe lx ly lz ma b">N</code>代表利息的持续时间，也取决于商业模式。对于按年订阅的模式，<code class="fe lx ly lz ma b">N = 100</code>应该足够好了。从数学公式来看，我想你已经知道为什么 LTV 度规越来越受欢迎了。它同时衡量盈利能力(<code class="fe lx ly lz ma b">v_i</code>)和客户忠诚度或粘性(<code class="fe lx ly lz ma b">s_i</code>)，并将它们很好地结合成一个指标。让我们用下面的玩具例子来说明计算。</p><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mb"><img src="../Images/91f1ce305397b65d2672f8a7ff4b1d5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O7NgAOGB3vWeXR53kHtPZw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">LTV calculation</figcaption></figure><p id="02a6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如表中所示，订阅产品在每个计费周期从客户身上获得 10 美元的价值。周期流失率为 30%,因此保留的客户百分比为 100%、70%、56%……因此，第 1、2、3 周期产生的有效客户价值为 10 美元、7 美元、5.6 美元……将所有产生的价值相加，总 LTV 约为 45 美元(40 个周期后该数字稳定下来)。</p><p id="1350" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如您所见，计算非常直观。然而，对于一个真正的企业或产品来说，这可能一点也不简单。一种情况是<code class="fe lx ly lz ma b">v_i</code>可能会受到通货膨胀、商品成本波动、季节性等因素的影响。另一种情况是，观察到的账单周期总数可能不足以构建计算 LTV 所需的<code class="fe lx ly lz ma b">s_i</code>，这最有可能发生在年轻企业。在接下来的内容中，我将关注后一种情况，并展示如何使用更系统的方法来计算<code class="fe lx ly lz ma b">s_i</code>。</p><h1 id="1f50" class="mc md it bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">模拟存活率</h1><p id="0266" class="pw-post-body-paragraph kg kh it ki b kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz ne lb lc ld im bi translated">我们通常不会直接获得存活率<code class="fe lx ly lz ma b">s_i</code>，而是从计费周期流失率<code class="fe lx ly lz ma b">c_i</code>入手。<code class="fe lx ly lz ma b">s_i</code>和<code class="fe lx ly lz ma b">c_i</code>的关系如下图所示。</p><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nf"><img src="../Images/20440c9ab1a09b34d962b3a81b30b02a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0A4ufwKZk--jm1QkiHKJtQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Survival rate calculated from churn rate</figcaption></figure><p id="1216" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显然，流失率在 0%(没有客户在该周期后流失)和 100%(每个客户在该周期后流失)之间，因此随着周期数的增加，存活率总是从 100%下降到 0%。有几种方法可以获得流失率<code class="fe lx ly lz ma b">c_i</code>。</p><h2 id="bc87" class="ng md it bd me nh ni dn mi nj nk dp mm kr nl nm mq kv nn no mu kz np nq my nr bi translated">1.经验计算</h2><p id="8332" class="pw-post-body-paragraph kg kh it ki b kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz ne lb lc ld im bi translated">获取流失率最简单的方法就是根据历史观察值计算每个计费周期的流失率，也称为<a class="ae kf" href="https://en.wikipedia.org/wiki/Kaplan%E2%80%93Meier_estimator" rel="noopener ugc nofollow" target="_blank">卡普兰-迈耶估计量</a> (KM 曲线)，可以表示如下</p><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/c075af132b809b479973d792f5a7603b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*yVjO25qEhi0Mc4G63uQnmg.png"/></div></figure><p id="2549" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">其中<code class="fe lx ly lz ma b">d_i</code>是周期<code class="fe lx ly lz ma b">i</code>中的下降次数，<code class="fe lx ly lz ma b">n_i</code>是周期<code class="fe lx ly lz ma b">i</code>开始时的客户数。</p><p id="075a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这种方法直观且易于实施和计算，但是，它通常不适用于年轻的企业。具体来说，一个年轻的企业通常没有很多计费周期，没有大量的<code class="fe lx ly lz ma b">n_i</code>可用于计算流失率。下图显示了年轻企业和成熟企业之间的比较。请注意，对于年轻的企业，流失率比已建立的企业跨越的周期更少，并且在接近结束时变得更嘈杂，因为其总样本量<code class="fe lx ly lz ma b">n_i</code>在接近最后一个周期时变得越来越小，而对于已建立的企业来说，情况并非如此。你要知道，嘈杂的流失率更多的是一种短暂的影响。随着企业客户群的增长和稳定，将会有更多的客户数据可用，因此嘈杂的蓝色曲线应该越来越接近平滑的橙色曲线。</p><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nt"><img src="../Images/ee55be776f1e0afb02aeafafd143a6c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3JILnrbAfAh3qw3kWzCIEQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Churn Rate Comparison</figcaption></figure><p id="d8e5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">至于计算，可以用 excel、SQL、Python、R 等。在 R 中，已经存在一个名为<code class="fe lx ly lz ma b">suvival</code>的包来简化生存分析，包括 KM 生存曲线计算。以<a class="ae kf" href="https://github.com/IBM/invoke-wml-using-cognos-custom-control" rel="noopener ugc nofollow" target="_blank"> IBM Watson telco 客户演示数据集</a>为例，我们可以用如下所示的几行代码计算并绘制 KM 存活率和流失率曲线。</p><figure class="lt lu lv lw gt ju"><div class="bz fp l di"><div class="nu nv l"/></div></figure><div class="lt lu lv lw gt ab cb"><figure class="nw ju nx ny nz oa ob paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><img src="../Images/1052226614def8a4b46d255686f31486.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*KrsF5kgeGQeWJWd1xTN0Ww.png"/></div></figure><figure class="nw ju oc ny nz oa ob paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><img src="../Images/b288c56b14d7c0ddda6fe3b032bf47f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*1qmvHqeWFdqzR2yeXjooQg.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk od di oe of">(Left) Survival curve in black with 95% confidence band in gray (Right) Churn rate</figcaption></figure></div><p id="9d1f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你有兴趣了解更多关于 KM 曲线的知识，你可以看看 Lauren Oldja 写的一篇关于它的详细文章。</p><h2 id="50e7" class="ng md it bd me nh ni dn mi nj nk dp mm kr nl nm mq kv nn no mu kz np nq my nr bi translated">2.统计推断</h2><p id="7d0b" class="pw-post-body-paragraph kg kh it ki b kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz ne lb lc ld im bi translated">正如前面的方法所指出的，我们不能真的把卡普兰-迈耶方法用于年轻的企业。那么，还有别的办法吗？是的，统计数据来拯救我们了。为了构建一个合理的生存曲线来估计只有几个周期可用的 LTV，我们需要进行统计推断。</p><p id="0fca" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">与非参数 Kaplan-Meier 方法(其中没有估计参数)不同，统计推断是参数化的。其思想是，我们假设客户流失事件遵循一定的概率分布。常用的分布模型有指数、对数正态、威布尔、伽玛等。给定统计分布模型，然后您可以使用最大似然法来找到符合历史流失数据的最佳参数。在拟合之后，可以使用该模型推断未来周期的流失概率。R 中的<code class="fe lx ly lz ma b">survival</code>包也为生存模型拟合提供了很好很简单的工具。继续前面的例子，我们可以使用下面的代码来生成拟合的生存曲线</p><figure class="lt lu lv lw gt ju"><div class="bz fp l di"><div class="nu nv l"/></div></figure><figure class="lt lu lv lw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oi"><img src="../Images/c175664d3416558181d91724f8e3880e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VpUsdSJtw-Lo6y6dI6CNeQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Survival curve using Weibull Model</figcaption></figure><p id="8f28" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如你所看到的，拟合的生存变动是平滑的，我们能够用它来估计未来的存活率，用于 LTV 计算。此外，我们可以从曲线中得出一些有趣的指标。例如，我们预计 50%的客户将在第 120 周期前离开，如上面的蓝色虚线所示。您还可以计算生存曲线下的面积，以获得客户的平均终身任期期望。</p><h2 id="2aca" class="ng md it bd me nh ni dn mi nj nk dp mm kr nl nm mq kv nn no mu kz np nq my nr bi translated"><strong class="ak"> 3。机器学习</strong></h2><p id="e025" class="pw-post-body-paragraph kg kh it ki b kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz ne lb lc ld im bi translated">机器学习无处不在，预测未来。我们还可以利用它来计算流失率。事实上，它是我最喜欢的选择，因为我们可以针对这个问题使用各种机器学习技术，如特征工程，交叉验证，正则化等。</p><p id="b916" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">客户流失建模本质上是一个二元分类问题。有许多机器学习模型可以解决这个问题，但是，我使用逻辑回归，因为我们需要推断未来的流失率，因此看不见的计费周期和模型，如随机森林和梯度提升机器无法执行这种推断。以下代码使用了 H2O 机器学习包，并拟合了流失和周期之间的单变量逻辑回归模型。</p><figure class="lt lu lv lw gt ju"><div class="bz fp l di"><div class="nu nv l"/></div></figure><div class="lt lu lv lw gt ab cb"><figure class="nw ju oj ny nz oa ob paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><img src="../Images/7e9db1e59ee37a195700bd222ea488a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*TAvAVulJG3Akoc_PL_FcLg.png"/></div></figure><figure class="nw ju ok ny nz oa ob paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><img src="../Images/00d6ac2e5ff7f1080e3a1c4ca59ce4ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*4VIWbjIcrVXYU2smGJ9fcA.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk od di oe of">(Left) Survival rate by cycle (Right) churn rate by cycle</figcaption></figure></div><p id="b0bd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如我们所看到的，虽然这个简单的模型可以拟合生存和流失曲线的整体趋势，但它并不能很好地拟合 cycle 1。为了减轻这种情况，一个技巧是您可以添加一个二进制特性<code class="fe lx ly lz ma b">special_cycle</code>,对于周期 1 为 1，其余为 0。修改后的代码和结果如下。</p><figure class="lt lu lv lw gt ju"><div class="bz fp l di"><div class="nu nv l"/></div></figure><div class="lt lu lv lw gt ab cb"><figure class="nw ju ol ny nz oa ob paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><img src="../Images/466c52757c69baec49c0813b8c3cba30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*MuOQlXUq4Y3Tb27UXZFjlg.png"/></div></figure><figure class="nw ju om ny nz oa ob paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><img src="../Images/933dd38a1febf2ef0a04def2d6203bfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*d_7o6-bEyL5wWCWfWC2e0w.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk od di oe of">(Left) Survival rate by cycle (Right) churn rate by cycle</figcaption></figure></div><h1 id="d16e" class="mc md it bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">结论</h1><p id="2bb4" class="pw-post-body-paragraph kg kh it ki b kj na kl km kn nb kp kq kr nc kt ku kv nd kx ky kz ne lb lc ld im bi translated">在本帖中，我们讨论了订阅业务的 LTV 公式和计算方法，并重点讨论了计算存活率/流失率的 3 种不同方法。我希望你喜欢这篇文章，并让我知道你的想法！</p></div></div>    
</body>
</html>