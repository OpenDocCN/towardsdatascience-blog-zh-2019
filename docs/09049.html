<html>
<head>
<title>Send Email with Beautiful Form in Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">发送电子邮件与美丽的形式在安卓系统</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/send-email-with-beautiful-form-in-android-b12cd5cc9572?source=collection_archive---------19-----------------------#2019-12-02">https://towardsdatascience.com/send-email-with-beautiful-form-in-android-b12cd5cc9572?source=collection_archive---------19-----------------------#2019-12-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a63b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在本文中，我们将发送一封包含精心设计的表单的电子邮件，以显示随邮件发送的数据。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5ae5fa4d4f1cdf68a736f420b748a99b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f4134VJVk5qJxSFvRFkbcw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image from <a class="ae kv" href="https://unsplash.com/photos/3Mhgvrk4tjM" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b7d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">众所周知，使用电子邮件对我们所有人来说已经变得必要和重要。有各种电子邮件服务提供商，如雅虎、Outlook、iCloud 和 Gmail 等。这些科技巨头为每个用户提供免费电子邮件服务。如果你使用互联网，那么就没有办法忽视它，因为无论何时你访问任何网站/应用程序来在线购买/销售产品。首先，你必须在这些网站/应用上注册，以证明你在现实世界中的身份。</p><p id="d998" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将学习如何使用 JavaMail API 将 Gmail 收件箱中的电子邮件发送到指定的电子邮件地址。我们将发送普通用户数据，如用户名、电子邮件地址、手机号码等。</p><p id="3863" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以让我们开始吧。</p><h1 id="e2e7" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">第一步</h1><ul class=""><li id="5fa1" class="mk ml iq ky b kz mm lc mn lf mo lj mp ln mq lr mr ms mt mu bi translated">首先用空活动创建 android 项目，并在根目录下创建名为 MailSender.java 和 JSSEProvider.java 的 java 类。</li><li id="6078" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">现在我们需要将 Java 邮件 API jar 文件导入到我们的项目中。从<a class="ae kv" href="http://script.astromyntra.in/javamailapi.zip" rel="noopener ugc nofollow" target="_blank">这里</a>下载 jar 文件，解压后粘贴到<em class="na"> libs </em>文件夹中。</li><li id="b985" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">如果你的项目不能识别你的库，那么重启 Android studio。</li><li id="c4fe" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">右键单击应用程序-&gt;新建-&gt;文件夹-&gt;资产文件夹，创建资产文件夹。我们将把 HTML 文件放在这里，以便在 Gmail 上显示数据。</li><li id="02d5" class="mk ml iq ky b kz mv lc mw lf mx lj my ln mz lr mr ms mt mu bi translated">要发送电子邮件，你的应用需要互联网连接，所以在你的<em class="na"> AndroidManifest.xml </em>文件中声明这个权限。</li></ul><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="98b1" class="ng lt iq nc b gy nh ni l nj nk">&lt;<strong class="nc ir">uses-permission android:name="android.permission.INTERNET"</strong>/&gt;</span></pre><h1 id="3efb" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">第二步</h1><ul class=""><li id="f3b2" class="mk ml iq ky b kz mm lc mn lf mo lj mp ln mq lr mr ms mt mu bi translated">在 MailSender.java 类中创建一些实例变量</li></ul><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="aa65" class="ng lt iq nc b gy nh ni l nj nk"><em class="na">// change this host name accordingly<br/></em><strong class="nc ir">private </strong>String <strong class="nc ir">mailhost </strong>= <strong class="nc ir">"webmail.xyz.in"</strong>;<br/><strong class="nc ir">private </strong>String <strong class="nc ir">user</strong>;<br/><strong class="nc ir">private </strong>String <strong class="nc ir">password</strong>;<br/><strong class="nc ir">private </strong>Session <strong class="nc ir">session</strong>;<br/>Context <strong class="nc ir">context</strong>;<br/><strong class="nc ir">private </strong>Multipart <strong class="nc ir">_multipart </strong>= <strong class="nc ir">new </strong>MimeMultipart();</span></pre><ul class=""><li id="5b2a" class="mk ml iq ky b kz la lc ld lf nl lj nm ln nn lr mr ms mt mu bi translated">现在在 MailSender.java 文件中创建静态块来调用 JSSEProvider.java 类。JSSEProvider 用于链接 SSLContext、X509 的 KeyManagerFactory、X509 的 TrustManagerFactory 和 AndroidCAstore 的修改版本。</li></ul><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="7ac9" class="ng lt iq nc b gy nh ni l nj nk"><strong class="nc ir">static </strong>{<br/>    Security.<em class="na">addProvider</em>(<strong class="nc ir">new </strong>JSSEProvider());<br/>}</span></pre><ul class=""><li id="4b8d" class="mk ml iq ky b kz la lc ld lf nl lj nm ln nn lr mr ms mt mu bi translated">创建参数化的构造函数(传递上下文，“发件人电子邮件 id”和“密码”等。)来初始化实例变量，并创建一个<em class="na"> Properties </em>类的对象来设置构造函数内部的属性。在其中传递上下文、用户电子邮件 id 和密码。看一看构造函数代码。</li></ul><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="f8be" class="ng lt iq nc b gy nh ni l nj nk"><strong class="nc ir">public </strong>MailSender(Context context,String user, String password) {<br/>    <strong class="nc ir">this</strong>.<strong class="nc ir">user </strong>= user;<br/>    <strong class="nc ir">this</strong>.<strong class="nc ir">password </strong>= password;<br/>    <strong class="nc ir">this</strong>.<strong class="nc ir">context </strong>= context;<br/><br/>    Properties props = <strong class="nc ir">new </strong>Properties();<br/>    props.setProperty(<strong class="nc ir">"mail.transport.protocol"</strong>, <strong class="nc ir">"smtp"</strong>);<br/>    props.setProperty(<strong class="nc ir">"mail.host"</strong>, <strong class="nc ir">mailhost</strong>);<br/>    props.put(<strong class="nc ir">"mail.smtp.auth"</strong>, <strong class="nc ir">"true"</strong>);<br/>    props.put(<strong class="nc ir">"mail.smtp.port"</strong>, <strong class="nc ir">"465"</strong>);<br/>    props.put(<strong class="nc ir">"mail.smtp.socketFactory.port"</strong>, <strong class="nc ir">"465"</strong>);<br/>    props.put(<strong class="nc ir">"mail.smtp.socketFactory.class"</strong>, <strong class="nc ir">"javax.net.ssl.SSLSocketFactory"</strong>);<br/>    props.put(<strong class="nc ir">"mail.smtp.socketFactory.fallback"</strong>, <strong class="nc ir">"false"</strong>);<br/>    props.setProperty(<strong class="nc ir">"mail.smtp.quitwait"</strong>, <strong class="nc ir">"false"</strong>);<br/><br/>    <strong class="nc ir">session </strong>= Session.<em class="na">getDefaultInstance</em>(props, <strong class="nc ir">this</strong>);<br/>}</span></pre><ul class=""><li id="7ab3" class="mk ml iq ky b kz la lc ld lf nl lj nm ln nn lr mr ms mt mu bi translated">创建密码验证器方法来验证您的帐户。</li></ul><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="4f9e" class="ng lt iq nc b gy nh ni l nj nk"><strong class="nc ir">protected </strong>PasswordAuthentication getPasswordAuthentication() {<br/>    <strong class="nc ir">return new </strong>PasswordAuthentication(<strong class="nc ir">user</strong>, <strong class="nc ir">password</strong>);<br/>}</span></pre><ul class=""><li id="9597" class="mk ml iq ky b kz la lc ld lf nl lj nm ln nn lr mr ms mt mu bi translated">最后，创建用户定义的方法<em class="na"> sendUserDetailWithImage()将数据发送到邮件。下面的</em>代码片段从 assets 文件夹中提取 user_profile.html，将其转换为一个缓冲区，然后从缓冲区中读取它，最后将其转换为一个 string 对象，用实际的用户名替换关键字“$$username$$”等等。查看完整的<em class="na">senduserdetailwithiimage()</em>代码。</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="7225" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看看完整的 MainSender.java 代码</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><h1 id="f878" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">第三步</h1><p id="d9f2" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated">要在表单中显示数据，请在 assets 文件夹中创建名为 user_profile.html 的 HTML 文件，并粘贴以下代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="f2a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">HTML 代码的输出看起来像这样</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/bfe5ea25c89e17fce3597ba7e6010fc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VxHe0ncoInGCmQWSHpJ_yA.png"/></div></div></figure><h1 id="bab7" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">第四步</h1><p id="5a4e" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated">最后，将下面的代码粘贴到 MainActivity 中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><h1 id="ac1b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结果</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/4b8fea04b905f06ba9522e3f9ddbf2ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TgjTV3-_CZANj00wzvKDOQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Data received on Gmail</figcaption></figure><p id="794d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">注意:</strong>如果你这边一切正常，但还是没有收到邮件，请检查你的垃圾邮件文件夹，如果有，点击“标记为非垃圾邮件”。</p><h1 id="2cc4" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="7afa" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated">我创建了一个 android 项目，以电子邮件的形式发送用户数据。我使用过 JavaMail API 发送电子邮件。在本文中，我发送了 HTML 表单和数据。</p><p id="9788" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你对这篇文章有任何疑问，请在评论区问我。另外，你可以在我的<a class="ae kv" href="https://github.com/himanshujbd/MailSender" rel="noopener ugc nofollow" target="_blank"> Github </a>账户上找到这篇文章的完整源代码。</p><p id="6cba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望你喜欢读这篇文章，你也可以访问我的<a class="ae kv" href="http://thehimanshuverma.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">网站</strong> </a> <strong class="ky ir"> </strong>，在那里我会定期发布文章。</p><p id="5c38" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://mailchi.mp/b08da935e5d9/himanshuverma" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">订阅</strong> </a>我的邮件列表，以便直接在您的收件箱中提前获得我的文章，或者关注我自己在 Medium 上发表的文章<a class="ae kv" href="https://medium.com/the-code-monster" rel="noopener"><strong class="ky ir">The Code Monster</strong></a>以完善您的技术知识。</p><h1 id="d41f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">了解你的作者</h1><p id="847c" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated">希曼舒·维尔马毕业于印度勒克瑙的 APJ 阿卜杜勒·卡拉姆大学博士。他是 Android &amp; IOS 开发人员、机器学习和数据科学学习者、金融顾问和博客作者。</p></div></div>    
</body>
</html>