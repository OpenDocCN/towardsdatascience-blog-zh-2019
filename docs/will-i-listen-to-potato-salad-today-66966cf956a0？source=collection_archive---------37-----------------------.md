# 我今天要听土豆沙拉吗？

> 原文：<https://towardsdatascience.com/will-i-listen-to-potato-salad-today-66966cf956a0?source=collection_archive---------37----------------------->

## 利用数据、统计和机器学习来理解我对这首歌的痴迷

请原谅我，因为这听起来很疯狂。

有一首歌是由*泰勒、创作者*和 *A$AP 洛基*创作的，名叫**土豆沙拉**，我喜欢它。我的女朋友说我经常玩，等等，算了，我的女朋友和朋友坚持我经常玩，我办公室的同事经常问我是否每天都吃土豆。所以显然我很喜欢它。

给一点上下文，土豆沙拉是一首有趣，清新，明确，甚至欢快的歌曲，其中泰勒和洛奇说唱嘻哈的状态，他们有多少钱(经典！)，以及他们对时尚的选择(例如，Rocky 指定他的香奈儿包不是钱包，而是挎包。两次。).这首歌让我着迷的是它的节拍，以及它与高尔夫男孩和 A$AP 酒吧融合的流畅和温和；还有名字也挺搞笑的。最重要的是，这个音乐视频感觉像是两个朋友在周日下午做的项目，为一首已经很酷的歌曲增加了一点额外的滑稽和现实。有什么不喜欢的地方:)？

Potato Salad

总之，回到我的困扰。我已经确定我喜欢这首歌，当然，作为一个数据人，我想用事实和数据来验证这一点。带着这个目的，我进行了一个实验，其目标是找到以下四个问题的答案:

1.  我听了多少遍土豆沙拉了？
2.  我的倾听模式是什么？
3.  在特定的日子和时间里，我听土豆沙拉的可能性有多大？
4.  有没有可能用预测性的机器学习模型来预测我会不会玩土豆沙拉？

在这篇文章中，我将分享我的发现。

![](img/3664995bd782987b7b62c01e94c1d167.png)

Image by [kartynas](https://pixabay.com/users/kartynas-1313961/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=895006) from [Pixabay](https://pixabay.com/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=895006)

## 数据

这个实验最重要的部分是数据，尤其是关于我听土豆沙拉时的数据。幸运的是，自 2017 年 10 月以来，我一直在登录 **BigQuery** 查看我在 **Spotify** 上播放的每一首歌曲，使用的脚本一直在云中运行。这个用 **Python** 编写的脚本，利用一个名为 **Spotipy** 的 Spotify 库，每三个小时调用一次 Spotify 的*“recent _ played”*API 端点，检索我在过去三个小时播放的所有歌曲。有了存储在 BigQuery 中的数据，只需运行一个简单的查询来选择 ID 为`1jzIJcHCXneHw7ojC6LXiF`(Spotify 上的土豆沙拉 ID)的所有歌曲。

## 我听了多少遍了🥔 🥗？

先说最直白的问题:这首歌我听了多少遍了？答案是 **104** ，一个还可以的数字(老实说，我期待更多)，使它成为我听到最多的歌曲。本身这个值不多说；然而，就百分比而言，土豆沙拉代表了我整个收听历史中 **0.57%** 。更好的是，如果我只考虑我第一次土豆(2018–10–12)之后播放的歌曲，百分比增加到 **2.05%** 。

我想知道的第二个重要信息是，自从我第一次喜欢土豆沙拉以来，我已经听了多少天了。值为 2018 年 10 月 10 日至 2019 年 4 月 13 日天数的 **66** 或 **35.86%** 。简单来说，这上面写着自 2018 年 10 月 10 日起，我平均每三天至少听一次土豆沙拉。为了形象化这一点，我制作了下面的日历来显示我在哪些日子演奏了这首歌。

在这个图像中，蓝色的方块标记了我的*“土豆日”*，而红色的方块象征着土豆的缺乏。有意思的是，2019 年 2 月我几乎没听过这首歌。

![](img/40de818aa31b12bd0eb7dcad7a313337.png)

The last couple of days have been fire

## 我的倾听模式是什么？

实验的这一部分旨在发现关于*【如何】*的任何令人惊讶的见解，或者我决定用一些土豆沙拉来愉悦我的耳朵的情况。

首先，我想调查的是，我的*【音乐课】*有多少是从土豆沙拉开始的。对于“音乐会话”，我指的是，嗯，我决定播放 Spotify 的会话或时刻。比如早上 8 点打开 app，就是一个会话。为了给我的会话定义增加一些额外的深度，我认为一首歌曲在前一首歌曲播放至少两小时后才构成新会话的开始。在最后一个示例中，我在上午 8 点打开了应用程序。现在，假设我播放音乐到上午 11 点(三个小时长的会话)，休息一下，并在下午 2 点播放另一首歌曲。在这种情况下，由于从之前收听的歌曲(上午 11 点结束)到新歌曲的时间超过了两个小时，因此这首新歌曲代表会话的开始。

有多少次我是以土豆沙拉开始的？在我所有的 **808** 个音乐场次中， **24** ( **2.97%** )都是土豆场次，而且令人惊讶的是(不是真的)，这是我最喜欢的“场次开始”歌曲。从这个值的角度来看，第二个位置的歌曲已经播放了 **13** 次( **1.60%** )作为会话开始。

我想知道的另一个细节是最长的重复链，同样令人惊讶的是(这次是真的)，这个数字只是 **3** ！与我实际上最长的重复播放的歌曲相比，这是一个相当低的数字，我的歌曲连续播放了八次。

![](img/5ae7121b8b958077137ebf7a5fabea6e.png)

Image by [Ulrike Mai](https://pixabay.com/users/Counselling-440107/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=580852) from [Pixabay](https://pixabay.com/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=580852)

## 在特定的日子和时间里，我听土豆沙拉的可能性有多大？

是时候给我的第一个答案了这篇文章的标题*“我今天要听土豆沙拉吗？”*在我回答这个问题的两种方法中的第一种(第二种在下一节)中，我使用了简单明了的概率。

在继续之前，有一个小小的免责声明:我想让这个有趣的深夜项目简单、清晰、易懂，即使对那些不熟悉我在这里介绍的术语的人来说也是如此。因此，我意识到我在这里应用的方法有一些缺陷、不完美、假设和过于简单化。

好吗？回去吧。

我的程序包括计算我在一周的特定**日**听 PS 的概率，我在一天的特定**小时间隔**听 PS 的概率(例如上午 10 点到 10:59 或晚上 7 点到 7:59)，然后**将这两个值相乘以获得玩游戏的可能性**🥔 🥗在日期和时间间隔 x。让我解释整个过程。

为了获得在一周的某一天播放这首歌的概率，我计算了在一周的某一天我播放这首歌的次数，除以该工作日在我的数据集中出现的次数，但只是在我第一次听土豆沙拉的那一天之后。例如，自 2018 年 10 月 10 日起，我在我的数据集上的 **21** 个星期二中的 **11** 个不同的星期二播放了这首歌。所以一个星期二我玩 PS 的概率是 11/21 = 0.52 或者 **52%** 。下面的表格显示了所有的七种可能性。

![](img/6409ea4cd9f8acbc5d90d86a443f3645.png)

嗯，周四有什么活动？只有 **13%** 的几率？会不会是这种近乎周末的感觉让我去演奏其他类型的音乐？这听起来可能令人兴奋和好奇，但答案远远超出了本文的范围。尽管如此，好消息是，经过两天的低土豆活动后，周六就到了，这一天我将通过玩一些甜蜜的 PS 来救赎自己，这是一个 68%的机会。

获得在一天的特定时间播放歌曲的概率遵循与前面相同的方法。唯一的区别是，我没有像以前那样使用一周中的日期，而是使用一天中的小时，例如，上午 12 点，凌晨 1 点…直到晚上 11 点。下表显示了 24 种可能性，每种可能性对应一天中的一个小时。此外，请记住，我不是在寻找播放歌曲的可能性，比方说，正好在上午 11 点，而是在上午 11 点到 11 点 59 分这段时间。

![](img/cd5e0b7cf20a7a747faa14a3bdc8a733.png)

24 probabilities. One per day hour.

这里有一个奇怪的细节是，凌晨 4 点的可能性是 **100%** ，表明土豆沙拉是我在这个时间播放过的唯一一首歌(我为此感到自豪)。

既然我们知道了在某一天播放这首歌的概率，以及在某一特定时间听这首歌的可能性，我们就可以确定它的联合概率，我指的是两件事同时发生的可能性。在这种情况下，联合概率是在特定的日子**和特定的时间**播放歌曲的概率。我们可以通过将两个概率相乘来计算这一点——例如，在周二上午 10 点至 10 点 59 分期间收听土豆沙拉的可能性是 **4.66%** (0.5238 * 0.089)。酷吧。

下面的两个表格给出了联合概率。

![](img/b0e985380f16df1b7c5cec1a6561f70b.png)![](img/dffb99f494690fde38a4d49ec891e137.png)

那么，我们该如何解读这一串数字呢？概率最大的时段是周六凌晨 4 点(到凌晨 4 点 59 分)，可能性 **68%** 。这个估计是重要的，因为在凌晨 4 点播放这首歌的机会很大。因此，自然地，与其他时间范围相比，这个时间范围的所有联合概率将会高得多。在相反的一端，是可怕的周四，可能性最低的一天，在不太极端的情况下，但完全可以接受的情况下，我们有周一和周六上午 8 点，值为 **13.63%** 和 **17.04%** 。

那么，我今天要听土豆沙拉吗？嗯，除非是周四，否则我会做的可能性很小，但却是真实的。

这种概率方法是我回答一直萦绕在我梦中的问题的直接方式。然而，我想把事情复杂化，给问题增加额外的复杂性，并使我的调查不成比例。因此，就像一个理性的数据人一样，我不得不尝试建立一个基于机器学习的预测系统，看看它是否可以学习和预测我是否会在给定的时间和日期听土豆沙拉。

我用来建立我的预测模型的算法是一种被称为**支持向量机** (SVM)的算法，这是一种机器学习模型，主要用于将事物分为两类，例如，是或否，好或坏，垃圾邮件和非垃圾邮件。对于这个特殊的问题，我应用了 SVM 的一个特殊变体，称为**一类 SVM** ，一种用于异常值检测的技术。现在你可能会问，“但是，嘿，胡安，你为什么把这个问题表述为异常值检测问题？”好问题。请看下一张图片。

![](img/b0eb12c7de1d3a13f7e0530b512f24a2.png)

这张图片显示了我听土豆沙拉的日期和时间。从中我们可以观察到，我的收听时刻通常在日期和时间上是相当规律的，换句话说，在数据中没有太多的离群值(不常见的实例)(除了我在周六午夜播放这首歌的那次)。正因为如此，像 SVM 这样的异常值检测系统可以用来学习决策边界，这是一个将异常值与内部值区分开来的“屏障”，也就是我通常的土豆时间，它知道我什么时候可能会听 Ensalada de Papa。因此，为了预测我是否会听这首歌，我们需要看看时间和日期对是否位于决策障碍内，这将在下一张图中显示。

![](img/046f8a3bf7254af3cace9d932d14ace8.png)

The X-axis shows the date of the week (starting from Monday) as number

暗红线内的数据点，正式称为决策边界，是我播放 PS 的内点或普通时刻，不在内的点是异常点，或我播放歌曲的不寻常时间，例如周六午夜、周日凌晨 4 点和周一早上 7 点。这里的主要要点是，我的大部分收听时间都落在边界内，这意味着我的收听时间非常标准且符合预期。

我再问一遍:我今天要听土豆沙拉吗？如果日期和时间在红线内，那么可能，否则，“可能更少。”

## 概述

在这篇文章中，我展示了当一个数据人半痴迷于一首名为《土豆沙拉》的嘻哈歌曲时会发生什么。为了证明这种轻微程度的痴迷，我创建并分析了一个由我在 Spotify 上播放这首歌的每个实例组成的数据集，并发现了以下事实:

*   2018 年 10 月 10 日至 2019 年 4 月 13 日期间，我已经听了 104 遍土豆沙拉。
*   我的音乐课有 2.97%是以 PS 开头的。
*   如果我在凌晨 4 点打开 Spotify，我有 100%的可能会玩 PS。
*   我通常在同一时间播放这首歌。

最后一次:我今天会听土豆沙拉吗？但愿，**是的**。真正的问题是，你愿意吗？

在我的 GitHub 上可以找到用于生成这个实验的代码，链接如下:

[](https://github.com/juandes/potato-salad) [## 胡安德丝/土豆沙拉

### 在 GitHub 上创建一个帐户，为 juandes/马铃薯沙拉的开发做出贡献。

github.com](https://github.com/juandes/potato-salad) 

感谢阅读。希望你喜欢:)
如果你有任何问题，评论，疑问，想聊天，或者告诉我你是否喜欢这首歌(我肯定你喜欢)，请在这里或 Twitter 上留下评论，我将很乐意帮助你。

[](https://twitter.com/jdiossantos) [## 胡安·德迪奥斯·桑托斯(@ jdiosantos)|推特

### 胡安·德迪奥斯·桑托斯的最新推文(@ jdiossantos)。机器学习/数据工程师。还有，口袋妖怪大师，还有…

twitter.com](https://twitter.com/jdiossantos) 

哦，如果你能在推特上分享这个故事，或者转发我的推文，我会很感激的。如果我幸运的话，泰勒会看到这个:)。