<html>
<head>
<title>Polynote: the new Jupyter?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">新的 Jupyter？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/polynote-the-new-jupyter-c7696a321b09?source=collection_archive---------4-----------------------#2019-12-21">https://towardsdatascience.com/polynote-the-new-jupyter-c7696a321b09?source=collection_archive---------4-----------------------#2019-12-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="414f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">围绕网飞的多语言笔记本 Polynote 有很多议论。但这是木星杀手，还是所有的炒作？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/13c972e3ddf4a8a28a35cbd5d3991938.png" data-original-src="https://miro.medium.com/v2/resize:fit:718/format:webp/1*eWBh0kllYasHb_OczuqTVA.png"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk">Source: <a class="ae ku" href="https://polynote.org/" rel="noopener ugc nofollow" target="_blank">https://polynote.org/</a></figcaption></figure><p id="d44f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">如果你在过去几年中使用 Python 做过任何类型的分析工作，你很有可能会遇到 Jupyter notebooks。无需重新运行整个脚本即可执行新代码的能力使笔记本成为分析工作流程中无处不在的一部分，但 Jupyter 笔记本并非没有问题。例如，不支持代码编辑、提示和林挺；这可能导致代码混乱、难以调试，并导致一些开发人员完全避免使用该工具。2019 年，科技巨头网飞开源了他们的笔记本工具，<a class="ae ku" href="https://github.com/polynote/polynote" rel="noopener ugc nofollow" target="_blank"> Polynote，</a>，许多人将其称为 Jupyter-killer。</p><p id="0e52" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">像 Jupyter 一样，Polynote 也支持多语言，但是 Scala 已经作为“一级语言”包含在 Polynote 中，另外还支持 Python (+ Spark)、SQL 和 Vega。虽然 Jupyter 允许您用一种受支持的语言(JUlia、PYThon、R)创建一个笔记本，但是 Polynote 在一个笔记本中提供了多语言支持，甚至允许不同语言执行的代码之间的互操作性。</p><h1 id="1c77" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">装置</h1><p id="f838" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">与 Jupyter 不同，Polynote 的核心是基于 JVM 的语言，这使得安装过程比<code class="fe mo mp mq mr b">pip install polynote</code>稍微复杂一些。问题是，Polynote 目前只能在 Linux 和 OSX 上使用；有一些关于<a class="ae ku" href="https://github.com/polynote/polynote/issues/671" rel="noopener ugc nofollow" target="_blank">包含 Windows 的讨论，</a>但是这不是开发团队的目标。鉴于像 Swift <a class="ae ku" href="https://github.com/SwiftForWindows/SwiftForWindows/issues/76" rel="noopener ugc nofollow" target="_blank">这样的流行工具的开源 Windows 移植已经失败</a>，期待 Polynote 在 Windows 上的无缝体验是愚蠢的。</p><p id="ef70" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">也就是说，让我们假设您有一台 Linux 或 OSX 机器。我将概述我让 Polynote 在 Ubuntu 18.04 上工作的步骤。</p><ol class=""><li id="d438" class="ms mt it kx b ky kz lb lc le mu li mv lm mw lq mx my mz na bi translated">转到<a class="ae ku" href="https://github.com/polynote/polynote/releases" rel="noopener ugc nofollow" target="_blank">版本</a>并在最新版本的“资产”下下载最新的<code class="fe mo mp mq mr b">polynote-dist.tar.gz</code></li><li id="80e4" class="ms mt it kx b ky nb lb nc le nd li ne lm nf lq mx my mz na bi translated">用<code class="fe mo mp mq mr b">tar -zxvpf polynote-dist.tar.gz</code>提取多项式</li><li id="52d9" class="ms mt it kx b ky nb lb nc le nd li ne lm nf lq mx my mz na bi translated">安装 Java: <code class="fe mo mp mq mr b">sudo apt install default-jre</code>和<code class="fe mo mp mq mr b">sudo apt install default-jdk</code></li><li id="f5eb" class="ms mt it kx b ky nb lb nc le nd li ne lm nf lq mx my mz na bi translated">用<code class="fe mo mp mq mr b">export JAVA_HOME=/usr/lib/jvm/default-java/</code>设置 JAVA_HOME</li><li id="7223" class="ms mt it kx b ky nb lb nc le nd li ne lm nf lq mx my mz na bi translated"><code class="fe mo mp mq mr b">pip3 install jep jedi virtualenv</code></li></ol><p id="0604" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">火花支持需要额外安装。你可以在这里阅读更多关于安装 Polynote <a class="ae ku" href="https://polynote.org/docs/01-installation.html" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><p id="ee94" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">进入 polynote 目录并执行<code class="fe mo mp mq mr b">polynote.py</code>，然后在浏览器中导航到提供的本地地址(我已经在 Firefox 和 Chrome 上测试过，没有问题)。</p><h1 id="d1da" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">多语言笔记本</h1><p id="8418" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">Polynote 的同名特性是语言互操作性:如果用一种语言定义了一个变量，就可以在另一种语言中使用它。这显然有局限性，因为不是所有的语言都有相同的类型和对象概念，但是最重要的类型，包括 numpy 数组和 pandas 数据帧，都是受支持的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nh ni di nj bf nk"><div class="gh gi ng"><img src="../Images/6af70a34c925d02613cb4ae925ef241c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ADUqHvQWxsGwHWaEzZYldg.png"/></div></div></figure><p id="2382" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我必须承认，我对 Scala 只有一知半解，所以我不确定需要它与 Python 协同工作的具体用例，但很明显，消除在两种语言之间转换数据的需要将使这样一个项目运行得更加顺畅。</p><p id="a356" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我参与的大多数项目都只需要一种语言(大部分是 Python，一些是 R ),所以很容易相信，在大型项目之外，语言混合对于大多数数据科学家来说是多余的工具。当然，作为一个开源项目，社区很可能会扩展所支持的语言套件(已经有人对<a class="ae ku" href="https://github.com/polynote/polynote/issues/664" rel="noopener ugc nofollow" target="_blank"> R、</a> <a class="ae ku" href="https://github.com/polynote/polynote/issues/542" rel="noopener ugc nofollow" target="_blank"> Julia </a>和<a class="ae ku" href="https://github.com/polynote/polynote/issues/454" rel="noopener ugc nofollow" target="_blank"> Java </a>感兴趣)，这将使 Polynote 成为对大量开发人员更有吸引力的工具；就我个人而言，我希望能够在 R 中对 Python 数据进行统计测试，而不是花费时间去寻找一个有效的、可维护的 Python 测试端口。</p><h1 id="c727" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">(英)可视化(= visualization)</h1><p id="5e2a" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">数据可视化是数据科学的重要组成部分，但它是一项经常被忽视的技能。Polynote 通过从 Scala 数据生成 Vega 规范来强调高质量的可视化。</p><blockquote class="nl nm nn"><p id="fb46" class="kv kw no kx b ky kz ju la lb lc jx ld np lf lg lh nq lj lk ll nr ln lo lp lq im bi translated">Vega 是一种<em class="it">可视化语法</em>，一种用于创建、保存和共享交互式可视化设计的声明性语言。使用 Vega，您可以用 JSON 格式描述可视化的视觉外观和交互行为，并使用 Canvas 或 SVG 生成基于 web 的视图。—<a class="ae ku" href="https://vega.github.io/vega/" rel="noopener ugc nofollow" target="_blank">https://vega.github.io/vega/</a></p></blockquote><p id="0d07" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">织女星可以很容易地产生美观、复杂的视觉效果。流行的 Python 可视化库<a class="ae ku" href="https://altair-viz.github.io/" rel="noopener ugc nofollow" target="_blank">牛郎星</a>建立在织女星的统计可视化部分 Vega-lite 之上(你可以在这里阅读关于在牛郎星<a class="ae ku" rel="noopener" target="_blank" href="/interactive-election-visualisations-with-altair-85c4c3a306f9">中生成交互式地图的内容)。</a></p><p id="4c5f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">不幸的是，没有对 Python 数据可视化的直接支持，所以这对 Python 原生程序没有什么好处。当然，您仍然可以直接进入模式，但是在大多数情况下，使用 Altair 这样的工具会容易得多。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nh ni di nj bf nk"><div class="gh gi ns"><img src="../Images/9e5d3fe26acdd78bc07d07def60394f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VAllEhMhXZthZsAXJZ3CKA.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk">An interactive bar chart? Try producing that in matplotlib</figcaption></figure><h1 id="0fcf" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">代码编辑</h1><p id="57b6" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">Jupyter 笔记本的一个很大的缺点是代码非常不透明:没有错误代码的可视提示，这在任何像样的 IDE 中都可以找到，也没有函数的代码补全(这导致我的 API 使用量显著增加)。然而，Polynote 在脚本和笔记本之间架起了一座桥梁。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nh ni di nj bf nk"><div class="gh gi nt"><img src="../Images/b44bcf5b6b56ed087e5f92bf32defa4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dp9N0SUliVd_Or8PFduAhQ.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk">With Polynote, there is no need to memorise swathes of functions</figcaption></figure><p id="7eef" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">Scala 中的类型错误会加下划线，但是 Polynote 不关心 Python 类型提示(很像 Python 社区)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/e1157d9dce18157977051ad365883562.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*Jc_AmhT8vEu3Z0k8anbd3g.png"/></div></figure><p id="9d27" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">Polynote 不与最好的代码编辑器竞争，但在这方面，它是 Jupyter 笔记本的巨大改进。</p><h1 id="8303" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">摘要</h1><p id="462a" class="pw-post-body-paragraph kv kw it kx b ky mj ju la lb mk jx ld le ml lg lh li mm lk ll lm mn lo lp lq im bi translated">我对 Polynote 的可能性很感兴趣。在数据科学社区中有很多讨论，内置的 Vega 绘图生成和跨语言通信等功能听起来像是游戏改变者。然而，我不认为 Polynote 提供的东西足以吸引大多数数据科学家离开 Jupyter。首先，缺乏对 Windows 的支持使许多人无法使用它；Windows 是最流行的操作系统，许多企业和组织都强制要求使用它。其次，尽管 Scala 有它的好处，但它并不是日常数据科学中广泛使用的语言。大多数分析项目可以并且已经完全可以单独用 Python 实现，所以语言混合和内置 Vega 没有任何好处。</p><p id="e65e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">Polynote 的代码编辑是 Jupyter 的一大改进，我希望 Jupyter 在这方面有所改进。然而，作为一个更成熟和更积极开发的项目，我发现 Jupyter 是两者中更强的一个。Polynote 当然值得一看。只是需要多一点时间。</p></div></div>    
</body>
</html>