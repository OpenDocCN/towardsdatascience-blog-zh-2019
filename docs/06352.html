<html>
<head>
<title>Instacart Market Basket Analysis Part 1: Which Grocery Items Are Popular?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Instacart 市场购物篮分析第一部分:哪些杂货商品受欢迎？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/instacart-market-basket-analysis-part-1-which-grocery-items-are-popular-61cadbb401c8?source=collection_archive---------14-----------------------#2019-09-12">https://towardsdatascience.com/instacart-market-basket-analysis-part-1-which-grocery-items-are-popular-61cadbb401c8?source=collection_archive---------14-----------------------#2019-09-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="53e3" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" href="https://medium.com/towards-data-science/in-depth-analysis/home" rel="noopener">深入分析</a></h2><div class=""/><div class=""><h2 id="bf67" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">通过土星云对 Instacart 订单的探索性数据分析</h2></div><p id="eea9" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">作为一名数据科学家，我的很大一部分职责是与业务利益相关方分享我的成果。作为一名数据记者，我的很大一部分职责是与我的读者分享代码块。</p><p id="ecd8" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">现在，我分享的报告需要在网络上正确呈现。我分享的代码也需要是可复制的。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ln"><img src="../Images/a84c68f6f5723e4fca8f44fa300afdce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z9tEpDejC5s8qa4LDLSQEA.jpeg"/></div></div></figure><p id="e00c" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><a class="ae lz" href="https://www.saturncloud.io/?source=jl-1" rel="noopener ugc nofollow" target="_blank">土星云</a>为我解决了这两个用例。</p><p id="9f63" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">怎么会？</p><p id="9cce" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在这个由 3 部分组成的博客系列中，我将通过一个例子向您展示我如何使用土星云来传达我的结果。特别是，我将致力于<a class="ae lz" href="https://www.kaggle.com/c/instacart-market-basket-analysis" rel="noopener ugc nofollow" target="_blank"> Instacart 市场购物篮分析</a>，显示 Instacart 消费者会再次购买哪些产品的结果。</p><h2 id="bfc5" class="ma mb it bd mc md me dn mf mg mh dp mi la mj mk ml le mm mn mo li mp mq mr iz bi translated"><strong class="ak"> Instacart 数据集</strong></h2><p id="4e2d" class="pw-post-body-paragraph kr ks it kt b ku ms kd kw kx mt kg kz la mu lc ld le mv lg lh li mw lk ll lm im bi translated">Instacart 是一款杂货订购和配送应用，是我最喜欢的技术平台之一。作为一名学业繁忙的研究生，我根本没有时间去买菜。Instacart 的目标是让网上购物变得简单，只需轻触一个按钮。顾客通过 Instacart 应用程序选择产品后，个人购物者会审核订单，并为顾客进行店内购物和送货。你可以把 Instacart 想象成杂货店购物的优步。</p><p id="fe2c" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">早在 2017 年，该公司<a class="ae lz" href="https://tech.instacart.com/3-million-instacart-orders-open-sourced-d40d29ead6f2" rel="noopener ugc nofollow" target="_blank">宣布了其首次公开数据集发布</a>，该数据集是匿名的，包含来自 20 多万 Instacart 用户的 300 多万份杂货订单样本。目标是预测哪些以前购买的产品将出现在用户的下一个订单中。在这篇文章中，我将做一些探索性的分析，以获得关于数据集的一些表层见解。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mx"><img src="../Images/82f4366fa0af63d985cbcf55ec41bf9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rCqTjjiDklEApUOahxkdbw.jpeg"/></div></div></figure><h2 id="f50f" class="ma mb it bd mc md me dn mf mg mh dp mi la mj mk ml le mm mn mo li mp mq mr iz bi translated"><strong class="ak">产品</strong></h2><p id="997d" class="pw-post-body-paragraph kr ks it kt b ku ms kd kw kx mt kg kz la mu lc ld le mv lg lh li mw lk ll lm im bi translated">首先，让我们探索 Instacart 产品的数据。有两个 CSV 文件，即<strong class="kt jd"> order_products_train </strong>和<strong class="kt jd"> order_products_prior </strong>，指定每个订单购买了哪些产品。更具体地说，<strong class="kt jd"> order_products_prior </strong>包含所有客户以前的订单产品，而<strong class="kt jd"> order_products_train </strong>仅包含某些客户的最新订单产品。</p><p id="6aba" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated"><strong class="kt jd">订单 _ 产品 _ 列车</strong>文件中有 1384617 件产品，<strong class="kt jd">订单 _ 产品 _ 之前</strong>文件中有 32434489 件产品。两个文件都有 4 个特征列:</p><ul class=""><li id="8268" class="my mz it kt b ku kv kx ky la na le nb li nc lm nd ne nf ng bi translated">订单的 ID(<strong class="kt jd">order _ ID</strong></li><li id="2372" class="my mz it kt b ku nh kx ni la nj le nk li nl lm nd ne nf ng bi translated">产品的 ID(<strong class="kt jd">product _ ID</strong></li><li id="0f0a" class="my mz it kt b ku nh kx ni la nj le nk li nl lm nd ne nf ng bi translated">订单中产品的排序(<strong class="kt jd"> add_to_cart_order </strong>)</li><li id="8265" class="my mz it kt b ku nh kx ni la nj le nk li nl lm nd ne nf ng bi translated">该产品是否被重新订购(<strong class="kt jd">重新订购</strong>)。</li></ul><p id="bb5f" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">总体而言，49，685 种独特产品有 3，346，083 个独特订单。我们可以在下图中观察到，人们通常会订购 5 件左右的产品。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi nm"><img src="../Images/4a976bfaf75737d962a8f109291e24bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_-EzDFDroz5kdQBh5bnleA.png"/></div></div></figure><p id="d79c" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">特别是，订购最多的前 5 种产品是香蕉(491，291)、袋装有机香蕉(394，930)、有机草莓(275，577)、有机小菠菜(251，705)和有机帽子鳄梨(220，877)。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi nn"><img src="../Images/a4cf8f93c4fe74dc11348e8d5a1b1b72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bgYgRo-R3suciKh_D3tUsw.png"/></div></div></figure><p id="a1ab" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">约 59%的订购产品是客户之前订购的。下图显示了通常最有可能重新订购的产品。按照概率，重新订购最多的前五种产品是 Serenity Ultimate Extrema 隔夜垫(0.933)、巧克力爱心棒(0.922)、玛卡毛茛(0.894)、Benchbreak Chardonnay (0.892)和有机蓝莓 B Mega (0.889)。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi no"><img src="../Images/7187f0fd3c960f0de510f6c2b60210b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K0UjasVqgwX_V8mDciG1Ig.png"/></div></div></figure><h2 id="1f6c" class="ma mb it bd mc md me dn mf mg mh dp mi la mj mk ml le mm mn mo li mp mq mr iz bi translated"><strong class="ak">订单</strong></h2><p id="be3f" class="pw-post-body-paragraph kr ks it kt b ku ms kd kw kx mt kg kz la mu lc ld le mv lg lh li mw lk ll lm im bi translated">现在让我们来研究 Instacart 订单的数据。<strong class="kt jd"> orders.csv </strong>文件有 3421083 个订单和 7 个特征列:</p><ul class=""><li id="9590" class="my mz it kt b ku kv kx ky la na le nb li nc lm nd ne nf ng bi translated">订单的 ID(<strong class="kt jd">order _ ID</strong>)</li><li id="7ba1" class="my mz it kt b ku nh kx ni la nj le nk li nl lm nd ne nf ng bi translated">客户的 ID(<strong class="kt jd">用户 id </strong>)</li><li id="8888" class="my mz it kt b ku nh kx ni la nj le nk li nl lm nd ne nf ng bi translated">订单所在的评估数据集——先前、训练或测试(<strong class="kt jd"> eval_set </strong>)</li><li id="d73c" class="my mz it kt b ku nh kx ni la nj le nk li nl lm nd ne nf ng bi translated">订单的编号(<strong class="kt jd"> order_number </strong>)</li><li id="88ba" class="my mz it kt b ku nh kx ni la nj le nk li nl lm nd ne nf ng bi translated">订单发生的星期几(<strong class="kt jd"> order_dow </strong>)</li><li id="d29c" class="my mz it kt b ku nh kx ni la nj le nk li nl lm nd ne nf ng bi translated">订单发生的时间(<strong class="kt jd">订单时间</strong>)</li><li id="12ba" class="my mz it kt b ku nh kx ni la nj le nk li nl lm nd ne nf ng bi translated">自上一订单以来的天数(<strong class="kt jd"> days_since_prior_order </strong></li></ul><p id="5f59" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">看起来 Instacart 的客户通常在早上 8 点到晚上 7 点之间下单。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi nm"><img src="../Images/cd94c7270ec518ced3fd2493dae7abd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y-mwxL2H4y5DSFo-XTOFPQ.png"/></div></div></figure><p id="cec8" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">看起来他们大多在周末下订单(0 表示周六，1 表示周日)。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div class="gh gi np"><img src="../Images/f9c528031dd14699fc4c32dcfca9581a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*5qzJGiHJ-y6Rs6kahry4RQ.png"/></div></figure><p id="3e5b" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">下图显示了 Instacart 客户的再订购周期。在第 7 天和第 30 天有明显的峰值，表明人们通常在一周或一个月后再订购。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi nm"><img src="../Images/aa5fe9cb93db18794e1fa4aecef4f2ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hTke168dEQAENNIKYtx-tA.png"/></div></div></figure><p id="e9a0" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">该数据集中总共有 206，209 个不同的客户。如下图所示，大多数客户下了大约 4 个订单。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi nq"><img src="../Images/2bde17457db911f69e50ebd969b71ddf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B3Hf2Ukp121FU17A_q6ZJA.png"/></div></div></figure><h2 id="38af" class="ma mb it bd mc md me dn mf mg mh dp mi la mj mk ml le mm mn mo li mp mq mr iz bi translated"><strong class="ak">部门和过道</strong></h2><p id="33c2" class="pw-post-body-paragraph kr ks it kt b ku ms kd kw kx mt kg kz la mu lc ld le mv lg lh li mw lk ll lm im bi translated">我们来看看最重要的部门，按产品数量排序。排名前 5 位的部门分别是个人护理(6，563)、小吃(6，264)、茶水间(5，371)、饮料(4，365)和冷冻(4，007)。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi nr"><img src="../Images/2b5315344a1b97c32d521b6f56d86a1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XJVyeDMfGBXx2j0M6D6hkQ.png"/></div></div></figure><p id="2095" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">让我们看看所有部门中最重要的过道，按照产品数量进行分类。忽略“缺失”值，我们的前 5 名分别是巧克力糖(1，258)、冰淇淋(1，091)、维生素补充剂(1，038)、酸奶(1，026)和薯片椒盐卷饼(989)。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi nr"><img src="../Images/1797767599213ffae6e78dc7a7853395.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QilCfOjPGHCepF1hanMucg.png"/></div></div></figure><p id="b8fb" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">按订单数量排序的部门和通道的详细信息如何？按订单排序，最畅销的前 5 个部门是农产品(409，087)、乳制品鸡蛋(217，051)、零食(118，862)、饮料(114，046)和冷冻食品(100，426)。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi nn"><img src="../Images/1b7c8fa7fea2a15789ae47edb8fa4987.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NEYSWx2ZpF4Q_QHrCcw5QA.png"/></div></div></figure><p id="15f3" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">最后，我们查看所有部门中按照订单数量排序的最佳销售通道。前 5 名分别是新鲜蔬菜(150609)、新鲜水果(150473)、包装蔬菜水果(78493)、酸奶(55240)、包装奶酪(41699)。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi nn"><img src="../Images/4cfe6a9a31e04fb1580ffe2ec7ea6f12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RCS9lfd8SRBU4JIaH459lg.png"/></div></div></figure><h2 id="5ab3" class="ma mb it bd mc md me dn mf mg mh dp mi la mj mk ml le mm mn mo li mp mq mr iz bi translated"><strong class="ak">结论</strong></h2><p id="31c0" class="pw-post-body-paragraph kr ks it kt b ku ms kd kw kx mt kg kz la mu lc ld le mv lg lh li mw lk ll lm im bi translated">进行这种分析让我能够更细致地了解 Instacart 平台上客户购物行为的细节。了解最常购买的商品是 Instacart 优化其软件产品并在顾客购物时为他们推荐商品的第一步。</p><p id="78e7" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">如果你有兴趣自己复制这个结果，你可以从<a class="ae lz" href="https://www.instacart.com/datasets/grocery-shopping-2017" rel="noopener ugc nofollow" target="_blank">insta cart 网站</a>下载数据集，并在<a class="ae lz" href="https://www.saturncloud.io/published/khanhnamle1994/instacart-notebooks/notebooks/Instacart-Simple-Data-Exploration.ipynb/?source=jl-1" rel="noopener ugc nofollow" target="_blank">土星云上查看我的笔记本</a>。就个人而言，快速轻松地共享笔记本的能力对任何数据科学家都非常有帮助。</p><p id="fe2b" class="pw-post-body-paragraph kr ks it kt b ku kv kd kw kx ky kg kz la lb lc ld le lf lg lh li lj lk ll lm im bi translated">在这个博客系列的下一部分，我将把客户分成不同的组，这可以帮助 Instacart 针对不同的需求提供更多个性化的推荐。此外，我将探索 Saturn 的特性，该特性允许我扩展云计算，因为我有更高的计算需求。</p></div></div>    
</body>
</html>