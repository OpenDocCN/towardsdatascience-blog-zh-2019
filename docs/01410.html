<html>
<head>
<title>EDA of Weather Stations During WWII</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">二战期间气象站的 EDA</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/eda-of-weather-stations-during-wwii-bddfff8e8872?source=collection_archive---------29-----------------------#2019-03-05">https://towardsdatascience.com/eda-of-weather-stations-during-wwii-bddfff8e8872?source=collection_archive---------29-----------------------#2019-03-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="97fd" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">与 GeoPandas 和 Seaborn 一起讲述一个不同的战争故事</h2></div><p id="f9c5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二次世界大战是人类历史上最致命的冲突之一，夺去了数百万人的生命，并塑造了我们至今的政治、社会和经济环境。除了武器和子弹，天气在冲突中也扮演了重要角色。</p><p id="24d8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">诺曼底登陆日本不应该在 6 月 6 日，但由于恶劣的天气条件而推迟了。太平洋剧院的部队不得不在战斗间隙承受相当大的降雨量。更不用说德军不得不面对<a class="ae lb" href="https://en.wikipedia.org/wiki/Russian_Winter#German_invasion_of_1941" rel="noopener ugc nofollow" target="_blank">温特</a>将军。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/23dc8fa23b558d345aee069f71e1ce6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nSAGWPqOm8VFQeH7z3iGYg.jpeg"/></div></div></figure><h1 id="df83" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">气象站数据集</h1><p id="8e73" class="pw-post-body-paragraph kf kg iq kh b ki mg jr kk kl mh ju kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">在战后几十年的今天，由于<a class="ae lb" href="https://www.ncdc.noaa.gov/data-access/land-based-station-data/land-based-datasets/world-war-ii-era-data" rel="noopener ugc nofollow" target="_blank"> <em class="ml">国家环境信息中心</em> </a>的努力，任何人都可以方便地下载战争期间许多国家的天气数据，但数据集也可以在<a class="ae lb" href="https://www.kaggle.com/smid80/weatherww2/version/1" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>(以及互联网上的许多其他地方)获得。</p><p id="4415" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里的目标是检查气象站在全球的空间分布情况，并了解有多少气象站位于不同的国家。假设你要用一点代码更新 NCEI 的地图。</p><h1 id="4127" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">用<code class="fe mm mn mo mp b">DataFrames</code>制作地图</h1><p id="74cc" class="pw-post-body-paragraph kf kg iq kh b ki mg jr kk kl mh ju kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">像往常一样，首先从工具箱中拿出工具:</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="a9f5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">除了通常的<code class="fe mm mn mo mp b">Pandas</code> <em class="ml">等</em>之外，为了制作地图，你将使用<code class="fe mm mn mo mp b"><a class="ae lb" href="http://geopandas.org/" rel="noopener ugc nofollow" target="_blank">GeoPandas</a></code>和<code class="fe mm mn mo mp b"><a class="ae lb" href="https://shapely.readthedocs.io/en/stable/manual.html" rel="noopener ugc nofollow" target="_blank">Shapely</a></code>包的组合，你可以安装:</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="9888" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在你已经做好了一切准备，用<code class="fe mm mn mo mp b">Pandas</code>读取数据集:</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="294b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你从 Kaggle 下载数据集，你可能会看到两个文件:一个是实际的天气数据，另一个是关于气象站的信息，也就是你在上面读到的那个，所以我们将把天气分析留到另一个时间。数据集如下所示:</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi ms"><img src="../Images/dd77e9f816f4208818ec962278411b84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qtd5nBctUH78B6TApmNI6g.png"/></div></div></figure><p id="caf7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">到目前为止，那只是另一个普通的<code class="fe mm mn mo mp b">DataFrame</code>，所以你怎么能把它做成地图呢？首先，您需要创建另一个包含每个气象站的<code class="fe mm mn mo mp b">'Longitude'</code>和<code class="fe mm mn mo mp b">'Latitude'</code>的列，然后是<code class="fe mm mn mo mp b">apply</code>和<code class="fe mm mn mo mp b">Point</code>函数，这样<code class="fe mm mn mo mp b">GeoPandas</code>就可以了解位置:</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="a333" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">顺便说一下，您的<code class="fe mm mn mo mp b">DataFrame</code>现在包含了<code class="fe mm mn mo mp b">'Coordinates'</code>列，看起来像这样:</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/751be66ab0103c11460d575fd2766871.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*Z9gXJYiDPAs_jfPkA2MHzg.png"/></div></figure><p id="1b02" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mm mn mo mp b">'Latitude'</code>和<code class="fe mm mn mo mp b">'Longitude'</code>的值共同构成一个<code class="fe mm mn mo mp b">Point</code>像一个有序的对被绘制在一个笛卡尔平面上，有了这个信息你可以构成一个不同类型的<code class="fe mm mn mo mp b">DataFrame</code>:一个由<code class="fe mm mn mo mp b">GeoPandas</code>解释的<code class="fe mm mn mo mp b">GeoDataFrame</code>。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="2d51" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，一切准备就绪，您可以看到二战期间全球气象站的分布:</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi mu"><img src="../Images/d23d1bd04685eb73b9a87610bea7390d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4XICRkylqukV2FScWdxMrA.png"/></div></div></figure><p id="df97" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mm mn mo mp b">GeoPandas</code>可以读取你可能有的各种形状文件，但这里你使用的是来自<a class="ae lb" href="https://www.naturalearthdata.com/" rel="noopener ugc nofollow" target="_blank">自然地球</a>的简单标准<code class="fe mm mn mo mp b">naturalearth_lowres</code>形状。</p><p id="12c2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从表面上看，气象站的数量并不令人印象深刻，甚至与我们今天拥有的气象站相差甚远。除了这里和那里的几个点，没有关于美国天气的数据，更不用说饱受战争蹂躏的欧洲，但从好的方面来看，我们有一些非洲和太平洋剧院的电台，显然巴西也有一些。在这一点上，你应该花一分钟考虑一下在战争期间保存天气信息有多困难，你会看到上面的数量是相当可观的。</p><p id="28b2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">总共有 161 个气象站，但是每个国家有多少个？使用<code class="fe mm mn mo mp b">Pandas</code>，这个问题很容易回答。</p><h1 id="8ad1" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">各国气象站</h1><p id="8766" class="pw-post-body-paragraph kf kg iq kh b ki mg jr kk kl mh ju kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">活动这一部分的目标是<code class="fe mm mn mo mp b">groupby</code>将每个站点分配到其所在的国家和<code class="fe mm mn mo mp b">count</code>总数量，这可以通过<code class="fe mm mn mo mp b">Pandas</code>轻松完成:</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="3019" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你不喜欢<code class="fe mm mn mo mp b">Pandas</code>有多优雅吗？任务已经完成，但是用<code class="fe mm mn mo mp b">Seaborn</code>的手来策划一下也无妨:</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi mv"><img src="../Images/2b3acbcd5d985b7215cff76ddf80dc5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dwAeNWByGwrQ7cPOVbQ7rg.png"/></div></div></figure><p id="51d4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">单个来看，大多数国家只有一个自己的气象站，而澳大利亚和日本等太平洋沿岸国家明显高于平均水平。查看这些信息的另一种方式是通过直方图，这也很容易通过<code class="fe mm mn mo mp b">Seaborn</code>获得:</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi mw"><img src="../Images/d4795ee1e00020ce3aaff3d0dfb4dbe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TaDEiMlPDYE5YPdSwTN4hg.png"/></div></div></figure><p id="d95d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，正如你所看到的，这里考虑的大多数国家在二战期间只有一个空间站，但我们并没有抱怨。虽然直方图非常简单，但它能很好地展示任何时间序列的频率分布。</p><h1 id="ee64" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">结论</h1><p id="9304" class="pw-post-body-paragraph kf kg iq kh b ki mg jr kk kl mh ju kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">第二次世界大战气象站数据集非常有趣，如果你是一个历史迷，它也可以提供一些不错的新的好奇心。它也是<a class="ae lb" href="https://www.kaggle.com/usaf/world-war-ii" rel="noopener ugc nofollow" target="_blank">空中轰炸</a>数据集的同伴，所以也来看看这个。</p><p id="1661" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">只需一点探索性数据分析(EDA)，您就可以提供关于数据的新见解和信息，因此有时简单是最好的，一些工具永远不会过时。</p><p id="255b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你想下载源代码和上面的图表，有一个资源库<a class="ae lb" href="https://github.com/willyhagi/flyingcircus/tree/master/WWII" rel="noopener ugc nofollow" target="_blank">你可以直接到这里</a>去获取。</p><p id="501d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">干杯！</p></div></div>    
</body>
</html>