<html>
<head>
<title>Exploring Football Summer Transfer Activity with Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索与熊猫的足球夏季转会活动</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/exploring-football-summer-transfer-activity-with-pandas-5b9127c759ee?source=collection_archive---------34-----------------------#2019-08-14">https://towardsdatascience.com/exploring-football-summer-transfer-activity-with-pandas-5b9127c759ee?source=collection_archive---------34-----------------------#2019-08-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0392" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">欧洲前 25 大支出足球队的转会交易</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/21f16753c1d24aa01a139edf8f73cc67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*j-rFg0xQSUeMp7D-O_6Xow.png"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk">Image Courtesy of <a class="ae ku" href="https://unsplash.com/@schuh" rel="noopener ugc nofollow" target="_blank">Sandro Schuh</a> via Unsplash</figcaption></figure><h1 id="4386" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">探索夏季转会的有用熊猫特征</h1><p id="75b7" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">夏季转会窗口为欧洲足球队提供了招募关键球员的机会，以加强他们各自的阵容，迎接即将到来的赛季。边缘和破坏性的球员也可以被抛弃，被租借到不同的俱乐部去积累经验。</p><p id="0fd3" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">为了深入了解欧洲最大的 25 家俱乐部的转会交易，我搜集并整理了每支球队的关键信息。这些信息包括每个团队的支出和收入。此外，我还想知道与球员年龄相关的招募策略。抓取的数据如下所示。</p><p id="580f" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">本教程将演示如何使用简单、直观的 Pandas 功能和特性来研究数据。另请注意，截至 2019 年 8 月 13 日，此信息可能会更改和更正。</p><p id="4ffe" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">西班牙的西甲联赛、意大利的意甲联赛、德国的德甲联赛和法国的法甲联赛都在 9 月 2 日的不同时间有转会截止日期。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mo"><img src="../Images/0c3866acf6877f164c8209bef94b8f27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jZ3V2Jfv7n4LySfZQd0n3g.png"/></div></div></figure><h1 id="aa0d" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">1.将对象数据类型转换为浮点数据类型</h1><p id="478d" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">在开始任何数据分析之前，检查每一列都是数值数据类型是很重要的。df.dtypes 属性表明,“Income”列是一个 Object (string)数据类型。Pandas 将我的 Excel 文件中的“Income”列解析为 object 数据类型，因为某些球队的条目(连字符)是非数字的，例如上面显示的索引为 8 的阿斯顿维拉。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mt"><img src="../Images/f180c04a1698f8eced39ba988dcc9dcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lJXuqoZSDCw9A8R2EYyjZA.png"/></div></div></figure><p id="00d9" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">要转换这个对象列，有必要使用 to_numeric 函数，并告诉 Pandas 通过使用 errors = ' compete '将任何无效输入转换为 NaN 值。如果知道 NaN 值实际上表示 0，可以使用。将 0 作为参数传递的 fillna(0)方法。</p><p id="c019" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">现在，当使用 df.dtypes 检查数据类型时，income 列是一个 float 数据类型，现在可以用于以后基于数字的操作。在数据框中，在指数 8 处，阿斯顿维拉的收入现在可以被视为 0，与之前显示的连字符相对。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mu"><img src="../Images/6f3ef7a510662fa2bccf1697f123bf01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mx9SKYRl0_dVZE2qn_5YaQ.png"/></div></div></figure><h1 id="518e" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">2.新列和列重新排序</h1><p id="3d79" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">球员支出和球员销售所得之间的净差额很容易计算，但它让我们对欧洲 25 家最大支出者的财务转移交易有了有趣的了解。</p><p id="2aa2" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">新列“Net_Difference”是通过从支出列中减去收入列创建的。为了便于阅读，最好让 Net_Difference 列靠近它所引用的两个列。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mv"><img src="../Images/ae3db04e889e12a3de9e71c95a5d8730.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AbnO7q0J8kZ_Jum5ffeCIQ.png"/></div></div></figure><p id="dea6" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">数据帧的列被转换成列表，并且数据帧 df 根据索引列被重新分配。这里，前三列保持不变，但最后一列(用 python index -1 表示)跟在后面，最后一列包含特定于年龄的数据。通过打印数据帧的头部，信息可以更直观地对齐以便解释。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mw"><img src="../Images/d15a349279709ff6a35fa75cf2236d40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KGpu5Uh01FER6b-f7MwuwQ.png"/></div></div></figure><h1 id="992f" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">3.过滤从描述方法输出的数据</h1><p id="8ea0" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">描述方法给出了数据集的数字数据摘要。但是，如果我们想要截断这个输出，只需使用。loc 函数，并根据需要过滤行和列。</p><p id="d284" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">在下面显示的输出中，我希望只看到具体关于年龄的数据快照，并且我只对该快照中的 min 到 max 行感兴趣。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mx"><img src="../Images/0a87ca9f5e89cad1f18699797433faab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-pWhSOeEpJGQYYPsiijcAg.png"/></div></div></figure><h1 id="d72a" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">4.将连续数据转换为分类数据</h1><p id="a131" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">收入列可以用来创建一个新的收入类别数据列。在这里，可以使用 pd.cut 函数将收入列中的连续数据分成-1–40、40–80 和 80–350 范围内的区间。我给这些箱子贴上了标签:低、中、高。</p><p id="f08d" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">这代表了每个俱乐部收到的收入是低、中、高。<em class="my">现在</em>，快速扫一眼牌桌就能发现哪些球队为他们各自的球员获得了高收入。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mz"><img src="../Images/f01939dc0fee3cac7ce63e0872c8cf4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uh2GmKGJASmIcYleJXyagQ.png"/></div></div></figure><h1 id="bb71" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">5.设计数据框架的样式</h1><p id="4c85" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">对数据帧进行样式化可以增加视觉冲击力并有助于数据解释。在 githib gist 中显示的示例代码中，我展示了各种样式化 DataFrame 的方法。例如，要为列添加背景渐变，可以使用。background_gradient 属性，这个渐变将创建一个指示收入趋势的信息性配色方案。蓝色越深，收入越高。</p><p id="67b8" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">此外，我为每个列值添加了一个横条，以指示该团队在净差额列中是盈利还是亏损。标题也可以添加到数据帧中，以告知观众具体信息的内容。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="na nb l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nc"><img src="../Images/725921be106e692b7317f76223058ad5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B-bAj9p36PKMh5Aza5vUdg.png"/></div></div></figure><h1 id="6358" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">6.招聘策略并引用 query()字符串中的变量</h1><p id="cf33" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">下面 github gist 的代码片段的第一行显示了对列进行重新排序的另一种方法。</p><p id="dfd1" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">我还确定了到达年龄和离开年龄的平均值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="6f16" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">了解哪些球队正在招募年龄低于所有 25 支球队平均年龄的球员将是很有见地的。</p><p id="c6ed" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">为此，我创建了一个名为 arrival_mean 的变量，为了在查询字符串中引用它，我简单地在它前面加上了一个元字符' @ '。</p><p id="bd44" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">看起来像皇家马德里、曼联甚至罗马这样的球队正在齐心协力签下年轻球员。这是他们今夏转会政策的信息，所有这些似乎都是为了签下优秀的年轻球员，让他们有更好的表现。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nd"><img src="../Images/3c6647b662fd7c07094e237cb21a9810.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UPrUr64Cfwj8gqxSY7UHOw.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi ne"><img src="../Images/588d70bf1a195aa39280f69be20bf187.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0uTkHMqYfiJvxV9J_fDTPQ.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk">Daniel James (left) and Aaron Wan-Bissaka (right) are two 21-year old Man Utd Summer signings</figcaption></figure><p id="dee3" class="pw-post-body-paragraph ln lo it lp b lq mj ju ls lt mk jx lv lw ml ly lz ma mm mc md me mn mg mh mi im bi translated">除此之外，数据显示排名前 25 的球队正在招募的球员平均比他们释放的球员年轻大约 2 岁！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="na nb l"/></div></figure><h1 id="d7aa" class="kv kw it bd kx ky kz la lb lc ld le lf jz lg ka lh kc li kd lj kf lk kg ll lm bi translated">摘要</h1><p id="6338" class="pw-post-body-paragraph ln lo it lp b lq lr ju ls lt lu jx lv lw lx ly lz ma mb mc md me mf mg mh mi im bi translated">本教程展示了熊猫在数据分析和解释方面的一个用例。样式化和创建分类列可以简化数据解释，而在查询字符串中引用变量可以为任何调查的数据集增加有价值的洞察力。</p></div></div>    
</body>
</html>