<html>
<head>
<title>Explaining probability plots</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">解释概率图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/explaining-probability-plots-9e5c5d304703?source=collection_archive---------4-----------------------#2019-04-16">https://towardsdatascience.com/explaining-probability-plots-9e5c5d304703?source=collection_archive---------4-----------------------#2019-04-16</a></blockquote><div><div class="fc ij ik il im in"/><div class="io ip iq ir is"><figure class="iu iv gp gr iw ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi it"><img src="../Images/92391f052c38422f2599cdf77bb82b21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bv8YXFPX4V7oPRkrAKgEfQ.jpeg"/></div></div><figcaption class="je jf gj gh gi jg jh bd b be z dk"><a class="ae ji" href="https://images.unsplash.com/photo-1503681355143-d5485eea7f14?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=2250&amp;q=80" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure><div class=""/><div class=""><h2 id="39ee" class="pw-subtitle-paragraph ki jk jl bd b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dk translated">它们是什么，如何用 Python 实现它们，以及如何解释结果</h2></div><h1 id="6500" class="la lb jl bd lc ld le lf lg lh li lj lk kr ll ks lm ku ln kv lo kx lp ky lq lr bi translated">1.介绍</h1><p id="e126" class="pw-post-body-paragraph ls lt jl lu b lv lw km lx ly lz kp ma mb mc md me mf mg mh mi mj mk ml mm mn io bi translated">在使用线性回归时，您可能已经遇到过一种类型的概率图—Q-Q 图。拟合模型后，我们应该检查的回归假设之一是残差是否遵循正态(高斯)分布。这通常可以通过使用 Q-Q 图来直观地验证，如下图所示。</p><figure class="mp mq mr ms gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi mo"><img src="../Images/d3e5363b372c769c1eb607b2801ad51a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ga4OShXfruwb8L3tbiuUIw.png"/></div></div><figcaption class="je jf gj gh gi jg jh bd b be z dk">Example of Q-Q plot</figcaption></figure><p id="e56d" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">为了充分理解概率图的概念，让我们快速回顾一下概率论/统计学中的一些定义:</p><ul class=""><li id="3056" class="my mz jl lu b lv mt ly mu mb na mf nb mj nc mn nd ne nf ng bi translated"><a class="ae ji" href="https://en.wikipedia.org/wiki/Probability_density_function" rel="noopener ugc nofollow" target="_blank">概率密度函数</a>(PDF)——允许我们计算在属于样本空间的任何区间内找到随机变量的概率的函数。重要的是要记住，连续随机变量取精确值的概率等于 0。</li></ul><figure class="mp mq mr ms gt ix gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/5c1fe14c2cf418d9fd0f7c10a6b4865c.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*l5pHC91RCUj1h-k6E9kOvA.png"/></div><figcaption class="je jf gj gh gi jg jh bd b be z dk">PDF of Gaussian Distribution</figcaption></figure><ul class=""><li id="2059" class="my mz jl lu b lv mt ly mu mb na mf nb mj nc mn nd ne nf ng bi translated"><a class="ae ji" href="https://en.wikipedia.org/wiki/Cumulative_distribution_function" rel="noopener ugc nofollow" target="_blank">累积分布函数</a>(CDF)——提供随机变量取值等于或小于给定值<em class="ni"> x </em>的概率的函数。当我们处理连续变量时，CDF 是在负无穷大到<em class="ni"> x </em>范围内 PDF 下的面积。</li></ul><figure class="mp mq mr ms gt ix gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/69caa6f260df26274a373a77034c387d.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/format:webp/1*Xyh4upL2LGn79iJcWKvM4w.png"/></div><figcaption class="je jf gj gh gi jg jh bd b be z dk">General formula for CDF, X — random variable, x — point of evaluation</figcaption></figure><ul class=""><li id="9f77" class="my mz jl lu b lv mt ly mu mb na mf nb mj nc mn nd ne nf ng bi translated"><a class="ae ji" href="https://en.wikipedia.org/wiki/Quantile" rel="noopener ugc nofollow" target="_blank">分位数</a>——引用维基百科:“将概率分布范围划分为具有相等概率的连续区间的切割点”</li></ul><p id="bc71" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">下图显示了从标准正态分布以及 PDF 和 CDF 中抽取的随机变量的分布。</p><figure class="mp mq mr ms gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi nk"><img src="../Images/00f7f1263f5db0954b8877eecd54f761.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gk3aAWtoaZrJP7Nw0tfFqQ.png"/></div></div></figure><p id="51e0" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">在本文中，我将使用另外两个发行版进行比较:</p><ul class=""><li id="086a" class="my mz jl lu b lv mt ly mu mb na mf nb mj nc mn nd ne nf ng bi translated">平均值为 1、标准差为 2.5 的正态分布— N(1，2.5)</li><li id="1110" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated"><a class="ae ji" href="https://en.wikipedia.org/wiki/Skew_normal_distribution" rel="noopener ugc nofollow" target="_blank">α= 5 的偏斜正态分布</a></li></ul><p id="1c6b" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">我使用偏斜正态分布，因为通过调整 alpha 参数(同时将比例和位置保留为默认值)我可以控制分布的偏斜度。随着α的绝对值增加，偏斜度的绝对值也增加。下面我们可以通过观察随机变量的直方图来考察分布的差异。</p><figure class="mp mq mr ms gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi nq"><img src="../Images/91ce300e81d411e7919de57ace1590cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*muuL2hUPCRgXMcB9l6U4tQ.png"/></div></div></figure><h1 id="db5a" class="la lb jl bd lc ld le lf lg lh li lj lk kr ll ks lm ku ln kv lo kx lp ky lq lr bi translated">2.概率图</h1><p id="6037" class="pw-post-body-paragraph ls lt jl lu b lv lw km lx ly lz kp ma mb mc md me mf mg mh mi mj mk ml mm mn io bi translated">我们使用概率图来直观地比较来自不同数据集(分布)的数据。可能的情况包括比较:</p><ul class=""><li id="094c" class="my mz jl lu b lv mt ly mu mb na mf nb mj nc mn nd ne nf ng bi translated">两个经验集</li><li id="07da" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated">一组经验数据和一组理论数据</li><li id="119b" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated">两个理论集</li></ul><p id="8f31" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">概率图最常见的用途是中间图，当我们将观察到的(经验)数据与来自特定理论分布(如高斯分布)的数据进行比较时。我用这个变体来解释下面的特殊类型的情节，但是，它也可以应用于其他两种情况。</p><h1 id="c981" class="la lb jl bd lc ld le lf lg lh li lj lk kr ll ks lm ku ln kv lo kx lp ky lq lr bi translated">2.1 峰峰值<strong class="ak">图</strong></h1><p id="b1f0" class="pw-post-body-paragraph ls lt jl lu b lv lw km lx ly lz kp ma mb mc md me mf mg mh mi mj mk ml mm mn io bi translated">简而言之，P-P(概率-概率)图是绘制两种分布(经验的和理论的)的 CDF 的可视化图。</p><figure class="mp mq mr ms gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi nr"><img src="../Images/e12076a48f3232b9aa035f72ff9552a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y3rnKC3gqVpd6LHzt--dyw.png"/></div></div><figcaption class="je jf gj gh gi jg jh bd b be z dk">Example of a P-P plot comparing random numbers drawn from N(0, 1) to Standard Normal — perfect match</figcaption></figure><p id="dc0e" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">峰峰值图的一些关键信息:</p><ul class=""><li id="99ea" class="my mz jl lu b lv mt ly mu mb na mf nb mj nc mn nd ne nf ng bi translated">图上的点的解释:假设我们有两个分布(<em class="ni"> f </em>和<em class="ni"> g </em>)和一个评估点<em class="ni"> z </em>(任何值)，图上的点指示在<em class="ni"> f </em>和<em class="ni"> g </em>(根据 CDF 的定义)<em class="ni">中位于或低于<em class="ni"> z </em>的数据百分比。</em></li><li id="2713" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated">为了比较这些分布，我们检查这些点是否位于一条 45 度线上(<em class="ni"> x=y </em>)。如果它们出现偏差，分布就会不同。</li><li id="ee8f" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated">P-P 图非常适合于比较高概率密度区域(分布中心),因为在这些区域，经验和理论 CDF 比低概率密度区域变化更快。</li><li id="cdb1" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated">P-P 图需要完全指定的分布，因此如果我们使用高斯作为理论分布，我们应该指定位置和比例参数。</li><li id="69e8" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated">改变位置或比例参数不一定能保持峰峰值图的线性。</li><li id="a901" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated">P-P 图可以用来直观地评估分布的偏斜度。</li><li id="0f34" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated">当分布不重叠时，绘图可能会导致奇怪的模式(例如，沿着图表的轴)。所以 P-P 图在比较位置相近或相等的概率分布时最有用。下面我给出一个 P-P 图，比较从<em class="ni"> N(1，2.5) </em>抽取的随机变量和从<em class="ni"> N(5，1) </em>抽取的随机变量。</li></ul><figure class="mp mq mr ms gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi ns"><img src="../Images/ecebbdcc73238d78db337a2a773269a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5T8vtjY1W_m4Mfvk7SHVcg.png"/></div></div><figcaption class="je jf gj gh gi jg jh bd b be z dk">Random Variables drawn from N(1, 2.5) vs. N(5, 1)</figcaption></figure><h1 id="b478" class="la lb jl bd lc ld le lf lg lh li lj lk kr ll ks lm ku ln kv lo kx lp ky lq lr bi translated">2.2.Q-Q 图</h1><p id="b91a" class="pw-post-body-paragraph ls lt jl lu b lv lw km lx ly lz kp ma mb mc md me mf mg mh mi mj mk ml mm mn io bi translated">与 P-P 图类似，Q-Q(分位数-分位数)图允许我们通过绘制它们的分位数来比较分布。</p><p id="0dc1" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">Q-Q 图的一些关键信息:</p><ul class=""><li id="5eaa" class="my mz jl lu b lv mt ly mu mb na mf nb mj nc mn nd ne nf ng bi translated">图上的点的解释:图上的一个点对应于来自两种分布的某个分位数(同样在大多数情况下是经验的和理论的)。</li><li id="c2b7" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated">在 Q-Q 图上，参考线取决于理论分布的位置和比例参数。截距和斜率分别等于位置和比例参数。</li><li id="c7ad" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated">点中的线性模式表明给定的分布族合理地描述了经验数据分布。</li><li id="6e29" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated">Q-Q 图在分布的尾部获得了非常好的分辨率，但在中心(概率密度高)分辨率较差</li><li id="0349" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated">Q-Q 图不需要指定理论分布的位置和比例参数，因为理论分位数是根据指定族中的标准分布计算的。</li><li id="29e7" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated">点模式的线性不受改变位置或比例参数的影响。</li><li id="3ed2" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated">Q-Q 图可用于直观评估两种分布的位置、规模和偏斜度的相似性。</li></ul><h1 id="785c" class="la lb jl bd lc ld le lf lg lh li lj lk kr ll ks lm ku ln kv lo kx lp ky lq lr bi translated">3.Python 中的示例</h1><p id="4ef6" class="pw-post-body-paragraph ls lt jl lu b lv lw km lx ly lz kp ma mb mc md me mf mg mh mi mj mk ml mm mn io bi translated">我使用<code class="fe nt nu nv nw b">statsmodels</code>库和<code class="fe nt nu nv nw b"><a class="ae ji" href="https://www.statsmodels.org/dev/generated/statsmodels.graphics.gofplots.ProbPlot.html" rel="noopener ugc nofollow" target="_blank"><em class="ni">ProbPlot</em></a></code>类创建概率图。</p><h2 id="6284" class="nx lb jl bd lc ny nz dn lg oa ob dp lk mb oc od lm mf oe of lo mj og oh lq oi bi translated">数据</h2><p id="f5e5" class="pw-post-body-paragraph ls lt jl lu b lv lw km lx ly lz kp ma mb mc md me mf mg mh mi mj mk ml mm mn io bi translated">首先，我生成了来自三种分布的随机观察值:标准正态、正态和斜正态。您可以在下面的代码片段中看到分布的确切参数。</p><figure class="mp mq mr ms gt ix"><div class="bz fp l di"><div class="oj ok l"/></div></figure><h2 id="57bf" class="nx lb jl bd lc ny nz dn lg oa ob dp lk mb oc od lm mf oe of lo mj og oh lq oi bi translated">峰峰值图</h2><p id="b39e" class="pw-post-body-paragraph ls lt jl lu b lv lw km lx ly lz kp ma mb mc md me mf mg mh mi mj mk ml mm mn io bi translated">当我开始使用<code class="fe nt nu nv nw b">statsmodels</code> <em class="ni"> </em>创建一些 P-P 图时，我注意到一个问题——当我比较从 N(1，2.5)到标准常态的随机抽取时，该图是完美的拟合，而它不应该是。我试图调查这个问题，并在<a class="ae ji" href="https://stackoverflow.com/questions/55564688/interpretation-of-pp-plot" rel="noopener ugc nofollow" target="_blank"> StackOverflow </a>上找到了一个帖子，解释了当前的实现总是试图估计理论分布的位置和比例参数，即使提供了一些值。所以在上面的例子中，我们正在检查我们的经验数据是否来自正态分布，而不是我们指定的那个。</p><p id="6321" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">这就是为什么我写了一个函数，用提供的参数直接比较经验数据和理论分布。</p><figure class="mp mq mr ms gt ix"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="3f66" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">让我们首先尝试使用<code class="fe nt nu nv nw b">statsmodels</code>和<code class="fe nt nu nv nw b">pp_plot</code>来比较从 N(1，2.5)到 N(0，1)的随机抽取。我们看到，在<code class="fe nt nu nv nw b">statsmodels</code> <em class="ni"> </em>的情况下，这是一个完美的拟合，因为该函数估计了正态分布的位置和比例参数。当检查<code class="fe nt nu nv nw b">pp_plot</code>的结果时，我们看到分布明显不同，这也可以在直方图上观察到。</p><figure class="mp mq mr ms gt ix"><div class="bz fp l di"><div class="oj ok l"/></div></figure><figure class="mp mq mr ms gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi ol"><img src="../Images/fdfa1b483de4b1f7ca015cbfe924cb73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_67QSzC2A_2CVM0AOmdeJQ.png"/></div></div><figcaption class="je jf gj gh gi jg jh bd b be z dk">P-P plots of N(1, 2.5) vs. Standard Normal</figcaption></figure><p id="e645" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">我们也试着从<code class="fe nt nu nv nw b">pp_plot</code>解读一下 P-P 图的形态。为此，我将再次展示图表以及直方图。沿着 x 轴的水平移动是由分布不完全重叠的事实引起的。当该点高于参考线时，意味着理论分布的 CDF 值高于经验分布的 CDF 值。</p><figure class="mp mq mr ms gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi om"><img src="../Images/6011c99fa59b281603ca7a2d370c11f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eQzoJ0aTUK58-mBg0qmv4w.png"/></div></div></figure><p id="30f4" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">下一个例子是比较从倾斜法线到标准法线的随机绘制。我们看到<code class="fe nt nu nv nw b">statsmodels</code>的图暗示它不是一个完美的匹配，因为它很难找到正态分布的位置和比例参数，这些参数说明了所提供数据的偏斜度。该图还显示，标准正态分布的 CDF 值总是高于所考虑的偏态分布的 CDF 值。</p><figure class="mp mq mr ms gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi ol"><img src="../Images/26a035609bf79ec3d6575881c4f66dfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K5cCZGgkj6KIIX560B4nBw.png"/></div></div><figcaption class="je jf gj gh gi jg jh bd b be z dk">P-P plots of Skew Normal (alpha=5) vs Standard Normal</figcaption></figure><p id="afa9" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">注意:我们也可以使用<code class="fe nt nu nv nw b">statsmodels</code> <em class="ni">获得完美的拟合。</em>为此，我们需要将<em class="ni">proplot</em>中的理论分布指定为<code class="fe nt nu nv nw b">skewnorm</code>，并传递一个额外的参数<code class="fe nt nu nv nw b">distargs=(5,)</code> <em class="ni"> </em>来指示α的值。</p><h2 id="178c" class="nx lb jl bd lc ny nz dn lg oa ob dp lk mb oc od lm mf oe of lo mj og oh lq oi bi translated">Q-Q 图</h2><p id="f880" class="pw-post-body-paragraph ls lt jl lu b lv lw km lx ly lz kp ma mb mc md me mf mg mh mi mj mk ml mm mn io bi translated"><em class="ni">应用和解释</em></p><p id="5eab" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">让我们从比较偏斜正态分布和标准正态分布(使用<code class="fe nt nu nv nw b">ProbPlot’s</code>默认设置)开始。</p><figure class="mp mq mr ms gt ix"><div class="bz fp l di"><div class="oj ok l"/></div></figure><figure class="mp mq mr ms gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi on"><img src="../Images/d1bd1a7ee7ad2f1c7979175f2763cea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wgZtpW0Mae_d5R_uGON3Xw.png"/></div></div><figcaption class="je jf gj gh gi jg jh bd b be z dk">Q-Q plots of Skew Normal (alpha=5) vs Standard Normal</figcaption></figure><p id="7b29" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">可以观察到的第一件事是，点形成曲线而不是直线，这通常是样本数据偏斜的指示。另一种解释图表的方法是看分布的尾部。在这种情况下，与标准正态分布相比，所考虑的偏斜正态分布具有较轻的左尾(质量较小，点位于 Q-Q 图的左侧，线上方)和较重的右尾(质量较大，点位于 Q-Q 图的右侧，线上方)。我们需要记住，偏态分布是移动的(可以在直方图上观察到)，所以这些结果符合我们的预期。</p><p id="9842" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">我还想快速回顾一下同一个练习的另外两个变化。在第一个示例中，我将理论分布指定为偏斜正态分布，并在<code class="fe nt nu nv nw b">distargs</code>中传递<code class="fe nt nu nv nw b">alpha=5</code>。这导致了下面的图，在图中我们看到了一个线性(虽然与标准参考线相比有所偏移)的图形。然而，线型基本上是一条 45 度线，表明拟合良好(在这种情况下，标准化参考线不是一个好的选择)。</p><figure class="mp mq mr ms gt ix"><div class="bz fp l di"><div class="oj ok l"/></div></figure><figure class="mp mq mr ms gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi oo"><img src="../Images/7b4c74521af7c27938821664d7681771.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ST4hWmHH20FG7cnoqZkr4Q.png"/></div></div><figcaption class="je jf gj gh gi jg jh bd b be z dk">Q-Q plots of Skew Normal (alpha=5) vs Skew Normal (alpha=5)</figcaption></figure><p id="025d" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">第二种方法是比较两个经验样本——一个来自偏斜正态(<code class="fe nt nu nv nw b">alpha=5</code>)，另一个来自标准正态。我设置<code class="fe nt nu nv nw b">fit=False</code> <em class="ni"> </em>是为了关闭位置、比例和<code class="fe nt nu nv nw b">distargs</code>的自动拟合。</p><figure class="mp mq mr ms gt ix"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="56fd" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">结果似乎符合最初的方法(这是一个好迹象:)。</p><figure class="mp mq mr ms gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi op"><img src="../Images/c2e8c22e91141d2ddf540ba34b166fa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zhAIq8_tdelHttZ5p4QhAg.png"/></div></div></figure><p id="44cc" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated"><em class="ni">利用股票收益的例子</em></p><p id="4011" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">我还想展示一个使用 Q-Q 图评估微软股票价格产生的回报是否遵循正态分布的实际例子(更多细节请参考本文<a class="ae ji" rel="noopener" target="_blank" href="/introduction-to-quantitative-finance-part-i-stylised-facts-of-asset-returns-5190581e40ea">中的</a>)。结论是尾部的质量肯定比正常情况下假设的要大(表明更多的负和正回报)。</p><figure class="mp mq mr ms gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi oq"><img src="../Images/19171ff12fc48e5d3f9dc7433c10ff66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bpkks4cgTm3RfSWNP0pOmQ.png"/></div></div><figcaption class="je jf gj gh gi jg jh bd b be z dk">Returns on MSFT vs Norma Distribution</figcaption></figure><p id="da01" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated"><em class="ni">进一步实施细节</em></p><p id="18f0" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">在<code class="fe nt nu nv nw b">ProbPlot</code>的<code class="fe nt nu nv nw b">qqplot</code>方法中，我们可以指定想要绘制哪种参考线。选项(除了<code class="fe nt nu nv nw b">None</code>没有线)有:</p><ul class=""><li id="cb7d" class="my mz jl lu b lv mt ly mu mb na mf nb mj nc mn nd ne nf ng bi translated">s -标准化线(预期订单统计数据按给定样本的标准偏差缩放，并加上平均值)</li><li id="21dd" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated">通过四分位数的 q 线拟合</li><li id="0f6d" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated">r 回归线</li><li id="f205" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated">45 - y=x 线(P-P 图中使用的线)</li></ul><p id="ed51" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">下面我展示了三种方法的比较，正如我们所见，它们非常相似。</p><figure class="mp mq mr ms gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi on"><img src="../Images/e507c05a93955d51dd0644a14de5a889.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-4ncGEH4-ZP9Qy3b3YXTig.png"/></div></div></figure><p id="e441" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">当使用 Q-Q 图时，我们还可以使用<code class="fe nt nu nv nw b">statsmodels</code>的另一个特性，它采用不超过概率代替理论分位数(<code class="fe nt nu nv nw b"><em class="ni">probplot</em></code>方法代替<code class="fe nt nu nv nw b"><em class="ni">qqplot</em></code>)。</p><p id="2b61" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">你可以在这里阅读更多关于这种方法的信息<a class="ae ji" href="https://en.wikipedia.org/wiki/Cumulative_frequency_analysis" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="mp mq mr ms gt ix gh gi paragraph-image"><div role="button" tabindex="0" class="iy iz di ja bf jb"><div class="gh gi or"><img src="../Images/adbfc0d606afd9dd38356f4387d7408d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*taewFOxScwUqjJS6zcDJXg.png"/></div></div></figure><h1 id="9436" class="la lb jl bd lc ld le lf lg lh li lj lk kr ll ks lm ku ln kv lo kx lp ky lq lr bi translated">4.总结</h1><p id="b402" class="pw-post-body-paragraph ls lt jl lu b lv lw km lx ly lz kp ma mb mc md me mf mg mh mi mj mk ml mm mn io bi translated">在本文中，我试图以 P-P 和 Q-Q 图为例解释概率图的关键概念。你可以在我的<a class="ae ji" href="https://github.com/erykml/medium_articles/blob/master/Statistics/probability_plots.ipynb" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到用于生成文章中提到的情节的代码的笔记本。如果你有问题或建议，请在评论中告诉我，或者在<a class="ae ji" href="https://twitter.com/erykml1" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上联系我。</p><p id="ef01" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">喜欢这篇文章吗？成为一个媒介成员，通过无限制的阅读继续学习。如果你使用<a class="ae ji" href="https://eryk-lewinson.medium.com/membership" rel="noopener">这个链接</a>成为会员，你将支持我，不需要你额外付费。提前感谢，再见！</p><p id="4f93" class="pw-post-body-paragraph ls lt jl lu b lv mt km lx ly mu kp ma mb mv md me mf mw mh mi mj mx ml mm mn io bi translated">您可能还会对以下内容感兴趣:</p><div class="iu iv gp gr iw os"><a rel="noopener follow" target="_blank" href="/phik-k-get-familiar-with-the-latest-correlation-coefficient-9ba0032b37e7"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd jm gy z fp ox fr fs oy fu fw jk bi translated">菲克(𝜙k)——熟悉最新的相关系数</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">这在分类变量、序数变量和区间变量之间也是一致的！</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">towardsdatascience.com</p></div></div><div class="pb l"><div class="pc l pd pe pf pb pg jc os"/></div></div></a></div><div class="iu iv gp gr iw os"><a rel="noopener follow" target="_blank" href="/prediction-strength-a-simple-yet-relatively-unknown-way-to-evaluate-clustering-2e5eaf56643"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd jm gy z fp ox fr fs oy fu fw jk bi translated">预测强度—一种简单但相对未知的评估聚类的方法</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">了解该标准如何工作，以及如何从头开始用 Python 实现它！</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">towardsdatascience.com</p></div></div><div class="pb l"><div class="ph l pd pe pf pb pg jc os"/></div></div></a></div><div class="iu iv gp gr iw os"><a rel="noopener follow" target="_blank" href="/the-new-kid-on-the-statistics-in-python-block-pingouin-6b353a1db57c"><div class="ot ab fo"><div class="ou ab ov cl cj ow"><h2 class="bd jm gy z fp ox fr fs oy fu fw jk bi translated">Python 统计块中的新成员:pingouin</h2><div class="oz l"><h3 class="bd b gy z fp ox fr fs oy fu fw dk translated">图书馆的快速参观，以及它是如何从老守卫中脱颖而出的</h3></div><div class="pa l"><p class="bd b dl z fp ox fr fs oy fu fw dk translated">towardsdatascience.com</p></div></div><div class="pb l"><div class="pi l pd pe pf pb pg jc os"/></div></div></a></div><h1 id="de9d" class="la lb jl bd lc ld le lf lg lh li lj lk kr ll ks lm ku ln kv lo kx lp ky lq lr bi translated">参考</h1><ul class=""><li id="7937" class="my mz jl lu b lv lw ly lz mb pj mf pk mj pl mn nd ne nf ng bi translated"><a class="ae ji" href="https://www.quora.com/In-laymans-terms-what-is-the-difference-between-a-P-P-plot-and-a-Q-Q-plot-and-when-would-we-use-one-or-the-other" rel="noopener ugc nofollow" target="_blank">https://www . quora . com/In-laymans-terms-a-P-P-plot-and-a-Q-Q-plot-and-when-we-use-one-or-other</a></li><li id="4e69" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated">【http://v8doc.sas.com/sashtml/qc/chap8/sect9.htm T2】号</li><li id="fe6a" class="my mz jl lu b lv nl ly nm mb nn mf no mj np mn nd ne nf ng bi translated"><a class="ae ji" href="https://www.statsmodels.org/stable/generated/statsmodels.graphics.gofplots.ProbPlot.qqplot.html" rel="noopener ugc nofollow" target="_blank">https://www . stats models . org/stable/generated/stats models . graphics . gofplots . prob plot . QQ plot . html</a></li></ul></div></div>    
</body>
</html>