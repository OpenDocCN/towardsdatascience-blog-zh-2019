<html>
<head>
<title>Uplift Modeling</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">隆起建模</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/uplift-modeling-e38f96b1ef60?source=collection_archive---------2-----------------------#2019-07-28">https://towardsdatascience.com/uplift-modeling-e38f96b1ef60?source=collection_archive---------2-----------------------#2019-07-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/f4d3487a2011968d5000de079e56b123.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X8VSCoNbBoqQCF1Z2S48QQ.jpeg"/></div></div></figure><h2 id="e941" class="jc jd je bd b dl jf jg jh ji jj jk dk jl translated" aria-label="kicker paragraph"><a class="ae ep" href="https://towardsdatascience.com/tagged/data-driven-growth" rel="noopener" target="_blank">使用 Python 实现数据驱动的增长</a></h2><div class=""/><div class=""><h2 id="8e20" class="pw-subtitle-paragraph kk jn je bd b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dk translated">最大化营销活动的增量回报</h2></div><p id="f2ff" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">这一系列文章旨在解释如何以一种简单的方式使用 Python，通过将预测方法应用于您的所有行动来推动您公司的发展。它将是编程、数据分析和机器学习的结合。</p><p id="88d2" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">我将在以下九篇文章中讨论所有主题:</p><p id="fc17" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">1- <a class="ae ly" rel="noopener" target="_blank" href="/data-driven-growth-with-python-part-1-know-your-metrics-812781e66a5b">了解你的衡量标准</a></p><p id="6f26" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">2- <a class="ae ly" rel="noopener" target="_blank" href="/data-driven-growth-with-python-part-2-customer-segmentation-5c019d150444">客户细分</a></p><p id="4c47" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">3- <a class="ae ly" rel="noopener" target="_blank" href="/data-driven-growth-with-python-part-3-customer-lifetime-value-prediction-6017802f2e0f">客户终身价值预测</a></p><p id="34c7" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">4- <a class="ae ly" rel="noopener" target="_blank" href="/churn-prediction-3a4a36c2129a">流失预测</a></p><p id="07f1" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated"><a class="ae ly" rel="noopener" target="_blank" href="/predicting-next-purchase-day-15fae5548027"> 5-预测下一个购买日</a></p><p id="c028" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated"><a class="ae ly" rel="noopener" target="_blank" href="/predicting-sales-611cb5a252de"> 6-预测销售额</a></p><p id="57a8" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated"><a class="ae ly" rel="noopener" target="_blank" href="/market-response-models-baf9f9913298"> 7-市场反应模型</a></p><p id="65de" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated"><strong class="le jo"> 8-隆起建模</strong></p><p id="fddb" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated"><a class="ae ly" rel="noopener" target="_blank" href="/a-b-testing-design-execution-6cf9e27c6559"> 9- A/B 测试设计和执行</a></p><p id="706e" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">文章将有自己的代码片段，使您可以轻松地应用它们。如果你是编程的超级新手，你可以在这里很好地介绍一下<a class="ae ly" href="https://www.kaggle.com/learn/python" rel="noopener ugc nofollow" target="_blank"> Python </a>和<a class="ae ly" href="https://www.kaggle.com/learn/pandas" rel="noopener ugc nofollow" target="_blank"> Pandas </a>(一个我们将在任何事情上使用的著名库)。但是仍然没有编码介绍，您可以学习概念，如何使用您的数据并开始从中产生价值:</p><blockquote class="lz"><p id="6af7" class="ma mb je bd mc md me mf mg mh mi lx dk translated">有时候你必须先跑，然后才能走——托尼·斯塔克</p></blockquote><p id="045d" class="pw-post-body-paragraph lc ld je le b lf mj ko lh li mk kr lk ll ml ln lo lp mm lr ls lt mn lv lw lx im bi translated">作为先决条件，确保你的电脑上安装了 J <a class="ae ly" href="https://jupyter.readthedocs.io/en/latest/install.html" rel="noopener ugc nofollow" target="_blank"> upyter Notebook </a>和 P <a class="ae ly" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank"> ython </a>。代码片段只能在 Jupyter 笔记本上运行。</p><p id="e732" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">好吧，我们开始吧。</p><h1 id="4932" class="mo mp je bd mq mr ms mt mu mv mw mx my kt mz ku na kw nb kx nc kz nd la ne nf bi translated">第 8 部分:隆起建模</h1><p id="80ec" class="pw-post-body-paragraph lc ld je le b lf ng ko lh li nh kr lk ll ni ln lo lp nj lr ls lt nk lv lw lx im bi translated">成长黑客最关键的工作之一是尽可能高效。首先你需要<strong class="le jo">省时</strong>。这意味着你必须快速构思、实验、学习和重复。第二，你需要是<strong class="le jo">性价比</strong>。它意味着给定的预算/时间/努力带来最大的回报。</p><p id="91bc" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated"><a class="ae ly" rel="noopener" target="_blank" href="/data-driven-growth-with-python-part-2-customer-segmentation-5c019d150444">细分</a>帮助成长型黑客提高转化率，从而更具成本效益。但是想象一下这样一种情况，你将要发起一个促销活动，并且你知道你想要针对哪个细分市场。你需要把报价发给每个人吗？</p><p id="f489" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">答案是否定的。在你目前的目标群体中，无论如何都会有顾客购买。给你升职会让你失去自我。我们可以根据这种方法对细分市场进行如下总结:</p><ul class=""><li id="cf91" class="nl nm je le b lf lg li lj ll nn lp no lt np lx nq nr ns nt bi translated">治疗响应者:只有收到报价才会购买的顾客</li><li id="45e6" class="nl nm je le b lf nu li nv ll nw lp nx lt ny lx nq nr ns nt bi translated"><strong class="le jo">处理无响应者:</strong>无论如何都不会购买的客户</li><li id="7986" class="nl nm je le b lf nu li nv ll nw lp nx lt ny lx nq nr ns nt bi translated"><strong class="le jo">控制响应者:</strong>无报价购买的客户</li><li id="360d" class="nl nm je le b lf nu li nv ll nw lp nx lt ny lx nq nr ns nt bi translated"><strong class="le jo">控制不响应者:</strong>如果客户没有收到报价，他们将不会购买</li></ul><p id="d792" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">画面很明显。你需要瞄准治疗反应者(<strong class="le jo"> TR </strong>)和控制无反应者(<strong class="le jo"> CN </strong>)。因为除非你出价，否则他们不会购买，所以这些团体正在促销活动中提升你的地位。另一方面，你需要避免针对治疗无反应者(<strong class="le jo"> TN </strong>)和对照反应者(<strong class="le jo"> CR </strong>)。你不会从针对 TN 和 CN 中获益，CN 会让你自相残杀。</p><p id="71ac" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">还有最后一件简单的事情要做。我们需要确定哪些客户属于哪个类别。答案是隆起建模。它有两个简单的步骤:</p><p id="f250" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">1-预测所有客户在每个组中的概率:我们将为此建立一个多分类模型。</p><p id="5a01" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">2-我们将计算提升分数。提升分数的公式为:</p><figure class="oa ob oc od gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nz"><img src="../Images/3a462ef0695abc2ae8fc307c3882d222.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AvNi0acKGyCs7jYsqcfl_w.png"/></div></div></figure><p id="9084" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">我们将被<strong class="le jo"> TR </strong>和<strong class="le jo"> CN </strong>的概率相加，减去落入其他桶的概率。更高的分数意味着更高的提升。</p><p id="b668" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">好的，让我们看看如何用一个例子来实现它。我们将在<a class="ae ly" rel="noopener" target="_blank" href="/market-response-models-baf9f9913298">上一篇文章</a>中使用相同的数据集，您可以在这里  <strong class="le jo">找到<a class="ae ly" href="https://gist.github.com/karamanbk/ef1a118592e2f7954e5bb582e09bdde3" rel="noopener ugc nofollow" target="_blank"> <strong class="le jo">。</strong></a></strong></p><p id="94a4" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">我们从导入我们需要的库和函数开始:</p><figure class="oa ob oc od gt iv"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="9334" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">然后我们将导入我们的数据:</p><pre class="oa ob oc od gt og oh oi oj aw ok bi"><span id="d14f" class="ol mp je oh b gy om on l oo op">df_data = pd.read_csv('response_data.csv')<br/>df_data.head(10)</span></pre><figure class="oa ob oc od gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oq"><img src="../Images/850e1764c421565e23ba467110d97bfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BLwXoYn0Z5enJJeCbWaYJA.png"/></div></div></figure><p id="77bf" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">正如您在<a class="ae ly" rel="noopener" target="_blank" href="/market-response-models-baf9f9913298">上一篇文章</a>中回忆的那样，我们有收到折扣和买一送一优惠的客户的数据，以及他们的反应。我们还有一个对照组，没有收到任何东西。</p><p id="d396" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">列描述如下:</p><ul class=""><li id="ebca" class="nl nm je le b lf lg li lj ll nn lp no lt np lx nq nr ns nt bi translated">最近:自上次购买以来的月数</li><li id="1e83" class="nl nm je le b lf nu li nv ll nw lp nx lt ny lx nq nr ns nt bi translated">历史:历史采购的价值</li><li id="9c22" class="nl nm je le b lf nu li nv ll nw lp nx lt ny lx nq nr ns nt bi translated">used_discount/used_bogo:指示客户是否使用了折扣或先买一送一</li><li id="0a90" class="nl nm je le b lf nu li nv ll nw lp nx lt ny lx nq nr ns nt bi translated">zip_code:邮政编码的分类，如郊区/城市/农村</li><li id="ddfe" class="nl nm je le b lf nu li nv ll nw lp nx lt ny lx nq nr ns nt bi translated">is_referral:指示客户是否是从推荐渠道获得的</li><li id="6c33" class="nl nm je le b lf nu li nv ll nw lp nx lt ny lx nq nr ns nt bi translated">渠道:客户使用的渠道，电话/网络/多渠道</li><li id="cff4" class="nl nm je le b lf nu li nv ll nw lp nx lt ny lx nq nr ns nt bi translated">报价:发送给客户的报价，折扣/买一送一/无报价</li></ul><p id="5ba5" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">在构建模型之前，让我们应用我们的<strong class="le jo">calc _ upgrade</strong>函数来查看作为基准的该活动的当前提升:</p><pre class="oa ob oc od gt og oh oi oj aw ok bi"><span id="cc92" class="ol mp je oh b gy om on l oo op">calc_uplift(df_data)</span></pre><figure class="oa ob oc od gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi or"><img src="../Images/29e94f4aefc2dc48f54ce0ccea684b11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2veyZ4cprS6vRdmIgNELog.png"/></div></div></figure><p id="24ed" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">折扣的转换提升为 7.66%，买一送一(BOGO)的转换提升为 4.52%。</p><p id="af9d" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">接下来，我们将开始构建我们的模型。</p><h2 id="2dd0" class="ol mp je bd mq os ot dn mu ou ov dp my ll ow ox na lp oy oz nc lt pa pb ne jk bi translated"><strong class="ak">预测抬升得分的多分类模型</strong></h2><p id="87e6" class="pw-post-body-paragraph lc ld je le b lf ng ko lh li nh kr lk ll ni ln lo lp nj lr ls lt nk lv lw lx im bi translated">目前，我们的标签是客户是否转换(1 或 0)。我们需要为<strong class="le jo"> TR </strong>、<strong class="le jo"> TN </strong>、<strong class="le jo"> CR、</strong>和<strong class="le jo"> CN 创建四个类。</strong>我们知道收到折扣和 bogo 优惠的客户是治疗，其余的是控制。让我们创建一个<strong class="le jo"> campaign_group </strong>列来显示这些信息:</p><pre class="oa ob oc od gt og oh oi oj aw ok bi"><span id="7e2b" class="ol mp je oh b gy om on l oo op">df_data['campaign_group'] = 'treatment'<br/>df_data.loc[df_data.offer == 'No Offer', 'campaign_group'] = 'control'</span></pre><p id="c0f4" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">太好了，现在我们需要创建我们的新标签:</p><pre class="oa ob oc od gt og oh oi oj aw ok bi"><span id="4887" class="ol mp je oh b gy om on l oo op">df_data['target_class'] = 0 #CN<br/>df_data.loc[(df_data.campaign_group == 'control') &amp; (df_data.conversion &gt; 0),'target_class'] = 1 #CR<br/>df_data.loc[(df_data.campaign_group == 'treatment') &amp; (df_data.conversion == 0),'target_class'] = 2 #TN<br/>df_data.loc[(df_data.campaign_group == 'treatment') &amp; (df_data.conversion &gt; 0),'target_class'] = 3 #TR</span></pre><p id="d282" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">在本例中，类的映射如下:</p><ul class=""><li id="4666" class="nl nm je le b lf lg li lj ll nn lp no lt np lx nq nr ns nt bi translated">0 -&gt;控制无响应者</li><li id="5a9f" class="nl nm je le b lf nu li nv ll nw lp nx lt ny lx nq nr ns nt bi translated">1 -&gt;控制响应者</li><li id="a310" class="nl nm je le b lf nu li nv ll nw lp nx lt ny lx nq nr ns nt bi translated">2 -&gt;治疗无反应者</li><li id="7176" class="nl nm je le b lf nu li nv ll nw lp nx lt ny lx nq nr ns nt bi translated">3 -&gt;治疗响应者</li></ul><p id="8c2d" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">在训练我们的模型之前，有一个小的特征工程步骤。我们将从<strong class="le jo">历史</strong>列创建聚类，并应用<strong class="le jo"> get_dummies </strong>将分类列转换为数字列:</p><pre class="oa ob oc od gt og oh oi oj aw ok bi"><span id="f8f5" class="ol mp je oh b gy om on l oo op">#creating the clusters<br/>kmeans = KMeans(n_clusters=5)<br/>kmeans.fit(df_data[['history']])<br/>df_data['history_cluster'] = kmeans.predict(df_data[['history']])</span><span id="9547" class="ol mp je oh b gy pc on l oo op">#order the clusters<br/>df_data = order_cluster('history_cluster', 'history',df_data,True)</span><span id="8261" class="ol mp je oh b gy pc on l oo op">#creating a new dataframe as model and dropping columns that defines the label<br/>df_model = df_data.drop(['offer','campaign_group','conversion'],axis=1)</span><span id="4310" class="ol mp je oh b gy pc on l oo op">#convert categorical columns<br/>df_model = pd.get_dummies(df_model)</span></pre><p id="ad06" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">让我们拟合我们的模型，并获得每一类的概率:</p><pre class="oa ob oc od gt og oh oi oj aw ok bi"><span id="d4ff" class="ol mp je oh b gy om on l oo op">#create feature set and labels<br/>X = df_model.drop(['target_class'],axis=1)<br/>y = df_model.target_class</span><span id="482b" class="ol mp je oh b gy pc on l oo op">#splitting train and test groups<br/>X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=56)</span><span id="e241" class="ol mp je oh b gy pc on l oo op">#fitting the model and predicting the probabilities<br/>xgb_model = xgb.XGBClassifier().fit(X_train, y_train)<br/>class_probs = xgb_model.predict_proba(X_test)</span></pre><p id="f7c8" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">变量<strong class="le jo"> class_probs </strong>拥有每个客户的概率。让我们来看一个例子:</p><figure class="oa ob oc od gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pd"><img src="../Images/f15dec3f4a3faaf3d87da373f4829d0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VBUjJWjsfVte4ZYnz_stxw.png"/></div></div></figure><p id="6eef" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">对于该特定客户，我们可以将概率映射如下:</p><ul class=""><li id="3224" class="nl nm je le b lf lg li lj ll nn lp no lt np lx nq nr ns nt bi translated">中国:32%</li><li id="50ff" class="nl nm je le b lf nu li nv ll nw lp nx lt ny lx nq nr ns nt bi translated">CR: 2%</li><li id="83fb" class="nl nm je le b lf nu li nv ll nw lp nx lt ny lx nq nr ns nt bi translated">总人口:58.9%</li><li id="bdfa" class="nl nm je le b lf nu li nv ll nw lp nx lt ny lx nq nr ns nt bi translated">TR: 6.9%</li></ul><p id="87d2" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">因此，该客户的提升分数为:</p><blockquote class="pe pf pg"><p id="94ee" class="lc ld ph le b lf lg ko lh li lj kr lk pi lm ln lo pj lq lr ls pk lu lv lw lx im bi translated">0.32+0.069-0.02-0.589 =<strong class="le jo">-0.22</strong></p></blockquote><p id="d63c" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">让我们将此应用于所有用户，并计算提升分数:</p><pre class="oa ob oc od gt og oh oi oj aw ok bi"><span id="6ad1" class="ol mp je oh b gy om on l oo op">#probabilities for all customers<br/>overall_proba = xgb_model.predict_proba(df_model.drop(['target_class'],axis=1))</span><span id="589f" class="ol mp je oh b gy pc on l oo op">#assign probabilities to 4 different columns<br/>df_model['proba_CN'] = overall_proba[:,0] <br/>df_model['proba_CR'] = overall_proba[:,1] <br/>df_model['proba_TN'] = overall_proba[:,2] <br/>df_model['proba_TR'] = overall_proba[:,3]</span><span id="85b4" class="ol mp je oh b gy pc on l oo op">#calculate uplift score for all customers<br/>df_model['uplift_score'] = df_model.eval('proba_CN + proba_TR - proba_TN - proba_CR')</span><span id="c624" class="ol mp je oh b gy pc on l oo op">#assign it back to main dataframe<br/>df_data['uplift_score'] = df_model['uplift_score']</span></pre><p id="a1f2" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">通过运行上面的代码，我们在主数据帧中添加了一个<strong class="le jo">upgrade _ score</strong>列，如下所示:</p><figure class="oa ob oc od gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pl"><img src="../Images/8eb9031df0307309c1a48aa535049e0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1c09cwITqaopp1g0SyF08Q.png"/></div></div></figure><p id="8fa8" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">是时候检查拥有这个模型最关键的部分了。模型真的有效吗？评价隆起建模的真实性能有点困难。我们将检查上升分数分位数之间的上升是如何变化的，以查看我们是否可以在现实生活中使用该模型。</p><h2 id="60a7" class="ol mp je bd mq os ot dn mu ou ov dp my ll ow ox na lp oy oz nc lt pa pb ne jk bi translated">模型评估</h2><p id="f34a" class="pw-post-body-paragraph lc ld je le b lf ng ko lh li nh kr lk ll ni ln lo lp nj lr ls lt nk lv lw lx im bi translated">为了评估我们的模型，我们将创建两个不同的组，并将它们与我们的基准进行比较。组包括:</p><p id="1faf" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">1-高提升分数:客户的提升分数大于第三个分位数</p><p id="994f" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">2-提升得分低:客户的提升得分&lt; 2nd quantile</p><p id="e9c0" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">We are going to compare:</p><ul class=""><li id="954c" class="nl nm je le b lf lg li lj ll nn lp no lt np lx nq nr ns nt bi translated">Conversion uplift</li><li id="585a" class="nl nm je le b lf nu li nv ll nw lp nx lt ny lx nq nr ns nt bi translated">Revenue uplift per target customer to see if our model can make our actions more efficient.</li></ul><p id="53e7" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">Here is our benchmark for the discount campaign.</p><pre class="oa ob oc od gt og oh oi oj aw ok bi"><span id="936d" class="ol mp je oh b gy om on l oo op">Total Targeted Customer Count: 21307<br/>Discount Conversion Uplift: 7.66%<br/>Discount Order Uplift: 1631.89<br/>Discount Revenue Uplift: $40797.35<br/>Revenue Uplift Per Targeted Customer: $1.91</span></pre><p id="b867" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">Let’s create the first group and see the numbers:</p><pre class="oa ob oc od gt og oh oi oj aw ok bi"><span id="7a4c" class="ol mp je oh b gy om on l oo op">df_data_lift = df_data.copy()<br/>uplift_q_75 = df_data_lift.uplift_score.quantile(0.75)<br/>df_data_lift = df_data_lift[(df_data_lift.offer != 'Buy One Get One') &amp; (df_data_lift.uplift_score &gt; uplift_q_75)].reset_index(drop=True)</span><span id="e2e0" class="ol mp je oh b gy pc on l oo op">#calculate the uplift<br/>calc_uplift(df_data_lift)</span><span id="3db6" class="ol mp je oh b gy pc on l oo op"><strong class="oh jo">results:<br/></strong>User Count: 5282<br/>Discount Conversion Uplift: 12.18%<br/>Discount Order Uplift: 643.57<br/>Discount Revenue Uplift: $16089.36<br/>Revenue Uplift Per Targeted Customer: $3.04</span></pre><p id="76ae" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">The results are great. Revenue uplift per target customer is <strong class="le jo"> 57% </strong>更高，我们很容易看到目标群体的<strong class="le jo"> 25% </strong>贡献了<strong class="le jo"> 40% </strong>的收入提升。</p><p id="789c" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">我们将检查提升分数较低的组的相同数字:</p><pre class="oa ob oc od gt og oh oi oj aw ok bi"><span id="563b" class="ol mp je oh b gy om on l oo op">df_data_lift = df_data.copy()<br/>uplift_q_5 = df_data_lift.uplift_score.quantile(0.5)<br/>df_data_lift = df_data_lift[(df_data_lift.offer != 'Buy One Get One') &amp; (df_data_lift.uplift_score &lt; uplift_q_5)].reset_index(drop=True)</span><span id="2b7e" class="ol mp je oh b gy pc on l oo op">#calculate the uplift<br/>calc_uplift(df_data_lift)</span><span id="bb9e" class="ol mp je oh b gy pc on l oo op"><strong class="oh jo">results:<br/></strong>User Count: 10745<br/>Discount Conversion Uplift: 5.63%<br/>Discount Order Uplift: 604.62<br/>Discount Revenue Uplift: $15115.52<br/>Revenue Uplift Per Targeted Customer: $1.4</span></pre><p id="f825" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">正如预期的那样，每个目标客户的收入增长降至<strong class="le jo"> $1.4 </strong>。此外，该集团有<strong class="le jo"> 50% </strong>的目标客户贡献了<strong class="le jo"> 37% </strong>的收入提升。</p><p id="639b" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">通过使用这种模式，我们可以通过以下方式轻松提高营销活动的效率:</p><ul class=""><li id="0ed3" class="nl nm je le b lf lg li lj ll nn lp no lt np lx nq nr ns nt bi translated">根据提升分数锁定特定细分市场</li><li id="2ffc" class="nl nm je le b lf nu li nv ll nw lp nx lt ny lx nq nr ns nt bi translated">根据客户的提升分数尝试不同的优惠</li></ul><p id="a769" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">在下一篇文章中，我将解释增长黑客的核心要素之一:<a class="ae ly" rel="noopener" target="_blank" href="/a-b-testing-design-execution-6cf9e27c6559"> <strong class="le jo"> A/B 测试</strong> </a> <strong class="le jo">。这将是我们这个系列的最后一篇文章。</strong></p><p id="6a50" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">你可以在这里找到这篇文章<a class="ae ly" href="https://gist.github.com/karamanbk/c7019ecbd32ab7370475727c0bf500e9" rel="noopener ugc nofollow" target="_blank">的 Jupyter 笔记本。</a></p></div><div class="ab cl pm pn hx po" role="separator"><span class="pp bw bk pq pr ps"/><span class="pp bw bk pq pr ps"/><span class="pp bw bk pq pr"/></div><div class="im in io ip iq"><p id="9e88" class="pw-post-body-paragraph lc ld je le b lf lg ko lh li lj kr lk ll lm ln lo lp lq lr ls lt lu lv lw lx im bi translated">需要帮助来发展你的公司吗？在此与我预约免费课程。</p></div></div>    
</body>
</html>