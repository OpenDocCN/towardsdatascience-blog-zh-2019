<html>
<head>
<title>Quick Guide to Run your Python Scripts on Google Colaboratory</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Google 联合实验室上运行 Python 脚本的快速指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/google-colab-59ad8510eb7e?source=collection_archive---------8-----------------------#2019-01-26">https://towardsdatascience.com/google-colab-59ad8510eb7e?source=collection_archive---------8-----------------------#2019-01-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a1ca" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">今天就开始用免费的 GPU 训练你的神经网络吧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/31c6a6a462f963030c954639db6f0724.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nHP3hKYIu_ghwsH4"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@cgower?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Christopher Gower</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e7bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你正在寻找一种交互式的方式来运行你的 Python 脚本，比方说你想和几个朋友一起开始一个机器学习项目，不要再犹豫了——Google Colab 是最适合你的解决方案。你可以在线工作，把你的代码保存在本地的谷歌硬盘上，它允许你</p><ul class=""><li id="fa67" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">使用免费的 GPU(和 TPU)运行您的脚本！)</li><li id="1e93" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">利用预装的 Python 库和 Jupyter 笔记本特性</li><li id="3c30" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">在任何你想去的地方工作，它就在云上</li><li id="2172" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">与同事共享代码和协作</li></ul><p id="689b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简言之，</p><blockquote class="mj"><p id="cde3" class="mk ml it bd mm mn mo mp mq mr ms lu dk translated">Google Colab = Jupyter 笔记本+免费 GPU</p></blockquote><p id="e7f5" class="pw-post-body-paragraph kz la it lb b lc mt ju le lf mu jx lh li mv lk ll lm mw lo lp lq mx ls lt lu im bi translated">与大多数(如果不是全部)替代方案相比，它的界面可以说是更干净的。我想出了一些代码片段，供你掌握 Google Colab。当您需要一些现成的代码来解决 Colab 上的常见问题时，我希望这成为一篇必不可少的文章。</p><h2 id="b713" class="my mz it bd na nb nc dn nd ne nf dp ng li nh ni nj lm nk nl nm lq nn no np nq bi translated">目录</h2><ul class=""><li id="fe4f" class="lv lw it lb b lc nr lf ns li nt lm nu lq nv lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/p/59ad8510eb7e#a166" rel="noopener">基础知识</a></li><li id="ee18" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/p/59ad8510eb7e#4424" rel="noopener">文件</a></li><li id="1350" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/p/59ad8510eb7e#75b9" rel="noopener">库</a></li><li id="7684" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/p/59ad8510eb7e#cfc5" rel="noopener">机器学习</a></li><li id="d769" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><a class="ae ky" href="https://medium.com/p/59ad8510eb7e#2cb4" rel="noopener">备注</a></li></ul><p id="b0c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nw">原载于我的博客</em><a class="ae ky" href="https://edenau.github.io" rel="noopener ugc nofollow" target="_blank"><em class="nw">edenau . github . io</em></a><em class="nw">。</em></p></div><div class="ab cl nx ny hx nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="im in io ip iq"><h1 id="a166" class="oe mz it bd na of og oh nd oi oj ok ng jz ol ka nj kc om kd nm kf on kg np oo bi translated">基础</h1><h2 id="1ceb" class="my mz it bd na nb nc dn nd ne nf dp ng li nh ni nj lm nk nl nm lq nn no np nq bi translated">启用 GPU/TPU 加速</h2><p id="d330" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li op lk ll lm oq lo lp lq or ls lt lu im bi translated">进入<strong class="lb iu">‘运行时’&gt;‘更改运行时类型’&gt;‘硬件加速器’</strong>，选择‘GPU’或‘TPU’。您可以通过以下方式检查 GPU 是否已启用</p><pre class="kj kk kl km gt os ot ou ov aw ow bi"><span id="7de3" class="my mz it ot b gy ox oy l oz pa">import tensorflow as tf<br/>device_name = tf.test.gpu_device_name()<br/>if device_name != '/device:GPU:0':<br/>  raise SystemError('GPU device not found')</span></pre><p id="7940" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果 GPU 未启用，将会引发错误。请注意，您最多只能连续运行 12 小时的会话，并且环境不会跨会话持续存在。</p><h2 id="2769" class="my mz it bd na nb nc dn nd ne nf dp ng li nh ni nj lm nk nl nm lq nn no np nq bi translated">运行单元</h2><p id="e33b" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li op lk ll lm oq lo lp lq or ls lt lu im bi translated"><strong class="lb iu"> <em class="nw"> SHIFT + ENTER </em> </strong></p><h2 id="2fca" class="my mz it bd na nb nc dn nd ne nf dp ng li nh ni nj lm nk nl nm lq nn no np nq bi translated">执行 Bash 命令</h2><p id="ff8c" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li op lk ll lm oq lo lp lq or ls lt lu im bi translated">只需在前面加一个<code class="fe pb pc pd ot b">!</code>，例如:</p><pre class="kj kk kl km gt os ot ou ov aw ow bi"><span id="ba3f" class="my mz it ot b gy ox oy l oz pa">!ls '/content/gdrive/My Drive/Colab Notebooks/'</span></pre><p id="d656" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们检查他们正在使用的操作系统、处理器和 RAM 的信息:</p><pre class="kj kk kl km gt os ot ou ov aw ow bi"><span id="d57f" class="my mz it ot b gy ox oy l oz pa">!cat /proc/version<br/>!cat /proc/cpuinfo<br/>!cat /proc/meminfo</span></pre><p id="c308" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Linux，不出意外。</p></div><div class="ab cl nx ny hx nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="im in io ip iq"><h1 id="4424" class="oe mz it bd na of og oh nd oi oj ok ng jz ol ka nj kc om kd nm kf on kg np oo bi translated">文件</h1><h2 id="1add" class="my mz it bd na nb nc dn nd ne nf dp ng li nh ni nj lm nk nl nm lq nn no np nq bi translated">访问 Google Drive 上的文件</h2><p id="6681" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li op lk ll lm oq lo lp lq or ls lt lu im bi translated">使用以下脚本:</p><pre class="kj kk kl km gt os ot ou ov aw ow bi"><span id="c77b" class="my mz it ot b gy ox oy l oz pa">from google.colab import drive<br/>drive.mount('/content/gdrive')</span></pre><p id="84cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，您将被要求登录您的谷歌帐户，并复制一个授权码。<strong class="lb iu"> <em class="nw">点击链接，复制代码，粘贴代码。</em> </strong></p><pre class="kj kk kl km gt os ot ou ov aw ow bi"><span id="15d9" class="my mz it ot b gy ox oy l oz pa">Go to this URL in a browser: <a class="ae ky" href="https://accounts.google.com/signin/oauth/identifier?client_id=947318989803-6bn6qk8qdgf4n4g3pfee6491hc0brc4i.apps.googleusercontent.com&amp;as=kh_zwwnAjZxRR9c036hjvA&amp;nosignup=1&amp;approval_state=!ChRkUmNrRGNkbHRZc3YwMjVPZU9ydRIfQTNkNU9vUnBieTBSY0t0V0xtY192ZHJvOHJ0aWh4WQ%E2%88%99APNbktkAAAAAXEiHtWgCVch04PQ_PvopPgfrZKdEK4lI&amp;oauthgdpr=1&amp;oauthriskyscope=1&amp;xsrfsig=ChkAeAh8T59BFeu89K-KwgpUkeRD7fzyWfJYEg5hcHByb3ZhbF9zdGF0ZRILZGVzdGluYXRpb24SBXNvYWN1Eg9vYXV0aHJpc2t5c2NvcGU&amp;flowName=GeneralOAuthFlow" rel="noopener ugc nofollow" target="_blank">https://accounts.google.com/signin/oauth/.</a>..<br/>Enter your authorization code:<br/> ·········· <br/>Mounted at /content/gdrive</span></pre><h2 id="1d20" class="my mz it bd na nb nc dn nd ne nf dp ng li nh ni nj lm nk nl nm lq nn no np nq bi translated">上传文件</h2><p id="d7df" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li op lk ll lm oq lo lp lq or ls lt lu im bi translated">你可以简单地将文件手动上传到你的 Google Drive，并使用上面的代码访问它们。或者，您可以使用以下代码:</p><pre class="kj kk kl km gt os ot ou ov aw ow bi"><span id="e0e6" class="my mz it ot b gy ox oy l oz pa">from google.colab import files<br/>uploaded = files.upload()</span></pre><h2 id="2c80" class="my mz it bd na nb nc dn nd ne nf dp ng li nh ni nj lm nk nl nm lq nn no np nq bi translated">运行可执行文件</h2><p id="22f3" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li op lk ll lm oq lo lp lq or ls lt lu im bi translated">将可执行文件复制到<code class="fe pb pc pd ot b">/usr/local/bin</code>，给自己执行的权限。</p><pre class="kj kk kl km gt os ot ou ov aw ow bi"><span id="ad87" class="my mz it ot b gy ox oy l oz pa">!cp /content/gdrive/My\ Drive/Colab\ Notebooks/&lt;FILE&gt; /usr/local/bin<br/>!chmod 755 /usr/local/bin/&lt;FILE&gt;</span></pre></div><div class="ab cl nx ny hx nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="im in io ip iq"><h1 id="75b9" class="oe mz it bd na of og oh nd oi oj ok ng jz ol ka nj kc om kd nm kf on kg np oo bi translated">图书馆</h1><h2 id="dc6d" class="my mz it bd na nb nc dn nd ne nf dp ng li nh ni nj lm nk nl nm lq nn no np nq bi translated">安装库</h2><p id="4bd9" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li op lk ll lm oq lo lp lq or ls lt lu im bi translated">在 bash 命令中使用<code class="fe pb pc pd ot b">pip</code>:</p><pre class="kj kk kl km gt os ot ou ov aw ow bi"><span id="6b4f" class="my mz it ot b gy ox oy l oz pa">!pip install &lt;PACKAGE_NAME&gt;</span></pre><p id="e3c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者<code class="fe pb pc pd ot b">conda</code>:</p><pre class="kj kk kl km gt os ot ou ov aw ow bi"><span id="d7fe" class="my mz it ot b gy ox oy l oz pa">!wget -c <a class="ae ky" href="https://repo.continuum.io/archive/Anaconda3-5.1.0-Linux-x86_64.sh" rel="noopener ugc nofollow" target="_blank">https://repo.continuum.io/archive/Anaconda3-5.1.0-Linux-x86_64.sh</a><br/>!chmod +x Anaconda3-5.1.0-Linux-x86_64.sh<br/>!bash ./Anaconda3-5.1.0-Linux-x86_64.sh -b -f -p /usr/local<br/>!conda install -q -y --prefix /usr/local -c conda-forge &lt;PACKAGE_NAME&gt;</span><span id="a5ac" class="my mz it ot b gy pe oy l oz pa">import sys<br/>sys.path.append('/usr/local/lib/python3.6/site-packages/')</span></pre></div><div class="ab cl nx ny hx nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="im in io ip iq"><h1 id="cfc5" class="oe mz it bd na of og oh nd oi oj ok ng jz ol ka nj kc om kd nm kf on kg np oo bi translated">机器学习</h1><h2 id="8121" class="my mz it bd na nb nc dn nd ne nf dp ng li nh ni nj lm nk nl nm lq nn no np nq bi translated">张量板</h2><p id="2d69" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li op lk ll lm oq lo lp lq or ls lt lu im bi translated">使用<code class="fe pb pc pd ot b">ngrok</code>:</p><pre class="kj kk kl km gt os ot ou ov aw ow bi"><span id="d996" class="my mz it ot b gy ox oy l oz pa"># Run Tensorboard in the background<br/>LOGDIR = '/tmp/log'<br/>get_ipython().system_raw(<br/>    'tensorboard --logdir {} --host 0.0.0.0 --port 6006 &amp;'<br/>    .format(LOGDIR)<br/>)</span><span id="c4a2" class="my mz it ot b gy pe oy l oz pa"># Use ngrok to tunnel traffic to localhost<br/>! wget <a class="ae ky" href="https://bin.equinox.io/c/4VmDzA7iaHb/ngrok-stable-linux-amd64.zip" rel="noopener ugc nofollow" target="_blank">https://bin.equinox.io/c/4VmDzA7iaHb/ngrok-stable-linux-amd64.zip</a><br/>! unzip ngrok-stable-linux-amd64.zip<br/>get_ipython().system_raw('./ngrok http 6006 &amp;')</span><span id="bf75" class="my mz it ot b gy pe oy l oz pa"># Retrieve public url<br/>! curl -s <a class="ae ky" href="http://localhost:4040/api/tunnels" rel="noopener ugc nofollow" target="_blank">http://localhost:4040/api/tunnels</a> | python3 -c \<br/>    "import sys, json; print(json.load(sys.stdin)['tunnels'][0]['public_url'])"</span></pre><p id="90ac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你会得到一个类似这样的超链接:</p><pre class="kj kk kl km gt os ot ou ov aw ow bi"><span id="78f6" class="my mz it ot b gy ox oy l oz pa"><a class="ae ky" href="https://d5b842b9.ngrok.io/" rel="noopener ugc nofollow" target="_blank">https://d5b842b9.ngrok.io</a></span></pre><p id="8257" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过链接访问您的 Tensorboard！</p></div><div class="ab cl nx ny hx nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="im in io ip iq"><h1 id="2cb4" class="oe mz it bd na of og oh nd oi oj ok ng jz ol ka nj kc om kd nm kf on kg np oo bi translated">评论</h1><p id="13cd" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li op lk ll lm oq lo lp lq or ls lt lu im bi translated">我的许多项目都是使用 Google Colab 开发的。查看以下文章了解更多信息。</p><div class="pf pg gp gr ph pi"><a rel="noopener follow" target="_blank" href="/5-python-features-i-wish-i-had-known-earlier-bc16e4a13bf4"><div class="pj ab fo"><div class="pk ab pl cl cj pm"><h2 class="bd iu gy z fp pn fr fs po fu fw is bi translated">我希望我能早点知道的 5 个 Python 特性</h2><div class="pp l"><h3 class="bd b gy z fp pn fr fs po fu fw dk translated">超越 lambda、map 和 filter 的 Python 技巧</h3></div><div class="pq l"><p class="bd b dl z fp pn fr fs po fu fw dk translated">towardsdatascience.com</p></div></div><div class="pr l"><div class="ps l pt pu pv pr pw ks pi"/></div></div></a></div><div class="pf pg gp gr ph pi"><a rel="noopener follow" target="_blank" href="/visualizing-bike-mobility-in-london-using-interactive-maps-for-absolute-beginners-3b9f55ccb59"><div class="pj ab fo"><div class="pk ab pl cl cj pm"><h2 class="bd iu gy z fp pn fr fs po fu fw is bi translated">使用交互式地图和动画可视化伦敦的自行车移动性</h2><div class="pp l"><h3 class="bd b gy z fp pn fr fs po fu fw dk translated">探索 Python 中的数据可视化工具</h3></div><div class="pq l"><p class="bd b dl z fp pn fr fs po fu fw dk translated">towardsdatascience.com</p></div></div><div class="pr l"><div class="px l pt pu pv pr pw ks pi"/></div></div></a></div><div class="pf pg gp gr ph pi"><a rel="noopener follow" target="_blank" href="/handling-netcdf-files-using-xarray-for-absolute-beginners-111a8ab4463f"><div class="pj ab fo"><div class="pk ab pl cl cj pm"><h2 class="bd iu gy z fp pn fr fs po fu fw is bi translated">绝对初学者使用 XArray 处理 NetCDF 文件</h2><div class="pp l"><h3 class="bd b gy z fp pn fr fs po fu fw dk translated">探索 Python 中与气候相关的数据操作工具</h3></div><div class="pq l"><p class="bd b dl z fp pn fr fs po fu fw dk translated">towardsdatascience.com</p></div></div><div class="pr l"><div class="py l pt pu pv pr pw ks pi"/></div></div></a></div><p id="7a38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读！</p><p id="1a8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nw">原载于我的博客</em><a class="ae ky" href="https://edenau.github.io" rel="noopener ugc nofollow" target="_blank"><em class="nw">edenau . github . io</em></a><em class="nw">。</em></p></div></div>    
</body>
</html>