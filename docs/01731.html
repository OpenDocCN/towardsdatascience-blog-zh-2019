<html>
<head>
<title>NLP Part 1| Scraping the Web using BeautifulSoup and Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NLP 第 1 部分|使用 BeautifulSoup 和 Python 抓取 Web</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/scraping-the-web-using-beautifulsoup-and-python-5df8e63d9de3?source=collection_archive---------3-----------------------#2019-03-21">https://towardsdatascience.com/scraping-the-web-using-beautifulsoup-and-python-5df8e63d9de3?source=collection_archive---------3-----------------------#2019-03-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/828486085c10d727d20e8c91f2ead867.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tF9nERH4RPyidZHo"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Photo by <a class="ae kf" href="https://unsplash.com/@patuphotos?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Patrick Selin</a> on <a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div><div class="ab cl kg kh hx ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="im in io ip iq"><p id="68ab" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">数据是任何数据科学项目的核心，然而我们常常认为数据的可用性是理所当然的，尤其是当它整齐地出现在 SQL 数据库中或者更好地出现在我们的收件箱中时。</p><p id="dfc9" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">也就是说，由于其特定的性质，有时您正在寻找的数据并不容易获得。这个问题的一个可能的解决方案是<strong class="kp iu">网络抓取</strong>的想法，或者通过仔细阅读特定网站的 HTML 从该网站提取信息。例如，让我们说你正在计划一个假期，你在寻找机票何时开始销售。是的，你可以每小时浏览同一个旅游网站，希望价格会下降，但更有效的方法是每小时浏览旅游网站，并有一个输出文件为你提供最新的票价。</p><h2 id="797b" class="ll lm it bd ln lo lp dn lq lr ls dp lt ky lu lv lw lc lx ly lz lg ma mb mc md bi translated">放弃</h2><p id="73f5" class="pw-post-body-paragraph kn ko it kp b kq me ks kt ku mf kw kx ky mg la lb lc mh le lf lg mi li lj lk im bi translated">许多网站不希望自己的数据被窃取，尤其是当这些数据包含可识别的用户信息时(如脸书、Linkedin 等)。).请考虑您选择刮取哪些数据以及刮取的频率。</p></div><div class="ab cl kg kh hx ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="im in io ip iq"><h2 id="dc0c" class="ll lm it bd ln lo lp dn lq lr ls dp lt ky lu lv lw lc lx ly lz lg ma mb mc md bi translated">NLP 系列</h2><p id="0323" class="pw-post-body-paragraph kn ko it kp b kq me ks kt ku mf kw kx ky mg la lb lc mh le lf lg mi li lj lk im bi translated">这个简短的教程是关于自然语言处理(NLP)的 3 部分系列的第一部分。在这个系列中，我们将探索抓取网站数据的技术，预处理并准备好数据以供分析，最后从我们的 NLP 数据中收集见解。</p><p id="f84f" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><a class="ae kf" href="https://medium.com/@kamilmysiak/preprocessing-text-data-using-python-576206753c28" rel="noopener"> NLP 第二部</a></p><p id="64c1" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><a class="ae kf" href="https://medium.com/@kamilmysiak/nlp-part-3-exploratory-data-analysis-of-text-data-1caa8ab3f79d" rel="noopener"> NLP 第三部</a></p><h1 id="9029" class="mj lm it bd ln mk ml mm lq mn mo mp lt mq mr ms lw mt mu mv lz mw mx my mc mz bi translated">从 Indeed.com 搜集公司评论</h1><p id="f2b9" class="pw-post-body-paragraph kn ko it kp b kq me ks kt ku mf kw kx ky mg la lb lc mh le lf lg mi li lj lk im bi translated">在这个例子中，让我们尝试抓取 indeed.com，但具体来说是公司评论。让我们针对员工的评分、评估职称、评估描述以及优点和缺点。</p><figure class="nb nc nd ne gt ju gh gi paragraph-image"><div class="gh gi na"><img src="../Images/0fe9687a9a55f5260c3fb06613ca5328.png" data-original-src="https://miro.medium.com/v2/resize:fit:1394/format:webp/1*U7GDw98sO0d3g5EnpD5Uzg.png"/></div></figure><h2 id="9440" class="ll lm it bd ln lo lp dn lq lr ls dp lt ky lu lv lw lc lx ly lz lg ma mb mc md bi translated">HTML 基础</h2><p id="8241" class="pw-post-body-paragraph kn ko it kp b kq me ks kt ku mf kw kx ky mg la lb lc mh le lf lg mi li lj lk im bi translated">在我们真正开始收集信息之前，我们需要熟悉 HTML 的基本结构，因为我们实际上将使用 HTML 标签来标识我们希望收集的信息。</p><p id="fb57" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我们可以通过在您当前的浏览器中打开开发者工具来访问网站的 HTML。比如 Firefox(选项→ Web Developer → Inspector)。所有这些蓝色的“div”标签、箭头、类和 id 就是你当前所在网站的 HTML。</p><figure class="nb nc nd ne gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nf"><img src="../Images/6d9f205e94f9f93b826ab1e41b96c04d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9i7SqWQACDJXX0cXH6yOqg.png"/></div></div></figure><p id="606e" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">在我们研究 indeed.com 的 HTML 之前，让我们用下面的例子回顾一下它的基本结构。</p><figure class="nb nc nd ne gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ng"><img src="../Images/7ffb698d4f13a8383660180acd7e0f0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-jCJ7ROpPqEbjIV-Emq17g.png"/></div></div></figure><p id="a43d" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">HTML 描述了网站的底层结构。换句话说，它标识了网站将有一个标题，多个段落，一个嵌入的视频，一个结束页脚，等等。HTML 不会描述这些组件将如何排列，它们的样式、大小、颜色等。</p><p id="cf31" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">HTML 代码本质上是分层的，缩进的标签(即。<div>、<ul>等。)确定层次结构中的每个新级别。例如，“”标签位于层次结构的顶部(也称为容器)，它包含所有其他元素。body 标签尤其重要，因为它包含了网站上绝大多数可见的信息。正如你所看到的，body 标签包含了各种其他的嵌套标签，在我们的例子中，它存储了一个段落，然后包含一个链接、一个评论标题和实际的评论文本“相当好”。能够阅读和理解嵌套的标签线索是很重要的，它将我们引向实际的评论文本“相当好”,因为这是我们想要收集的信息。让我们把注意力转向 python 代码，它钻透了标签的层次结构来提取文本。</ul></div></p></div><div class="ab cl kg kh hx ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="im in io ip iq"><h2 id="f1e3" class="ll lm it bd ln lo lp dn lq lr ls dp lt ky lu lv lw lc lx ly lz lg ma mb mc md bi translated">Python 代码</h2><p id="9a9e" class="pw-post-body-paragraph kn ko it kp b kq me ks kt ku mf kw kx ky mg la lb lc mh le lf lg mi li lj lk im bi translated">首先，我们需要导入所需的库。</p><pre class="nb nc nd ne gt nh ni nj nk aw nl bi"><span id="5c2b" class="ll lm it ni b gy nm nn l no np">from bs4 import BeautifulSoup<br/>import lxml<br/>import requests<br/>import pandas as pd<br/>import numpy as np</span></pre><p id="0df3" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">导入的“request”库有一个 get()函数，它将向 indeed.com 服务器请求 URL 的内容，并将服务器的响应存储在“base_url”变量中。如果我们打印“base_url”变量，我们将实际看到页面的整个 HTML。</p><pre class="nb nc nd ne gt nh ni nj nk aw nl bi"><span id="fb3e" class="ll lm it ni b gy nm nn l no np">base_url = requests.get('<a class="ae kf" href="https://www.indeed.com/cmp/Google/reviews?fcountry=ALL&amp;start='" rel="noopener ugc nofollow" target="_blank">https://www.indeed.com/cmp/Google/reviews?fcountry=ALL&amp;start='</a>, timeout=5)</span><span id="4598" class="ll lm it ni b gy nq nn l no np">print(base_url.text)</span></pre><figure class="nb nc nd ne gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nr"><img src="../Images/10462758cd1d9c95dd23c19dc4fe2e6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CpwOSuG1jdhj0m_4-GG8-Q.png"/></div></div></figure><p id="a782" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">让我们首先定义一个名为“parse”的函数，它需要一个参数，这个参数将是我们试图解析/抓取的页面的实际 URL。接下来，我们将使用 BeautifulSoup 类创建器来解析所提供网站的内容(HTML 代码)。我们将使用“lxml”解析器，以防 HTML 格式不完美。更多关于 BeautifulSoup 可用的不同解析器的信息，请访问这个<a class="ae kf" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/#specifying-the-parser-to-use" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><blockquote class="ns nt nu"><p id="80eb" class="kn ko nv kp b kq kr ks kt ku kv kw kx nw kz la lb nx ld le lf ny lh li lj lk im bi translated">请记住，网站通常会通过更改容器中项目的名称或父/子关系来调整其 HTML 脚本。这些变化需要你调整你的职能。该函数于 6 月 20 日进行了调整，以修复新实现的 indeed.com HTML 脚本</p></blockquote><pre class="nb nc nd ne gt nh ni nj nk aw nl bi"><span id="956d" class="ll lm it ni b gy nm nn l no np">def parse(full_url):<br/>    <strong class="ni iu">page_content = BeautifulSoup(full_url.content, 'lxml')</strong><br/>    containers = page_content.findAll('div', <br/>                 {'class':'cmp-Review-container'})<br/>    df = pd.DataFrame(columns = <br/>         ['rating', 'rating_title',  'rating_description',<br/>                         'rating_pros', 'rating_cons'])<br/>    <br/>    for item in containers:<br/>        try:<br/>            rating = item.find('div', <br/>                     {'class': 'cmp-ReviewRating-text'})<br/>                     .text.replace('\n', '')<br/>        except:<br/>            rating = None<br/>        try:<br/>            rating_title = item.find('div', <br/>                           {'class': 'cmp-Review-title'})<br/>                           .text.replace('\n', '')<br/>        except:<br/>            rating_title = None<br/>        try:<br/>            rating_description = item.find('span', <br/>                                 {'itemprop': 'reviewBody'})<br/>                                 .text.replace('\r', '. ')<br/>        except:<br/>            rating_description = None<br/>        try:<br/>            rating_pros = item.find('div', <br/>                          {'class': 'cmp-ReviewProsCons-prosText'})<br/>                          .text.replace('\n', '')<br/>        except:<br/>            rating_pros = None<br/>        try:<br/>            rating_cons = item.find('div', <br/>                          {'class': 'cmp-ReviewProsCons-consText'})<br/>                          .text.replace('\n', '')<br/>        except:<br/>            rating_cons = None<br/>        df = df.append({'rating': rating, <br/>             'rating_title': rating_title, <br/>             'rating_description': rating_description,<br/>             'rating_pros': rating_pros, <br/>             'rating_cons': rating_cons}, ignore_index=True)<br/>    return df</span></pre><p id="a125" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">接下来，我们需要更仔细地检查 HTML 以识别哪个根容器(即哪个父标签)容纳包含我们要抓取的信息的子/嵌套标签。让我们导航到“<a class="ae kf" href="https://www.indeed.com/cmp/Google/reviews?fcountry=ALL&amp;start=" rel="noopener ugc nofollow" target="_blank">https://www.indeed.com/cmp/Google/reviews?fcountry=ALL&amp;start =</a>”，因为我们将收集员工对谷歌的评论。打开您的开发工具，观察网站的 HTML。请注意，一旦您访问了网站的 HTML，在网站上移动鼠标光标会导致特定区域高亮显示，并且 HTML 似乎会随着您移动光标而改变。当您移动光标时，您的开发者工具会自动将您带到网页上突出显示部分的 HTML 部分。这非常有帮助，因为我们可以快速识别 HTML 代码中需要更详细检查的部分。</p><p id="c7a4" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">如果您还记得，在本教程中，我们感兴趣的是收集员工的总体评分、考核标题、考核描述、优点和缺点。我们需要识别哪个 HTML 标签是所有这些信息的容器或家。通过将鼠标光标移动到适当的位置，我们看到所有我们想要抓取的信息都整齐地包含在一个根元素中。通过检查下面的 HTML，我们可以看到“<div tag="" contains="" all="" the="" information="" we="" need="" in="" a="" class="" attribute="" named="">”现在移动到一个不同的评论，您将看到名为“cmp-Review-container”的同一个类属性，它存储该评论的数据。</div></p><figure class="nb nc nd ne gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nz"><img src="../Images/d87b3c7e8019256a542e48016809b696.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GSogik7Fj6y8dI2PB2ip4g.png"/></div></div></figure><p id="56bf" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">因此，我们将使用“findall()”方法提取所有具有“cmp-Review-container”类属性的“div”容器。接下来，我们将创建一个名为“df”的空 pandas 数据帧，我们将把抓取的数据追加到该数据帧中。</p><pre class="nb nc nd ne gt nh ni nj nk aw nl bi"><span id="f6aa" class="ll lm it ni b gy nm nn l no np">def parse(full_url):<br/>    page_content = BeautifulSoup(full_url.content, 'lxml')<br/>    <strong class="ni iu">containers = page_content.findAll('div', <br/>                 {'class':'cmp-Review-container'})<br/>    df = pd.DataFrame(columns = <br/>         ['rating', 'rating_title',  'rating_description',<br/>                         'rating_pros', 'rating_cons'])</strong><br/>    <br/>    for item in containers:        <br/>        try:<br/>            rating = item.find('div', <br/>                     {'class': 'cmp-ReviewRating-text'})<br/>                     .text.replace('\n', '')<br/>        except:<br/>            rating = None<br/>        try:<br/>            rating_title = item.find('div', <br/>                           {'class': 'cmp-Review-title'})<br/>                           .text.replace('\n', '')<br/>        except:<br/>            rating_title = None<br/>        try:<br/>            rating_description = item.find('span', <br/>                                 {'itemprop': 'reviewBody'})<br/>                                 .text.replace('\r', '. ')<br/>        except:<br/>            rating_description = None<br/>        try:<br/>            rating_pros = item.find('div', <br/>                          {'class': 'cmp-ReviewProsCons-prosText'})<br/>                          .text.replace('\n', '')<br/>        except:<br/>            rating_pros = None<br/>        try:<br/>            rating_cons = item.find('div', <br/>                          {'class': 'cmp-ReviewProsCons-consText'})<br/>                          .text.replace('\n', '')<br/>        except:<br/>            rating_cons = None<br/>        df = df.append({'rating': rating, <br/>             'rating_title': rating_title, <br/>             'rating_description': rating_description,<br/>             'rating_pros': rating_pros, <br/>             'rating_cons': rating_cons}, ignore_index=True)<br/>    return df</span></pre><p id="5a96" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">既然我们已经为所有想要抓取的数据确定了容器，那么让我们更深入地研究 HTML，以确定包含实际数据的元素。首先，评论评级再次位于“cmp-Review-container”容器中，但是向下钻几层，我们会发现“&lt; div”标记具有“cmp-ReviewRating-text”类属性，它实际上存储了“5.0”评级。让我们记下存储这些数据的标签和类属性，因为下面的 python 脚本需要这些信息。我们对希望提取的所有剩余数据重复该过程。</p><figure class="nb nc nd ne gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oa"><img src="../Images/9f84238d96efc42f446690f3ba84665e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wQaqru6LhFlj4JQYonAkhw.png"/></div></div></figure><figure class="nb nc nd ne gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ob"><img src="../Images/eacc80d16df49d120a76debd32c44cec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wz_WDePupqjwDfiM78knOg.png"/></div></div></figure><blockquote class="oc"><p id="e5b8" class="od oe it bd of og oh oi oj ok ol lk dk translated">这是对你的挑战。为什么我们要用(")替换回车(" \r "))为我们评分 _ 描述？提示:标题为“工作环境棒”和“工作环境好”的评论有什么区别？在下面的评论中发表你的答案吧！😉</p></blockquote><p id="ba05" class="pw-post-body-paragraph kn ko it kp b kq om ks kt ku on kw kx ky oo la lb lc op le lf lg oq li lj lk im bi translated">一旦我们为数据确定了合适的标签，让我们把注意力转回到 python 代码上。我们可以在 for 循环中使用 try/except 块，通过 find()方法在容器中搜索已识别的标签。我们使用 find()而不是 findall()，因为我们只希望返回第一个匹配，因为我们使用了 for 循环。最后，我们将抓取的数据追加回之前创建的空数据帧中。</p><pre class="nb nc nd ne gt nh ni nj nk aw nl bi"><span id="d622" class="ll lm it ni b gy nm nn l no np">def parse(full_url):<br/>    page_content = BeautifulSoup(full_url.content, 'lxml')<br/>    containers = page_content.findAll('div', <br/>                 {'class':'cmp-Review-container'})<br/>    df = pd.DataFrame(columns = <br/>         ['rating', 'rating_title',  'rating_description',<br/>                         'rating_pros', 'rating_cons']<strong class="ni iu">)</strong><br/>    <br/>    for item in containers:        <br/>        try:<br/>            <strong class="ni iu">rating = item.find('div', <br/>                     {'class': 'cmp-ReviewRating-text'})<br/>                     .text.replace('\n', '')</strong><br/>        except:<br/>            rating = None<br/>        try:<br/>            <strong class="ni iu">rating_title = item.find('div', <br/>                           {'class': 'cmp-Review-title'})<br/>                           .text.replace('\n', '')</strong><br/>        except:<br/>            rating_title = None<br/>        try:<br/>            <strong class="ni iu">rating_description = item.find('span', <br/>                                 {'itemprop': 'reviewBody'})<br/>                                 .text.replace('\r', '. ')</strong><br/>        except:<br/>            rating_description = None<br/>        try:<br/>            <strong class="ni iu">rating_pros = item.find('div', <br/>                          {'class': 'cmp-ReviewProsCons-prosText'})<br/>                          .text.replace('\n', '')</strong><br/>        except:<br/>            rating_pros = None<br/>        try:<br/>            <strong class="ni iu">rating_cons = item.find('div', <br/>                          {'class': 'cmp-ReviewProsCons-consText'})<br/>                          .text.replace('\n', '')</strong><br/>        <strong class="ni iu">except:<br/>            rating_cons = None<br/>        df = df.append({'rating': rating, <br/>             'rating_title': rating_title, <br/>             'rating_description': rating_description,<br/>             'rating_pros': rating_pros, <br/>             'rating_cons': rating_cons}, ignore_index=True)</strong><br/>    return df</span></pre><p id="1586" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我们还没有完成，因为如果您要执行“parse()”函数，您将获得一个只有 20 条记录的数据帧，这是因为我们只抓取了一页。</p><p id="0965" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">为了抓取所有剩余的评论页面，我们首先创建一个新的空数据框架，在遍历所有页面时收集所有的评论。接下来，我们初始化一个计数器变量 20，因为每页有 20 条评论。接下来，我们创建一个 while-loop，它将迭代直到评论的数量等于或大于 4000。为什么是 4000？所有页面上有将近 4000 条个人评论(在撰写本文时)。接下来，当 while 循环遍历每个页面时，我们在 base_url 的末尾添加增量 20。在 base_url 的末尾增加 20 将为您希望访问的页面创建一个新的 url。例如，“<a class="ae kf" href="https://www.indeed.com/cmp/Google/reviews?fcountry=ALL&amp;start=" rel="noopener ugc nofollow" target="_blank">https://www.indeed.com/cmp/Google/reviews?fcountry=ALL&amp;start =</a>40”将把我们带到评论的第二页。接下来，我们再次请求并获取 while 循环正在迭代的页面的整个 HTML。我们在页面上应用 parse()函数，将新抓取的评论添加到我们的数据帧中。最后，我们将计数器增加 20，以便 while 循环在下一页上迭代。</p><pre class="nb nc nd ne gt nh ni nj nk aw nl bi"><span id="107d" class="ll lm it ni b gy nm nn l no np">base_url = '<a class="ae kf" href="https://www.indeed.com/cmp/Google/reviews?fcountry=ALL&amp;start='" rel="noopener ugc nofollow" target="_blank">https://www.indeed.com/cmp/Google/reviews?fcountry=ALL&amp;start='</a></span><span id="290f" class="ll lm it ni b gy nq nn l no np">all_reviews_df = pd.DataFrame(columns = ['rating', 'rating_title', <br/>'rating_description','rating_pros', 'rating_cons'])</span><span id="cd28" class="ll lm it ni b gy nq nn l no np">num_reviews = 20</span><span id="a33c" class="ll lm it ni b gy nq nn l no np"># you can adjust this number on how many reviews you which to scrape<br/>while num_reviews &lt; 3000:  <br/>    <br/>    full_url = base_url + str(num_reviews)<br/>    <br/>    get_url = requests.get(full_url, timeout=5)  <br/>        <br/>    partial_reviews_df = parse(get_url)   </span><span id="3297" class="ll lm it ni b gy nq nn l no np">    all_reviews_df = all_reviews_df.append(<br/>                     partial_reviews_df, ignore_index=True) <br/>    <br/>    num_reviews += 20</span></pre><figure class="nb nc nd ne gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi or"><img src="../Images/8b69c19fd72a886ffda14f293825f013.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VR68Ow2m0JiMazUoo_cWrA.png"/></div></div></figure><p id="3119" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">剩下要做的就是将我们的数据帧移动到一个 csv 文件中。</p><pre class="nb nc nd ne gt nh ni nj nk aw nl bi"><span id="46a5" class="ll lm it ni b gy nm nn l no np">all_reviews_df.to_csv('indeed_scrape.csv')</span></pre><p id="0f57" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">我希望你喜欢这个教程。我喜欢你的反馈，欢迎在下面评论。</p><p id="9f0c" class="pw-post-body-paragraph kn ko it kp b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">别忘了挑战！</p><h1 id="a883" class="mj lm it bd ln mk ml mm lq mn mo mp lt mq mr ms lw mt mu mv lz mw mx my mc mz bi translated">谢谢！</h1></div></div>    
</body>
</html>