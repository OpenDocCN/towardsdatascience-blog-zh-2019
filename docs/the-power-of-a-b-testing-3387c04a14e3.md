# A/B 测试的力量

> 原文：<https://towardsdatascience.com/the-power-of-a-b-testing-3387c04a14e3?source=collection_archive---------11----------------------->

## 对样本大小、效应大小和显著性水平如何影响 A/B 测试功效的直观总结

![](img/496e0e931bdad5a0c847cbc45eceb18a.png)

A/B 测试涉及多个概念，可能很难处理，尤其是在工作面试这样的高压环境下。所以我决定写这篇文章来澄清一些事情。这篇文章以一个简短的关于功率的技术回顾、两个示例问题和大量的可视化来说明它与其他变量的相互作用开始。

这不是一篇关于统计测试的介绍性文章，我对此没有什么贡献。但是，如果你是一个对基本概念生疏的分析师或数据科学家，或者是想要在这个主题上获得一些技术知识的产品经理，这是一个很好的回顾(我写这篇文章的部分原因是为了制作一个可视化的备忘单，以便我稍后可以快速参考)。在这篇文章结束时，你应该理解以下概念:

*   alpha:假阳性率；或者显著性水平；或者 I 型错误。
*   β:假阴性率；或者第二类错误。
*   力量:真阳性率；1-β。
*   1 - alpha:真实负利率。

## 概念回顾

当人们谈论 alpha 和 beta 时，他们谈论的好像这两个概念是可以放在同一张桌子上的苹果和桔子。事实上，它们不能共存于同一个现实中。 **Alpha** 控制误报率，在这种情况下，我们拒绝不应该拒绝的 null。 **Beta** 控制假阴性率，在这种情况下，我们在应该拒绝 null 的时候失败了。

为什么这很重要？因为幂被定义为 1 - beta，所以只有当 null 为假时，谈论幂才有意义。如果你已经晕了，这里有两张图片可以帮助记忆。两张图都说明了双尾检验。

## 当零假设为真时

经验抽样分布与零假设下的抽样分布相同。如果我们不拒绝零，我们就是对的，零以概率 1 - alpha 发生(青色阴影)。红色阴影的两条尾巴的总面积等于α，这是我们错误拒绝 null 的概率。

![](img/d74439422bb584c452266f3b66523211.png)

## 当零假设为假时

经验抽样分布不同于零假设下的抽样分布。如果我们拒绝零，我们是正确的，这发生在概率 1-β(青色阴影)。我们未能以概率β拒绝 null，这是假阴性率(类型 II 错误)。

与前一种情况的微妙区别是，如果我们降落在较小的尾部(本例中为右尾部)并拒绝零，我们不应该感到幸运。这要么意味着**我们有一个不可重复的非常不寻常的事件，要么我们假设的方向完全错误**。

![](img/a07b87ea692c8d5e3955fba165861925.png)

幸运的是，在现实中，我们不知道零假设是否正确。这种混乱让我们可以一起使用 alpha 和 beta 来量化不确定性(很快我们就会看到 alpha 是如何影响功率的)。但是当谈到α时，永远记住我们是以 null 为真的可能性为条件的；对β来说反之亦然。

# 计算功率(可选)

本节介绍了两个计算功率的例子，由于有现成的统计软件，这在实践中很少需要。请随意跳到下一部分(也是最后一部分)。

本[页](https://stattrek.com/hypothesis-test/statistical-power.aspx)涵盖了手动计算程序，两个例题也是如此。这里我简单地用 Python 重复这个过程。图片应该有助于引导直觉。

**例 1:均值的假设检验的功效**

这是对总体均值的单尾 t 检验，但样本量足够大，可以将其视为 z 检验。你应该核实一下这些数字是否正确。

![](img/45d97eb785afc0bc323a715a8c14181a.png)

**例 2:比例假设检验的功效**

这是一个关于比例的双尾 t 检验，也作为 z 检验求解。请注意，这里我没有将概率截断为 100%。

![](img/cec2a202ad46200b8c8aeaf617514c58.png)

# 视觉化力量

## 效果大小

效果大小类似于鱼的大小。大鱼更容易捕捉。动画显示，随着效应大小的增加，经验采样分布远离零值下的分布。

**警告:不要以因果的方式解读这两者。**采样分布**不会根据您如何改变效果大小而移动**。实际上，我们只能在实验结束后观察到效应的大小，或者在实验开始前猜测效应的大小。在这两种情况下，我们都无法控制效果的大小。

相反，应该这样理解动画:当真实采样分布的中心与假设的中心相距很远时，很容易观察到两者之间的统计显著性。

![](img/190ac1cece2f9d93676ee0868802c12c.png)

## 希腊字母的第一个字母

较小的α意味着我们不能犯 I 型错误。相反，随着 alpha 的增加(如动画所示)，我们对 I 类错误的容忍度越来越高，因此如果 null 为真，我们会更频繁地拒绝。

但是当 null 为假时，大的 alpha 仍然允许我们更频繁地拒绝，因此我们获得了更高的能力。

![](img/db42e13dfefa714f726b0799ae41d982.png)

## 样本量

这是由中心极限定理保证的:标准误差随着样本量的增加而缩小。从视觉上看，抽样分布变得越来越窄(记住标准误差就是抽样分布的标准差)。

![](img/fc4dd821f55780211c5d92c2fdc55a25.png)

## 摘要

这篇文章应该澄清一些关于权力的常见逻辑谬误。我希望你喜欢这种视觉效果。动画代码在我的 Kaggle [笔记本](https://www.kaggle.com/shawlu/power-ab-test)里。

## 延伸阅读

下面的博客涵盖了与 AB 测试相关的主题，以及对本文中提到的关键概念的更深入的回顾。

*   可视化贝塔分布和贝叶斯更新[ [链接](/visualizing-beta-distribution-7391c18031f1)
*   理解置信区间[ [链接](/understanding-confidence-interval-d7b5aa68e3b)
*   超越 A/B 测试:多臂强盗实验[ [链接](/beyond-a-b-testing-multi-armed-bandit-experiments-1493f709f804)
*   你知道可信区间[ [链接](/do-you-know-credible-interval-e5b833adf399#bce7)吗