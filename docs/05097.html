<html>
<head>
<title>Bite-Sized Python Recipes — Vol. 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一口大小的蟒蛇食谱——第 2 卷</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/bite-sized-python-recipes-vol-2-385d00d17388?source=collection_archive---------32-----------------------#2019-07-30">https://towardsdatascience.com/bite-sized-python-recipes-vol-2-385d00d17388?source=collection_archive---------32-----------------------#2019-07-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1318" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Python 中有用的小函数的集合</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ae1397bfb43bc856eef33ce98de6dc66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2OE_QdoUwatE4cWM"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@mat_graphik?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jordane Mathieu</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5e7b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">免责声明:</em>这是我在网络上找到的一些有用的小函数的集合，主要在堆栈溢出或 Python 的文档页面上。有些可能看起来微不足道，但无论如何，我都在我的项目中使用过它们，我认为它们值得分享。你可以在我试图保持更新的笔记本中找到它们(以及一些额外的评论)。如果你感兴趣，你可以在这里查看我的第一篇关于小型函数的博客<a class="ae kv" rel="noopener" target="_blank" href="/bite-sized-python-recipes-52cde45f1489"/>！</p><p id="0eea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除非必要，我不打算过度解释这些功能。那么，让我们开始吧！</p><p id="3d32" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">返回可迭代</strong>的前<em class="ls"> N </em>项</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="474f" class="ly lz iq lu b gy ma mb l mc md"><strong class="lu ir">import </strong>itertools <strong class="lu ir">as </strong>it</span><span id="466c" class="ly lz iq lu b gy me mb l mc md"><strong class="lu ir">def </strong>first_n(iterable, n):<br/>    <em class="ls">""" If n &gt; len(iterable) then all the elements are returned. """</em></span><span id="84de" class="ly lz iq lu b gy me mb l mc md"><em class="ls">    </em><strong class="lu ir">return </strong>list(it.islice(iterable, n))</span></pre><p id="f1a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">示例:</em></p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="c2c5" class="ly lz iq lu b gy ma mb l mc md">&gt;&gt;&gt; d1 = {3: 4, 6: 2, 0: 9, 9: 0, 1: 4}<br/>&gt;&gt;&gt; first_n(d1.items(), 3)<br/>[(3, 4), (6, 2), (0, 9)]<br/>&gt;&gt;&gt; first_n(d1, 10)<br/>[3, 6, 0, 9, 1]</span></pre><p id="1c0d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">检查一个可迭代的所有元素是否都相同</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="05af" class="ly lz iq lu b gy ma mb l mc md"><strong class="lu ir">import </strong>itertools <strong class="lu ir">as </strong>it</span><span id="4570" class="ly lz iq lu b gy me mb l mc md"><strong class="lu ir">def </strong>all_equal(iterable):<br/>    <em class="ls">""" Returns True if all the elements of iterable are equal to each other. """</em></span><span id="ca37" class="ly lz iq lu b gy me mb l mc md"><em class="ls">    </em>g = it.groupby(iterable)<br/>    <strong class="lu ir">return </strong>next(g, <strong class="lu ir">True</strong>) <strong class="lu ir">and not </strong>next(g, <strong class="lu ir">False</strong>)</span></pre><p id="f555" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">例如:</em></p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="5983" class="ly lz iq lu b gy ma mb l mc md">&gt;&gt;&gt; all_equal([1, 2, 3])<br/>False<br/>&gt;&gt;&gt; all_equal(((1, 0), (True, 0)))<br/>True<br/>&gt;&gt;&gt; all_equal([{1, 2}, {2, 1}])<br/>True<br/>&gt;&gt;&gt; all_equal([{1:0, 3:4}, {True:False, 3:4}])<br/>True</span></pre><p id="253d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当您有一个序列时，下面的替代方法通常会更快。(如果您正在处理非常大的序列，请确保自己进行测试。)</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="a260" class="ly lz iq lu b gy ma mb l mc md"><strong class="lu ir">import </strong>itertools <strong class="lu ir">as </strong>it</span><span id="22b4" class="ly lz iq lu b gy me mb l mc md"><strong class="lu ir">def </strong>all_equal_seq(sequence):<br/>    <em class="ls">""" Only works on sequences. Returns True if the sequence is empty or all the elements are equal to each other. """</em></span><span id="3c0c" class="ly lz iq lu b gy me mb l mc md"><em class="ls">    </em><strong class="lu ir">return not </strong>sequence <strong class="lu ir">or </strong>sequence.count(sequence[0]) == len(sequence)</span></pre><p id="3afb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如:你有一份卡车清单，可以查看它们是在仓库里还是在路上。随着时间的推移，每辆卡车的状态都会发生变化。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="aab7" class="ly lz iq lu b gy ma mb l mc md"><strong class="lu ir">import </strong>random<br/>random.seed(500)</span><span id="48f2" class="ly lz iq lu b gy me mb l mc md"><em class="ls"># Just creating an arbitrary class and attributes<br/></em><strong class="lu ir">class </strong>Truck:<br/>    <strong class="lu ir">def </strong>__init__(self, id):<br/>        self.id = id<br/>        self.status = random.choice((<strong class="lu ir">'loading-unloading'</strong>, <strong class="lu ir">'en route'</strong>))</span><span id="6428" class="ly lz iq lu b gy me mb l mc md"><em class="ls">    </em><strong class="lu ir">def </strong>__repr__(self):<br/>        <strong class="lu ir">return f'P{</strong>str(self.id)<strong class="lu ir">}'<br/></strong></span><span id="deb4" class="ly lz iq lu b gy me mb l mc md">trucks = [Truck(i) <strong class="lu ir">for </strong>i <strong class="lu ir">in </strong>range(50)]</span></pre><p id="b521" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">早上你查看了一下，发现第一辆卡车是<code class="fe mf mg mh lu b">en route</code>。你听说另外三个人也离开了仓库。让我们验证一下:</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="5685" class="ly lz iq lu b gy ma mb l mc md">&gt;&gt;&gt; all_equal_seq([t.status <strong class="lu ir">for </strong>t <strong class="lu ir">in </strong>trucks[:4]])<br/>True</span></pre><p id="a0a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">用</strong>和<code class="fe mf mg mh lu b"><strong class="ky ir">None</strong></code>求和</p><p id="a1d0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当你有<code class="fe mf mg mh lu b">numpy</code>阵列或者<code class="fe mf mg mh lu b">pandas</code>系列或者数据帧时，选择是显而易见的:<code class="fe mf mg mh lu b"><a class="ae kv" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.nansum.html" rel="noopener ugc nofollow" target="_blank">numpy.nansum</a></code>或者<code class="fe mf mg mh lu b"><a class="ae kv" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.sum.html" rel="noopener ugc nofollow" target="_blank">pandas.DataFrame/Series.sum</a></code>。但是如果你不想或者不能使用这些呢？</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="3bb6" class="ly lz iq lu b gy ma mb l mc md"><strong class="lu ir">def </strong>sum_with_none(iterable):<em class="ls"><br/>    </em><strong class="lu ir">assert not </strong>any(isinstance(v, str) <strong class="lu ir">for </strong>v <strong class="lu ir">in </strong>iterable), <strong class="lu ir">'string is not allowed!'</strong></span><span id="7c72" class="ly lz iq lu b gy me mb l mc md"><strong class="lu ir">    return </strong>sum(filter(<strong class="lu ir">None</strong>, iterable))</span></pre><p id="1386" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是因为<code class="fe mf mg mh lu b"><a class="ae kv" href="https://docs.python.org/3/library/functions.html#filter" rel="noopener ugc nofollow" target="_blank">filter</a></code>将<code class="fe mf mg mh lu b">None</code>视为身份函数；即删除 iterable 的所有<a class="ae kv" href="https://stackoverflow.com/a/39984051" rel="noopener ugc nofollow" target="_blank"> falsy </a>元素。</p><p id="c642" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">例如:</em></p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="fe4a" class="ly lz iq lu b gy ma mb l mc md">&gt;&gt;&gt; seq1 = [None, 1, 2, 3, 4, 0, True, False, None]<br/>&gt;&gt;&gt; sum(seq1)<br/><strong class="lu ir">TypeError</strong>: unsupported operand type(s) for +: 'int' and 'NoneType'</span><span id="dbdf" class="ly lz iq lu b gy me mb l mc md">&gt;&gt;&gt; sum_with_none(seq1)  # Remember True == 1<br/>11</span></pre><p id="b50a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">检查<em class="ls"> N </em>或更少的项目是否真实</strong></p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="92a2" class="ly lz iq lu b gy ma mb l mc md"><strong class="lu ir">def </strong>max_n_true(iterable, n):<br/>    <em class="ls">""" Returns True if at most `n` values are truthy. """</em></span><span id="5067" class="ly lz iq lu b gy me mb l mc md"><em class="ls">    </em><strong class="lu ir">return </strong>sum(map(bool, iterable)) &lt;= n</span></pre><p id="2b69" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">例如:</em></p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="d599" class="ly lz iq lu b gy ma mb l mc md">&gt;&gt;&gt; seq1 = [None, 1, 2, 3, 4, 0, True, False, None]<br/>&gt;&gt;&gt; seq2 = [None, 1, 2, 3, 4, 0, True, False, 'hi']<br/>&gt;&gt;&gt; max_n_true(seq1, 5)<br/>True<br/>&gt;&gt;&gt; max_n_true(seq2, 5)  # It's now 6<br/>False</span></pre><p id="a164" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">检查 Iterable 中是否只有一个元素为真</strong></p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="a83b" class="ly lz iq lu b gy ma mb l mc md"><strong class="lu ir">def </strong>single_true(iterable):<br/>    <em class="ls">""" Returns True if only one element of iterable is truthy. """</em></span><span id="2815" class="ly lz iq lu b gy me mb l mc md"><em class="ls">    </em>i = iter(iterable)<br/>    <strong class="lu ir">return </strong>any(i) <strong class="lu ir">and not </strong>any(i)</span></pre><p id="efbc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">函数的第一部分确保迭代器有任何<a class="ae kv" href="https://stackoverflow.com/a/39984051" rel="noopener ugc nofollow" target="_blank">真值</a>值。然后，它从迭代器中的这一点开始检查，以确保没有其他真值。</p><p id="306b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">示例:</em>使用上面的几个函数！</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="d7e8" class="ly lz iq lu b gy ma mb l mc md"><em class="ls"># Just creating an arbitrary class and attributes<br/></em><strong class="lu ir">class </strong>SampleGenerator:<br/>    <strong class="lu ir">def </strong>__init__(self, id, method1=<strong class="lu ir">None</strong>, method2=<strong class="lu ir">None</strong>, method3=<strong class="lu ir">None</strong>,<br/>                 condition1=<strong class="lu ir">False</strong>, condition2=<strong class="lu ir">False</strong>,<br/>                 condition3=<strong class="lu ir">False</strong>):<br/>        <em class="ls">"""<br/>        Assumptions:<br/>        1) One and only one method can be active at a time.<br/>        2) Conditions are not necessary, but if passed, maximum one can have value.<br/>        """<br/>        <br/>        # assumption 1<br/>        </em><strong class="lu ir">assert </strong>single_true([method1, method2, method3]), <strong class="lu ir">"Exactly one method should be used"<br/>        </strong><em class="ls"># assumption 2<br/>        </em><strong class="lu ir">assert </strong>max_n_true([condition1, condition2, condition3], 1), <strong class="lu ir">"Maximum one condition can be active"</strong></span><span id="283f" class="ly lz iq lu b gy me mb l mc md"><strong class="lu ir">        </strong>self.id = id</span></pre><p id="5c7b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的第一个样本(<code class="fe mf mg mh lu b">sample1</code>)是有效的，但是其他样本违反了至少一个假设，导致了一个<code class="fe mf mg mh lu b">AssertionError</code>(为了避免混乱，我没有在这里显示任何一个。)在笔记本上运行它们，亲自查看错误。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="f7f7" class="ly lz iq lu b gy ma mb l mc md">&gt;&gt;&gt; sample1 = SampleGenerator(1, method1=<strong class="lu ir">'active'</strong>)  <em class="ls"># Correct<br/></em>&gt;&gt;&gt; sample2 = SampleGenerator(2, condition2=<strong class="lu ir">True</strong>)  <em class="ls"># no method is active<br/></em>&gt;&gt;&gt; sample3 = SampleGenerator(3, method2=<strong class="lu ir">'active'</strong>, method3=<strong class="lu ir">'not-active'</strong>)  <em class="ls"># more than one method has truthy value<br/></em>&gt;&gt;&gt; sample4 = SampleGenerator(4, method3=<strong class="lu ir">'do something'</strong>, condition1=<strong class="lu ir">True</strong>, condition3=<strong class="lu ir">True</strong>)  <em class="ls"># multiple conditions are active<br/></em>&gt;&gt;&gt; sample5 = SampleGenerator(5)  <em class="ls"># nothing is passed</em></span></pre><p id="ba3c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">写入 CSV 时跳过冗余标题</strong></p><p id="b2a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设你需要运行一系列的模拟。在每次运行结束时(可能需要几个小时)，您记录一些基本的统计数据，并希望创建或更新一个用于跟踪结果的<code class="fe mf mg mh lu b">restults.csv</code>文件。如果是这样，您可能希望在第一次之后跳过将头写入文件。</p><p id="22a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，让我们创建一些数据来使用:</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="52fc" class="ly lz iq lu b gy ma mb l mc md"><strong class="lu ir">import </strong>pandas <strong class="lu ir">as </strong>pd<br/><strong class="lu ir">import </strong>random</span><span id="b288" class="ly lz iq lu b gy me mb l mc md"><em class="ls"># An arbitrary function<br/></em><strong class="lu ir">def </strong>gen_random_data():<br/>    demands = [random.randint(100, 900) <strong class="lu ir">for </strong>_ <strong class="lu ir">in </strong>range(5)]<br/>    costs = [random.randint(100, 500) <strong class="lu ir">for </strong>_ <strong class="lu ir">in </strong>range(5)]<br/>    inventories = [random.randint(100, 1200) <strong class="lu ir">for </strong>_ <strong class="lu ir">in </strong>range(5)]<br/>    data = {<strong class="lu ir">'demand'</strong>: demands, <br/>            <strong class="lu ir">'cost'</strong>: costs, <br/>            <strong class="lu ir">'inventory'</strong>: inventories}</span><span id="f19c" class="ly lz iq lu b gy me mb l mc md">    <strong class="lu ir">return </strong>pd.DataFrame(data)</span><span id="7264" class="ly lz iq lu b gy me mb l mc md"><em class="ls"># Let's create a few df<br/></em>df_list = [gen_random_data() <strong class="lu ir">for </strong>_ <strong class="lu ir">in </strong>range(3)]</span></pre><p id="daef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们假设我们需要在<code class="fe mf mg mh lu b">df_list</code>数据帧一创建好就把它们写入<code class="fe mf mg mh lu b">orders.csv</code>。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="f837" class="ly lz iq lu b gy ma mb l mc md"><strong class="lu ir">import </strong>os</span><span id="085a" class="ly lz iq lu b gy me mb l mc md">filename = <strong class="lu ir">'orders.csv'<br/>for </strong>df <strong class="lu ir">in </strong>df_list:<br/>    df.to_csv(filename, index=<strong class="lu ir">False</strong>, mode=<strong class="lu ir">'a'</strong>, <br/>              header=(<strong class="lu ir">not </strong>os.path.exists(filename)))</span></pre><p id="e2cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您不需要一次循环一个相似的数据帧，下面的替代方法是将它们写入文件的简洁方法:</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="6298" class="ly lz iq lu b gy ma mb l mc md">pd.concat(df_list).to_csv(‘orders2.csv’, index=False)</span></pre><p id="44c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">将 CSV 文件转换为 Python 对象</strong></p><p id="14d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设您需要创建 Python 对象的集合，其中它们的属性来自 CSV 文件的列，并且文件的每一行都成为该类的一个新实例。然而，假设您事先不知道 CSV 列是什么，因此您不能用期望的属性初始化该类。</p><p id="6941" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面，您可以看到实现这一点的两种方法:</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="5cf9" class="ly lz iq lu b gy ma mb l mc md"><strong class="lu ir">class </strong>MyClass1(object):<br/>    <strong class="lu ir">def </strong>__init__(self, *args, **kwargs):<br/>        <strong class="lu ir">for </strong>arg <strong class="lu ir">in </strong>args:<br/>            setattr(self, arg, arg)</span><span id="eeb0" class="ly lz iq lu b gy me mb l mc md">        <strong class="lu ir">for </strong>k, v <strong class="lu ir">in </strong>kwargs.items():<br/>            setattr(self, k, v)<br/></span><span id="6d06" class="ly lz iq lu b gy me mb l mc md"><strong class="lu ir">class </strong>MyClass2:<br/>    <strong class="lu ir">def </strong>__init__(self, **kwargs):<br/>        self.__dict__.update(kwargs)</span></pre><p id="0cf5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mf mg mh lu b">MyClass1</code>中，我们可以同时传递<code class="fe mf mg mh lu b">args</code>和<code class="fe mf mg mh lu b">kwargs</code>，而在<code class="fe mf mg mh lu b">MyClass2</code>中，我们利用了特殊的<code class="fe mf mg mh lu b"><a class="ae kv" href="https://stackoverflow.com/a/19907498" rel="noopener ugc nofollow" target="_blank">__dict__</a></code>属性。</p><p id="6f5a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">示例:</em>让我们使用这两种实现将上面示例中的<code class="fe mf mg mh lu b">orders.csv</code>文件转换成对象。</p><pre class="kg kh ki kj gt lt lu lv lw aw lx bi"><span id="54e7" class="ly lz iq lu b gy ma mb l mc md"><strong class="lu ir">import </strong>csv</span><span id="8086" class="ly lz iq lu b gy me mb l mc md">filename = <strong class="lu ir">'orders.csv'<br/></strong>class1_list = []<br/>class2_list = []</span><span id="b1f7" class="ly lz iq lu b gy me mb l mc md"><strong class="lu ir">with </strong>open(filename) <strong class="lu ir">as </strong>f:<br/>    reader = csv.DictReader(f)<em class="ls"><br/>    </em><strong class="lu ir">for </strong>row <strong class="lu ir">in </strong>reader:<em class="ls"><br/>        </em>class1_list.append(MyClass1(**row))<br/>        class2_list.append(MyClass2(**row))</span><span id="67ef" class="ly lz iq lu b gy me mb l mc md"># Let's check the attributes of the first row of class1_list<br/>&gt;&gt;&gt; print(f'first row = {vars(class1_list[0])}')<br/>first row = {'demand': '821', 'cost': '385', 'inventory': '1197'}</span></pre><p id="0ec4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">暂时就这样了。如果你也有一些经常使用的小函数，请告诉我。我会尽量在 GitHub 上保持<a class="ae kv" href="https://github.com/ekhoda/utilities/blob/master/Bite-Sized%20Recipes.ipynb" rel="noopener ugc nofollow" target="_blank">笔记本</a>的最新状态，你的笔记本也可以放在那里！</p></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><p id="55b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">我可以在</em> <a class="ae kv" href="https://twitter.com/EhsanKhoda" rel="noopener ugc nofollow" target="_blank"> <em class="ls"> Twitter </em> </a> <em class="ls">和</em><a class="ae kv" href="https://www.linkedin.com/in/ehsankhodabandeh/" rel="noopener ugc nofollow" target="_blank"><em class="ls">LinkedIn</em></a><em class="ls">上联系到。</em></p></div></div>    
</body>
</html>