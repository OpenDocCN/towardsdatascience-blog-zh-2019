# å¯è§†åŒ–çš„å¦ä¸€ä¸ªé˜¶æ®µ:å¯¹ Dash åšå‡ºååº”

> åŸæ–‡ï¼š<https://towardsdatascience.com/a-gentle-invitation-to-interactive-visualization-with-dash-a200427ccce9?source=collection_archive---------7----------------------->

## ä¸€ä¸ªæ¸©æŸ”çš„é‚€è¯·

![](img/b64792d9a4036cb08022b2fc458021b6.png)

Dash æ˜¯ä¸€ä¸ªå¼€æºçš„ python åº“ï¼Œå®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿç”¨ Plotly åˆ›å»º web åº”ç”¨ç¨‹åºã€‚ä½¿ç”¨ç®€å•çš„ååº”å¼è£…é¥°å™¨ï¼Œå¦‚ä¸‹æ‹‰èœå•ã€æ»‘åŠ¨æ¡å’Œé™ä»·æ–‡æœ¬æ•°æ®ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°æ„å»ºäº¤äº’å¼å¯è§†åŒ–ã€‚æˆ‘ä»¬ç”šè‡³å¯ä»¥ä½¿ç”¨å›è°ƒå‡½æ•°æ ¹æ®è¾“å…¥æ•°æ®æ›´æ–°å›¾è¡¨ï¼Œæ‰€æœ‰è¿™äº›åŠŸèƒ½éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¸éœ€è¦ Javascript æˆ– HTMLã€‚Plotly æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œå®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿä»¥ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼åˆ¶ä½œä¸€ä¸ªä¿¡æ¯ä¸°å¯Œä¸”æœ‰æ•ˆçš„æƒ…èŠ‚ï¼ŒDash å¯ä»¥è¢«è§†ä¸ºå±•ç¤ºä»¤äººæ•¬ç•çš„å¯è§†åŒ–çš„èˆå°ã€‚

ä»Šå¤©æˆ‘å°†å‘ä½ å±•ç¤ºå¦‚ä½•ç”¨ Plotly åˆ›å»ºä¸€ä¸ªä»ªè¡¨æ¿ã€‚æˆ‘ä»¬å°†åˆ¶ä½œä¸€ä¸ªæ—¶é—´åºåˆ—çº¿å›¾ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªä¸‹æ‹‰èœå•å’Œä¸€ä¸ªä¸è¯¥å›¾äº¤äº’çš„æ»‘åŠ¨æ¡ã€‚æœ‰å…³äºå¦‚ä½•ä½¿ç”¨è¿™ä¸ªåº“çš„å¾ˆå¥½çš„æ–‡æ¡£ï¼Œä½†æ˜¯æˆ‘å‘ç°ä¸€å¼€å§‹å¯èƒ½å¾ˆéš¾é˜…è¯»ç¤ºä¾‹ä»£ç å¹¶ä½¿ç”¨å®ƒä»¬ã€‚å› æ­¤ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªå–„è‰¯çš„æ¡¥æ¢ï¼Œè®©ä½ äº†è§£å¦‚ä½•ä½¿ç”¨ç ´æŠ˜å·ä¸ Plotlyã€‚

# è£…ç½®

è¦æ„å»ºä¸€ä¸ªä»ªè¡¨æ¿ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…å¦‚ä¸‹ä¸€äº›åŒ…ã€‚

```
pip install plotly==2.5.1
pip install dash==0.21.0
pip install dash-core-components==0.22.1
pip install dash-html-components==0.10.0
pip install dash-renderer==0.12.1
```

æ­£å¦‚æˆ‘ä¸Šé¢æ‰€è¯´ï¼Œ`dash-core-components`ä¸ä»…å…è®¸æˆ‘ä»¬æ„å»ºå›¾å½¢ï¼Œè¿˜å…è®¸æˆ‘ä»¬æ„å»ºä¸‹æ‹‰åˆ—è¡¨å’Œæ–‡æœ¬æ¡†ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›¸åº”åœ°æ›´æ–°ç»„ä»¶ã€‚`dash-html-components`ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨ Python ä¸­ä½¿ç”¨ HTML & CSSã€‚å®ƒå¸®åŠ©æˆ‘ä»¬åœ¨ä»ªè¡¨æ¿ä¸Šæ”¾ç½® HTML ç»„ä»¶ï¼Œå¦‚ Divã€H1 å’Œ H2ã€‚

å¦‚æœè¿™æ˜¯ä½ ç¬¬ä¸€æ¬¡ä½¿ç”¨ç ´æŠ˜å·å’Œ HTML è¯­æ³•ï¼Œå®ƒå¯èƒ½æœ‰ç‚¹å¤æ‚å’Œéš¾ä»¥é˜…è¯»ã€‚å› æ­¤ï¼Œæˆ‘å»ºè®®æ‚¨å°†ä»¥ä¸‹è„šæœ¬ä½œä¸º Dash çš„åŸºæœ¬æŒ‡å—ã€‚ä»ç°åœ¨å¼€å§‹ï¼Œæˆ‘ä»¬è¦åšçš„æ˜¯ä¸€æ­¥ä¸€æ­¥åœ°å¡«å†™è¿™ä¸ªã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å¯¼å…¥åº“ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ å…¶ä»–åº“ã€‚ç„¶åæˆ‘ä»¬é€šè¿‡è°ƒç”¨ Dash ç±»æ¥åˆå§‹åŒ– Dashã€‚è¿™å°±åƒåœ¨æˆ‘ä»¬çš„æ¡Œå­ä¸Šæ”¾ä¸€å—ç©ºç™½çš„ç™½æ¿ï¼Œæˆ‘ä»¬æ‰€åšçš„å°±æ˜¯åœ¨è¿™å—æ¿ä¸Šæ„å»ºæ›´å¤šçš„åº”ç”¨ç¨‹åºã€‚

```
**# Step 1\. Launch the application**
app = dash.Dash()**# Step 2\. Import the dataset**
df = pd.read_csv('finance-charts-apple.csv')
```

ç°åœ¨è®©æˆ‘ä»¬ä»*ç†ŠçŒ«*çš„ CSV æ–‡ä»¶ä¸­æå–ä¸€äº›ææ–™ã€‚æˆ‘ä»¬è¦ä½¿ç”¨çš„æ•°æ®é›†æ˜¯è‹¹æœå…¬å¸çš„è‚¡ç¥¨ä»·æ ¼æ•°æ®ï¼Œè¿™é‡Œçš„[](https://raw.githubusercontent.com/plotly/datasets/master/finance-charts-apple.csv)**ã€‚**

**![](img/6d5e3ddc52b41eeedcc41f0b5724be8e.png)**

# **ä»ªè¡¨æ¿ä¸Šçš„ç®€å•æ•£ç‚¹å›¾**

**å…³äº Plotly æœ¬èº«çš„ç»†èŠ‚æˆ‘å°±ä¸å¤šè¯´äº†ï¼Œä½†æ˜¯å¦‚æœæœ‰å¿…è¦çš„è¯ä½ å¯ä»¥ä»è¿™ä¸ªè§†é¢‘[](https://www.youtube.com/watch?v=yBU3uPzyQOg&index=2&list=PLE50-dh6JzC4onX-qkv9H3HtPbBVA8M94)****ä¸­æ‰¾åˆ°ä¸€ä¸ªå…³äº Plotly çš„å¾ˆå¥½çš„æ•™ç¨‹ã€‚åœ¨è¿™ä¸€ç³»åˆ—çš„è§†é¢‘ä¸­ï¼Œä½ è¿˜å¯ä»¥å­¦ä¹ å¦‚ä½•åˆ¶ä½œ 3D ç»˜å›¾æˆ– Choropleth åœ°å›¾ã€‚è¿™é‡Œæˆ‘ä»¬å°†ç»˜åˆ¶ä¸€ä¸ªæ˜¾ç¤ºè‚¡ç¥¨ä»·æ ¼æ³¢åŠ¨çš„çº¿å›¾ã€‚******

```
******# Step 3\. Create a plotly figure**
trace_1 = go.Scatter(x = st.Date, y = st['AAPL.High'],
                    name = 'AAPL HIGH',
                    line = dict(width = 2,
                                color = 'rgb(229, 151, 50)'))layout = go.Layout(title = 'Time Series Plot',
                   hovermode = 'closest')fig = go.Figure(data = [trace_1], layout = layout)****
```

******ç°åœ¨ï¼Œè¯¥æ˜¯`dash-html-components`å‡ºåœºçš„æ—¶å€™äº†ã€‚æˆ‘ä»¬å…ˆæ”¾ä¸€ä¸ªé™¤æ³•ï¼Œç„¶åæŠŠå›¾å½¢æ”¾è¿›å»ã€‚`id`æ­£åœ¨ç»™è¿™ä¸ªç»„ä»¶å‘½åï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç”¨å®ƒçš„åå­—æ¥ç§°å‘¼å®ƒã€‚ä»¥åä½ å°±æ˜ç™½è¿™æ˜¯å¹²ä»€ä¹ˆç”¨çš„äº†ã€‚ç„¶åï¼Œæˆ‘ä»¬åœ¨æ­¥éª¤ 6 ä¸­åˆ›å»ºä¸€ä¸ªè¿è¡Œçš„æœåŠ¡å™¨ã€‚å¦‚æœæˆ‘ä»¬è®¾ç½®è°ƒè¯•æ¨¡å¼ç­‰äºçœŸï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°æ”¹å˜å’Œæ›´æ–°åº”ç”¨ç¨‹åºï¼Œè€ŒæœåŠ¡å™¨æ­£åœ¨è¿è¡Œã€‚******

```
******# Step 4\. Create a Dash layout**
app.layout = html.Div([
               ** dcc.Graph(id = 'plot', figure = fig)**
                      ])**# Step 6\. Add the server clause**
if __name__ == '__main__':
    app.run_server(debug = True)****
```

******æˆ‘ä»¬ç”¨ ***app.py*** çš„åå­—ä¿å­˜è¿™ä¸ªè„šæœ¬ï¼Œåœ¨ç»ˆç«¯ä¸Šå¯¼å…¥(æˆ–è€… anaconda æç¤º)ã€‚è¯·æ³¨æ„ï¼Œå·¥ä½œç›®å½•åº”è¯¥ä¸æ‚¨ä¿å­˜æ–‡ä»¶çš„ä½ç½®ç›¸åŒã€‚******

```
**C:\Users\jjone\Dash> **python app.py****
```

****å¦‚æœæ²¡æœ‰æ‰“å­—é”™è¯¯æˆ–è¯­æ³•é”™è¯¯ï¼Œæ‚¨å°†çœ‹åˆ°æœ¬åœ°ä¸»æœºåœ°å€ã€‚ä½ å¯ä»¥å¤åˆ¶å¹¶ç²˜è´´å®ƒï¼Œä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªæ–°çš„ç½‘é¡µæ ‡ç­¾ä¸Šè¾“å…¥ **localhost:8050** ã€‚****

****![](img/83323e07facc6d946d1c552a1f8ae297.png)****

# ****æ·»åŠ é¡µçœ‰å’Œæ®µè½****

****æˆ‘ä»¬ä¹Ÿå¯ä»¥æœ‰é¢å¤–çš„ç»„ä»¶ï¼Œå¦‚æŠŠæ–‡æœ¬æ•°æ®å°±åƒ HTMLã€‚ä½ å¯ä»¥åœ¨ è¿™é‡Œæ‰¾åˆ° [**æœ‰å“ªäº›å…ƒç´ ã€‚è®©æˆ‘ä»¬åœ¨é¡µé¢ä¸Šæ”¾ä¸€ä¸ªç®€å•çš„æ ‡é¢˜å’Œä¸€æ®µæ–‡å­—ã€‚**](https://dash.plot.ly/dash-html-components)****

```
****# Step 4\. Create a Dash layout**
app.layout = html.Div([
       **    # adding a header and a paragraph
                html.Div([
                    html.H1("This is my first dashboard"),
                    html.P("Learning Dash is so interesting!!")
                         ], 
                  **  style = {'padding' : '50px' , 
                             'backgroundColor' : '#3aaab2'}),# adding a plot        
                dcc.Graph(id = 'plot', figure = fig)
                   ])**
```

****åœ¨å›¾è¡¨çš„é¡¶éƒ¨ï¼Œæˆ‘å°†å†æ·»åŠ ä¸€ä¸ªéƒ¨åˆ†ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ä¸€ä¸ªæ ‡é¢˜å’Œä¸€ä¸ªæ®µè½ã€‚æˆ‘ä»¬æœ‰ä¸¤ä¸ªä¸»è¦ç»„ä»¶ï¼Œ`html.Div`é‡Œé¢çš„`html.Div`å’Œ`dcc.Graph.`ï¼Œè¿˜æœ‰ä¸¤ä¸ªé™„åŠ ç»„ä»¶ï¼Œå¤´(`html.H1`)å’Œæ®µ(`html.P`)ã€‚æˆ‘ä»¬å¯ä»¥ç”¨`style`å±æ€§æ”¹å˜ç»„ä»¶çš„è¾¹è·æˆ–èƒŒæ™¯è‰²ã€‚å®ƒåº”è¯¥ä»¥æ”¯æŒ CSS å±æ€§çš„å­—å…¸æ ¼å¼æ¥æŒ‡å®šã€‚****

****è¯·ç‰¹åˆ«æ³¨æ„æ‹¬å·çš„å¼€å§‹å’Œç»“æŸä½ç½®ã€‚ç†è§£æ¯ä¸ªéƒ¨åˆ†çš„æ®µè½èŒƒå›´æ˜¯å¾ˆé‡è¦çš„ã€‚ç”±äºæœ‰å¤ªå¤šçš„æ‹¬å·å’Œæ–¹æ‹¬å·ï¼Œä¸€å¼€å§‹å¯èƒ½ä¼šä»¤äººå›°æƒ‘ã€‚è€Œä¸”å¾ˆå®¹æ˜“çŠ¯è¯­æ³•é”™è¯¯ã€‚****

****å°†æ­¥éª¤ 4 ä¸­çš„ä»£ç æ”¾å…¥æˆ‘ä»¬çš„æ¨¡æ¿ä¸­ï¼Œçœ‹çœ‹ç»“æœã€‚å¦‚æœæœåŠ¡å™¨æ²¡æœ‰å…³é—­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‰ F5 æ¥æ£€æŸ¥ç»“æœã€‚****

****![](img/257a57d57708d528b54f3f769920e89c.png)****

****ç°åœ¨ï¼Œæˆ‘å¸Œæœ›æ‚¨äº†è§£ä»€ä¹ˆæ˜¯ dash ç»„ä»¶å’Œ HTML ç»„ä»¶ã€‚å¦‚ä½•å°†å¤šä¸ªç»„ä»¶æ”¾åœ¨ä¸€èµ·ï¼Œä»¥åŠå¦‚ä½•å°†å®ƒä»¬æ”¾åœ¨ä¸€èµ·ã€‚****

# ****ä¸‹æ‹‰å¼****

****è¿™æ¬¡è®©æˆ‘ä»¬è¯•ç€åœ¨ä»ªè¡¨æ¿ä¸Šåšä¸€ä¸ªä¸‹æ‹‰èœå•ã€‚æˆ‘ä»¬è¦åšå¦ä¸€ä¸ªå›¾ï¼Œæ ¹æ®ç»™å®šçš„é€‰é¡¹æ”¹å˜å®ƒçš„ y è½´ã€‚é€šè¿‡ [**ä»ªè¡¨æ¿ç»„ä»¶**](https://dash.plot.ly/dash-core-components) çš„æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ`Dropdown`æ•´ç†å¦‚ä¸‹ã€‚****

****![](img/f53fcdcc993674c99a99fbaa42176179.png)****

****å¦‚æ‚¨æ‰€è§ï¼Œè¿™äº›é€‰é¡¹åº”è¯¥æ˜¯å­—å…¸æ ¼å¼çš„ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œé€‰é¡¹å°†æ˜¯åªæœ‰è¿ç»­å˜é‡çš„åˆ—ï¼Œä»ç¬¬ 2 åˆ—åˆ°ç¬¬ 10 åˆ—ã€‚æœ‰äº†åˆ—è¡¨ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥åªç”¨ä¸€è¡Œå°±åšå‡ºé€‰é¡¹å­—å…¸ã€‚****

```
**features = st.columns[1:-1]
opts = [{'label' : i, 'value' : i} for i in features]**
```

****ç°åœ¨ï¼Œæˆ‘ä»¬å°†ä¸‹æ‹‰ç»„ä»¶æ”¾åœ¨ç»˜å›¾çš„åº•éƒ¨ï¼Œè€Œä¸æ˜¯ HTML ç»„ä»¶ã€‚å…ˆçœ‹ä¸€ä¸‹ç²—ä½“å­—ï¼Œå› ä¸ºå…¶ä»–çš„åªæ˜¯ä¸ºäº†ä¿®é¥°ä¸¤å¤§åº”ç”¨ã€‚`value`æ˜¯ä¸‹æ‹‰åˆ—è¡¨çš„é»˜è®¤å€¼ã€‚****

```
****# Step 4\. Create a Dash layout**
app.layout = html.Div([
                # adding a plot
                dcc.Graph(id = 'plot', figure = fig), **# dropdown**
        **html.P([
                    html.Label("Choose a feature"),
                    dcc.Dropdown(id = 'opt', 
                                 options = opts,
                                 value = opts[0])
                        ],** style = {'width': '400px',
                                    'fontSize' : '20px',
                                    'padding-left' : '100px',
                                    'display': 'inline-block'}**)**
                      ])**
```

****æ­£å¦‚æˆ‘ä»¬ä¹‹å‰æ‰€åšçš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¨¡æ¿çš„ç¬¬ 4 æ­¥æ›¿æ¢è¿™æ®µä»£ç ï¼Œå¹¶æ£€æŸ¥ç»“æœã€‚****

# ****ä½¿ç”¨å›è°ƒè¿æ¥åˆ°å›¾å½¢****

****ä¸ºäº†æ ¹æ®ä¸‹æ‹‰åˆ—è¡¨çš„é€‰æ‹©æ›´æ–°å›¾è¡¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è¾“å…¥æ•°æ®(ä¸‹æ‹‰åˆ—è¡¨)å’Œè¾“å‡ºæ•°æ®(å›¾è¡¨)ä¹‹é—´å»ºç«‹ä¸€ä¸ªè¿æ¥ã€‚è¿™å°†é€šè¿‡åœ¨æ­¥éª¤ 5 ä¸­æ·»åŠ ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥å®Œæˆã€‚****

```
****# Step 5\. Add callback functions**
[**@app**](http://twitter.com/app)**.callback(**Output('plot', 'figure'),
             [Input('opt', 'value')]**)****
```

****ä½ è®°å¾—æˆ‘ä»¬ç»™æ¯ä¸ªç»„ä»¶èµ‹äºˆäº†ä»€ä¹ˆ`id`å—ï¼Ÿ ***å‰§æƒ…*** å’Œ ***optã€‚*** å› æ­¤æˆ‘ä»¬å¯ä»¥å¦‚ä¸Šå›¾ç”¨å®ƒä»¬çš„åå­—æ¥ç§°å‘¼å®ƒä»¬ã€‚æˆ‘ä»¬ä»åä¸º ***opt*** çš„é€‰é¡¹ä¸­è·å–è¾“å…¥æ•°æ®ï¼Œå¹¶å°†è¾“å‡ºç»™åä¸º ***plot*** çš„çº¿å›¾ã€‚****

```
****def** update_figure(**X**):
    trace_2 = go.Scatter(x = st.Date, **y = st[X],**
                       ** name = X,**
                        line = dict(width = 2,
                                    color = 'rgb(106, 181, 135)'))
    fig = go.Figure(data = **[trace_1, trace_2]**, layout = layout)
    **return** fig**
```

****å› æ­¤ï¼Œæˆ‘ä»¬è·å–è¾“å…¥æ•°æ®ï¼Œç„¶åé€šè¿‡åˆ›å»ºæ›´æ–°å‡½æ•°è¿”å›æˆ‘ä»¬æƒ³è¦çš„è¾“å‡ºã€‚è¿™é‡Œæˆ‘ä»¬çš„è¾“å…¥æ•°æ®æ˜¯ä»€ä¹ˆï¼Ÿè¿™æ˜¯ä»ä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©çš„ç‰¹å¾å˜é‡çš„åç§°ï¼Œæˆ‘ä»¬å°†å®ƒä½œä¸ºç¬¬äºŒä¸ªçº¿å›¾çš„ y è½´ã€‚ç”±äº`trace_1`æ²¡æœ‰ä»€ä¹ˆå¯æ”¹å˜çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°å°†`trace_2` æ·»åŠ åˆ°æ•°æ®è¡¨ä¸­ã€‚ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬å°†è¿™æ®µä»£ç æ”¾åˆ°ç¬¬ 5 æ­¥ï¼Œå¹¶é‡æ–°è¿è¡Œ **app.py** ï¼Œç»“æœå°†å¦‚ä¸‹æ‰€ç¤ºã€‚****

****![](img/87de4d777582c25298c889863c3bd792.png)****

****åœ¨æˆ‘ä»¬è¿›å…¥ä¸‹ä¸€éƒ¨åˆ†ä¹‹å‰ï¼Œæˆ‘æƒ³ç®€å•è°ˆä¸€ä¸‹å›è°ƒã€‚å› ä¸ºè¿™æ˜¯ç¼–å†™ä»»ä½•åº”ç”¨ç¨‹åºæ—¶æœ€å¸¸ç”¨çš„å‡½æ•°ä¹‹ä¸€ã€‚ç®€å•æ¥è¯´ï¼Œ [***ä¸€ä¸ªå›è°ƒ***](https://en.wikipedia.org/wiki/Callback_(computer_programming))*æ˜¯ä¸€ä¸ªåœ¨å¾—åˆ°çœŸæ­£çš„æ‰§è¡Œå‘½ä»¤ä¹‹åå†æ‰§è¡Œçš„å‡½æ•°ï¼Œé€šå¸¸æ˜¯ä¸ºäº†æ›´æ–°ã€‚å›è°ƒå‡½æ•°åœ¨å¾—åˆ°å‘½ä»¤åä¸èƒ½æ­£å¸¸å·¥ä½œã€‚è¿™äº›äººéƒ½æ˜¯é‚£ç§*ã€‚å®ƒä»¬å°†åœ¨å…¶ä»–å‘½ä»¤è¡Œè¢«æ‰§è¡Œåæ‰§è¡Œå®ƒä»¬çš„å·¥ä½œï¼Œæˆ‘ä»¬ ***è°ƒç”¨*** å®ƒä»¬ ***è¿”å›*** å†æ¬¡æ‰§è¡ŒçœŸæ­£çš„å‘½ä»¤ã€‚******

******çœ‹çœ‹æˆ‘ä»¬çš„`update_figure()`æ˜¯æ€ä¹ˆè¿ä½œçš„ã€‚è¿™ä¸ªå‡½æ•°ä¸æ˜¯åœ¨æˆ‘ä»¬å¯¼å…¥è¿™ä¸ªåº”ç”¨ç¨‹åºä¹‹åï¼Œè€Œæ˜¯å½“æˆ‘ä»¬é€šè¿‡â€œå›è°ƒâ€ç»™å®ƒå®é™…çš„è¾“å…¥ä¿¡å·æ—¶ï¼Œæ‰å¼€å§‹å·¥ä½œè¿™å°±æ˜¯å›è°ƒå‡½æ•°ã€‚ä½ åœ¨ä¸ç†è§£çš„æƒ…å†µä¸‹ä½¿ç”¨å®ƒæ˜¯å®Œå…¨æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯æˆ‘å¸Œæœ›ä½ åœ¨è¿™é‡Œå¾—åˆ°ç²—ç•¥çš„æƒ³æ³•ã€‚ä½ è¿˜å¯ä»¥ä» [**è¿™ç¯‡æ–‡ç« **](https://codeburst.io/javascript-what-the-heck-is-a-callback-aba4da2deced) ä¸­æ‰¾åˆ°æ›´å¤šç»†èŠ‚ã€‚******

# ******èŒƒå›´æ»‘å—******

******æœ€åï¼Œè®©æˆ‘ä»¬å°è¯•ä¸€ä¸ªèŒƒå›´æ»‘å—ã€‚æˆ‘ä»¬å°†åœ¨å›¾ä¸­æ·»åŠ ä¸€ä¸ªå¹´èŒƒå›´æ»‘å—ï¼Œå®ƒéå¸¸ç±»ä¼¼äºä¸‹æ‹‰èœå•ã€‚è®©æˆ‘ä»¬å…ˆæŸ¥çœ‹ä¸€ä¸‹ dash ç»„ä»¶çš„æ–‡æ¡£ã€‚******

******![](img/ec1d39df4da5b5e21dc2ddbb007f7d47.png)******

******æˆ‘æƒ³è¿™æ—¶å€™ä½ å¾ˆå®¹æ˜“å°±æ˜ç™½äº†ã€‚è¿™é‡Œçš„é‡ç‚¹æ˜¯å¦‚ä½•åšä¸€ä¸ªæ ‡è®°å­—å…¸ã€‚ç”±äºæ—¥æœŸå‘¨æœŸä»(2015 å¹´ 2 æœˆ 17 æ—¥ *)* å¼€å§‹åˆ°(2017 å¹´ 2 æœˆ 17 æ—¥)*ï¼Œ*æˆ‘æƒ³åœ¨å‘¨æœŸä¹‹é—´æ·»åŠ  7 ä¸ªæ ‡è®°ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚******

```
****st['Date'] = pd.to_datetime(st.Date)
dates = ['2015-02-17', '2015-05-17', '2015-08-17', '2015-11-17',
         '2016-02-17', '2016-05-17', '2016-08-17', '2016-11-17',  
         '2017-02-17']date_mark = {i : dates[i] for i in range(0, 9)}****
```

******ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°å°†èŒƒå›´æ»‘å—æ”¾åœ¨ä¸‹æ‹‰ä½ç½®ã€‚è¿™æ¬¡æˆ‘æŠŠå®ƒå‘½åä¸º ***æ»‘å—*** ã€‚`min`å’Œ`max`æ˜¯æ»‘å—çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼Œ`value`æ˜¯æ»‘å—çš„é»˜è®¤è®¾ç½®ã€‚åŒæ ·ï¼Œæ‰€æœ‰å…¶ä»–éƒ¨åˆ†éƒ½åœ¨è®¾è®¡ CSS æ ·å¼çš„ HTML ç»„ä»¶ã€‚******

```
******# Step 4\. Create a Dash layout**
app.layout = html.Div([
                # adding a plot
                dcc.Graph(id = 'plot', figure = fig), **# range slider
                html.P([
                    html.Label("Time Period"),
                    dcc.RangeSlider(id = 'slider',
                                    marks = date_mark,
                                    min = 0,
                                    max = 8,
                                    value = [3, 4]) 
                        ],** style = {'width' : '80%',
                                    'fontSize' : '20px',
                                    'padding-left' : '100px',
                                    'display': 'inline-block'}**)**
                      ])****
```

******åšå¥½æ»‘å—åï¼Œä¸‹ä¸€æ­¥ä¼šåšä»€ä¹ˆï¼ŸæŠŠå®ƒå’Œå‰§æƒ…è”ç³»èµ·æ¥ï¼æˆ‘ä»¬å°†å†æ¬¡ä» ***æ»‘å—*** è·å–è¾“å…¥æ•°æ®ï¼Œå¹¶å°†è¾“å‡ºè¿”å›åˆ° ***å›¾*** ã€‚ä½†æ˜¯è¿™ä¸€æ¬¡ï¼Œè¿™é‡Œæœ‰ä¸ªå°æŠ€å·§ã€‚æ‚¨æ˜¯å¦æ³¨æ„åˆ°æ»‘å—çš„é»˜è®¤å€¼æ˜¯ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå€¼çš„åˆ—è¡¨ï¼Ÿè¯·å†æ¬¡æ£€æŸ¥ä¸Šé¢çš„ä»£ç æ¡†ã€‚`**value = [3, 4]**`ä¸ä¸‹æ‹‰ç»„ä»¶ä¸åŒï¼ŒèŒƒå›´æ»‘å—åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­æ¥å—ä¸¤ä¸ªå€¼ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬ä»æ»‘å—ä¸­è·å–è¾“å…¥æ•°æ®æ—¶ï¼Œä¼šæœ‰ä¸¤ä¸ªå€¼ï¼Œå³èµ·å§‹å€¼å’Œç»“æŸå€¼(`**X[0]**`ã€`**X[1]**`)******

```
******# Step 5\. Add callback functions**
[@app](http://twitter.com/app).callback(Output('plot', 'figure'),
             [Input('slider', 'value')])
**def** update_figure**(X):**
    **st2 = st[(st.Date > dates[X[0]]) & (st.Date < dates[X[1]])]**
    trace_1 = go.Scatter(x = st2.Date, y = st2['AAPL.High'],
                        name = 'AAPL HIGH',
                        line = dict(width = 2,
                                    color = 'rgb(229, 151, 50)'))
    fig = go.Figure(data = [trace_1], layout = layout)
   ** return** fig****
```

******ç°åœ¨æˆ‘ä»¬å°†è¿‡æ»¤æ•°æ®ï¼Œå¹¶ç”¨ç»™å®šçš„å‘¨æœŸæ›´æ–°å›¾å½¢ã€‚å¦‚æœä½ å†æ¬¡é‡æ–°åŠ è½½ç½‘é¡µï¼Œä½ ä¼šçœ‹åˆ°ä¸æˆ‘ç›¸åŒçš„ç»“æœã€‚******

******![](img/497e69b9d4adc3cf3bc2b8223c0ea9c8.png)******

# ******æŠŠè¿™äº›éƒ½é›†ä¸­èµ·æ¥ï¼******

******æˆ‘æƒ³åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å·²ç»è°ˆäº†å¾ˆå¤šäº†ã€‚ä»æ”¾å›¾åˆ°æ·»åŠ å›è°ƒã€‚ç°åœ¨æˆ‘ä»¬ä¸ºä»€ä¹ˆä¸æŠŠå®ƒä»¬éƒ½æ”¾åœ¨ä¸€èµ·ï¼Ÿæˆ‘å»ºè®®ä½ ä¸€æ­¥ä¸€æ­¥åœ°é˜…è¯»ä¸‹é¢çš„è„šæœ¬ã€‚æ‚¨å¯ä»¥åœ¨ç¬¬ 4 æ­¥ä¸­ç»„åˆå›¾å½¢ã€ä¸‹æ‹‰èœå•å’Œæ»‘å—çš„æ‰€æœ‰ç»„ä»¶ï¼Œå°±åƒæ›¿æ¢å’Œæ›´æ”¹æ¨¡å—ä¸€æ ·ã€‚******

******ä½ å‡†å¤‡å¥½çœ‹çœ‹æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªä»ªè¡¨æ¿æ˜¯ä»€ä¹ˆæ ·å­äº†å—ï¼ŸğŸ˜ƒğŸ˜ƒğŸ™ŒğŸ™Œå˜£ï¼ï¼******

******![](img/9e334b2c4b89d0a2c9cdcc0fc92b859b.png)******

******å¹²å¾—å¥½ï¼ä½ å–œæ¬¢åˆ¶ä½œä»ªè¡¨æ¿å—ï¼Ÿæˆ‘å¸Œæœ›ç°åœ¨æ‚¨èƒ½å¤Ÿè½»æ¾é˜…è¯»å’Œç†è§£å…¶ä»– Dash ä»£ç ç¤ºä¾‹ã€‚Dash æä¾›äº†[**è¿™æ ·ä¸€ä¸ªä¸é”™çš„æŒ‡å—**](https://dash.plot.ly/) æ‰€ä»¥ä½ å¯ä»¥éšæ„æ¢ç´¢è‡ªå·±çš„ç½‘ç«™ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡ Plotly æŸ¥çœ‹ Dash ä¸­çš„å…¶ä»–å†…å®¹ã€‚******

******[](https://medium.com/@plotlygraphs/introducing-dash-5ecf7191b503) [## ğŸŒŸå¼•å…¥ç ´æŠ˜å·ğŸŒŸ

### ç”¨çº¯ Python åˆ›å»ºååº”å¼ Web åº”ç”¨ç¨‹åº

medium.com](https://medium.com/@plotlygraphs/introducing-dash-5ecf7191b503) 

# éƒ¨ç½²

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæœ¬åœ°æ‰˜ç®¡åœ¨æ‚¨çš„æœºå™¨ä¸Šã€‚ä¸ºäº†è®©å…¶ä»–äººä¹Ÿèƒ½ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒéƒ¨ç½²åœ¨ web ä¸Šã€‚æœ‰ä¸¤ä¸ªé€‰æ‹©å¯ä»¥é€‰æ‹©ï¼ŒApp æˆæƒå’Œéƒ¨ç½²åˆ° Herokuã€‚ç¬¬ä¸€ç§è¦æ±‚æˆ‘ä»¬å®‰è£…`[dash-auth](https://github.com/plotly/dash-auth)`åŒ…ï¼Œæœ‰ä¸¤ç§ä¸åŒç±»å‹çš„è®¤è¯ï¼ŒHTTP Basic Auth æˆ– Plotly OAuthã€‚å¯ä»¥æŒ‰ç…§ [**è¿™ä¸ªæ•™ç¨‹**](https://dash.plot.ly/authentication) ã€‚

å¦ä¸€ç§æ–¹å¼æ˜¯é€šè¿‡ä½¿ç”¨ Herokuã€AWSã€Google äº‘å¹³å°ç­‰æ‰˜ç®¡å¹³å°ã€‚Heroku æ˜¯æœ€ç®€å•çš„éƒ¨ç½²æ–¹å¼ï¼Œä½ å¯ä»¥æŒ‰ç…§è¿™ä¸ªæ•™ç¨‹[](https://dash.plot.ly/deployment)**ã€‚å…¶ä»–å¹³å°å’Œ Heroku ä¸€æ ·ã€‚**

**é™¤äº†ä¸‹æ‹‰èœå•ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ å…¶ä»–ç»„ä»¶ï¼Œå¦‚æ–‡æœ¬åŒºæˆ–ä¸Šä¼ æ•°æ®ã€‚æˆ‘å»ºè®®ä½ å»äº†è§£ä¸€ä¸‹æœ‰ä»€ä¹ˆæ ·çš„ä»ªè¡¨æ¿éƒ¨ä»¶ã€‚æ‚¨è¿˜å¯ä»¥æ·»åŠ ä»»æ„æ•°é‡çš„ HTML ç»„ä»¶ï¼Œå¹¶ä½¿ç”¨ CSS å±æ€§ä»¥æ›´å¥‡ç‰¹çš„æ–¹å¼è®¾è®¡æ‚¨çš„ç”µè·¯æ¿ã€‚å¦‚æœä½ éœ€è¦å­¦ä¹ ä¸€äº› HTML & CSS çš„åŸºç¡€çŸ¥è¯†ï¼Œå¯ä»¥ä» [**è¿™ä¸ªè§†é¢‘**](https://www.youtube.com/playlist?list=PLB5jA40tNf3vh75MBwUb4oqiXFOZ5pYyX) ä¸­æ‰¾åˆ°å¾ˆæ£’çš„æ•™ç¨‹ã€‚**

**æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œå¸Œæœ›æ‚¨å¯¹è¿™ç¯‡æ–‡ç« æ„Ÿå…´è¶£ã€‚å¦‚æœæœ‰ä»€ä¹ˆéœ€è¦æ”¹æ­£çš„åœ°æ–¹ï¼Œè¯·å’Œæˆ‘ä»¬åˆ†äº«ä½ çš„è§è§£ã€‚æˆ‘æ€»æ˜¯ä¹äºäº¤è°ˆï¼Œæ‰€ä»¥è¯·åœ¨ä¸‹é¢ç•™ä¸‹è¯„è®ºï¼Œåˆ†äº«ä½ çš„æƒ³æ³•ã€‚æˆ‘è¿˜åœ¨ [LinkedIn](https://www.linkedin.com/in/jiwon-jeong/) ä¸Šåˆ†äº«æœ‰è¶£å’Œæœ‰ç”¨çš„èµ„æºï¼Œæ‰€ä»¥è¯·éšæ—¶å…³æ³¨å¹¶è”ç³»æˆ‘ã€‚ä¸‹æ¬¡æˆ‘ä¼šå¸¦ç€å¦ä¸€ä¸ªæœ‰è¶£çš„æ•…äº‹å›æ¥çš„ï¼********