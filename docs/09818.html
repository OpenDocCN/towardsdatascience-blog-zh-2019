<html>
<head>
<title>Violin Plot — It’s Time to Ditch the Box Plots</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">小提琴情节——是时候抛弃盒子情节了</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/violin-plot-its-time-to-ditch-the-box-plots-785629b0ff3a?source=collection_archive---------9-----------------------#2019-12-24">https://towardsdatascience.com/violin-plot-its-time-to-ditch-the-box-plots-785629b0ff3a?source=collection_archive---------9-----------------------#2019-12-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4247" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在您的数据探索之旅中，您很可能遇到过许多类型的图表，它们的主要目标是提供您正在处理的数据的可视化摘要。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e6ed01388d7e0c3df4520cca23bcc2c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KhfGZgDkHnrF_cyMKA_nNQ.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@providence?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Providence Doucet</a> on <a class="ae ky" href="https://unsplash.com/s/photos/violin?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="79e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你已经得到了你的<strong class="lb iu">直方图</strong>和/或<strong class="lb iu"> KDE 图</strong>，向你展示一个特定的属性是如何分布的，你已经得到了你的<strong class="lb iu">箱线图</strong>来寻找最终的异常值。但是你觉得把这两种图表结合起来的想法怎么样？</p><p id="e68e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是小提琴情节的由来。</p><p id="2cca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在潜入文章之前，我先说清楚<strong class="lb iu">这篇文章是给</strong>看的。如果你已经每天都在使用小提琴的情节，并且对它们了如指掌，你可能就不应该继续读下去了。但是对于其他人来说，这篇文章将是一个很好的复习资料，甚至对于初次学习者来说是一个很好的资源。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="82dd" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">小提琴情节——精粹</h1><p id="49fe" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">violin 图背后的主要思想是结合直方图(<em class="mz">或 KDE 图，更准确地说是</em>)和箱形图的功能。也就是说，violin plots 将显示您将在方框图中看到的所有信息，例如:</p><ul class=""><li id="fbb6" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated"><strong class="lb iu">中值</strong>(中间的白点，稍后你会看到)</li><li id="da16" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated"><strong class="lb iu">四分位数范围</strong> (IQR，白点周围的粗黑条)</li><li id="75c6" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated"><strong class="lb iu">下/上限值</strong>(从粗黑条延伸的线，定义为 Q1-1.5 IQR 和 Q3+1.5 IQR-用于异常值检测)</li></ul><p id="0959" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你知道上面所有的那些术语是什么，因为我相信你以前见过一个盒子图，所以没有必要继续纠缠下去。</p><p id="d7fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，这三件事并没有使小提琴情节变得特别(<em class="mz">因为那是盒子情节</em>的工作)。它的特别之处在于，它还显示了数据的<strong class="lb iu">整体分布</strong>。</p><p id="faaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看实际情况，我将从<strong class="lb iu">标准正态分布</strong>中抽取一个样本，然后在 KDE 旁边绘制直方图，然后是箱线图，最后是小提琴图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/e5c34cc1034e9c807b7cbd4f8e30695e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*V1aFO_z60iHzohvfxjkbGQ.png"/></div></figure><p id="b332" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">执行上面的代码将产生以下输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/b832d526d84d5f7ad6a7d9c6bb2e79bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-YZFDcCLZB-iHkoFU3zKsQ.png"/></div></div></figure><p id="a520" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">爽！</strong>简单提一下，如果你对调整<em class="mz"> Matlotlib </em>图表的外观感兴趣，请参考<a class="ae ky" rel="noopener" target="_blank" href="/the-last-matplotlib-tweaking-guide-youll-ever-need-dbd4374a1c1e">我的上一篇文章</a>。</p><p id="1692" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，当我们了解了基础知识后，让我们进一步探索在真实数据集上绘制 violin 图的能力。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="0737" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">向下钻取</h1><p id="2aaf" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为了这篇文章，我将使用<a class="ae ky" href="https://raw.githubusercontent.com/mwaskom/seaborn-data/master/tips.csv" rel="noopener ugc nofollow" target="_blank">技巧数据集</a>，您可以免费下载并跟随它。很容易将它加载到<em class="mz">熊猫</em>中，不需要下载 CSV 文件，只需传入 URL:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/afa21ab2803e38a837e51762c090c431.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3tJt0YAQZ-Am-i9MtbH58A.png"/></div></div></figure><p id="36c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">执行上面的代码将显示数据集的前几行:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/d8de9b350a16b7792c034fa6ce5c8ba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/1*vNJEu_yyjsFKTrZi8fNV6A.png"/></div></figure><p id="77c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" rel="noopener" target="_blank" href="/violin-plots-explained-fb1d115e023d">以防你想知道 Bamboolib 是什么</a>。现在我真的不想对这个数据集进行深入分析，因为，嗯，今天是<strong class="lb iu">圣诞节</strong> ( <em class="mz">祝你节日快乐，我的读者朋友</em>)，但是我将探索小提琴情节的一些属性。</p><p id="2ad1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先是<code class="fe ns nt nu nv b">total_bill</code>属性(代码:<code class="fe ns nt nu nv b">sns.violinplot(tips_df['total_bill'])</code>):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/f7918290ae51dda1566359a015a13708.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7UU2psukJXrbDJgahQUqBg.png"/></div></div></figure><p id="9498" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如你所见，分布有点倾斜。右侧有异常值(<em class="mz">延伸条结束处右侧的区域</em>)，表明有几张昂贵的钞票，大约在 40 美元以上。</p><p id="f672" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们更深入地探索每天和每次总账单金额(代码:<code class="fe ns nt nu nv b">sns.violingplot(x='day', y='total_bill', data=tips_df)`</code>)的 violin 情节:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/1f315eab5760ddcc532772922db7d8b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1p4Ep7bte_0TnZRzMzVNLw.png"/></div></div></figure><p id="911c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">嗯，这很奇怪。不要误会我的意思，所有的情节都很好，但似乎酒吧/餐厅在周一，周二和周三不工作。有史以来最高的账单是在周六，大约 60 美元，但是每天都有异常值。</p><p id="2c3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有一句老话说，吸烟者往往在酒吧和餐馆花更多的钱(<em class="mz">我只是为了证明一点而编造的</em>)，让我们看看这是不是真的(代码:<code class="fe ns nt nu nv b">sns.violinplot(x='day', y='total_bill', hue='smoker', data=tips_df)</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/f1c5ab7d4dcfede1bb6d3576980f0480.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IiJ7J6wKN4kanSHtEq711g.png"/></div></div></figure><p id="2dbe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看起来这种说法在大多数日子里都是正确的，至少如果我们看一下账单金额的中位数(<em class="mz">中的白点</em>)，但对于周五来说，情况通常不是这样。当然，有一些异常值，但是你不能真的指望他们作为大多数数据。</p><p id="0db5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个<code class="fe ns nt nu nv b">hue</code>的东西实质上是图表上小提琴图数量的两倍，这有点不必要，因为小提琴图是对称的，你只要看它的一边就可以得出相同的结论。这就是<code class="fe ns nt nu nv b">split</code>参数派上用场的地方。让我们看看它在示例中做了什么(代码:<code class="fe ns nt nu nv b">sns.violinplot(x='day', y='total_bill', hue='smoker', data=tips_df, split=True)</code>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/223584d682b58318345d11c0cf8f267d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cupOuhSi_x36jm6JSKrgEA.png"/></div></div></figure><p id="e35e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在有了这张更加紧凑的图表，你可以像以前一样看到每一点信息。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="bcf1" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">在你走之前</h1><p id="c0c4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">现在，您已经拥有了将数据分析技能提升到下一个水平所需的基本工具。箱形图很好，KDE 图也很好，但是小提琴图会让你在做决定时节省一些时间。</p><p id="f618" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我鼓励你继续深入探索，在评论区与世界分享你的发现。</p><p id="463e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。保重。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="15d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">喜欢这篇文章吗？成为 <a class="ae ky" href="https://medium.com/@radecicdario/membership" rel="noopener"> <em class="mz">中等会员</em> </a> <em class="mz">继续无限制学习。如果你使用下面的链接，我会收到你的一部分会员费，不需要你额外付费。</em></p><div class="oa ob gp gr oc od"><a href="https://medium.com/@radecicdario/membership" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">通过我的推荐链接加入 Medium-Dario rade ci</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">medium.com</p></div></div><div class="om l"><div class="on l oo op oq om or ks od"/></div></div></a></div></div></div>    
</body>
</html>