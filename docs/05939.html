<html>
<head>
<title>Missing Values — Don’t Drop Them!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">缺少值—不要丢弃它们！</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/missing-values-dont-drop-them-f01b1d8ff557?source=collection_archive---------21-----------------------#2019-08-29">https://towardsdatascience.com/missing-values-dont-drop-them-f01b1d8ff557?source=collection_archive---------21-----------------------#2019-08-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="2387" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">作为我招聘过程的一部分，我让潜在的数据科学候选人进行数据挑战。数据挑战要求候选人接受提供的数据，通过模型开发过程，并以分类模型结束。除非我在高层招聘，否则我不会期望整个数据科学工作流程尽善尽美——在高层，我会寻找一种深思熟虑、符合逻辑的方法来解决手头的问题。这通常暴露在代码的前 50 行中，其中候选项基于缺失值的任意阈值丢弃特性。我见过 40%、80%以及介于两者之间的各种水平。我也看到过因为缺少一个值(超过 100 个特征中的一个)而丢弃整个观察值的情况。由于这种… <em class="ko">激进的</em>缺失值处理方法，一名候选人最终放弃了超过 50%的观察值。</p><p id="eb0f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最终，阈值并不重要，重要的是我们放弃了这些特性，甚至没有考虑特性是什么，以及缺少值意味着什么。实际上，我最后明确地问过一个候选人这个问题。我收到了大约 10 个连续的数据挑战，每个挑战都丢失了 70%以上的值。她的挑战的其余部分相当不错，所以我直截了当地问她，在没有探索这个特性的情况下，你怎么会认为这是个好主意呢？她的回答大致是“我在网上看到有人这么做了。”再说一遍，这些都是初级角色，我不追求完美。然而，这不是我获得工作的方式——我们可能无法就解决问题的正确方法达成一致，但我需要执行某些步骤的合法理由。</p><h1 id="7384" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">随机与系统缺失值</h1><p id="d44e" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">我们正在处理的<em class="ko">类</em>缺失价值观在我们如何对待它们的问题上扮演着重要角色。在<a class="ae ls" href="https://arxiv.org/pdf/1611.09477.pdf" rel="noopener ugc nofollow" target="_blank">的报告</a>(第 2.1 节，但实际上，您应该阅读全部内容)中，阅读关于系统和随机缺失值的内容是非常值得的。此外，一个奇妙的旁注，<a class="ae ls" href="https://www.linkedin.com/posts/johnamount_vtreat-up-on-pypi-activity-6566340823053676544-IL-R" rel="noopener ugc nofollow" target="_blank"> pyvtreat 现在在 PyPi </a>上发布！</p><p id="6913" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">不管怎样，系统的和随机的缺失值有什么区别，更重要的是，为什么有关系？</p><ul class=""><li id="1a03" class="lt lu it js b jt ju jx jy kb lv kf lw kj lx kn ly lz ma mb bi translated">系统性的:值缺失有一些逻辑上的原因。有可能这个特性不适用于观察。</li><li id="5e0d" class="lt lu it js b jt mc jx md kb me kf mf kj mg kn ly lz ma mb bi translated">随机:数据收集随机失败，缺少值没有特定的业务/流程原因。可能导致随机缺失值的几个例子是传感器故障或流程中断。</li></ul><p id="42b1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是两种截然不同的情况，因此应该区别对待。在我们有系统性缺失价值的情况下，缺失的价值对整个过程有意义——它的缺失是有原因的。这使得总括方法成为一种无效的方法——我们应该仔细考虑如何处理每个特性的<em class="ko">缺失值，而不仅仅是考虑这种适当的处理:</em></p><p id="1da5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko"> df.fillna(0，inplace=True) </em></p><h1 id="2dad" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">具体例子</h1><p id="6def" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">我在这里经常引用的例子是 Lending Club 数据集中的一个特征，自上次拖欠以来的几个月。大约少了 65%。这个特性测量的是贷款申请人有一个拖欠账户已经有多长时间了，这在表面上看起来很重要，但是很多申请人最终放弃了它！回想一下随机缺失值和系统缺失值，您认为这种情况会发生在哪里？这很可能是一个具有系统性缺失值的功能，它之所以缺失是因为它不适用，或者更明确地说，他们没有拖欠账户。以下是我见过的一些针对这一特征(以及所有其他特征)的处理方法:</p><ul class=""><li id="69a5" class="lt lu it js b jt ju jx jy kb lv kf lw kj lx kn ly lz ma mb bi translated">用 0 填充—这告诉我们的算法，自他们上次拖欠以来已经过了 0 个月(意味着它基本上发生在昨天)。这给了我们的算法大量不正确的信息和噪音</li><li id="8c63" class="lt lu it js b jt mc jx md kb me kf mf kj mg kn ly lz ma mb bi translated">用中位数填充——这个没那么可怕，但是真的不准确。同样，我们假设这是一个系统性缺失的值。填充中间值意味着 50%有过犯罪行为的人口有更长的时间，因此看起来风险更小。在现实中，这可能会为算法创建一个令人困惑的非线性关系，因为中位数两边的数据可能比中位数风险更大。</li><li id="c1e9" class="lt lu it js b jt mc jx md kb me kf mf kj mg kn ly lz ma mb bi translated">放下观察/特写——阅读文章标题！</li></ul><p id="8b34" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">关于违约率的一些信息以及它与这一特性的关系。如果价值较低，比如不到一年，违约率约为 24%。随着拖欠时间的增加，该值呈下降趋势，最终约为 21%。没有拖欠债务的人口的违约率徘徊在 18%左右。这个特性中肯定有一些预测能力，而上述方法不允许这个特性以它所能达到的预测能力运行。相反，我们有办法填充这个值，以防止算法迷失在噪声中。</p><ul class=""><li id="6333" class="lt lu it js b jt ju jx jy kb lv kf lw kj lx kn ly lz ma mb bi translated">用负数填充—这对于基于树的模型或其他非参数方法特别有用。这里的真值应该≥ 0，所以负数会把这个总体拆分成一个单独的类别。但是如果我处理的是线性模型呢？</li><li id="d142" class="lt lu it js b jt mc jx md kb me kf mf kj mg kn ly lz ma mb bi translated">填入一个较大的值-拖欠时间越长，该客户的风险越低，因此我们可以填入一个较大的值，向我们的模型表明该人群的风险低于其余人群。</li></ul><h1 id="0473" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">如果我选错了方法怎么办？</h1><p id="c4eb" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">所有这些都有点像猜谜游戏。很多时候，很难真正知道这些值是随机丢失的还是系统丢失的，除非您公司的数据收集实践非常强大且记录良好，并且非常了解上下文以及它与您的分析的关系。如果我选择了错误的方法会发生什么？有一件事你应该<em class="ko">永远</em>做，努力给你的算法完整的信息，万一你选择了一个令人难以置信的可怕的方法。有一件事(同样来自精彩的 vtreat 论文):创建一个新的二进制特征，作为该值最初是否丢失的标志。如果您的新要素缺失，则该要素的值为 1，如果有值，则该要素的值为 0。对于这一具体特征，这基本上是一个“他们是否有过拖欠”标志，它显然对你的预测非常有帮助。</p><p id="668c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">数据科学是一个艰难的领域，要求候选人和从业者在处理问题的方式上具有逻辑性和智慧。数据科学工作流程中最具挑战性也是最重要的部分之一是处理杂乱的数据。你处理这件事的方式显示了你将手头的问题概念化并提出一个可靠的解决方案的能力，同时为你的模型提供了巨大的提升。这一步带来的提升几乎和特性工程一样重要，但是后面会有更多的介绍！</p><p id="6542" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有问题吗？反馈？想聊聊数据科学和数据策略？伸出手来！https://www.linkedin.com/in/brettnebeker/<a class="ae ls" href="https://www.linkedin.com/in/brettnebeker/" rel="noopener ugc nofollow" target="_blank"/></p></div></div>    
</body>
</html>