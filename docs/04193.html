<html>
<head>
<title>A Python Beginner’s Look at .loc</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 初学者的观察。通信线路（LinesofCommunication）</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-python-beginners-look-at-loc-part-2-bddef7dfa7f2?source=collection_archive---------12-----------------------#2019-07-01">https://towardsdatascience.com/a-python-beginners-look-at-loc-part-2-bddef7dfa7f2?source=collection_archive---------12-----------------------#2019-07-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6d2a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在 pandas 数据框架中设置行和列值</h2></div><p id="7aba" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为一个 Python 初学者，使用<code class="fe lb lc ld le b">.loc</code>来检索和更新 pandas 数据帧中的值对我来说并不合适。在之前的<a class="ae lf" href="https://medium.com/@ljhopkins/a-python-beginners-look-at-loc-part-1-cb1e1e565ec2" rel="noopener">帖子</a>中，我分享了我所了解到的关于<em class="lg">与<code class="fe lb lc ld le b">.loc</code>检索</em>数据的情况。今天，我们将谈论<em class="lg">设置</em>值。</p><p id="7f4e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为复习，这里是我们正在处理的神奇宝贝数据的前 10 行:</p><figure class="li lj lk ll gt lm gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi lh"><img src="../Images/9f55e345de53d3219c6a8b09b79b4a82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DY9dYY6vAhR2F97hbE0kyQ.png"/></div></div></figure><h1 id="dd87" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">将一组单元格设置为单个值</h1><p id="db0a" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">使用<code class="fe lb lc ld le b">.loc</code>设置数据值很容易，所以让我们将 Mega Venusaur 的值设置为<code class="fe lb lc ld le b">0</code>。只需将指标值传递给 Mega Venusaur 出现的行(即<code class="fe lb lc ld le b">3</code>):</p><pre class="li lj lk ll gt mq le mr ms aw mt bi"><span id="6dfe" class="mu lu iq le b gy mv mw l mx my">df.loc[3] = 0<br/>df.head(5)</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi mz"><img src="../Images/66a9548b9bde5465a6e5afb9187d9ea4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*86n7O8S3dCGMEzBFpRoHAA.png"/></div></div></figure><p id="58d4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，让我们通过传递所有行(带有<code class="fe lb lc ld le b">:</code>)和列名来重置<em class="lg">所有</em>神奇宝贝到<code class="fe lb lc ld le b">60</code>的“速度”统计:</p><pre class="li lj lk ll gt mq le mr ms aw mt bi"><span id="3d85" class="mu lu iq le b gy mv mw l mx my">df.loc[:, 'Speed'] = 60<br/>df.head(5)</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi na"><img src="../Images/5a89bdde9933c2dad3113a168d16fec8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lA_HPrqk2pZdDiH9gkHARg.png"/></div></div></figure><p id="b506" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，让我们把所有“灵异精灵”类型的神奇宝贝的生命值更新为<code class="fe lb lc ld le b">42</code>。(如果你需要一个关于如何构建布尔掩码的复习，请看<a class="ae lf" href="https://medium.com/@ljhopkins/a-python-beginners-look-at-loc-part-1-cb1e1e565ec2" rel="noopener">这篇文章</a>。)</p><pre class="li lj lk ll gt mq le mr ms aw mt bi"><span id="6da9" class="mu lu iq le b gy mv mw l mx my">df.loc[df['Type'] == 'PsychicFairy', ['HP']] = 42</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi nb"><img src="../Images/d4fb901cd08deed4c1830a656f951d66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R84I21nPGAFxq6jYR9h9bQ.png"/></div></div></figure><p id="baf6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用这种方法，<em class="lg">由<code class="fe lb lc ld le b">.loc</code>表达式返回的每个单元格</em>都将被更新为您指定的值，并且它们将直接在 dataframe 中被更改<em class="lg">，因此最好先测试一下您是否得到了您期望的行/列，而无需设置值。例如，当我构建这个例子时，我无意中在列索引器中有了<code class="fe lb lc ld le b">['Name', 'HP']</code>，所以我最终得到了一堆名为<code class="fe lb lc ld le b">‘42’</code>的具有<code class="fe lb lc ld le b">42</code>生命点的 PsychicFairies，并且我必须重新加载我的数据。</em></p><h1 id="9041" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">将一组单元格设置为一组不同的值</h1><p id="8be4" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">但是如果您需要为一组单元格设置不同的<em class="lg">值呢？你所需要的只是一个你想要设置的值的列表(在形状上等同于你的<code class="fe lb lc ld le b">.loc</code>语句返回的数据)，而<code class="fe lb lc ld le b">.loc</code>会为你做这件事。</em></p><p id="63ae" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">举个例子，假设我们想改变火型神奇宝贝的名称，使其包含🔥表情符号:</p><ol class=""><li id="a08d" class="nc nd iq kh b ki kj kl km ko ne ks nf kw ng la nh ni nj nk bi translated">为火焰类型创建一个布尔遮罩:<code class="fe lb lc ld le b">df[‘Type’] == ‘Fire’</code></li><li id="b821" class="nc nd iq kh b ki nl kl nm ko nn ks no kw np la nh ni nj nk bi translated">将掩码传递到 DataFrame，以过滤火类型神奇宝贝的行:<code class="fe lb lc ld le b"><strong class="kh ir">df[</strong>df[‘Type’] == ‘Fire’<strong class="kh ir">]</strong></code></li><li id="4178" class="nc nd iq kh b ki nl kl nm ko nn ks no kw np la nh ni nj nk bi translated">通过分割 DataFrame: <code class="fe lb lc ld le b">df[df[‘Type’] == ‘Fire’]<strong class="kh ir">[‘Name’]</strong></code>)来隔离 Name 列。</li><li id="5ec9" class="nc nd iq kh b ki nl kl nm ko nn ks no kw np la nh ni nj nk bi translated">接下来，使用掩码建立列表理解，以生成新的表情符号增强的名称。我们将把它赋给一个名为<code class="fe lb lc ld le b">new_names</code> : <code class="fe lb lc ld le b">new_names = <strong class="kh ir">[‘🔥’ + name + ‘🔥’ for name in </strong>df[df[‘Type’] == ‘Fire’][‘Name’]<strong class="kh ir">]</strong></code>的变量。</li><li id="e269" class="nc nd iq kh b ki nl kl nm ko nn ks no kw np la nh ni nj nk bi translated">最后，使用步骤 1 中的布尔掩码和<code class="fe lb lc ld le b">Name</code>列作为<code class="fe lb lc ld le b">.loc</code>语句中的索引器，并将其设置为 fiery 名称列表:</li></ol><pre class="li lj lk ll gt mq le mr ms aw mt bi"><span id="b793" class="mu lu iq le b gy mv mw l mx my"><strong class="le ir">df.loc[df['Type'] == 'Fire', 'Name']</strong> = new_names</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi nq"><img src="../Images/02ba3b7ef172cc08b3a0dea7611c8981.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UysriMV39SYggY8xRkLM5w.png"/></div></div></figure><p id="275c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对多个列的更新也很容易。并且<code class="fe lb lc ld le b">.loc</code>将在任意数量的行&amp;列中设置值；只传递相同维度的值。</p><p id="6d14" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们改变一些心灵精灵类型的攻击和特殊攻击值。</p><figure class="li lj lk ll gt lm gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi nr"><img src="../Images/5abc83a8b400e956593fe9dc5d86b646.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fobo-WFnkbrwgdFI6Vg0Mg.png"/></div></div></figure><p id="bfb0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里我们将让<code class="fe lb lc ld le b">.loc</code>引用三行两列，以及一个相同维度的值列表，我们就可以开始了。</p><pre class="li lj lk ll gt mq le mr ms aw mt bi"><span id="a463" class="mu lu iq le b gy mv mw l mx my">rows_to_update = [305, 306, 487]<br/>cols_to_update = ['Attack', 'SpecialAttack']<br/>values = [[87,88],[187,188],[287,288]]</span><span id="94e8" class="mu lu iq le b gy ns mw l mx my">df.loc[rows_to_update, cols_to_update] = values</span></pre><figure class="li lj lk ll gt lm gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/293793609e2f9ed8d9aed2e13d108f34.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/1*gWFRHDqqAPOBVuz-eP-E2Q.png"/></div></figure></div><div class="ab cl nu nv hu nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ij ik il im in"><p id="1cf9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以上就是我对<code class="fe lb lc ld le b">.loc</code>的了解。你有什么问题？其他提示？</p></div></div>    
</body>
</html>