<html>
<head>
<title>Making Sense of List Comprehensions in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Python 理解列表的意义</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/my-trick-to-learning-list-comprehensions-in-python-8a54e66d98b?source=collection_archive---------15-----------------------#2019-10-30">https://towardsdatascience.com/my-trick-to-learning-list-comprehensions-in-python-8a54e66d98b?source=collection_archive---------15-----------------------#2019-10-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/6262d719c5f16225fbd58e95c4c26ab0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*drLq1WukySkn3JKMh_z79w.png"/></div></div></figure><h1 id="b9ef" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">快速浏览列表</h1><p id="8f8f" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">当我开始<a class="ae lx" href="https://www.w3schools.com/python/default.asp" rel="noopener ugc nofollow" target="_blank">探索 Python </a>时，列表是我学到的第一件事，不久我就意识到它们是编程语言的一个常用特性。Python 语言中的列表是有序且可变的数据结构，它包含存储在一组括号[]之间的项目集合。列表可以包含重复项，列表中的单个项可以通过使用相应的索引值来调用，从[0，…，n]开始。列表中的项目可以被删除、更改或添加，使列表成为一种适应数据的方式。<a class="ae lx" href="https://www.google.com/search?q=what+is+a+python+list" rel="noopener ugc nofollow" target="_blank">有大量的资源可以帮助你学习更多关于 python 列表的知识</a>，但是这里有一个例子:</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="c0d9" class="mh kc it md b gy mi mj l mk ml">#example list<br/>color_list = ["green", "red", "blue", "yellow"]</span></pre></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="3cba" class="kb kc it bd kd ke mt kg kh ki mu kk kl km mv ko kp kq mw ks kt ku mx kw kx ky bi translated">从列表理解开始</h1><p id="1212" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">使用列表的一种“<em class="my">python 式</em>”方法叫做<em class="my">列表理解。</em>list comprehension 是一个语法结构，它允许您基于现有列表创建一个列表。一般语法如下:</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="6a43" class="mh kc it md b gy mi mj l mk ml">#new_list = [(output value)(for loop)(logical conditions)]</span><span id="7ff9" class="mh kc it md b gy mz mj l mk ml">#example list comprehension<br/>green_list = [color for color in color_list if color == 'green']</span></pre><p id="2fe1" class="pw-post-body-paragraph kz la it lb b lc na le lf lg nb li lj lk nc lm ln lo nd lq lr ls ne lu lv lw im bi translated">列表理解可以极大地减少完成一个操作所需的代码量。例如，这是使用 For 循环代替列表理解的相同逻辑:</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="7da9" class="mh kc it md b gy mi mj l mk ml">green_list2 = []<br/>for color in color_list:<br/>    if color == 'green':<br/>        green_list2.append(color)</span></pre></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="f198" class="kb kc it bd kd ke mt kg kh ki mu kk kl km mv ko kp kq mw ks kt ku mx kw kx ky bi translated">我的尤里卡！列表理解的时刻</h1><p id="f4c1" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">在我开始学习 Python 之前，我对 SQL 很熟悉，并且每天都在工作中使用它。<a class="ae lx" href="https://www.w3schools.com/sql/" rel="noopener ugc nofollow" target="_blank"> SQL(结构化查询语言)</a>常用于管理 MySQL、微软 SQL Server 等关系数据库中的数据。当我还是一个 python 初学者时，列表看起来相当简单，很容易在很多方面应用，但是列表理解对我来说很难理解。我被这种语法吓倒了，所以我避免使用它们。有一天，在做 python 练习时，我在写一个列表理解，突然意识到语法类似于 SQL SELECT 语句。这是一个尤里卡！给了我信心，让我变得有创造力。</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="b2c1" class="mh kc it md b gy mi mj l mk ml">#SQL select statement example<br/>#SELECT color FROM color_list WHERE color IN ('green', 'red', 'blue')</span><span id="05d0" class="mh kc it md b gy mz mj l mk ml">#list comprehension selecting the same data as the SQL statement<br/>rgb = [color for color in color_list if color in('green', 'red', 'blue')]<br/>print(rgb)</span></pre><p id="6506" class="pw-post-body-paragraph kz la it lb b lc na le lf lg nb li lj lk nc lm ln lo nd lq lr ls ne lu lv lw im bi translated">很容易看出列表理解如何类似于 SQL select 语句。</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="1e67" class="kb kc it bd kd ke mt kg kh ki mu kk kl km mv ko kp kq mw ks kt ku mx kw kx ky bi translated">更多列表理解</h1><figure class="ly lz ma mb gt ju gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/27571d4fab0b7be6ec6916e57ac65b7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/format:webp/1*UcLW6fEDQFJhkrY5aDkPYA.png"/></div></figure><p id="48da" class="pw-post-body-paragraph kz la it lb b lc na le lf lg nb li lj lk nc lm ln lo nd lq lr ls ne lu lv lw im bi translated">在我灵光一现之后，学习理解列表变得容易多了。虽然这是一个强大的工具，但是有一些事情需要记住。列表理解可以重写为 for 循环，但不是每个 for 循环都可以写成列表理解！此外，就可读性和可维护性而言，写出 for 循环可能是有意义的。<br/>这里还有几个使用列表理解的例子:</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h2 id="1997" class="mh kc it bd kd ng nh dn kh ni nj dp kl lk nk nl kp lo nm nn kt ls no np kx nq bi translated">使用列表理解映射值的两种方法</h2><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="3cc3" class="mh kc it md b gy mi mj l mk ml">#create numeric indicators for colors<br/>color_indicator = [0 if color == 'green'else 1 if color == 'red' else 2 if color == 'blue' else 3 for color in color_list]<br/>print(color_list)<br/>print(color_indicator)</span></pre><figure class="ly lz ma mb gt ju gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/33d10d3a23cc10bf2c4a1907d5f7ab0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:594/format:webp/1*RKC_fioIR9fEwKkMObA_jg.png"/></div></figure><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="3423" class="mh kc it md b gy mi mj l mk ml">color_mapping = {'green': 0, 'red': 1, 'blue':2, 'yellow':3}<br/>color_indicator2 = [color_mapping[color] if color in color_mapping else 'na' for color in color_list]<br/>print(color_list)<br/>print(color_indicator2)</span></pre><figure class="ly lz ma mb gt ju gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/11d27e4f41a2e35744e073bf36815454.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/1*JcASgBB8ACavx8NiyhVE6w.png"/></div></figure><h2 id="457c" class="mh kc it bd kd ng nh dn kh ni nj dp kl lk nk nl kp lo nm nn kt ls no np kx nq bi translated">查找长度为 n 的项目</h2><p id="44d9" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">假设我们想在列表中查找长度超过 5 个字符的所有颜色</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="201b" class="mh kc it md b gy mi mj l mk ml">long_color_words = [color for color in color_list if len(color) &gt; 5]<br/>long_color_words</span></pre><figure class="ly lz ma mb gt ju gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/935dcbbb93e6ea62e3edc1db420b06aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:210/format:webp/1*inQ0JCmGLNuwkI6BvQ2NNA.png"/></div></figure><p id="9974" class="pw-post-body-paragraph kz la it lb b lc na le lf lg nb li lj lk nc lm ln lo nd lq lr ls ne lu lv lw im bi translated">在逻辑之间复制也很简单。我们可以找到长度在 4 到 6 之间的所有颜色:</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="843f" class="mh kc it md b gy mi mj l mk ml">color_length5 = [color for color in color_list if len(color) &gt; 4 and len(color) &lt; 6]<br/>color_length5</span></pre><figure class="ly lz ma mb gt ju gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/7e5a1ee6e689b197a9c829436542269b.png" data-original-src="https://miro.medium.com/v2/resize:fit:176/format:webp/1*W6o8fgCEOUkXLdWNTRgc1w.png"/></div></figure><h2 id="f1fc" class="mh kc it bd kd ng nh dn kh ni nj dp kl lk nk nl kp lo nm nn kt ls no np kx nq bi translated">嵌套循环</h2><p id="ed38" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">您可以嵌套循环来执行操作并返回矩阵。这里我们创建了一个颜色属性矩阵:</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="f4b4" class="mh kc it md b gy mi mj l mk ml">color_list1 = ['green', 'red', 'blue', 'yellow']<br/>color_list2 = ['dark', 'bright', 'tinted', 'glowing']</span><span id="37af" class="mh kc it md b gy mz mj l mk ml">color_matrix = [[color2 + ' ' + color1 for color1 in color_list1] for color2 in color_list2]<br/>color_matrix</span></pre><figure class="ly lz ma mb gt ju gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/2c70ee97ffaa2b78a962b957a8d7f414.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*uw8NWXmkzbk0OloedhF0Uw.png"/></div></figure></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><h1 id="2e26" class="kb kc it bd kd ke mt kg kh ki mu kk kl km mv ko kp kq mw ks kt ku mx kw kx ky bi translated">结束语</h1><p id="6f0c" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">希望这有助于理解 Python 列表，并给你一个简单的方法去思考它们，如果它们起初看起来令人生畏的话。它们是处理列表数据的优雅而强大的方式，因此理解它们是在 Python 中前进的重要一步。将列表理解视为 SQL Select 语句帮助我理解了这个概念，并帮助我更自信地探索其功能。</p><h1 id="c4a8" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">谢谢大家！</h1><ul class=""><li id="73f8" class="nw nx it lb b lc ld lg lh lk ny lo nz ls oa lw ob oc od oe bi translated"><em class="my">如果你喜欢这个，</em> <a class="ae lx" href="https://medium.com/@erickleppen" rel="noopener"> <em class="my">在 Medium 上关注我</em> </a> <em class="my">获取更多</em></li><li id="d33e" class="nw nx it lb b lc of lg og lk oh lo oi ls oj lw ob oc od oe bi translated"><a class="ae lx" href="https://erickleppen.medium.com/membership" rel="noopener"> <em class="my">通过订阅</em> </a>获得对我的内容的完全访问和帮助支持</li><li id="3d2d" class="nw nx it lb b lc of lg og lk oh lo oi ls oj lw ob oc od oe bi translated"><em class="my">我们来连线一下</em><a class="ae lx" href="https://www.linkedin.com/in/erickleppen01/" rel="noopener ugc nofollow" target="_blank"><em class="my">LinkedIn</em></a></li><li id="dc24" class="nw nx it lb b lc of lg og lk oh lo oi ls oj lw ob oc od oe bi translated"><em class="my">用 Python 分析数据？查看我的</em> <a class="ae lx" href="https://pythondashboards.com/" rel="noopener ugc nofollow" target="_blank"> <em class="my">网站</em> </a></li></ul><p id="a555" class="pw-post-body-paragraph kz la it lb b lc na le lf lg nb li lj lk nc lm ln lo nd lq lr ls ne lu lv lw im bi translated"><a class="ae lx" href="http://pythondashboards.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> —埃里克·克莱本</strong> </a></p></div></div>    
</body>
</html>