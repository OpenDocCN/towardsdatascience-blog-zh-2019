<html>
<head>
<title>Get started with Apache Spark and TensorFlow on Azure Databricks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Azure Databricks 上开始使用 Apache Spark 和 TensorFlow</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/get-started-with-apache-spark-and-tensorflow-on-azure-databricks-163eb3fdb8f3?source=collection_archive---------15-----------------------#2019-02-25">https://towardsdatascience.com/get-started-with-apache-spark-and-tensorflow-on-azure-databricks-163eb3fdb8f3?source=collection_archive---------15-----------------------#2019-02-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3657" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">现在在 Apache Spark framework 上可以使用 TensorFlow，但是如何开始呢？它叫做张量框架</h2></div><h1 id="68d0" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="9a7c" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这是一个关于如何在 Azure Databricks 上运行新的 Spark TensorFrame 库的分步教程。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/6f5873f9f79b9c19e7ddb7e0bf878d0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1170/format:webp/1*ODRJsCDhVbhIBXrASNWY3w.png"/></div></figure><p id="f004" class="pw-post-body-paragraph kx ky iq kz b la mb jr lc ld mc ju lf lg md li lj lk me lm ln lo mf lq lr ls ij bi translated">大数据是一个庞大的主题，包含许多领域和专业知识。一路从 DevOps，数据工程师到数据科学家，AI，机器学习，算法开发者等等。我们都在与海量数据作斗争。当我们处理大量数据时，我们需要最好的头脑和工具。这就是<strong class="kz ir">阿帕奇火花</strong>和<strong class="kz ir">张量流</strong>的<strong class="kz ir"> <em class="mg">神奇</em> </strong>组合发生的地方，我们称之为<strong class="kz ir">张量框架</strong>。</p><p id="0c0a" class="pw-post-body-paragraph kx ky iq kz b la mb jr lc ld mc ju lf lg md li lj lk me lm ln lo mf lq lr ls ij bi translated">Apache Spark 接管了大数据世界，提供答案并支持数据工程师变得更加成功，而数据科学家则不得不设法绕过 Spark 提供的机器学习库 Spark MLlib 的限制。</p><p id="a39d" class="pw-post-body-paragraph kx ky iq kz b la mb jr lc ld mc ju lf lg md li lj lk me lm ln lo mf lq lr ls ij bi translated">但是现在，Apache Spark 用户可以使用 TensorFlow 了。这些工具的结合使数据科学家的工作更高效、更准确、更快速。从研究到开发再到生产，比以往任何时候都要快。</p><figure class="lu lv lw lx gt ly"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="e5ba" class="pw-post-body-paragraph kx ky iq kz b la mb jr lc ld mc ju lf lg md li lj lk me lm ln lo mf lq lr ls ij bi translated">在我们开始之前，让我们先整理一下术语:</p><ul class=""><li id="fe11" class="mj mk iq kz b la mb ld mc lg ml lk mm lo mn ls mo mp mq mr bi translated"><strong class="kz ir"> Tensor Flow </strong>是 Google 创建的用于高性能数值计算的开源机器学习框架。它附带了对 AI 的强大支持:机器学习和深度学习。</li><li id="91d9" class="mj mk iq kz b la ms ld mt lg mu lk mv lo mw ls mo mp mq mr bi translated"><strong class="kz ir"> Azure Databricks </strong>是一个基于 Apache Spark 的分析平台，针对<strong class="kz ir">微软 Azure </strong>云服务平台进行了优化。Azure Databricks 还充当软件即服务(SaaS) /大数据即服务(BDaaS)。</li><li id="eea6" class="mj mk iq kz b la ms ld mt lg mu lk mv lo mw ls mo mp mq mr bi translated">TensorFrames 是一个 Apache Spark 组件，它使我们能够在 Spark 集群上创建自己的可扩展 TensorFlow 学习算法。</li></ul><h1 id="7c7c" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">-1-工作区:</h1><p id="1cf5" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">首先，我们需要创建工作空间，我们正在使用 Databricks 工作空间，这里有一个<a class="ae mx" href="https://docs.microsoft.com/azure/azure-databricks/quickstart-create-databricks-workspace-portal?WT.mc_id=online-medium-adpolak" rel="noopener ugc nofollow" target="_blank">教程</a>用于创建它。</p><h1 id="91f1" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">-2-集群:</h1><p id="4fc5" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">有了工作空间之后，我们需要创建集群本身。让我们使用<a class="ae mx" href="https://docs.microsoft.com/azure/azure-databricks/quickstart-create-databricks-workspace-portal?WT.mc_id=online-medium-adpolak" rel="noopener ugc nofollow" target="_blank">本</a>教程创建我们的 spark 集群，确保您的集群中有以下配置:</p><ul class=""><li id="e978" class="mj mk iq kz b la mb ld mc lg ml lk mm lo mn ls mo mp mq mr bi translated">Apache Spark 的工作版本(2.4 或更高版本)</li><li id="45b7" class="mj mk iq kz b la ms ld mt lg mu lk mv lo mw ls mo mp mq mr bi translated">Java 8+</li><li id="bc27" class="mj mk iq kz b la ms ld mt lg mu lk mv lo mw ls mo mp mq mr bi translated">(可选)python 2.7+/3.6+如果要使用 python 接口。</li><li id="6780" class="mj mk iq kz b la ms ld mt lg mu lk mv lo mw ls mo mp mq mr bi translated">(可选)python TensorFlow 包(如果要使用 python 接口)。关于如何获得 TensorFlow 的最新版本，请参见<a class="ae mx" href="https://www.tensorflow.org/install/" rel="noopener ugc nofollow" target="_blank">官方说明</a>。</li><li id="06c5" class="mj mk iq kz b la ms ld mt lg mu lk mv lo mw ls mo mp mq mr bi translated">(可选)如果要使用 python 接口，pandas &gt;= 0.19.1</li></ul><p id="81c4" class="pw-post-body-paragraph kx ky iq kz b la mb jr lc ld mc ju lf lg md li lj lk me lm ln lo mf lq lr ls ij bi translated">配置:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi my"><img src="../Images/e2fada2fefbe9c4fe67ffd56cdbbc2ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wr20JKB-RJpZxT-FzmAlQw.png"/></div></div></figure><p id="e562" class="pw-post-body-paragraph kx ky iq kz b la mb jr lc ld mc ju lf lg md li lj lk me lm ln lo mf lq lr ls ij bi translated">使用 Databricks 运行时版本或更高版本:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/c5189ca59a6473f491b90bc5b795723b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*iPalUgtj4vgp3qWm-Sfmlg.png"/></div></figure><p id="7295" class="pw-post-body-paragraph kx ky iq kz b la mb jr lc ld mc ju lf lg md li lj lk me lm ln lo mf lq lr ls ij bi translated">按 start 启动集群</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/9326e9bbc29c9b624f32b4728a36933e.png" data-original-src="https://miro.medium.com/v2/resize:fit:200/format:webp/1*-GNxbubA5d-6GR5-BmEK8A.png"/></div></figure><h1 id="f8a9" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">-3-导入库:</h1><p id="ff14" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">在<strong class="kz ir"> Azure Databricks </strong>下，进入<strong class="kz ir">常见任务</strong>，点击<strong class="kz ir">导入库</strong>:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/50a715c824f5766344d2965a152075fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*lS7tnxQN0fAlTJnNhVElgQ.png"/></div></figure><p id="0d7b" class="pw-post-body-paragraph kx ky iq kz b la mb jr lc ld mc ju lf lg md li lj lk me lm ln lo mf lq lr ls ij bi translated">TensorFrame 可以在<a class="ae mx" href="https://mvnrepository.com/artifact/databricks/tensorframes/0.2.9-s_2.11" rel="noopener ugc nofollow" target="_blank"> maven 资源库</a>上找到，所以选择 maven 标签。在坐标下，插入您选择的库，现在，它将是:</p><pre class="lu lv lw lx gt ng nh ni nj aw nk bi"><span id="f650" class="nl kg iq nh b gy nm nn l no np">databricks:tensorframes:0.6.0-s_2.11</span></pre><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/64e18c70055b006189b3b0ab8e018a6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/format:webp/1*-OT9abkysm_ijRNivrOigA.png"/></div></figure><p id="cdb1" class="pw-post-body-paragraph kx ky iq kz b la mb jr lc ld mc ju lf lg md li lj lk me lm ln lo mf lq lr ls ij bi translated">点击<strong class="kz ir">创建</strong>按钮。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/b87af81d5f7d806fe012178d8324c5e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*ACFlxkDte7lo7Cs220RXtA.png"/></div></figure><p id="c6f6" class="pw-post-body-paragraph kx ky iq kz b la mb jr lc ld mc ju lf lg md li lj lk me lm ln lo mf lq lr ls ij bi translated">点击<strong class="kz ir">安装</strong>。</p><p id="90e0" class="pw-post-body-paragraph kx ky iq kz b la mb jr lc ld mc ju lf lg md li lj lk me lm ln lo mf lq lr ls ij bi translated">你会看到这个:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi ns"><img src="../Images/7d28e69fc036ec0d2d8d807a3cb6fb51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z8tbAdxoaLnZ2996CgOtuQ.png"/></div></div></figure><p id="659f" class="pw-post-body-paragraph kx ky iq kz b la mb jr lc ld mc ju lf lg md li lj lk me lm ln lo mf lq lr ls ij bi translated">嘣。您的 Databricks 集群上有 TensorFrame。</p><figure class="lu lv lw lx gt ly"><div class="bz fp l di"><div class="nt mi l"/></div></figure><h1 id="4fcf" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">-4-笔记本:</h1><p id="7063" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">我们使用笔记本作为我们的代码笔记本，在那里我们可以编写代码并直接在我们的 Spark 集群上运行它。</p><p id="c672" class="pw-post-body-paragraph kx ky iq kz b la mb jr lc ld mc ju lf lg md li lj lk me lm ln lo mf lq lr ls ij bi translated">现在我们有了一个正在运行的集群，让我们运行一个笔记本:</p><p id="af9c" class="pw-post-body-paragraph kx ky iq kz b la mb jr lc ld mc ju lf lg md li lj lk me lm ln lo mf lq lr ls ij bi translated">点击<strong class="kz ir">新笔记本</strong>并选择您喜欢的编程语言(这里我们选择了 Scala)</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi nu"><img src="../Images/f16dd119b309956348c035814b01dd12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5LL_FIGaTvGJ1ZKk7_9lXg.png"/></div></div></figure><p id="4f9f" class="pw-post-body-paragraph kx ky iq kz b la mb jr lc ld mc ju lf lg md li lj lk me lm ln lo mf lq lr ls ij bi translated">这是 scala 代码在带有 TensorFrames 的笔记本门户上的外观:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi nv"><img src="../Images/820f2f59fa640407a42e2070accc3962.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ygxKvXVbAwbXA_9yvylgAQ.jpeg"/></div></div></figure><p id="0853" class="pw-post-body-paragraph kx ky iq kz b la mb jr lc ld mc ju lf lg md li lj lk me lm ln lo mf lq lr ls ij bi translated">代码示例来自 D <a class="ae mx" href="https://github.com/databricks/tensorframes/blob/master/README.md" rel="noopener ugc nofollow" target="_blank"> atabricks git 仓库</a>。</p><p id="8962" class="pw-post-body-paragraph kx ky iq kz b la mb jr lc ld mc ju lf lg md li lj lk me lm ln lo mf lq lr ls ij bi translated">您也可以在这里查看:</p><figure class="lu lv lw lx gt ly"><div class="bz fp l di"><div class="nw mi l"/></div></figure><h1 id="ddb9" class="kf kg iq bd kh ki kj kk kl km kn ko kp jw kq jx kr jz ks ka kt kc ku kd kv kw bi translated">-结尾-</h1><p id="dc14" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">现在一切都已启动并运行，在 Apache Spark 集群中创建自己的使用 TensorFrame 的触发/调度作业。</p><p id="f0f4" class="pw-post-body-paragraph kx ky iq kz b la mb jr lc ld mc ju lf lg md li lj lk me lm ln lo mf lq lr ls ij bi translated">还有…</p><p id="2e59" class="pw-post-body-paragraph kx ky iq kz b la mb jr lc ld mc ju lf lg md li lj lk me lm ln lo mf lq lr ls ij bi translated">既然你已经走到这一步了，请点击鼓掌按钮👏和<a class="ae mx" href="https://medium.com/@adipolak" rel="noopener">在 Medium </a>和<a class="ae mx" href="https://twitter.com/adipolak" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上关注我，获取更多关于 Scala、Kotlin、大数据、干净代码和软件工程师挑战的帖子。干杯！</p><figure class="lu lv lw lx gt ly"><div class="bz fp l di"><div class="nx mi l"/></div></figure></div></div>    
</body>
</html>