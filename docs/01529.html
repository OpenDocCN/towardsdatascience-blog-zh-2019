<html>
<head>
<title>An interesting and intuitive view of AUC and ROC curve</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有趣且直观的 AUC 和 ROC 曲线视图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/an-interesting-and-intuitive-view-of-auc-5f6498d87328?source=collection_archive---------15-----------------------#2019-03-11">https://towardsdatascience.com/an-interesting-and-intuitive-view-of-auc-5f6498d87328?source=collection_archive---------15-----------------------#2019-03-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="edfc" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在学习 AUC 之前，你不需要学习 TPR，FPR 和一堆其他的东西。</h2></div><p id="6022" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">AUC，或 ROC 曲线下面积，是一种广泛用于评估模型性能的指标。</p><p id="4690" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">网上有一堆关于 AUC 的资源。他们通常从向读者解释真阳性、敏感性、I 型、II 型错误和 FPR 等开始。他们中的许多人都很好，他们详细解释了概念，但一些概念可能会让一些没有分析背景的人感到困惑。我想在这里指出的是，<strong class="kh ir">一个人实际上可以在不知道所有这些专业术语的情况下学好 AUC</strong>。</p><p id="b7b3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我用一个简单的例子来说明如何做。</p><p id="f84c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设一家信用卡公司建立了一个风险评分模型来评估客户是否能够按时支付账单。他们拥有的数据被标记，1 表示客户<strong class="kh ir">不能</strong>按时付款(有风险)，0 表示那些按时付款的客户。这是 20 条记录的样本的结果(假设没有重复的分数):</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/00e822ece942c5615da18a1a4d96275e.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*S4Ksy_tq9R_hMznLvvL1SQ.png"/></div></figure><p id="2a83" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们看看如何从这 20 条记录中画出 ROC 曲线。我们先画一个正方形，左下角为(0，0)，右上角为(1，1):</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/80cfd695b9f183ef3e9fe99a61e20e29.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/1*INnTfptdzzPi5uOhRQLu0Q.png"/></div></figure><p id="7da0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，在这 20 个记录中，我们有 5 个 1 和 15 个 0，所以我们将 y 轴除以 5，x 轴除以 15:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/deb0a003cb58acb17b56a79cfba6e60a.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*ZeB_lC8lAyxyQabKJT5Plg.png"/></div></figure><p id="e042" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，从高分到低分，对应的标签是 1，1，0，1，0，0，…，我们把 1 换成'上'，把 0 换成'右'，就会得到一个新的序列:上，上，右，上，右…然后从(0，0)开始，根据这些'上'和'右'画出你的曲线。一上(或右)，一招。这是 ROC 曲线。它下面的区域是 AUC。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi ll"><img src="../Images/55dde4bc388318b902f059fcbd6ea301.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*d4vRIXDQeU_PHMvoObLmLw.png"/></div></div></figure><p id="704a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们用一个完美的模型来比较一下。在一个完美的模型中，任何“1”都将比任何“0”有更高的分数。因此，从高分到低分，相应的标签将是 1，1，1，1，0，0，0，0，…并且 ROC 将是</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lq"><img src="../Images/6703d78f2a66438b195f094f0c647a0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*8N5aqg59237VBs0A55yTvg.png"/></div></div></figure><p id="5a4e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">AUC 是 1。一些观察结果:</p><ul class=""><li id="6b99" class="lr ls iq kh b ki kj kl km ko lt ks lu kw lv la lw lx ly lz bi translated">为了提高 AUC，你需要在“正确”之前出现更多的“向上”。</li><li id="fb01" class="lr ls iq kh b ki ma kl mb ko mc ks md kw me la lw lx ly lz bi translated">这意味着，“1”需要在“0”之前。</li><li id="3a83" class="lr ls iq kh b ki ma kl mb ko mc ks md kw me la lw lx ly lz bi translated">这意味着，模型给予目标(标签为 1 的记录)更高的分数，因此模型更好。</li><li id="c531" class="lr ls iq kh b ki ma kl mb ko mc ks md kw me la lw lx ly lz bi translated">AUC 介于 0 和 1 之间。</li><li id="8339" class="lr ls iq kh b ki ma kl mb ko mc ks md kw me la lw lx ly lz bi translated">AUC 是一个排名指标(重要的是得分顺序，而不是得分值本身)。</li></ul><p id="d1e2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在深入研究 ROC 的其他属性之前，我想展示几个特例。</p><h1 id="7f31" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">更多示例</h1><p id="c880" class="pw-post-body-paragraph kf kg iq kh b ki mx jr kk kl my ju kn ko mz kq kr ks na ku kv kw nb ky kz la ij bi translated">1.得分相等。让我们稍微改变一下前面的例子，得到相同的分数。在这一组(得分 70)，我们有三个 0 和一个 1。我们要做的修改是将三个“右”和一个“上”合并成一个动作。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi nc"><img src="../Images/346ee01690df5eae1ad4755ba5b84280.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/format:webp/1*PKDyak-x2vzc3Q2FGO8vjA.png"/></div></div></figure><p id="cb32" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">新的 ROC 是</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/8cbea4e41f7e754401916b73bffb6897.png" data-original-src="https://miro.medium.com/v2/resize:fit:662/format:webp/1*6DYtJryKT_8aPXj4MNBpOQ.png"/></div></figure><p id="5b21" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，如果所有分数相等，ROC 将正好是 x=y (AUC = 0.5)线。</p><p id="c06b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2.随机猜测。当记录以随机顺序分配时，ROC 曲线将在 x=y 附近波动，AUC 在 0.5 左右。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/f06d43199925501358d91a7489429464.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/format:webp/1*S5GVvVwaw6drT5OTcNY2_w.png"/></div></figure><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/76ee6d806405cca95e296ac4986c1979.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/format:webp/1*EQqOgHIY64RjQy3ccKnsxw.png"/></div></figure><p id="9e75" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">3.逆转比分。如果我们颠倒分数顺序和最开始的例子，我们将得到一条关于点(0.5，0.5)对称于原始 ROC 曲线的新 ROC 曲线[关于线 x=y 不对称！].新的 AUC 是 1 减去原始 AUC。这就是为什么人们说当我们有一个 AUC &lt;0.5 的模型时，我们可以执行这个分数反转技巧来获得一个更好的模型。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/fe65062bf27c86d397a2e790cb193044.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*qznvzkR_UacEMWnZ_z0NOA.png"/></div></figure><p id="0584" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在让我们看看我们还能从 ROC 曲线中提取什么信息。</p><h1 id="f11b" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">性能</h1><ol class=""><li id="9b46" class="lr ls iq kh b ki mx kl my ko ng ks nh kw ni la nj lx ly lz bi translated">割线斜率越高，标记率越高(1 的数量与一个组中记录的总数之比)。在下面的示例中，选择了两个分数组，分数高的组具有较高的标记率，因此割线斜率也较高。</li></ol><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/ee16485b42fbde5ca12141e4027a3992.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*2LvGSZncmrhsA5kI_pstrA.png"/></div></figure><p id="3bff" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2.凹度。通常，由好的 ML 算法生成的结果的 ROC 曲线在整个域中是向下凹的。但是，如果不幸的是，您有一条在子区间上向上凹的曲线，您可以在该特定区间反转分数以提高性能(并且建议您还检查建模数据)。</p><p id="ae9a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">3.高分区域/低分区域。下面的绿色方框包含高分记录的信息，橙色方框包含低分记录的信息。在绿色区域，我们希望割线斜率较大；在橙色区域，斜率越小越好。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/ea13a97fb2155db6890903f61473b73b.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*KR-8EKsvK4TMgt4ye2uBkg.png"/></div></figure><p id="a246" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">AUC 不是我们衡量排名模型表现的唯一方式。有时，我们只关注模型在高分区域是否表现良好。</p><p id="4250" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">AUC 低的模型仍然有价值。例如，下面 ROC 曲线的 AUC 只有~0.64，但是它在高分记录上有很好的表现。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/fdfd4070a5159d0adcdb7ff7d59e5493.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*Hdk2To9Mg_Vz3X1I8RH-Ag.png"/></div></figure><p id="f60a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">4.模特合奏。当我们在同一个数据集上有多个模型，并且 roc 的形状不同(有些在高分区域很好，有些在低分区域很好)时，我们通常可以通过组合模型(打包或堆叠)来找到值。</p></div></div>    
</body>
</html>