<html>
<head>
<title>Real-time Twitter Sentiment Analysis for Brand Improvement and Topic Tracking (Chapter 3/3)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于品牌改进和话题跟踪的实时 Twitter 情感分析(第 3/3 章)</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/real-time-twitter-sentiment-analysis-for-brand-improvement-and-topic-tracking-chapter-3-3-3b61b0f488c0?source=collection_archive---------6-----------------------#2019-09-20">https://towardsdatascience.com/real-time-twitter-sentiment-analysis-for-brand-improvement-and-topic-tracking-chapter-3-3-3b61b0f488c0?source=collection_archive---------6-----------------------#2019-09-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="238f" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">行业中的数据科学</h2><div class=""/><div class=""><h2 id="3c29" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">使用 Python 中的 Dash &amp; Plotly 在 Heroku 上部署一个实时 Twitter 分析 Web 应用程序</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/5b9b8bdb70488592a7ddfee1b8256e37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*b-In2uD9p1bJ1_Se"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by <a class="ae le" href="https://unsplash.com/@kalenemsley?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kalen Emsley</a> on <a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a747" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">本教程将教你 1)如何在<a class="ae le" href="https://www.heroku.com" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja"> Heroku </strong> </a>云应用平台上部署所有<strong class="lh ja">数据分析</strong>，以及 2)如何使用 Python 中的<strong class="lh ja"> Dash </strong>将基于<strong class="lh ja"> Plotly </strong>的数据可视化迁移到<strong class="lh ja">分析仪表板 web 应用</strong>。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mb"><img src="../Images/31b488cada146cc088031ad457da5918.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*mPZ0eqG1LYCRl5m0sm75tQ.gif"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk"><a class="ae le" href="https://twitter-analysis-web-app.herokuapp.com" rel="noopener ugc nofollow" target="_blank">https://twitter-analysis-web-app.herokuapp.com</a></figcaption></figure><p id="76a0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">注</strong> : <strong class="lh ja">实时 Twitter 数据收集</strong>和<strong class="lh ja">数据分析&amp;情感分析</strong>在前面章节已经完成。</p><ul class=""><li id="598a" class="mc md iq lh b li lj ll lm lo me ls mf lw mg ma mh mi mj mk bi translated"><a class="ae le" href="http://bit.ly/2Zohn01" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja">第 1 章</strong> </a> <strong class="lh ja"> : </strong>使用 Tweepy、MySQL、&amp; Python 的流 Twitter API 收集 Twitter 数据</li><li id="d2b2" class="mc md iq lh b li ml ll mm lo mn ls mo lw mp ma mh mi mj mk bi translated"><a class="ae le" href="http://bit.ly/2PzXG5M" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja">第二章</strong> </a> <strong class="lh ja"> : </strong>使用 RE、TextBlob、NLTK 和 Plotly 的 Twitter 情感分析和交互式数据可视化</li><li id="7780" class="mc md iq lh b li ml ll mm lo mn ls mo lw mp ma mh mi mj mk bi translated"><strong class="lh ja">第三章(你来了！):</strong>使用 Python 中的 Dash &amp; Plotly 在 Heroku 上部署一个实时 Twitter 分析 Web 应用程序</li><li id="467d" class="mc md iq lh b li ml ll mm lo mn ls mo lw mp ma mh mi mj mk bi translated"><strong class="lh ja">第 4 章</strong>(可选)<strong class="lh ja"> : </strong>使用 Scala、Kafka 和 Spark Streaming 实现流媒体 Twitter 情感分析的并行化</li></ul><h2 id="45f1" class="mq mr iq bd ms mt mu dn mv mw mx dp my lo mz na nb ls nc nd ne lw nf ng nh iw bi translated">为什么是 Dash？</h2><ul class=""><li id="e934" class="mc md iq lh b li ni ll nj lo nk ls nl lw nm ma mh mi mj mk bi translated"><a class="ae le" href="https://dash.plot.ly" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja"> Dash </strong> </a>是一个用于构建 web 应用程序的高效 Python 框架。Dash 基于<a class="ae le" href="http://flask.palletsprojects.com/en/1.1.x/" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja"> Flask </strong> </a>、<a class="ae le" href="https://plot.ly/javascript/" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja"> Plotly.js </strong> </a>和<a class="ae le" href="https://reactjs.org" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja"> React.js </strong> </a>编写，非常适合用纯 Python 构建具有高度定制用户界面的数据可视化应用。</li><li id="0672" class="mc md iq lh b li ml ll mm lo mn ls mo lw mp ma mh mi mj mk bi translated"><a class="ae le" href="https://dash.plot.ly/dash-core-components" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja"> Dash 核心组件</strong></a><strong class="lh ja">【DCC】</strong>为交互用户界面提供<strong class="lh ja"> </strong>增压组件。</li><li id="426d" class="mc md iq lh b li ml ll mm lo mn ls mo lw mp ma mh mi mj mk bi translated"><a class="ae le" href="https://dash.plot.ly/dash-html-components" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja"> Dash Html 组件</strong> </a> <strong class="lh ja"> (html) </strong>围绕 Html、CSS、JavaScript 提供纯 Python 抽象。</li></ul><h2 id="724b" class="mq mr iq bd ms mt mu dn mv mw mx dp my lo mz na nb ls nc nd ne lw nf ng nh iw bi translated"><strong class="ak">为什么是 Heroku？</strong></h2><ul class=""><li id="75f0" class="mc md iq lh b li ni ll nj lo nk ls nl lw nm ma mh mi mj mk bi translated"><a class="ae le" href="https://www.heroku.com" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja"> Heroku </strong> </a>是一个平台即服务(PaaS)，使开发者能够完全在云中构建、运行和操作应用。</li></ul><p id="4a04" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为了运行实时 twitter 监控系统，我们将使用两个脚本(或者两个 dynos，或者两个 app)。一个用于<strong class="lh ja">采集流数据</strong>，另一个用于<strong class="lh ja">数据分析和实时可视化</strong>。在处理高吞吐量的 Twitter 文本数据时，这种方法可以有效地减少数据管道的延迟。</p></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><h2 id="2080" class="mq mr iq bd ms mt mu dn mv mw mx dp my lo mz na nb ls nc nd ne lw nf ng nh iw bi translated"><strong class="ak">创建 Heroku 账号&amp;设置环境</strong></h2><p id="dde3" class="pw-post-body-paragraph lf lg iq lh b li ni ka lk ll nj kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">这部分是写给初学者如何从头开始建立新的 Heroku 应用程序环境。如果你熟悉 Heroku 平台，你可以考虑跳过这一部分。</p><p id="e84b" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">两份<strong class="lh ja">重要</strong>部署指南供参考:</p><ul class=""><li id="e807" class="mc md iq lh b li lj ll lm lo me ls mf lw mg ma mh mi mj mk bi translated">Dash App 部署指南:<a class="ae le" href="https://dash.plot.ly/deployment" rel="noopener ugc nofollow" target="_blank">https://dash.plot.ly/deployment</a></li><li id="5427" class="mc md iq lh b li ml ll mm lo mn ls mo lw mp ma mh mi mj mk bi translated">Heroku 部署指南:<a class="ae le" href="https://devcenter.heroku.com/articles/git" rel="noopener ugc nofollow" target="_blank">https://devcenter.heroku.com/articles/git</a></li></ul><p id="2435" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">在<a class="ae le" href="https://www.heroku.com" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja"> Heroku:云应用平台</strong> </a>上注册</strong>你的账号</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nx"><img src="../Images/f4b35e23f1eefaed322b5b8b739c53f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*We1A1mKWnZfGFRN0_ID-wQ.png"/></div></div></figure><p id="4c3c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">查看您的电子邮件</strong>确认您的帐户，然后<strong class="lh ja">登录</strong> Heroku 平台。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ny"><img src="../Images/08b82ebd085c2dfb120fc6dd3d2923ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YvJ-4_0kwZWa__fptNDI7A.png"/></div></div></figure><p id="2cc3" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">点击<strong class="lh ja">新建</strong>按钮<strong class="lh ja">创建新的 app </strong>。应用程序名称必须是唯一的，因为应用程序发布后，每个人都可以通过该名称访问 web 应用程序。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nx"><img src="../Images/960638538868f313c2c4f5b62112630d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y-EWmKE8hH3AP0qzx2yGvQ.png"/></div></div></figure><h2 id="97d5" class="mq mr iq bd ms mt mu dn mv mw mx dp my lo mz na nb ls nc nd ne lw nf ng nh iw bi translated">1.安装 Heroku CLI</h2><p id="9180" class="pw-post-body-paragraph lf lg iq lh b li ni ka lk ll nj kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">首先下载并安装<a class="ae le" href="https://devcenter.heroku.com/articles/heroku-command-line" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja"> Heroku CLI </strong> </a>。Heroku 命令行界面(CLI)是一个基本组件，允许我们通过终端创建和管理 Heroku 应用程序。</p><p id="cd85" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">然后，登录您的 Heroku 帐户，按照提示创建一个新的 SSH 公钥。</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="1f79" class="mq mr iq oa b gy oe of l og oh">$ heroku login</span></pre><h2 id="ed88" class="mq mr iq bd ms mt mu dn mv mw mx dp my lo mz na nb ls nc nd ne lw nf ng nh iw bi translated">2.创建一个新的<strong class="ak"> Git </strong>仓库</h2><p id="de47" class="pw-post-body-paragraph lf lg iq lh b li ni ka lk ll nj kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">Heroku 使用 Git 对应用程序的开发进行版本控制。</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="97ef" class="mq mr iq oa b gy oe of l og oh">$ mkdir Real-time-Twitter-Monitoring-System<br/>$ cd Real-time-Twitter-Monitoring-System</span></pre><h2 id="e863" class="mq mr iq bd ms mt mu dn mv mw mx dp my lo mz na nb ls nc nd ne lw nf ng nh iw bi translated">2.用<code class="fe oi oj ok oa b">git</code>和<code class="fe oi oj ok oa b">virtualenv</code>初始化文件夹</h2><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="4f5a" class="mq mr iq oa b gy oe of l og oh">$ git init        <em class="ol"># initializes an empty git repo </em><br/>$ virtualenv venv <em class="ol"># creates a virtualenv called "venv" </em><br/>$ source venv/bin/activate <em class="ol"># uses the virtualenv</em><br/>$ Heroku git: remote -a <strong class="oa ja">THIS-IS-YOUR-APP-NAME</strong></span></pre><p id="1045" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe oi oj ok oa b">virtualenv</code>创建一个新的 Python 实例。你将需要使用此虚拟重新安装你的应用的依赖项新:</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="cfd9" class="mq mr iq oa b gy oe of l og oh">$ pip install dash <br/>$ pip install plotly<br/>$ pip install gunicorn</span></pre><p id="8e16" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">注意:<code class="fe oi oj ok oa b">gunicorn</code>是部署 app 的新依赖项。</p><h2 id="b3e2" class="mq mr iq bd ms mt mu dn mv mw mx dp my lo mz na nb ls nc nd ne lw nf ng nh iw bi translated">3.设置几个必需的文件</h2><p id="4955" class="pw-post-body-paragraph lf lg iq lh b li ni ka lk ll nj kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">用一个示例应用程序(<code class="fe oi oj ok oa b">app.py</code>)、一个<code class="fe oi oj ok oa b">.gitignore</code>文件、<code class="fe oi oj ok oa b">requirements.txt</code>和一个<code class="fe oi oj ok oa b">Procfile</code>来初始化文件夹，以便进行部署</p><p id="090f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">一、创建一个名为</strong> <code class="fe oi oj ok oa b"><strong class="lh ja">app.py</strong></code> <strong class="lh ja">的文件，填写样例演示代码。</strong></p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="d52c" class="mq mr iq oa b gy oe of l og oh"># Simple demo app only<br/>import dash<br/>app = dash.Dash(__name__)<br/>server = app.server # the Flask app</span></pre><p id="afd7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">二。创建</strong> <code class="fe oi oj ok oa b"><strong class="lh ja">.gitignore</strong></code></p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="7404" class="mq mr iq oa b gy oe of l og oh">venv<br/>*.pyc<br/>.DS_Store<br/>.env</span></pre><p id="93ff" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">三世。创建</strong>和<code class="fe oi oj ok oa b"><strong class="lh ja">Procfile</strong></code></p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="1b4f" class="mq mr iq oa b gy oe of l og oh">web: gunicorn app:server</span></pre><p id="8c47" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">(注意<code class="fe oi oj ok oa b">app</code>指的是文件名<code class="fe oi oj ok oa b">app.py</code>。<code class="fe oi oj ok oa b">server</code>是指该文件内的变量<code class="fe oi oj ok oa b">server</code>。</p><p id="1728" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">四。创建</strong>和<code class="fe oi oj ok oa b"><strong class="lh ja">requirements.txt</strong></code></p><p id="0802" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">然后让我们添加这个长依赖项。注意:其中一些可能不会直接使用，但在您尝试调整应用程序时会很有用。</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="11d8" class="mq mr iq oa b gy oe of l og oh">Click==7.0<br/>dash==1.1.1<br/>dash-core-components==1.1.1<br/>dash-html-components==1.0.0<br/>dash-renderer==1.0.0<br/>dash-table==4.1.0<br/>Flask==1.1.1<br/>Flask-Compress==1.4.0<br/>gunicorn==19.9.0<br/>itsdangerous==1.1.0<br/>Jinja2==2.10.1<br/>MarkupSafe==1.1.1<br/>plotly==4.1.0<br/>PyYAML==5.1.2<br/>retrying==1.3.3<br/>six==1.12.0<br/>Werkzeug==0.15.5<br/>pandas==0.25.0<br/>nltk==3.4.4<br/>textblob==0.15.2<br/>tweepy==3.8.0<br/>psycopg2-binary==2.8.3<br/>Flask==1.1.1</span></pre><h2 id="ebc9" class="mq mr iq bd ms mt mu dn mv mw mx dp my lo mz na nb ls nc nd ne lw nf ng nh iw bi translated">4.部署应用程序</h2><p id="897e" class="pw-post-body-paragraph lf lg iq lh b li ni ka lk ll nj kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">初始化 Heroku app，向 repo 添加并提交代码，使用 Git 推送到 Heroku cloud。</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="3f39" class="mq mr iq oa b gy oe of l og oh">$ heroku create <strong class="oa ja">THIS-IS-YOUR-UNIQUE-APP-NAME</strong><br/>$ git add .<br/>$ git commit -m 'Initial the app' <br/>$ git push heroku master # deploy code to heroku </span></pre><p id="e2e8" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">Heroku cloud 应该已经在一开始为你设置了一个<strong class="lh ja"> dyno </strong>，一个运行你的应用的集群。如果没有，则手动创建一个 dyno。</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="ef04" class="mq mr iq oa b gy oe of l og oh">$ heroku ps:scale web=1  # run the app with a 1 heroku "dyno"</span></pre><h2 id="fc52" class="mq mr iq bd ms mt mu dn mv mw mx dp my lo mz na nb ls nc nd ne lw nf ng nh iw bi translated">5.更新代码并重新部署</h2><p id="1cfd" class="pw-post-body-paragraph lf lg iq lh b li ni ka lk ll nj kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">为了将来在 Heroku cloud 上更新我们的应用程序，我们只需要添加、提交并再次推送我们的新代码。</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="fe69" class="mq mr iq oa b gy oe of l og oh">$ git status # view the changes <br/>$ git add .<br/>$ git commit -m 'a description of the changes' <br/>$ git push heroku master</span></pre><p id="5a2c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">现在我们需要写一些真正的代码。</p></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi om"><img src="../Images/e25eed32bd4d18a45c23003bb9fcf461.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*chu8o5e5iGo-EgQs"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by <a class="ae le" href="https://unsplash.com/@jacegrandinetti?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jace &amp; Afsoon</a> on <a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="2a2d" class="mq mr iq bd ms mt mu dn mv mw mx dp my lo mz na nb ls nc nd ne lw nf ng nh iw bi translated"><strong class="ak">将数据分析&amp;可视化从 Plotly 迁移到 Dash </strong></h2><p id="ded9" class="pw-post-body-paragraph lf lg iq lh b li ni ka lk ll nj kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">为了将我们上一章的数据可视化放到 Heroku 应用程序上，我们需要用 Dash 框架包装我们基于 Plotly 的仪表板。所有的数据分析和可视化都将在文件<code class="fe oi oj ok oa b"><strong class="lh ja">app.py</strong></code> <strong class="lh ja"> </strong>中进行处理，您可以在这里 查看我的<strong class="lh ja">完整代码</strong>。</p><p id="6c8f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">从一个新的应用服务器开始，使用 Dash 默认 CSS 表。注意:我推荐使用<a class="ae le" href="https://getbootstrap.com" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja"> Bootstrap </strong> </a>来改善 web app 的外观。</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="522c" class="mq mr iq oa b gy oe of l og oh">external_stylesheets=['https://codepen.io/chriddyp/pen/bWLwgP.css'] app = dash.Dash(__name__, external_stylesheets=external_stylesheets)<br/>app.title = 'Real-Time Twitter Monitor'</span><span id="df7a" class="mq mr iq oa b gy on of l og oh">server = app.server</span></pre><p id="671d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">Dash web app 的核心框架是使用<strong class="lh ja"> app.layout </strong>作为背景布局。<strong class="lh ja">注意</strong>:点击下面的<strong class="lh ja">两个链接</strong>了解它们是如何工作的，并检查一些典型样品，因为它们对于使用 Dash<strong class="lh ja">非常重要</strong>。</p><ul class=""><li id="be78" class="mc md iq lh b li lj ll lm lo me ls mf lw mg ma mh mi mj mk bi translated"><a class="ae le" href="https://dash.plot.ly/getting-started" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja">破折号布局</strong> </a>允许我们显示集成的数据可视化以及其他文本描述。</li><li id="7a1b" class="mc md iq lh b li ml ll mm lo mn ls mo lw mp ma mh mi mj mk bi translated"><a class="ae le" href="https://dash.plot.ly/getting-started-part-2" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja">破折号回调</strong> </a>使应用程序能够用实时数据一致地更新一切。</li></ul><h2 id="1865" class="mq mr iq bd ms mt mu dn mv mw mx dp my lo mz na nb ls nc nd ne lw nf ng nh iw bi translated"><a class="ae le" href="https://dash.plot.ly/getting-started" rel="noopener ugc nofollow" target="_blank">仪表板布局</a></h2><p id="26df" class="pw-post-body-paragraph lf lg iq lh b li ni ka lk ll nj kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">由于<strong class="lh ja"> Dash </strong>构建在<strong class="lh ja"> HTML </strong>之上，它以自己的方式使用 HTML(<strong class="lh ja">Dash HTML 组件</strong>)。但是一些 HTML 特性在 Dash 中是不允许的。</p><p id="bb8c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe oi oj ok oa b">html.Div(id='live-update-graph')</code>描述应用程序中仪表板的<strong class="lh ja">顶部</strong>部分，包括对推文数量和潜在印象的描述。<code class="fe oi oj ok oa b">html.Div(id='live-update-graph-bottom')</code>描述 web app 中仪表板的<strong class="lh ja">底部</strong>部分。</p><p id="b6de" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe oi oj ok oa b">dcc.Interval</code>是允许应用程序定期更新信息的关键。虽然<strong class="lh ja">数据收集器、</strong>将在后面解释，但在另一个 dyno 上<strong class="lh ja">分析仪表板</strong>实时工作，由于利用<strong class="lh ja">聚合数据</strong>进行可视化，并考虑到<strong class="lh ja">的成本效益</strong>，所以只分析和可视化每<strong class="lh ja"> 10 秒</strong>的数据。</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="9266" class="mq mr iq oa b gy oe of l og oh">app.layout = html.Div(children=[    <br/>    <br/>    <em class="ol"># Parts of Title hided</em><br/>    html.H2('This-is-your-tittle'),</span><span id="5ef5" class="mq mr iq oa b gy on of l og oh">    html.Div(id='live-update-graph'),   <br/>    html.Div(id='live-update-graph-bottom'),<br/> <br/>    # Parts of Summary hided<br/>    html.Div( <br/>        dcc.Markdown("Author's Words: ...... ")<br/>    )</span><span id="8d7f" class="mq mr iq oa b gy on of l og oh">    # Timer for updating data per 10 seconds<br/>    dcc.Interval(        <br/>        id='interval-component-slow',<br/>        interval=1*10000, # in milliseconds        <br/>        n_intervals=0    <br/>    )    <br/>     <br/>  ], style={'padding': '20px'})</span><span id="1545" class="mq mr iq oa b gy on of l og oh">}</span></pre><p id="4fe7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">对于 Dash 的 HTML 中的每个 Div，它都有<code class="fe oi oj ok oa b">className</code>、<code class="fe oi oj ok oa b">children</code>和<code class="fe oi oj ok oa b">style</code>。<code class="fe oi oj ok oa b">children</code>是<code class="fe oi oj ok oa b">dcc.Graph</code>(<a class="ae le" href="https://dash.plot.ly/dash-core-components" rel="noopener ugc nofollow" target="_blank"><strong class="lh ja">仪表板核心部件</strong> </a>中的图形)、<code class="fe oi oj ok oa b">dcc.Markdown</code>、<code class="fe oi oj ok oa b">html.Div</code>、<code class="fe oi oj ok oa b">html.H1</code>以及其他交互按钮(如<code class="fe oi oj ok oa b">dcc.Dropdown</code>、<code class="fe oi oj ok oa b">dcc.Slider</code>)的列表。</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="d216" class="mq mr iq oa b gy oe of l og oh">html.Div(<br/>    className='row',        <br/>    children=[             <br/>        dcc.Markdown("..."),     <br/>        <!-- -->dcc.Graph(...),<br/>        <!-- -->html.Div(...)<br/>    ],<br/>    style={'width': '35%', 'marginLeft': 70}    <br/>)</span></pre><p id="85c8" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe oi oj ok oa b">style</code>对于构建良好的布局和确保几个可视化图形之间的适当距离很重要，但调整细节可能很耗时。</p><p id="2dca" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">下面举一个<code class="fe oi oj ok oa b">dcc.Graph</code>的例子(<a class="ae le" href="https://dash.plot.ly/dash-core-components" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja">仪表板核心部件</strong> </a>中的图形)。<code class="fe oi oj ok oa b">dcc.Graph</code>有属性<code class="fe oi oj ok oa b">id</code>和<code class="fe oi oj ok oa b">figure</code>。在<code class="fe oi oj ok oa b">figure</code>下有<code class="fe oi oj ok oa b">'data'</code>，包含 Plotly 中不同种类的图形(如<code class="fe oi oj ok oa b">go.Scatter</code>和<code class="fe oi oj ok oa b">go.Pie</code>),<code class="fe oi oj ok oa b">'layout'</code>，它只是这个图形的布局而不是<code class="fe oi oj ok oa b">app.layout</code>。</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="e394" class="mq mr iq oa b gy oe of l og oh"># import dash_core_components as dcc<br/># import plotly.graph_objs as go</span><span id="f266" class="mq mr iq oa b gy on of l og oh">dcc.Graph(                            <br/>  id='pie-chart',                            <br/>  figure={                                <br/>    'data': [                          <br/>       go.Pie(                                        <br/>         labels=['Positives', 'Negatives', 'Neutrals'],<br/>         values=[pos_num, neg_num, neu_num],                                        <br/>        )                              <br/>     ],<br/>     'layout':{<br/>       'showlegend':False,<br/>       'title':'Tweets In Last 10 Mins',<br/>       'annotations':[<br/>         # ...                                <br/>       ]<br/>     }                             <br/>  }                        <br/>)</span></pre><p id="b7f7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><code class="fe oi oj ok oa b">'<a class="ae le" href="https://plot.ly/python/text-and-annotations/" rel="noopener ugc nofollow" target="_blank"><strong class="lh ja">annotations</strong></a>'</code>是保证当前标签的另一个重要部分。<strong class="lh ja">注意</strong>:<a class="ae le" href="https://plot.ly/python/reference/#layout-annotations" rel="noopener ugc nofollow" target="_blank"><strong class="lh ja">Dash 中标注</strong> </a>的引用相当<strong class="lh ja">、</strong>由于参数可能需要表示为<code class="fe oi oj ok oa b">go.layout.Annotation</code>、一个字典<code class="fe oi oj ok oa b">dict(...)</code>，有时还有一个列表。</p><h2 id="c9c2" class="mq mr iq bd ms mt mu dn mv mw mx dp my lo mz na nb ls nc nd ne lw nf ng nh iw bi translated"><a class="ae le" href="https://dash.plot.ly/getting-started-part-2" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">破折号回调</strong> </a></h2><p id="6653" class="pw-post-body-paragraph lf lg iq lh b li ni ka lk ll nj kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">在 Dash app 布局中，<strong class="lh ja">反应型</strong>和<strong class="lh ja">功能型</strong> Python 回调提供输入和输出之间的连接，允许<strong class="lh ja">可定制的</strong>声明型 ui。</p><p id="c5b6" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">注</strong>:我们<strong class="lh ja">跳过了上一章解释的所有数据分析部分</strong>，尽管可能会有一点点差异(或改进)。因此，我们<strong class="lh ja">直接进入基于 Dash 的数据可视化部分</strong>，它是通过复杂的 Plotly graphs <code class="fe oi oj ok oa b"><strong class="lh ja">plotly.graph_objs</strong></code>实现的(又名<strong class="lh ja"> go </strong>)。</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="f4a9" class="mq mr iq oa b gy oe of l og oh"># Multiple components can update everytime interval gets fired.<br/>@app.callback(<br/>    Output('live-update-graph', 'children'),<br/>    [Input('interval-component-slow', 'n_intervals')]<br/>  )<br/>def update_graph_live(n):</span><span id="11ac" class="mq mr iq oa b gy on of l og oh">  # Lots of nested Div to ensure the proper layout<br/>  # Graphs will be explained later<br/>  # All codes are hided</span><span id="9cd6" class="mq mr iq oa b gy on of l og oh">  return children</span></pre><p id="ee98" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">三个<strong class="lh ja">线图</strong>都使用<code class="fe oi oj ok oa b">go.Scatter</code>和<strong class="lh ja">堆栈组</strong>来确保同一图形中线下的<strong class="lh ja">重叠区域</strong>。</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="31f0" class="mq mr iq oa b gy oe of l og oh"># import plotly.graph_objs as go<br/>go.Scatter(<br/>  x=time_series,<br/>  y=result["Num of A-Brand-Name mentions",<br/>  name="Neutrals",<br/>  opacity=0.8,<br/>  mode='lines',<br/>  line=dict(width=0.5, color='rgb(131, 90, 241)'),<br/>  stackgroup='one'<br/>)</span></pre><p id="2474" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">饼状图</strong>在上面<code class="fe oi oj ok oa b">dcc.Graph</code>的例子中解释过。</p><p id="1650" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">对于<strong class="lh ja">文本描述</strong>(例如每 10 分钟的 Tweet 数量变化)，我们使用两个 HTML 段落来嵌入数据信息。通过比较之前的 10 分钟间隔和当前的 10 分钟间隔，我们可以生成这样的结果。</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="a925" class="mq mr iq oa b gy oe of l og oh">html.P(<br/>  'Tweets/10 Mins Changed By',<br/>  style={'fontSize': 17}<br/>),</span><span id="baa1" class="mq mr iq oa b gy on of l og oh">html.P(<br/>  '{0:.2f}%'.format(percent) if percent &lt;= 0        \<br/>      else '+{0:.2f}%'.format(percent),<br/>  style={'fontSize': 40}<br/>)</span></pre><p id="dc03" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">对于今天的<strong class="lh ja">潜在印象</strong>，我们想知道最多有多少人有机会看到这些推文。通过计算发布这些推文的人的<strong class="lh ja">追随者数量的总和</strong>，我们可以得到潜在的印象。增加一个<strong class="lh ja">动态数字单元</strong>以更好地在非常大的范围内显示该值。</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="ca59" class="mq mr iq oa b gy oe of l og oh">html.P(<br/>  '{0:.1f}K'.format(daily_impressions/1000) \<br/>  if daily_impressions &lt; 1000000 else \<br/>  ('{0:.1f}M'.format(daily_impressions/1000000) <br/>    if daily_impressions &lt; 1000000000 \<br/>    else '{0:.1f}B'.format(daily_impressions/1000000000)),</span><span id="23a4" class="mq mr iq oa b gy on of l og oh">  style={'fontSize': 40}<br/>)</span></pre><p id="6efa" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">通过在每次应用数据更新中存储和累加推文数量，计算每日推文数量<strong class="lh ja">是一种简单的方法。并且该值将在午夜重置为零。</strong></p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="dd14" class="mq mr iq oa b gy oe of l og oh">html.P(<br/>  '{0:.1f}K'.format(daily_tweets_num/1000),<br/>  style={'fontSize': 40}<br/>)</span></pre><p id="50db" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">底部仪表盘的<strong class="lh ja">回调函数</strong>与第一个类似。</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="0390" class="mq mr iq oa b gy oe of l og oh">@app.callback(Output('live-update-graph-bottom', 'children'),<br/>              [Input('interval-component-slow', 'n_intervals')])<br/>def update_graph_bottom_live(n):</span><span id="c1f5" class="mq mr iq oa b gy on of l og oh">  # Lots of nested Div to ensure the proper layout<br/>  # Graphs will be explained later<br/>  # All codes are hided</span><span id="56b6" class="mq mr iq oa b gy on of l og oh">return children</span></pre><p id="ef23" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">最热门话题追踪条形图</strong>。将<code class="fe oi oj ok oa b">orientation</code>设置为水平，以便更好地显示条形和相关的单词名称</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="c46e" class="mq mr iq oa b gy oe of l og oh">go.Bar(<br/>  x=fd["Frequency"].loc[::-1],<br/>  y=fd["Word"].loc[::-1],<br/>  name="Neutrals",<br/>  orientation='h',<br/>  marker_color=fd['Marker_Color'].loc[::-1].to_list(),<br/>  marker=dict(<br/>    line=dict(<br/>      color=fd['Line_Color'].loc[::-1].to_list(),<br/>      width=1<br/>    ),<br/>  )<br/>)</span></pre><p id="25c8" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">通过设置<code class="fe oi oj ok oa b">'layout': {'geo':{'scope':'usa'}}</code>将范围聚焦在<strong class="lh ja">州级地图</strong>上</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="6249" class="mq mr iq oa b gy oe of l og oh">go.Choropleth(<br/>  locations=geo_dist['State'], # Spatial coordinates<br/>  z = geo_dist['Log Num'].astype(float), # Color-coded data<br/>  locationmode = 'USA-states',<br/>  text=geo_dist['text'], # hover text<br/>  geo = 'geo',<br/>  colorbar_title = "Num in Log2",<br/>  marker_line_color='white',<br/>  colorscale = ["#fdf7ff", "#835af1"]<br/>)</span></pre><p id="482f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">为了<strong class="lh ja">在一行中并行多个图形</strong>，您可以考虑使用以下。<code class="fe oi oj ok oa b">width</code>应该是 1/N 百分比(N =图形数量)，我们可以减去 1%以给出图形之间足够的间隙。</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="fe49" class="mq mr iq oa b gy oe of l og oh">style={'display': 'inline-block', 'width': '33%'}</span></pre></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oo"><img src="../Images/f559bd8f40f9742d994420318ac08bd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KuO4S2zy3gq3fz5D"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by <a class="ae le" href="https://unsplash.com/@bantersnaps?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Banter Snaps</a> on <a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="f252" class="mq mr iq bd ms mt mu dn mv mw mx dp my lo mz na nb ls nc nd ne lw nf ng nh iw bi translated">实现实时 Twitter 数据收集器</h2><p id="ab98" class="pw-post-body-paragraph lf lg iq lh b li ni ka lk ll nj kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">为了在不支付的情况下运行另一个与 web(用于互联网连接)<strong class="lh ja">连接的脚本，我们需要<strong class="lh ja">设置另一个应用</strong>，除了<code class="fe oi oj ok oa b">app.py</code>和<code class="fe oi oj ok oa b">gunicorn</code>之外，配置完全相同。或者你可以花钱买一个新的 dyno 在原来的应用程序中运行。</strong></p><p id="da59" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">注意</strong>:由于两个应用程序的消耗，免费计划每月只能运行<strong class="lh ja">大约 3 周</strong>，如果 30 分钟不活动，web 应用程序可能会休眠，尽管数据收集器不会。</p><ol class=""><li id="8286" class="mc md iq lh b li lj ll lm lo me ls mf lw mg ma op mi mj mk bi translated">在新应用程序中创建一个新的应用服务器<code class="fe oi oj ok oa b">scraping_server.py</code>，并在下面添加。</li></ol><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="ced9" class="mq mr iq oa b gy oe of l og oh">from os import environ<br/>from flask import Flask</span><span id="54d1" class="mq mr iq oa b gy on of l og oh">app = Flask(__name__)<br/>app.run(environ.get('PORT'))</span></pre><p id="4108" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">2.在新应用程序中创建一个数据采集器文件<code class="fe oi oj ok oa b">scraping.py</code>，该文件与第 1 章中的<a class="ae le" href="http://bit.ly/2Zohn01" rel="noopener ugc nofollow" target="_blank">文件非常相似。然而，这次我们将使用</a><a class="ae le" href="https://www.heroku.com/postgres" rel="noopener ugc nofollow" target="_blank"><strong class="lh ja">Heroku PostgreSQL</strong></a>而不是 MySQL，这也要求我们对 SQL 查询进行一点点更新。您可以在这里查看<a class="ae le" href="https://github.com/Chulong-Li/Real-time-Sentiment-Tracking-on-Twitter-for-Brand-Improvement-and-Trend-Recognition/blob/master/dash_app/scraping.py" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja">代码</strong> </a>。</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="e5ec" class="mq mr iq oa b gy oe of l og oh"># Due to the similar code, check <a class="ae le" href="http://bit.ly/2Zohn01" rel="noopener ugc nofollow" target="_blank">Chapter 1</a> for detailed explanation.</span></pre><p id="764e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">3.移除<code class="fe oi oj ok oa b">app.py</code>，更新<code class="fe oi oj ok oa b">gunicorn</code>如下。</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="5b16" class="mq mr iq oa b gy oe of l og oh">worker: python scraping.py<br/>web: python scraping_server.py</span></pre><p id="a25a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja">*注意:</strong>别忘了创建<code class="fe oi oj ok oa b">credentials.py</code>和<code class="fe oi oj ok oa b">settings.py</code>，就像第一章中的<a class="ae le" href="http://bit.ly/2Zohn01" rel="noopener ugc nofollow" target="_blank">一样。</a></p><h2 id="0a4c" class="mq mr iq bd ms mt mu dn mv mw mx dp my lo mz na nb ls nc nd ne lw nf ng nh iw bi translated">通过 Heroku PostgreSQL 连接两个服务器/脚本/dyno</h2><p id="1abf" class="pw-post-body-paragraph lf lg iq lh b li ni ka lk ll nj kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">要<strong class="lh ja">在应用程序之间共享</strong>同一个 Postgres 数据库，请遵循本<a class="ae le" href="https://devcenter.heroku.com/articles/heroku-postgresql#sharing-heroku-postgres-between-applications" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja">指南</strong> </a>:</p><pre class="kp kq kr ks gt nz oa ob oc aw od bi"><span id="493e" class="mq mr iq oa b gy oe of l og oh">$ heroku addons:attach my-originating-app::DATABASE --app sushi</span></pre></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><h2 id="a48d" class="mq mr iq bd ms mt mu dn mv mw mx dp my lo mz na nb ls nc nd ne lw nf ng nh iw bi translated">新方法:</h2><p id="b171" class="pw-post-body-paragraph lf lg iq lh b li ni ka lk ll nj kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">Heroku 现在允许一个新的<strong class="lh ja">数据管道</strong>特性，所以你可以考虑利用这个优势，而不是使用我的两个应用程序连接一个 PostgreSQL 的方法。</p><h2 id="5c72" class="mq mr iq bd ms mt mu dn mv mw mx dp my lo mz na nb ls nc nd ne lw nf ng nh iw bi translated">作者的话:</h2><p id="f3b8" class="pw-post-body-paragraph lf lg iq lh b li ni ka lk ll nj kd ln lo nu lq lr ls nv lu lv lw nw ly lz ma ij bi translated">感谢阅读！针对我的实时 Twitter 监控系统的这一系列文章已经结束，但是新技术的开发不会停止。第 4 章将在 10 月份作为独立文章发表。希望下次能见到你！</p></div></div>    
</body>
</html>