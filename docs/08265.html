<html>
<head>
<title>Take your Machine Learning Models to Production with these 5 simple steps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过这 5 个简单的步骤将您的机器学习模型投入生产</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/take-your-machine-learning-models-to-production-with-these-5-simple-steps-35aa55e3a43c?source=collection_archive---------16-----------------------#2019-11-11">https://towardsdatascience.com/take-your-machine-learning-models-to-production-with-these-5-simple-steps-35aa55e3a43c?source=collection_archive---------16-----------------------#2019-11-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/68f1af77e4f6cb30e8fca70fe9ba1235.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UzqLZ7uS87GGOjeNCtw0ig.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Image by <a class="ae jg" href="https://pixabay.com/users/lumix2004-3890388/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1873078" rel="noopener ugc nofollow" target="_blank">lumix2004</a> from <a class="ae jg" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1873078" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><div class=""/><div class=""><h2 id="e33e" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">或者为什么机器学习项目会失败？</h2></div><blockquote class="ky"><p id="dd1a" class="kz la jj bd lb lc ld le lf lg lh li dk translated">创建一个伟大的机器学习系统是一门艺术。</p></blockquote><p id="16fe" class="pw-post-body-paragraph lj lk jj ll b lm ln kk lo lp lq kn lr ls lt lu lv lw lx ly lz ma mb mc md li im bi translated">在构建一个伟大的机器学习系统时，有很多事情需要考虑。但是经常发生的是，我们作为数据科学家只担心项目的某些部分。</p><p id="528b" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">但是我们有没有想过一旦有了模型，我们将如何部署它们？T3】</p><p id="a040" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">我见过很多 ML 项目，其中很多注定要失败，因为他们从一开始就没有一套生产计划。</p><p id="d855" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">这篇文章是关于一个成功的 ML 项目的过程需求——一个走向生产的项目。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="ae4d" class="mr ms jj bd mt mu mv mw mx my mz na nb kp nc kq nd ks ne kt nf kv ng kw nh ni bi translated">1.开始时建立基线</h1><p id="926d" class="pw-post-body-paragraph lj lk jj ll b lm nj kk lo lp nk kn lr ls nl lu lv lw nm ly lz ma nn mc md li im bi translated">你真的不需要有一个模型来获得基线结果。</p><p id="16f7" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">假设我们将使用 RMSE 作为时间序列模型的评估指标。我们在测试集上评估了该模型，RMSE 为 3.64。</p><p id="9aa3" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">3.64 是好的 RMSE 吗？我们怎么知道？我们需要一个基线 RMSE。</p><p id="aae2" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">这可能来自同一任务的当前采用的模型。或者通过使用一些非常简单的启发式方法。对于时间序列模型，要克服的基线是最后一天的预测。即预测前一天的数字。</p><p id="e147" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">或者图像分类任务怎么样。取 1000 个带标签的样本，由人类对它们进行分类。人类的准确性可以作为你的基准。如果一个人不能在任务中获得 70%的预测准确率，如果你的模型达到类似的水平，你总是可以考虑自动化一个过程。</p><p id="b34b" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated"><strong class="ll jk"> <em class="mj">学习</em> </strong>:在你创建模型之前，试着意识到你将要得到的结果。设定一些超出世界范围的期望只会让你和你的客户失望。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="439e" class="mr ms jj bd mt mu mv mw mx my mz na nb kp nc kq nd ks ne kt nf kv ng kw nh ni bi translated">2.持续集成是前进的方向</h1><figure class="np nq nr ns gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi no"><img src="../Images/bffca35d35026147e1f831c5dfcc957b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HZydwjj1Iqa-pCvY.jpg"/></div></div></figure><p id="a088" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">现在您已经创建了您的模型。在您的本地测试数据集上，它比基线/您的当前模型表现得更好。我们应该前进吗？</p><p id="f428" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">我们有两个选择-</p><ol class=""><li id="15a8" class="nt nu jj ll b lm me lp mf ls nv lw nw ma nx li ny nz oa ob bi translated">不断改进我们的模型。</li><li id="9ae8" class="nt nu jj ll b lm oc lp od ls oe lw of ma og li ny nz oa ob bi translated">在生产环境中测试我们的模型，获得更多关于可能出错的信息，然后通过<strong class="ll jk"> <em class="mj">持续集成继续改进我们的模型。</em>T11】</strong></li></ol><p id="69ad" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">我支持第二种方法。在 Coursera <a class="ae jg" href="https://click.linksynergy.com/deeplink?id=lVarvwc5BD0&amp;mid=40328&amp;murl=https%3A%2F%2Fwww.coursera.org%2Fspecializations%2Fdeep-learning" rel="noopener ugc nofollow" target="_blank">深度学习专业</a>的第三门名为《构建机器学习项目》的课程中，吴恩达说</p><blockquote class="oh oi oj"><p id="b616" class="lj lk mj ll b lm me kk lo lp mf kn lr ok mg lu lv ol mh ly lz om mi mc md li im bi translated">“不要一开始就试图设计和构建完美的系统。相反，快速建立和训练一个基本系统——也许只需要几天。即使基本系统远非你所能构建的“最佳”系统，考察基本系统的运行方式也是有价值的:你会很快找到线索，向你展示最有希望投入时间的方向。</p></blockquote><blockquote class="ky"><p id="6ace" class="kz la jj bd lb lc ld le lf lg lh li dk translated">完成比完美更好。</p></blockquote><p id="333c" class="pw-post-body-paragraph lj lk jj ll b lm ln kk lo lp lq kn lr ls lt lu lv lw lx ly lz ma mb mc md li im bi translated"><strong class="ll jk"> <em class="mj">学习</em> </strong>:如果你的新模型比生产中的当前模型更好或者你的新模型比基线更好，那么等着去生产是没有意义的。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="a927" class="mr ms jj bd mt mu mv mw mx my mz na nb kp nc kq nd ks ne kt nf kv ng kw nh ni bi translated">3.您的模型可能会投入生产</h1><p id="4c08" class="pw-post-body-paragraph lj lk jj ll b lm nj kk lo lp nk kn lr ls nl lu lv lw nm ly lz ma nn mc md li im bi translated">你的模型比基线好吗？它在本地测试数据集上表现得更好，但是它在整体上真的工作得很好吗？</p><p id="6276" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">为了测试你的模型优于现有模型的假设的有效性，你可以设置一个<strong class="ll jk"> <em class="mj"> A/B 测试</em> </strong>。一些用户(测试组)看到来自您的模型的预测，而一些用户(控制组)看到来自以前的模型的预测。</p><p id="49e8" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">事实上，这是部署您的模型的正确方法。你可能会发现你的模型并不像看起来那么好。</p><blockquote class="ky"><p id="88d5" class="kz la jj bd lb lc on oo op oq or li dk translated">犯错其实并没有错，错的是没有预料到自己可能会错。</p></blockquote><p id="4624" class="pw-post-body-paragraph lj lk jj ll b lm ln kk lo lp lq kn lr ls lt lu lv lw lx ly lz ma mb mc md li im bi translated">很难指出您的模型在生产环境中表现不佳的真正原因，但一些原因可能是:</p><ul class=""><li id="e30d" class="nt nu jj ll b lm me lp mf ls nv lw nw ma nx li os nz oa ob bi translated">您可能会看到实时数据与训练数据有很大不同。</li><li id="13ea" class="nt nu jj ll b lm oc lp od ls oe lw of ma og li os nz oa ob bi translated">或者您没有正确完成预处理管道。</li><li id="11c6" class="nt nu jj ll b lm oc lp od ls oe lw of ma og li os nz oa ob bi translated">或者您没有正确衡量绩效。</li><li id="8621" class="nt nu jj ll b lm oc lp od ls oe lw of ma og li os nz oa ob bi translated">或者您的实现中可能有一个 bug。</li></ul><p id="201c" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated"><strong class="ll jk"> <em class="mj">学习:</em> </strong> <strong class="ll jk"> <em class="mj">不要全面投产。</em> </strong> A/B 考试永远是前进的绝佳方式。准备好可以依靠的东西(也许是旧型号)。总有一些东西可能会坏掉，这是你无法预料的。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="cf59" class="mr ms jj bd mt mu mv mw mx my mz na nb kp nc kq nd ks ne kt nf kv ng kw nh ni bi translated">4.你的模型甚至可能不会投入生产</h1><p id="3ad2" class="pw-post-body-paragraph lj lk jj ll b lm nj kk lo lp nk kn lr ls nl lu lv lw nm ly lz ma nn mc md li im bi translated">我已经创建了这个令人印象深刻的 ML 模型，它给出了 90%的准确率，但它需要大约 10 秒来获取预测。</p><p id="582b" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated"><strong class="ll jk"> <em class="mj">这样可以接受吗？</em> </strong>对于某些用例也许可以，但真的不行</p><p id="3b71" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">在过去，有许多 Kaggle 比赛的获胜者最终创造了怪物组合，在排行榜上名列前茅。下面是一个特别令人兴奋的示例模型，它用于在 Kaggle 上赢得 Otto 分类挑战赛:</p><figure class="np nq nr ns gt iv gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/099ee96d0df978bb949257c5c00eddca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/1*c3X1YFs5xNqbl_daUi-cZg.png"/></div><figcaption class="jc jd gj gh gi je jf bd b be z dk"><a class="ae jg" href="https://www.kaggle.com/c/otto-group-product-classification-challenge/discussion/14335" rel="noopener ugc nofollow" target="_blank">Source</a>: 33 models and 8 engineered features used in Level 1</figcaption></figure><p id="1ca8" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">另一个例子是网飞百万美元推荐引擎挑战赛。由于涉及到工程成本，网飞团队最终<a class="ae jg" href="https://www.wired.com/2012/04/netflix-prize-costs/" rel="noopener ugc nofollow" target="_blank">从未</a>使用获胜的解决方案。</p><p id="1a59" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">那么，如何让你的模型既精确又容易在机器上运行呢？T25】</p><figure class="np nq nr ns gt iv gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/bed85d72f05e48b0b849880d08dce641.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/0*W_CSIQHmij_XRp9u.jpeg"/></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Teacher — Student Model: <a class="ae jg" rel="noopener" target="_blank" href="/knowledge-distillation-simplified-dd4973dbc764">Source</a></figcaption></figure><p id="9c4d" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">师生模型或<strong class="ll jk"> <em class="mj">知识升华</em> </strong>的概念由此而来。在知识提炼中，我们在一个更大的已经训练好的教师模型上训练一个更小的学生模型。</p><p id="d5ea" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">这里，我们使用教师模型中的软标签/概率，并将其用作学生模型的训练数据。</p><blockquote class="oh oi oj"><p id="d5c0" class="lj lk mj ll b lm me kk lo lp mf kn lr ok mg lu lv ol mh ly lz om mi mc md li im bi translated">关键是老师输出的是类概率——“软标签”而不是“硬标签”。例如，水果分类器可能会说“苹果 0.9，梨 0.1”，而不是“苹果 1.0，梨 0.0”。何必呢？因为这些“软标签”比原来的更能说明问题——告诉学生，是的，一个特定的苹果确实非常像一个梨。学生模型通常可以非常接近教师水平的性能，即使使用的参数少了 1-2 个数量级！— <a class="ae jg" href="https://www.quora.com/What-is-a-teacher-student-model-in-a-Convolutional-neural-network" rel="noopener ugc nofollow" target="_blank">来源</a></p></blockquote><p id="fde1" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated"><strong class="ll jk"> <em class="mj">学习:</em> </strong>有时候，我们在预测时没有很多计算可用，所以我们希望有一个更轻的模型。我们可以尝试构建更简单的模型，或者尝试为这样的用例使用知识提炼。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="777c" class="mr ms jj bd mt mu mv mw mx my mz na nb kp nc kq nd ks ne kt nf kv ng kw nh ni bi translated">5.维护和反馈回路</h1><blockquote class="ky"><p id="715f" class="kz la jj bd lb lc on oo op oq or li dk translated">世界不是恒定的，你的模型重量也不是恒定的</p></blockquote><p id="2dba" class="pw-post-body-paragraph lj lk jj ll b lm ln kk lo lp lq kn lr ls lt lu lv lw lx ly lz ma mb mc md li im bi translated">我们周围的世界正在迅速变化，两个月前可能适用的东西现在可能不再适用。在某种程度上，我们建立的模型是世界的反映，如果世界在变化，我们的模型应该能够反映这种变化。</p><figure class="np nq nr ns gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ov"><img src="../Images/866af6702616c4723db4b0861a7c9bdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qz60DH5nZYDaHNfI.png"/></div></div></figure><p id="3819" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">模型性能通常会随着时间而下降。</p><p id="6f9c" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated"><strong class="ll jk"> <em class="mj">由于这个原因，我们必须在一开始就想办法升级我们的模型，作为维护周期的一部分。</em>T13】</strong></p><p id="bf73" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">这种循环的频率完全取决于您试图解决的业务问题。在广告预测系统中，用户往往变化无常，购买模式不断出现，频率需要相当高。而在评论情感分析系统中，频率不需要那么高，因为语言不会太多地改变其结构。</p><figure class="np nq nr ns gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ow"><img src="../Images/e06a2f5f293d409ad1e3aad369467b1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FbJigtXQZ2yHbunV"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk">Feedback Loop: <a class="ae jg" href="https://www.clarifai.com/blog/closing-the-loop-how-feedback-loops-help-to-maintain-quality-long-term-ai-results" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure><p id="63a0" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">我还要感谢<strong class="ll jk"> <em class="mj">反馈回路在机器学习系统</em> </strong>中的重要性。假设你在狗与猫的分类器中预测了一个特定的图像是一只低概率的狗。我们能从这些低自信的例子中学到什么吗？您可以将它发送到手动审查，以检查它是否可用于重新训练模型。通过这种方式，我们在不确定的情况下训练我们的分类器。</p><p id="4c71" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated"><strong class="ll jk"> <em class="mj">学习:</em> </strong>在思考生产的时候，想出一个利用反馈来维护和改进模型的计划。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><h1 id="c020" class="mr ms jj bd mt mu mv mw mx my mz na nb kp nc kq nd ks ne kt nf kv ng kw nh ni bi translated">结论</h1><p id="e357" class="pw-post-body-paragraph lj lk jj ll b lm nj kk lo lp nk kn lr ls nl lu lv lw nm ly lz ma nn mc md li im bi translated">这些是我在考虑将模型投入生产之前发现的一些重要的事情。</p><p id="ecfb" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">虽然这不是你需要考虑的事情和可能出错的事情的详尽列表，但它无疑可以作为下次你创建机器学习系统的思想食粮。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="7397" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">如果你想了解更多关于如何构建机器学习项目和最佳实践的信息，我想调出他在 Coursera <a class="ae jg" href="https://coursera.pxf.io/7mKnnY" rel="noopener ugc nofollow" target="_blank">深度学习专业化</a>中出色的<a class="ae jg" href="https://coursera.pxf.io/7mKnnY" rel="noopener ugc nofollow" target="_blank">第三门课程</a>名为构建机器学习项目。一定要去看看。</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><p id="c35a" class="pw-post-body-paragraph lj lk jj ll b lm me kk lo lp mf kn lr ls mg lu lv lw mh ly lz ma mi mc md li im bi translated">谢谢你的阅读。将来我也会写更多初学者友好的帖子。在<a class="ae jg" href="https://medium.com/@rahul_agarwal?source=post_page---------------------------" rel="noopener">媒体</a>关注我，或者订阅我的<a class="ae jg" href="http://eepurl.com/dbQnuX?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank">博客</a>了解他们。一如既往，我欢迎反馈和建设性的批评，可以通过 Twitter <a class="ae jg" href="https://twitter.com/MLWhiz?source=post_page---------------------------" rel="noopener ugc nofollow" target="_blank"> @mlwhiz </a>联系</p></div></div>    
</body>
</html>