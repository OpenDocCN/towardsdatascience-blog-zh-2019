<html>
<head>
<title>How to create a weather bot in 5 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在 5 分钟内创建一个天气机器人</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-create-a-weather-bot-in-5-minutes-7d83b1052269?source=collection_archive---------12-----------------------#2019-11-08">https://towardsdatascience.com/how-to-create-a-weather-bot-in-5-minutes-7d83b1052269?source=collection_archive---------12-----------------------#2019-11-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3382f9d2e2b86c5d6c406d763efbb17c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Mn0FCf9014iYAss8"/></div></div></figure><p id="30a3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建天气机器人来获取 Hala.ai 聊天中的天气信息。在本教程中，我们将使用服务<a class="ae kw" href="https://weatherstack.com/" rel="noopener ugc nofollow" target="_blank">https://weatherstack.com</a>来获取当前天气的信息。</p><p id="3786" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第一步。</strong>去<a class="ae kw" href="https://weatherstack.com/" rel="noopener ugc nofollow" target="_blank">https://weatherstack.com</a>注册一个免费账户</p><p id="ffb7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第二步。</strong>注册后，转到<a class="ae kw" href="https://weatherstack.com/quickstart" rel="noopener ugc nofollow" target="_blank">https://weatherstack.com/quickstart</a>并复制为您的帐户生成的 API 访问密钥和基本 URL</p><p id="798b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第三步。</strong>转到<a class="ae kw" href="https://platform.hala.ai/" rel="noopener ugc nofollow" target="_blank"> Hala 平台</a>上的<code class="fe kx ky kz la b">Integration</code>部分，添加新的 integration REST API，并传递您在上一步中复制的值。保存您的结果。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/1544e418867f94db673a8c474220198e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*W5SnM10zygn1q3Xi"/></div></div></figure><p id="491c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第四步。</strong>转到<a class="ae kw" href="https://platform.hala.ai/" rel="noopener ugc nofollow" target="_blank">哈拉平台</a>上的<code class="fe kx ky kz la b">Actions</code>段，新建一个<code class="fe kx ky kz la b">action</code>。提供操作的名称并选择集成。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lg"><img src="../Images/7d57a09746c2799de1d1f0235ba8f59f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TSwPbwSppDHGSNQl"/></div></div></figure><p id="a058" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第五步。</strong>对你的 API 服务进行配置。您可以在 API 提供者的文档中找到关于构建 API 的更多信息。在我们的例子中，你可以在这里阅读这个服务的 API 文档。完成后，保存您的更改。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lh"><img src="../Images/d8ee4d0451ce49f1a8c8fff7f9b31a2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BcivVo29XUSWr27z"/></div></div></figure><p id="2557" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第六步。</strong>您已经设置了整合和行动。现在，您需要创建一个意图来识别关于获取天气的用户输入。转到<a class="ae kw" href="https://platform.hala.ai/" rel="noopener ugc nofollow" target="_blank">哈拉平台</a>上的<code class="fe kx ky kz la b">Intents</code>部分，按下<code class="fe kx ky kz la b">New Utterance</code></p><p id="dc36" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">步骤 7。</strong>要更改意向的默认名称，点击默认值旁边的铅笔图标，或者您可以点击默认值，然后您将能够修改它。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi li"><img src="../Images/f2ca3d722427145289ac54ca1a8d5842.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/0*p1cyLY8oyK6q31XI"/></div></figure><p id="a55c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">步骤 8。</strong>指定意图的名称并回车</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/6b7b36637925aa44d57b68bfd490f7c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*43MirUoz-a-CQqe1"/></div></figure><p id="b0d6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">步骤九。</strong>现在你需要提供最终用户如何撰写天气预报的例子。你需要提供至少五个例子。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lk"><img src="../Images/595558b301dd8449d00a73a01093b2b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CfJKC3y5TBbTASti"/></div></div></figure><p id="da85" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第十步。</strong> <code class="fe kx ky kz la b">Save</code>你的变化和<code class="fe kx ky kz la b">train model</code></p><p id="85d3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第 11 步。</strong>现在，您需要创建一个实体来识别我们需要提供天气的城市。转到<a class="ae kw" href="https://platform.hala.ai/" rel="noopener ugc nofollow" target="_blank">平台</a>上的<code class="fe kx ky kz la b">Entities</code>部分，按下<code class="fe kx ky kz la b">New Entity</code></p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ll"><img src="../Images/301ce325399f5c67c16566d9773aef5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZN38qs1TAqhKtW0j"/></div></div></figure><p id="2747" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe kx ky kz la b">Save</code>你的变化和<code class="fe kx ky kz la b">train model</code></p><p id="3318" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第十二步。</strong>进入<a class="ae kw" href="https://platform.hala.ai/" rel="noopener ugc nofollow" target="_blank">哈拉平台</a>的<code class="fe kx ky kz la b">Skill Kit</code>部分，按下<code class="fe kx ky kz la b">Create skill</code>按钮创建技能</p><p id="b91a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第十三步。</strong>提供技能的名称、描述和标签(最后两个是可选的)。按“下一步”创建对话流。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lm"><img src="../Images/2c1d30dc15ea96ae86f6c72d5b2dab96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FDdL-bpKVWMFfMMO"/></div></div></figure><p id="2bf1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第十四步。</strong>你将进入创建对话流程界面。按下按钮<code class="fe kx ky kz la b">Add new</code>创建第一个根节点</p><p id="984a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第十五步。</strong>打开已创建的对话框节点并填充。</p><ul class=""><li id="af5e" class="ln lo iq ka b kb kc kf kg kj lp kn lq kr lr kv ls lt lu lv bi translated">字段名称—您可以输入任何值，例如“用户询问天气预报”</li><li id="e754" class="ln lo iq ka b kb lw kf lx kj ly kn lz kr ma kv ls lt lu lv bi translated">条件——这里需要指定创建意图<code class="fe kx ky kz la b">intent.get_weather</code></li></ul><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mb"><img src="../Images/ec181e39780f16a6c1a336cc01cbbe25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_4Aqb6aT-ublICB8"/></div></div></figure><ul class=""><li id="a837" class="ln lo iq ka b kb kc kf kg kj lp kn lq kr lr kv ls lt lu lv bi translated">操作—跳过此部分</li><li id="cf38" class="ln lo iq ka b kb lw kf lx kj ly kn lz kr ma kv ls lt lu lv bi translated">上下文—跳过此部分</li><li id="db4a" class="ln lo iq ka b kb lw kf lx kj ly kn lz kr ma kv ls lt lu lv bi translated">输出—这里我们需要询问用户我们需要为哪个城市提供天气预报</li></ul><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mc"><img src="../Images/81084fa6456a235dd380a874461a2b9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JOoS5fDG4F4udTVR"/></div></div></figure><p id="39a5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第十六步。</strong>现在您需要创建一个子节点来识别用户关于城市的输入。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi md"><img src="../Images/a155303657e9d9e3b926c84004f29797.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RD6tyq8tQKzyz3QK"/></div></div></figure><p id="79ac" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第十七步。</strong>打开子节点，填充。</p><ul class=""><li id="dd02" class="ln lo iq ka b kb kc kf kg kj lp kn lq kr lr kv ls lt lu lv bi translated">字段名称—您可以输入任何值，例如“表单成功”</li><li id="ee99" class="ln lo iq ka b kb lw kf lx kj ly kn lz kr ma kv ls lt lu lv bi translated">条件—这里需要指定实体<code class="fe kx ky kz la b">entity.city</code></li></ul><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lm"><img src="../Images/257400c58ca55cf5f75333258dd0fb27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RH2xd_3RFVB-F6wI"/></div></div></figure><ul class=""><li id="f7eb" class="ln lo iq ka b kb kc kf kg kj lp kn lq kr lr kv ls lt lu lv bi translated">动作——当我们获得关于城市的信息时，我们可以向气象服务发送 API 请求。我们需要添加之前创建的操作。</li></ul><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi me"><img src="../Images/fa1bec9814fee06671b2dd585441155c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PEwRokWTU_zaQAjx"/></div></div></figure><p id="fcc6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">查找并添加操作</p><p id="1f96" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当您添加操作时，您需要指定存储天气服务响应的上下文变量，例如<code class="fe kx ky kz la b">context.weatherResponse</code></p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/696a24319b4232546a84f07f916f01f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LaAXPDX2AQjhUkz4"/></div></div></figure><ul class=""><li id="7540" class="ln lo iq ka b kb kc kf kg kj lp kn lq kr lr kv ls lt lu lv bi translated">上下文—这里我们需要将城市名保存到上下文变量中，该变量将被发送到天气服务。</li></ul><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mg"><img src="../Images/7d0b9e985e70b2c148ce96af6b6d8903.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SziqCz54sLUrqWxy"/></div></div></figure><ul class=""><li id="8ab6" class="ln lo iq ka b kb kc kf kg kj lp kn lq kr lr kv ls lt lu lv bi translated">Output —在 Output 中，您可以这样写“请稍候，我正在检查信息。”</li></ul><p id="6581" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第十八步。</strong>创建一个新的子节点来处理来自天气服务的 API 响应。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mh"><img src="../Images/131af4ea686dbf236694e266dc47b2ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ew3Nhhus58b75ZGp"/></div></div></figure><p id="9ee0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">打开创建的节点并填充它:</p><ul class=""><li id="9d6f" class="ln lo iq ka b kb kc kf kg kj lp kn lq kr lr kv ls lt lu lv bi translated">字段名称—您可以输入任何值，例如“提供结果”</li><li id="91f1" class="ln lo iq ka b kb lw kf lx kj ly kn lz kr ma kv ls lt lu lv bi translated">条件—指定在先前步骤中为动作响应创建的上下文变量:<code class="fe kx ky kz la b">context.weatherResponse</code></li></ul><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mi"><img src="../Images/3ab9a3129e1553faab8f5a107fb92285.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*n6kPi0EMgPR8C68D"/></div></div></figure><ul class=""><li id="29af" class="ln lo iq ka b kb kc kf kg kj lp kn lq kr lr kv ls lt lu lv bi translated">操作—跳过此部分</li><li id="b2aa" class="ln lo iq ka b kb lw kf lx kj ly kn lz kr ma kv ls lt lu lv bi translated">上下文—跳过此部分</li><li id="a441" class="ln lo iq ka b kb lw kf lx kj ly kn lz kr ma kv ls lt lu lv bi translated">输出—在输出中，我们需要提供关于天气的信息。要从 API 响应中访问数据，您需要使用下一个前缀<code class="fe kx ky kz la b">context.weatherResponse.</code>，然后指定所需数据的路径。所有的 API 提供者都有关于使用他们的 API 的信息。您可以阅读这些信息来创建正确的数据提取路径。</li></ul><p id="c344" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以使用下一段文字:</p><pre class="lc ld le lf gt mj la mk ml aw mm bi"><span id="a0ba" class="mn mo iq la b gy mp mq l mr ms">Weather forecast for {{context.weatherResponse.request.query}}</span><span id="6049" class="mn mo iq la b gy mt mq l mr ms">Local time: {{context.weatherResponse.location.localtime}}</span><span id="515a" class="mn mo iq la b gy mt mq l mr ms">Temprature: {{context.weatherResponse.current.temperature}}</span><span id="f955" class="mn mo iq la b gy mt mq l mr ms">Wind speed: {{context.weatherResponse.current.wind_speed}}</span></pre><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/704073e9bd5824ec59064e35d5ce1168.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YHC6gSqsgN26HC0u"/></div></div></figure><p id="7af6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第 19 步。</strong>按下“保存更改”按钮保存更改。现在，您已经创建了具有一个对话框节点的简单技能。</p><p id="c7fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请记住保存您的更改。</p><p id="9f80" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第二十步。</strong>检验结果。使用下一个链接<a class="ae kw" href="https://chat.hala.ai/" rel="noopener ugc nofollow" target="_blank">https://chat.hala.ai/</a>进入<a class="ae kw" href="https://chat.hala.ai/" rel="noopener ugc nofollow" target="_blank">哈拉网络聊天</a>，并在聊天中键入第一条消息。您可以键入一个经过训练的短语，也可以使用未在意向训练中指定的新短语。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3382f9d2e2b86c5d6c406d763efbb17c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Mn0FCf9014iYAss8"/></div></div></figure><p id="673b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">恭喜你！您已经创建了技能(机器人)并测试了它。</p></div></div>    
</body>
</html>