<html>
<head>
<title>Sorting data frames in pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对熊猫中的数据框进行排序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/sorting-data-frames-in-pandas-a5a3af6f346a?source=collection_archive---------7-----------------------#2019-10-16">https://towardsdatascience.com/sorting-data-frames-in-pandas-a5a3af6f346a?source=collection_archive---------7-----------------------#2019-10-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="49d0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何快速有效地排序数据帧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/831813dd16ac0977f711cbf7a355b23e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*88XH9vXuPh82FZJSVIKXdg.jpeg"/></div></div></figure><p id="dd42" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">许多初学数据的科学家试图通过编写复杂的函数来对数据框进行排序。这不是最有效或最简单的方法。不要重新发明轮子，使用 pandas 包提供的 sort_values()函数。让我们看看现实生活中的例子，以及如何在您的代码中使用 sort_values()函数。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><p id="19e8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">加载数据集</strong></p><p id="8c71" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将使用 python 字典来创建一些假的客户端数据，并将这些数据加载到 pandas 数据框中。我们将保持简单，所以我们将只有四列:姓名，国家，年龄和最近的活动日期。数据集很简单，但我们将给出一个很好的概述，说明如何以几种不同的方式对数据帧进行排序。</p><pre class="kj kk kl km gt lx ly lz ma aw mb bi"><span id="aa71" class="mc md it ly b gy me mf l mg mh">import pandas as pd<br/>import numpy as np<br/>client_dictionary = {'name': ['Michael', 'Ana', 'Sean'], <br/>                     'country': ['UK', 'UK', 'USA'], <br/>                     'age': [10, 51, 13],<br/>                     'latest date active': ['07-05-2019', '23-12-2019', '03-04-2016']}<br/>df = pd.DataFrame(client_dictionary)<br/>df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/e9196ea98215f60a960ac70b9b2e3080.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*a9wArNQAdIoTneEJ59BIpQ.png"/></div></figure><p id="3502" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">就在上面，我们有我们的客户数据框。它只有三个客户端，但足以展示所有不同的排序可能性。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><p id="0034" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">按字母顺序排序</strong></p><p id="bda2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们从按字母顺序排列名字的数据帧开始。我们将使用 panads sort_values()函数，并通过使用一个名为“by”的参数来指定要按哪个列名排序:</p><pre class="kj kk kl km gt lx ly lz ma aw mb bi"><span id="4564" class="mc md it ly b gy me mf l mg mh">df.sort_values(by='name')</span></pre><p id="8752" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以看到，数据框现在是根据名称列按字母顺序排序的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/fb94f42de7b7c14095d9e720201fcaa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*OSExtWPupKdP4f8LoP5czA.png"/></div></figure><p id="3784" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以通过使用 ascending=False 作为函数参数来颠倒排序:</p><pre class="kj kk kl km gt lx ly lz ma aw mb bi"><span id="eaa5" class="mc md it ly b gy me mf l mg mh">df.sort_values(by='name', ascending=False)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/acdf150520f35412bde8d5215e44f91a.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*m825OWz3NgclTBpqc5nErA.png"/></div></figure></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><p id="2f85" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">按号码排序</strong></p><p id="8fd8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们试着做同样的事情，但是现在按年龄排序。代码看起来完全一样，只是我们更改了将用于排序的列名:</p><pre class="kj kk kl km gt lx ly lz ma aw mb bi"><span id="df1c" class="mc md it ly b gy me mf l mg mh">df.sort_values(by='age')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/8733501a8d59f365a02bf4af5b5e951f.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*fnZ4qme6ITgjtJ_zesQNkw.png"/></div></figure></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><p id="eef8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">按日期排序</strong></p><p id="a96a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">同样，同一行代码也适用于日期！我们唯一需要确保的是我们的日期被识别为日期类型，而不是字符串。我们将使用 astype()方法做到这一点，然后应用排序函数:</p><pre class="kj kk kl km gt lx ly lz ma aw mb bi"><span id="497b" class="mc md it ly b gy me mf l mg mh">df['latest date active'] = df['latest date active'].astype('datetime64[ns]')<br/>df.sort_values(by='latest date active')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/81d1f4f16cf92850f4712a0b5ef87b4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*Bq7VwkIFvRfI0-Q_swU0Gg.png"/></div></figure></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><p id="aeda" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">按多列排序</strong></p><p id="0812" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">排序值函数可以处理多列。它将首先根据列列表中的第一个元素对数据帧进行排序。如果使用第一列有不可排序的值，它将前进到列表中的下一列。让我们看一下先按国家排序，再按姓名排序的例子:</p><pre class="kj kk kl km gt lx ly lz ma aw mb bi"><span id="d9ec" class="mc md it ly b gy me mf l mg mh">df.sort_values(by=['country','name'])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/f066d1c47fb91263624414509f19dad7.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*3i3JwchDvOfXfbVNQlFEYA.png"/></div></figure><p id="1208" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里我们可以看到我们的条目是按国家排序的。所有英国条目都在美国条目之上，然后它们甚至根据其名称列进一步排序。</p><p id="6e18" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">使用原位参数</strong></p><p id="02b7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后但同样重要的是，如果希望当前数据框保存排序结果，请记住使用 inplace 参数并将其设置为 True:</p><pre class="kj kk kl km gt lx ly lz ma aw mb bi"><span id="e371" class="mc md it ly b gy me mf l mg mh">df.sort_values(by=['country','name'], inplace=True)</span></pre></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><p id="a619" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">结论</strong></p><p id="138d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您可以使用单行代码高效地对数据框进行排序。神奇的是使用熊猫包中的 sort_values 函数。如果您了解如何使用本概述中概述的参数，您将能够根据自己的需要对任何数据框进行排序。希望你会觉得有用，快乐排序！</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><p id="1b38" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="mj">原文发布于 aboutdatablog.com: </em> <a class="ae mk" href="https://www.aboutdatablog.com/post/sorting-data-frames-in-pandas" rel="noopener ugc nofollow" target="_blank">整理熊猫</a>、<em class="mj">中的数据帧 2019 . 10 . 16。</em></p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><p id="add1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="mj"> PS:我正在 Medium 和</em><a class="ae mk" href="https://www.aboutdatablog.com/" rel="noopener ugc nofollow" target="_blank"><strong class="kw iu"><em class="mj">aboutdatablog.com</em></strong></a><em class="mj">上撰写以简单易懂的方式解释基本数据科学概念的文章。你可以订阅我的</em> <a class="ae mk" href="https://medium.com/subscribe/@konkiewicz.m" rel="noopener"> <strong class="kw iu"> <em class="mj">邮件列表</em> </strong> </a> <em class="mj">在我每次写新文章的时候得到通知。如果你还不是中等会员，你可以在这里加入</em><a class="ae mk" href="https://medium.com/@konkiewicz.m/membership" rel="noopener"><strong class="kw iu"><em class="mj"/></strong></a><em class="mj">。</em></p><p id="e435" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面还有一些你可能喜欢的帖子</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><div class="kj kk kl km gt ml"><a rel="noopener follow" target="_blank" href="/what-are-lambda-functions-in-python-and-why-you-should-start-using-them-right-now-75ab85655dc6"><div class="mm ab fo"><div class="mn ab mo cl cj mp"><h2 class="bd iu gy z fp mq fr fs mr fu fw is bi translated">python 中的 lambda 函数是什么，为什么你现在就应该开始使用它们</h2><div class="ms l"><h3 class="bd b gy z fp mq fr fs mr fu fw dk translated">初学者在 python 和 pandas 中开始使用 lambda 函数的快速指南。</h3></div><div class="mt l"><p class="bd b dl z fp mq fr fs mr fu fw dk translated">towardsdatascience.com</p></div></div><div class="mu l"><div class="mv l mw mx my mu mz ks ml"/></div></div></a></div><div class="na nb gp gr nc ml"><a rel="noopener follow" target="_blank" href="/jupyter-notebook-autocompletion-f291008c66c"><div class="mm ab fo"><div class="mn ab mo cl cj mp"><h2 class="bd iu gy z fp mq fr fs mr fu fw is bi translated">Jupyter 笔记本自动完成</h2><div class="ms l"><h3 class="bd b gy z fp mq fr fs mr fu fw dk translated">数据科学家的最佳生产力工具，如果您还没有使用它，您应该使用它…</h3></div><div class="mt l"><p class="bd b dl z fp mq fr fs mr fu fw dk translated">towardsdatascience.com</p></div></div><div class="mu l"><div class="nd l mw mx my mu mz ks ml"/></div></div></a></div><div class="na nb gp gr nc ml"><a rel="noopener follow" target="_blank" href="/7-practical-pandas-tips-when-you-start-working-with-the-library-e4a9205eb443"><div class="mm ab fo"><div class="mn ab mo cl cj mp"><h2 class="bd iu gy z fp mq fr fs mr fu fw is bi translated">当你开始与图书馆合作时，7 个实用的熊猫提示</h2><div class="ms l"><h3 class="bd b gy z fp mq fr fs mr fu fw dk translated">解释一些乍一看不那么明显的东西…</h3></div><div class="mt l"><p class="bd b dl z fp mq fr fs mr fu fw dk translated">towardsdatascience.com</p></div></div><div class="mu l"><div class="ne l mw mx my mu mz ks ml"/></div></div></a></div><div class="na nb gp gr nc ml"><a rel="noopener follow" target="_blank" href="/pandas-data-manipulation-functions-7b3519fc1370"><div class="mm ab fo"><div class="mn ab mo cl cj mp"><h2 class="bd iu gy z fp mq fr fs mr fu fw is bi translated">Pandas 数据操作函数:apply()、map()和 applymap()</h2><div class="ms l"><h3 class="bd b gy z fp mq fr fs mr fu fw dk translated">以及如何在熊猫身上正确使用它们…</h3></div><div class="mt l"><p class="bd b dl z fp mq fr fs mr fu fw dk translated">towardsdatascience.com</p></div></div><div class="mu l"><div class="nf l mw mx my mu mz ks ml"/></div></div></a></div></div></div>    
</body>
</html>