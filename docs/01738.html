<html>
<head>
<title>Build vs. Buy — A Scalable Machine Learning Infrastructure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建与购买——可扩展的机器学习基础设施</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/build-vs-buy-a-scalable-machine-learning-infrastructure-88146cfcadb7?source=collection_archive---------10-----------------------#2019-03-21">https://towardsdatascience.com/build-vs-buy-a-scalable-machine-learning-infrastructure-88146cfcadb7?source=collection_archive---------10-----------------------#2019-03-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5c95" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">开源 ML 基础设施的路线图。</h2></div><p id="e165" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇博客文章中，我们将看看机器学习平台由哪些部分组成，并将从头构建自己的基础设施与购买一个为您做所有事情的现成服务进行比较。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/35b6075a60d576c15f211eb312121bfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sqN3Nano41uJ8OVS"/></div></div></figure><p id="4627" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">购买和构建基础架构的最终目标都是让您的数据科学团队尽可能多地花时间了解数据、构建模型并将其投入生产，从而提高他们的效率。相反，这意味着他们将在基础设施和样板代码上花费尽可能少的时间。为了实现这一点，大多数 ML 基础设施公司(如<a class="ae ln" href="https://blog.valohai.com/an-interview-with-former-product-manager-for-ubers-michelangelo-mike-del-balso" rel="noopener ugc nofollow" target="_blank">优步的米开朗基罗</a>)都建立在以下原则之上:</p><ul class=""><li id="d91f" class="lo lp iq kh b ki kj kl km ko lq ks lr kw ls la lt lu lv lw bi translated">集成您的数据科学家已经喜欢使用的工具</li><li id="079d" class="lo lp iq kh b ki lx kl ly ko lz ks ma kw mb la lt lu lv lw bi translated">构建快速迭代实验的平台</li><li id="0e36" class="lo lp iq kh b ki lx kl ly ko lz ks ma kw mb la lt lu lv lw bi translated">尽可能自动管理输入数据和输出数据</li><li id="4593" class="lo lp iq kh b ki lx kl ly ko lz ks ma kw mb la lt lu lv lw bi translated">通过提供自动审计跟踪，提供回滚实验的方法</li><li id="c4a3" class="lo lp iq kh b ki lx kl ly ko lz ks ma kw mb la lt lu lv lw bi translated">支持贵公司使用的环境，从不同的云提供商到内部硬件</li><li id="d30a" class="lo lp iq kh b ki lx kl ly ko lz ks ma kw mb la lt lu lv lw bi translated">建立在抽象之上，这样你就可以在新技术出现时支持它们</li><li id="c98a" class="lo lp iq kh b ki lx kl ly ko lz ks ma kw mb la lt lu lv lw bi translated">从团队的角度和资源的角度来设计可伸缩性，这样你就可以支持数百个项目、人员、数据源和计算单元。</li><li id="a873" class="lo lp iq kh b ki lx kl ly ko lz ks ma kw mb la lt lu lv lw bi translated">与任何地方的任何东西集成，因此平凡的任务都可以自动化。</li></ul><p id="87cf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">记住这些原则，让我们看看如何通过从头开始构建来实现这一点。</p><h1 id="371b" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">构建可扩展的机器学习基础设施</h1><p id="c700" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">有效的机器学习基础设施需要构建它的团队具备各种各样的能力。您将为您的数据科学团队解决特定需求，因此让我们来看看典型的机器学习基础架构由什么组成。</p><h2 id="e9af" class="mz md iq bd me na nb dn mi nc nd dp mm ko ne nf mo ks ng nh mq kw ni nj ms nk bi translated">机器编排</h2><p id="6697" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">机器编排是你的机器学习基础设施的主干。编排引擎在你的机器编排部分的 UI 中实现自己，无论是通过集成在 ide、笔记本、CLI、API 或 UI 中。最先进的引擎优化资源使用，预测需求，处理排队等。您可以将您的引擎基于虚拟机、Kubernetes 之类的平台，或者直接编排您自己的硬件。</p><h2 id="bbe7" class="mz md iq bd me na nb dn mi nc nd dp mm ko ne nf mo ks ng nh mq kw ni nj ms nk bi translated">记录保存、记录和版本控制</h2><p id="4641" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">严格来说，版本控制并不是传统 ML 平台的一部分，但是由于 GDPR 等法规，版本控制变得越来越重要。为了让您的数据科学家只需点击一下鼠标就能重现实验，您需要对数据、参数、硬件和软件环境、日志等进行版本控制和记录。一个很好的起点是使用 Git 进行代码版本控制，使用 Docker 进行环境控制。在下面的图片中可以找到版本的起点。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nl"><img src="../Images/c2ae5d53fc9dc27510387ae0b103db8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vqfm5o14kSRaRR_0"/></div></div></figure><h2 id="e046" class="mz md iq bd me na nb dn mi nc nd dp mm ko ne nf mo ks ng nh mq kw ni nj ms nk bi translated">项目和用户管理</h2><p id="8da0" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">您需要将实验纳入项目中，并管理用户和团队的权限。使用 Azure Active Directory 或 Hadoop Ranger 提供的访问控制，或者自己构建一些东西。访问控制还应该定义用户可以使用哪些资源、不同用户如何对作业进行排队、哪些数据对谁可用等等。您将希望消除孤岛并实现透明，以便您的数据科学家可以相互学习。</p><h2 id="c49a" class="mz md iq bd me na nb dn mi nc nd dp mm ko ne nf mo ks ng nh mq kw ni nj ms nk bi translated">自动化 ML 管道</h2><p id="7a26" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">机器学习管道是一个概念，其中工作被分成不同的阶段，从探索开始，继续进行批处理、规范化、培训、部署和中间的许多其他步骤。您需要构建对将结果从一个步骤传递到下一个步骤的支持。当数据湖中的数据发生重大变化时，一些高级触发器可能会自动重新运行部分管道。从基于 Git 的低级方法到<a class="ae ln" href="https://airflow.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache 气流</a>和<a class="ae ln" href="https://mlflow.org/" rel="noopener ugc nofollow" target="_blank"> ML 气流</a>管道，有几种解决方案，您可能想要探索并组合在一起。</p><h2 id="9f2a" class="mz md iq bd me na nb dn mi nc nd dp mm ko ne nf mo ks ng nh mq kw ni nj ms nk bi translated">整合，整合，整合！</h2><p id="a7f5" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">数据科学家应该能够继续使用他们喜欢的工具和框架，无论是他们最喜欢的 IDE、笔记本还是其他任何东西。根据具体情况，还应该有不同的与基础设施交互的方式。最佳实践是在开放 API 的基础上构建一切，然后可以从 CLI 和 web UI 访问，甚至直接从 Jupyter notebook 访问。对于超参数调优，您可能需要考虑外部优化器，比如<a class="ae ln" href="https://sigopt.com/" rel="noopener ugc nofollow" target="_blank"> SigOpt </a>。</p><h2 id="c524" class="mz md iq bd me na nb dn mi nc nd dp mm ko ne nf mo ks ng nh mq kw ni nj ms nk bi translated">可视化正在进行的执行</h2><p id="8048" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">当数据科学家使用模型时，他们需要了解各个步骤是如何进行的，无论是训练精度还是数据准备。为此，您需要构建一种以有意义的方式显示实时训练数据的方法。解决方案可以是定制的可视化库或例如<a class="ae ln" href="https://www.tensorflow.org/guide/summaries_and_tensorboard" rel="noopener ugc nofollow" target="_blank"> TensorBoard </a>或<a class="ae ln" href="https://www.wandb.com/" rel="noopener ugc nofollow" target="_blank">权重&amp;偏差</a>。</p><h2 id="7c1f" class="mz md iq bd me na nb dn mi nc nd dp mm ko ne nf mo ks ng nh mq kw ni nj ms nk bi translated">推理部署</h2><p id="46c1" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">ML 管道的最后一部分是部署。您可能不想在实际生产环境中进行部署，但要确保您的数据科学团队在为将预测模型集成到您的业务应用程序中的软件团队部署新模型时能够自给自足。由于开销和缓慢的模型开发周期，将模型交付给 IT 部门的旧方法从长远来看是行不通的。Kubernetes clusters 是业内事实上的云推理部署标准。也可以看看 AWS 的弹性推理，谢顿核心或 Azure 推理引擎与<a class="ae ln" href="https://onnx.ai/" rel="noopener ugc nofollow" target="_blank"> ONNX </a>的支持。</p><h1 id="0e5b" class="mc md iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">购买可扩展的机器学习基础设施</h1><p id="c04c" class="pw-post-body-paragraph kf kg iq kh b ki mu jr kk kl mv ju kn ko mw kq kr ks mx ku kv kw my ky kz la ij bi translated">不仅自己构建基础设施需要几年的时间(相信我，我们有历史可以证明这一点)，而且随着技术的发展和新技术的支持，您还需要不断开发平台。</p><p id="d96f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Valohai 是一个完整的可扩展的机器学习基础设施服务，可以为您的团队扩展，从 1 到 1000 名数据科学家。Valohai 的一切都是围绕项目和团队构建的，它可以从内部安装扩展到混合云和 Microsoft Azure、AWS 和 Google Cloud 中的全云解决方案。Valohai 为您处理机器编排，并自动跟踪您或您公司中的任何人曾经进行过的每个实验——从数据、代码、超参数、日志、软件环境和库、硬件等等。</p><p id="84d5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Valohai 基于开放 API 构建，通过现成的 CLI、直观的 Web UI 和 Jupyter 笔记本集成，集成到您当前的工作流程中。借助自动化管道，您无需手动操作即可开始批量作业并运行培训流程的每一步。元数据的交互式可视化有助于您的团队了解其他人在做什么，并跟踪他们的模型，直到他们准备好将这些模型投入生产。</p><p id="62ad" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，有一点是肯定的，ML 基础设施是你的团队生产力中最重要的部分。在最好的情况下，它将减少多达 90%的模型开发时间。</p></div><div class="ab cl nm nn hu no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ij ik il im in"><p id="8c1b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nt">最初发表于</em><a class="ae ln" href="https://blog.valohai.com/scalable-machine-learning-infrastructure/" rel="noopener ugc nofollow" target="_blank"><em class="nt">【blog.valohai.com】</em></a><em class="nt">。</em></p></div></div>    
</body>
</html>