<html>
<head>
<title>Python Seaborn Plots in R using reticulate</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python Seaborn 使用 reticulate 在 R 中绘图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-seaborn-plots-in-r-using-reticulate-fb59cebf61a7?source=collection_archive---------11-----------------------#2019-04-08">https://towardsdatascience.com/python-seaborn-plots-in-r-using-reticulate-fb59cebf61a7?source=collection_archive---------11-----------------------#2019-04-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/097ea961ff3b35582619290c3014b0a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*cvgs5dK0jg7rYa6WWnEXkw.png"/></div></figure><p id="3ced" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我认为没有人会质疑<code class="fe ks kt ku kv b">ggplot2</code>有多神奇。但是在 Python 的现代数据可视化库<code class="fe ks kt ku kv b">Seaborn</code>中有几个我很欣赏的情节。这不仅仅是因为它能产生高质量的可视化效果，还因为它的构建是多么的容易和简单。那两个地块是<code class="fe ks kt ku kv b">heatmap</code>和<code class="fe ks kt ku kv b">pairplot</code>。我总是想念他们，但我想不会了。</p><p id="646b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果我告诉您，您现在可以使用 RStudio 在 R 中构建 Seaborn 热图和 pairplot，会怎么样？在这篇文章中，我们将看到如何制作像 Pairplot 和 Heatmap 这样的 Seaborn 可视化工具，就此而言，r。</p><h1 id="897b" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">网状的</h1><p id="01ae" class="pw-post-body-paragraph ju jv iq jw b jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr ij bi translated">这里的圣杯是最近推出的 R 包<code class="fe ks kt ku kv b">reticulate</code>，由 RStudio 开发。</p><h1 id="df05" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">关于套餐:</h1><p id="6ef1" class="pw-post-body-paragraph ju jv iq jw b jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr ij bi translated">reticulate 包为 Python 和 r 之间的互操作性提供了一套全面的工具。</p><ul class=""><li id="8a14" class="lz ma iq jw b jx jy kb kc kf mb kj mc kn md kr me mf mg mh bi translated">以多种方式从 R 调用 Python，包括 R Markdown、获取 Python 脚本、导入 Python 模块以及在 R 会话中交互使用 Python。</li><li id="b4d7" class="lz ma iq jw b jx mi kb mj kf mk kj ml kn mm kr me mf mg mh bi translated">R 和 Python 对象之间的转换(例如，R 和 Pandas 数据框之间，或者 R 矩阵和 NumPy 数组之间)。</li><li id="a9da" class="lz ma iq jw b jx mi kb mj kf mk kj ml kn mm kr me mf mg mh bi translated">灵活绑定到不同版本的 Python，包括虚拟环境和 Conda 环境。</li></ul><p id="8857" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Reticulate 在 R 会话中嵌入了一个 Python 会话，实现了无缝、高性能的互操作性。</p><h1 id="9170" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">安装和加载 R 包</h1><p id="c83b" class="pw-post-body-paragraph ju jv iq jw b jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr ij bi translated"><code class="fe ks kt ku kv b">reticulate</code>在<a class="ae mn" href="https://cran.r-project.org/package=reticulate" rel="noopener ugc nofollow" target="_blank">曲柄</a>上可用，并可按以下代码安装:</p><pre class="mo mp mq mr gt ms kv mt mu aw mv bi"><span id="7528" class="mw kx iq kv b gy mx my l mz na">install.packages('reticulate')</span></pre><p id="e281" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">让我们将 R 包加载到当前的 R 会话中(就像加载其他 R 包一样):</p><pre class="mo mp mq mr gt ms kv mt mu aw mv bi"><span id="419c" class="mw kx iq kv b gy mx my l mz na">#loading required R libraries <br/>library(reticulate) #the superpower bridges python and R</span></pre><h1 id="7811" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">初始设置</h1><p id="dbcd" class="pw-post-body-paragraph ju jv iq jw b jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr ij bi translated">记住，要访问这个包，您的机器中需要有 Python。所以请确保您已经安装了 Python 以及所需的包，并且在<code class="fe ks kt ku kv b">PATH</code>上可用，默认情况下，reticulate 使用路径上的 Python 版本。如果您的计算机上有多个 Python 版本，您可以使用以下代码指示使用哪个版本的 Python for reticulate:</p><pre class="mo mp mq mr gt ms kv mt mu aw mv bi"><span id="7e01" class="mw kx iq kv b gy mx my l mz na">#specifying which version of python to use<br/>use_python('C:\\PROGRA~1\\Python35\\python.exe')</span></pre><h1 id="a70c" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">加载 Python 库</h1><p id="4522" class="pw-post-body-paragraph ju jv iq jw b jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr ij bi translated"><code class="fe ks kt ku kv b">import()</code>函数帮助将指定的 Python 库导入当前 R 会话。记住，指定的 Python 库必须已经安装在机器上。</p><pre class="mo mp mq mr gt ms kv mt mu aw mv bi"><span id="37ab" class="mw kx iq kv b gy mx my l mz na">#importing required Python libraries/modules<br/>sns &lt;- import('seaborn')<br/>plt &lt;- import('matplotlib.pyplot')<br/>pd &lt;- import('pandas')</span></pre><h1 id="5f3a" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">代码结构</h1><p id="7f79" class="pw-post-body-paragraph ju jv iq jw b jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr ij bi translated">这段代码做两件事:</p><h1 id="06bb" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">R 中的 Seaborn 热图</h1><pre class="mo mp mq mr gt ms kv mt mu aw mv bi"><span id="2984" class="mw kx iq kv b gy mx my l mz na">#using R's inbuilt AirPassengers dataset<br/>df &lt;- datasets::AirPassengers<br/>#converting Time-Series object into an R Dataframe <br/>#Thx: <a class="ae mn" href="https://stackoverflow.com/questions/5331901/transforming-a-time-series-into-a-data-frame-and-back" rel="noopener ugc nofollow" target="_blank">https://stackoverflow.com/questions/5331901/transforming-a-time-series-into-a-data-frame-and-back</a><br/>df1 &lt;- data.frame(tapply(df, list(year = floor(time(df)), month = month.abb[cycle(df)]), c))<br/>df1 &lt;- df1[month.abb]<br/>#building a heatmap using seaborn <br/>#please note the function r_to_py() that converts R object into a python <br/>sns$heatmap(r_to_py(df1), fmt="g", cmap ='viridis')<br/>#display the plot<br/>plt$show()</span></pre><p id="f99d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">给出了这个图:</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/663bf8ed533fdd8168a98e8a1d8433ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*9XWcwkDd8D7oGeww.png"/></div></figure><p id="c47f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这真是一张漂亮的热图。为了理解那里发生了什么，我们采用了 AirPassengers 数据集，这是一个时间序列格式的 R 对象。这被转换成数据帧，然后输入到 seaborn 的热图功能，以绘制热图。这里需要注意一些事情:</p><ul class=""><li id="a393" class="lz ma iq jw b jx jy kb kc kf mb kj mc kn md kr me mf mg mh bi translated">在载入 python 库的对象后使用<code class="fe ks kt ku kv b">$</code>符号访问 Python 包的函数。这与使用<code class="fe ks kt ku kv b">$</code>访问数据帧的一列非常相似。</li><li id="7653" class="lz ma iq jw b jx mi kb mj kf mk kj ml kn mm kr me mf mg mh bi translated"><code class="fe ks kt ku kv b">r_to_py()</code>是一个用来把 R 对象转换成 Python 对象的函数。在这种情况下，R 数据帧被转换为 Python Pandas 数据帧，这是热图函数绘制热图的理想对象类型。</li></ul><h1 id="f911" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">R 中的 Seaborn 配对图</h1><pre class="mo mp mq mr gt ms kv mt mu aw mv bi"><span id="52f9" class="mw kx iq kv b gy mx my l mz na">#building a seaborn pairplot using pairplot()<br/>sns$pairplot(r_to_py(iris), hue = 'Species')<br/>#display the plot<br/>plt$show()</span></pre><p id="bccc" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">给出了这个图:</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="nc nd di ne bf nf"><div class="gh gi nb"><img src="../Images/0a1f9511747db46abcdcc00000151f5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FaO6YYxCf-X0BysC.png"/></div></div></figure><p id="582b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这是理解给定数据集中成对关系的一个很好的图。</p><h1 id="cf50" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">结论</h1><p id="22c5" class="pw-post-body-paragraph ju jv iq jw b jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr ij bi translated">因此，只需很少的编码和配置，我们就能在 R 中使用 Python Seaborn 很好地可视化给定的数据集，并绘制出热图和 Pairplot。虽然这篇文章可能已经非常具体地描述了这两个图，但是从这篇文章中可以推断出的更大的想法是理解使用<code class="fe ks kt ku kv b">reticulate</code>包将 Python 代码集成到 R 代码中是多么简单和容易。这里使用的完整代码可以在<a class="ae mn" href="https://github.com/amrrs/seaborn_in_r" rel="noopener ugc nofollow" target="_blank">我的 github </a>上获得。r 是任何形式的数据可视化的神奇工具，要了解更多<a class="ae mn" href="https://bit.ly/2TXIv3t" rel="noopener ugc nofollow" target="_blank">请查看这个</a>。</p><h1 id="e9d4" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">参考</h1><ul class=""><li id="2904" class="lz ma iq jw b jx lu kb lv kf ng kj nh kn ni kr me mf mg mh bi translated"><a class="ae mn" href="https://rstudio.github.io/reticulate/index.html" rel="noopener ugc nofollow" target="_blank">网状文件</a></li><li id="30bb" class="lz ma iq jw b jx mi kb mj kf mk kj ml kn mm kr me mf mg mh bi translated"><a class="ae mn" href="https://datascienceplus.com/how-to-make-seaborn-pairplot-and-heatmap-in-r-write-python-in-r/" rel="noopener ugc nofollow" target="_blank">来源</a></li></ul></div></div>    
</body>
</html>