<html>
<head>
<title>Step by Step: Building an Automated Trading System in Robinhood</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一步一步:在罗宾汉建立自动交易系统</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/step-by-step-building-an-automated-trading-system-in-robinhood-807d6d929cf3?source=collection_archive---------0-----------------------#2019-11-04">https://towardsdatascience.com/step-by-step-building-an-automated-trading-system-in-robinhood-807d6d929cf3?source=collection_archive---------0-----------------------#2019-11-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/5f2771540607a7a0fa11dfbdec2efd2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*l_Nat3rXNcCEFc3j"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">Photo by <a class="ae kf" href="https://unsplash.com/@nampoh?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Maxim Hopman</a> on <a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5257" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我将探索通过 Python 代码与 Robinhood API 集成的用法。</p><p id="1c67" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">想法是用 Robinhood 做交易平台。Robinhood API 对市场数据的访问非常有限。不建议将他们的 API 用于数据目的。</p><h1 id="a93c" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">什么是罗宾汉？</h1><p id="2c70" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">Robinhood 提供了一种允许客户买卖股票和交易所交易基金(ETF)而无需支付佣金的方式。它是一个交易平台，还没有提供官方的 API。</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><p id="e170" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu"> <em class="mo">注来自《走向数据科学》的编辑:</em> </strong> <em class="mo">虽然我们允许独立作者根据我们的</em> <a class="ae kf" rel="noopener" target="_blank" href="/questions-96667b06af5"> <em class="mo">规则和指导方针</em> </a> <em class="mo">发表文章，但我们不认可每个作者的贡献。你不应该在没有寻求专业建议的情况下依赖一个作者的作品。详见我们的</em> <a class="ae kf" rel="noopener" target="_blank" href="/readers-terms-b5d780a700a4"> <em class="mo">读者术语</em> </a> <em class="mo">。</em></p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="34e9" class="le lf it bd lg lh mp lj lk ll mq ln lo lp mr lr ls lt ms lv lw lx mt lz ma mb bi translated">开始吧</h1><p id="251f" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">如果你搜索<code class="fe mu mv mw mx b">Robinhood API python</code>，有大量的 Github 链接或者文档。但是大部分都不支持最新的 API。还有一些项目很久没更新了，见<a class="ae kf" href="https://github.com/sanko/Robinhood" rel="noopener ugc nofollow" target="_blank"> sanko 的罗宾汉</a>。</p><p id="7342" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里我用的是<a class="ae kf" href="https://github.com/LichAmnesia/Robinhood" rel="noopener ugc nofollow" target="_blank"> Robinhood </a>(一个 python 框架)，它最初来自<a class="ae kf" href="https://github.com/Jamonek/Robinhood" rel="noopener ugc nofollow" target="_blank"> Jamonek 的 Robinhood 框架</a>。自从 Robinhood 实施强制 MFA 以来，我做了一些改变以确保它的工作。</p><p id="84cd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在控制台中找到您想要下载的位置，然后简单地运行:</p><blockquote class="my mz na"><p id="f23b" class="kg kh mo ki b kj kk kl km kn ko kp kq nb ks kt ku nc kw kx ky nd la lb lc ld im bi translated">git 克隆<a class="ae kf" href="https://github.com/LichAmnesia/Robinhood" rel="noopener ugc nofollow" target="_blank">https://github.com/LichAmnesia/Robinhood</a>T27】CD 罗宾汉<br/> sudo python3 setup.py install</p></blockquote><p id="c638" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那你就可以走了！</p><h1 id="8e29" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">注册</h1><p id="0841" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">默认方式需要你手持手机输入验证码。</p><p id="2ac8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这样，您需要每 24 小时登录一次，因为您的身份验证令牌将过期。</p><p id="c563" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用类似这样的内容登录:</p><figure class="ne nf ng nh gt ju"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="7407" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果不想启用 2FA，可以跳过这一部分。启用 2FA 后，每次登录罗宾汉网站时都需要输入验证码。</p><p id="8acc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">若要启用 2FA，请转到您的 Robinhood Web 应用程序。进入设置，打开 2FA，选择“认证 App”，点击“扫描不了？”，并复制 16 个字符的二维码。</p><p id="ef68" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用类似这样的内容登录:</p><figure class="ne nf ng nh gt ju"><div class="bz fp l di"><div class="ni nj l"/></div></figure><h1 id="b701" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">访问市场数据</h1><p id="ee15" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">数据是任何策略的支柱，但 Robinhood API 只返回股票非常基本的信息。</p><figure class="ne nf ng nh gt ju"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="1576" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您需要历史价格数据:</p><figure class="ne nf ng nh gt ju"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="21ef" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">目前，API 仅支持 5 分钟| 10 分钟| 30 分钟|天|周的时间间隔。日期范围为日|周|年| 5 年|全部。</p><h1 id="0f9d" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">从 API 交易</h1><p id="e4d9" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">Robinhood 需要你有 25k 以上才能做日内交易。否则 5 天只能做 4 天的交易。参见<a class="ae kf" href="https://robinhood.com/support/articles/360001227026/pattern-day-trading/" rel="noopener ugc nofollow" target="_blank">罗宾汉模式日交易</a>。</p><p id="983d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由于 Robinhood 没有任何纸质账户，因此从 API 执行的所有订单都与在 App 中执行的订单相同。</p><p id="9c04" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里我用<code class="fe mu mv mw mx b">DWT</code>举例，每股 5 美元。</p><p id="b3c9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我提交一份市价单:</p><figure class="ne nf ng nh gt ju"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="4db0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此处<code class="fe mu mv mw mx b">GFD</code>表示当天有效，如果今天未满将被取消。此外，您可以设置<code class="fe mu mv mw mx b">GTC</code>,这意味着直到取消良好。</p><p id="1050" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">做市价单截图:</p><figure class="ne nf ng nh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nk"><img src="../Images/decbcf9b8bc0509c9bb24c099f30e91e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gNHa018I43LpNvheXzl8Nw.png"/></div></div></figure><p id="946e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我可以看到一个市场买入订单在排队，一个市场卖出订单错过了。</p><p id="3d2f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这里我收到了<code class="fe mu mv mw mx b">400 Client Error: Bad Request for url: https://api.robinhood.com/orders/</code>。因为如果你没有足够的库存，罗宾汉不允许你发出卖出指令。</p><p id="cfb5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">记得平仓你的<code class="fe mu mv mw mx b">DWT</code>。</p><p id="4cd2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我试着做限价单并取消它:</p><figure class="ne nf ng nh gt ju"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="72c0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">限价单制作和取消截图:</p><figure class="ne nf ng nh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nl"><img src="../Images/c998870c43311430b22aa517b8d168a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D4wHnI2__IjFyaOuE5hctg.png"/></div></div></figure><p id="9bd7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所有支持的订单功能:</p><blockquote class="my mz na"><p id="69a7" class="kg kh mo ki b kj kk kl km kn ko kp kq nb ks kt ku nc kw kx ky nd la lb lc ld im bi translated">place _ market _ buy _ order<br/>place _ market _ sell _ order<br/>place _ limit _ buy _ order<br/>place _ limit _ sell _ order<br/>place _ stop _ loss _ sell _ order<br/>place _ stop _ limit _ sell _ order</p></blockquote><h1 id="e784" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">账户管理</h1><p id="011e" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">如果您想查看您的当前头寸和当前市值:</p><figure class="ne nf ng nh gt ju"><div class="bz fp l di"><div class="ni nj l"/></div></figure><h1 id="537a" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">然后</h1><p id="9435" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">学习和建立一个自动交易系统并不容易。有了正确的工具，你现在可以开始制作你的第一个交易算法。接下来，我打算谈谈如何在 Robinhood 中建立一个基本的交易策略。如果你有任何问题，请在下面提问。</p></div></div>    
</body>
</html>