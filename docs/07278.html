<html>
<head>
<title>Hands-On Python Data Visualization — Seaborn Count Plot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 数据可视化实践 Seaborn 计数图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/hands-on-python-data-visualization-seaborn-count-plot-90e823599012?source=collection_archive---------10-----------------------#2019-10-13">https://towardsdatascience.com/hands-on-python-data-visualization-seaborn-count-plot-90e823599012?source=collection_archive---------10-----------------------#2019-10-13</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><figure class="gm go js jt ju jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj jr"><img src="../Images/7557ad96176f026bed7b8cb76ea13cc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JL6IaT0HJkOeAB2PBM4nSg.jpeg"/></div></div><figcaption class="kc kd gk gi gj ke kf bd b be z dk">A Seaborn Count Plot</figcaption></figure><p id="2a69" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">在本教程中，我们将一步一步地展示如何使用<a class="ae le" href="https://seaborn.pydata.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="ki iv"> Python Seaborn 库</strong> </a>来创建计数图。基本上，Seaborn 计数图是一个图形显示，使用条形图显示每个分类数据的出现次数或频率。</p></div><div class="ab cl lf lg hy lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="in io ip iq ir"><h1 id="1ce1" class="lm ln iu bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><strong class="ak">数据来源</strong></h1><p id="8878" class="pw-post-body-paragraph kg kh iu ki b kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld in bi translated">公共 Airbnb 数据集“<em class="mp"> AB_NYC_2019.csv”，</em>将用作样本数据来创建 Seaborn 计数图。数据集可以从 Kaggle 获取(<a class="ae le" href="https://www.kaggle.com/dgomonov/new-york-city-airbnb-open-data" rel="noopener ugc nofollow" target="_blank">https://www . ka ggle . com/dgomonov/new-York-city-Airbnb-open-data</a>)。</p></div><div class="ab cl lf lg hy lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="in io ip iq ir"><h1 id="a54a" class="lm ln iu bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><strong class="ak">先决条件 Python 库</strong></h1><ul class=""><li id="8dd3" class="mq mr iu ki b kj mk kn ml kr ms kv mt kz mu ld mv mw mx my bi translated">熊猫(<a class="ae le" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank">https://pandas.pydata.org/</a>)</li><li id="5b50" class="mq mr iu ki b kj mz kn na kr nb kv nc kz nd ld mv mw mx my bi translated">马特普利布(<a class="ae le" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank">https://matplotlib.org/</a>)</li><li id="f9a7" class="mq mr iu ki b kj mz kn na kr nb kv nc kz nd ld mv mw mx my bi translated">西博恩(<a class="ae le" href="https://seaborn.pydata.org/" rel="noopener ugc nofollow" target="_blank">https://seaborn.pydata.org/</a>)</li><li id="bc7a" class="mq mr iu ki b kj mz kn na kr nb kv nc kz nd ld mv mw mx my bi translated">朱庇特笔记本/朱庇特实验室(<a class="ae le" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank">https://jupyter.org/</a>)</li></ul><p id="a964" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">每个库的安装和设置细节都在它们的官方网站上给出。</p></div><div class="ab cl lf lg hy lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="in io ip iq ir"><h1 id="dc7c" class="lm ln iu bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">它是如何工作的</h1><p id="1e79" class="pw-post-body-paragraph kg kh iu ki b kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld in bi translated">步骤 0:创建一个 Jupyter 笔记本文档。</p><p id="9759" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">我们将编写 Python 脚本并在 Jupyter 笔记本环境中运行它。</p><p id="0bc9" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated"><strong class="ki iv">第一步:导入库并读取数据。</strong></p><p id="e578" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">一旦库准备就绪，我们就可以继续读取并可视化来自“<em class="mp"> AB_NYC_2019.csv </em>”的前五行列表数据。</p><figure class="ne nf ng nh gu jv"><div class="bz fq l di"><div class="ni nj l"/></div></figure><figure class="ne nf ng nh gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj nk"><img src="../Images/03a86e7fc6f204872987255cfaf7605f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OrzHOJhzAAW04SQ1DHgLQQ.jpeg"/></div></div><figcaption class="kc kd gk gi gj ke kf bd b be z dk">First five rows of data from “<em class="nl">AB_NYC_2019.csv</em>”</figcaption></figure><p id="e071" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated"><strong class="ki iv">步骤 2:为单个分类变量"<em class="mp"> room_type </em> " </strong>创建一个简单的计数图</p><p id="3c37" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">当我们观察数据集时，在“<em class="mp"> room_type </em>”列中显示的基本上有三种类型的房间(“私人房间”、“整个家/apt”、“共享房间”)。直观显示每种房间类型的观察计数的一种简单方法是创建计数图。我们可以通过添加几行代码(第 13–16 行)轻松创建计数图，如下所示。</p><figure class="ne nf ng nh gu jv"><div class="bz fq l di"><div class="ni nj l"/></div><figcaption class="kc kd gk gi gj ke kf bd b be z dk">Create a count plot for a single categorical variable (room_type)</figcaption></figure><ul class=""><li id="a68c" class="mq mr iu ki b kj kk kn ko kr nm kv nn kz no ld mv mw mx my bi translated">第 14 行——为我们的情节设置一个 Seaborn 主题“黑暗网格”。</li><li id="51fb" class="mq mr iu ki b kj mz kn na kr nb kv nc kz nd ld mv mw mx my bi translated">第 15 行—将分类变量“<em class="mp"> room_type </em>”(目标列)分配给参数“<em class="mp"> x </em>”。参数“<em class="mp">数据</em>分配给绘图数据集<em class="mp"> airbnb </em>。</li></ul><p id="3892" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">快速生成一个简单的计数图。</p><figure class="ne nf ng nh gu jv gi gj paragraph-image"><div class="gi gj np"><img src="../Images/0bb8a9b3f68871774e4949d9d5a4f178.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*twUQafQYTxBdj9vI7QT7Hw.jpeg"/></div><figcaption class="kc kd gk gi gj ke kf bd b be z dk">A count plot for single categorical variables</figcaption></figure><p id="a0c1" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated"><strong class="ki iv">步骤 3:为两个分类变量“<em class="mp">房间类型</em>和“邻居组”</strong>创建计数图 <strong class="ki iv"/></p><p id="4589" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">比方说，如果我们希望了解不同邻居组中每种房间类型的一般可用性，我们可以基于两个分类变量创建计数图，“<em class="mp">房间类型</em>和“<em class="mp">邻居组</em>”。</p><figure class="ne nf ng nh gu jv"><div class="bz fq l di"><div class="ni nj l"/></div></figure><ul class=""><li id="d32d" class="mq mr iu ki b kj kk kn ko kr nm kv nn kz no ld mv mw mx my bi translated">第 15 行—在 seaborn.countplot()中再添加一个参数“<em class="mp">色调</em>，并为其分配第二个分类变量“<em class="mp">neighborhood _ group</em>”。</li></ul><figure class="ne nf ng nh gu jv gi gj paragraph-image"><div class="gi gj nq"><img src="../Images/c1967289867ca9dfedf6c92ffbf9aed9.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*rIECy6Gkp8bf0dyy4uKvrQ.jpeg"/></div><figcaption class="kc kd gk gi gj ke kf bd b be z dk">A count plot for two categorical variables</figcaption></figure><p id="6f25" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">从上面的计数图中，很明显“整个家庭/公寓”的房间类型在曼哈顿非常常见。该图还揭示了在数据集中的所有邻域组中“共享房间”的可用性非常有限。因此，我们得到合住房间的机会相对较低。</p><p id="3425" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated"><strong class="ki iv">步骤 4:为三个分类变量“<em class="mp">房间类型</em>”、“邻居组”和“价格组”</strong>创建计数图 <strong class="ki iv"/></p><p id="2f7a" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">我们也经常会遇到这样的情况:我们的旅行预算有限，希望计划一次住宿费用较低的旅行。一张显示不同地点中低价住宿信息的图表可能对我们的旅行计划有帮助。</p><p id="3816" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">为此，我们可以在现有的 Airbnb 数据集中添加一个新列“<em class="mp">price _ group”</em>。</p><figure class="ne nf ng nh gu jv"><div class="bz fq l di"><div class="ni nj l"/></div><figcaption class="kc kd gk gi gj ke kf bd b be z dk">Add new column “price_group” into table</figcaption></figure><ul class=""><li id="63e5" class="mq mr iu ki b kj kk kn ko kr nm kv nn kz no ld mv mw mx my bi translated">第 9 行到第 15 行<strong class="ki iv"> </strong> —创建一个函数<em class="mp"> groupPrice() </em>将房间价格分为三个不同的组:低成本(低于 100 美元)、中等成本(100 美元到 200 美元)和高成本(高于 200 美元)。</li><li id="6ae4" class="mq mr iu ki b kj mz kn na kr nb kv nc kz nd ld mv mw mx my bi translated">第 17 行—将<em class="mp"> groupPrice() </em>函数应用于数据集的现有<em class="mp"> price </em>列。这将创建一个新列，其中包含三个不同的分类值(“低成本”、“中成本”和“高成本”)。</li><li id="4482" class="mq mr iu ki b kj mz kn na kr nb kv nc kz nd ld mv mw mx my bi translated">第 18 行—在数据集中的“价格”列旁边插入新列。</li><li id="b05d" class="mq mr iu ki b kj mz kn na kr nb kv nc kz nd ld mv mw mx my bi translated">第 19 行—显示前五行记录。<strong class="ki iv">您将看到新列“<em class="mp">价格 _ 组</em>”被添加到表格中“<em class="mp">价格</em>”旁边的列中。</strong></li></ul><figure class="ne nf ng nh gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj nr"><img src="../Images/c271ed5da4f11abd9e1d96489b12e303.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sxYOCwy7TbfzXjuLeBf1XA.jpeg"/></div></div><figcaption class="kc kd gk gi gj ke kf bd b be z dk">Added new column in the table</figcaption></figure><p id="a279" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">接下来，我们使用<em class="mp"> catplot() </em>合并三个计数图。</p><figure class="ne nf ng nh gu jv"><div class="bz fq l di"><div class="ni nj l"/></div></figure><ul class=""><li id="6ea4" class="mq mr iu ki b kj kk kn ko kr nm kv nn kz no ld mv mw mx my bi translated">第 22 行—组合三组计数图，这些计数图由第三个分类变量“<em class="mp"> price_group </em>”分组。这是通过在 Seaborn 函数<em class="mp"> catplot()中将“<em class="mp"> price_group </em>”赋值给参数“<em class="mp"> col </em>”来实现的。</em></li></ul><figure class="ne nf ng nh gu jv gi gj paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="gi gj ns"><img src="../Images/f4476d6ce9bdc169c4752fdd80b4de04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0cbrxGb8ro7pKIp4EtaesQ.jpeg"/></div></div><figcaption class="kc kd gk gi gj ke kf bd b be z dk">Count plots based on three categorical variables</figcaption></figure><p id="81a6" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">该图显示，布鲁克林可能是一个寻求低成本私人房间的个人旅行者的好选择。曼哈顿或布鲁克林可能是家庭/团体旅行的理想目的地，因为这相对更容易获得一个合理的中等价格范围的整个家庭/公寓单元，可供一群旅行者分享。</p></div><div class="ab cl lf lg hy lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="in io ip iq ir"><p id="a4f9" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated"><strong class="ki iv">结论</strong></p><p id="1b59" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">当我们浏览上面的教程时，我们会发现使用 Seaborn 只需几行代码就可以生成一个吸引人的计数图，这并不困难。计数图可以揭示许多从原始数据集中无法直接发现的事实。</p><p id="e766" class="pw-post-body-paragraph kg kh iu ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld in bi translated">我希望你喜欢阅读这篇文章。非常欢迎您的评论或任何询问。</p></div></div>    
</body>
</html>