<html>
<head>
<title>Google Cloud: An-Easy-Way-to-an-Amazing-Platform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌云:一个简单到令人惊叹的平台</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/google-cloud-an-easy-way-to-an-amazing-platform-1dc97c00ab9b?source=collection_archive---------12-----------------------#2019-01-19">https://towardsdatascience.com/google-cloud-an-easy-way-to-an-amazing-platform-1dc97c00ab9b?source=collection_archive---------12-----------------------#2019-01-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="34eb" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">云是关于你如何计算，而不是你在哪里计算。— Paul Maritz，VMware 和 Pivotal 前首席执行官</h2></div></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><blockquote class="km kn ko"><p id="213d" class="kp kq kr ks b kt ku jr kv kw kx ju ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">免费免费使用您的谷歌云帐户的最佳描述方式..👽</p></blockquote><h1 id="3c95" class="lm ln iq bd lo lp lq lr ls lt lu lv lw jw lx jx ly jz lz ka ma kc mb kd mc md bi translated"><strong class="ak">为什么是云？</strong></h1><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi me"><img src="../Images/f9aff30373b1e63877789e82a40adecb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*unEDDoHEM9OOd7xrMkepPg.jpeg"/></div></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk"><a class="ae mu" href="https://hdwallsource.com/telescope-desktop-hd-wallpaper-51772.html" rel="noopener ugc nofollow" target="_blank">Telescope Desktop HD Wallpaper</a></figcaption></figure><p id="9130" class="pw-post-body-paragraph kp kq iq ks b kt ku jr kv kw kx ju ky mv la lb lc mw le lf lg mx li lj lk ll ij bi translated">所以你最终决定进入深度学习游戏，只是意识到在你的笔记本电脑上训练你的深度学习模型需要亿万年，因为要么你没有 GPU，所以你必须在 CPU 上训练你的模型，要么你甚至更不幸，只能用 AMD。不管怎样，我知道那种感觉，真的很糟糕😞</p><pre class="mf mg mh mi gt my mz na nb aw nc bi"><span id="3ff3" class="nd ln iq mz b gy ne nf l ng nh">  Get your game on already, AMD!</span></pre><h1 id="130e" class="lm ln iq bd lo lp lq lr ls lt lu lv lw jw lx jx ly jz lz ka ma kc mb kd mc md bi translated">现在最基本的问题！！什么是云计算？</h1><figure class="mf mg mh mi gt mj gh gi paragraph-image"><a href="https://www.google.co.in/url?sa=i&amp;source=images&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwjalof2zPnfAhWSA3IKHRUgDvsQjhx6BAgBEAM&amp;url=https%3A%2F%2Fwww.cyberciti.biz%2Fhumour%2Fdad-what-are-clouds-made-of-in-it%2F&amp;psig=AOvVaw07Ir7lMv3USskfbO2DSZVk&amp;ust=1547978901470980"><div class="gh gi ni"><img src="../Images/0920d2a913c469abe4113a0a42da5a2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OuRPNKuAgKXQ3QdqmQg1AA.jpeg"/></div></a><figcaption class="mq mr gj gh gi ms mt bd b be z dk">Dad: What are clouds made of in IT? — nixCraft</figcaption></figure><p id="bac5" class="pw-post-body-paragraph kp kq iq ks b kt ku jr kv kw kx ju ky mv la lb lc mw le lf lg mx li lj lk ll ij bi translated">在云计算中，建设和维护数据中心的资本投资被作为云“提供商”提供的弹性、类似公用事业的服务(包括存储、计算、网络、数据处理和分析、应用程序开发、机器学习，甚至完全托管的服务)来消费 IT 资源所取代。</p><h2 id="7656" class="nd ln iq bd lo nj nk dn ls nl nm dp lw mv nn no ly mw np nq ma mx nr ns mc nt bi translated">谷歌云平台 300 美元免费积分——为深度学习学生提供难以置信的优惠:</h2><p id="224b" class="pw-post-body-paragraph kp kq iq ks b kt nu jr kv kw nv ju ky mv nw lb lc mw nx lf lg mx ny lj lk ll ij bi translated">朋友们好！😍</p><p id="7acb" class="pw-post-body-paragraph kp kq iq ks b kt ku jr kv kw kx ju ky mv la lb lc mw le lf lg mx li lj lk ll ij bi translated">如果你是一名机器学习工程师/深度学习工程师/开发人员，还没有注册 GCP 帐户，你可以在<em class="kr"> </em> <a class="ae mu" href="https://cloud.google.com/free/" rel="noopener ugc nofollow" target="_blank"> <em class="kr">这里</em> </a> <em class="kr"> </em>从你的任何 gmail 帐户启用 GCP，并获得第一年 300 美元的免费点数(12 个月免费 wow gpu)。这个信用足够好，几乎 1000 小时的英伟达特斯拉 K80 图形处理器或英伟达特斯拉 P100 图形处理器！！</p><h1 id="02ce" class="lm ln iq bd lo lp lq lr ls lt lu lv lw jw lx jx ly jz lz ka ma kc mb kd mc md bi translated">在我们开始之前</h1><pre class="mf mg mh mi gt my mz na nb aw nc bi"><span id="c9ec" class="nd ln iq mz b gy ne nf l ng nh"> # --BIG REMINDER: </span><span id="3679" class="nd ln iq mz b gy nz nf l ng nh">Make sure you stop your instances-</span></pre><blockquote class="km kn ko"><p id="db12" class="kp kq kr ks b kt ku jr kv kw kx ju ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">当你完成时，不要忘记停止你的实例(通过点击显示你的实例的页面顶部的停止按钮)，否则你将耗尽信用，这将是令人伤心的。😩</p></blockquote><p id="263f" class="pw-post-body-paragraph kp kq iq ks b kt ku jr kv kw kx ju ky mv la lb lc mw le lf lg mx li lj lk ll ij bi translated">如果您正确遵循下面的说明，您应该能够重新启动实例，并且下载的软件仍然可用。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><a href="https://www.google.co.in/url?sa=i&amp;source=images&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwjT9vXbzPnfAhVBbn0KHUL8C6YQjhx6BAgBEAM&amp;url=http%3A%2F%2Fcs231n.github.io%2Fgce-tutorial%2F&amp;psig=AOvVaw2zc7K2U1HsiOklU1NpRTIx&amp;ust=1547978468294767"><div class="gh gi oa"><img src="../Images/f00055f799e56e8af60b0ad8cae3e114.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*sDMB4YoYHLSnGkz60koQBg.png"/></div></a><figcaption class="mq mr gj gh gi ms mt bd b be z dk">CS231n Stanford: Google Cloud Tutorial</figcaption></figure><h1 id="f4e0" class="lm ln iq bd lo lp lq lr ls lt lu lv lw jw lx jx ly jz lz ka ma kc mb kd mc md bi translated">创建和配置您的帐户:</h1><p id="9ec6" class="pw-post-body-paragraph kp kq iq ks b kt nu jr kv kw nv ju ky mv nw lb lc mw nx lf lg mx ny lj lk ll ij bi translated">如果你没有 Google cloud 账户，可以通过访问 Google Cloud <a class="ae mu" href="https://cloud.google.com/free/" rel="noopener ugc nofollow" target="_blank">主页</a>并点击计算来创建一个。当你进入下一页时，点击蓝色的免费试用按钮。如果您没有登录 gmail，您将会看到如下所示的页面。登录您的 gmail 帐户或创建一个新帐户如果您没有帐户，请填写所有必要的卡详细信息(您可以使用任何信用卡或借记卡(不包括 SBI)作为支付方式)。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi ob"><img src="../Images/1b5bd9b91d7b26cb5b9b2e05ca83e2ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AO4PKD4yGnpAqPRSROdJ_g.png"/></div></div></figure><p id="d166" class="pw-post-body-paragraph kp kq iq ks b kt ku jr kv kw kx ju ky mv la lb lc mw le lf lg mx li lj lk ll ij bi translated">在第一个选项中单击相应的“是”或“否”按钮，在阅读完所需的协议后，在第二个选项中选择“是”。按蓝色的同意并继续按钮进入下一页，输入所需信息(您的姓名、帐单地址和信用卡信息)。记住选择“个人”作为“账户类型”:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi oc"><img src="../Images/e00c6a97ac92fc0b2f4a29882e5d2f26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XE1ov8U3E4XL2PH4MQlv-w.png"/></div></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">A dummy account 😘</figcaption></figure><p id="c4bf" class="pw-post-body-paragraph kp kq iq ks b kt ku jr kv kw kx ju ky mv la lb lc mw le lf lg mx li lj lk ll ij bi translated">输入所需信息后，请按蓝色的“开始我的免费试用”按钮。你会看到这样一个页面:Tan Tadha da dha👐— —现在你在你的谷歌云平台里了！！点击左上角以蓝色显示的谷歌云平台，它将带你进入主仪表盘:</p><pre class="mf mg mh mi gt my mz na nb aw nc bi"><span id="f8e0" class="nd ln iq mz b gy ne nf l ng nh">   Dashboard will looks like</span></pre><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi od"><img src="../Images/d8f57f2c85bcf6798f5ac8849c23cb0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NbWD7JsO-WsKtTKZ1Yb4bA.png"/></div></div></figure><h1 id="c2a5" class="lm ln iq bd lo lp lq lr ls lt lu lv lw jw lx jx ly jz lz ka ma kc mb kd mc md bi translated">重要提示:</h1><p id="840c" class="pw-post-body-paragraph kp kq iq ks b kt nu jr kv kw nv ju ky mv nw lb lc mw nx lf lg mx ny lj lk ll ij bi translated">一些最近注册了 GCP 的用户，可以在开始他们的项目时看到这个错误:</p><pre class="mf mg mh mi gt my mz na nb aw nc bi"><span id="9392" class="nd ln iq mz b gy ne nf l ng nh">      “Quota ‘GPUS_ALL_REGIONS’ exceeded. Limit: 0.0 globally."</span></pre><blockquote class="km kn ko"><p id="2e8b" class="kp kq kr ks b kt ku jr kv kw kx ju ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">请前往<code class="fe oe of og mz b">Dashboard-&gt; IAM &amp; admin -&gt; Quotas</code> - &gt;搜索以下额度<code class="fe oe of og mz b">GPUs (all region)</code>。</p></blockquote><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi ni"><img src="../Images/3a14b6a7e43e113b252dc08500cde1b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qzf7AyhSE1oyqTPQ8ka6xQ.png"/></div></div></figure><p id="75fe" class="pw-post-body-paragraph kp kq iq ks b kt ku jr kv kw kx ju ky mv la lb lc mw le lf lg mx li lj lk ll ij bi translated">在情况限制，为这是 0，你需要通过点击<code class="fe oe of og mz b">Edit Quotas</code>请求谷歌增加到 1 或任何你需要的值。</p><h1 id="3102" class="lm ln iq bd lo lp lq lr ls lt lu lv lw jw lx jx ly jz lz ka ma kc mb kd mc md bi translated">创建虚拟实例:</h1><p id="14e8" class="pw-post-body-paragraph kp kq iq ks b kt nu jr kv kw nv ju ky mv nw lb lc mw nx lf lg mx ny lj lk ll ij bi translated">启动一个虚拟实例:-: <code class="fe oe of og mz b">Compute Engine-&gt; VM Instances-&gt; Create</code>。</p><p id="30f6" class="pw-post-body-paragraph kp kq iq ks b kt ku jr kv kw kx ju ky mv la lb lc mw le lf lg mx li lj lk ll ij bi translated">这将带你到一个页面，看起来像下面的截图。</p><blockquote class="km kn ko"><p id="e0bf" class="kp kq kr ks b kt ku jr kv kw kx ju ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated"><code class="fe oe of og mz b">(NOTE: Please carefully read the instructions in addition to looking at the screenshots. The instructions tell you generally what values I prefer to fill in :)).</code></p></blockquote><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi oh"><img src="../Images/0646cd90e16c49a10914ce59016a5359.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cQ7OC5_0asQpSjJKq5iZZQ.png"/></div></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">Create your VM Instance</figcaption></figure><p id="2cc2" class="pw-post-body-paragraph kp kq iq ks b kt ku jr kv kw kx ju ky mv la lb lc mw le lf lg mx li lj lk ll ij bi translated">名称:<code class="fe oe of og mz b">xyz</code> - &gt;区:<code class="fe oe of og mz b">us-central-1-c</code> - &gt;(点击自定义)CPU &amp;内存大小:<code class="fe oe of og mz b">4</code> - &gt; GPU : <code class="fe oe of og mz b">1 -Nvidia Tesla P100 or K80</code>(价格适中)- &gt;点击<code class="fe oe of og mz b">change</code>启动盘，选择<code class="fe oe of og mz b">ubuntu 16.04</code>为默认，<code class="fe oe of og mz b">100 GB disk size</code> - &gt;勾选，选择允许 HTTP 流量和允许 HTTPS 流量- &gt;最后按<code class="fe oe of og mz b">Create</code>。</p><p id="9279" class="pw-post-body-paragraph kp kq iq ks b kt ku jr kv kw kx ju ky mv la lb lc mw le lf lg mx li lj lk ll ij bi translated">太棒了。您已经成功创建了您的<code class="fe oe of og mz b">VM instance</code> -它将被永久固定，包含内部和外部 IP 地址(从这里您的 gpu 开始计算您的点数)。见下图截图</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi oi"><img src="../Images/cd1ea092bb7d4ce2e8bdc86e2e9feb20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OZRxbT96A5EczsArnuEafg.png"/></div></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">Instance is ready :)</figcaption></figure><h1 id="3ac9" class="lm ln iq bd lo lp lq lr ls lt lu lv lw jw lx jx ly jz lz ka ma kc mb kd mc md bi translated">几个命令行中最重要但最令人恐慌的设置:😁</h1><p id="5f78" class="pw-post-body-paragraph kp kq iq ks b kt nu jr kv kw nv ju ky mv nw lb lc mw nx lf lg mx ny lj lk ll ij bi translated">现在设置您的谷歌云平台:</p><p id="0cde" class="pw-post-body-paragraph kp kq iq ks b kt ku jr kv kw kx ju ky mv la lb lc mw le lf lg mx li lj lk ll ij bi translated">生成一个 VM 实例后→点击 SSH 附近的一个<code class="fe oe of og mz b">key</code>作为圈出- &gt; <code class="fe oe of og mz b">open in browser window</code> - &gt;一个 google <code class="fe oe of og mz b">Active Cloud Shell</code>！！</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi oj"><img src="../Images/a107c14e5b72e96474eac814b854babc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YWeQ5-9E87HF7ZZQliQtAw.png"/></div></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk">“Google cloud shell”</figcaption></figure><blockquote class="km kn ko"><p id="5af6" class="kp kq kr ks b kt ku jr kv kw kx ju ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">以下是一系列命令行:用于设置你的谷歌云账户</p></blockquote><pre class="mf mg mh mi gt my mz na nb aw nc bi"><span id="a13a" class="nd ln iq mz b gy ne nf l ng nh">$curl -O https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1604/x86_64/cuda-repo-ubuntu1604_9.0.176-1_amd64.debsudo dpkg -i cuda-repo-ubuntu1604_9.0.176-1_amd64.deb</span><span id="8103" class="nd ln iq mz b gy nz nf l ng nh">$ sudo apt-get update<br/>$ sudo apt-get install cuda-9-0</span><span id="4a98" class="nd ln iq mz b gy nz nf l ng nh">$ sudo nvidia-smi -pm 1 <br/>$ nvidia-smi </span><span id="2cb1" class="nd ln iq mz b gy nz nf l ng nh">$ wget "https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64/libcudnn7_7.0.4.31 1+cuda9.0_amd64.deb" </span><span id="099a" class="nd ln iq mz b gy nz nf l ng nh">$ sudo dpkg -i libcudnn7_7.0.4.31-1+cuda9.0_amd64.deb </span><span id="44f4" class="nd ln iq mz b gy nz nf l ng nh">$ echo 'export CUDA_HOME=/usr/local/cuda' &gt;&gt; ~/.bashrc<br/>$ echo 'export PATH=$PATH:$CUDA_HOME/bin' &gt;&gt; ~/.bashrc<br/>$ echo 'export LD_LIBRARY_PATH=/usr/local/cuda/extras/CUPTI/lib64:$LD_LIBRARY_PATH' &gt;&gt; ~/.bashrcsource ~/.bashrc </span><span id="dcc0" class="nd ln iq mz b gy nz nf l ng nh">$ sudo apt-get install python3-dev </span><span id="7903" class="nd ln iq mz b gy nz nf l ng nh">$ python3-pip libcupti-dev<br/>$ sudo pip3 install tensorflow-gpu </span><span id="4452" class="nd ln iq mz b gy nz nf l ng nh"># this applies to all GPUs<br/>$ sudo nvidia-smi -pm 1  </span><span id="3159" class="nd ln iq mz b gy nz nf l ng nh">$ python3</span><span id="0489" class="nd ln iq mz b gy nz nf l ng nh">import tensorflow as tf </span><span id="c0e2" class="nd ln iq mz b gy nz nf l ng nh">with tf.device('/cpu:0'):    <br/> a_c = tf.constant([1.0, 2.0, 3.0, 4.0], shape=[1, 3],name='a-cpu')   <br/> b_c = tf.constant([1.0, 2.0, 3.0, 4.0], shape=[3, 1], name='b-cpu')<br/> c_c = tf.matmul(a_c, b_c, name='c-cpu')<br/> <br/>with tf.device('/gpu:0'):    <br/> a_g = tf.constant([1.0, 2.0, 3.0, 4.0], shape=[1, 3], name='a-gpu')<br/> b_g = tf.constant([1.0, 2.0, 3.0, 4.0], shape=[3, 1], name='b-gpu') <br/> c_g = tf.matmul(a_g, b_g, name='c-gpu') </span><span id="63c4" class="nd ln iq mz b gy nz nf l ng nh">with tf.Session(config=tf.ConfigProto(log_device_placement=True)) as sess:    </span><span id="e80a" class="nd ln iq mz b gy nz nf l ng nh">   print (sess.run(c_c))   <br/>   print (sess.run(c_g)) <br/>print ('DONE!')</span></pre><p id="6c75" class="pw-post-body-paragraph kp kq iq ks b kt ku jr kv kw kx ju ky mv la lb lc mw le lf lg mx li lj lk ll ij bi translated">现在简单的说就是把每一个命令行复制粘贴到谷歌云终端，你会发现我们已经在他们的服务器上了，网速，流畅度都比你的本地机器好得多。</p><p id="8fbf" class="pw-post-body-paragraph kp kq iq ks b kt ku jr kv kw kx ju ky mv la lb lc mw le lf lg mx li lj lk ll ij bi translated">从最后两行开始，我已经在 google-cloud 中安装了“tensorflow-gpu ”,并在终端中进行了测试。</p><p id="8985" class="pw-post-body-paragraph kp kq iq ks b kt ku jr kv kw kx ju ky mv la lb lc mw le lf lg mx li lj lk ll ij bi translated">为了进一步的测试，我包含了从这段代码到我的 github 库的链接:<a class="ae mu" href="https://github.com/tarahb2103" rel="noopener ugc nofollow" target="_blank"> github </a> : <code class="fe oe of og mz b"><a class="ae mu" href="https://github.com/tarahb2103/Google-Cloud-An-Easy-Way-to-an-Amazing-Platform/blob/master/gpu/gpu_mnist_speedcheck.py" rel="noopener ugc nofollow" target="_blank">gpu_mnist_speedcheck.py</a></code>:只要把代码复制到你的 gcp 引擎的终端，然后按 enter - tadha da🎉—现在你会发现，与本地机器相比，培训大约是 15 倍。</p><blockquote class="km kn ko"><p id="3e3d" class="kp kq kr ks b kt ku jr kv kw kx ju ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated"><strong class="ks ir">注意:</strong>在这里你可以安装所有需要的库(比如 pytorch，mxnet 等。)你的深度学习项目想要什么就有什么。在完成您的培训模块后，请按 SSH 附近的<code class="fe oe of og mz b">Stop</code>(在 3 个点上)来停止您的实例，以确保您的学分持续更长时间。</p></blockquote></div><div class="ab cl kf kg hu kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ij ik il im in"><pre class="mf mg mh mi gt my mz na nb aw nc bi"><span id="373d" class="nd ln iq mz b gy ne nf l ng nh"> Thank You Everyone  See you soon!</span></pre></div></div>    
</body>
</html>