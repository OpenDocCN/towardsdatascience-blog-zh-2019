# 数据科学家数据可视化的终极技能

> 原文：<https://towardsdatascience.com/the-ultimate-technical-skill-in-data-visualization-for-data-scientists-73bc827166dd?source=collection_archive---------5----------------------->

## 超越 ggplot2、matplotlib、seaborn、Shiny、Dash、R 或 python 的是什么。这些是在数据可视化方面达到下一个水平的技能。

![](img/20714d78b5c5ec22a15319745819aab2.png)

# 摘要

*任何处理数据的人都必须能够将数据可视化。随着用户界面(UI)技术最近的发展，对 UI 的期望大大增加。我主张让数据科学家创建富 web 应用程序的通用框架鼓励令人沮丧的开发体验，并且学习一些 web 开发中的基本技能将极大地改善开发体验。*

# 介绍

人们普遍认为，数据是许多企业的新黄金，因为它允许更好的决策和更好的洞察力。我们总是需要查看数据:在勘探阶段，在模型诊断阶段或在生产期间。从 Excel 到 Tableau，通过`python` matplotlib，工具的复杂程度各不相同。不同的需求将导致自动化过程中不同类型的痛苦。尽管如此，我相当肯定我们都希望展示一些漂亮、别致和交互式的仪表盘和故事，并把它们分发给我们的利益相关者或观众。标准流程是将我们的解决方案打包成 web 应用程序(一个应用程序在客户端设备上运行部分逻辑，另一个在服务器上运行)。

根据我的经验，使用数据科学中典型的工具包创建 web 应用程序会导致令人沮丧和愤怒的时刻。然而，这个问题有一个非常好的解决方案，我希望它能像对我一样帮助你。剧透一下，我的解决方案包括学习 Lisp(it 的一种特殊方言)，这是与人工智能相关的最古老的编程语言之一。

本文的目标读者是那些需要显示工作数据的人，尤其是那些需要创建 web 应用程序中常见的高度定制和适应性可视化的社区。也就是说，任何需要创建定制用户界面的典型数据科学家都可以从阅读中受益。

在继续阅读之前，如果你从未使用过`ggplot2`和`plotly`，我肯定地建议你先了解一下它们，因为它们教授了一些数据可视化的标准逻辑，并提供了一个你应该从图中期待什么的基线。

# 故事

一种观点认为，有了背景，想法总是更容易被理解。我的背景相当普通:我总是喜欢解决问题，所以我走的是数据分析师的典型道路(或者你喜欢用的任何同义词:科学家、定量分析师、统计学家)。在大学里，我出于对该领域的热爱，在第一个学位时研究了一个不切实际的领域(数学)。在我的第一份工作中，我开始欣赏统计学、机器学习和编程，这使我在网上纳米学位和第二个正式硕士学位(不要评价我，幸好教育在瑞士很便宜)的空闲时间里深入研究它们。

这段时间，我投入时间用他们的标准包研究了`R`和`python`进行数据分析。幸运的是，我强迫自己学习和使用 emacs，这让我成为一名更快乐的专业人士。

至于我的工作，随着人们逐渐习惯于与智能手机或网络浏览器进行交互，我逐渐增加了构建动态分析、报告和解决方案的需求。我在无数场合试图学习`javascript`，但我总是发现它太不直观，这导致我依赖`R`和`python`来解决我的问题。我专业用了两年`R Shiny`。我们的故事从这里开始。

# 问题

在数据科学家中，`R`或`python`是最突出的语言，它们都有一个事实上的*标准库来创建 web 应用程序: [Shiny](https://github.com/rstudio/shiny) 和 [Dash](https://github.com/plotly/dash) 。两者都允许创建 web 应用程序，在宿主语言和`javascript` - `js`代码之间建立桥梁。它们还处理浏览器(前端)和服务器(后端)之间的通信(*例如*数据传输和用户交互)，其中主机语言的进程运行直到终止。此外，它们处理所有的异步`js`交互，并且都提供了简化应用程序部署的解决方案。公平地说，他们在这些方面做得相当不错。然而，我认为合并前端和后端也会带来很多不便，这大大降低了这些框架的价值。*

1.  用户已经习惯了一个非常平滑、快速和动态的行为界面，它有许多奇特的特性，比如表单中的错误消息或动态 UI。由于目标是完全避免`js`，shiny 和 dash 用户在定制 HTML 输出以满足期望方面的表达能力降低了。例如，如果没有 `*js*`的*来创建一个颜色取决于浏览器宽度大小的按钮，这将是相当具有挑战性的。如果存在任何解决方案，它将涉及前端和后端之间的通信循环，导致未经打磨的体验。*
2.  真正模块化的组件很难在两种框架中编写。主要原因是节点 HTML 标识符和后端效果之间的强烈耦合，这是在 HTML 节点抛出用户事件时触发的。此外，对于`Shiny`，模块化代码很难实现，因为环境、名称空间或模块在 r 中并不常见
3.  最后，这是最重要的一点，两种框架都会导致令人沮丧的开发体验。基于这些包的项目中的反馈周期慢得惊人，令人痛苦:当在生产环境中开发新的功能、组件、视图或选项卡时，后端通常会在每次源代码发生变化时完全重启，web 浏览器通常需要刷新，开发人员需要恢复应用程序的特定状态，以查看修改是否达到了预期目的。在任何合理规模的项目中，数据和包将在开始时加载，开发人员将为每一次迭代变更支付初始化成本。在最坏的情况下，由于语法错误，整个应用程序在重新加载时崩溃。(注意，两个框架中都有一个模拟热重装的 hack:后端监听一个文本区域，可以评估[在`eval`命令的意义上]写在里面的代码。也就是说，这可能会导致严重的安全问题。)

# 解决办法

解决的办法是把前端和后端再分一次，学会如何控制前端。这将解决前面列出的所有问题:

1.  您可以充分利用它并控制前端，随着计算在 web 浏览器上呈现，所有 UI 操作都不再需要与后端通信。
2.  大多数前端技术可以处理模块或名称空间。所以你可以有几个名为`type`或`date`的变量，只要它们位于不同的名称空间，就不会有混淆。此外，由于减少了与服务器通信的必要性，代码将更加模块化，因此更加健壮。
3.  热模块替换(或[热重装](https://www.youtube.com/watch?v=KZjFVdU8VLI))也是由大多数框架实现的。最后一点是你应该说服你去尝试的最好的单一特征，如果没有这个特征，你将无法回到过去的生活。

# 艰难而不雅的方式

学习`js`和`ReactJS`(破折号环绕其中)。这是一条艰难的道路，因为如前所述，`js`是一种有许多怪癖的艰难语言。我不是`js`专家，所以我不会提出任何强有力的主张，但我认为这条道路需要大量的[投资](https://hackernoon.com/how-it-feels-to-learn-javascript-in-2016-d3a717dd577f)。

# 寄生语言

[寄生语言](https://www.youtube.com/watch?v=roYaikwyaKw)是通过将语法转换成底层技术来利用现有语言及其工具的编程语言。比如 Scala，分别是 TypeScript，分别是 Java 的寄生语言`js`。寄生语言的优势在于它们可以添加某些范例，并抑制目标语言的一些弱点。例如，TypeScript 将类型属性添加到`js`。

我声称 [ClojureScript](https://clojurescript.org/) ，`cljs`，一个针对`js`的 [Clojure](https://clojure.org/) 的版本，是大多数数据科学家的完美候选。

因为`cljs`代码最终是`js`代码，所以您可以享受同样的速度优势。名称空间是`cljs`的标准特性，比在 Javascript 中更容易使用。[通过](https://www.youtube.com/watch?v=KZjFVdU8VLI)[拨轮](https://figwheel.org/docs/hot_reloading.html)或[阴影 cljs](http://shadow-cljs.org/) 使热装成为可能。

尽管如此，前面所有的观点都可以用`js`来实现，那么我为什么更喜欢`cljs`？

这种语言非常简单，非常稳定，旨在产生优雅而简单的代码。它消除了大多数`js`的陷阱，最佳实践鼓励一种模型，其中数据是代码的中心，而不是容器(*不再有 1500 个类的项目*)。此外，它还带有一个久经考验的标准库，用于操作您的数据。我明确推荐阅读[这个](https://clojurescript.org/guides/faq-js)和观看[那个](https://www.youtube.com/watch?v=gsffg5xxFQI)来看看`cljs`比`js`的好处。

# 后端

至于后端，进行计算的部分，执行业务逻辑的代码将保持不变，但是需要在代码周围添加一个包装器，以响应来自前端的 *HTTP(S)* 请求。这很容易用`R` [铅管](https://www.rplumber.io/)或`python` [烧瓶](http://flask.pocoo.org/)来实现。

对于操作可以由客户端执行的简单情况(例如，按组过滤和分组表格)，输入数据可以存储为`csv`或`json`，一个简单的 HTTP 服务器(在根文件夹中的`python3 -m http.server`命令的意义上)就足够了。见我的[个人网站](https://davidpham87.github.io/)举例。

# 权衡

学习`cljs`也教会他们的用户对任何新的解决方案持怀疑态度。采用`cljs`有哪些弊端？

在功能方面，数据科学家现在负责客户端和服务器之间的通信，这意味着我们需要学习如何设计一些基本的 API。也就是说，这意味着后端为来自客户端的不同 URL 请求返回不同的数据。

生产部署不同于 RStudio 和 Plotly 提供的解决方案。也就是说，由于该架构是 web 应用的标准架构(后端和前端分离),因此有几个云提供商和教程可以为您提供支持。

代码库中现在有两种语言。引入一种新的语言及其工具总是伴随着风险。然而，我坚信有形的好处远远大于潜在的风险。

# 额外好处

学习`cljs`和使用提议的架构还有许多额外的好处。

*   因为`cljs`是 Lisp 方言，因此是函数式编程语言。
*   正如`js`可以瞄准网络、桌面和移动客户端一样，`cljs`也可以。
*   使用`Clojure`将会非常容易，然后您也将能够在 Java 虚拟机上编程。
*   来自 Google Closure 的工具，比如代码分割和死代码消除，对`cljs`来说是可用的，它们将优化你的应用程序的代码大小，带来更平滑的用户体验。
*   你可以使用*任何* `js`可视化框架，尽管`plotly`是一个很好的默认选项。听说过织女星吗？您现在可以使用它，而不依赖于`R`或`python`的包装器。
*   多亏了`cljs`和`js`之间的互操作性，你可以在你的语言的包装器上利用任何用`js`编写的`ReactJS`组件。你甚至可以重用 dash-html-components。
*   在某个时候，你会学到 emacs，这是有史以来最好的生产力工具。再加上你的 Lisp 知识，你就可以随心所欲的配置了(但不要同时学习 *emacs* 和`cljs`)。

# 结论

在本文中，我提倡数据科学家花时间学习 web 开发中的关键技能(`cljs`)，以改善他们在制作这些应用程序时的开发体验。虽然`R Shiny`和`python Dash`对于他们最初的目标来说是很好的工具，但是它们缺乏现代前端技术的关键特性，比如不刷新浏览器的热模块重新加载，这导致了次优的开发体验。

支持`cljs`胜过`js`的观点也已经被提及。但是我想提下一个论点来最终说服任何人去尝试`cljs`:用`cljs`创建可视化和 web 应用程序是*非常有趣的*。你解决问题的速度和大脑思考的速度一样快，这让你保持专注和创造力。我真的希望你能试一试！

在后续文章中，如果有兴趣，我会提供一个项目模板，并指导您完成。与此同时，我将邀请您通过访问以下链接来探索这种美丽的语言。

你怎么想呢?我错过了问题的核心吗？对于你的用例来说，`shiny`和`dash`够好了吗？

# 收场白

有一段时间，因为上面提到的所有原因(`Shiny`确实让我受到了精神创伤)，我努力逃避我在 UI 方面的职业责任。毕竟，我是一名数据分析师/科学家，我更感兴趣的是发现模式，根据数据塑造我的团队的决策，并最终为我的客户创造更好的服务和产品。

然而，一个为 web 开发塑造我的团队基础设施和技术堆栈的机会出现了。一听说这个项目，我就知道我会被包括在内(不管我喜不喜欢)。因此，我做了任何人都会做的事情:我把自己的命运掌握在自己手中。我已经知道了`cljs`的许多优点和缺点，并决定为它努力游说。

不知何故，我的团队疯狂到相信我。有很多痛苦，不眠之夜和漫长的时间，但我们学到了很多东西，获得了宝贵的技能。我们已经和`cljs`一起快速设计了我们的前端，我非常高兴。

从本质上说，这篇文章是我作为一名数据科学家驱除我对 UI 开发的恐惧和沮丧的方式，我希望它能帮助许多人愉快地重新发现我们工作的这一部分。

# 来源和资源

*   [ClojureScript Koans](http://clojurescriptkoans.com/) ，在浏览器上交互学习语言的语法。
*   [Clojure Brave and the True](https://www.braveclojure.com/) ，学习 Clojure 和函数式编程概念的最佳起点。
*   [4Clojure](http://www.4clojure.com/) ，寓教于乐的练习，借鉴他人的解决方案。
*   [re-frame](https://github.com/Day8/re-frame) 文档，理解框架的最佳来源，读起来真的很享受。
*   [purelyfunctional.tv](https://purelyfunctional.tv/guide/) ，多位例外发帖博客了解试剂(包装为`ReactJS`)并重新框定。
*   Clojure 的创造者自己提出的[简单至关重要](https://www.youtube.com/watch?v=rI8tNMsozo0)。
*   ClojureScript: Lisp 的复仇，ClojureScript 的主要设计师之一。