<html>
<head>
<title>A Tale of Two Cities — A mystery solved with Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">双城记——熊猫解开的谜团</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-tale-of-two-cities-a-mystery-solved-with-pandas-631684dda4b1?source=collection_archive---------38-----------------------#2019-11-16">https://towardsdatascience.com/a-tale-of-two-cities-a-mystery-solved-with-pandas-631684dda4b1?source=collection_archive---------38-----------------------#2019-11-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8d28" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">珀斯真的比墨尔本更潮湿吗？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a01fce6a775b4c9c1b6bc5a46cfbbcba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xZCmy3hFaTSaxRzs"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@rresenden?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ricardo Resende</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="00fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最近我从墨尔本搬到了珀斯，我发现对这两个城市进行比较是很自然的。哪个有更好的咖啡？好的，这个很简单——墨尔本轻而易举！哪一个雨水更多——为了回答这个问题，我求助于我最喜欢的 Python 分析工具 Pandas。</p><p id="aa64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">我们将讨论什么内容</strong></p><ul class=""><li id="715b" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">调查 25 年的年降雨量</li><li id="3843" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">使用 Seaborn 来观想并快速得出一些见解</li><li id="12d5" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">找出哪个城市的雨天最少</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/d68de51e26e1db5b53f975bb2656936c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Bx4IRMWYXzny-JXh"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@keekkja?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kieren Andrews</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="6ac0" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">调查# 1——年降雨量对比</h1><p id="a07f" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated"><strong class="lb iu">首先我们加载所有的常规包</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="cf72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">接下来，我们导入来自 BoM 的降雨数据</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="cca5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注:我选择墨尔本机场气象站仅仅是因为 CBD 气象站已于 2009 年退役(参考<a class="ae ky" href="http://www.bom.gov.au/weather-services/announcements/vic/latrobe-site-closure.shtml" rel="noopener ugc nofollow" target="_blank">http://www . BOM . gov . au/weather-services/announcements/vic/la trobe-site-closure . shtml</a>)</p><p id="9ebe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们将单独的年、月、日列合并成一个日期时间索引，这将有助于下一步</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="7e56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">选择一个重叠两个数据集的时期——我名义上选择了 25 年，这听起来对这项研究来说足够了</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="3bde" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">绘制年总降雨量，看看哪个城市的年降雨量最大。很明显，珀斯的年降雨量一直较高，然而这只是故事的一部分。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/b0a31b747c5e25d30612d5b0d10d466c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cwgwpAII72vy4EbPofELqg.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Annual rainfall comparison</figcaption></figure><p id="9e30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">附注:2011 年墨尔本降雨量超过珀斯的反常现象部分是由于拉尼娜现象。更多信息请点击此处<a class="ae ky" href="https://bit.ly/2prGy68" rel="noopener ugc nofollow" target="_blank">https://bit.ly/2prGy68</a></p><h1 id="7a12" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">调查# 2 —月降雨量对比</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/b6225c1a707a9e6042746ce8fd4cae1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YmWP-4boM-ZsOYMX"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@r_shayesrehpour?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">reza shayestehpour</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="bb0e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看看 25 年研究期间的月平均值——这将显示墨尔本和珀斯的降雨量有多季节性</p><p id="76c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas <em class="nl"> pivot_table </em>函数为我们提供了一种快速简单的方法来聚合所有的时间序列数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="e0ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以并排绘制两个月平均值</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/750f111924f98df34b0c9db5e9ba0d9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aJK3s9rwX_FwOHX8W_Ba3Q.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Monthly rainfall comparison</figcaption></figure><p id="1b57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很明显，珀斯的季节性很强，大部分降雨发生在五月到九月。七月是珀斯最潮湿的月份，降雨量接近 150 毫米。相反，墨尔本全年降雨量稳定，每月约 20-60 毫米。</p><blockquote class="nn no np"><p id="013e" class="kz la nl lb b lc ld ju le lf lg jx lh nq lj lk ll nr ln lo lp ns lr ls lt lu im bi translated">这就是为什么墨尔本人总是需要一把伞！</p></blockquote><h1 id="01ab" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">调查 3——未雨绸缪</h1><p id="4884" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">虽然许多人关注平均降雨量，但很少关注下雨天数。我很好奇这是如何抓住墨尔本的“毛毛雨因素”的</p><p id="2b46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用方便的 Numpy <em class="nl"> where </em>函数，在这种情况下，该函数根据日降雨量不为零的条件返回标签“湿”或“干”。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="a711" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以计算出珀斯和墨尔本每个月的雨天数；其中有 25 年的价值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="6c75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以轻松地将这两个数据框连接起来，以便并排绘制它们。同时，我们可以快速得出每个城市每年的平均下雨天数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="3a4d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">鼓声……冠军是墨尔本，一年有 135 个雨天，珀斯以 109 天落后。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/29fb369680fac1f23e83901cb869a5f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Cn97WC6HTi0PU8kY"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@peterampazzo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Pietro Rampazzo</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8225" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们可以使用 Seaborn <em class="nl"> pointplot </em>来比较这两个城市，看看在任何给定的月份里有多少个雨天。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/034cfd6f272fbba8053acc1dfe59a0fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fe2cbuLXqRCi5pxr7aEbyw.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Rainy days per month</figcaption></figure><h1 id="e119" class="mk ml it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated"><strong class="ak">下雨天的降雨量有多少？</strong></h1><p id="8a07" class="pw-post-body-paragraph kz la it lb b lc nc ju le lf nd jx lh li ne lk ll lm nf lo lp lq ng ls lt lu im bi translated">众所周知，并非所有的雨天都是均等的。有些只是毛毛雨，有些则是绝对的雨！</p><p id="dc3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们已经标注了雨天，所以在 Seaborn 使用<em class="nl">线图</em>来查看不同月份的降雨量是非常直接的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/98deb39e916e38aae22565a1cfd8f7a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cnpZQIPa7HtGYHhHZcwwcQ.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Given that it is a rainy day — how much rain typically falls?</figcaption></figure><p id="7fc3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由此我们可以看出:</p><ul class=""><li id="41ed" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">当墨尔本在 2 月和 11 月/12 月下雨时，往往会很大——这是典型的夏季倾盆大雨</li><li id="9114" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">相反，墨尔本冬天的雨天通常会下毛毛雨，降雨量只有 2-3 毫米</li><li id="b669" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">珀斯的夏末仍然很潮湿(下雨的时候),但是总日降雨量非常不稳定——因此在一月和二月期间蓝色阴影区域的置信区间很宽。</li></ul><p id="5020" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">非常感谢你阅读我的第一篇博文！</p><p id="9d61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">笔记本和数据可以在这里找到</p><div class="nw nx gp gr ny nz"><a href="https://github.com/jay-stein/medium_tail_of_twocities" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd iu gy z fp oe fr fs of fu fw is bi translated">杰伊-斯坦/两个城市的中尾</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">github.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on ks nz"/></div></div></a></div></div></div>    
</body>
</html>