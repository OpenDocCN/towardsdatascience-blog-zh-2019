<html>
<head>
<title>AI Music Generation — Lead Sheet Composition and Arrangement</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">人工智能音乐生成-铅表组成和安排</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/ai-music-generation-lead-sheet-composition-and-arrangement-b984208f8519?source=collection_archive---------16-----------------------#2019-01-03">https://towardsdatascience.com/ai-music-generation-lead-sheet-composition-and-arrangement-b984208f8519?source=collection_archive---------16-----------------------#2019-01-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="c421" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kl translated"><span class="l km kn ko bm kp kq kr ks kt di"> S </span> <em class="ku">自 2018 年起，我加入</em> <a class="ae kv" href="http://musicai.citi.sinica.edu.tw/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="ku">音乐与 AI 实验室</em> </strong> </a> <em class="ku">，由</em> <a class="ae kv" href="http://mac.citi.sinica.edu.tw/~yang/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="ku">易教授-杨玄</em> </strong> </a> <em class="ku">指导，做 AI 音乐一代研究。在那个时候，已经有很多关于使用深度学习算法进行音乐生成的工作。通过文献调查，我们发现从事音乐生成的人通常从生成</em> <strong class="jp ir"> <em class="ku">旋律</em> </strong> <em class="ku">开始。</em></p><h1 id="62d7" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">旋律生成—无条件或有条件</h1><p id="cb2a" class="pw-post-body-paragraph jn jo iq jp b jq lu js jt ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk ij bi translated">旋律生成可以根据生成模型的类型进一步分为两类——无条件生成和有条件生成。</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi lz"><img src="../Images/708309822b77000b1808b1d2f00855c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C2GoAEh95D8jumw4mwpUVw.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk"><strong class="bd mp">Unconditional generation</strong>: Generates melodies from scratch. <strong class="bd mp">Conditional generation</strong>: Generates melodies from conditional information.</figcaption></figure><p id="f4bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，你可以从零开始或者从一些给定的信息中产生旋律。例如，将主旋律(即第一个小节或前两个小节的旋律)赋予模型，并让它继续为后面的小节生成旋律。您还可以为模型添加一些标签，如情感标签或流派标签，以便模型可以生成符合条件的旋律。歌词和视频剪辑等其他信息也是人们尝试条件生成的潜在应用。</p><blockquote class="mq"><p id="7b45" class="mr ms iq bd mt mu mv mw mx my mz kk dk translated">但是只生成旋律是不够有趣的，对吗？</p></blockquote><h1 id="2dee" class="kw kx iq bd ky kz la lb lc ld le lf lg lh na lj lk ll nb ln lo lp nc lr ls lt bi translated">Melody++怎么样</h1><p id="5a98" class="pw-post-body-paragraph jn jo iq jp b jq lu js jt ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk ij bi translated">现在，从模型输出的角度来看，除了只生成旋律，还可以生成和弦，也就是所谓的铅片生成。此外，我们可以用鼓产生旋律和和弦，让音乐更有节奏感。最终，我们还可以添加其他乐器，以管弦乐的形式演奏。</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nd"><img src="../Images/9b2cbc422786dba26f5de963fbd83453.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fa00MuoMqKF23fa8ms4Efg.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk">Melody + Chords + Drums + Other Instruments</figcaption></figure><h1 id="f424" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">我们的目标</h1><p id="b305" class="pw-post-body-paragraph jn jo iq jp b jq lu js jt ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk ij bi translated">我们的目标不仅仅是旋律一代或旋律加和弦(主音)一代，而是拥有全套乐器的一代。我们以一首流行歌曲<em class="ku">《我一无所有》</em>为例，有三个版本(即只有旋律、旋律+和弦、多乐器)。最后一个版本是我们正在处理的任务。</p><figure class="ma mb mc md gt me"><div class="bz fp l di"><div class="ne nf l"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk">Melody only version</figcaption></figure><figure class="ma mb mc md gt me"><div class="bz fp l di"><div class="ne nf l"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk">Lead sheet version</figcaption></figure><figure class="ma mb mc md gt me"><div class="bz fp l di"><div class="ne nf l"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk">Multi-instruments version</figcaption></figure><h1 id="f8c5" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">我们的挑战</h1><p id="a2bf" class="pw-post-body-paragraph jn jo iq jp b jq lu js jt ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk ij bi translated">正如我们所知，要建立深度学习模型，我们需要数据集。因此，我们从数据集的角度来讨论挑战。为了构建音乐生成模型，有两种类型的数据集。第一个叫做铅板，第二个叫做 MIDIs。</p><p id="6fb7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从铅表，它提供了旋律和和弦，所以如果你只是想做旋律生成，你可以使用旋律部分。此外，如果你也想产生和弦，你可以两者都用。让我给你举一个铅表的例子。</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi ng"><img src="../Images/ae4b6bd6db3e6f0cde77344987ee562f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wqnDKSnxzRIWekNjQHE4Ow.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk">Amazing Grace by John Newton in lead sheet format</figcaption></figure><p id="23f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以使用这种格式，你可以训练生成旋律和和弦，因为 lead-sheet 提供了它们，以前的作品如<a class="ae kv" href="https://github.com/tensorflow/magenta/tree/master/magenta/models/improv_rnn" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="ku">improv _ rnn model</em></strong></a>(谷歌洋红】<a class="ae kv" href="https://arxiv.org/abs/1703.10847" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="ku">midit</em></strong></a>(我们的实验室)都在这种数据集格式上进行过训练。但是如果你想产生鼓和所有其他乐器，那么你需要使用 midi。让我给你看看下图中的 MIDI 文件。</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nh"><img src="../Images/be2c6b25093635a71d8f3ff89585bfe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*baZSNC0hSwK5fWDwOIFTDg.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk">I have nothing by Whitney Houston in Midi format</figcaption></figure><p id="0fd0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">相对而言，很少有人生成 MIDI 作为输出，因为与只包含旋律和和弦的铅表生成相比，它更困难。这里，您需要注意更多仪器之间的依赖性。例如，在 MIDI 中有 128 种乐器设置。当然，我们可以将它们简化为四个或五个乐器，但你仍然需要注意它们之间的依赖关系，这样它们在一起演奏时才会连贯。</p><p id="8ca0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一个名为<a class="ae kv" href="https://github.com/salu133445/musegan" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="ku">muse gan</em></strong></a>的模型，是我们实验室之前在 AAAI 18 上发布的，试图生成多音轨的音乐。以下链接提供了 MuseGAN 的结果。</p><div class="ni nj gp gr nk nl"><a href="https://salu133445.github.io/musegan/" rel="noopener  ugc nofollow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd ir gy z fp nq fr fs nr fu fw ip bi translated">穆塞甘</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">音乐生成的人工智能</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">salu133445.github.io</p></div></div></div></a></div><p id="70e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你会注意到结果中的主要问题是音乐中没有<strong class="jp ir">旋律线</strong>。为什么？</p><blockquote class="nu nv nw"><p id="a756" class="jn jo ku jp b jq jr js jt ju jv jw jx nx jz ka kb ny kd ke kf nz kh ki kj kk ij bi translated">因为通常 midi 文件不会指定旋律在哪里。有时由钢琴演奏，有时由小提琴演奏，有时由别的什么东西演奏。</p></blockquote><p id="9dcb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，从数据集可用性的角度来看，我们可以看到明显的差距，我们只有铅表格式或 MIDI 格式的文件。</p><p id="549e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然我们想创作一首有旋律、和弦和其他乐器的歌曲，但我们被迫停下来。用铅板，我们只能产生旋律和和弦。有了 MIDI，我们可以生成多声道，但是不知道旋律和和弦在哪里。</p><blockquote class="nu nv nw"><p id="102f" class="jn jo ku jp b jq jr js jt ju jv jw jx nx jz ka kb ny kd ke kf nz kh ki kj kk ij bi translated">所以这项工作的任务是弥合差距，从单纯的旋律或铅板的产生到一个新的任务，我们称之为“铅板排列”</p></blockquote><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oa"><img src="../Images/6b4ace5284ebce899642c72bbe633e4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y8j0pylhkB-dbUFpnW3pag.png"/></div></div></figure><h1 id="6cff" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">我们的方法</h1><p id="ca44" class="pw-post-body-paragraph jn jo iq jp b jq lu js jt ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk ij bi translated">我们将铅板排列分为两部分。第一种是无条件生成模型，从零开始生成铅片。第二种是条件生成模型，它以铅片作为输入，生成排列。</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi ob"><img src="../Images/ddabebdb3e4e1cb3e2d7afe1b95415bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*67A1HTxAp1A9FY-x9_0GyQ.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk">Two Steps Approach for Lead Sheet Arrangement</figcaption></figure><p id="e874" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但问题仍然存在，我们如何处理条件排列生成，因为如果我们希望模型做到这一点，我们仍然需要两者都成对的数据集。</p><blockquote class="nu nv nw"><p id="5524" class="jn jo ku jp b jq jr js jt ju jv jw jx nx jz ka kb ny kd ke kf nz kh ki kj kk ij bi translated">应对这一挑战的关键思想是使用<strong class="jp ir">和弦相关的特性</strong>。铅表文件有明确的和弦。在 MIDI 文件中，虽然它没有指定和弦的位置，但是您可以从 MIDI 文件中提取一些和弦相关的特征。因此，和弦可以用作在铅表文件和 MIDI 文件之间进行交流的一种方式。</p></blockquote><h1 id="82fc" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">我们的模型</h1><p id="8ccb" class="pw-post-body-paragraph jn jo iq jp b jq lu js jt ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk ij bi translated">这个模型基于 MuseGAN，它使用钢琴卷帘窗形式作为数据表示。</p><p id="2432" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们的第一阶段，称为铅表生成，我们只是把音乐曲目数量缩减为两个(旋律和和弦)。这项工作的第二个贡献是，我们发现在短语生成中使用递归模型可以捕获流行歌曲中更多的重复模式[1]。</p><p id="96ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们的第二阶段，所谓的铅表安排，我们应用条件 MuseGAN 学习生成五个轨道的文书根据和弦相关的特征作为条件。</p><p id="0a4c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们把 lead sheet 格式和 MIDI 格式的文件都变成钢琴卷帘窗的形式，如下图所示。我们将 8 个小节制作成一个片段。每个条形由 48 个时间步长组成。纵轴是音高范围，我们总共使用 84 个音高。</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi oc"><img src="../Images/f64b0c620397891bd0edcbf7b1da50ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rmlXmACAgO2XF7Lp0w5rpQ.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk">System Flow</figcaption></figure><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi od"><img src="../Images/9511dba5125730fa584465f9bc9cc206.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5i6jMSXMHhlCDRpHm_PdlQ.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk">System Architecture</figcaption></figure><h1 id="acf1" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">结果</h1><figure class="ma mb mc md gt me"><div class="bz fp l di"><div class="oe nf l"/></div></figure><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi of"><img src="../Images/b500de0e88551107dfc60396977b5baf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lfnfJ8hggoIsgVp6d-ltbA.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk">Amazing Grace Arrangement Demo</figcaption></figure><p id="3ca7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">更多结果显示在演示页面:【https://liuhaumin.github.io/LeadsheetArrangement/ T2】</p><h1 id="3985" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">结论</h1><p id="b9f9" class="pw-post-body-paragraph jn jo iq jp b jq lu js jt ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk ij bi translated">我们提出了第一个通过两步流程进行铅片排列的模型</p><blockquote class="nu nv nw"><p id="d880" class="jn jo ku jp b jq jr js jt ju jv jw jx nx jz ka kb ny kd ke kf nz kh ki kj kk ij bi translated">步骤 1:用于引导表生成递归卷积 GAN 模型可以捕获流行歌曲数据集中更多的重复模式</p><p id="c69c" class="jn jo ku jp b jq jr js jt ju jv jw jx nx jz ka kb ny kd ke kf nz kh ki kj kk ij bi translated">步骤 2:条件化的 GAN 模型通过弦相关的特征来桥接两个数据集的间隙。</p></blockquote><h1 id="8523" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">参考</h1><p id="8bb2" class="pw-post-body-paragraph jn jo iq jp b jq lu js jt ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk ij bi translated"><strong class="jp ir"> [1]【论文】</strong>郝——刘敏，和易——杨玄。<a class="ae kv" href="https://arxiv.org/abs/1807.11161" rel="noopener ugc nofollow" target="_blank"> </a> <em class="ku">在 Proc 中。IEEE 机器学习与应用国际会议(ICMLA)，2018 年 12 月。</em></p><p id="dff2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">【2】【开源代码】</strong><a class="ae kv" href="https://github.com/liuhaumin/LeadsheetArrangement" rel="noopener ugc nofollow" target="_blank">https://github.com/liuhaumin/LeadsheetArrangement</a></p><p id="fb2c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">【3】【演示网站】</strong><a class="ae kv" href="https://liuhaumin.github.io/LeadsheetArrangement/" rel="noopener ugc nofollow" target="_blank">https://liuhaumin.github.io/LeadsheetArrangement/</a></p><h1 id="ee74" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">下一篇文章</h1><p id="03cc" class="pw-post-body-paragraph jn jo iq jp b jq lu js jt ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk ij bi translated"><a class="ae kv" href="https://medium.com/@liuhaumin/ai-music-generation-ii-lead-sheet-variation-1884133e4f1" rel="noopener">艾音乐第二代——铅表变奏</a></p></div></div>    
</body>
</html>