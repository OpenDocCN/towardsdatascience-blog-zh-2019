<html>
<head>
<title>Key Kubernetes Commands</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes 键盘命令</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/key-kubernetes-commands-741fe61fde8?source=collection_archive---------8-----------------------#2019-04-23">https://towardsdatascience.com/key-kubernetes-commands-741fe61fde8?source=collection_archive---------8-----------------------#2019-04-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fb96" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用 K8s 启动并运行</h2></div><p id="a889" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Kubernetes 是部署和管理大型应用程序的首要技术。在本文中，我们将在您的本地机器上启动并运行 K8s。然后您将部署您的第一个应用程序。最后，您将看到需要了解的 K8s 命令。</p><p id="48cc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你是 Kubernetes 的新手，可以看看我的<a class="ae le" rel="noopener" target="_blank" href="/key-kubernetes-concepts-62939f4bc08e?source=friends_link&amp;sk=d46386ce56c00701dbf41aa8d308a14d">上一篇文章</a>来学习基本的 K8s 概念。</p><p id="eaba" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们起航吧！⛵️</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi lf"><img src="../Images/fccda5961de3b1871cf8f97fb59996fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BQDzKm8qO9ZMzB6CTpbQDw.jpeg"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Lots of containers on a ship.</figcaption></figure><h1 id="d167" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated"><strong class="ak">本地运行 K8s</strong></h1><p id="5b92" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">直到最近，<a class="ae le" href="https://kubernetes.io/docs/setup/minikube/" rel="noopener ugc nofollow" target="_blank"> Minikube </a>还是创建本地单节点 Kubernetes 集群的主要手段。它可以在 Mac、Windows 和 Linux 上运行。Minikube 在一个虚拟环境中运行，带有许多不同虚拟环境的驱动程序。它还有一个扩展的 API。然而，当我将 Minikube 与 VirtualBox 配合使用时，我发现它速度很慢，而且漏洞百出。</p><p id="d374" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你是在 Mac 或 Windows 机器上本地玩 K8s，我推荐你使用 Docker 桌面自带的 K8s 版本。它使用 HyperKit 作为它的虚拟环境。我发现这是一股新鲜空气。🌷</p><p id="fb70" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你在本地使用装有 K8s 的 Linux 机器，请查看一下<a class="ae le" href="https://microk8s.io/" rel="noopener ugc nofollow" target="_blank"> MicroK8s </a>。它是轻量级的，使用一个<em class="ms">快照</em>而不是虚拟环境。</p><p id="f9d1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本文我运行的是 Docker Desktop CE 的 K8s v1.13.0，2019 年 4 月<em class="ms"> Edge </em>版本。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/8475d434e3939b97c9eda70f720e1977.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*NRqhARFnml7ZJNFbYUZW2Q.png"/></div></figure><p id="1150" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要在 Mac 上安装并启动 K8s，首先在这里下载带有 K8s 的 Docker Desktop<a class="ae le" href="https://www.docker.com/products/docker-desktop" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="e6e8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">安装完成后，进入你的应用程序并启动 Docker。从屏幕顶部的 Docker <em class="ms">图标中选择<em class="ms"> Preferences </em>来安装并启动 K8s。</em></p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/0445fdc73c9c53b10cc4a55ed51e2339.png" data-original-src="https://miro.medium.com/v2/resize:fit:108/format:webp/1*yQ_JyEQVRIl0tZo86r1hXQ.png"/></div></figure><p id="bc22" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">选择<em class="ms"> Kubernetes </em>选项卡并勾选<em class="ms"> Enable Kubernetes </em>复选框。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/17f1e8ec0ce918a09691f17cdc7f97be.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*Ehp_EIELZlTyZClEFp_7Zg.png"/></div></figure><p id="840c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同意安装 Kubernetes。可能需要一两分钟才能启动。点击 Docker 下拉菜单，您应该会看到<em class="ms"> Kubernetes 正在启动</em>，最后<em class="ms"> Kubernetes 正在运行</em>。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/091bb7c4101d33a90e68e16a3e690987.png" data-original-src="https://miro.medium.com/v2/resize:fit:564/format:webp/1*xHzaIHp-C6kpyB4AiYF1iA.png"/></div></figure><p id="b686" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你看到两个绿色的圆圈，那么你就准备好了！如果没有看到两个绿圈，Google 和<a class="ae le" href="https://stackoverflow.com/" rel="noopener ugc nofollow" target="_blank"> Stack Overflow </a>是一个开发者最好的朋友。😄</p><h1 id="338b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">你的第一个 K8s 应用</h1><p id="354c" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">让我们做一个<em class="ms"> hello world </em>部署，它将为 node.js 应用程序拉一个 Docker 映像。我们的应用程序将在浏览器中显示<em class="ms"> Hello World </em>。在生产中，你会以不同的方式做事。这个练习是让你开始练习的第一步。👣</p><p id="e617" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在 K8s 运行的情况下，在终端中输入以下命令:</p><p id="b4b3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mx my mz na b">kubectl create deployment hello-node --image=gcr.io/hello-minikube-zero-install/hello-node</code></p><p id="6370" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们使用<code class="fe mx my mz na b">kubectl</code> API 来创建一个名为<em class="ms"> hello-node </em>的部署，它使用存储在<a class="ae le" href="https://console.cloud.google.com/gcr/images/hello-minikube-zero-install/GLOBAL/hello-node?gcrImageListsize=30" rel="noopener ugc nofollow" target="_blank"> Google 容器注册表</a>中的 Docker 映像。我们正在使用官方 Kubernetes 的 Docker 容器。</p><p id="08aa" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是 Dockerfile 文件的内容:</p><pre class="lg lh li lj gt nb na nc nd aw ne bi"><span id="a0ce" class="nf lw it na b gy ng nh l ni nj">FROM node:6.14.2<br/>EXPOSE 8080<br/>COPY server.js .<br/>CMD node server.js</span></pre><p id="04f7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们使用的是官方的 node.js 镜像，复制<em class="ms"> server.js 的内容，</em>公开端口 8080，用 node 运行<em class="ms"> server.js </em>程序。关于 Docker 文件的更多信息，请点击这里查看我的文章<a class="ae le" rel="noopener" target="_blank" href="/learn-enough-docker-to-be-useful-b0b44222eef5">。</a></p><p id="7209" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是<em class="ms"> server.js </em> app 代码:</p><pre class="lg lh li lj gt nb na nc nd aw ne bi"><span id="60c3" class="nf lw it na b gy ng nh l ni nj"><strong class="na iu">var http = require('http');<br/><br/>var handleRequest = function(request, response) {<br/>  console.log('Received request for URL: ' + request.url);<br/>  response.writeHead(200);<br/>  response.end('Hello World!');<br/>};<br/>var www = http.createServer(handleRequest);<br/>www.listen(8080);</strong></span></pre><p id="4de4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这段代码将创建一个监听端口 8080 的服务器。当服务器收到请求时，它会向控制台写入一条有用的消息，并返回“Hello World！”。</p><p id="cfde" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在运行了<em class="ms"> kubectl create </em>命令之后，您应该会在终端中看到一条消息，说明您的部署已经创建好了。不过，你的应用还不能马上投入使用。K8s 需要提取 Docker 图像并旋转您的容器。</p><p id="48f7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以通过<code class="fe mx my mz na b">kubectl get all</code>查看所有 K8s 资源的状态。提取图像并旋转容器需要几分钟的时间，所以您可能需要输入这个命令几次。你可以到幕后高峰，看看 K8s 在用<code class="fe mx my mz na b">kubectl get events</code>做什么。</p><p id="3358" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当你看到<em class="ms"> 1 </em> Pod 显示<em class="ms">可用</em>时，你就可以开始了。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi nk"><img src="../Images/01c26b7fce81b8ae268b1fa022ca4cec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o3oNtgnAbCU47L3nIAln0g.png"/></div></div></figure><p id="bc68" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了使 Pod 能够被 K8s 集群之外的世界访问，您需要将 Pod 公开为服务。使用命令<code class="fe mx my mz na b">kubectl expose deployment hello-node --type=LoadBalancer --port=8080</code>创建服务。</p><p id="8542" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您指定了群集的名称、服务的类型以及它要使用的端口。不是所有的服务类型都创建一个可以从外界访问的 IP，但是负载平衡器可以。</p><p id="d3c3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您应该能够通过在 shell 中输入<code class="fe mx my mz na b">kubectl get services</code>看到服务已经创建。</p><p id="39fd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设您正在本地运行 K8s，将您的浏览器导航到<a class="ae le" href="http://localhost:8080/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080/ </a>，您应该会看到消息“Hello World！”。👍</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="gh gi nl"><img src="../Images/d34758a3194c32b60845dd4ee8736be3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vfZYZ9HlKInCRJWpHGwkZQ.jpeg"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Hello World!</figcaption></figure><p id="f3e2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以在 YAML 文件中指定它们，而不是通过命令行创建和指定整个部署和服务。使用文件有几个优点，包括可重用性和文档化。我计划在以后的文章中深入讨论 YAML 规范文件，所以请关注<a class="ae le" href="https://medium.com/@jeffhale" rel="noopener"> me </a>以确保您不会错过它们。</p><p id="d510" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们来看看流行的 K8s 命令。</p><h1 id="5939" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">库贝特尔</h1><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/d3827cefd9f97358b68eff41c77aac22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*APP1DfEr9oyYIEbKRf9l_A.jpeg"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Cubes</figcaption></figure><p id="dcfb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae le" href="https://kubernetes.io/docs/reference/kubectl/overview/" rel="noopener ugc nofollow" target="_blank"><em class="ms">ku bectl</em></a><em class="ms"/>——读作<em class="ms">立方体控制、立方体切割</em>——<a class="ae le" href="https://medium.com/diary-of-an-sre/how-do-you-really-pronounce-kubectl-4f58f76090e5" rel="noopener">或其他多种方式</a>——是 K8s 的<em class="ms"> </em>命令行工具。它是这样工作的:</p><ul class=""><li id="322f" class="nn no it kk b kl km ko kp kr np kv nq kz nr ld ns nt nu nv bi translated">一个<em class="ms"> kubectl </em>命令执行一个动作，如<em class="ms"> get </em>、<em class="ms"> create </em>或<em class="ms"> describe。</em></li><li id="8f40" class="nn no it kk b kl nw ko nx kr ny kv nz kz oa ld ns nt nu nv bi translated">该操作在<em class="ms"> </em>资源上执行，如部署、状态集或服务。</li><li id="8dc5" class="nn no it kk b kl nw ko nx kr ny kv nz kz oa ld ns nt nu nv bi translated"><em class="ms"> kubectl </em>命令遵循以下格式:</li></ul><p id="a245" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mx my mz na b">kubectl an_action a_resource a_resource_name --flags</code></p><p id="d8cd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在许多情况下，名称和标志是可选的。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/61c66a566ef09846ddd05c935bffe8b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*k5kgX0aqTtXReURcx6sN5g.jpeg"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Flags</figcaption></figure><p id="36fe" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，要获得关于所有现有 pod 的信息，您可以运行这个常见命令:<code class="fe mx my mz na b">kubectl get pods</code>。</p><p id="ba0f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">提示:如果您想避免键入<em class="ms"> kubectl </em> a bajilllion 次，那么创建一个 Bash 别名。有了<code class="fe mx my mz na b">alias k='kubectl'</code>，你可以只输入<code class="fe mx my mz na b">k</code>而不是<code class="fe mx my mz na b">kubectl</code>。我在本文中展示了如何在 Mac 上创建 Bash 别名。</p><p id="7f7b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">事不宜迟，下面是最常见的 K8s 资源及其快捷方式。</p><h1 id="8117" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">11 大 kubectl 资源</h1><p id="ca3a" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">你可以写出完整的术语或捷径。</p><p id="27f8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mx my mz na b">pods, po<br/>nodes, no<br/>deployments, deploy<br/>replicasets, rs<br/>daemonsets, ds<br/>statefulsets, sts<br/>jobs<br/>cronjobs, cj<br/>services, svc<br/>persistentvolumes, pv<br/>persistentvolumeclaims, pvc</code></p><p id="e772" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你对这些资源不清楚，可以看看我之前关于 K8s 概念的文章。另外两个需要了解的术语是<em class="ms">所有</em>和<em class="ms">事件</em>。</p><p id="c7d0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不出所料，<code class="fe mx my mz na b">all</code>用来指代所有现有的资源。<code class="fe mx my mz na b">kubectl get all</code>显示了有关运行 pod、服务、部署和复制集的基本信息。这个命令非常方便。😄</p><p id="f91b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，<code class="fe mx my mz na b">kubectl get events</code>显示事件的历史。就像是 K8s 级别的日志而不是容器级别的。</p><p id="4aea" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想看更多的 kubectl 资源，请点击这里查看官方文档。现在，让我们看看应用于我们的资源的行动。</p><h1 id="1c79" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">7 大 kubectl 行动</h1><p id="bcd8" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated"><code class="fe mx my mz na b">help</code> —获取帮助<br/> <code class="fe mx my mz na b">get</code> —显示关于一个或多个资源的信息<br/> <code class="fe mx my mz na b">describe</code> —显示关于一个或多个资源的详细信息<br/> <code class="fe mx my mz na b">logs</code> —显示容器的日志<br/> <code class="fe mx my mz na b">exec</code> —进入容器中正在运行的进程<br/><code class="fe mx my mz na b">apply </code>—创建或更改资源<br/> <code class="fe mx my mz na b">delete</code> —删除一个或多个资源</p><p id="9146" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们简单地看一下每个命令。</p><h2 id="09c5" class="nf lw it bd lx ob oc dn mb od oe dp mf kr of og mh kv oh oi mj kz oj ok ml ol bi translated"><strong class="ak">求助</strong></h2><p id="9ca9" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">在命令后键入<code class="fe mx my mz na b">--help</code>以获取该命令的帮助。比如<code class="fe mx my mz na b">kubectl get pods --help</code>。</p><h2 id="c95a" class="nf lw it bd lx ob oc dn mb od oe dp mf kr of og mh kv oh oi mj kz oj ok ml ol bi translated"><strong class="ak">得到</strong></h2><p id="49e0" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated"><code class="fe mx my mz na b">kubectl get all</code>显示了有关运行 pod、服务、部署和副本集的基本信息。这是检查事物状态的常用命令。您可以对单个对象使用<code class="fe mx my mz na b">get</code>并添加<code class="fe mx my mz na b">--watch</code>标志来观察实时更新。</p><h2 id="a6b2" class="nf lw it bd lx ob oc dn mb od oe dp mf kr of og mh kv oh oi mj kz oj ok ml ol bi translated"><strong class="ak">形容</strong></h2><p id="b379" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated"><code class="fe mx my mz na b">kubectl describe all</code>显示了与您的集群相关的几乎所有内容的大量详细信息。您也可以对单个对象使用<code class="fe mx my mz na b">describe</code>。调试的时候很有帮助。</p><h2 id="ba66" class="nf lw it bd lx ob oc dn mb od oe dp mf kr of og mh kv oh oi mj kz oj ok ml ol bi translated"><strong class="ak">日志</strong></h2><p id="55c8" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated"><code class="fe mx my mz na b">logs</code>需要一个 Pod 名称。我的“hello world”应用程序使用命令<code class="fe mx my mz na b">kubectl logs hello-node-7f5b6bd6b8-gr7m7</code>显示了我的 Pod 的日志。当多个容器在一个容器中时，使用标志<code class="fe mx my mz na b">-c my-container</code>指定一个容器。使用<code class="fe mx my mz na b">--previous</code>标志获取不再运行的容器的信息。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/db7a4a743acc1716710bc0003dbe1105.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*buyYVUJAnKo-eLadb7x14Q.jpeg"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Wish my logs looked like this.</figcaption></figure><h2 id="2272" class="nf lw it bd lx ob oc dn mb od oe dp mf kr of og mh kv oh oi mj kz oj ok ml ol bi translated"><strong class="ak">执行</strong></h2><p id="545e" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated"><code class="fe mx my mz na b">exec</code>帮助你调试一个容器进程。它允许您通过一个带有<code class="fe mx my mz na b">-it</code>的伪终端在容器内执行一个流程。例如，要在<em class="ms"> my_pod </em>中输入容器并运行 Bash，输入<code class="fe mx my mz na b">kubectl exec -it my_pod bash</code>。</p><h2 id="71c4" class="nf lw it bd lx ob oc dn mb od oe dp mf kr of og mh kv oh oi mj kz oj ok ml ol bi translated"><strong class="ak">应用</strong></h2><p id="1288" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">将<code class="fe mx my mz na b">apply</code>与 YAML 或 JSON 文件一起使用是创建或更改资源的推荐方式。如果一个资源不存在，<code class="fe mx my mz na b">apply</code>将创建它。如果它确实存在，<code class="fe mx my mz na b">apply</code>会改变它。<code class="fe mx my mz na b">apply</code>可以向适用的资源添加服务，或者通过添加 pod 来自动横向扩展部署。</p><p id="9143" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注意，您可以使用<code class="fe mx my mz na b">create</code>进行部署，使用<code class="fe mx my mz na b">expose</code>进行服务——这就是我们在上面所做的。然而，使用带有<code class="fe mx my mz na b">apply</code>的 YAML 文件对于文档和重用来说是一个更好的选择。我们将在以后的文章中介绍这种方法。在这里查看关于创建资源的最佳实践<a class="ae le" href="https://medium.com/google-cloud/kubernetes-best-practices-8d5cd03446e2" rel="noopener">的讨论。</a></p><p id="cf8f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mx my mz na b">apply</code>是您创建和更新资源的瑞士军刀。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/8132eb89a735be18c0c0e574d1ab7df0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*uS13pOF-KghRaGV86ZHQcA.jpeg"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">SwissArmy knife</figcaption></figure><h2 id="1886" class="nf lw it bd lx ob oc dn mb od oe dp mf kr of og mh kv oh oi mj kz oj ok ml ol bi translated"><strong class="ak">删除</strong></h2><p id="5c3a" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated"><code class="fe mx my mz na b">kubectl delete pod my_pod</code>删除名为<em class="ms"> my_pod 的 Pod。</em></p><p id="162d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要删除相同类型的所有资源，请传递<code class="fe mx my mz na b">--all</code>标志。例如，您可以用<code class="fe mx my mz na b">kubectl delete rs --all</code>删除所有的副本集。请注意，如果您尝试这样做，除非您先删除部署，否则副本集将会重新启动。😄</p><p id="897f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在您已经看到了关键的 K8s 命令。当你成为一名库伯内特 n̵i̵n̵j̵a̵和平战士，你会获得其他人。可以在这里<a class="ae le" href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands" rel="noopener ugc nofollow" target="_blank">找到<em class="ms"> kubectl </em>动作的完整列表。</a></p><h1 id="7eda" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">概述</h1><p id="8553" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">要记住的命令。</p><h2 id="9d44" class="nf lw it bd lx ob oc dn mb od oe dp mf kr of og mh kv oh oi mj kz oj ok ml ol bi translated"><strong class="ak">带快捷方式的前 11 项资源</strong></h2><p id="82da" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated"><code class="fe mx my mz na b">pods, po<br/>nodes, no<br/>deployments, deploy<br/>replicasets, rs<br/>daemonsets, ds<br/>statefulsets, sts<br/>jobs<br/>cronjobs, cj<br/>services, svc<br/>persistentvolumes, pv<br/>persistentvolumeclaims, pvc</code></p><h2 id="9b23" class="nf lw it bd lx ob oc dn mb od oe dp mf kr of og mh kv oh oi mj kz oj ok ml ol bi translated"><strong class="ak">前 7 项行动</strong></h2><p id="2a00" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated"><code class="fe mx my mz na b">--help</code> —获取关于资源的帮助<br/> <code class="fe mx my mz na b">get</code> —显示关于一个或多个资源的信息。<br/> <code class="fe mx my mz na b">describe</code> —显示一个或多个资源的详细信息。<br/> <code class="fe mx my mz na b">logs</code> —显示容器的日志。<br/> <code class="fe mx my mz na b">exec</code> —进入容器中正在运行的进程。<br/><code class="fe mx my mz na b">apply </code>—创建或更改资源。<br/> <code class="fe mx my mz na b">delete</code> —删除一个或多个资源。</p><p id="1048" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想更深入地了解清单，看看这张<a class="ae le" href="https://cheatsheet.dennyzhang.com/cheatsheet-kubernetes-A4" rel="noopener ugc nofollow" target="_blank">更长的备忘单</a>。</p><p id="da07" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当你探索 K8s 的时候，一定要花一些时间和官方的<a class="ae le" href="https://kubernetes.io/docs" rel="noopener ugc nofollow" target="_blank"> Kubernetes docs </a>在一起。它们非常详细，一开始可能会让人不知所措，但它们写得非常好。🎉</p><h1 id="384e" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">包装</h1><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/8000c189bf0c537a410fb541f0e0ce36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*MYx7vQTCwHvwnZ9gJhspqQ.jpeg"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">That’s a wrap.</figcaption></figure><p id="082b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我希望这篇文章对你有用。您看到了如何设置 K8s 和运行您的第一个 K8s 应用程序。然后，您了解了如何使用常见命令检查、创建和删除 K8 资源。如果你觉得这篇文章有帮助，请在你最喜欢的社交媒体渠道上分享，这样其他人也可以找到它。👍</p><p id="a606" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我在工作中有未来的 K8s 文章。跟随<a class="ae le" href="https://medium.com/@jeffhale" rel="noopener"> me </a>确保你不会错过它们。😃</p><p id="1cba" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我撰写关于数据科学、云计算和 DevOps 的文章。如果你对这些感兴趣，可以在这里查看我的其他文章。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><a href="https://dataawesome.com"><div class="ab gu cl om"><img src="../Images/ba32af1aa267917812a85c401d1f7d29.png" data-original-src="https://miro.medium.com/v2/format:webp/1*oPkqiu1rrt-hC_lDMK-jQg.png"/></div></a></figure><p id="5ec5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mx my mz na b">kubectl</code>开！🚀</p></div></div>    
</body>
</html>