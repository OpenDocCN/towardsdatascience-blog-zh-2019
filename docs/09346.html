<html>
<head>
<title>The war of real time data: when every tick counts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实时数据的警告:当每一秒都很重要</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-war-of-real-time-data-when-every-tick-counts-855c438379b3?source=collection_archive---------10-----------------------#2019-12-10">https://towardsdatascience.com/the-war-of-real-time-data-when-every-tick-counts-855c438379b3?source=collection_archive---------10-----------------------#2019-12-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="48e4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一级和二级金融市场数据馈送介绍</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/334e0319b82513fab900b0ce6b817d42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/format:webp/1*4q6XMtI6KMzIrokGCRAuDQ.jpeg"/></div></figure><p id="8f59" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">汇总的一分钟价格和交易量信息提供了有价值的信息。虽然对于摇摆操作和某些日内策略/方法来说，这已经足够了，但是额外的一级和二级数据可以改善执行和退出决策，特别是在日内操作中。</p><p id="ee27" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我用这些信息进行自主交易，结果很有希望。我还开始研究处理和解析数据的复杂性(比常规的 OHLC 蜡烛复杂一到两个数量级)。我这样做是出于量化的考虑。</p><p id="01cb" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这让我对不同的实时数据馈送规范有了更好的、结构合理的理解，我在这篇文章中分享了这些信息。</p><p id="84a7" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我简要解释了不同交易所和市场数据供应商提供的不同级别的实时数据的含义，包括对它们的用途的快速分析以及它们在标准交易平台和定制量化软件中的使用示例。对一级和二级都进行了分析，还包括了对三级的介绍。</p><h1 id="63ee" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">什么是一级</h1><p id="4f53" class="pw-post-body-paragraph kq kr it ks b kt me ju kv kw mf jx ky kz mg lb lc ld mh lf lg lh mi lj lk ll im bi translated">第一级增加了操作员提供最新买卖报价和已执行分笔成交点交易的可用信息。这在业内通常被称为<em class="mj">“账面净值”——</em>为最新的买卖报价——以及<em class="mj">“磁带”</em>或<em class="mj">“时间&amp;销售”——</em>为已执行订单——<em class="mj">。</em>这两种信息结合在一起，可以洞察短期看涨或看跌压力，并构成构建交易量概况和订单流信息的基本构件。</p><p id="ef5b" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">可以获得洞察力，因为价格需要填充订单的买方以启动看涨趋势，或者，它需要填充订单的买方以启动看跌趋势。当订单的一方出现明显的趋势或压力时，它可能会被解读为供应超过需求或相反的情况。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/9917569f77835519db618b275759a624.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*pXvULU7nP7eukgtFn6CKdg.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk">“Time and sales” is the most iconic view of Level I Data. Traded orders can be seen including the information on where they were traded (either at the Bid or Ask side). Continuous trading at one of the sides will often lead price to initiate a bullish or bearish course of action.</figcaption></figure><p id="4448" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">虽然一些作者将这种压力称为“购买量”或“T2”【销售量】，但我更倾向于避免使用这样的术语，因为每一个买家都有一个卖家，而且不存在“T4”的买家比卖家多的情况，因此也就不存在“<em class="mj">购买量”</em>的情况。这些术语对新来者具有误导性，因为比你想象的更多的人并不完全理解在受监管的市场中订单实际上是如何完成的，通过使用这些术语，他们一直认为交易量可以分为购买和销售，但事实并非如此。这些作者想要通过这些<em class="mj">“购买/销售数量”</em>术语来说明的是，已完成的订单正在挤压供应或需求，并且在失去平衡和另一次初始价格运动发生之前，一方可能会赢得短期战斗。其实不同的是<em class="mj">“愿意卖”</em>的人数和<em class="mj">“愿意买”的人数。</em>在这种情况下，两个数字明显不同，因为订单未被执行，强烈的不对称分布可能意味着价格可能反转，或者至少在某一价格水平存在强大的阻力或支撑(未执行订单的信息是二级数据馈送的一部分)。理解这些概念很重要，因为它们是可以从一级(和二级)数据中提取的关键知识。</p><p id="d352" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">作为对一级数据的最后说明，我列举了潜在的用例:</p><ol class=""><li id="8c94" class="mp mq it ks b kt ku kw kx kz mr ld ms lh mt ll mu mv mw mx bi translated">测试平均持有时间更短的日内策略——刷单或简单的非常短期的日内策略，</li><li id="6595" class="mp mq it ks b kt my kw mz kz na ld nb lh nc ll mu mv mw mx bi translated">为进场和出场寻找更好的交易执行时机，</li><li id="bf43" class="mp mq it ks b kt my kw mz kz na ld nb lh nc ll mu mv mw mx bi translated">过滤/确认由其他方法触发的交易，</li><li id="fa3c" class="mp mq it ks b kt my kw mz kz na ld nb lh nc ll mu mv mw mx bi translated">启用订单流分析。</li></ol><h1 id="7005" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">什么是二级</h1><p id="928c" class="pw-post-body-paragraph kq kr it ks b kt me ju kv kw mf jx ky kz mg lb lc ld mh lf lg lh mi lj lk ll im bi translated">第二级用数据丰富了第一级，包括订单簿中一定深度的数据。这意味着您需要考虑关于已提交但尚未执行的未决订单的信息。这些信息是实时更新的，有助于发现高流动性区域，这些区域可能被解读为短期支撑或阻力位。</p><p id="00fe" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">与级别 I 相比，级别 II 大大增加了解析需求，因为需要实时更新和解析特定范围的报价点(称为<em class="mj">书的深度</em>),而不是仅处理一个报价点价格级别。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/df79077fea45979dd45ec988d75ddc1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/format:webp/1*N5PSOMX_689L9KSeXAx3Dg.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk">Level II provides the ability to visualise in real-time pending orders in the book. Most software packages usually aggregate a certain amount of historical volume at each tick providing information on high liquidity ticks/areas. Imbalance and balance, as defined by Market Profile theory can be therefore be identified.</figcaption></figure><p id="16c8" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这些术语的命名和范围因来源不同而有所不同，但通常都是如此处描述的那样。无论如何，重要的一点是理解底层的概念。</p><h1 id="1fd5" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">为什么一级和二级信息对小型操作者的日内操作有价值</h1><p id="1c70" class="pw-post-body-paragraph kq kr it ks b kt me ju kv kw mf jx ky kz mg lb lc ld mh lf lg lh mi lj lk ll im bi translated">这些信息允许识别大型交易(可能是机构交易),并且如上所述，对短期熊市/牛市压力有一个估计。这些信息对你的赢/赔率有多大的影响是值得怀疑的。我的直觉是，如果掌握得当，这一比例可以在 10%到 20%之间，但我缺乏实际数字——它们很难量化。这个论断来自于我对实际交易者的观察，当他们成功地将订单流整合到他们现有的方法中时，他们有所改进。</p><p id="73d2" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">我还认为，这只对真正的短期势头有效，这一信息需要得到其他操作标准的支持。作为独立来源的信息更有可能表现为噪音，而不是有价值的数据。同样，这来自我作为全权交易者非常有限的经验，而不是来自任何定量分析研究。我确信，有些操作者专门利用这些信息赚钱，因为在交易中，我一直知道，每一条信息/技术都有专门的参与者，绝对的陈述——这行得通，这行不通——通常是错误的。</p><h1 id="0577" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">三级:保留给机构公司</h1><p id="47fa" class="pw-post-body-paragraph kq kr it ks b kt me ju kv kw mf jx ky kz mg lb lc ld mh lf lg lh mi lj lk ll im bi translated">第三级包括直接来自交易所的所有原始信息，因此它包含关于给定交易所的每一条信息。处理这种数据馈送意味着处理真正高的吞吐量和与交换机的直接连接。某些交易所——比如法兰克福——只将这种联系作为批准程序的一部分保留给机构投资者，而其他交易所——比如芝加哥——不施加任何限制，只要你有钱<em class="mj">(我想是德国人对美国人的心态)</em>。无论如何，开发三级数据所需的相关成本、资本和基础设施，让它变得毫无用处，除非你是 HFT 的机构投资者，或者正与一家机构合作。</p><p id="b6a6" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">使用的协议是专有的，通常在不同的交换机之间共享。主要有 GLOBEX(CME 使用)和 T7(EUREX 使用)。使用的协议分别是 MDP3.0 和 EMDI/EOBI/RDI/ETI(最新的是 T7 的接口，而不是实际的协议)。所有交换 APIs 协议通常都利用 FIX 协议，这是高端实时金融数据的全球标准。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/9edb52470e51cd148e96523c05b66088.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/0*NRFI5_GI9RaxmWYI.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk">Level III data requires a direct connection with the Exchange. In the photo the European T7 EUREX System architecture.</figcaption></figure><p id="8f22" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这些系统还被出售给世界各地其他规模较小的交易所，这些交易所没有坚实的商业案例来建立自己的电子交易基础设施。其他较小的交易所使用它们自己的电子交易系统，虽然它们之间不兼容，但它们通常都共享相同的原则和底层协议。这些系统和协议仅在机构基础设施的环境中有用，较小的参与者可以通过访问聚合数据服务来以低得多的成本成功运营，该服务将提供更容易消费的 API 访问。</p><h1 id="911e" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">对于小玩家来说，一级可能是最有用的工具</h1><p id="3b4f" class="pw-post-body-paragraph kq kr it ks b kt me ju kv kw mf jx ky kz mg lb lc ld mh lf lg lh mi lj lk ll im bi translated">如前所述，虽然有些人把深度书描述为日内交易和刷单操作的有价值的工具，但不断提交和删除订单的算法的存在经常使这些信息误导，如果不是完全欺骗的话。同样，如果要将这些信息纳入我们的交易策略中，理解适当的背景和附加的交易操作标准是必不可少的，这一点很重要。</p><p id="a744" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">对于小型全权操盘者来说，更可能有用的信息是与<em class="mj">时间&amp;销售</em>相对应的信息，即已执行的交易，因为这些交易是已确认的交易，并暗示有人实际上在以给定的价格承诺资金。</p><blockquote class="nf ng nh"><p id="b88f" class="kq kr mj ks b kt ku ju kv kw kx jx ky ni la lb lc nj le lf lg nk li lj lk ll im bi translated">虽然仍有可能成为算法欺骗策略的一部分，通过诱捕其他参与者来创造流动性，但已执行的订单可能比未执行的订单更不具欺骗性。声明“我正在以这个价格购买 100 份 CME ES 合约”与实际购买它们是完全不同的(在撰写本文时，这样的合约量的名义价值约为 1500 万美元)。然而，这还不是一种规范；最大的运营商拥有无限的资本，他们的轮换区域需要使用广泛的价格范围来满足他们所有的购买/销售需求。</p></blockquote><p id="ad84" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">就持有时间而言，你越是做短线，信息延迟和费用对操作者的影响就越大，因此这个领域就越是留给专业交易行业。零售和小型运营商需要部署将利润/损失和风险与延迟和经纪/市场费用充分分离的策略。</p><h1 id="2793" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">游击方式:你不是猎人</h1><p id="1d73" class="pw-post-body-paragraph kq kr it ks b kt me ju kv kw mf jx ky kz mg lb lc ld mh lf lg lh mi lj lk ll im bi translated">对二级数据值的这种解释需要非常谨慎。我们不能忘记，所有市场交易的 80%以上来自算法——可能更高。</p><p id="277e" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">毫无疑问:这些算法是由世界上最强大、最足智多谋、最熟练、资金充足、最聪明和最有经验的团队设计的。</p><p id="f0b6" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">他们指望无限的资本来运作，他们旨在欺骗其他玩家。他们标记订单，识别可能的来源(人工操作员、慢速算法、并置 HFT)并相应操作，他们实时关联不同的市场和交易所，以利用跨市场的差异(期货、现金、期权、场外交易、暗池)。由于搭配，基于 FPGA 的定制硬件使用，有时甚至是交易所本身向大型参与者提供的明显优势——<em class="mj">称之为漏洞</em>——它们的运营也比市场中的其他参与者具有时间优势。</p><p id="8ad4" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">基本上，他们在各方面都胜过你，重要的是永远不要忘记这一点，所以你所有的作战程序都使用<em class="mj">游击战方法</em>来专注于那些<em class="mj">正规军无法充分对抗的优势</em>。</p><p id="2551" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">最重要的是，机器学习和人工智能的兴起可能会继续以更快的速度增加算法的相关性。我甚至怀疑人工操作在未来是否可能实现。</p><blockquote class="nf ng nh"><p id="df53" class="kq kr mj ks b kt ku ju kv kw kx jx ky ni la lb lc nj le lf lg nk li lj lk ll im bi translated">虽然当前的技术允许小经营者做过去保留给大型机构公司的事情，但同样的技术将机构公司和做市商推向前所未有的知识和权力水平。当前的市场已经是一场大屠杀，而且只会变得更糟。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/207f513df3378540b905996fa2749438.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*HdgTddbC5m_eNHek13tGbg.jpeg"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk">Small operators and retails operating intraday constitute actual market snipers fighting a regular and much stronger army. They are part of an heterogeneous, uncoordinated, irregular guerilla waiting for the right market conditions to appear. In the photo: detail of a hit-and-run scalping trade on E-Mini NASDAQ CME future contract.</figcaption></figure><p id="f285" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">小运营商的希望是，由于资本如此有限，有可能在数百毫秒内分配和解除分配资本，而不会对市场产生任何影响，因此有可能在非常短的时间内加入机构运动，并仍能获得不错的利润。</p><p id="07bc" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">流动性从来不是问题，除非在新闻、特朗普的推文和其他意外事件等异常市场条件下——这只适用于零售和大多数普通公众，因为没有意外事件这种事情；在某个地方，总会有人在事件发生之前就已经知道并做好了充分的准备。</p><p id="bc8a" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在这种情况下，滑点可能会让你在失败的交易中损失两倍或三倍，但这是游戏的一部分，任何有经验的交易者都可以成功避免其中的大部分。对于真正意想不到的风险，它们将被视为整体 P&amp;L 中的异常值，风险管理更高的保护层将避免对我们的运营产生任何严重影响——是的，你需要更多的风险管理层，而不仅仅是止损。</p><p id="50b7" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">通过将操作限制在恰到好处的时机，小参与者可以利用这种可用的流动性，在做市商的某些活动中表现出微不足道的回报/烦恼。我并不是说这很容易(因为这并不容易)，但如果利用了正确的时机和环境，这绝对是可能的。这里的要点是，一级和二级数据有助于实现这个目标，特别是日内操作。</p><h1 id="be2b" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">在定量分析中处理分笔成交点数据</h1><p id="e930" class="pw-post-body-paragraph kq kr it ks b kt me ju kv kw mf jx ky kz mg lb lc ld mh lf lg lh mi lj lk ll im bi translated">就定量数据分析而言，分笔成交点数据是另一回事，尤其是当需要整合图书深度信息时。我估计从分钟 OHLC 棒线到分笔成交点数据需要一到两个数量级的数据处理工作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi nm"><img src="../Images/5967b0c30c7425ff2714690c5d0790a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CEyisG6P-8A5XO1WhoZMMg.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk">Wolfpack Flow™ is my latest designed tool to operate Order Flow. Among its key functionalities: Big Trade analysis, Volume Clusters, Volume Profile and Order Flow. The software has been designed from scratch and it is fully optimised to operate intraday Order Flow and Volume. Source: www.wolfpackflow.com</figcaption></figure><p id="8c1d" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">原因在于，对于 OHLC 蜡烛线，每单位时间的信息量总是具有预定义的大小限制。即使移动到一秒钟蜡烛线(不使用订单流但需要分析短期策略时的常见选择)也会增加处理需求，但与一分钟棒线相比不会改变任何事情。对于分笔成交点数据，不仅数据量大得多，而且每时间单位的数据大小也不规则。这种额外的复杂性进一步限制了数据的处理方式，因为需要更复杂的存储和处理后端。</p><p id="8c4f" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">由于每秒钟订单簿的变化数量可能非常大，尤其是在波动性高峰期间，存储深度簿数据会带来更具挑战性的性能需求。对于这些环境，定制开发几乎是一个硬性要求。</p><h1 id="da0d" class="lm ln it bd lo lp lq lr ls lt lu lv lw jz lx ka ly kc lz kd ma kf mb kg mc md bi translated">摘要</h1><p id="4ac8" class="pw-post-body-paragraph kq kr it ks b kt me ju kv kw mf jx ky kz mg lb lc ld mh lf lg lh mi lj lk ll im bi translated">在本帖中，我们对一级和二级市场数据进行了简要回顾。还简要介绍了第三级。</p><p id="fdac" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">在没有涵盖任何实际策略的情况下，我们讨论了一级和二级数据如何对自主日内交易做出贡献。并对处理数据馈送中这一级别的细节所面临的挑战提出了一些意见。</p><p id="688f" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">总的来说，在我们的交易程序中包含至少一级和订单流数据可以显著提高我们的盈亏比，从而降低风险和支出。额外的信息也有助于减少与日内交易相关的压力，因为可以确定更清晰的进场点和出场点。</p></div></div>    
</body>
</html>