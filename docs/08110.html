<html>
<head>
<title>Data Version control &amp; machine learning process control using DVC &amp; GitHub</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 DVC 和 GitHub 进行数据版本控制和机器学习过程控制</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-version-control-machine-learning-process-control-using-dvc-github-c629511e95b5?source=collection_archive---------33-----------------------#2019-11-06">https://towardsdatascience.com/data-version-control-machine-learning-process-control-using-dvc-github-c629511e95b5?source=collection_archive---------33-----------------------#2019-11-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/3ab3225f63067e30be83a764ecb9fa4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B3NAZY4D3BN6kPdrATt5Bw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk">DVC workflow</figcaption></figure><p id="9150" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">即使我们今天在机器学习(ML)方面取得了所有的成功，特别是深度学习及其在商业中的应用，数据科学界仍然缺乏组织项目和跨各种 ML 项目有效协作的良好实践。</p><p id="984f" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">提高机器学习工作流的生产率是必要的。作为 K 集团诊断公司的一名数据科学家，我要处理数百千兆字节的数据。对于数据科学家来说，管理和跟踪数据确实非常困难。数据跟踪对于任何数据科学工作流都是必不可少的。对数据版本化的需求是极端的，因此数据版本控制(【https://dvc.org】)对于任何数据科学家来说都是非常重要的工具。对于您的数据科学项目来说，这是一个非常方便和有用的工具。主要原因是，</p><ul class=""><li id="23f3" class="le lf it kh b ki kj km kn kq lg ku lh ky li lc lj lk ll lm bi translated"><strong class="kh iu"> DVC 跟踪 ML 模型和数据集:</strong> DVC 旨在使 ML 模型可共享和可复制。</li><li id="4953" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc lj lk ll lm bi translated"><strong class="kh iu"> ML 项目版本控制:</strong>版本控制机器学习模型、数据集和中间文件。</li><li id="6cd9" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc lj lk ll lm bi translated"><strong class="kh iu"> ML 实验管理:</strong>利用 Git 分支的全部力量来尝试不同的想法，而不是代码中草率的文件后缀和注释。</li><li id="0d60" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc lj lk ll lm bi translated"><strong class="kh iu">部署&amp;协作:</strong>使用推/拉命令将一致的 ML 模型、数据和代码束移动到生产、远程机器或同事的计算机中，而不是特定的脚本。</li></ul><p id="0eeb" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这里的主要优势是，我们可以使用亚马逊 AWS S3，微软 Azure 和其他数据/资源管理系统。我们可以配置这些系统来存储、读取、写入和快照数据。设置和使用非常简单，</p><ol class=""><li id="a090" class="le lf it kh b ki kj km kn kq lg ku lh ky li lc ls lk ll lm bi translated">使用安装 DVC，(假设您已经准备好 python 环境)</li></ol><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="1936" class="mc md it ly b gy me mf l mg mh">pip install dvc</span></pre><p id="a7bb" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">2.执行 DVC 初始化，(假设您在 Github 存储库中，如果不是，则执行)</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="63e5" class="mc md it ly b gy me mf l mg mh">git init</span><span id="b389" class="mc md it ly b gy mi mf l mg mh">dvc init</span></pre><p id="efd9" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">3.现在让我们假设我们的项目有“数据”文件夹，其中有各种数据目录(通过 AWS S3 连接和下载)</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="6979" class="mc md it ly b gy me mf l mg mh">├── data   <br/>│    ├── exp1<br/>│       ├── x1.png<br/>│       ├── y1.png<br/>│    ├── exp2<br/>│       ├── x2.png<br/>│       ├── y2.png<br/>│    └── exp3<br/>│       ├── x3.png<br/>│       ├── y3.png<br/>│    └── exp4<br/>│       ├── x4.png<br/>│       ├── y4.png</span></pre><p id="4c0e" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">第一次使用这些数据后，我们将执行以下步骤。</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="cf1b" class="mc md it ly b gy me mf l mg mh">dvc add ./data/exp1 &amp;&amp; git add ./data/exp1.dvc</span><span id="98aa" class="mc md it ly b gy mi mf l mg mh">dvc add ./data/exp2 &amp;&amp; git add ./data/exp2.dvc</span><span id="5544" class="mc md it ly b gy mi mf l mg mh">dvc add ./data/exp3 &amp;&amp; git add ./data/exp3.dvc</span><span id="8d0f" class="mc md it ly b gy mi mf l mg mh">dvc add ./data/exp4 &amp;&amp; git add ./data/exp4.dvc</span></pre><p id="bba2" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这将创造。每个文件夹的 dvc 文件，该文件将被提交到 GitHub，这样我们就知道哪个版本的模型使用哪个版本的数据。</p><p id="a3f7" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在这之后，如果我们使用远程数据存储，我们需要推动 dvc 变化，</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="fe77" class="mc md it ly b gy me mf l mg mh">dvc push filename </span></pre><p id="2c6a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">该命令将推送最近的更改并将更新缓存，让我们来做，</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="a065" class="mc md it ly b gy me mf l mg mh">dvc status</span></pre><p id="a0d9" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这将检查数据中的任何潜在变化，如果有的话，它将跟踪它，我们可以提交它。</p><p id="7220" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">DVC 让合作变得非常容易。合作者可以用同样的方式设置它，或者他们可以用“dvc pull filename”命令提取数据。</p><p id="e675" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">此过程还适用于包含比当前持久存储在数据文件夹中的数据多得多的数据版本，因为 dvc 在其缓存中存储不同版本之间任意大小的差异，因此可以通过其 checkout 命令重新创建数据目录的较旧或较新状态。当然，结账也可以是另一个方向。</p><p id="5276" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">关于命令的更多信息，请访问它们的文档<a class="ae ld" href="https://dvc.org/doc" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="f74b" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">要将 DVC 与亚马逊 AWS S3 配合使用，请访问 https://dvc.org/doc/user-guide/external-dependencies<a class="ae ld" href="https://dvc.org/doc/user-guide/external-dependencies" rel="noopener ugc nofollow" target="_blank"/></p><p id="554a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">最好的总体亮点和特点是，</p><ol class=""><li id="b41c" class="le lf it kh b ki kj km kn kq lg ku lh ky li lc ls lk ll lm bi translated">它是 Git 兼容的！DVC 运行在任何 Git 存储库之上，兼容任何标准的 Git 服务器或提供商(GitHub、GitLab 等)。数据文件内容可以由网络可访问存储或任何支持的云解决方案共享。DVC 提供了分布式版本控制系统的所有优势——无锁、本地分支和版本控制。</li><li id="6729" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc ls lk ll lm bi translated">这是存储不可知论。你可以使用 S3、谷歌云和 Azure。</li><li id="332f" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc ls lk ll lm bi translated">它附带了度量跟踪，并包含一个命令来列出所有分支，以及度量值，以跟踪进度或选择最佳版本。</li><li id="ceb5" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc ls lk ll lm bi translated">与语言和框架无关</li><li id="cca2" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc ls lk ll lm bi translated">为 ML 管道框架提供端到端支持。</li><li id="ade4" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc ls lk ll lm bi translated">它可以跟踪故障！</li><li id="55d2" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc ls lk ll lm bi translated">它也兼容 HDFS，蜂巢和阿帕奇火花。</li></ol><p id="5e08" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">所以试试吧，让你的生活变得轻松！点击<a class="ae ld" href="https://dvc.org/doc/get-started" rel="noopener ugc nofollow" target="_blank">这里</a>开始吧！作为一名数据科学家，我强烈推荐每个数据科学家在他们的 ML 管道中使用它。</p></div></div>    
</body>
</html>