<html>
<head>
<title>How To Build A Speech Recognition Bot With Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用 Python 构建语音识别机器人</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-build-a-speech-recognition-bot-with-python-81d0fe3cea9a?source=collection_archive---------2-----------------------#2019-06-27">https://towardsdatascience.com/how-to-build-a-speech-recognition-bot-with-python-81d0fe3cea9a?source=collection_archive---------2-----------------------#2019-06-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0ba8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">即使你对语音识别一无所知</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/27138bbf33e14c53f63babdc86e10591.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QlPFLmXK7e6in9uh"/></div></div></figure><p id="36f6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你现在可能意识到了什么。</p><p id="afec" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">像亚马逊 Alexa 这样的语音产品的巨大成功已经证明，在可预见的未来，某种程度的语音支持将是家用技术的一个重要方面。</p><p id="d3cd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">换句话说，支持语音的产品将会改变游戏规则，因为它提供的交互性和可访问性是很少有技术可以比拟的。</p><p id="f91c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">不需要 GUI。</p><p id="6831" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">不需要发短信。</p><p id="f548" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">不需要表情符号。</p><p id="ecc9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">都是关于<a class="ae lq" href="https://developer.amazon.com/blogs/alexa/post/26c76734-3445-4d5f-8c78-aa1eae4100cf/gary-vaynerchuk-voice-will-explode-and-drive-companies-the-size-of-facebook-instagram" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> <em class="lr">速度</em> </strong> </a> <em class="lr">。</em></p><p id="2fad" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">速度是语音成为下一个主要用户界面的一个重要原因。每十年，我们都拥抱一种与技术互动的新方式。我们已经从字符模式发展到图形用户界面、网络和移动设备。</p><blockquote class="ls lt lu"><p id="8498" class="ku kv lr kw b kx ky ju kz la lb jx lc lv le lf lg lw li lj lk lx lm ln lo lp im bi translated"><strong class="kw iu">现在，语音提供了一种比移动应用更快捷、更简单的沟通和完成任务的方式。</strong></p></blockquote><p id="d306" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以告诉 Alexa 我们需要什么(关灯、调节恒温器、设置闹钟——或者使用像“Alexa，晚安”这样的单一话语来完成以上所有事情)，或者你可以拔出你的手机，解锁它，打开正确的应用程序，并执行一项或多项任务。</p><p id="621c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当您考虑习惯性用例时，即那些让客户不断回头的用例，通过语音获得的效率会随着时间的推移而增加。</p><blockquote class="ly"><p id="eb9b" class="lz ma it bd mb mc md me mf mg mh lp dk translated">“由于 Alexa，短信在未来将会下降”</p><p id="a798" class="lz ma it bd mb mc md me mf mg mh lp dk translated">—加里·维纳查克</p></blockquote><figure class="mi mj mk ml mm kn"><div class="bz fp l di"><div class="mn mo l"/></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk"><a class="mt mu ep" href="https://medium.com/u/c4ec9163657c?source=post_page-----81d0fe3cea9a--------------------------------" rel="noopener" target="_blank">Gary Vaynerchuk</a>: Voice Lets Us Say More Faster</figcaption></figure><p id="2212" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，这让我对着手一个新项目非常感兴趣，用 Python 构建一个简单的语音识别。</p><p id="2f23" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当然，我不会从头开始构建代码，因为这需要大量的训练数据和计算资源来使语音识别模型以一种体面的方式准确无误。</p><p id="30ec" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">相反，我使用了<strong class="kw iu"> Google 语音识别 API 来执行 Python </strong>的语音转文本任务(查看下面的演示，我向您展示了语音识别是如何工作的——现场！).</p><p id="ec75" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本文结束时，我希望您能更好地理解语音识别的一般工作原理，最重要的是，如何使用 Google 语音识别 API 和 Python 来实现它。</p><p id="a44e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">相信我。就这么简单。</p><p id="e110" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你感兴趣的话，可以在这里查看源代码。</p><p id="c809" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们开始吧！</p></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><h1 id="7d72" class="nc nd it bd ne nf ng nh ni nj nk nl nm jz nn ka no kc np kd nq kf nr kg ns nt bi translated">为什么使用谷歌语音识别 API？</h1><p id="9c74" class="pw-post-body-paragraph ku kv it kw b kx nu ju kz la nv jx lc ld nw lf lg lh nx lj lk ll ny ln lo lp im bi translated">您可能想知道，“鉴于语音识别日益增长的需求和流行，这是唯一可用的 API 吗？”</p><p id="ef5e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">答案是，还有其他免费或付费的 API，如下所示:</p><ul class=""><li id="0e1d" class="nz oa it kw b kx ky la lb ld ob lh oc ll od lp oe of og oh bi translated"><code class="fe oi oj ok ol b">recognize_bing()</code> : <a class="ae lq" href="https://azure.microsoft.com/en-us/services/cognitive-services/speech/" rel="noopener ugc nofollow" target="_blank">微软必应演讲</a></li><li id="b29d" class="nz oa it kw b kx om la on ld oo lh op ll oq lp oe of og oh bi translated"><code class="fe oi oj ok ol b">recognize_google()</code> : <a class="ae lq" href="https://w3c.github.io/speech-api/speechapi.html" rel="noopener ugc nofollow" target="_blank">谷歌网络语音 API </a></li><li id="137d" class="nz oa it kw b kx om la on ld oo lh op ll oq lp oe of og oh bi translated"><code class="fe oi oj ok ol b">recognize_google_cloud()</code> : <a class="ae lq" href="https://cloud.google.com/speech/" rel="noopener ugc nofollow" target="_blank">谷歌云语音</a>——需要安装谷歌云语音包</li><li id="cf19" class="nz oa it kw b kx om la on ld oo lh op ll oq lp oe of og oh bi translated"><code class="fe oi oj ok ol b">recognize_houndify()</code> : <a class="ae lq" href="https://www.houndify.com/" rel="noopener ugc nofollow" target="_blank">用 SoundHound 显示</a></li><li id="957c" class="nz oa it kw b kx om la on ld oo lh op ll oq lp oe of og oh bi translated"><code class="fe oi oj ok ol b">recognize_ibm()</code> : <a class="ae lq" href="https://www.ibm.com/watson/services/speech-to-text/" rel="noopener ugc nofollow" target="_blank"> IBM 语音转文字</a></li><li id="ef8c" class="nz oa it kw b kx om la on ld oo lh op ll oq lp oe of og oh bi translated"><code class="fe oi oj ok ol b">recognize_sphinx()</code> : <a class="ae lq" href="https://cmusphinx.github.io/" rel="noopener ugc nofollow" target="_blank"> CMU 斯芬克斯</a> -需要安装 PocketSphinx</li><li id="074f" class="nz oa it kw b kx om la on ld oo lh op ll oq lp oe of og oh bi translated"><code class="fe oi oj ok ol b">recognize_wit()</code> : <a class="ae lq" href="https://wit.ai/" rel="noopener ugc nofollow" target="_blank">机智.爱</a></li></ul><p id="5054" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，我从<a class="ae lq" href="https://pypi.org/project/SpeechRecognition/" rel="noopener ugc nofollow" target="_blank"><strong class="kw iu">speecher recognition</strong></a><strong class="kw iu"/>库中选择了<a class="ae lq" href="https://w3c.github.io/speech-api/speechapi.html" rel="noopener ugc nofollow" target="_blank"> Google Web Speech API </a>，因为它有一个默认的 API 密匙，这个密匙是硬编码到 speecher recognition 库中的。</p><p id="3fd2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这意味着您可以立即开始，而不必使用 API 密钥或其他 API 的用户名/密码组合进行身份验证。</p><p id="5b6e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是<a class="ae lq" href="https://w3c.github.io/speech-api/speechapi.html" rel="noopener ugc nofollow" target="_blank"> Google Web Speech API </a>的便利性也带有一定的局限性:<strong class="kw iu">自己键的 API 配额是每天 50 个请求，目前没有办法提高这个限制。</strong></p><p id="8d73" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果我们只是想将这个 API 用于实验目的，这符合我们的用例。请注意，如果您运行的应用程序或网站一直在调用 API，那么您可能需要考虑从上面的任何一个 API 获取付费服务。</p><h1 id="b75a" class="nc nd it bd ne nf or nh ni nj os nl nm jz ot ka no kc ou kd nq kf ov kg ns nt bi translated">使用 Google 语音识别 API 用 Python 构建语音识别</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/03ba4a5f579c5975038020273adc3cf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SfK0kpTf7liBR-jw"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk"><a class="ae lq" href="https://unsplash.com/photos/npxXWgQ33ZQ" rel="noopener ugc nofollow" target="_blank">(Source)</a></figcaption></figure><p id="8637" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了避免让您对语音识别如何工作的技术细节感到厌烦，您可以阅读这篇很棒的<a class="ae lq" href="https://realpython.com/python-speech-recognition/" rel="noopener ugc nofollow" target="_blank">文章，它讨论了一般的机制以及如何实现 API </a>。</p><p id="c10d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在接下来的文章中，我将向您展示我是如何按照本文一步一步地实现这个 API 的。</p><p id="e3ce" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是首先你需要使用<code class="fe oi oj ok ol b">pip install SpeechRecognition</code>安装<a class="ae lq" href="https://pypi.org/project/SpeechRecognition/" rel="noopener ugc nofollow" target="_blank"><strong class="kw iu">speecher recognition</strong></a><strong class="kw iu"/>库。</p><p id="ec34" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以使用来自这个库本身的 Google Web Speech API。</p><p id="69aa" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这个实现中，我使用自己的麦克风录制了我的语音，SpeechRecognizer 访问了麦克风<strong class="kw iu">(安装</strong> <a class="ae lq" href="https://people.csail.mit.edu/hubert/pyaudio/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> PyAudio 包</strong> </a> <strong class="kw iu">以访问麦克风)</strong>并相应地识别了我的语音。</p><p id="5f80" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">查看下面的代码片段来理解完整的实现，因为它们相对来说是不言自明的。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ow mo l"/></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk">Function to recognize speech from microphone</figcaption></figure><p id="ec3a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了处理环境噪声，您需要使用<code class="fe oi oj ok ol b">Recognizer</code>类的<code class="fe oi oj ok ol b">adjust_for_ambient_noise()</code>方法，以便库能够识别您的声音。</p><p id="d998" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">运行<code class="fe oi oj ok ol b">adjust_for_ambient_noise()</code>方法后，等待一秒钟，让它分析收集的音频源，以处理环境噪声并捕捉正确的语音。</p><p id="e9d4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，我们需要实现<code class="fe oi oj ok ol b">try and except</code>块来处理错误，比如在发送请求后 API 不可达或没有响应，或者我们的语音无法识别。</p><p id="c419" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">要使用上面的函数，您只需实现下面的块，然后…瞧！你做到了！😃</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ow mo l"/></div></figure><h1 id="242b" class="nc nd it bd ne nf or nh ni nj os nl nm jz ot ka no kc ou kd nq kf ov kg ns nt bi translated">使用谷歌语音识别 API 的简单演示</h1><p id="e99c" class="pw-post-body-paragraph ku kv it kw b kx nu ju kz la nv jx lc ld nw lf lg lh nx lj lk ll ny ln lo lp im bi translated">既然我们已经准备好了完整的实现代码。是时候看看这东西是怎么运作的了。</p><p id="c227" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我录制了一个简短的视频，向您展示 API 是如何从录制我的声音到以文本格式返回它的。</p><p id="2272" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">虽然这可能看起来不像我们预期的那样准确，但这绝对值得花时间来研究代码和 API！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div></figure></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><h1 id="4aa4" class="nc nd it bd ne nf ng nh ni nj nk nl nm jz nn ka no kc np kd nq kf nr kg ns nt bi translated">最后的想法</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ad65e36ac9ae7157b776fc812322ade1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PWyEx063DEwy-Shm"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk"><a class="ae lq" href="https://unsplash.com/photos/Nl-GCtizDHg" rel="noopener ugc nofollow" target="_blank">(Source)</a></figcaption></figure><p id="96b5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">感谢您的阅读。</p><p id="9979" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我希望您现在对语音识别的一般工作原理有了更好的理解，最重要的是，如何通过 Python 使用 Google 语音识别 API 来实现它。</p><p id="d34b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你有兴趣，可以在这里查看源代码。</p><p id="6398" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我还建议您尝试其他 API 来比较语音到文本的准确性。</p><p id="7541" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">尽管现阶段支持语音的产品尚未在企业和我们的日常生活中广泛使用，但我真的相信这项技术迟早会颠覆许多企业以及消费者使用语音识别功能产品的方式。</p><p id="3024" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一如既往，如果您有任何问题或意见，请随时在下面留下您的反馈，或者您可以随时通过<a class="ae lq" href="https://www.linkedin.com/in/admond1994/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>联系我。在那之前，下一篇文章再见！😄</p></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><h2 id="5fc3" class="ox nd it bd ne oy oz dn ni pa pb dp nm ld pc pd no lh pe pf nq ll pg ph ns pi bi translated">关于作者</h2><p id="5193" class="pw-post-body-paragraph ku kv it kw b kx nu ju kz la nv jx lc ld nw lf lg lh nx lj lk ll ny ln lo lp im bi translated"><a class="ae lq" href="https://www.linkedin.com/in/admond1994/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu">阿德蒙德·李</strong> </a>目前是东南亚排名第一的商业银行 API 平台<a class="ae lq" href="https://www.trystaq.com" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> Staq </strong> </a> <strong class="kw iu"> — </strong>的联合创始人/首席技术官。</p><p id="f20d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">想要获得免费的每周数据科学和创业见解吗？</p><p id="f2b1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lq" href="https://bit.ly/3pGF8jv" rel="noopener ugc nofollow" target="_blank"/></p><p id="c060" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可以在<a class="ae lq" href="https://www.linkedin.com/in/admond1994/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>、<a class="ae lq" href="https://medium.com/@admond1994" rel="noopener"> Medium </a>、<a class="ae lq" href="https://twitter.com/admond1994" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae lq" href="https://www.facebook.com/admond1994" rel="noopener ugc nofollow" target="_blank">脸书</a>上和他联系。</p><div class="pj pk gp gr pl pm"><a href="https://www.admondlee.com/" rel="noopener  ugc nofollow" target="_blank"><div class="pn ab fo"><div class="po ab pp cl cj pq"><h2 class="bd iu gy z fp pr fr fs ps fu fw is bi translated">阿德蒙德·李</h2><div class="pt l"><h3 class="bd b gy z fp pr fr fs ps fu fw dk translated">让每个人都能接触到数据科学。Admond 正在通过先进的社交分析和机器学习，利用可操作的见解帮助公司和数字营销机构实现营销投资回报。</h3></div><div class="pu l"><p class="bd b dl z fp pr fr fs ps fu fw dk translated">www.admondlee.com</p></div></div><div class="pv l"><div class="pw l px py pz pv qa ks pm"/></div></div></a></div></div></div>    
</body>
</html>