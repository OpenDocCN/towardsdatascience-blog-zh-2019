<html>
<head>
<title>Data visualization with Python Using Seaborn and Plotly_ GDP per Capita &amp; Life Expectency Dataset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Seaborn 和 Plotly_ 人均 GDP 和预期寿命数据集的 Python 数据可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-visualization-with-python-using-seaborn-and-plotly-gdp-per-capita-life-expectency-dataset-cd5426e7ab3b?source=collection_archive---------8-----------------------#2019-12-05">https://towardsdatascience.com/data-visualization-with-python-using-seaborn-and-plotly-gdp-per-capita-life-expectency-dataset-cd5426e7ab3b?source=collection_archive---------8-----------------------#2019-12-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bd38" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">当社会和经济科学与数据科学和谐一致时。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e37c0bcbae34c2a9ae497b18afbb86a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Rspb_FAmsGlmxamX"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@goumbik?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Lukas Blazek</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e5bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本教程旨在帮助您快速入门并使用 python 数据可视化库。我选择 seaborn 和 plotly，这是最常用和最棒的工具，用来可视化完全交互的图，并使数据看起来很棒。</p><p id="a8d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你也会发现经济和社会因素之间的关系。我们将在此图中处理的数据集是世界各地的人均 GDP、社会支持、健康预期寿命、选择自由、慷慨程度等。</p><p id="804c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我用 jupyter 笔记本，你可以从 Anaconda 包中获得访问权限。</p><p id="7129" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">如果你想在这里安装蟒蛇</strong><a class="ae kv" href="https://www.anaconda.com/distribution/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"/></a><strong class="ky ir">。</strong></p><h1 id="43f1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">Seaborn 简要概述</h1><p id="19b7" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Seaborn 是一个基于 matplotlib 的可视化库，它与 pandas 库配合得非常好。</p><p id="7331" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用 seaborn 的原因之一是它可以生成漂亮的统计图。认识到 seaborn 是 matplotlib 的补充而不是替代是非常重要的。</p><p id="8ffa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要安装 seaborn，您可以在命令行或终端使用<strong class="ky ir"> pip 或 conda </strong>,其中包括:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="d762" class="mu lt iq mq b gy mv mw l mx my">!pip install seaborn<br/>or<br/>!conda install seaborn</span></pre><ol class=""><li id="0970" class="mz na iq ky b kz la lc ld lf nb lj nc ln nd lr ne nf ng nh bi translated"><strong class="ky ir">导入库</strong></li></ol><p id="69a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们从导入几个库开始，numpy(数字 python 库)，pandas 用于数据帧和数据系列，seaborn 和 matplotlib 用于可视化。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="ae35" class="mu lt iq mq b gy mv mw l mx my">import numpy as np<br/>import pandas as pd<br/>import seaborn as sns<br/>import matplotlib.pyplot as plt<br/>%matplotlib inline #use it to show plot directly below the code </span></pre><p id="fc1d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 2。使用熊猫读取数据</strong></p><p id="905c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该数据在 csv 文件格式中称为“2019.csv”。这就是我们将在本教程中使用的数据集。</p><p id="4ba4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">head()函数返回数据帧的前 5 行，如下所示:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="2868" class="mu lt iq mq b gy mv mw l mx my">df= pd.read_csv('2019.csv')<br/>df.head()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/caae546954a2faa32b88ca2a8e051bef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v9yCAs4ppvcISqR0thZsfg.jpeg"/></div></div></figure><h2 id="d65f" class="mu lt iq bd lu nj nk dn ly nl nm dp mc lf nn no me lj np nq mg ln nr ns mi nt bi translated">分布图</h2><p id="3c72" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">1.<strong class="ky ir">距离图</strong>:</p><p id="65ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我在这里做的只是使用 SNS . distplot(dataofsinglecolumn)绘制数据框架(人均 GDP)中单个列的分布。</p><p id="c879" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要删除<strong class="ky ir">核密度估计</strong>图，您可以使用<strong class="ky ir"> kde=False </strong>。</p><p id="2e93" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">bins = 30 表示定义直方图形状的 bin 数量，我在左侧图中使用了 8 个 bin，在另一个图中使用了 30 个 bin，这样您就可以看到差异。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="5b78" class="mu lt iq mq b gy mv mw l mx my">sns.distplot(df['GDP per capita'], bins=8) <br/>out[5]</span><span id="2cba" class="mu lt iq mq b gy nu mw l mx my">sns.distplot(df['GDP per capita'], <strong class="mq ir">kde = False</strong> , bins = 30)<br/>out[6]</span></pre><div class="kg kh ki kj gt ab cb"><figure class="nv kk nw nx ny nz oa paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/59158a010c9cde78525acb94f11f204c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*-tCHPQKbZNQH1hMILRrAog.jpeg"/></div></figure><figure class="nv kk ob nx ny nz oa paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/488c724f848bd3c6b0c9e81a11b708e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/format:webp/1*7s9cANvAQ4GmFuCeQnREUg.jpeg"/></div></figure></div><p id="13b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">2.<strong class="ky ir">联合策划</strong>:</p><p id="4547" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Seaborn 的 jointplot 显示了两个变量之间的关系。</p><p id="84df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此处使用散点图和直方图显示了数据中 x 和 y 两列的图。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="b3b8" class="mu lt iq mq b gy mv mw l mx my">sns.jointplot(x=df['GDP per capita'], y= df['Healthy life expectancy'],data=df) #two ditribution</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/92ebcacbf1740854628eb1f50f718949.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*VSyUwnV_MVGzVi76KEQstQ.jpeg"/></div></figure><p id="8224" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以在下面添加要绘制的绘图类型，例如，kind='reg '表示绘制带有回归线的散点图，kind='hex '表示将数据分成六边形，在空白处绘制直方图。</p><p id="d1d0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以看到人均 GDP 和健康预期寿命是正相关的。意味着如果人均 GDP 高，健康的预期寿命也会高。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="b5b8" class="mu lt iq mq b gy mv mw l mx my">sns.jointplot(x=df['GDP per capita'], y= df['Healthy life expectancy'],data=df,kind='reg') #plot in the right side</span><span id="1f92" class="mu lt iq mq b gy nu mw l mx my">ns.jointplot(x=df['GDP per capita'], y= df['Healthy life expectancy'],data=df,kind='hex') # plot in the left</span></pre><div class="kg kh ki kj gt ab cb"><figure class="nv kk od nx ny nz oa paragraph-image"><img src="../Images/789d3cc117d576c4a53a70d926af179c.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/1*OB9afzw3bl_Tp4HvjbV_nw.png"/></figure><figure class="nv kk oe nx ny nz oa paragraph-image"><img src="../Images/e7f5b0725be410c9660dfe20e1e88020.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*FHkoDlPYr2KJu9S0_DMxWg.jpeg"/></figure></div><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="3fe9" class="mu lt iq mq b gy mv mw l mx my">sns.pairplot(df)#relationship entire datasets</span></pre><p id="8ec2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">令人惊讶的是，一行简单的代码给了我们整个情节！</p><p id="494c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这代表了整个数据集之间的关系。直方图允许我们看到单个变量的分布，而散点图显示两个变量之间的关系。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/cccacec5884144f065f618fca222bc53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZOroCSD0atukEWW7qkSLPA.png"/></div></div></figure><h2 id="67d3" class="mu lt iq bd lu nj nk dn ly nl nm dp mc lf nn no me lj np nq mg ln nr ns mi nt bi translated">分类图:柱状图</h2><p id="bd2d" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">柱状图用于绘制分类变量示例性别男/女…</p><p id="2c5a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，我使用国家作为类别，并使用 head()函数绘制前 3 个国家的人均 GDP。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="8538" class="mu lt iq mq b gy mv mw l mx my">sns.barplot(x=df['Country or region'].head(3),y=df['GDP per capita'],data=df)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/de43293f4f48f3a5154aaae3ac076f46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*UPy9asM8cPGSwBP5JHtR2w.jpeg"/></div></figure><h2 id="d00c" class="mu lt iq bd lu nj nk dn ly nl nm dp mc lf nn no me lj np nq mg ln nr ns mi nt bi translated">矩阵图</h2><p id="c919" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我在这里所做的是选择 4 列数据，并使用 corr()函数来查找所选数据之间的相关性。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="39d4" class="mu lt iq mq b gy mv mw l mx my"># Matrix form for correlation data<br/>data_select = df[['GDP per capita','Social support','Healthy life expectancy','Perceptions of corruption']]<br/>data_select.corr()</span></pre><p id="ef90" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以在这里看到一个矩阵形式，它表示某种值，这些值代表相关程度，相关程度通常在-1 到 1 之间。</p><p id="72f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果 corr 值接近 1，这意味着变量有很强的正相关性。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/9feb11c35a49c3cc679e2de1974d831c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w6LSVNkmoUV9cihOdXT2qQ.jpeg"/></div></div></figure><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="baa7" class="mu lt iq mq b gy mv mw l mx my">sns.heatmap(df_select.corr(), cmap='coolwarm')</span></pre><p id="5fba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，热图真正做的是根据某种梯度标度将数据相关值表示为图表中的颜色:</p><p id="8825" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以通过添加 cmap= '…'来更改颜色地图，例如'绿色'，'蓝色'，'凉爽温暖'…对于所有的颜色地图，请查看:<a class="ae kv" href="https://matplotlib.org/tutorials/colors/colormaps.html" rel="noopener ugc nofollow" target="_blank">http://matplotlib.org/users/colormaps.html</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/5efe543bb708587d85225fda5bbd961a.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*9F3MHebtkiAifc_DuQC9Xg.png"/></div></figure><h1 id="6369" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">非常简单的概述</h1><p id="9e6c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Plotly 是一个数据可视化库，可以用来创建不同类型的交互式图表、地图和绘图..</p><p id="2505" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://chart-studio.plot.ly/feed/#/" rel="noopener ugc nofollow" target="_blank">此处 plotly 网站</a></p><p id="7075" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你能做的第一件事就是安装 plotly 和袖扣库。</p><p id="90d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">袖扣与熊猫有着紧密的联系，除非安装了袖扣，否则你无法从数据框中绘制出情节。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="243e" class="mu lt iq mq b gy mv mw l mx my">!pip install plotly<br/>!pip install cufflinks</span></pre><p id="6d9e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要连接 chart_studio，您可以到主页<a class="ae kv" href="https://plot.ly/online-chart-maker/" rel="noopener ugc nofollow" target="_blank"> plotly </a>注册并在设置帐户中获取您的 api_key。</p><p id="0de5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于 plotly 是一个在线平台，必须输入登录凭证才能在在线模式下使用。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="56f4" class="mu lt iq mq b gy mv mw l mx my">chart_studio.tools.set_credentials_file(username='XXXX, api_key='xxxxxxxxxx')</span></pre><h2 id="54ec" class="mu lt iq bd lu nj nk dn ly nl nm dp mc lf nn no me lj np nq mg ln nr ns mi nt bi translated">加载库</h2><p id="eec7" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">下面导入 jupyter 笔记本上的 plotly 和袖扣，还有 chart_studio、plotly 工具和 graph 对象。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oj ok l"/></div></figure><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="437c" class="mu lt iq mq b gy mv mw l mx my">cf.go_offline()<br/>cf.set_config_file(offline =False , world_readable= True)</span></pre><p id="54b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将使用在线模式，这对于 Jupyter 笔记本来说已经足够了。</p><h2 id="6ee9" class="mu lt iq bd lu nj nk dn ly nl nm dp mc lf nn no me lj np nq mg ln nr ns mi nt bi translated">折线图</h2><p id="d834" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">首先，我选择数据集中的两列；健康的预期寿命和人均 GDP，然后我为标题名和 xaxis / yaxis 名创建了一个字典，并将它们放在布局对象中。</p><p id="f516" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我用 dict()函数举例；dict(a=8，b=10)代替{"a": 8，" b": 10 }</p><p id="f1d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要将 dataframe 绘制为折线图，您只需调用 dataframe 对象的 iplot 方法。</p><p id="b1b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">cufflinks 和 plotly 允许使用语法 data.iplot 绘制数据，然后传入文件名和创建的布局。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="d5ba" class="mu lt iq mq b gy mv mw l mx my">data= df[['Healthy life expectancy', 'GDP per capita']]</span><span id="aa84" class="mu lt iq mq b gy nu mw l mx my">layout = dict(title = 'Line Chart From Pandas DataFrame', xaxis= dict(title='x-axis'), yaxis= dict(title='y-axis'))</span><span id="296f" class="mu lt iq mq b gy nu mw l mx my">data.iplot(filename='cf-simple-line-chart', layout=layout)</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol ok l"/></div></figure><h2 id="11f3" class="mu lt iq bd lu nj nk dn ly nl nm dp mc lf nn no me lj np nq mg ln nr ns mi nt bi translated">散点图</h2><p id="515b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">mode 参数应该总是设置为"<strong class="ky ir"> markers </strong>，默认情况下 plotly 会在数据点之间绘制线条。所以如果你想要没有线条的点，你需要确保设置绘图模式为标记。</p><p id="9ca1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就像前面的例子一样，我们需要一个 fig 对象，它应该是一个 dictionary 对象，包含两个字典，一个用于数据，一个用于布局。</p><p id="428c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在数据字典中，我们定义了两组要绘制的 x 和 y 变量，在两个图中，x 变量将是相同的，这允许比较与国家列相关的人均 GDP 和健康预期寿命。</p><p id="81db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我使用<strong class="ky ir"> data.go </strong>语法创建包含 data1 和 data2 的数据对象，并将其赋给 mydata 变量。</p><p id="a01e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还要创建布局对象，并传入散点图的标题。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="d0dc" class="mu lt iq mq b gy mv mw l mx my"><strong class="mq ir">data1</strong>=go.Scatter(x=df['Country or region'],y=df['GDP per capita'], name="GDP per capita", <strong class="mq ir">mode="markers"</strong>) </span><span id="09bf" class="mu lt iq mq b gy nu mw l mx my"><strong class="mq ir">data2</strong>=go.Scatter(x=df['Country or region'],y=df['Healthy life expectancy'],name="Healthy life expectancy",<strong class="mq ir">mode="markers"</strong>)</span><span id="8da8" class="mu lt iq mq b gy nu mw l mx my">mydata = go.Data([data1, data2])</span><span id="4184" class="mu lt iq mq b gy nu mw l mx my">mylayout = go.Layout( title="GDP per capita vs. Life expectancy")</span><span id="7d8e" class="mu lt iq mq b gy nu mw l mx my">fig = go.Figure(data=mydata, layout=mylayout)</span><span id="5a38" class="mu lt iq mq b gy nu mw l mx my">chart_studio.plotly.iplot(fig)</span></pre><p id="ce38" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是我们使用 chart_studio 包绘制的图！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol ok l"/></div></figure><p id="ebe1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里相同的代码，但我使用模式=“线+标记”，它将连接数据点作为线，同时显示散点图。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol ok l"/></div></figure><h2 id="342c" class="mu lt iq bd lu nj nk dn ly nl nm dp mc lf nn no me lj np nq mg ln nr ns mi nt bi translated">创建条形图</h2><p id="19ab" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这里展示了如何在 plotly 中自定义颜色。</p><p id="d88f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们需要使用一个名为 color_theme 的字典对象，我们将生成一个颜色列表，其中包含我们要在条形图中使用的颜色的 RGBA 代码。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="bdd4" class="mu lt iq mq b gy mv mw l mx my">color_theme = dict(color=['rgba(169,169,169,1)', 'rgba(255,160,122,1)','rgba(176,224,230,1)', 'rgba(255,228,196,1)',<br/>                          'rgba(189,183,107,1)', 'rgba(188,143,143,1)','rgba(221,160,221,1)'])</span></pre><p id="ab75" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我将向你展示如何使用 plotly 创建条形图。</p><p id="0961" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们使用 trace 对象来指定我们想要的图表类型。所以在这种情况下我们使用<strong class="ky ir"> go。Bar() </strong>函数然后我们传入两个变量 x 和 y，分别代表 7 个国家的人头数据和健康预期寿命，还传入我们已经定义好的 color_theme。</p><p id="dd83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们指定我们的布局参数，在这段代码中，我只使用一个参数来命名我们的绘图标题，您可以添加 x 轴和 y 轴名称。</p><p id="e1b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，使用 iplot()函数绘制它，然后传入我们的数据。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="1417" class="mu lt iq mq b gy mv mw l mx my">trace0 = <strong class="mq ir">go.Bar</strong>(x=df['Country or region'].head(7), y=df['Healthy life expectancy'], <strong class="mq ir">marker=color_theme</strong>)</span><span id="621d" class="mu lt iq mq b gy nu mw l mx my">data = [trace0]</span><span id="588e" class="mu lt iq mq b gy nu mw l mx my">layout = go.Layout(title='Healthy life expectancy')</span><span id="2fe2" class="mu lt iq mq b gy nu mw l mx my">fig = go.Figure(data=data, layout=layout)</span><span id="4e53" class="mu lt iq mq b gy nu mw l mx my">chart_studio.plotly.iplot(fig, filename='color-bar-chart')</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol ok l"/></div></figure><h2 id="df85" class="mu lt iq bd lu nj nk dn ly nl nm dp mc lf nn no me lj np nq mg ln nr ns mi nt bi translated">箱形图</h2><p id="b67e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">通常在统计学中使用的箱线图，它通过测量数据集的中值、平均值和众数，为我们提供了有关数据如何分布的更多信息。</p><p id="af86" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在下面的代码中，我们只选择了 2 列数据，然后我们使用 iplot 方法，并传入一个参数来指定绘图的类型，然后我们给出了箱线图的文件名。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="5f1b" class="mu lt iq mq b gy mv mw l mx my">df_select = df[['GDP per capita','Healthy life expectancy']] </span><span id="22ae" class="mu lt iq mq b gy nu mw l mx my">df_select.iplot(kind='box', filename='box-plot')</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol ok l"/></div></figure><h2 id="c8d7" class="mu lt iq bd lu nj nk dn ly nl nm dp mc lf nn no me lj np nq mg ln nr ns mi nt bi translated">圆形分格统计图表</h2><p id="0385" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在这里，我使用 10 个国家的指数作为标签创建了一个简单的饼图，并绘制了每个国家的人均 GDP 值。</p><p id="7c69" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后使用 go 创建一个 gragh 对象。Pie()并填写标签和值变量。最后，使用 iplot()函数绘制这个图。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="d52e" class="mu lt iq mq b gy mv mw l mx my">labels = df['Country or region'].head(10).value_counts().index<br/>values = df['GDP per capita'].head(10).values<br/>trace = go.Pie(labels=labels, values=values)</span><span id="f153" class="mu lt iq mq b gy nu mw l mx my">chart_studio.plotly.iplot([trace], filename='basic_pie_chart')</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol ok l"/></div></figure><h2 id="35d8" class="mu lt iq bd lu nj nk dn ly nl nm dp mc lf nn no me lj np nq mg ln nr ns mi nt bi translated">等值区域图</h2><p id="8652" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">使用 plotly 是用 python 生成地图的最简单的方法。</p><p id="ed61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们有两种主要类型的绘图对象；<strong class="ky ir">数据对象</strong>和<strong class="ky ir">布局对象。</strong></p><p id="61a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们需要数据传入字典，并为地图中的数据设置参数。让我们从传递 choropleth 类型开始，这意味着我们希望 plotly 生成什么类型的地图。然后定义我们的色阶，反转色阶，黄色向下，紫色向上。我们将位置设置为数据帧中的国家，z 变量由地图中的颜色表示。最后，我们将传入文本参数来定义在地图上移动时显示的文本。</p><p id="03a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">其次，创建一个布局字典来设置我们地图的标题。然后创建一个包含数据和布局对象的新字典，我们称之为 fig。</p><p id="71e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了绘制它，我们只需在 fig 对象上调用 iplot 方法，然后给出一个文件名。开始了…</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="c621" class="mu lt iq mq b gy mv mw l mx my">data = dict(<br/>        <strong class="mq ir">type = 'choropleth'</strong>,<br/>        colorscale = 'Viridis',<br/>        reversescale = True,<br/>        locations = df['Country or region'],<br/>        locationmode = "country names",<br/>        z = df['GDP per capita'],<br/>        text = df['Country or region'],<br/>        colorbar = {'title' : 'GDP per capita_world'},<br/>      )<br/>    <br/>layout=dict(title_text = '2019 GDP per capita by State')<br/>fig = go.Figure(data=data,layout=layout)<strong class="mq ir"> </strong>chart_studio.plotly.iplot(fig, filename='choropleth')</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol ok l"/></div></figure><h1 id="5845" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="7e72" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">数据可视化是一个很好的工具，可以让数据更具可读性，并为您在现实世界中发现更多见解创造了巨大的机会。</p><p id="fd3b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这篇文章的所有代码都是 GitHub   <strong class="ky ir"> </strong>上的<a class="ae kv" href="https://github.com/fati8999-tech/Data-visualization-with-Python-Using-Seaborn-and-Plotly_-GDP-per-Capita-Life-Expectency-Dataset" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">。图表都是交互式的，可以在<strong class="ky ir"> </strong> <a class="ae kv" href="https://chart-studio.plot.ly/~fatima999" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">查看，这里</strong> </a>。</strong></a></p><p id="833e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我欢迎反馈。我可以在 Linkedin <a class="ae kv" href="https://www.linkedin.com/in/fatima-ezzahra-iazza-10354815a/" rel="noopener ugc nofollow" target="_blank">这里</a>找到我。</p></div></div>    
</body>
</html>