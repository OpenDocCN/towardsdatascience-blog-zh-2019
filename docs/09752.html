<html>
<head>
<title>Data visualization with D3.js for beginners</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">面向初学者的 D3.js 数据可视化</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/data-visualization-with-d3-js-for-beginners-b62921e03b49?source=collection_archive---------4-----------------------#2019-12-22">https://towardsdatascience.com/data-visualization-with-d3-js-for-beginners-b62921e03b49?source=collection_archive---------4-----------------------#2019-12-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ee31" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">D3.js 可视化数据入门</h2></div><p id="8df5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你有没有走进一个拥挤的体育场或一场音乐表演，并试图猜测有多少人围着你？你错了吗？分析大量数据可能会让人不知所措。但是，当你把抽象的数据点转换成精确的、可观的视觉效果时，你将能够通过分析来看待事物。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/74b5db0ad5d1e4e96084b6f001327f65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qiLMpHZZ9DHPMceajckxgg.jpeg"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">Photo by <a class="ae lu" href="https://unsplash.com/@kmuza?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Carlos Muza</a> on <a class="ae lu" href="https://unsplash.com/s/photos/data-analysis?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="53ac" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是一个信息时代，我们有足够多的数据，但只有少数人知道如何处理这些数据。人们对视觉的依赖远远超过其他任何东西。这就是为什么直观呈现的数据比简单的数字更有说服力。优秀的可视化可以抓住人们的注意力，而无尽的列和行的数字只能混淆他们。为了使这些可视化和分析成为可能，我们需要现有语言的框架或库。这就是 D3.js 发挥作用的地方。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi lv"><img src="../Images/4314808ee5d4ae7ef0c30226a9f1bd23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EjXUataOq1G0j7Y2hgRr2g.png"/></div></div></figure><p id="2778" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> D3 </strong>代表<strong class="kk iu">数据驱动文档</strong>。如果你计划在网络上创建自定义的可视化效果，很可能你已经听说过<a class="ae lu" href="https://d3js.org/" rel="noopener ugc nofollow" target="_blank"> D3.js </a>。一个基于 web 的可视化库，具有大量的 API 来处理在 web 上创建高级、动态和漂亮的可视化内容的繁重工作。</p><blockquote class="lw lx ly"><p id="312c" class="ki kj lz kk b kl km ju kn ko kp jx kq ma ks kt ku mb kw kx ky mc la lb lc ld im bi translated">D3.js 是一个基于数据操作文档的 JavaScript 库。D3.js 帮助您使用 HTML、SVG 和 CSS 将数据变得生动。D3 对 web 标准的重视使您可以获得现代浏览器的全部功能，而无需将自己束缚于专有框架，将强大的可视化组件和数据驱动的 DOM 操作方法结合起来。</p></blockquote><p id="f5c4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">D3 完成的主要任务是，它允许将任何类型的数据绑定到 DOM，然后对其进行数据驱动的转换，从而在应用程序中轻松构建交互式数据可视化。</p><p id="6c3b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你有兴趣深入研究，D3 的 Github 库和 D3 使用的 API 文档也是很好的资源。</p><p id="84e8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在开始用 D3.js 吧。你可以打开你的 IDE 或编辑器，创建一个名为 index.html 的文件，只是为了玩玩 D3.js。在我们的应用程序中使用这个库就像直接添加链接来获得你在 index.html 创建的最新版本一样简单:</p><pre class="lf lg lh li gt md me mf mg aw mh bi"><span id="e471" class="mi mj it me b gy mk ml l mm mn">&lt;script src="https://d3js.org/d3.v5.min.js"&gt;&lt;/script&gt;</span></pre><p id="b646" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以现在您已经准备好在您的示例应用程序中使用 D3.js 及其所有特性。</p><h2 id="4203" class="mi mj it bd mo mp mq dn mr ms mt dp mu kr mv mw mx kv my mz na kz nb nc nd ne bi translated">元素的选择</h2><p id="334d" class="pw-post-body-paragraph ki kj it kk b kl nf ju kn ko ng jx kq kr nh kt ku kv ni kx ky kz nj lb lc ld im bi translated">选择意味着从名称或 css 选择器中选择 html 元素。(例如:h2，p)然后在选择了元素之后，我们可以使用 D3 来操作和转换这些 html 元素。选择允许文档对象模型(DOM)的强大数据驱动转换:设置<a class="ae lu" href="https://github.com/d3/d3-selection#selection_attr" rel="noopener ugc nofollow" target="_blank">属性</a>、<a class="ae lu" href="https://github.com/d3/d3-selection#selection_style" rel="noopener ugc nofollow" target="_blank">样式</a>、<a class="ae lu" href="https://github.com/d3/d3-selection#selection_property" rel="noopener ugc nofollow" target="_blank">属性</a>、<a class="ae lu" href="https://github.com/d3/d3-selection#selection_html" rel="noopener ugc nofollow" target="_blank"> HTML </a>或<a class="ae lu" href="https://github.com/d3/d3-selection#selection_text" rel="noopener ugc nofollow" target="_blank">文本</a>内容，等等。使用<a class="ae lu" href="https://github.com/d3/d3-selection#joining-data" rel="noopener ugc nofollow" target="_blank">数据连接</a>的<a class="ae lu" href="https://github.com/d3/d3-selection#selection_enter" rel="noopener ugc nofollow" target="_blank">进入</a>和<a class="ae lu" href="https://github.com/d3/d3-selection#selection_enter" rel="noopener ugc nofollow" target="_blank">退出</a>选择，您也可以<a class="ae lu" href="https://github.com/d3/d3-selection#selection_append" rel="noopener ugc nofollow" target="_blank">添加</a>或<a class="ae lu" href="https://github.com/d3/d3-selection#selection_remove" rel="noopener ugc nofollow" target="_blank">移除</a>元素来对应数据。</p><p id="3f0e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">想象我们有一个简单的 html 页面如下。</p><pre class="lf lg lh li gt md me mf mg aw mh bi"><span id="4abe" class="mi mj it me b gy mk ml l mm mn">&lt;html&gt;<br/>    &lt;head&gt;<br/>        &lt;title&gt;My sample HTML page&lt;/title&gt;<br/>    &lt;/head&gt;<br/>    &lt;body&gt;<br/>        &lt;h1&gt;D3.js&lt;/h3&gt; <br/>        &lt;p&gt;I'm using D3.js here !&lt;/p&gt;<br/>        &lt;p&gt;We all are using D3.js here !&lt;/p&gt;<br/>        <!-- -->&lt;script src="https://d3js.org/d3.v5.min.js"&gt;&lt;/script&gt;<br/>        &lt;script&gt;<br/>             d3.select('h1').style('color', 'green');<br/>             d3.selectAll('p').style('font-size', '30px');<br/>        &lt;/script&gt;<br/>    &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="5e3e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里有几件重要事情需要注意。所以这里用了两个关键词。这两种方法都使用元素名作为参数。第一个<em class="lz"> d3.select() </em>方法返回与给定参数匹配的 DOM 元素的第一个选择。所以在上面的例子中会是<em class="lz">&lt;h1&gt;D3 . js&lt;/H3&gt;</em>。第二个方法是<em class="lz"> d3.selectAll() </em>，它返回对应于给定参数的所有 html 元素。如果它没有找到任何&lt; p &gt;标签，它将返回一个空选择。在给出的例子中<em class="lz"> &lt; p &gt;我这里用的是 D3.js！&lt; /p &gt; </em>和<em class="lz"> &lt; p &gt;我们这里都在用 D3.js！&lt; /p &gt; </em>两者都会返回。</p><p id="7bea" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，您还可以看到在选择 DOM 元素之后所做的操作。我们可以改变样式，甚至改变显示的文本。因此，在我们的示例中，当它被呈现时，标题“D3.js”将是绿色的。</p><p id="1918" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可以点击查看选择<a class="ae lu" href="https://github.com/d3/d3-selection" rel="noopener ugc nofollow" target="_blank">的更多细节。</a></p><h2 id="a8a8" class="mi mj it bd mo mp mq dn mr ms mt dp mu kr mv mw mx kv my mz na kz nb nc nd ne bi translated">动态属性和数据绑定</h2><p id="1e4a" class="pw-post-body-paragraph ki kj it kk b kl nf ju kn ko ng jx kq kr nh kt ku kv ni kx ky kz nj lb lc ld im bi translated">D3 的另一个主要概念是以动态方式将一组数据映射到 DOM 元素。在这里，我们可以引入一个数据集，然后我们可以使用这些数据集实时更新、附加和显示 DOM 元素。</p><pre class="lf lg lh li gt md me mf mg aw mh bi"><span id="1430" class="mi mj it me b gy mk ml l mm mn">let dataset = [1,2,3,4,5]  <br/>d3.selectAll(‘p’)      //Select 'p' element<br/>.data(dataset)         //data()puts data into waiting for processing<br/>.enter()               //take data elements one by one<br/>.append(‘p’)           //for each data item appending &lt;p&gt;<br/>.text(‘Sample text’);  //add sample text to each</span></pre><p id="a3c0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将在前端呈现文本“样本文本”5 次。这只是一个简单的例子，说明我们可以使用数据来动态和实时地操纵元素。使用同样的概念可以做很多事情。</p><h2 id="25df" class="mi mj it bd mo mp mq dn mr ms mt dp mu kr mv mw mx kv my mz na kz nb nc nd ne bi translated">数据可视化</h2><p id="5a39" class="pw-post-body-paragraph ki kj it kk b kl nf ju kn ko ng jx kq kr nh kt ku kv ni kx ky kz nj lb lc ld im bi translated">既然我们现在对 D3 的基本概念已经很熟悉了，我们可以开始学习数据可视化组件，它包括各种类型的图表、数据表和其他可视化。</p><p id="78f6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可缩放矢量图形(SVG)是一种在 DOM 中呈现图形元素和图像的方法。因为 SVG 是基于向量的，所以它是轻量级的，可伸缩的。D3 使用 SVG 来创建所有的视觉效果，比如图表。使用 SVG 的好处是我们不必担心缩放视觉效果时的失真，这与其他格式不同。基本上，D3 帮助我们弥合数据和相关可视化之间的差距，为用户提供有意义的信息。</p><p id="c7db" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们从使用 D3.js 创建一个简单的条形图开始。你需要两个名为 index.html 的文件，script.js 和 style.css，如下所示。</p><p id="c8f2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">index.html</strong></p><pre class="lf lg lh li gt md me mf mg aw mh bi"><span id="e51e" class="mi mj it me b gy mk ml l mm mn">&lt;html&gt;</span><span id="f0d0" class="mi mj it me b gy nk ml l mm mn">&lt;head&gt;</span><span id="143f" class="mi mj it me b gy nk ml l mm mn">&lt;link rel=”stylesheet” href=”style.css”&gt;</span><span id="31f6" class="mi mj it me b gy nk ml l mm mn">&lt;title&gt;My sample D3.js App&lt;/title&gt;</span><span id="d2bf" class="mi mj it me b gy nk ml l mm mn">&lt;/head&gt;</span><span id="fc48" class="mi mj it me b gy nk ml l mm mn">&lt;body&gt;</span><span id="4e80" class="mi mj it me b gy nk ml l mm mn">&lt;h1&gt;Bar Chart using D3.js&lt;/h1&gt;</span><span id="6000" class="mi mj it me b gy nk ml l mm mn">&lt;svg width=”500" height=”800" class=”bar-chart”&gt;&lt;/svg&gt;</span><span id="c943" class="mi mj it me b gy nk ml l mm mn">&lt;script src=”https://d3js.org/d3.v5.min.js"&gt;&lt;/script&gt;</span><span id="2c0f" class="mi mj it me b gy nk ml l mm mn">&lt;script src=”script.js”&gt;&lt;/script&gt;</span><span id="ac1f" class="mi mj it me b gy nk ml l mm mn">&lt;/body&gt;</span><span id="2de7" class="mi mj it me b gy nk ml l mm mn">&lt;/html&gt;</span></pre><p id="bf1b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> script.js </strong></p><pre class="lf lg lh li gt md me mf mg aw mh bi"><span id="c395" class="mi mj it me b gy mk ml l mm mn">var dataset = [28, 40, 56, 50, 75, 90, 120, 120, 100];</span><span id="cb27" class="mi mj it me b gy nk ml l mm mn">var chartWidth = 500, chartHeight = 300, barPadding = 5;</span><span id="ec1e" class="mi mj it me b gy nk ml l mm mn">var barWidth = (chartWidth / dataset.length);</span><span id="dcfd" class="mi mj it me b gy nk ml l mm mn">var svg = d3.select(‘svg’)</span><span id="63ba" class="mi mj it me b gy nk ml l mm mn">.attr(“width”, chartWidth)</span><span id="ea2d" class="mi mj it me b gy nk ml l mm mn">.attr(“height”, chartHeight);</span><span id="f6c2" class="mi mj it me b gy nk ml l mm mn">var barChart = svg.selectAll(“rect”)</span><span id="5f0e" class="mi mj it me b gy nk ml l mm mn">.data(dataset)</span><span id="9ed0" class="mi mj it me b gy nk ml l mm mn">.enter()</span><span id="ff66" class="mi mj it me b gy nk ml l mm mn">.append(“rect”)</span><span id="e633" class="mi mj it me b gy nk ml l mm mn">.attr(“y”, function(d) {</span><span id="9263" class="mi mj it me b gy nk ml l mm mn">return chartHeight — d</span><span id="147b" class="mi mj it me b gy nk ml l mm mn">})</span><span id="013e" class="mi mj it me b gy nk ml l mm mn">.attr(“height”, function(d) {</span><span id="2d10" class="mi mj it me b gy nk ml l mm mn">return d;</span><span id="59a9" class="mi mj it me b gy nk ml l mm mn">})</span><span id="e461" class="mi mj it me b gy nk ml l mm mn">.attr(“width”, barWidth — barPadding)</span><span id="dd23" class="mi mj it me b gy nk ml l mm mn">.attr(“fill”, ‘#F2BF23’)</span><span id="5921" class="mi mj it me b gy nk ml l mm mn">.attr(“transform”, function (d, i) {</span><span id="91b7" class="mi mj it me b gy nk ml l mm mn">var translate = [barWidth * i, 0];</span><span id="fa01" class="mi mj it me b gy nk ml l mm mn">return “translate(“+ translate +”)”;</span><span id="302c" class="mi mj it me b gy nk ml l mm mn">});</span></pre><p id="e299" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> style.css </strong></p><pre class="lf lg lh li gt md me mf mg aw mh bi"><span id="b72e" class="mi mj it me b gy mk ml l mm mn">.bar-chart {</span><span id="a216" class="mi mj it me b gy nk ml l mm mn">background-color: #071B52;</span><span id="ccfc" class="mi mj it me b gy nk ml l mm mn">}</span></pre><p id="1172" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最终的条形图类似于这样。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/bd7ec4f540cd558508e0575dbd1f6d61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*z2xzmlnGcmziSRpKukWTbw.png"/></div></figure><p id="9f9a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这显示了可视化，但是除了趋势之外没有精确的信息。因此，我们的下一个任务是添加一些标签，以便每个条形的值将是可见的，从而在视觉上提供更多的信息。</p><p id="071b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为此，您可以在 script.js 文件的末尾添加以下代码片段。</p><p id="1cc5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> script.js </strong></p><pre class="lf lg lh li gt md me mf mg aw mh bi"><span id="6547" class="mi mj it me b gy mk ml l mm mn">var text = svg.selectAll(“text”)</span><span id="1ef7" class="mi mj it me b gy nk ml l mm mn">.data(dataset)</span><span id="4f55" class="mi mj it me b gy nk ml l mm mn">.enter()</span><span id="f8f1" class="mi mj it me b gy nk ml l mm mn">.append(“text”)</span><span id="2ea6" class="mi mj it me b gy nk ml l mm mn">.text(function(d) {</span><span id="1675" class="mi mj it me b gy nk ml l mm mn">return d;</span><span id="88f4" class="mi mj it me b gy nk ml l mm mn">})</span><span id="081e" class="mi mj it me b gy nk ml l mm mn">.attr(“y”, function(d, i) {</span><span id="fb11" class="mi mj it me b gy nk ml l mm mn">return chartHeight — d — 2;</span><span id="bc27" class="mi mj it me b gy nk ml l mm mn">})</span><span id="cd23" class="mi mj it me b gy nk ml l mm mn">.attr(“x”, function(d, i) {</span><span id="0473" class="mi mj it me b gy nk ml l mm mn">return barWidth * i + 10;</span><span id="a946" class="mi mj it me b gy nk ml l mm mn">})</span><span id="1a03" class="mi mj it me b gy nk ml l mm mn">.attr(“fill”, “#A64C38”);</span></pre><p id="8e06" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将产生如下所示的结果。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/9afb570b47057617464f4bb10db27bca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*HfONj1KzqliRjLm19W6bxQ.png"/></div></figure><p id="2fa5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们要做的是给我们的图表添加缩放比例。数据集中可以有不同的值；有些可能非常小，有些可能非常大。因此，为了更好地显示一致性，在图表中进行缩放是很重要的。</p><p id="cbb4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们重新排列数据集，如下图所示，您可以看到条形图是如何呈现的。</p><pre class="lf lg lh li gt md me mf mg aw mh bi"><span id="fa28" class="mi mj it me b gy mk ml l mm mn">var dataset = [2, 4, 5, 5, 7, 9, 12, 9, 10];</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/6e75ac8130bdab2bb2617db5ac6ba37a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*Ai1XcNpv-okaJ4HcyQFE3Q.png"/></div></figure><p id="459a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这样我们几乎看不到图表中的条形。所以我们必须根据图表的高度放大它。如果数据集中有较大的值，则不会显示给定图表高度内的准确高度。因此，解决方案是相应地扩展。为此，我们可以使用这样的定标器，并改变条形图。</p><p id="f518" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> script.js </strong></p><pre class="lf lg lh li gt md me mf mg aw mh bi"><span id="2e94" class="mi mj it me b gy mk ml l mm mn">var dataset = [2, 4, 5, 5, 7, 9, 12, 9, 10];</span><span id="021a" class="mi mj it me b gy nk ml l mm mn">var chartWidth = 500, chartHeight = 300, barPadding = 5;</span><span id="018b" class="mi mj it me b gy nk ml l mm mn">var barWidth = (chartWidth / dataset.length);</span><span id="c1ab" class="mi mj it me b gy nk ml l mm mn">var svg = d3.select(‘svg’)<br/>.attr(“width”, chartWidth)<br/>.attr(“height”, chartHeight);</span><span id="7ef3" class="mi mj it me b gy nk ml l mm mn">var yScale = d3.scaleLinear()<br/>.domain([0, d3.max(dataset)])<br/>.range([0, chartHeight])</span><span id="27f8" class="mi mj it me b gy nk ml l mm mn">var barChart = svg.selectAll(“rect”)<br/>.data(dataset)<br/>.enter()<br/>.append(“rect”)<br/>.attr(“y”, function(d) {<br/>return chartHeight — yScale(d);})<br/>.attr(“height”, function(d) {<br/>return yScale(d);})<br/>.attr(“width”, barWidth — barPadding)<br/>.attr(“fill”, ‘#F2BF23’)<br/>.attr(“transform”, function (d, i) {<br/>var translate = [barWidth * i, 0];<br/>return “translate(“+ translate +”)”;<br/>});</span><span id="9d44" class="mi mj it me b gy nk ml l mm mn">var text = svg.selectAll(“text”)<br/>.data(dataset)<br/>.enter()<br/>.append(“text”)<br/>.text(function(d) {<br/>return d;})<br/>.attr(“y”, function(d, i) {<br/>return chartHeight — yScale(d) — 2;})<br/>.attr(“x”, function(d, i) {<br/>return barWidth * i + 10;})<br/>.attr(“fill”, “#A64C38”);</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/3bac0950981a92b23d3e75070077b56d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*GUWQNo90ouNQRjKl8270lg.png"/></div></figure><p id="b9ae" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以现在很明显我们的图表中遗漏了轴。因此，使用 D3.js 向我们的图表添加轴非常简单。您可以使用 D3.js 中的 x-scale 和 y-scale 创建 x 轴和 y 轴。您可以使用以下代码片段创建带有标签的缩放图表。</p><p id="8959" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> script.js </strong></p><pre class="lf lg lh li gt md me mf mg aw mh bi"><span id="222f" class="mi mj it me b gy mk ml l mm mn">var dataset = [2, 4, 5, 5, 7, 9, 12, 9, 10];</span><span id="db07" class="mi mj it me b gy nk ml l mm mn">var chartWidth = 500, chartHeight = 300, barPadding = 6;</span><span id="8b53" class="mi mj it me b gy nk ml l mm mn">var barWidth = (chartWidth / dataset.length -14);</span><span id="831a" class="mi mj it me b gy nk ml l mm mn">var svg = d3.select(‘svg’)<br/>.attr(“width”, chartWidth)<br/>.attr(“height”, chartHeight);</span><span id="4a27" class="mi mj it me b gy nk ml l mm mn">var xScale = d3.scaleLinear()<br/>.domain([0, d3.max(dataset)])<br/>.range([0, chartWidth]);</span><span id="620e" class="mi mj it me b gy nk ml l mm mn">var yScale = d3.scaleLinear()<br/>.domain([0, d3.max(dataset)])<br/>.range([0,chartHeight — 28]);</span><span id="863b" class="mi mj it me b gy nk ml l mm mn">var yScaleChart = d3.scaleLinear()<br/>.domain([0, d3.max(dataset)])<br/>.range([chartHeight — 28, 0]);</span><span id="2f6d" class="mi mj it me b gy nk ml l mm mn">var barChart = svg.selectAll(“rect”)<br/>.data(dataset)<br/>.enter()<br/>.append(“rect”)<br/>.attr(“y”, function(d) {<br/>return chartHeight — yScale(d) — 20;})<br/>.attr(“height”, function(d) {<br/>return yScale(d);})<br/>.attr(“width”, barWidth — barPadding)<br/>.attr(“fill”, ‘#F2BF23’)<br/>.attr(“transform”, function (d, i) {</span><span id="fcfd" class="mi mj it me b gy nk ml l mm mn">var translate = [barWidth * i +55, 0];<br/>return “translate(“+ translate +”)”;});</span><span id="8f6e" class="mi mj it me b gy nk ml l mm mn">var text = svg.selectAll(“text”)<br/>.data(dataset)<br/>.enter()<br/>.append(“text”)<br/>.text(function(d) {<br/>return d;})<br/>.attr(“y”, function(d, i) {<br/>return chartHeight — yScale(d) — 20;})<br/>.attr(“x”, function(d, i) {<br/>return barWidth * i + 70;})<br/>.attr(“fill”, “#A64C38”);</span><span id="a001" class="mi mj it me b gy nk ml l mm mn">var x_axis = d3.axisBottom().scale(xScale);</span><span id="0982" class="mi mj it me b gy nk ml l mm mn">var y_axis = d3.axisLeft().scale(yScaleChart);</span><span id="fbf0" class="mi mj it me b gy nk ml l mm mn">svg.append(“g”)<br/>.attr(“transform”, “translate(50, 10)”)<br/>.call(y_axis);</span><span id="4ae1" class="mi mj it me b gy nk ml l mm mn">var xAxisTranslate = chartHeight — 20;</span><span id="8ad6" class="mi mj it me b gy nk ml l mm mn">svg.append(“g”)<br/>.attr(“transform”, “translate(50, “ + xAxisTranslate +”)”)<br/>.call(x_axis);</span></pre><p id="cdba" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> style.css </strong></p><pre class="lf lg lh li gt md me mf mg aw mh bi"><span id="e413" class="mi mj it me b gy mk ml l mm mn">.bar-chart {</span><span id="9c28" class="mi mj it me b gy nk ml l mm mn">background-color: beige;</span><span id="a8b8" class="mi mj it me b gy nk ml l mm mn">}</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/27417f290004ec9c8aa2e93f43f5777a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*PpuF-70ek6g5cZTlDC9ohA.png"/></div></figure><p id="4218" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就像上面的简单条形图一样，我们可以创建我们想要的多种类型的图表。这里最好的事情是我们对自己创造的东西的控制。不像其他现成的图形，它们是有限可定制的，我们可以自由地使用 D3.js 中的 SVG 创建我们自己的图形。</p><p id="6587" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">D3 解决了问题的原因:基于数据的文档的有效操作。这避免了专有表示，提供了非凡的灵活性，展示了 HTML、SVG 和 CSS 等 web 标准的全部功能。以最小的开销，D3 非常快，支持大型数据集和交互和动画的动态行为。</p><p id="992d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以在<a class="ae lu" href="https://www.d3-graph-gallery.com/" rel="noopener ugc nofollow" target="_blank"> D3.js 图库</a>中查看已经创建的复杂且有吸引力的图形。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi no"><img src="../Images/95948eedb9240a1b3a1589083ec395d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h-ev9Ffx9W0ye7F9P0W0Vw.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk"><a class="ae lu" href="https://www.d3-graph-gallery.com/" rel="noopener ugc nofollow" target="_blank">https://www.d3-graph-gallery.com/</a></figcaption></figure><p id="8cf9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">鉴于大多数人将 D3.js 称为数据可视化库，<em class="lz">它不是</em>。D3 更像是一个由不同部分组成的框架，比如 jQuery 部分(帮助我们选择和操作 DOM 元素)、Lodash 部分、动画部分、数据分析部分和数据可视化部分。</p><p id="063a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">用 D3.js 尝试数据可视化，并与我分享结果！</strong></p></div></div>    
</body>
</html>