<html>
<head>
<title>Reshape numpy arrays in Python — a step-by-step pictorial tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Python 重塑 numpy 数组——一步到位的图示教程</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/reshaping-numpy-arrays-in-python-a-step-by-step-pictorial-tutorial-aed5f471cf0b?source=collection_archive---------1-----------------------#2019-12-25">https://towardsdatascience.com/reshaping-numpy-arrays-in-python-a-step-by-step-pictorial-tutorial-aed5f471cf0b?source=collection_archive---------1-----------------------#2019-12-25</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><h2 id="a232" class="is it iu bd b dl iv iw ix iy iz ja dk jb translated" aria-label="kicker paragraph">numpy 整形和堆叠的备忘单和教程</h2><div class=""/><div class=""><h2 id="5c4d" class="pw-subtitle-paragraph ka jd iu bd b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dk translated">可视化 numpy 如何重塑多维数组</h2></div><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gi gj ks"><img src="../Images/d62320dff071df34b6ddf1f2d48f700d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lFZzE9PgKTRR8jlFI4EUtw.png"/></div></div><figcaption class="le lf gk gi gj lg lh bd b be z dk">Cheatsheet for Python numpy reshape, stack, and flatten (created by <a class="ae li" href="https://www.hauselin.com" rel="noopener ugc nofollow" target="_blank">Hause Lin</a> and available <a class="ae li" href="https://github.com/hauselin/rtutorialsite/blob/master/_posts/2019-12-20-numpy-reshape/reshape.pdf" rel="noopener ugc nofollow" target="_blank">here</a>)</figcaption></figure><p id="7ba0" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><em class="mf"> numpy </em> <code class="fe mg mh mi mj b">reshape()</code> <em class="mf"> </em>方法如何重塑数组？你是否感到困惑，或者在理解它是如何工作的过程中挣扎过？本教程将带你完成<em class="mf"> numpy </em>中的整形。如果您想要上述备忘单的 pdf 副本，您可以在此<a class="ae li" href="https://github.com/hauselin/rtutorialsite/blob/master/_posts/2019-12-20-numpy-reshape/reshape.pdf" rel="noopener ugc nofollow" target="_blank">下载</a>。</p><p id="b8d3" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">你可能也会喜欢我的重塑熊猫数据帧的教程:</p><div class="mk ml gq gs mm mn"><a rel="noopener follow" target="_blank" href="/reshape-pandas-dataframe-with-pivot-table-in-python-tutorial-and-visualization-2248c2012a31"><div class="mo ab fp"><div class="mp ab mq cl cj mr"><h2 class="bd je gz z fq ms fs ft mt fv fx jd bi translated">用 Python 中的 pivot_table 重塑熊猫数据框—教程和可视化</h2><div class="mu l"><h3 class="bd b gz z fq ms fs ft mt fv fx dk translated">使用 pd.pivot_table 将 long 转换为 wide</h3></div><div class="mv l"><p class="bd b dl z fq ms fs ft mt fv fx dk translated">towardsdatascience.com</p></div></div><div class="mw l"><div class="mx l my mz na mw nb lc mn"/></div></div></a></div><div class="mk ml gq gs mm mn"><a rel="noopener follow" target="_blank" href="/reshape-pandas-dataframe-with-melt-in-python-tutorial-and-visualization-29ec1450bb02"><div class="mo ab fp"><div class="mp ab mq cl cj mr"><h2 class="bd je gz z fq ms fs ft mt fv fx jd bi translated">使用 Python 中的 melt 重塑熊猫数据框—教程和可视化</h2><div class="mu l"><h3 class="bd b gz z fq ms fs ft mt fv fx dk translated">想象一下 pd.melt 是如何将熊猫数据帧从宽到长进行整形的</h3></div><div class="mv l"><p class="bd b dl z fq ms fs ft mt fv fx dk translated">towardsdatascience.com</p></div></div><div class="mw l"><div class="nc l my mz na mw nb lc mn"/></div></div></a></div><h1 id="f3d9" class="nd ne iu bd nf ng nh ni nj nk nl nm nn kj no kk np km nq kn nr kp ns kq nt nu bi translated">创建一个 Python <em class="nv"> numpy </em>数组</h1><p id="454c" class="pw-post-body-paragraph lj lk iu ll b lm nw ke lo lp nx kh lr ls ny lu lv lw nz ly lz ma oa mc md me in bi translated">使用<code class="fe mg mh mi mj b">np.arange()</code>生成一个<em class="mf"> numpy </em>数组，其中包含一系列从 1 到 12 的数字。在这里看文档<a class="ae li" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.arange.html" rel="noopener ugc nofollow" target="_blank">。</a></p><pre class="kt ku kv kw gu ob mj oc od aw oe bi"><span id="bb8e" class="of ne iu mj b gz og oh l oi oj">import numpy as np</span><span id="d4b8" class="of ne iu mj b gz ok oh l oi oj">a1 = np.arange(1, 13)  # numbers 1 to 12</span><span id="ab0c" class="of ne iu mj b gz ok oh l oi oj">print(a1.shape)<br/>&gt; (12,)</span><span id="06f5" class="of ne iu mj b gz ok oh l oi oj">print(a1)<br/>&gt; [ 1  2  3  4  5  6  7  8  9 10 11 12]</span></pre><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div class="gi gj ol"><img src="../Images/589fe4a3c64418d8521fff82742f19a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1086/format:webp/1*16lfH-A_kiDmyxe1Sm2dQA.png"/></div><figcaption class="le lf gk gi gj lg lh bd b be z dk">np.arange() creates a range of numbers</figcaption></figure><h1 id="ce70" class="nd ne iu bd nf ng nh ni nj nk nl nm nn kj no kk np km nq kn nr kp ns kq nt nu bi translated">用<em class="nv">整形()</em>方法整形</h1><p id="56a1" class="pw-post-body-paragraph lj lk iu ll b lm nw ke lo lp nx kh lr ls ny lu lv lw nz ly lz ma oa mc md me in bi translated">使用<code class="fe mg mh mi mj b">reshape()</code>方法将我们的<em class="mf"> a1 </em>数组改造成一个 3 乘 4 维的数组。我们用<strong class="ll je"> 3_4 </strong>来指代 it 维度:3 是第 0 个维度(轴)，4 是第 1 个维度(轴)(注意 Python 索引从 0 开始)。在这里见文档<a class="ae li" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.reshape.html" rel="noopener ugc nofollow" target="_blank">。</a></p><pre class="kt ku kv kw gu ob mj oc od aw oe bi"><span id="b926" class="of ne iu mj b gz og oh l oi oj">a1_2d = a1.reshape(3, 4)  # 3_4</span><span id="9e23" class="of ne iu mj b gz ok oh l oi oj">print(a1_2d.shape)<br/>&gt; (3, 4)</span><span id="83e1" class="of ne iu mj b gz ok oh l oi oj">print(a1_2d)<br/>&gt; [[ 1  2  3  4]<br/>   [ 5  6  7  8]<br/>   [ 9 10 11 12]]</span></pre><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div class="gi gj om"><img src="../Images/2a10617db4b6ed2a80573fd60dd9cdc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:402/format:webp/1*b0Eh1M1w4d9gKIhN8Fdjcg.png"/></div><figcaption class="le lf gk gi gj lg lh bd b be z dk">3 by 4 numpy array</figcaption></figure><p id="a617" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">如果你想让<em class="mf"> numpy </em>自动决定一个特定尺寸的大小/长度，将该尺寸指定为-1。</p><pre class="kt ku kv kw gu ob mj oc od aw oe bi"><span id="03b2" class="of ne iu mj b gz og oh l oi oj">a1.reshape(3, 4)<br/>a1.reshape(-1, 4)  # same as above: a1.reshape(3, 4)</span><span id="2889" class="of ne iu mj b gz ok oh l oi oj">a1.reshape(3, 4)<br/>a1.reshape(3, -1)  # same as above: a1.reshape(3, 4)</span><span id="8f02" class="of ne iu mj b gz ok oh l oi oj">a1.reshape(2, 6)<br/>a1.reshape(2, -1)  # same as above: a1.reshape(2, 6)</span></pre><h1 id="4b07" class="nd ne iu bd nf ng nh ni nj nk nl nm nn kj no kk np km nq kn nr kp ns kq nt nu bi translated">沿不同维度重塑</h1><p id="6a56" class="pw-post-body-paragraph lj lk iu ll b lm nw ke lo lp nx kh lr ls ny lu lv lw nz ly lz ma oa mc md me in bi translated">默认情况下，<code class="fe mg mh mi mj b">reshape()</code>沿着第 0 维(行)对数组<strong class="ll je">进行整形。此行为可通过<code class="fe mg mh mi mj b">order</code>参数(默认值为<code class="fe mg mh mi mj b">'C'</code>)进行更改。更多信息参见<a class="ae li" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.reshape.html" rel="noopener ugc nofollow" target="_blank">文档</a>。</strong></p><pre class="kt ku kv kw gu ob mj oc od aw oe bi"><span id="98c6" class="of ne iu mj b gz og oh l oi oj">a1.reshape(3, 4) # reshapes or ‘fills in’ row by row<br/>a1.reshape(3, 4, order='C') # same results as above</span></pre><p id="6dd8" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">我们可以通过将<code class="fe mg mh mi mj b">order</code>改为<code class="fe mg mh mi mj b">'F'</code>来沿着第一维(列)进行<strong class="ll je">整形。对于熟悉 MATLAB 的人来说，MATLAB 使用的是这个顺序。</strong></p><pre class="kt ku kv kw gu ob mj oc od aw oe bi"><span id="76e6" class="of ne iu mj b gz og oh l oi oj">a1.reshape(3, 4, order='F')  # reshapes column by column<br/>&gt; [[ 1  4  7 10]<br/>   [ 2  5  8 11]<br/>   [ 3  6  9 12]]</span></pre><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div class="gi gj on"><img src="../Images/2c2eafcc5d99c4064f1b0d48205149e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:426/format:webp/1*l71wfwjDZ9WpUHAfdcVrYA.png"/></div><figcaption class="le lf gk gi gj lg lh bd b be z dk">3 by 4 numpy array</figcaption></figure><p id="6ba2" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><strong class="ll je">测试</strong>:数组 a1 的尺寸/形状是多少？</p><p id="7d7a" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><em class="mf"> a1 </em>是一个 1D 数组——它只有一维，尽管你可能认为它的维数应该是<strong class="ll je"> 1_12 </strong> (1 行乘 12 列)。要转换成 1_12 数组，请使用<code class="fe mg mh mi mj b">reshape()</code>。</p><pre class="kt ku kv kw gu ob mj oc od aw oe bi"><span id="5e43" class="of ne iu mj b gz og oh l oi oj">print(a1)  # what's the shape?<br/>&gt; [ 1  2  3  4  5  6  7  8  9 10 11 12]</span><span id="5536" class="of ne iu mj b gz ok oh l oi oj">print(a1.shape)<br/>&gt; (12,)</span><span id="e24a" class="of ne iu mj b gz ok oh l oi oj">a1_1_by_12 = a1.reshape(1, -1)  # reshape to 1_12</span><span id="aabe" class="of ne iu mj b gz ok oh l oi oj">print(a1_1_by_12)  # note the double square brackets!<br/>&gt; [[ 1  2  3  4  5  6  7  8  9 10 11 12]]</span><span id="a93e" class="of ne iu mj b gz ok oh l oi oj">print(a1_1_by_12.shape)  # 1_12 array<br/>&gt; (1, 12)</span></pre><h1 id="6139" class="nd ne iu bd nf ng nh ni nj nk nl nm nn kj no kk np km nq kn nr kp ns kq nt nu bi translated">用 ravel()将 1D 数组展平/散开</h1><p id="ff3f" class="pw-post-body-paragraph lj lk iu ll b lm nw ke lo lp nx kh lr ls ny lu lv lw nz ly lz ma oa mc md me in bi translated"><code class="fe mg mh mi mj b">ravel()</code>方法允许你将多维数组转换成 1D 数组(参见文档<a class="ae li" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel.html" rel="noopener ugc nofollow" target="_blank">这里的</a>)。我们的 2D 数组(<strong class="ll je"> 3_4 </strong>)将被拉平或散开，从而成为一个 12 元素的 1D 数组。</p><p id="d256" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">如果你不指定任何参数，<code class="fe mg mh mi mj b">ravel()</code>将沿着行(第 0 维/轴)拉平/散开我们的 2D 数组。即第 0 行[1，2，3，4] +第 1 行[5，6，7，8] +第 2 行[9，10，11，12]。</p><p id="032a" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">如果您想沿列(第一维)拉平/散开，使用<code class="fe mg mh mi mj b">order</code>参数。</p><pre class="kt ku kv kw gu ob mj oc od aw oe bi"><span id="1202" class="of ne iu mj b gz og oh l oi oj">print(a1_2d)  # 3_4<br/>&gt; [[ 1  2  3  4]<br/>   [ 5  6  7  8]<br/>   [ 9 10 11 12]]</span><span id="9e5f" class="of ne iu mj b gz ok oh l oi oj">print(a1_2d.ravel())  # ravel by row (default order='C')<br/>&gt; [ 1  2  3  4  5  6  7  8  9 10 11 12]</span><span id="082f" class="of ne iu mj b gz ok oh l oi oj">print(a1_2d.ravel(order='F'))  # ravel by column<br/>&gt; [ 1  5  9  2  6 10  3  7 11  4  8 12]</span></pre><h1 id="922f" class="nd ne iu bd nf ng nh ni nj nk nl nm nn kj no kk np km nq kn nr kp ns kq nt nu bi translated">用<code class="fe mg mh mi mj b">np.stack()</code>和<code class="fe mg mh mi mj b">np.hstack()</code>连接/堆叠阵列</h1><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gi gj oo"><img src="../Images/1498f7fbe85917c24d5484c052a3426b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i5yqTKWOY7Iyl6AD-62u8Q.png"/></div></div><figcaption class="le lf gk gi gj lg lh bd b be z dk">Stacking numpy arrays</figcaption></figure><p id="a9d5" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">创建两个 1D 阵列</p><pre class="kt ku kv kw gu ob mj oc od aw oe bi"><span id="562f" class="of ne iu mj b gz og oh l oi oj">a1 = np.arange(1, 13)<br/>print(a1)<br/>&gt; [ 1  2  3  4  5  6  7  8  9 10 11 12]</span><span id="aa07" class="of ne iu mj b gz ok oh l oi oj">a2 = np.arange(13, 25)<br/>print(a2)</span><span id="0e6c" class="of ne iu mj b gz ok oh l oi oj">&gt; [13 14 15 16 17 18 19 20 21 22 23 24]</span></pre><p id="bce3" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">使用<code class="fe mg mh mi mj b">np.stack()</code>连接/堆叠数组。默认情况下，<code class="fe mg mh mi mj b">np.stack()</code>沿着第 0 维(行)堆叠数组(参数<code class="fe mg mh mi mj b">axis=0</code>)。更多信息参见<a class="ae li" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.stack.html" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><pre class="kt ku kv kw gu ob mj oc od aw oe bi"><span id="e0c0" class="of ne iu mj b gz og oh l oi oj">stack0 = np.stack((a1, a1, a2, a2))  # default stack along 0th axis<br/>print(stack0.shape)<br/>&gt; (4, 12)</span><span id="9e7e" class="of ne iu mj b gz ok oh l oi oj">print(stack0)<br/>&gt; [[ 1  2  3  4  5  6  7  8  9 10 11 12]<br/>   [ 1  2  3  4  5  6  7  8  9 10 11 12]<br/>   [13 14 15 16 17 18 19 20 21 22 23 24]<br/>   [13 14 15 16 17 18 19 20 21 22 23 24]]</span></pre><p id="dd94" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">沿第一维堆叠(<code class="fe mg mh mi mj b">axis=1</code>)</p><pre class="kt ku kv kw gu ob mj oc od aw oe bi"><span id="e92a" class="of ne iu mj b gz og oh l oi oj">stack1 = np.stack((a1, a1, a2, a2), axis=1)<br/>print(stack1.shape)<br/>&gt; (12, 4)</span><span id="be6a" class="of ne iu mj b gz ok oh l oi oj">print(stack1)<br/>&gt; [[ 1  1 13 13]<br/>   [ 2  2 14 14]<br/>   [ 3  3 15 15]<br/>   [ 4  4 16 16]<br/>   [ 5  5 17 17]<br/>   [ 6  6 18 18]<br/>   [ 7  7 19 19]<br/>   [ 8  8 20 20]<br/>   [ 9  9 21 21]<br/>   [10 10 22 22]<br/>   [11 11 23 23]<br/>   [12 12 24 24]]</span></pre><p id="9206" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">用<code class="fe mg mh mi mj b">np.hstack()</code>连接成一个长 1D 数组(水平堆叠)</p><pre class="kt ku kv kw gu ob mj oc od aw oe bi"><span id="1e5e" class="of ne iu mj b gz og oh l oi oj">stack_long = np.hstack((a1, a2))<br/>print(stack_long.shape)<br/>&gt; (24,)</span><span id="34cc" class="of ne iu mj b gz ok oh l oi oj">print(stack_long)<br/>&gt; [ 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24]</span></pre><h1 id="ab4b" class="nd ne iu bd nf ng nh ni nj nk nl nm nn kj no kk np km nq kn nr kp ns kq nt nu bi translated">创建多维数组(3D)</h1><p id="722f" class="pw-post-body-paragraph lj lk iu ll b lm nw ke lo lp nx kh lr ls ny lu lv lw nz ly lz ma oa mc md me in bi translated">多维数组非常常见，被称为张量。它们在深度学习和神经网络中被大量使用。如果你对深度学习感兴趣，你会定期重塑张量或多维数组。</p><p id="026e" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">让我们首先创建两个不同的 3x 4 数组。稍后我们将把它们组合起来形成一个 3D 数组。</p><pre class="kt ku kv kw gu ob mj oc od aw oe bi"><span id="5219" class="of ne iu mj b gz og oh l oi oj">a1 = np.arange(1, 13).reshape(3, -1)  # 3_4<br/>a2 = np.arange(13, 25).reshape(3, -1)  # 3_4</span><span id="d64e" class="of ne iu mj b gz ok oh l oi oj">print(a1)<br/>&gt; <!-- -->[[ 1  2  3  4]<br/>   [ 5  6  7  8]<br/>   [ 9 10 11 12]]</span><span id="7f1a" class="of ne iu mj b gz ok oh l oi oj">print(a2)<br/>&gt; <!-- -->[[13 14 15 16]<br/>   [17 18 19 20]<br/>   [21 22 23 24]]</span></pre><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div class="gi gj op"><img src="../Images/f42dfeac3c7b19e265299f5df488cea5.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/1*EVIjyfn0WRb8hchQVoL9nA.png"/></div><figcaption class="le lf gk gi gj lg lh bd b be z dk">Two 3 by 4 numpy arrays</figcaption></figure><h1 id="3dcd" class="nd ne iu bd nf ng nh ni nj nk nl nm nn kj no kk np km nq kn nr kp ns kq nt nu bi translated">通过沿不同的轴/维度堆叠阵列来创建 3D 阵列</h1><pre class="kt ku kv kw gu ob mj oc od aw oe bi"><span id="f67a" class="of ne iu mj b gz og oh l oi oj">a3_0 = np.stack((a1, a2))  # default axis=0 (dimension 0)<br/>a3_1 = np.stack((a1, a2), axis=1)  # along dimension 1<br/>a3_2 = np.stack((a1, a2), axis=2)  # along dimension 2</span><span id="4b5f" class="of ne iu mj b gz ok oh l oi oj">print(a3_0.shape)<br/>&gt; (2, 3, 4)<br/>print(a3_1.shape)<br/>&gt; (3, 2, 4)<br/>print(a3_2.shape)<br/>&gt; (3, 4, 2)</span></pre><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gi gj oq"><img src="../Images/6e781ba69369e7fbd8751b0ebab3cb8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lFzT2UEpHRdSle9OxzFFyQ.png"/></div></div><figcaption class="le lf gk gi gj lg lh bd b be z dk">Create 3D numpy arrays from 2D numpy arrays</figcaption></figure><p id="39e9" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">让我们打印数组，看看它们是什么样子的。可视化效果见上图。</p><pre class="kt ku kv kw gu ob mj oc od aw oe bi"><span id="c53c" class="of ne iu mj b gz og oh l oi oj">print(a3_0)<br/>&gt; [[[ 1  2  3  4]<br/>    [ 5  6  7  8]<br/>    [ 9 10 11 12]]<br/><br/>   [[13 14 15 16]<br/>    [17 18 19 20]<br/>    [21 22 23 24]]]</span><span id="a213" class="of ne iu mj b gz ok oh l oi oj">print(a3_1)<br/>&gt; [[[ 1  2  3  4]<br/>    [13 14 15 16]]<br/><br/>   [[ 5  6  7  8]<br/>    [17 18 19 20]]<br/><br/>   [[ 9 10 11 12]<br/>    [21 22 23 24]]]</span><span id="4da2" class="of ne iu mj b gz ok oh l oi oj">print(a3_2)<br/>&gt; [[[ 1 13]<br/>    [ 2 14]<br/>    [ 3 15]<br/>    [ 4 16]]<br/><br/>   [[ 5 17]<br/>    [ 6 18]<br/>    [ 7 19]<br/>    [ 8 20]]<br/><br/>   [[ 9 21]<br/>    [10 22]<br/>    [11 23]<br/>    [12 24]]]</span></pre><p id="b80d" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">因为这三个 3D 数组是通过沿着不同的维度堆叠两个数组而创建的，所以如果我们想要从这些 3D 数组中检索原始的两个数组，我们必须沿着正确的维度/轴进行子集化。</p><p id="f11d" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><strong class="ll je">测试</strong>:我们如何从这些 3D 数组中检索出我们的<code class="fe mg mh mi mj b">a1</code>数组？</p><pre class="kt ku kv kw gu ob mj oc od aw oe bi"><span id="a162" class="of ne iu mj b gz og oh l oi oj">print(a1)  # check what's a1<br/>&gt; [[ 1  2  3  4]<br/>   [ 5  6  7  8]<br/>   [ 9 10 11 12]]</span><span id="c208" class="of ne iu mj b gz ok oh l oi oj"># solutions<br/>a3_0[0, :, :]<br/>a3_0[0]  # same as above</span><span id="0d96" class="of ne iu mj b gz ok oh l oi oj">a3_1[:, 0, :]</span><span id="4e39" class="of ne iu mj b gz ok oh l oi oj">a3_2[:, :, 0]</span></pre><h1 id="3a75" class="nd ne iu bd nf ng nh ni nj nk nl nm nn kj no kk np km nq kn nr kp ns kq nt nu bi translated">展平多维数组</h1><p id="a1f6" class="pw-post-body-paragraph lj lk iu ll b lm nw ke lo lp nx kh lr ls ny lu lv lw nz ly lz ma oa mc md me in bi translated">我们也可以用<code class="fe mg mh mi mj b">ravel()</code>扁平化多维数组。下面，我们逐行(默认<code class="fe mg mh mi mj b">order='C'</code>)遍历 1D 数组。</p><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gi gj or"><img src="../Images/a6922fe357a98342e946467db36d7387.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2gr2mIweIusX1IPrMEz6jQ.png"/></div></div><figcaption class="le lf gk gi gj lg lh bd b be z dk">Flatten arrays with .ravel()</figcaption></figure><pre class="kt ku kv kw gu ob mj oc od aw oe bi"><span id="4211" class="of ne iu mj b gz og oh l oi oj">print(a3_0)<br/>&gt; <!-- -->[[[ 1  2  3  4]<br/>    [ 5  6  7  8]<br/>    [ 9 10 11 12]]<br/><br/>   [[13 14 15 16]<br/>    [17 18 19 20]<br/>    [21 22 23 24]]]</span><span id="cb88" class="of ne iu mj b gz ok oh l oi oj">print(a3_0.ravel())<br/>&gt; [ 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24]</span></pre><p id="62ec" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">逐列(<code class="fe mg mh mi mj b">order='F'</code>)移动到 1D 阵列</p><pre class="kt ku kv kw gu ob mj oc od aw oe bi"><span id="6e5a" class="of ne iu mj b gz og oh l oi oj">print(a3_0.ravel(order='F'))<br/>&gt; <!-- -->[ 1 13  5 17  9 21  2 14  6 18 10 22  3 15  7 19 11 23  4 16  8 20 12 24]</span></pre><h1 id="a9a4" class="nd ne iu bd nf ng nh ni nj nk nl nm nn kj no kk np km nq kn nr kp ns kq nt nu bi translated">重塑多维数组</h1><p id="c438" class="pw-post-body-paragraph lj lk iu ll b lm nw ke lo lp nx kh lr ls ny lu lv lw nz ly lz ma oa mc md me in bi translated">我们也可以用<code class="fe mg mh mi mj b">reshape()</code>来重塑多维数组。</p><pre class="kt ku kv kw gu ob mj oc od aw oe bi"><span id="197c" class="of ne iu mj b gz og oh l oi oj"># reshape row by row (default <!-- -->order=C<!-- -->) to 2D array</span><span id="1e3c" class="of ne iu mj b gz ok oh l oi oj">print(a3_0)  # 2_3_4<br/>&gt; <!-- -->[[[ 1  2  3  4]<br/>    [ 5  6  7  8]<br/>    [ 9 10 11 12]]<br/><br/>   [[13 14 15 16]<br/>    [17 18 19 20]<br/>    [21 22 23 24]]]</span><span id="ab30" class="of ne iu mj b gz ok oh l oi oj">print(a3_0.reshape(4, -1))  # reshape to 4_6 (row by row)<br/>&gt; [[ 1  2  3  4  5  6]<br/>   [ 7  8  9 10 11 12]<br/>   [13 14 15 16 17 18]<br/>   [19 20 21 22 23 24]]</span><span id="4736" class="of ne iu mj b gz ok oh l oi oj">print(a3_0.reshape(4, -1, order='F'))  # reshape (column by column)<br/>&gt; [[ 1  9  6  3 11  8]<br/>   [13 21 18 15 23 20]<br/>   [ 5  2 10  7  4 12]<br/>   [17 14 22 19 16 24]]</span><span id="ecaa" class="of ne iu mj b gz ok oh l oi oj">print(a3_0.reshape(4, 2, 3))  # reshape to 4_2_3 (row by row)<br/>&gt; [[[ 1  2  3]<br/>    [ 4  5  6]]</span><span id="234d" class="of ne iu mj b gz ok oh l oi oj">   [[ 7  8  9]<br/>    [10 11 12]]</span><span id="9223" class="of ne iu mj b gz ok oh l oi oj">   [[13 14 15]<br/>    [16 17 18]]</span><span id="f6fb" class="of ne iu mj b gz ok oh l oi oj">   [[19 20 21]<br/>    [22 23 24]]]</span></pre><h1 id="6187" class="nd ne iu bd nf ng nh ni nj nk nl nm nn kj no kk np km nq kn nr kp ns kq nt nu bi translated">结束语</h1><p id="0389" class="pw-post-body-paragraph lj lk iu ll b lm nw ke lo lp nx kh lr ls ny lu lv lw nz ly lz ma oa mc md me in bi translated">我希望现在你对<em class="mf"> numpy </em>如何重塑多维数组有了更好的理解。期待大家的想法和评论。另外，看看这个<a class="ae li" href="https://jalammar.github.io/visual-numpy/" rel="noopener ugc nofollow" target="_blank">对 numpy 和数据表示</a>的可视化介绍。</p><p id="c8ca" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">如果您想要上述备忘单的 pdf 副本，您可以在此下载<a class="ae li" href="https://github.com/hauselin/rtutorialsite/blob/master/_posts/2019-12-20-numpy-reshape/reshape.pdf" rel="noopener ugc nofollow" target="_blank">。如果你觉得这篇文章有用，请关注我并访问</a><a class="ae li" href="http://hausetutorials.netlify.com/" rel="noopener ugc nofollow" target="_blank">我的网站</a>获取更多数据科学教程。</p><p id="fc20" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">如果您对提高数据科学技能感兴趣，以下文章可能会有所帮助:</p><div class="mk ml gq gs mm mn"><a rel="noopener follow" target="_blank" href="/two-simple-ways-to-loop-more-effectively-in-python-886526008a70"><div class="mo ab fp"><div class="mp ab mq cl cj mr"><h2 class="bd je gz z fq ms fs ft mt fv fx jd bi translated">在 Python 中更有效地循环的两种简单方法</h2><div class="mu l"><h3 class="bd b gz z fq ms fs ft mt fv fx dk translated">使用枚举和压缩编写更好的 Python 循环</h3></div><div class="mv l"><p class="bd b dl z fq ms fs ft mt fv fx dk translated">towardsdatascience.com</p></div></div><div class="mw l"><div class="os l my mz na mw nb lc mn"/></div></div></a></div><div class="mk ml gq gs mm mn"><a href="https://medium.com/better-programming/code-and-develop-more-productively-with-terminal-multiplexer-tmux-eeac8763d273" rel="noopener follow" target="_blank"><div class="mo ab fp"><div class="mp ab mq cl cj mr"><h2 class="bd je gz z fq ms fs ft mt fv fx jd bi translated">使用终端多路复用器 tmux 提高编码和开发效率</h2><div class="mu l"><h3 class="bd b gz z fq ms fs ft mt fv fx dk translated">简单的 tmux 命令来提高您的生产力</h3></div><div class="mv l"><p class="bd b dl z fq ms fs ft mt fv fx dk translated">medium.com</p></div></div><div class="mw l"><div class="ot l my mz na mw nb lc mn"/></div></div></a></div><div class="mk ml gq gs mm mn"><a rel="noopener follow" target="_blank" href="/free-online-data-science-courses-during-covid-19-crisis-764720084a2"><div class="mo ab fp"><div class="mp ab mq cl cj mr"><h2 class="bd je gz z fq ms fs ft mt fv fx jd bi translated">新冠肺炎危机期间的免费在线数据科学课程</h2><div class="mu l"><h3 class="bd b gz z fq ms fs ft mt fv fx dk translated">像 Udacity、Codecademy 和 Dataquest 这样的平台现在免费提供课程</h3></div><div class="mv l"><p class="bd b dl z fq ms fs ft mt fv fx dk translated">towardsdatascience.com</p></div></div><div class="mw l"><div class="ou l my mz na mw nb lc mn"/></div></div></a></div><p id="293d" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><em class="mf">更多帖子，</em> <a class="ae li" href="https://hauselin.ck.page/587b46fb05" rel="noopener ugc nofollow" target="_blank"> <em class="mf">订阅我的邮件列表</em> </a> <em class="mf">。</em></p></div></div>    
</body>
</html>