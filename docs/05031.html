<html>
<head>
<title>A Few Times, I’ve Broken Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有几次，我打碎了熊猫</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-few-times-i-managed-to-broke-pandas-d3604d43708c?source=collection_archive---------26-----------------------#2019-07-28">https://towardsdatascience.com/a-few-times-i-managed-to-broke-pandas-d3604d43708c?source=collection_archive---------26-----------------------#2019-07-28</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="769d" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">这里有一个场景。我希望其他人能从我这里的错误中受益。</h2></div><p id="66b9" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi lf translated"><span class="l lg lh li bm lj lk ll lm ln di"> W </span>当我将大部分工作从 Stata 转移到熊猫时，我遇到了一些障碍。好吧，我承认。我写了一些糟糕的代码。这是我做错的一个例子。</p><figure class="lp lq lr ls gu lt gi gj paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gi gj lo"><img src="../Images/e7da5c00d667cc28655e4094cda5a923.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O_SkF4A2wXS9leLOolBqIA.png"/></div></div><figcaption class="ma mb gk gi gj mc md bd b be z dk">Image credit: Author. “Broken Pandas.” Image Credit: “Via Design Pickle” — <a class="ae me" href="https://adamrossnelson.medium.com/image-credit-attributions-a24efcc730ad" rel="noopener">More on attributions</a>.</figcaption></figure><h1 id="ba4f" class="mf mg iu bd mh mi mj mk ml mm mn mo mp ka mq kb mr kd ms ke mt kg mu kh mv mw bi translated">重复的列名</h1><p id="48a3" class="pw-post-body-paragraph kj kk iu kl b km mx jv ko kp my jy kr ks mz ku kv kw na ky kz la nb lc ld le in bi translated">其他统计语言更严格地防止重复的列名。然而，熊猫可以被欺骗允许重复的列名。</p><p id="3733" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">如果您计划将数据集转换为另一种统计语言，重复的列名是一个问题。它们也是一个问题，因为它会在 Python 中导致意想不到的、有时难以调试的问题。</p><p id="8687" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">公平地说，复制这一点并不容易，下面的代码展示了如何复制:</p><figure class="lp lq lr ls gu lt gi gj paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gi gj nc"><img src="../Images/234957e3f50ee4bd80fafc7115016d43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Ivw7yTopgN7xSaUQoCUrQ@2x.jpeg"/></div></div><figcaption class="ma mb gk gi gj mc md bd b be z dk">How I broke Pandas. Image Credit: “Author’s Screen Capture” — <a class="ae me" href="https://adamrossnelson.medium.com/image-credit-attributions-a24efcc730ad" rel="noopener">More on attributions</a>.</figcaption></figure><p id="d483" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">上述数据框的用例是一个作者列表，他们被分配写两个主题中的一个。因此，主题列是分类变量或因子变量。</p><p id="33ab" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">所以，到目前为止，没有错误。直到您尝试将选项标签映射到<code class="fe nd ne nf ng b">'topic'</code>下的选项值，这是操作分类或因子变量时的常见操作。</p><figure class="lp lq lr ls gu lt gi gj paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gi gj nc"><img src="../Images/3505605662043979b64f8dc429056f5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JX_tdDD8ttErb0s2bYvHVA@2x.jpeg"/></div></div><figcaption class="ma mb gk gi gj mc md bd b be z dk">Error that occurs when a Pandas data frame has more than one identically named columns. Image Credit: “Author’s Screen Capture” — <a class="ae me" href="https://adamrossnelson.medium.com/image-credit-attributions-a24efcc730ad" rel="noopener">More on attributions</a>.</figcaption></figure><p id="e234" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">检查列名唯一性的一个快速方法是评估<code class="fe nd ne nf ng b">'len(df.columns) == len(set(df.columns))</code>。如果语句评估为<code class="fe nd ne nf ng b">False</code>，这表明您可能有重复的列名。</p><p id="f954" class="pw-post-body-paragraph kj kk iu kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le in bi translated">愚蠢的错误。很容易解决。</p><figure class="lp lq lr ls gu lt gi gj paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gi gj nc"><img src="../Images/7a8b6ebd50e4256adc9e877afa7fdf14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SIm88jPwVXzptnrU5LN56g@2x.jpeg"/></div></div><figcaption class="ma mb gk gi gj mc md bd b be z dk">How I fixed the data frame that I managed to break above. Image Credit: “Author’s Screen Capture” — <a class="ae me" href="https://adamrossnelson.medium.com/image-credit-attributions-a24efcc730ad" rel="noopener">More on attributions</a>.</figcaption></figure><div class="nh ni gq gs nj nk"><a href="https://adamrossnelson.medium.com/membership" rel="noopener follow" target="_blank"><div class="nl ab fp"><div class="nm ab nn cl cj no"><h2 class="bd iv gz z fq np fs ft nq fv fx it bi translated">加入我的介绍链接媒体-亚当罗斯纳尔逊</h2><div class="nr l"><h3 class="bd b gz z fq np fs ft nq fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ns l"><p class="bd b dl z fq np fs ft nq fv fx dk translated">adamrossnelson.medium.com</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny ly nk"/></div></div></a></div><h1 id="4980" class="mf mg iu bd mh mi mj mk ml mm mn mo mp ka mq kb mr kd ms ke mt kg mu kh mv mw bi translated">感谢阅读</h1><p id="c389" class="pw-post-body-paragraph kj kk iu kl b km mx jv ko kp my jy kr ks mz ku kv kw na ky kz la nb lc ld le in bi translated">把你的想法和主意发给我。你可以写信只是为了说声嗨。如果你真的需要告诉我是怎么错的，我期待着尽快和你聊天。推特:<a class="ae me" href="https://twitter.com/adamrossnelson" rel="noopener ugc nofollow" target="_blank">@ adamrossnelson</a>| LinkedIn:<a class="ae me" href="http://www.linkedin.com/in/arnelson" rel="noopener ugc nofollow" target="_blank">亚当·罗斯·纳尔逊</a> |脸书:<a class="ae me" href="http://www.facebook.com/adamrossnelson" rel="noopener ugc nofollow" target="_blank">亚当·罗斯·纳尔逊</a>。</p></div></div>    
</body>
</html>