<html>
<head>
<title>ARIMA simplified.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ARIMA 简体。</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/arima-simplified-b63315f27cbc?source=collection_archive---------5-----------------------#2019-09-26">https://towardsdatascience.com/arima-simplified-b63315f27cbc?source=collection_archive---------5-----------------------#2019-09-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ec51" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">对最流行的时间序列预测模型的简单解释</h2></div><h1 id="abd2" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">背景</h1><blockquote class="la"><p id="0197" class="lb lc it bd ld le lf lg lh li lj lk dk translated">时间序列预测背后的基本直觉是，某个时间段内某个变量的度量将取决于前一个时间段、前两个时间段、前三个时间段等同一变量的度量。</p></blockquote><p id="1813" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf lk im bi translated">时间序列预测在许多预测问题(尤其是在商业领域)中都有应用，而 ARIMA 是最好的起点之一！</p><p id="8f5b" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">本文的目标是突出这个模型背后的构建模块(即<strong class="ln iu"> AR </strong>、<strong class="ln iu"> I </strong>和<strong class="ln iu">MA】)</strong>和底层概念(即<strong class="ln iu">自相关</strong>和<strong class="ln iu">部分自相关</strong> ) <strong class="ln iu"> </strong>。</p><h1 id="4f04" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">相关和滞后因子</h1><p id="5d94" class="pw-post-body-paragraph ll lm it ln b lo ml ju lq lr mm jx lt lu mn lw lx ly mo ma mb mc mp me mf lk im bi translated">让我们考虑一个在任何特定的一天，比如说星期天，预测汽油价格的例子。显而易见，周日的价格将取决于周六的价格。</p><p id="6284" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">现在让我们考虑一下周五的价格对周日价格的影响</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/ab3373610cb47c78f41e0ea533f5efe6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*R8qGjWMkQhAP3T_RiXWIZw.png"/></div></figure><p id="f08f" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">由于周日的价格取决于周六的<strong class="ln iu"> (2) </strong>，而周六的价格又取决于周五的<strong class="ln iu"> (1) </strong>，周五的价格和周日的价格之间可能存在间接传递关系。</p><p id="9a0a" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">上述关系如下图所示。</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi my"><img src="../Images/c970cfe755e4c5e1cf7baa5be533b4e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vyx2eD_OrwtO6i7qtpIBug.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">Auto-correlation</figcaption></figure><p id="0958" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">除此之外，还有一个关系可能一开始很难想象，即周五的价格对周日价格的直接影响<strong class="ln iu"> (3) </strong>。</p><p id="d3ef" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">这里日价格之间的这种相互关系，就叫做<strong class="ln iu"><em class="nh"/></strong>。如果两个变量的值一起增加(或减少)，那么就说它们有正相关性。如果一个变量的值增加而另一个减少(反之亦然)，那么它们有一个<em class="nh">负相关性。</em></p><p id="d4c6" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">相关性是时间序列的一个重要概念，</p><ul class=""><li id="25b3" class="ni nj it ln b lo mg lr mh lu nk ly nl mc nm lk nn no np nq bi translated"><strong class="ln iu">自相关，<strong class="ln iu"> </strong>同时考虑<em class="nh">直接</em>和<em class="nh">间接</em>效应的</strong>(如上图所示)，</li><li id="7145" class="ni nj it ln b lo nr lr ns lu nt ly nu mc nv lk nn no np nq bi translated"><strong class="ln iu">部分自相关，</strong>仅考虑<em class="nh">的直接影响</em>，如下图所示</li></ul><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi my"><img src="../Images/6504edc676306d89a68a274addbc5922.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Uq5Ge7BqCPIh4Tn-VsVgQ.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">Partial auto-correlation</figcaption></figure></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h2 id="9a4f" class="od kj it bd kk oe of dn ko og oh dp ks lu oi oj ku ly ok ol kw mc om on ky oo bi translated">滞后因素</h2><p id="a3cd" class="pw-post-body-paragraph ll lm it ln b lo ml ju lq lr mm jx lt lu mn lw lx ly mo ma mb mc mp me mf lk im bi translated">因为我们已经考虑了基于前两天(即周五)价格的周日价格的影响…这里的滞后因子是 2。</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi op"><img src="../Images/d47ed233f2d01b1ec67b5ba4780d0772.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5VLf698UFglehQmh3TBuag.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">Lag factor concept</figcaption></figure></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><p id="3899" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated"><strong class="ln iu">自相关</strong>和<strong class="ln iu">部分自相关</strong>在继续学习 ARIMA 之前理解很重要，因为它们对于为你的模型选择正确的参数至关重要。你可以在这里找到一个很好的解释<a class="ae oq" href="https://www.youtube.com/watch?v=DeORzP0go5I" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h1 id="ac29" class="ki kj it bd kk kl or kn ko kp os kr ks jz ot ka ku kc ou kd kw kf ov kg ky kz bi translated">自回归(AR)</h1><blockquote class="la"><p id="8eca" class="lb lc it bd ld le lf lg lh li lj lk dk translated">自回归(AR)模型是一种特殊类型的回归模型，其中因变量依赖于自身的过去值。</p></blockquote><p id="6e31" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf lk im bi translated">这必然意味着当前值与先前时间步骤中的值相关。更具体地说，这里的相关类型是<a class="ae oq" href="https://en.wikipedia.org/wiki/Partial_autocorrelation_function" rel="noopener ugc nofollow" target="_blank">部分自相关</a>。</p><p id="1975" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">AR 模型的方程式如下所示</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi ow"><img src="../Images/520806b1af1332c7d4db79220ab67b9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cLr7reSvZBt7dAHyO1Ar-g.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">AR equation</figcaption></figure><p id="edfc" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">相应滞后观测值的相应权重(ф1，ф2…фp)由滞后观测值和当前观测值之间的相关性决定。如果相关性越大，对应于滞后观察的权重越高(反之亦然)。</p><p id="d4eb" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">注意等式中的<strong class="ln iu"> (p) </strong></p><p id="c3d3" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">这个<strong class="ln iu"> (p) </strong>叫做滞后阶。它代表我们在模型中包括的先前滞后观察的数量，即与当前观察有显著相关性的滞后的数量。</p><h1 id="56d9" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">移动平均线</h1><blockquote class="la"><p id="c475" class="lb lc it bd ld le lf lg lh li lj lk dk translated">移动平均(MA)模型的工作原理是分析你在预测前一个时间段的值时的错误程度，从而对当前时间段做出更好的估计。</p></blockquote><p id="6190" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf lk im bi translated">基本上，这个模型考虑了滞后观测的误差。这些先前(滞后)观测误差对当前观测的影响取决于它们之间的<a class="ae oq" href="https://en.wikipedia.org/wiki/Autocorrelation" rel="noopener ugc nofollow" target="_blank">自相关</a>。这在某种意义上类似于考虑<em class="nh">部分自相关</em>的 ar 模型。</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi ow"><img src="../Images/a39c47ae84dc79a82440e408339ffc64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t2vQXShddn_RNJno_oSgIQ.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">MA equation</figcaption></figure><p id="9905" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">ε项表示在相应滞后处观察到的误差，权重(ω1，ω2 …ωq)根据相关性进行统计计算。</p><p id="b5c7" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">注意等式中的<strong class="ln iu">(q)</strong>…</p><p id="9ed8" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated"><strong class="ln iu"> (q) </strong>表示移动窗口的大小，即对当前观测有重大影响的滞后观测误差的数量。它类似于滞后顺序<strong class="ln iu"> (p) </strong>，但是它考虑的是误差而不是观测值本身。</p></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><p id="1c07" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">MA 模型补充了 AR 模型，考虑了以前时间段的误差，从而有助于获得更好的估计。</p><p id="fce1" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">当我们结合 AR 和 MA 等式时，我们得到</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi op"><img src="../Images/2bddf778386af50a75411246775c6946.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nM2EhraSeNCFewN0AF0ieg.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">Combined equation for ARMA</figcaption></figure></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h1 id="bfe7" class="ki kj it bd kk kl or kn ko kp os kr ks jz ot ka ku kc ou kd kw kf ov kg ky kz bi translated">平稳性</h1><p id="ce56" class="pw-post-body-paragraph ll lm it ln b lo ml ju lq lr mm jx lt lu mn lw lx ly mo ma mb mc mp me mf lk im bi translated">到目前为止，我们讨论的模型(ar 和 MA)都假设序列是平稳的。这也意味着<strong class="ln iu">【平稳性】</strong>是利用这些模型进行任何时间序列的必要条件。</p><h2 id="a41d" class="od kj it bd kk oe of dn ko og oh dp ks lu oi oj ku ly ok ol kw mc om on ky oo bi translated">但是…什么是平稳性？</h2><p id="332d" class="pw-post-body-paragraph ll lm it ln b lo ml ju lq lr mm jx lt lu mn lw lx ly mo ma mb mc mp me mf lk im bi translated">基本上，一个时间序列要成为<em class="nh">平稳</em>，应该满足以下三个条件…</p><ol class=""><li id="e00a" class="ni nj it ln b lo mg lr mh lu nk ly nl mc nm lk ox no np nq bi translated"><a class="ae oq" href="https://en.wikipedia.org/wiki/Mean" rel="noopener ugc nofollow" target="_blank">的意思是</a> ( <strong class="ln iu"> μ </strong>)是<em class="nh">常数</em></li><li id="ec82" class="ni nj it ln b lo nr lr ns lu nt ly nu mc nv lk ox no np nq bi translated"><a class="ae oq" href="https://en.wikipedia.org/wiki/Standard_deviation" rel="noopener ugc nofollow" target="_blank">标准差</a> ( <strong class="ln iu"> σ </strong>)是<em class="nh">常数</em></li><li id="d02b" class="ni nj it ln b lo nr lr ns lu nt ly nu mc nv lk ox no np nq bi translated"><a class="ae oq" href="https://www.itl.nist.gov/div898/handbook/pmc/section4/pmc443.htm" rel="noopener ugc nofollow" target="_blank">季节性</a> <em class="nh">不存在</em></li></ol><p id="0d62" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">在大多数情况下，通过研究相对于时间的曲线，可以直观地分析这些条件。</p><p id="59ef" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">你会遇到许多显然不是平稳的数列。</p><p id="15a0" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">这是否意味着预测不能应用于这些情况？</p><p id="e019" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">嗯…这就是子缩写<strong class="ln iu"> I </strong>的由来…</p><h1 id="835d" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">综合(一)</h1><p id="d413" class="pw-post-body-paragraph ll lm it ln b lo ml ju lq lr mm jx lt lu mn lw lx ly mo ma mb mc mp me mf lk im bi translated">比方说，你遇到一个具有<strong class="ln iu">“非常数”</strong>平均值的数列。可以清楚地观察到，平均值随着时间的推移而增加，即<em class="nh">序列不是稳定的。</em></p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/2dbf8b04c21e938c641c5f32e0c706ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:808/format:webp/1*OyB_lvSzOSfGSewxVlDLGQ.png"/></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">Amazon stock value over time</figcaption></figure><p id="a885" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">如果我们能以某种方式消除这种上升趋势，我们就可以走了。</p><p id="de90" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">一种方法是考虑连续时间步长之间的差异。这相当于执行形式的转换…</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/9a7cc9a86253ad9f0a8ffc5185e32c76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*dXuPTGRGaORPkSUNZSLTSQ.png"/></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">Transformation</figcaption></figure><p id="74a5" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">应用这种变换，我们得到了具有可观测的常数平均值的下列趋势。标准差也是恒定的，季节性不存在，即该系列现在是<em class="nh">稳定的。</em></p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/76ae5852cab47f9768765e2a3b2c5040.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*OSZjfBHehJNdyGNSPiXBaQ.png"/></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk">Transformation applied</figcaption></figure><p id="a990" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated"><strong class="ln iu"> I </strong>代表<strong class="ln iu">集成</strong> <em class="nh">(虽然与集成无关)</em>。这只是意味着，我们不是预测时间序列本身，而是预测序列从一个时间步到下一个时间步的差异。</p><p id="37bf" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">注意，这里我们采用了一阶差分，即连续项差分的单个相位。这可以多次进行以使系列静止。</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/353ea5f818f61b8f12e5d85cef51c806.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*GiP3UninCpgddvH5-Xt2uQ.png"/></div></figure><p id="5bdd" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">这个差分顺序<strong class="ln iu"/>(<strong class="ln iu">d</strong>)<strong class="ln iu"/>是 ARIMA 的一个重要参数，决定了模型的成功与否</p></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><p id="d486" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">因此，为了修正，最终的 ARIMA 模型将采取以下形式。</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi pb"><img src="../Images/9f3921cb90ca77d0c01246f2d24bb0b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BlxfQu1wNnAD5OWXj1UExQ.png"/></div></div></figure></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><h1 id="b412" class="ki kj it bd kk kl or kn ko kp os kr ks jz ot ka ku kc ou kd kw kf ov kg ky kz bi translated">外卖食品</h1><p id="d3ac" class="pw-post-body-paragraph ll lm it ln b lo ml ju lq lr mm jx lt lu mn lw lx ly mo ma mb mc mp me mf lk im bi translated">ARIMA 由于其简单性和对非平稳序列的泛化能力，是一种广泛使用的预测模型。</p><p id="0582" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">尽管如此，了解什么时候使用 ARIMA，什么时候不使用它是很重要的。ARIMA 不适用于季节性的数据。比如农作物产量预测或者人造圣诞树的销售！</p><p id="5a62" class="pw-post-body-paragraph ll lm it ln b lo mg ju lq lr mh jx lt lu mi lw lx ly mj ma mb mc mk me mf lk im bi translated">在这些情况下，最好使用季节性 ARIMA。</p></div></div>    
</body>
</html>