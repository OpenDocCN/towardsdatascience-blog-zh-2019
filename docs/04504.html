<html>
<head>
<title>How to get more of your Google Search Console Data by using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何通过使用 Python 获得更多的 Google 搜索控制台数据</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/access-google-search-console-data-on-your-site-by-using-python-3c8c8079d6f8?source=collection_archive---------14-----------------------#2019-07-11">https://towardsdatascience.com/access-google-search-console-data-on-your-site-by-using-python-3c8c8079d6f8?source=collection_archive---------14-----------------------#2019-07-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/7d5c7c82827b9d9eee08cdfe852e2bde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wr4RQiVarqBXqp8nue3MXg.jpeg"/></div></div></figure><p id="fc91" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae kz" href="https://search.google.com/search-console/about" rel="noopener ugc nofollow" target="_blank">谷歌搜索控制台</a>(之前的谷歌网站管理员工具)是谷歌提供的一项网络服务，帮助你监控和维护你的网站在<strong class="kd iu">谷歌搜索结果</strong>中的显示。它也是一个很好的工具，可以用来分析从谷歌到你的网站的有机搜索。</p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi la"><img src="../Images/cb3c0ff0563f1270ff226c8408c55471.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JNzktmnsJ9BDPTFAhZmOUQ.jpeg"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk">Google Search Console UI (credit to <a class="ae kz" href="https://unsplash.com" rel="noopener ugc nofollow" target="_blank">unsplash</a>)</figcaption></figure><p id="7ec8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">谷歌搜索控制台是伟大的，但它的数据只有过去 1 年零 4 个月。如果你想查看历史数据超过时期，可惜你不能！:(</p><p id="6879" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">幸运的是，Google 为我们提供了一个<a class="ae kz" href="https://developers.google.com/webmaster-tools/search-console-api-original/" rel="noopener ugc nofollow" target="_blank">搜索控制台 API </a>来访问 Google 搜索控制台中的数据。使用这个 API，您可以访问您站点上的数据，并将它们存储在您的首选数据库中，用于分析或其他目的。</p><h1 id="944f" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">使用搜索控制台 API</h1><p id="1bd3" class="pw-post-body-paragraph kb kc it kd b ke mh kg kh ki mi kk kl km mj ko kp kq mk ks kt ku ml kw kx ky im bi translated">在开始编码之前，您应该准备好您的搜索控制台 API。我以前写过一篇文章，介绍如何通过客户端 ID 访问您的<a class="ae kz" href="https://medium.com/@chingjunetao/simple-way-to-access-to-google-service-api-a22f4251bb52" rel="noopener"> Google 服务。您应该能够获得包含密钥的 JSON 文件来访问您的 Google 搜索控制台。</a></p><div class="mm mn gp gr mo mp"><a href="https://medium.com/@chingjunetao/simple-way-to-access-to-google-service-api-a22f4251bb52" rel="noopener follow" target="_blank"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd iu gy z fp mu fr fs mv fu fw is bi translated">访问 Google 服务 API 的简单方法</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">我们大多数人肯定会使用谷歌提供的至少一项服务。自从我成为一名互联网数据分析师后…</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">medium.com</p></div></div><div class="my l"><div class="mz l na nb nc my nd jz mp"/></div></div></a></div><h1 id="c0cf" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">访问搜索控制台 API</h1><h2 id="728c" class="ne lk it bd ll nf ng dn lp nh ni dp lt km nj nk lx kq nl nm mb ku nn no mf np bi translated">入门指南</h2><figure class="lb lc ld le gt ju"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="ca38" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在本教程中，我们将使用 google-auth-oauthlib(一个 google 认证库)来访问 API。</p><pre class="lb lc ld le gt ns nt nu nv aw nw bi"><span id="0a8b" class="ne lk it nt b gy nx ny l nz oa">pip install google-auth-oauthlib</span></pre><p id="119a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您需要将<code class="fe ob oc od nt b">https://www.yourwebsite.com/</code>更改为您自己的站点。对于<code class="fe ob oc od nt b">OAUTH_SCOPE</code>，Google 搜索控制台 API 只有 2 个 OAuth 作用域。</p><h2 id="7ec6" class="ne lk it bd ll nf ng dn lp nh ni dp lt km nj nk lx kq nl nm mb ku nn no mf np bi translated">建筑连接</h2><figure class="lb lc ld le gt ju"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="5e58" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">第一次，您需要使用基于此 web 身份验证流程的 web 浏览器登录。之后，它会将您的凭证保存在 pickle 文件中。以后每次运行该脚本时，它都会使用存储在<code class="fe ob oc od nt b">config/credentials.pickle</code>中的“腌制”凭证来建立与搜索控制台的连接。</p><h2 id="b3e1" class="ne lk it bd ll nf ng dn lp nh ni dp lt km nj nk lx kq nl nm mb ku nn no mf np bi translated">提取数据</h2><figure class="lb lc ld le gt ju"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="d374" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于每个请求，数据数量有一个限制，即 25，000 行。如果数据超过 25，000 行，您必须将它们分成多个请求。</p><pre class="lb lc ld le gt ns nt nu nv aw nw bi"><span id="a287" class="ne lk it nt b gy nx ny l nz oa">request = {            <br/>'startDate' : date,            <br/>'endDate' : date,            <br/>'dimensions' : ["query","page","country","device"],                       'searchType': "Web",<br/>'rowLimit' : maxRows,            <br/>'startRow' : i * maxRows        <br/>}</span></pre><p id="f5fa" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是请求数据时必须发送的 JSON 格式的请求。在这种情况下，我想用查询的维度<em class="oe">(搜索关键字)</em>、页面、国家和设备提取我前面定义的日期的数据。搜索类型将是 Web only(也有图像和其他选项)。更多细节，可以参考<a class="ae kz" href="https://developers.google.com/webmaster-tools/search-console-api-original/v3/searchanalytics/query" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="34e7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">获得数据后，您就可以开始工作了！你可以把它存放在任何地方。在我的例子中，出于分析目的，数据将存储在 BigQuery 中。</p><p id="36dd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">希望这篇文章能帮助你理解搜索控制台 API 以及如何使用它。</p><p id="6162" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">可以在我的<a class="ae kz" href="https://github.com/chingjunetao/google-service-with-python/tree/master/google-search-console-api" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu"> Github </strong> </a>中查看完整脚本。干杯！</p></div><div class="ab cl of og hx oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="im in io ip iq"><p id="01a4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">如果你喜欢读这篇文章，你可能也会喜欢这些:</strong></p><div class="mm mn gp gr mo mp"><a rel="noopener follow" target="_blank" href="/how-to-master-python-command-line-arguments-5d5ad4bcf985"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd iu gy z fp mu fr fs mv fu fw is bi translated">如何掌握 Python 命令行参数</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">使用命令行参数创建自己的 Python 脚本的简单指南</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">towardsdatascience.com</p></div></div><div class="my l"><div class="om l na nb nc my nd jz mp"/></div></div></a></div><div class="mm mn gp gr mo mp"><a rel="noopener follow" target="_blank" href="/how-to-style-your-dataframe-with-python-eabf376d1efd"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd iu gy z fp mu fr fs mv fu fw is bi translated">如何用 Python 设计你的数据框架</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">如何使用 Python 高亮显示、格式化或着色您的数据框</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">towardsdatascience.com</p></div></div><div class="my l"><div class="on l na nb nc my nd jz mp"/></div></div></a></div><p id="577e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">你可以在 Medium 上找到我其他作品的链接，关注我</strong> <a class="ae kz" href="https://medium.com/@chingjunetao" rel="noopener"> <strong class="kd iu">这里</strong> </a> <strong class="kd iu">。感谢阅读！</strong></p></div></div>    
</body>
</html>