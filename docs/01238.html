<html>
<head>
<title>Interactively exploring Reddit posts using basic Scala in your browser</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在浏览器中使用基本 Scala 交互式浏览 Reddit 帖子</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/interactively-exploring-reddit-posts-using-basic-scala-in-your-browsers-f394843069de?source=collection_archive---------22-----------------------#2019-02-25">https://towardsdatascience.com/interactively-exploring-reddit-posts-using-basic-scala-in-your-browsers-f394843069de?source=collection_archive---------22-----------------------#2019-02-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="53e5" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">本文继续我们的 Scala 之旅。在这些练习中，您将使用您编写并在浏览器中运行的基本 Scala 代码片段来分析实际的 Reddit 帖子。你甚至会发现 Redditors 的一些令人惊讶的行为。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4d964b4ec8d58476aea2864496ea95ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vD6PNR9OdY8EIlItOo2wOg.jpeg"/></div></div></figure><p id="d8d6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是我们 Scala 之旅的第三部分。如果你刚来，想从头开始，请查看<a class="ae ln" href="https://medium.com/@matthagy/quickly-learning-the-basics-of-scala-through-structure-and-interpretation-of-computer-programs-ed5bfa90e8dc" rel="noopener">通过计算机程序实例的结构和解释</a>快速学习 Scala 的基础知识。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><p id="a19e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">今天我们将围绕实际的 Reddit 数据做一些新颖的编程练习。我准备了 2018 年 10 月份的大约一万篇帖子的随机样本，让我们通过在本文的小部件中编写基本的 Scala 来交互式地探索。</p><p id="7c51" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是我们将要编写的用于分析 Reddit 帖子的一些 Scala 的预览。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="985c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们深入研究并弄清楚如何访问这些数据，对其进行计算，从而通过直接在浏览器中编写和运行 Scala 代码来分析 Redditors。</p><p id="2435" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以下代码从 web 服务器获取 Reddit 帖子数据，并显示了 Reddit 数据的前几行。代码中有一些新的 Scala 概念，我们今天不需要理解，因为我们只是使用代码来获取 Reddit 数据。相反，我们将专注于我们编写的探索数据的代码。</p><p id="2d75" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">旁白:这通常是一个很酷的编程特性:我们通常可以使用其他程序员开发的库中的函数来为我们执行计算，即使我们不理解库中代码的细节。专业软件工程师通常在他们的工作中特别使用库，这样他们就不必学习如何解决别人已经解决的编程问题的细节。</p><p id="3109" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在下面的小部件上点击“运行”,运行代码并查看结果。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lx lw l"/></div></figure><p id="f991" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">(注意，如果您发现 ScalaFiddle 小部件在嵌入式表单中过于水平压缩，您可以单击本文中任何 ScalaFiddle 小部件上的“编辑 ScalaFiddle”。在这种情况下，你会发现 ScalaFiddle 网站上的演示更具可读性。)</p><p id="540c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">很酷，我们可以很容易地访问这些有趣的数据，对不对？现在，让我们弄清楚如何探索数据和计算新奇的结果，为 Redditors 提供有趣的见解。</p><p id="9a2b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们接收的数据是一个很长的字符串。您可以修改前面 ScalaFiddle 小部件中的 Scala 代码来调用字符串上的<code class="fe ly lz ma mb b">.length</code>并打印字符数。也就是说，我们将修改代码底部的匿名函数，使其具有以下形式。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="b186" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">运行它，您会看到数据字符串包含不到一百万个字符。因此，我们有一些重要的数据要处理。</p><p id="30e4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们再次看看这个例子，看看我们将如何处理这个长字符串。</p><pre class="kg kh ki kj gt mc mb md me aw mf bi"><span id="eaeb" class="mg mh iq mb b gy mi mj l mk ml">MarioAI,nicolasrene,recreation of Mario facing left since i havent got the original picture not the real thing but he did face left once in 1-2...,1<br/>u_seksualios,seksualios,Seksuali gundanti ištvirkėlė Alektra Blue juodais drabužiais,1<br/>Cuphead,[deleted],Just finished Cuphead in an hour and fifteen minutes.,0<br/>videos,lonemonk,Trump On The Traps - Calvin Dick (2017),1 CryptoCurrency,Pseudoname87,Why does binance show a different price than other sites?,1</span></pre><p id="a7b2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此文本数据采用逗号分隔值(CSV)格式。传统上，这种数据显示为表格。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="c5da" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以看到文件的每一行都对应一篇文章。因此，首先，我们要将这个字符串按行分解，以访问每个帖子的单独行。我们可以使用 string 方法<code class="fe ly lz ma mb b">split</code>根据特定的拆分字符将一个字符串拆分成子字符串。为了拆分成行，我们将使用换行符<code class="fe ly lz ma mb b">"\n"</code>作为拆分字符。</p><p id="33bd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，我们将使用<code class="fe ly lz ma mb b">toList</code>将<code class="fe ly lz ma mb b">split</code>的返回值转换成一个列表，并显示行数。您可以返回 ScalaFiddle 小部件，将我们的处理代码修改如下。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="b07d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">结果显示，我们在这个数据中有大约 11，000 个 Reddit 帖子。</p><p id="dfd5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我们仍然有一些工作要做，为编程探索准备我们的数据，因为每个 Reddit 提交包含多个属性。回到示例，我们看到每一行都是每个帖子的逗号分隔的值字符串。这些属性依次为:</p><ul class=""><li id="1e1b" class="mm mn iq kt b ku kv kx ky la mo le mp li mq lm mr ms mt mu bi translated"><strong class="kt ir">子编辑</strong>:帖子提交到的子编辑</li><li id="261c" class="mm mn iq kt b ku mv kx mw la mx le my li mz lm mr ms mt mu bi translated"><strong class="kt ir">作者</strong>:发布提交内容的用户账号</li><li id="19e6" class="mm mn iq kt b ku mv kx mw la mx le my li mz lm mr ms mt mu bi translated"><strong class="kt ir">标题</strong>:文章的标题</li><li id="6930" class="mm mn iq kt b ku mv kx mw la mx le my li mz lm mr ms mt mu bi translated"><strong class="kt ir">得分</strong>:数据被提取时提交的投票得分</li></ul><p id="87d4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将再次使用<code class="fe ly lz ma mb b">String.split</code>来访问每个帖子的各个字段，这次使用<code class="fe ly lz ma mb b">","</code>作为拆分字符。</p><p id="01dc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们想要一种方法来组织单个帖子的所有不同属性，为此，我们可以创建一个 Scala <code class="fe ly lz ma mb b">class</code>。在高层次上，类只是允许我们将相关的数据元素组织在一起，就像 Reddit 帖子的不同属性一样。下面是我们如何为这些数据定义一个类。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="580c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里有一个我们如何使用 Post 类的例子。随意修改代码，感受一下我们的<code class="fe ly lz ma mb b">Post</code>数据类型。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lx lw l"/></div></figure><p id="fa1e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将在以后更详细地介绍这些课程。现在，知道这个类定义了一个新的数据类型来表示 Reddit 帖子就足够了，每个帖子有四个属性:subreddit、author、title 和 score。</p><p id="a12b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，让我们修改处理代码，将原始数据解析成一个帖子列表。即创建一个<code class="fe ly lz ma mb b">List[Post]</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lx lw l"/></div></figure><p id="fc70" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们有了一个<code class="fe ly lz ma mb b">val posts: List[Post]</code>的帖子列表。所以让我们开始探索这个 Reddit 帖子数据吧！</p><p id="bc86" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，让我们统计一下单个子编辑的帖子数量。您可以将以下代码添加到前面 ScalaFiddle 小部件中的处理器函数中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="280a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里我们使用<code class="fe ly lz ma mb b">List</code>的<code class="fe ly lz ma mb b">filter</code>方法来创建一个新列表，该列表只包含来自子编辑“AskReddit”的帖子。一般来说，我们可以使用<code class="fe ly lz ma mb b">filter</code>和我们编写的任何函数来选择<code class="fe ly lz ma mb b">List</code>的元素，从而创建一个新的<code class="fe ly lz ma mb b">List</code>，它只包含那些感兴趣的元素。</p><p id="c47c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以随意修改代码来计算我们的示例中您感兴趣的任何子编辑的帖子数量。</p><p id="d437" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这个练习的基础上，让我们计算每个子编辑的帖子数量。在这个计算中，我们将构建一个数据结构，将每个子编辑与其帖子计数相关联。这就需要我们引入一个新的 Scala 数据结构，叫做<code class="fe ly lz ma mb b">Map</code>。</p><p id="f503" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ly lz ma mb b">Map[K, V]</code>是类型<code class="fe ly lz ma mb b">K</code>的键与类型<code class="fe ly lz ma mb b">V</code>的值之间的关联。在本练习中，我们将构建一个<code class="fe ly lz ma mb b">Map[String, Int]</code>来将 subreddit 名称与帖子数量关联起来。以下是我们如何使用这种地图的一些例子。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lx lw l"/></div></figure><p id="cdf8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您能否添加代码来创建将值为<code class="fe ly lz ma mb b">12</code>的键<code class="fe ly lz ma mb b">"new key"</code>添加到我们的<code class="fe ly lz ma mb b">val map: Map[String, Int]</code>中的<code class="fe ly lz ma mb b">forthMap</code>？</p><p id="9c55" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于熟悉其他编程语言的人来说，看到<code class="fe ly lz ma mb b">Map.updated</code>返回另一个新的<code class="fe ly lz ma mb b">Map</code>可能会很惊讶。一般来说，Scala 鼓励我们使用不可变的数据结构，因此我们避免修改任何东西。相反，我们创建新的数据结构来表示任何变化的结果。Scala 在幕后做了一些非常聪明的事情，使得这种更新在处理时间和内存使用方面都很有效。</p><p id="9c15" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">注意<code class="fe ly lz ma mb b">Map[K, V].get(key)</code>返回一个<code class="fe ly lz ma mb b">Option[V]</code>。<code class="fe ly lz ma mb b">Option</code>用于说明给定的<code class="fe ly lz ma mb b">key</code>可能没有值。<code class="fe ly lz ma mb b">Option</code>是一种通用数据类型，它有两种形式:<code class="fe ly lz ma mb b">Some(value)</code>和<code class="fe ly lz ma mb b">None</code>。<code class="fe ly lz ma mb b">Some(value)</code>表示我们确实有这个键的值，我们可以通过<code class="fe ly lz ma mb b">Some.get</code>访问这个值。而<code class="fe ly lz ma mb b">None</code>表示该键没有值。</p><p id="6181" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ly lz ma mb b">Option</code>有一个有用的方法<code class="fe ly lz ma mb b">getOrElse(alterantive)</code>。当在<code class="fe ly lz ma mb b">Some</code>上被调用时，它返回包含在<code class="fe ly lz ma mb b">Some</code>中的值并忽略<code class="fe ly lz ma mb b">alterantive</code>。而<code class="fe ly lz ma mb b">None.getOrElse(alternative)</code>返回<code class="fe ly lz ma mb b">alternative</code>的值。我们将在代码中使用这个方法，当我们获取当前还没有计数的子编辑的计数时，用零替换<code class="fe ly lz ma mb b">None</code>。</p><p id="0b34" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用<code class="fe ly lz ma mb b">Map</code>，下面是我们如何计算每个子编辑的帖子数量。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lx lw l"/></div></figure><p id="d0a7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请注意我们是如何使用<code class="fe ly lz ma mb b">foldLeft</code>(一种<code class="fe ly lz ma mb b">fold</code>的变体)来处理每个帖子并增加 map 中相应子编辑的计数的。您可能还记得，<code class="fe ly lz ma mb b">fold</code>用于将列表中的所有值聚合成一个值。在这种情况下，最终值是一个<code class="fe ly lz ma mb b">Map[String, Int]</code>，它将子编辑与它们的帖子计数相关联。</p><p id="0394" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">关于<code class="fe ly lz ma mb b">fold</code>函数的快速复习:我们用聚合的初始值和折叠函数调用<code class="fe ly lz ma mb b">foldLeft</code>。<code class="fe ly lz ma mb b">fold</code>为列表中的每个元素调用我们的折叠函数。在每次调用中，folding 函数还接收聚合的当前值。我们的函数返回包含列表元素的聚合的更新值。在使用我们的折叠函数处理了列表中的每个元素之后，<code class="fe ly lz ma mb b">fold</code>函数返回聚合的最终值。</p><p id="4f6f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">花点时间回顾一下这段代码，看看你是否能理解我们是如何计算每个子编辑的帖子数量的。作为练习，您能修改这个示例代码来计算每个用户的帖子数量吗？</p><p id="f7c5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然当前的结果不错，但我们更想知道顶部子街道的结果；即在 Reddit 帖子的这个样本中具有最多帖子的那些人。为此，我们需要一种方法来根据帖子的数量对子编辑进行排序，这样我们就可以选择显示前几个子编辑。在计算机科学术语中，这样的过程被称为排序。</p><p id="4fde" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以将下面的代码添加到前面的示例中，按照帖子数量对子 Reddit 进行排序，然后显示 Reddit 帖子示例中的前 10 个帖子。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="90ba" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里正在发生一些新的事情。首先，我们使用<code class="fe ly lz ma mb b">Map.toList</code>方法将<code class="fe ly lz ma mb b">subredditCount</code>从<code class="fe ly lz ma mb b">Map[String, Int]</code>转换为<code class="fe ly lz ma mb b">List[(String, Int)]</code>。这引入了一个叫做元组的新概念，因为<code class="fe ly lz ma mb b">(String, Int)</code>是长度为 2 的元组的类型，其中第一个元素是字符串，第二个元素是整数。</p><p id="1aa4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">元组是 Scala 中的一种通用数据类型，可以用来表示固定长度的元素集合，其中每个位置都有一个固定的类型。例如<code class="fe ly lz ma mb b">(String, String, String, int)</code>是一个长度为四的元组。我们可以使用这种元组类型而不是类<code class="fe ly lz ma mb b">Post</code>来表示单个 Reddit 帖子中的数据。</p><p id="0390" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一般来说，类是将相关元素组合在一起的更清晰的方式。元组在某些情况下很有用，特别是在我们想要编写使用占位符类型的泛型算法的情况下。这就是需要一个通用方法来转换相关对列表中的一个<code class="fe ly lz ma mb b">Map[K, V]</code>，<code class="fe ly lz ma mb b">List[(K, V)]</code>的情况。</p><p id="f0d0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，我们使用方法<code class="fe ly lz ma mb b">sortBy</code>对元组列表进行排序。该方法采用一个函数来计算列表中每个元素的排名分数。列表的元素按等级排序，并且由<code class="fe ly lz ma mb b">sortBy</code>返回一个新的列表，其中元素被排序。您可以看到，我们的排名函数只是通过访问元组的第二个元素<code class="fe ly lz ma mb b">t._2</code>来获取每个子元组的计数。</p><p id="c495" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们的 Reddit 帖子示例的结果如下。</p><pre class="kg kh ki kj gt mc mb md me aw mf bi"><span id="ebe0" class="mg mh iq mb b gy mi mj l mk ml">(AskReddit,254)<br/>(AutoNewspaper,214)<br/>(The_Donald,84)<br/>(CryptoCurrency,71)<br/>(SteamTradingCards,69)<br/>(RocketLeagueExchange,65)<br/>(newsbotbot,65)<br/>(videos,64)<br/>(GlobalOffensiveTrade,59)<br/>(PewdiepieSubmissions,58)</span></pre><p id="5eee" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在考虑数字时，我们应该记住这是所有 Reddit 帖子的一个小的随机样本，所以计数将比帖子的总数小得多。我们的样本是 2018 年 10 月所有 Reddit 帖子的 0.1%样本，因此我们可以将这些数字乘以 1000，以估计本月每个 subreddit 的帖子总数。</p><p id="a233" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">凭借我对 Reddit 的熟悉，我可以说这些结果似乎与我对“AskReddit”等流行子编辑的直觉一致。你怎么想呢?</p><p id="7560" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您能否修改之前计算每个作者的文章数量的练习代码，以便对结果进行排序？Reddit 帖子样本中的顶级作者是谁？</p><p id="6ed3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，让我们看看我们的示例是否包含标题中带有 Scala 的帖子。您可以将下面的代码片段添加到前面的 ScalaFiddle 小部件中来回答这个问题。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="6e2a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你对这些帖子有什么看法？它们中的每一个都是关于 Scala 的吗？或者使用这种启发式方法以编程的方式识别相关的帖子是否有缺陷？我们将很快考虑更复杂的方法来分析帖子。</p><p id="7358" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">还有哪些词让你感兴趣？修改代码，因为你想寻找其他职位有某些关键字。在许多方面，我们正在构建一个简单的、定制的搜索引擎，以便在这个小样本中找到与我们的兴趣相关的帖子。</p><p id="99ef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">注意，我自己也发现了大量的淫秽语言。作为练习，您可以编写一些 Scala 代码来查找包含脏话的帖子。我不包括这方面的示例代码，因为我不想在我的博客上有一个诅咒词的列表。:)</p><p id="3f6b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一般来说，我们感兴趣的是计算文章标题中不同单词在每个子编辑中的出现频率。这里有一些相当复杂的代码来完成这样的分析。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lx lw l"/></div></figure><p id="3d4a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">花些时间仔细思考这个例子。这是对目前为止我们在当前和过去的文章中考虑的许多概念的一个很好的回顾。提醒一下，你可以点击小部件上的“在 ScalaFiddle 上编辑”,在一个没有小部件水平压缩的单独窗口中打开例子，以便更好地阅读代码。</p><p id="fafe" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">示例代码包括一些我们还没有探索的概念。如果你愿意，你可以自己探索这些概念——在我们共享 Scala 之旅之前——使用 scala-lang.org 的资源。总的来说，这个网站是学习 Scala 概念的好地方。当然，一般的谷歌搜索也可以找到一些有用的资源，包括 StackOverflow 问题和答案。</p><p id="abe2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">目前我想解释的一件事是，这个代码示例是如何使用模式匹配的两种情况来解构数据结构的。在这些情况下，我们通过模式匹配解构来访问元组的元素。这里有一个在函数中解构元组的孤立例子。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lx lw l"/></div></figure><p id="31e3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以看到我们以非标准的方式定义了这个函数。一般来说，我们主要在匿名函数中使用这种模式，这就是我们在词频示例中所做的。</p><p id="df10" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">除了分析 Scala 代码，你对这些结果有什么看法？根据你对 Reddit 的了解，词频结果看起来合适吗？在某些子街道的高频词中有什么令人惊讶的结果吗？</p><p id="43a3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以修改和扩展这些例子，但是你想计算任何你感兴趣的 Reddit 帖子。这里有一些想法，你可能想计算这个 Reddit 帖子的样本。</p><ul class=""><li id="c4b5" class="mm mn iq kt b ku kv kx ky la mo le mp li mq lm mr ms mt mu bi translated">有哪些帖子得分最高？<em class="na">(本文简介中的例子)</em></li><li id="1bbf" class="mm mn iq kt b ku mv kx mw la mx le my li mz lm mr ms mt mu bi translated">哪些 Redditors 的平均分最高？</li><li id="6655" class="mm mn iq kt b ku mv kx mw la mx le my li mz lm mr ms mt mu bi translated">谁是每个子栏目中发帖最多的 Redditors？</li><li id="e7b2" class="mm mn iq kt b ku mv kx mw la mx le my li mz lm mr ms mt mu bi translated">哪些词在高分帖中出现频率很高？相对于哪些词在低分帖子中出现频率较高？</li><li id="e27a" class="mm mn iq kt b ku mv kx mw la mx le my li mz lm mr ms mt mu bi translated">哪些词在所有帖子中出现频率普遍较低，但在特定的子帖子中出现频率较高？也就是说，什么词是给定子编辑的唯一特征？我们可以通过获取每个子编辑/单词对的<code class="fe ly lz ma mb b">subredditWordFrequency/generalWordFrequency</code>的比率并寻找高比率来量化这一点。(这是一个很好的挑战，可以进一步提高您的 Scala 熟练程度。)</li></ul></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><p id="ba48" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我希望你喜欢应用 Scala 来分析 Reddit，并对 Redditors 有所了解。在未来，我将向您展示如何对 2018 年 10 月的全套 Reddit 帖子进行这种分析。这个月有 11，306，843 个帖子，所以我们需要学习如何使用“大数据”技术 Spark 应用 Scala。</p><p id="3e10" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您会惊讶地发现，我们在这些“大数据”练习中编写的代码并不比我们在今天的练习中编写的代码更复杂。当我们使用 Spark 和 Scala 等强大的技术时，处理“大数据”就像处理小数据一样简单。</p><p id="9a57" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢您和我一起完成另一系列 Scala 练习。我希望这一次特别有趣，因为我们开始了解真实世界的数据。我会尽我所能创造更多这种风格的练习。</p><p id="32b0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我要感谢<a class="ae ln" href="https://pushshift.io/" rel="noopener ugc nofollow" target="_blank"> pushshift.io </a>托管 Reddit 数据转储。这是一个非常有趣的数据来源，对我来说，从 2018 年 10 月的完整数据集中提取一个小样本用于这些示例和练习很容易。您可以自己下载这些数据，并编写自己的 Scala 代码来开始执行更复杂的分析。</p></div></div>    
</body>
</html>