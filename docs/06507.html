<html>
<head>
<title>A Graph DB Case Study: Chinese Idiom Chains</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">图形数据库案例研究:中国习语连锁店</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-graph-db-case-study-chinese-idioms-2b8969afdea8?source=collection_archive---------37-----------------------#2019-09-17">https://towardsdatascience.com/a-graph-db-case-study-chinese-idioms-2b8969afdea8?source=collection_archive---------37-----------------------#2019-09-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="13d0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用 20 行 Python 构建一个 Neo4J 图形数据库应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c69758a3993489fa2bb42542e0e92620.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HJrl4SIwY1dJfPVw7ln72g.jpeg"/></div></div></figure><p id="2eea" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">与关系数据库相比，图数据库有许多优点:快速查询、灵活模式、高效存储等。但时至今日仍未得到充分利用。困难之一是与其他语言的互操作性，官方文档提供的例子很少。本文试图填补这个空白，提供了一个只有 20 行 python 代码的案例研究。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lq"><img src="../Images/dfbd6136398853f40c83b448ab44e8e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*-b0zoSSWYM8zjqJCjNlXDA.gif"/></div></div></figure><h2 id="f5b7" class="lr ls it bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated"><strong class="ak">中华习语链球赛</strong></h2><p id="82f5" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">这是一个帮助小学生学习成语的经典教育游戏。一名学生坐在圆桌旁，随机拿出一个中国习语(一个由 4 个汉字组成的中国习语)。下一个学生必须快速说出另一个习语，其第一个字符与给定的习语的最后一个字符相匹配。当有人被卡住时，他必须唱首歌或跳支舞。</p><p id="1720" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在有了 graph DB 的知识，小学生可以不用再担心输了比赛，不得不在全班面前表演了！</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="97ee" class="lr ls it bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">图形设计</h2><p id="ed12" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi">The graph structure is as simple as you can imagine. We have one types of node and one types of directed edge. It’s tempting to create a node for each idiom, because an idiom is an entity, just like a user, a movie, a product. If an edge exists between two nodes, we just create an edge. For example, there is an edge pointing from 坚定不<strong class="kw iu">移</strong> to <strong class="kw iu">移</strong>花接木, because the character <strong class="kw iu">移</strong> connects the two idioms.</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mw"><img src="../Images/409e35b63ee31843b0c8b733ffb8913d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9xVPpI3_9p2w5jh80FR9hQ.png"/></div></div><figcaption class="mx my gj gh gi mz na bd b be z dk">Naive design</figcaption></figure><p id="cfc1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">具有关系数据库背景的人可能会自然而然地想到这种设计，因为边只是连接操作中的一个匹配。对吗？不幸的是，这个看似无害的设计结果却不切实际。我们必须彻底搜索所有的边，并且一次添加一个边，导致二次时间复杂度。</p><p id="b05f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">通过巧妙的建模，我们可以做得更好。如果我们将习语嵌入到边中，而不是节点中，会怎么样？设位于习语开头或结尾的每个字符都是一个节点。设每条习语是一条有向边，从一个习语的最后一个字符(源节点)指向另一个习语的开始字符(目的节点)。原来这个设计是花费线性时间来构建的！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/eb536207b1d002fc1148e8dce3f10507.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OxvuY5tKJmaAT5NbCxic7Q.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/9a95b6614a371ee8f7a2c2502f65cebc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Huvnhve59gy8D8ojhXDZug.png"/></div></div><figcaption class="mx my gj gh gi mz na bd b be z dk">Improved design</figcaption></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="cd14" class="lr ls it bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">履行</h2><p id="62b6" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">有了好的设计，实现就变得简单了。你需要安装 Neo4J 桌面服务器，和 py2neo 库。</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="05d0" class="lr ls it ne b gy ni nj l nk nl">pip install pandas py2neo</span></pre><p id="16d8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，启动 Neo4J 服务器(参见<a class="ae nm" href="https://neo4j.com/developer/neo4j-desktop/" rel="noopener ugc nofollow" target="_blank">指令</a>，加载<a class="ae nm" href="https://github.com/shawlu95/IdiomGraph/blob/master/dataset/thuocl_chengyu.txt" rel="noopener ugc nofollow" target="_blank">数据集</a>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="360b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们可以查询结果了！让我们编写一个助手函数，让您定义初始习语、路径长度和行限制。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="4852" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们去查询数据库吧！不出所料，速度没有让人失望。为了在关系数据库中获得相同的结果，您需要自连接习语表五次。猜猜需要多长时间？(费用是 N⁵)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/60a259b737596a332e40258dc55d716f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-aYiOD0ke7BitnqPPZABXQ.png"/></div></div></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="b56f" class="lr ls it bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">摘要</h2><p id="37c6" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">这个例子展示了我们如何利用图数据库的优势来显著地加速特定的任务，即使这些任务主要是用另一种语言编写的(在这个例子中是 Python)。</p><p id="c3d5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然而，阅读这篇文章并不能保证你可以在任何任务中运用同样的策略。为了做到这一点，需要牢固掌握<a class="ae nm" href="https://neo4j.com/developer/cypher-query-language/" rel="noopener ugc nofollow" target="_blank">密码</a>语言。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="73fc" class="lr ls it bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">延伸阅读</h2><p id="e91d" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">下面的博客涵盖了与 AB 测试相关的主题，以及对本文中提到的关键概念的更深入的回顾。</p><ul class=""><li id="50b5" class="nq nr it kw b kx ky la lb ld ns lh nt ll nu lp nv nw nx ny bi translated">可视化贝塔分布和贝叶斯更新[ <a class="ae nm" rel="noopener" target="_blank" href="/visualizing-beta-distribution-7391c18031f1">链接</a></li><li id="b737" class="nq nr it kw b kx nz la oa ld ob lh oc ll od lp nv nw nx ny bi translated">理解置信区间[ <a class="ae nm" rel="noopener" target="_blank" href="/understanding-confidence-interval-d7b5aa68e3b">链接</a></li><li id="31b1" class="nq nr it kw b kx nz la oa ld ob lh oc ll od lp nv nw nx ny bi translated">A/B 测试的威力[ <a class="ae nm" rel="noopener" target="_blank" href="/the-power-of-a-b-testing-3387c04a14e3">环节</a></li><li id="ae38" class="nq nr it kw b kx nz la oa ld ob lh oc ll od lp nv nw nx ny bi translated">超越 A/B 测试:多臂强盗实验[ <a class="ae nm" rel="noopener" target="_blank" href="/beyond-a-b-testing-multi-armed-bandit-experiments-1493f709f804">链接</a> ]</li><li id="c002" class="nq nr it kw b kx nz la oa ld ob lh oc ll od lp nv nw nx ny bi translated">你知道可信区间[ <a class="ae nm" rel="noopener" target="_blank" href="/do-you-know-credible-interval-e5b833adf399#bce7">链接</a>吗</li></ul><p id="041e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="oe">源代码、数据集、结果都在我的 GitHub </em> <a class="ae nm" href="https://github.com/shawlu95/IdiomGraph" rel="noopener ugc nofollow" target="_blank"> <em class="oe">资源库</em> </a> <em class="oe">中。</em></p></div></div>    
</body>
</html>