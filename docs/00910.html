<html>
<head>
<title>Interactive plotting with Bokeh</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用散景进行交互式绘图</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/interactive-plotting-with-bokeh-ea40ab10870?source=collection_archive---------20-----------------------#2019-02-11">https://towardsdatascience.com/interactive-plotting-with-bokeh-ea40ab10870?source=collection_archive---------20-----------------------#2019-02-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b626" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">只有几行代码的交互式绘图</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/10e5fa825ed2959c437dc158dd832346.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jvp8wLekQc627WKxZKwLrw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Bokeh plot gallery</figcaption></figure><p id="f597" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi lu translated">作为一个 JupyterLab 超级用户，我喜欢使用散景来绘图，因为它的交互式绘图。JupyterLab 还为交互式 matplotlib 提供了一个<a class="ae md" href="https://github.com/matplotlib/jupyter-matplotlib" rel="noopener ugc nofollow" target="_blank">扩展，但是它速度很慢，而且在处理更大的数据集时会崩溃。</a></p><p id="1b05" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我不喜欢散景的一点是它铺天盖地的文档和复杂的例子。有时，我想做一个简单的线图，但我会纠结于 Bohek 特定代码的 10 行或更多行。但是散景代码可以非常简洁，我将在下面展示。这也是主要目标，用尽可能少的代码展示一些有用的数据可视化。</p><p id="c93a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">这里有几个你可能会感兴趣的链接:</strong></p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="36b0" class="mj mk it mf b gy ml mm l mn mo">- <a class="ae md" href="https://www.humanfirst.ai/" rel="noopener ugc nofollow" target="_blank">Labeling and Data Engineering for Conversational AI and Analytics</a></span><span id="4cac" class="mj mk it mf b gy mp mm l mn mo">- <a class="ae md" href="https://imp.i115008.net/c/2402645/880006/11298" rel="noopener ugc nofollow" target="_blank">Data Science for Business Leaders</a> [Course]</span><span id="dff9" class="mj mk it mf b gy mp mm l mn mo">- <a class="ae md" href="https://imp.i115008.net/c/2402645/788201/11298" rel="noopener ugc nofollow" target="_blank">Intro to Machine Learning with PyTorch</a> [Course]</span><span id="2a1c" class="mj mk it mf b gy mp mm l mn mo">- <a class="ae md" href="https://imp.i115008.net/c/2402645/803127/11298" rel="noopener ugc nofollow" target="_blank">Become a Growth Product Manager</a> [Course]</span><span id="cf8c" class="mj mk it mf b gy mp mm l mn mo">- <a class="ae md" href="https://amzn.to/3ncTG7D" rel="noopener ugc nofollow" target="_blank">Deep Learning (Adaptive Computation and ML series)</a> [Ebook]</span><span id="c588" class="mj mk it mf b gy mp mm l mn mo">- <a class="ae md" href="https://aigents.co/skills" rel="noopener ugc nofollow" target="_blank">Free skill tests for Data Scientists &amp; Machine Learning Engineers</a></span></pre><p id="3897" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上面的一些链接是附属链接，如果你通过它们进行购买，我会赚取佣金。请记住，我链接课程是因为它们的质量，而不是因为我从你的购买中获得的佣金。</p><h1 id="92a1" class="mr mk it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">没听说过散景？</h1><p id="0373" class="pw-post-body-paragraph ky kz it la b lb ni ju ld le nj jx lg lh nk lj lk ll nl ln lo lp nm lr ls lt im bi translated">其网站上的描述很好地总结了这一点:</p><p id="2a6c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="mq"> Bokeh 是一个交互式可视化库，面向现代 web 浏览器进行演示。它的目标是提供优雅、简洁的通用图形结构，并通过超大型或流式数据集的高性能交互来扩展这种能力。散景可以帮助任何人快速轻松地创建交互式绘图、仪表盘和数据应用程序。</em></p><p id="9d25" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以通过下载这个<a class="ae md" href="https://romanorac.github.io/assets/notebooks/2019-02-11-interactive-plotting-with-bokeh.ipynb" rel="noopener ugc nofollow" target="_blank"> Jupyter 笔记本</a>来运行这段代码。</p><h1 id="b118" class="mr mk it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">要求</h1><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="beb1" class="mj mk it mf b gy ml mm l mn mo">import bokeh<br/>import numpy <strong class="mf iu">as</strong> np<br/>from bokeh.models import Circle, ColumnDataSource, Line, LinearAxis, Range1d<br/>from bokeh.plotting import figure, output_notebook, show<br/>from bokeh.core.properties import value<br/><br/>output_notebook()  <em class="mq"># output bokeh plots to jupyter notebook</em><br/>np<strong class="mf iu">.</strong>random<strong class="mf iu">.</strong>seed(42)</span></pre><h1 id="0b1a" class="mr mk it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">生成数据</h1><p id="9e22" class="pw-post-body-paragraph ky kz it la b lb ni ju ld le nj jx lg lh nk lj lk ll nl ln lo lp nm lr ls lt im bi translated">让我们使用 numpy 生成一些随机数据。Bokeh 有自己的数据结构(ColumnDataSource)用于数据表示。我不知道他们为什么开发自己的数据结构，因为 pandas 和 numpy 是 Python 分析世界中事实上的标准(如果你知道，请在下面的评论中启发我)。但幸运的是，它也适用于熊猫。对于这篇博文，我决定用 Bokeh way 的数据结构来写例子。</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="3ba5" class="mj mk it mf b gy ml mm l mn mo">N <strong class="mf iu">=</strong> 100<br/>data_source <strong class="mf iu">=</strong> ColumnDataSource(<br/>    data<strong class="mf iu">=</strong>dict(<br/>        x0<strong class="mf iu">=</strong>np<strong class="mf iu">.</strong>arange(N),<br/>        x1<strong class="mf iu">=</strong>np<strong class="mf iu">.</strong>random<strong class="mf iu">.</strong>standard_normal(size<strong class="mf iu">=</strong>N),<br/>        x2<strong class="mf iu">=</strong>np<strong class="mf iu">.</strong>arange(10, N <strong class="mf iu">+</strong> 10),<br/>        x3<strong class="mf iu">=</strong>np<strong class="mf iu">.</strong>random<strong class="mf iu">.</strong>standard_normal(size<strong class="mf iu">=</strong>N),<br/>    )<br/>)</span></pre><h1 id="e04b" class="mr mk it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">简单线图</h1><p id="d881" class="pw-post-body-paragraph ky kz it la b lb ni ju ld le nj jx lg lh nk lj lk ll nl ln lo lp nm lr ls lt im bi translated">要在 Bohek 中制作一个简单的线图，我们需要 3 行代码。那还不算太糟。请注意，该图是交互式的，我们可以放大和移动，这对于较大的数据集非常有用。</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="584e" class="mj mk it mf b gy ml mm l mn mo">p <strong class="mf iu">=</strong> figure()<br/>p<strong class="mf iu">.</strong>line("x0", "x1", source<strong class="mf iu">=</strong>data_source)<br/>show(p)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/8e34fe0bb91c53b7d5235a817647ba78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/1*joGMJfPsldFm5ztwH2m1bQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">A simple line plot with Bohek</figcaption></figure><h1 id="5a5f" class="mr mk it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">双轴折线图</h1><p id="ecaa" class="pw-post-body-paragraph ky kz it la b lb ni ju ld le nj jx lg lh nk lj lk ll nl ln lo lp nm lr ls lt im bi translated">为了在图上显示两个具有不同范围的数据列，我们可以使用两个独立的 y 轴。我们可以设置 y 轴范围，但这不是必需的。我使用数据列的最小值和最大值作为 y 轴限制。为了直观地分隔数据列，我们可以添加图例并设置颜色。</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="8ef8" class="mj mk it mf b gy ml mm l mn mo">p <strong class="mf iu">=</strong> figure()<br/>column1 <strong class="mf iu">=</strong> "x1"<br/>column2 <strong class="mf iu">=</strong> "x2"</span><span id="df42" class="mj mk it mf b gy mp mm l mn mo"><em class="mq"># FIRST AXIS</em><br/>p<strong class="mf iu">.</strong>line("x0", column1, legend<strong class="mf iu">=</strong>value(column1), color<strong class="mf iu">=</strong>"blue", source<strong class="mf iu">=</strong>data_source)<br/>p<strong class="mf iu">.</strong>y_range <strong class="mf iu">=</strong> Range1d(data_source<strong class="mf iu">.</strong>data[column1]<strong class="mf iu">.</strong>min(), data_source<strong class="mf iu">.</strong>data[column1]<strong class="mf iu">.</strong>max())</span><span id="cd92" class="mj mk it mf b gy mp mm l mn mo"><em class="mq"># SECOND AXIS</em><br/>column2_range <strong class="mf iu">=</strong> column2 <strong class="mf iu">+</strong> "_range"<br/>p<strong class="mf iu">.</strong>extra_y_ranges <strong class="mf iu">=</strong> {<br/>    column2_range: Range1d(<br/>        data_source<strong class="mf iu">.</strong>data[column2]<strong class="mf iu">.</strong>min(), data_source<strong class="mf iu">.</strong>data[column2]<strong class="mf iu">.</strong>max()<br/>    )<br/>}<br/>p<strong class="mf iu">.</strong>add_layout(LinearAxis(y_range_name<strong class="mf iu">=</strong>column2_range), "right")</span><span id="e4d9" class="mj mk it mf b gy mp mm l mn mo">p<strong class="mf iu">.</strong>line("x0", column2, legend<strong class="mf iu">=</strong>value(column2), y_range_name<strong class="mf iu">=</strong>column2_range, color<strong class="mf iu">=</strong>"green",source<strong class="mf iu">=</strong>data_source)</span><span id="20d4" class="mj mk it mf b gy mp mm l mn mo">show(p)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/c93e09935d7404dbfd203927984101e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1090/format:webp/1*FYmRPE0wvYBtQa8EI3PMRA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">A line plot with two axes</figcaption></figure><h1 id="64fe" class="mr mk it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">组合折线图和散点图</h1><p id="a2d6" class="pw-post-body-paragraph ky kz it la b lb ni ju ld le nj jx lg lh nk lj lk ll nl ln lo lp nm lr ls lt im bi translated">这才是散景真正出彩的地方。您可以简单地定义多个元素，并在图上渲染它们。</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="ba26" class="mj mk it mf b gy ml mm l mn mo">p <strong class="mf iu">=</strong> figure()<br/>p<strong class="mf iu">.</strong>line(x<strong class="mf iu">=</strong>"x0", y<strong class="mf iu">=</strong>"x1",color<strong class="mf iu">=</strong>"blue", source<strong class="mf iu">=</strong>data_source )<br/>p<strong class="mf iu">.</strong>circle(x<strong class="mf iu">=</strong>"x0", y<strong class="mf iu">=</strong>"x3",color<strong class="mf iu">=</strong>'green', source<strong class="mf iu">=</strong>data_source)<br/>show(p)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/c5f1504bbe9d24bb5f28ff0311f5b162.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*2iJmOszG0uMS8IZYKskYVg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">A line plot and scatter plot</figcaption></figure><h1 id="eda9" class="mr mk it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">最后的想法</h1><p id="d354" class="pw-post-body-paragraph ky kz it la b lb ni ju ld le nj jx lg lh nk lj lk ll nl ln lo lp nm lr ls lt im bi translated">散景是非常可定制的。你可以调整所有你期望从绘图库中得到的东西，比如线宽、颜色、网格上的多个绘图等等。它提供了特殊的绘图，如用于金融数据的烛台，Burtin 可视化，你甚至可以制作一个周期表。Bokeh 独有的(至少据我所知)选项是将情节导出到 javascript 代码，这使您可以直接将情节嵌入到具有所有交互功能的网页中。</p><h1 id="a4f4" class="mr mk it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">在你走之前</h1><p id="1bc1" class="pw-post-body-paragraph ky kz it la b lb ni ju ld le nj jx lg lh nk lj lk ll nl ln lo lp nm lr ls lt im bi translated">在<a class="ae md" href="https://twitter.com/romanorac" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上关注我，在那里我定期<a class="ae md" href="https://twitter.com/romanorac/status/1328952374447267843" rel="noopener ugc nofollow" target="_blank">发布关于数据科学和机器学习的</a>。</p><p id="6317" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可能会对以下几个链接感兴趣:</p><pre class="kj kk kl km gt me mf mg mh aw mi bi"><span id="fb92" class="mj mk it mf b gy ml mm l mn mo">- <a class="ae md" href="https://imp.i115008.net/c/2402645/788185/11298" rel="noopener ugc nofollow" target="_blank">Data Science Nanodegree Program</a></span><span id="675a" class="mj mk it mf b gy mp mm l mn mo">- <a class="ae md" href="https://imp.i115008.net/c/2402645/824078/11298" rel="noopener ugc nofollow" target="_blank">AI for Healthcare</a></span><span id="7428" class="mj mk it mf b gy mp mm l mn mo">- <a class="ae md" href="https://imp.i115008.net/c/2402645/829912/11298" rel="noopener ugc nofollow" target="_blank">School of Autonomous Systems</a></span><span id="6cce" class="mj mk it mf b gy mp mm l mn mo">- <a class="ae md" href="https://gumroad.com/l/mjyDQ" rel="noopener ugc nofollow" target="_blank">Your First Machine Learning Model in the Cloud</a></span><span id="3517" class="mj mk it mf b gy mp mm l mn mo">- <a class="ae md" href="https://gumroad.com/l/YaaJn" rel="noopener ugc nofollow" target="_blank">5 lesser-known pandas tricks</a></span><span id="048f" class="mj mk it mf b gy mp mm l mn mo">- <a class="ae md" href="https://gumroad.com/l/vxxiV" rel="noopener ugc nofollow" target="_blank">How NOT to write pandas code</a></span><span id="5d0e" class="mj mk it mf b gy mp mm l mn mo">- <a class="ae md" href="https://www.dpbolvw.net/click-100126493-14105294" rel="noopener ugc nofollow" target="_blank">Parallels Desktop 50% off</a></span></pre></div></div>    
</body>
</html>