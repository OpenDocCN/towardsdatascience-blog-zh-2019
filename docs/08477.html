<html>
<head>
<title>Python for Data Science- A Guide to Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于数据科学的 Python 熊猫指南</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/python-for-data-science-basics-of-pandas-5f8d9680617e?source=collection_archive---------4-----------------------#2019-11-17">https://towardsdatascience.com/python-for-data-science-basics-of-pandas-5f8d9680617e?source=collection_archive---------4-----------------------#2019-11-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="49a9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">10 分钟内完成数据探索指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4256acbe3ad06c0c1e789ce30b49dbdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YyG46pHjhTzI8qrDOgaHeg.jpeg"/></div></div></figure><p id="aa61" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">各位数据从业者好。对我来说，这是忙碌的一周，但我回来了。</p><p id="2980" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">首先，我想亲自感谢那些从第一天起就决定追随我的人。我最近达到了 100 个追随者的大关。这并不多，但当我的内容被证明为某个随机的男孩/女孩提供了<strong class="kw iu">价值</strong>时，它对我来说就意味着整个世界。我开始写作是为了帮助人们解决他们的一些问题，因为当我面对他们时，我没有太多的资源可以参考。感谢您的关注，我将继续努力为您提供<strong class="kw iu">值</strong>，就像任何数据科学家都会做的那样。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="a1a4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是够了，你不是为了那个而来，<br/>你是为了那个<strong class="kw iu">数据科学的本质</strong>。<br/>你想成为能够对数据执行<br/> <strong class="kw iu">惊人技术</strong>的人，以获得你需要的东西。<br/>你想成为提供<strong class="kw iu">难以置信的洞察力</strong>的人，这些洞察力影响<br/>产品经理做出<strong class="kw iu">关键决策</strong>。</p><p id="16a9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">嗯，你来对地方了。进来吧。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lr l"/></div></figure><p id="9a2d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们今天将讨论最重要的<br/> <strong class="kw iu"> Python 对于</strong> <strong class="kw iu">数据科学</strong>库。</p><p id="cb59" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是…</p><p id="52d0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">*鼓形辊</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lt"><img src="../Images/4abd4770fde7e9aa1c1cc7392c5973c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*e5ByIEBM3JBp-DEU"/></div></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk">Photo by <a class="ae ly" href="https://unsplash.com/@chuttersnap?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">chuttersnap</a> on <a class="ae ly" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="df80" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">熊猫</strong>是的。我相信任何有经验的数据科学家都会同意我的观点。在你所有幻想的机器学习之前，你必须彻底探索、清理和处理你的数据。为此，你需要熊猫。</p><p id="6b18" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">本指南假设您已经掌握了一些非常基础的 python 知识，并且已经安装了 python。如果没有，就在这里 安装<a class="ae ly" href="https://realpython.com/installing-python/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu">。我们也在<a class="ae ly" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> Jupyter 笔记本</strong> </a>上跑熊猫。确保你有它。我将很快向你介绍熊猫的基本知识。<br/>努力跟上。</strong></a></p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="11bf" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">熊猫</h1><p id="88d8" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">Pandas 官方代表“Python 数据分析库”，<strong class="kw iu">当今数据科学家使用的</strong>最重要的 Python 工具。</p><h1 id="f03c" class="mg mh it bd mi mj nd ml mm mn ne mp mq jz nf ka ms kc ng kd mu kf nh kg mw mx bi translated">什么是熊猫，它是如何工作的？</h1><p id="02fe" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">Pandas 是一个开源的 Python 库，它允许用户以极其高效的方式探索、操作和可视化数据。它实际上是 Python 中的 Microsoft Excel。</p><h1 id="145c" class="mg mh it bd mi mj nd ml mm mn ne mp mq jz nf ka ms kc ng kd mu kf nh kg mw mx bi translated">熊猫为什么这么受欢迎？</h1><ul class=""><li id="0efc" class="ni nj it kw b kx my la mz ld nk lh nl ll nm lp nn no np nq bi translated">它很容易阅读和学习</li><li id="65e4" class="ni nj it kw b kx nr la ns ld nt lh nu ll nv lp nn no np nq bi translated">它速度极快，功能强大</li><li id="c24f" class="ni nj it kw b kx nr la ns ld nt lh nu ll nv lp nn no np nq bi translated">它与其他可视化库集成得很好</li><li id="e8c4" class="ni nj it kw b kx nr la ns ld nt lh nu ll nv lp nn no np nq bi translated">它同时是黑人、白人和亚洲人</li></ul><h1 id="de51" class="mg mh it bd mi mj nd ml mm mn ne mp mq jz nf ka ms kc ng kd mu kf nh kg mw mx bi translated">熊猫带什么样的数据？</h1><p id="f311" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">熊猫可以接受各种各样的数据，最常见的是 csv、excel、sql 甚至一个网页。</p><h1 id="ff28" class="mg mh it bd mi mj nd ml mm mn ne mp mq jz nf ka ms kc ng kd mu kf nh kg mw mx bi translated">我如何安装熊猫？</h1><p id="8d3e" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">如果你有<a class="ae ly" href="https://www.anaconda.com/" rel="noopener ugc nofollow" target="_blank">蟒蛇</a>，那么</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="9b7c" class="ob mh it nx b gy oc od l oe of">conda install pandas</span></pre><p id="6928" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">应该能行。如果没有，请使用</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="d9e9" class="ob mh it nx b gy oc od l oe of">pip install pandas</span></pre><p id="9478" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">既然你知道自己会陷入什么样的境地。<br/>让我们直接开始吧。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lq lr l"/></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="294a" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">导入</h1><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="a36b" class="ob mh it nx b gy oc od l oe of">import pandas as pd<br/>import numpy as np</span></pre><h1 id="8ed0" class="mg mh it bd mi mj nd ml mm mn ne mp mq jz nf ka ms kc ng kd mu kf nh kg mw mx bi translated">数据帧和系列</h1><p id="c4f3" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated"><strong class="kw iu">系列</strong>像列，而<strong class="kw iu">数据帧</strong>是你在熊猫中完全展开的表格。你将会经常接触到这两个部分。所以要习惯它们。</p><p id="cd44" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">从 a: </strong>创建您自己的系列</p><ul class=""><li id="a1c0" class="ni nj it kw b kx ky la lb ld og lh oh ll oi lp nn no np nq bi translated">目录</li></ul><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="4530" class="ob mh it nx b gy oc od l oe of">test_list = [100,200,300]<br/>pd.Series(data=test_list)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/639e72da23a66558960293506ea46f59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wmsb2pYg8xs3KJrRXba0Dw.png"/></div></div></figure><ul class=""><li id="cacc" class="ni nj it kw b kx ky la lb ld og lh oh ll oi lp nn no np nq bi translated">词典</li></ul><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="13f2" class="ob mh it nx b gy oc od l oe of">dictionary = {‘a’:100,’b’:200,’c’:300}<br/>pd.Series(data=dictionary)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/b9bf640fff2ce2fa1510263c2496fa36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B-2utxojR2eAW9UxSsSYfQ.png"/></div></div></figure><p id="e46d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">从 a: </strong>创建您自己的数据框架</p><ul class=""><li id="c612" class="ni nj it kw b kx ky la lb ld og lh oh ll oi lp nn no np nq bi translated">目录</li></ul><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="fa1c" class="ob mh it nx b gy oc od l oe of">data = [[‘thomas’, 100], [‘nicholas’, 200], [‘danson’, 300]] <br/>df = pd.DataFrame(data, columns = [‘Name’, ‘Age’])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/1ba015468e85daa137b49ce780b41f89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TfvjfB8WPM0TETx31toy0Q.png"/></div></div></figure><ul class=""><li id="158f" class="ni nj it kw b kx ky la lb ld og lh oh ll oi lp nn no np nq bi translated">词典</li></ul><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="d831" class="ob mh it nx b gy oc od l oe of">data = {‘Name’:[‘thomas’, ‘nicholas’, ‘danson’, ‘jack’], ‘Age’:[100, 200, 300, 400]} <br/>df = pd.DataFrame(data)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/27325c7f8b84958449fca8570e4c3281.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fMuht4J80PPN2j5tkcxiag.png"/></div></div></figure><p id="6c86" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">通常，我们不会创建自己的数据框架。取而代之的是，我们通过导入数据到一个数据框架中来研究、操作和可视化熊猫中的数据。<br/>熊猫可以阅读多种格式，但常用的是 csv。这里是熊猫可以读取的文件类型的官方列表。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/e767af25374c6809d8d977b1e974d24a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dOEhkrAfRXdskQPhrHrnvg.png"/></div></div></figure><p id="971c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将在这里导入<a class="ae ly" href="https://www.kaggle.com/c/titanic/data" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu">泰坦尼克号数据集</strong> </a>。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="3557" class="ob mh it nx b gy oc od l oe of">df = pd.read_csv(filepath)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/c1f9ed88382a971d592b1943dd4cccd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HlYbxItWpsTE5hnjMfOTxg.png"/></div></div></figure><p id="32d8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该数据集的主要目的是研究影响泰坦尼克号上人员生存能力的<strong class="kw iu">因素。让我们通过研究数据来找出确切的答案。</strong></p><p id="7480" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">导入数据后，您想体验一下。下面是一些基本操作:</p><h1 id="5be0" class="mg mh it bd mi mj nd ml mm mn ne mp mq jz nf ka ms kc ng kd mu kf nh kg mw mx bi translated">数据集摘要</h1><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="acc1" class="ob mh it nx b gy oc od l oe of">df.info()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/0145a27365e210d619f1a5201cc63db7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cBwkmyRzgBjiL3KsScXJVA.png"/></div></div></figure><p id="ebc5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">仅通过这个命令，我们就可以知道行数和列数、列的数据类型以及它们是否存在空值。</p><h1 id="2a99" class="mg mh it bd mi mj nd ml mm mn ne mp mq jz nf ka ms kc ng kd mu kf nh kg mw mx bi translated">每列的唯一值</h1><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="73c1" class="ob mh it nx b gy oc od l oe of">df.unique()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/7c479744099daae395f040f1aaea7de5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L45aRqLw1O9VATnUjDj5Kw.png"/></div></div></figure><p id="db90" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">df.unique()命令允许我们更好地理解每一列的含义。看着<strong class="kw iu">幸存的</strong>和<strong class="kw iu">性</strong>列，他们只有 2 个唯一值。这通常意味着它们是分类列，在这种情况下，应该是真或假的幸存和男性或女性的性别。</p><p id="9b80" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们还可以观察到其他分类列，如<strong class="kw iu">abowed</strong>、<strong class="kw iu"> Pclass </strong>等等。我们真的说不清<strong class="kw iu"> Pclass </strong>代表什么，让我们多探索一下。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo lr l"/></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="fcc1" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">数据选择</h1><p id="ce15" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">在熊猫中选择你想要的数据是极其容易的。<br/>假设我们现在只想查看<strong class="kw iu"> Pclass </strong>列。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="1b4b" class="ob mh it nx b gy oc od l oe of">df[‘Pclass’]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/1463d9385930f5cf5a089f83ea3f6471.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0vffkwf57wqO0-ToXwqfBQ.png"/></div></div></figure><p id="4be5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们观察到，这 3 个唯一值实际上是 1、2 和 3，分别代表 1 级、2 级和 3 级。我们现在明白了。</p><p id="223f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们也可以一次选择多个列。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="f8c4" class="ob mh it nx b gy oc od l oe of">df[[‘Pclass’,’Sex’]]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/a9d64e02b4a2a6600aa56866d1edec5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mRrhiIzCkVXfwab1pgbQag.png"/></div></div></figure><p id="08ce" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这个命令对于包含/排除您需要/不需要的列非常有用。</p><p id="412f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">由于我们不需要<strong class="kw iu">姓名</strong>、<strong class="kw iu">乘客 id </strong>和<strong class="kw iu">车票</strong>，因为它们在决定乘客是否幸存时根本不起作用，所以我们在数据集中排除这些列，这可以通过两种方式完成。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="9634" class="ob mh it nx b gy oc od l oe of">df= df[[‘Survived’,’Pclass’,’Sex’,’Age’,’SibSp’,’Parch’,’Fare’,’Cabin’,’Embarked’]]</span><span id="39b6" class="ob mh it nx b gy oq od l oe of">or</span><span id="c2a5" class="ob mh it nx b gy oq od l oe of">df.drop(['PassengerId', 'Name', 'Ticket'], axis = 1, inplace=True)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/605e3b39e30acbc00798e0684d8ae19a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vwNqx-3V8_XBhURMUk08Ng.png"/></div></div></figure><p id="bf78" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">inplace=True 参数告诉 Pandas 将您想要做的事情自动分配给原始变量本身，在本例中是 df。</p><p id="be00" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们也可以通过<strong class="kw iu">行</strong>选择数据。假设我们想要调查数据集的第 300 到 310 行。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="c294" class="ob mh it nx b gy oc od l oe of">df.iloc[500:511]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/e72e2eee4bc8b03b8f06e5a200cd72af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rg0XNhbfpbSfZpM0m_8sLw.png"/></div></div></figure><p id="5fc0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">它的工作原理就像一个 python 列表，其中区间的第一个数字(500)是<strong class="kw iu">包含</strong>，区间的最后一个数字(511)是<strong class="kw iu">不包含</strong>。</p><h1 id="c211" class="mg mh it bd mi mj nd ml mm mn ne mp mq jz nf ka ms kc ng kd mu kf nh kg mw mx bi translated">条件选择</h1><p id="1305" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">我们也可以通过数据<strong class="kw iu">过滤</strong>。假设我们只想观察男性乘客的数据。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="2e7d" class="ob mh it nx b gy oc od l oe of">df[df['Sex'] == 'male']</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/e5eb48c37a9d8730705cf4c0c59488fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oT35i1NQhD45bVWTf3mZEA.png"/></div></div></figure><p id="17e8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">命令<em class="os">df[' Sex ']= ' male '</em>将为每一行返回一个布尔值。在它上面嵌套一个 df[]将返回男性乘客的整个数据集。这就是熊猫的工作方式。</p><p id="b6da" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这个命令对于未来可视化数据非常强大。让我们把到目前为止所学的结合起来。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="8cee" class="ob mh it nx b gy oc od l oe of">df[[‘Pclass’,’Sex’]][df[‘Sex’] == ‘male’].iloc[500:511]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/3a29650bad54ecfaa0d7338baf3dddc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8ML_WFPqYsx5f4oqHOllZg.png"/></div></div></figure><p id="cdde" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用该命令，我们只显示男性乘客的<strong class="kw iu"> Pclass </strong>和<strong class="kw iu"> Sex </strong>列的<strong class="kw iu">第 500 到 510 行</strong>。试着使用这些命令，以便更好地使用它们。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="95f8" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">聚合函数</h1><p id="65ab" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">既然我们知道如何浏览数据，是时候对其进行一些<strong class="kw iu">聚合</strong>了。首先，我们可以使用 describe 函数找出数据集的分布、最大值、最小值和有用的统计数据。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="cdaa" class="ob mh it nx b gy oc od l oe of">df.describe()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/28b3ffefd7207087260e2150ff5fcae9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RPxPR8hBGiGoe1w9sLjzCA.png"/></div></div></figure><p id="9a2a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，这些数学命令中仅包含<strong class="kw iu">数字</strong>列。其他列将被自动排除。</p><p id="0c59" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们还可以运行以下命令来返回各自的聚合，请注意，聚合也可以通过条件选择来运行。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="e757" class="ob mh it nx b gy oc od l oe of">df.max()<br/>df[‘Pclass’].min()<br/>df.iloc[100:151].mean()<br/>df.median()<br/>df.count()<br/>df.std()</span></pre><p id="e8f1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们还可以对这些列做一个相关矩阵，找出它们之间的关系。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="b35f" class="ob mh it nx b gy oc od l oe of">df.corr()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/f4ef7b98af747b7d80af8d996a8aa2bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7A918gSE03NRzzM0Aw3vIQ.png"/></div></div></figure><p id="9593" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">看起来对乘客生存能力有贡献的前 3 个数字列是<strong class="kw iu">票价</strong>、<strong class="kw iu">p 等级</strong>和<strong class="kw iu"> Parch </strong>，因为它们相对于<strong class="kw iu">幸存</strong>列拥有最高的绝对值。</p><p id="8531" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们还可以查看每列的<strong class="kw iu">分布</strong>。在表格格式中，更容易解释<strong class="kw iu">分类</strong>列的分布。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="45c2" class="ob mh it nx b gy oc od l oe of">df[‘Sex’].value_counts()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/77e039e3d36b1a20ea4f23038fe08a60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L6vd4m4OH7BTuh3xcJgNAA.png"/></div></div></figure><p id="2cdd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">看起来我们的乘客都是男性。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="8cb5" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">数据清理</h1><p id="d5e7" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">如果你已经跟上了，你现在已经对我们的数据有了很好的感觉。你想做一些汇总/可视化来展示你的发现。在那之前，你通常需要在做任何事情之前清理你的数据集。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ou lr l"/></div></figure><p id="7796" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您的数据集通常包含脏数据，如:</p><ul class=""><li id="f54d" class="ni nj it kw b kx ky la lb ld og lh oh ll oi lp nn no np nq bi translated">空值</li><li id="45ae" class="ni nj it kw b kx nr la ns ld nt lh nu ll nv lp nn no np nq bi translated">空值</li><li id="22b9" class="ni nj it kw b kx nr la ns ld nt lh nu ll nv lp nn no np nq bi translated">时间戳不正确</li><li id="5701" class="ni nj it kw b kx nr la ns ld nt lh nu ll nv lp nn no np nq bi translated">更多更多</li></ul><p id="9da3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当我们使用命令 df.info()时，我们已经知道是否有任何空值。这里还有一个:</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="47e2" class="ob mh it nx b gy oc od l oe of">df.isnull().sum()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/6be644939474b66736ea243c639cf9c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U0nphxe1S_6kOafuDTnN8Q.png"/></div></div></figure><p id="525a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以看到在<strong class="kw iu">年龄</strong>、<strong class="kw iu">舱</strong>和<strong class="kw iu">上船</strong>列中有空值。当这些特定列中的值为空时，您可以看到这些行的样子。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="3d07" class="ob mh it nx b gy oc od l oe of">df[df[‘Age’].isnull()]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/c7e0b537cfe7c0047afd511662a71608.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Alun_LR1CJH1_tq9rqFi9A.png"/></div></div></figure><p id="bb50" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">由于某种原因，除了<strong class="kw iu">年龄</strong>和<strong class="kw iu">舱室</strong>之外的所有其他数据都在这里。<br/>空值的处理完全取决于你。为了简单起见，我们将<strong class="kw iu">删除</strong>所有包含空值的行。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="4a52" class="ob mh it nx b gy oc od l oe of">df.dropna(inplace=True)</span><span id="3927" class="ob mh it nx b gy oq od l oe of">or</span><span id="0c62" class="ob mh it nx b gy oq od l oe of">#df.dropna(axis=1, inplace=True) to drop columns with null values</span></pre><p id="3e8f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果我们愿意，我们也可以用一个值替换所有的空值。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="9eea" class="ob mh it nx b gy oc od l oe of">df[‘Age’].fillna(df[‘Age’].mean())</span></pre><p id="8d7f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">此命令用年龄列的平均值替换年龄列中的所有空值。在某些情况下，这是处理空值的好方法，因为它不会扰乱值的偏斜度。</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="cd06" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">分组依据</h1><p id="2af2" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">所以现在你的数据是干净的。我们可以开始通过小组探索数据。假设我们想要找出每个 Pclass 中一名乘客的平均值/最大值/最小值<br/> ( <strong class="kw iu">在此处插入数字列</strong>)。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="d316" class="ob mh it nx b gy oc od l oe of">df.groupby(‘Pclass’).mean()<br/>or<br/>df.groupby('Pclass')['Age'].mean()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/e0eddfb18725c29119dd318f11b959f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oOX8YOWIyhU8n1PfVOfo4Q.png"/></div></div></figure><p id="d5e6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这告诉了我们很多东西。首先，它告诉我们每个等级的平均年龄和票价(T21)。看起来头等舱的票价是最贵的，而且是最老的。有道理。</p><p id="8a41" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们也可以对组进行分层。假设现在我们还想知道每个<strong class="kw iu">p 阶级</strong>的平均<strong class="kw iu">年龄</strong>和<strong class="kw iu">费用</strong>对于<strong class="kw iu">男性</strong>和<strong class="kw iu">女性</strong>。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="7b5b" class="ob mh it nx b gy oc od l oe of">df.groupby([‘Pclass’,’Sex’]).mean()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/cd3757b0daa899a40d688a5ba456e4ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yFedSMYcHvN9DvAcrsrwNA.png"/></div></div></figure><p id="cee7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们只需通过 GroupBy 函数传递组列表就可以做到这一点。我们可以根据这些复杂的分组开始分析并作出某些假设。我能做的一个观察是，一等舱<strong class="kw iu">的<strong class="kw iu">女性</strong>的平均<strong class="kw iu">票价</strong>是所有乘客中最高的，他们也有最高的<strong class="kw iu">生存能力</strong>。另一方面，三等舱<br/><strong class="kw iu"/>中<strong class="kw iu">雄</strong>的平均<strong class="kw iu">票价</strong>最低，生存能力<strong class="kw iu">最低</strong>。</strong></p><p id="6ed6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我想钱确实能拯救生命。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oy lr l"/></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="c78b" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">连接和合并</h1><p id="d0fc" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">经过一些分析后，我们发现需要在数据中添加一些行/列。我们可以通过连接和合并数据帧轻松做到这一点。<br/>我们通过以下方式添加行:</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="6605" class="ob mh it nx b gy oc od l oe of">first_5 = df.head()<br/>last_5 = df[178:]<br/>combined = pd.concat([first_5,last_5], axis = 0)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/10992e9e0bf2bff8c9ca87234a374201.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uO_4A9iDiWNlLVW9SUvxhA.png"/></div></div></figure><p id="e76b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，连接时，数据帧之间的列必须匹配。它就像 SQL 联合一样工作。</p><p id="01e2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果我们想通过连接来添加列。我们合并了。</p><p id="d3d2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">假设我们有一个包含乘客体重和身高的外部数据集。为此，我将为 3 名乘客创建自己的数据集。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="d41a" class="ob mh it nx b gy oc od l oe of">data = [[‘Braund, Mr. Owen Harris’, 80, 177.0], [‘Heikkinen, Miss. Laina’, 78, 180.0], [‘Montvila, Rev. Juozas’, 87, 165.0]] <br/>df2 = pd.DataFrame(data, columns = [‘Name’, ‘weight’, ‘height’])</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/96d2852b1ee206eccf9d15e539a29a5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DHOuPF-pyBPSOSznhBgRng.png"/></div></div></figure><p id="18e9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，我们想将体重和身高数据添加到我们的泰坦尼克号数据集中。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="db4b" class="ob mh it nx b gy oc od l oe of">df3 = pd.merge(df,df2, how=’right’, on=’Name’)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/38d7f7af8986e3d2e935d70355f10583.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TLtEX_FmHJtwyItnn-qKMw.png"/></div></div></figure><p id="1965" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">merge 的工作方式与 SQL joins 完全一样，使用 left、right、outer 和 inner 方法。我在这里使用了 right join 来只显示记录了体重和身高的乘客。如果我们使用左连接，结果将显示完整的 titanic 数据集，其中没有身高和体重。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="84d0" class="ob mh it nx b gy oc od l oe of">df3 = pd.merge(df,df2, how=’left’, on=’Name’)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/dde42b9a18ba41ab8057a0ed175b30ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IlE1WolYblgxyhqd41F1kQ.png"/></div></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="5c10" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">数据操作</h1><p id="1623" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">我们现在进入了更高级的领域，我们希望对数据中的值进行大量的操作。我们可能想要添加我们自己的自定义列，更改值的类型，甚至在数据中实现复杂的函数。</p><h1 id="57e0" class="mg mh it bd mi mj nd ml mm mn ne mp mq jz nf ka ms kc ng kd mu kf nh kg mw mx bi translated">数据类型</h1><p id="78cf" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">这是一个相当直接的操作。有时我们可能想改变数据的类型，为其他函数提供可能性。一个很好的例子是将一个<strong class="kw iu">字符串</strong>的‘4000’改为一个<strong class="kw iu">整数</strong>‘4000’。</p><p id="11d7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们把现在浮点型的重量数据改成整数。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="4918" class="ob mh it nx b gy oc od l oe of">df2[‘weight’].astype(int)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/392e17d7d3cf61280252bade45f31cd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FLTS33oqPP0F8dto7oFJfQ.png"/></div></div></figure><p id="b16c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，<strong class="kw iu"> astype() </strong>函数遍历数据的每一行，并尝试将数据类型更改为您提到的任何类型。因此，每种类型的数据都有一定的规则可循。</p><p id="33f3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">例如:</p><ul class=""><li id="40fb" class="ni nj it kw b kx ky la lb ld og lh oh ll oi lp nn no np nq bi translated">数据不能为 null 或空</li><li id="c3fc" class="ni nj it kw b kx nr la ns ld nt lh nu ll nv lp nn no np nq bi translated">当将浮点数改为整数时，小数必须是. 0 形式</li></ul><p id="31a8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，<strong class="kw iu"> astype() </strong>函数有时会很棘手。</p><h1 id="6022" class="mg mh it bd mi mj nd ml mm mn ne mp mq jz nf ka ms kc ng kd mu kf nh kg mw mx bi translated">应用功能</h1><p id="f9e9" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">应用功能是熊猫最强大的功能之一。<br/>它让你以任何你想要的形式操作数据。以下是方法。</p><p id="c1f0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">步骤 1:定义一个函数<br/> </strong>假设我们想要将<strong class="kw iu"> Pclass </strong>重命名为它们的实际名称。<br/> 1 =一级<br/> 2 =二级<br/> 3 =三级</p><p id="33c6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们首先定义一个函数。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="5a8a" class="ob mh it nx b gy oc od l oe of">def pclass_name(x):<br/>    if x == 1:<br/>        x = '1st Class'<br/>    if x == 2:<br/>        x = '2nd Class'<br/>    if x == 3:<br/>        x = '3rd Class'<br/>    return x</span></pre><p id="8d2d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">步骤 2:应用函数<br/> </strong>然后我们可以将该函数应用于<strong class="kw iu"> Pclass </strong>列的每个值。<br/>该过程将通过函数传递<strong class="kw iu"> Pclass </strong>列的每条记录。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="9b6d" class="ob mh it nx b gy oc od l oe of">df3[‘Pclass’] = df3[‘Pclass’].apply(lambda x: pclass_name(x))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/29967fd0964020aac88cdad3bd7081de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VgS5ixftsUQmcqXo4p4zsQ.png"/></div></div></figure><p id="7722" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu"> Pclass </strong>列的记录现在已经更改。如何处理你的数据完全取决于你的想象力。这里是你发挥创造力的地方。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oz lr l"/></div></figure><h1 id="e74a" class="mg mh it bd mi mj nd ml mm mn ne mp mq jz nf ka ms kc ng kd mu kf nh kg mw mx bi translated">自定义列</h1><p id="1079" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">有时，我们希望创建自定义列，以便更好地解释我们的数据。例如，让我们用乘客的身体质量指数创建一个列。</p><p id="19e0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">身体质量指数的公式是:</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="f2fa" class="ob mh it nx b gy oc od l oe of">weight(kg) / height²(m)</span></pre><p id="9a9d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，让我们先把我们的身高值从<strong class="kw iu">厘米</strong>转换成<strong class="kw iu">米</strong>和<strong class="kw iu">平方</strong>的值。我们将使用我们刚刚学过的 apply 函数来实现这一点。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="45de" class="ob mh it nx b gy oc od l oe of">def convert_to_bmi(x):<br/> x = (x/100)**2<br/> return x</span><span id="e229" class="ob mh it nx b gy oq od l oe of">df4[‘height’] = df4[‘height’].apply(lambda x: convert_to_bmi(x))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/d46b63889dc4d831945b976641686fed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qJHqrqQ5Q3j5iI8XYn3xLA.png"/></div></div></figure><p id="a6b2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后，我们创建一个新列，其中的值是体重除以身高。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="0714" class="ob mh it nx b gy oc od l oe of">df4[‘BMI’] = df4[‘weight’]/df4[‘height’]</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/d5d4824bc6a8fcd78808e3f87467c1a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O2x7nnraFR7aYbhZVBaqwg.png"/></div></div></figure><p id="2e2e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果我们有所有乘客的体重指数，我们就可以用身体质量指数得出进一步的结论，但我不会深入研究。你明白了。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lq lr l"/></div></figure></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="ed43" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">定稿和导出</h1><p id="bed7" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">完成所有工作后，您可能希望对列进行排序和重命名。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="c51f" class="ob mh it nx b gy oc od l oe of">df3.rename(columns={'BMI':'Body_Mass_Index','PassengerId':'PassengerNo'}, inplace = True)</span><span id="547e" class="ob mh it nx b gy oq od l oe of">df3 = df3.sort_values('Body_Mass_Index')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/5c52d52204a5ff1d795cb4700e260ac1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z68xBZCT7-xg2oSl5RU4jA.png"/></div></div></figure><p id="43a6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将身体质量指数重新命名为它的全名，并在这里按身体质量指数排序。<br/>注意，排序后，索引不变，这样信息不会丢失。</p><p id="68a5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后但同样重要的是，<br/>我们可以将我们的数据导出为多种格式(参考顶部的列表)。<br/>让我们将数据导出为 csv 文件。</p><pre class="kj kk kl km gt nw nx ny nz aw oa bi"><span id="a7db" class="ob mh it nx b gy oc od l oe of">df3.to_csv(filepath)</span></pre></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="79a9" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">结论</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pa lr l"/></div></figure><p id="8417" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你已经走了这么远，给自己一点鼓励。<br/>你已经<strong class="kw iu">正式</strong>掌握了熊猫的基本知识，<br/>每个数据科学家的必备工具。</p><p id="3f87" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">今天你所学的<strong class="kw iu">知识</strong>:</p><ul class=""><li id="5851" class="ni nj it kw b kx ky la lb ld og lh oh ll oi lp nn no np nq bi translated">创建和导入数据框架</li><li id="9584" class="ni nj it kw b kx nr la ns ld nt lh nu ll nv lp nn no np nq bi translated">数据帧的汇总功能</li><li id="be11" class="ni nj it kw b kx nr la ns ld nt lh nu ll nv lp nn no np nq bi translated">在数据框架中导航</li><li id="cbc4" class="ni nj it kw b kx nr la ns ld nt lh nu ll nv lp nn no np nq bi translated">价值的聚合</li><li id="df29" class="ni nj it kw b kx nr la ns ld nt lh nu ll nv lp nn no np nq bi translated">清理数据</li><li id="06e4" class="ni nj it kw b kx nr la ns ld nt lh nu ll nv lp nn no np nq bi translated">分组依据</li><li id="7eab" class="ni nj it kw b kx nr la ns ld nt lh nu ll nv lp nn no np nq bi translated">连接和合并</li><li id="5f5e" class="ni nj it kw b kx nr la ns ld nt lh nu ll nv lp nn no np nq bi translated">数据操作(***应用功能***)</li><li id="2888" class="ni nj it kw b kx nr la ns ld nt lh nu ll nv lp nn no np nq bi translated">定稿和导出</li></ul><p id="0d99" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让它留在你的脑海里，因为我发誓你以后会经常用到它。<br/>一如既往，我引用一句话作为结束。</p><blockquote class="pb pc pd"><p id="18b3" class="ku kv os kw b kx ky ju kz la lb jx lc pe le lf lg pf li lj lk pg lm ln lo lp im bi translated">你可以有没有信息的数据，但你不能有没有数据的信息——丹尼尔·凯斯·莫兰</p></blockquote></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h2 id="bc43" class="ob mh it bd mi ph pi dn mm pj pk dp mq ld pl pm ms lh pn po mu ll pp pq mw pr bi translated">订阅我的时事通讯，保持联系。</h2><p id="2410" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">也可以通过<a class="ae ly" href="https://nickefy.medium.com/membership" rel="noopener"> <strong class="kw iu">我的链接</strong> </a>注册一个中等会员来支持我。你将能够从我和其他不可思议的作家那里读到无限量的故事！</p><p id="e5a2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我正在撰写更多关于数据行业的故事、文章和指南。你绝对可以期待更多这样的帖子。与此同时，你可以随时查看我的其他<a class="ae ly" href="https://medium.com/@nickmydata" rel="noopener"> <strong class="kw iu">文章</strong> </a>来暂时填补你对数据的渴望。</p><p id="600e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu"> <em class="os">感谢</em> </strong> <em class="os">阅读！如果你想和我取得联系，请随时通过 nickmydata@gmail.com 联系我或者我的</em> <a class="ae ly" href="https://www.linkedin.com/in/nickefy/" rel="noopener ugc nofollow" target="_blank"> <em class="os"> LinkedIn 个人资料</em> </a> <em class="os">。也可以在我的</em><a class="ae ly" href="https://github.com/nickefy" rel="noopener ugc nofollow" target="_blank"><em class="os">Github</em></a><em class="os">中查看之前写的代码。</em></p></div></div>    
</body>
</html>