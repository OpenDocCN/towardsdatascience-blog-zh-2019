<html>
<head>
<title>Determine if Two Distributions are Significantly Different using the Mann-Whitney U Test</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Mann-Whitney U 检验确定两个分布是否显著不同</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/determine-if-two-distributions-are-significantly-different-using-the-mann-whitney-u-test-1f79aa249ffb?source=collection_archive---------14-----------------------#2019-11-21">https://towardsdatascience.com/determine-if-two-distributions-are-significantly-different-using-the-mann-whitney-u-test-1f79aa249ffb?source=collection_archive---------14-----------------------#2019-11-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><h1 id="a526" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">使用 Python 的速成课程</h1><p id="19a4" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">如果您在日常工作中使用统计学，很可能在某个时候会遇到分布比较问题。比较分布以确定它们是否不同可以带来许多有价值的见解；特别是，如果与数据集相关联的不同属性导致不同的(统计上显著的)结果。</p><p id="bb83" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">为了更好的说明这个问题，我们来做一个例子。我们将从通过 UCI 机器学习知识库获得的'<a class="ae lr" href="https://archive.ics.uci.edu/ml/datasets/Adult" rel="noopener ugc nofollow" target="_blank">成人'数据集</a>中提取数据。这个存储库包含来自 1994 年美国人口普查的数据样本，包括个人工资(&gt; $50K，&lt;= 50K)、年龄、教育、婚姻状况、种族和性别等信息。</p><figure class="ls lt lu lv gt lw"><div class="bz fp l di"><div class="lx ly l"/></div></figure><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi lz"><img src="../Images/9b8c7d0d2f1386a9d3dddac368d39ddc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WC_DdlZyQXaGVyk1"/></div></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk"><em class="mk">Snapshot of the UCI data set, uploaded directly into a pandas dataframe.</em></figcaption></figure><p id="a6f2" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">现在我们有了一些数据，让我们把它形象化。首先，我们使用 matplotlib hist()函数查看美国人口的年龄分布:</p><figure class="ls lt lu lv gt lw"><div class="bz fp l di"><div class="lx ly l"/></div></figure><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/7e983d321a03f00effe90b5fc2b21424.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/0*1NX2YoToTCcbcBBH"/></div></figure><p id="7780" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">根据上面的直方图，大部分样本集中在 30 至 40 岁之间，在 35 岁左右达到高峰，之后开始下降。</p><p id="2edd" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">但是，当我们根据收入水平对数据进行分组时，年龄分布是如何变化的呢？让我们再次可视化分布，这一次将数据分成&gt; 50K 美元和&lt;=$50K categories:</p><figure class="ls lt lu lv gt lw"><div class="bz fp l di"><div class="lx ly l"/></div></figure><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/d2e8548b0a7caa02e02b9463696cceb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/0*e8Q0y1Wg-NXB01mc"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk"><em class="mk">Age Distribution, subset by salary level (&lt;=$50K, &gt;$50K)</em></figcaption></figure><p id="c41a" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">As you can see in the visual above, the distribution changes when we subset the data by salary level. For the population making less than $50K a year, the distribution peaks around 25 years of age. For the population making greater than $50K a year, the peak occurs around 45 years of age. This intuitively makes sense, as people earlier on in their career make less money than those later on, who are more established.</p><p id="4684" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">Now that we’ve graphed the different age distributions based on salary, is there a way to statistically prove that the two differ? Yes — using the Mann-Whitney U Test.</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="5687" class="jq jr it bd js jt mu jv jw jx mv jz ka kb mw kd ke kf mx kh ki kj my kl km kn bi translated">So, what does the Mann-Whitney U Test do exactly?</h1><p id="aaff" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">The Mann-Whitney U Test is a null hypothesis test, used to detect differences between two independent data sets. The test is specifically for non-parametric distributions, which do not assume a specific distribution for a set of data. Because of this, the Mann-Whitney U Test can be applied to any distribution, whether it is Gaussian or not.</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/a0264f592b3d1e754bd89433f9a81e35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/0*dFLHEEec5c4lA9QI"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk"><em class="mk">Example of a non-parametric distribution, which doesn’t follow a standard Gaussian distribution (see line as example). Image courtesy of </em><a class="ae lr" href="https://www.statistixl.com/features/nonparametric-tests/" rel="noopener ugc nofollow" target="_blank"><em class="mk">https://www.statistixl.com/features/nonparametric-tests/</em></a><em class="mk"> .</em></figcaption></figure><p id="21c8" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">Specifically, the null hypothesis of the Mann-Whitney U Test states that the distributions of two data sets are identical. If the null hypothesis is correct, there is a 50 percent chance that an arbitrarily selected value in one distribution is greater than another arbitrarily selected value in the second distribution (<a class="ae lr" href="https://www.graphpad.com/guides/prism/7/statistics/how_the_mann-whitney_test_works.htm?toc=0&amp;printWindow" rel="noopener ugc nofollow" target="_blank"> 2 </a>。</p><p id="5012" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">与 Mann-Whitney U 检验相关的检验统计量定义为 U，其中 U 是 U1 和 U2 两个值中较小的一个，通过以下方程组(<a class="ae lr" href="http://sphweb.bumc.bu.edu/otlt/mph-modules/bs/bs704_nonparametric/BS704_Nonparametric4.html" rel="noopener ugc nofollow" target="_blank"> 3 </a>)定义:</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi na"><img src="../Images/27e8821af5b380a1e4ed83bca6af4f88.png" data-original-src="https://miro.medium.com/v2/resize:fit:484/0*NNwVxyvrILXIHVi0"/></div></figure><p id="d195" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">其中 R1 指的是第一组的等级总和，而 R2 指的是第二组的等级总和。n1 和 n2 分别指第一组和第二组的样本总体。</p><p id="15bd" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated"><strong class="kq iu"> <em class="nb">有关如何计算 U 的分步说明，请查看以下链接，该链接涵盖非参数测试，可通过波士顿大学公共卫生学院获得:</em></strong><a class="ae lr" href="http://sphweb.bumc.bu.edu/otlt/mph-modules/bs/bs704_nonparametric/BS704_Nonparametric4.html" rel="noopener ugc nofollow" target="_blank"><strong class="kq iu"><em class="nb">http://SPH web . bumc . bu . edu/otlt/mph-modules/bs/bs 704 _ nonparametric/bs 704 _ nonparametric 4 . html</em></strong></a></p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="8bcd" class="jq jr it bd js jt mu jv jw jx mv jz ka kb mw kd ke kf mx kh ki kj my kl km kn bi translated">对数据应用曼-惠特尼 U 检验</h1><p id="1893" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">对分布应用 Mann-Whitney U 检验很简单，只需使用 scipy.stats 包中的 mannwhitneyu()函数。我们应用代码，比较两种分布，如下所示:</p><figure class="ls lt lu lv gt lw"><div class="bz fp l di"><div class="lx ly l"/></div></figure><p id="4b70" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">我们收到以下测试输出:</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/dbeaec0ad1e0df932348bc25d6fae4b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/0*6rBqMjIcJyXj4FpF"/></div></figure><p id="41b7" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">第一个输出，即 U 统计量，在上一节中被定义为 Mann-Whitney U 检验的检验统计量 U。使用<a class="ae lr" href="http://ocw.umb.edu/psychology/psych-270/other-materials/RelativeResourceManager.pdf" rel="noopener ugc nofollow" target="_blank">双尾测试表</a>解释 U 统计量，该表包含 U 的临界值。为了拒绝α=0.05 的零假设，从测试中获得的 U 必须低于测试表中的 U 临界值。</p><p id="bf81" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">当两个样本量都很大时，u 往往很大。这就解释了为什么本例中的 u 统计量(61203011.5)如此之大。</p><p id="a3ff" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">第二个 Python 输出是与测试相关联的 p 值。p 值越低，反对零假设的证据越强。根据一般经验，当 p 值低于 0.05 时，可以拒绝零假设。这个具体例子的 p 值非常低，以至于记录为 0，因此我们可以明确拒绝零假设。这一结果从统计学意义上证实了年收入超过 5 万美元的人的年龄分布不同于年收入低于 5 万美元的人的年龄分布。</p><p id="a32c" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">我的曼-惠特尼 U 检验教程到此结束。本教程的完整 Python 代码可以在下面的 Github repo 中找到:<a class="ae lr" href="https://github.com/kperry2215/mann_whitney_comparison" rel="noopener ugc nofollow" target="_blank"><strong class="kq iu"><em class="nb">【https://github.com/kperry2215/mann_whitney_comparison</em></strong></a></p><p id="720e" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated"><strong class="kq iu"> <em class="nb">另外，看看我的一些其他数据科学教程:</em> </strong></p><div class="nc nd gp gr ne nf"><a href="https://techrando.com/2019/10/21/automate-your-ml-model-tuning-and-selection-a-review-of-different-python-automl-packages/" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd iu gy z fp nk fr fs nl fu fw is bi translated">使用 Python - Tech Rando 中的 AutoML 自动调整和选择 ML 模型</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">在同一数据集上测试不同的 ML 方法以评估模型性能可能是一项单调乏味的任务。此外…</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">techrando.com</p></div></div><div class="no l"><div class="np l nq nr ns no nt me nf"/></div></div></a></div><div class="nc nd gp gr ne nf"><a href="https://techrando.com/2019/08/23/unsupervised-machine-learning-approaches-for-outlier-detection-in-time-series/" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd iu gy z fp nk fr fs nl fu fw is bi translated">时间序列中离群点检测的无监督机器学习方法</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">在这篇文章中，我将介绍一些我最喜欢的检测时间序列数据中异常值的方法。有许多不同的…</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">techrando.com</p></div></div><div class="no l"><div class="nu l nq nr ns no nt me nf"/></div></div></a></div><div class="nc nd gp gr ne nf"><a href="https://techrando.com/2019/08/14/a-brief-introduction-to-change-point-detection-using-python/" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd iu gy z fp nk fr fs nl fu fw is bi translated">使用 Python - Tech Rando 进行变化点检测简介</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">我的很多工作都大量涉及时间序列分析。我使用的一个很棒但不太为人所知的算法是…</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">techrando.com</p></div></div><div class="no l"><div class="nv l nq nr ns no nt me nf"/></div></div></a></div><h1 id="6250" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">来源</h1><ol class=""><li id="8b92" class="nw nx it kq b kr ks kv kw kz ny ld nz lh oa ll ob oc od oe bi translated"><a class="ae lr" href="https://www.statistixl.com/features/nonparametric-tests/" rel="noopener ugc nofollow" target="_blank">https://www.statistixl.com/features/nonparametric-tests/</a></li><li id="183b" class="nw nx it kq b kr of kv og kz oh ld oi lh oj ll ob oc od oe bi translated"><a class="ae lr" href="https://www.graphpad.com/guides/prism/7/statistics/how_the_mann-whitney_test_works.htm?toc=0&amp;printWindow" rel="noopener ugc nofollow" target="_blank">https://www . graph pad . com/guides/prism/7/statistics/how _ the _ Mann-Whitney _ test _ works . htm？toc=0 &amp;打印窗口</a></li><li id="d9d6" class="nw nx it kq b kr of kv og kz oh ld oi lh oj ll ob oc od oe bi translated"><a class="ae lr" href="http://sphweb.bumc.bu.edu/otlt/mph-modules/bs/bs704_nonparametric/BS704_Nonparametric4.html" rel="noopener ugc nofollow" target="_blank">http://SPH web . bumc . bu . edu/otlt/mph-modules/bs/bs 704 _ nonparametric/bs 704 _ nonparametric 4 . html</a></li></ol></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><p id="1420" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated"><em class="nb">原载于 2019 年 11 月 21 日 https://techrando.com</em><em class="nb">的</em> <a class="ae lr" href="https://techrando.com/2019/11/21/determine-if-two-distributions-are-significantly-different-using-the-mann-whitney-u-test/" rel="noopener ugc nofollow" target="_blank"> <em class="nb">。</em></a></p></div></div>    
</body>
</html>