<html>
<head>
<title>Location Location Location</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">位置位置位置</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/location-location-location-ec2cc8a223b1?source=collection_archive---------16-----------------------#2019-03-31">https://towardsdatascience.com/location-location-location-ec2cc8a223b1?source=collection_archive---------16-----------------------#2019-03-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/c711528f1a4f95925b7b4c69f308408f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jaYCTEGQqXZ6Z6SNAJp7ng.png"/></div></div></figure><div class=""/><div class=""><h2 id="a025" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">如何使用机器学习和一点黑魔法来创建地理区域嵌入？</h2></div><p id="6ea1" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">Zoopla.co.uk 之旅主要集中在地理区域:这是 Zoopla 搜索的唯一强制输入。消费者在他们的 Zoopla 搜索中引用了许多独特的地理区域，准确地说是去年的 32，237 个<strong class="kv jf">。</strong></p><p id="27d0" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">强烈希望更好地了解所有这些领域，并围绕<strong class="kv jf">区域发现</strong>和<strong class="kv jf">区域比较</strong>等领域打造更好的产品。但是你如何描述和比较 32237 个地理区域呢？一个地区的哪些特征是相关的，你如何以可靠和可比较的方式收集所有这些数据？不可能的！或者是？</p><p id="0c4a" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">数据科学可以将机器学习和一点黑魔法应用于许多问题。我们的解决方案:让我们直接从 Zoopla 的搜索数据中提取一个区域的相关特征及其值。</p><p id="ab0a" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们所需要学习的任何地理区域的描述是一个惊人的简单的数据点。消费者在 Zoopla 搜索中引用的地理区域序列。</p><figure class="lr ls lt lu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lq"><img src="../Images/35da35ea7d1dd7f6712693722f1e1fbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V6_0VgkdA1hsfpSxYrF2sQ.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk">zoopla.co.uk property search</figcaption></figure><p id="940c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">使用 Zoopla 搜索的消费者有不同的需求和优先考虑。他们还对不同的地理区域以及他们是否适合租房或买房有所了解。消费者以他们在搜索中参考地理区域的顺序来表达这种知识。<strong class="kv jf">搜索序列不是随机的，因此我们可以在机器学习的帮助下提取区域描述。</strong></p><figure class="lr ls lt lu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lz"><img src="../Images/9914bca135725bf45612a04660443cd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fTVXrlU7JnwHYiS8X_rMqQ.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk">Zoopla.co.uk area search sequences (pixabay )</figcaption></figure><p id="e564" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们部署的模型被称为<strong class="kv jf"> Skip-Gram </strong>，这是一个试图预测搜索序列的神经网络。该模型使用机器学习来学习区域的<strong class="kv jf">描述(称为嵌入)和搜索序列(上下文矩阵)内区域</strong>的<strong class="kv jf">上下文。</strong></p><p id="5c97" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">区域描述(嵌入)包含区域的可负担性或交通联系等信息。一个区域的上下文描述了一个区域与其他区域相比如何基于消费者在他们的搜索序列中表达的需求和目标。</p><p id="2aa6" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">综上所述，Skip-Gram 模型根据<strong class="kv jf">目标区域描述和消费者搜索环境</strong>预测 Zoopla 搜索中的区域顺序，例如年轻的专业人士或有孩子的家庭。</p><figure class="lr ls lt lu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ma"><img src="../Images/2ccecb724ac21bdec67a673d1437a2a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PGA3HiziNBD07-dBGuiQxA.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk">Area Skip-Gram Model</figcaption></figure><p id="b5b2" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我们用超过 1 亿多个独特的搜索序列来训练神经网络。如下图所示，区域嵌入本身就很有用。此外，嵌入是一种非常有用的方法，可以对分类变量进行编码，以便在其他模型中使用，例如 Zoopla 的推荐引擎。在另一篇博客文章中有更多关于如何构建推荐引擎的内容。</p><h1 id="66b1" class="mb mc je bd md me mf mg mh mi mj mk ml kk mm kl mn kn mo ko mp kq mq kr mr ms bi translated">结果:</h1><p id="846e" class="pw-post-body-paragraph kt ku je kv b kw mt kf ky kz mu ki lb lc mv le lf lg mw li lj lk mx lm ln lo im bi translated">该模型允许我们根据相似性来比较区域，例如，这是伦敦 out 代码与 SE11 的相似性，用于<strong class="kv jf">租赁</strong>一处房产:</p><figure class="lr ls lt lu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi my"><img src="../Images/bccc7e047f68297c1e3e0bdd1ce0181d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z5cAn8dNn5wamkQUG1bTJw.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk">area similarity to London SE11 for renting a property</figcaption></figure><p id="b287" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这张地图显示了<strong class="kv jf">购买</strong>房产的类似地区:</p><figure class="lr ls lt lu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mz"><img src="../Images/dcc04cd96a118a274b9fee4f8637cf49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TfCAbI2MZjD2I7Jt_L1GUw.png"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk">Great Britain area similarity to Brighton for buying a property</figcaption></figure><p id="9534" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">伯恩茅斯地区与布莱顿非常相似，这并不奇怪:例如，这两个城市都有大型大学。滨海韦斯顿也一样。这三个地区都有通往伦敦的像样的铁路。布拉德福德地区可能是一个更令人惊讶的结果，但布拉德福德也有一所大学，并因靠近利兹和曼彻斯特而获得了额外的相似性。</p><h1 id="5420" class="mb mc je bd md me mf mg mh mi mj mk ml kk mm kl mn kn mo ko mp kq mq kr mr ms bi translated">区域数学的乐趣！</h1><p id="eccb" class="pw-post-body-paragraph kt ku je kv b kw mt kf ky kz mu ki lb lc mv le lf lg mw li lj lk mx lm ln lo im bi translated">因为机器学习模型给了我们客观的区域数学描述，没有什么能阻止我们做一些区域数学！</p><figure class="lr ls lt lu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi na"><img src="../Images/4985ab6c91ea8eb625a7abf638ca57a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1lCowYdt7mYLZY3rQITV0g.png"/></div></div></figure><p id="7eae" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">搜索哈默史密斯+安吉尔-肯辛顿，我们会看到肖尔迪奇、哈克尼、霍克斯顿和伦敦机场。</p><p id="1b34" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">另一个例子:有哪些地区与布里克斯顿和卡姆登镇相似，但与克拉彭和 SE1 不同？<strong class="kv jf">这种比较是对中产阶级化、支付能力和交通联系的玩弄。</strong></p><figure class="lr ls lt lu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nb"><img src="../Images/3aa6400714432832b882592ae28bcea6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cThXexfdOutyxaNtowbuvg.png"/></div></div></figure><p id="e0c6" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">肯特郡是一个直观的结果。西部的费尔瑟姆和特威肯汉姆是正在经历大规模中产阶级化的廉价地区。东边的 Rainham 被认为是梅德韦镇中最负盛名的，像布里克斯顿和卡姆登镇一样有当地的感觉，并且有极好的交通联系。罗姆福德也有很好的联系，并经历了大量的重新开发，预计跨铁路的到来。</p><h1 id="9ad2" class="mb mc je bd md me mf mg mh mi mj mk ml kk mm kl mn kn mo ko mp kq mq kr mr ms bi translated">信用和来源:</h1><p id="cf8a" class="pw-post-body-paragraph kt ku je kv b kw mt kf ky kz mu ki lb lc mv le lf lg mw li lj lk mx lm ln lo im bi translated">伦敦外部代码形状文件可从位于 https://data.london.gov.uk/<a class="ae lp" href="https://data.london.gov.uk/" rel="noopener ugc nofollow" target="_blank">的伦敦数据存储中获得</a>，铁路和河流的形状文件可从 OpenStreetMap.org 获得，并可从<a class="ae lp" href="http://download.geofabrik.de/europe/great-britain/england/greater-london.html" rel="noopener ugc nofollow" target="_blank">http://download . geofabrik . de/Europe/great-Britain/England/greater-London . html</a>下载</p><p id="1ed0" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">英国邮政编码形状文件可以从<a class="ae lp" href="https://www.opendoorlogistics.com/data/" rel="noopener ugc nofollow" target="_blank">https://www.opendoorlogistics.com/data/</a>和</p><ul class=""><li id="31f4" class="nc nd je kv b kw kx kz la lc ne lg nf lk ng lo nh ni nj nk bi translated">包含皇家邮政数据皇家邮政版权和数据库权利 2015</li><li id="c978" class="nc nd je kv b kw nl kz nm lc nn lg no lk np lo nh ni nj nk bi translated">包含国家统计数据皇冠版权和数据库权利 2015。</li></ul><p id="4b7e" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">所有图像都是用<a class="ae lp" href="http://geopandas.org/" rel="noopener ugc nofollow" target="_blank"> GeoPandas </a>创建的，并由-NC-SA 4.0 授权<a class="ae lp" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener ugc nofollow" target="_blank"> CC，代码如下:</a></p><pre class="lr ls lt lu gt nq nr ns nt aw nu bi"><span id="b77a" class="nv mc je nr b gy nw nx l ny nz">import geopandas as gpd<br/>import matplotlib.pylab as plt<br/>import matplotlib.patheffects as PathEffects</span><span id="d54f" class="nv mc je nr b gy oa nx l ny nz">similarity_scores = compute_cosine_similarities(area_embedding_vectors, se11_embedding_vector)</span><span id="5382" class="nv mc je nr b gy oa nx l ny nz">geo_df_outcodes = gdp.read_file("path/to/out-code-shapefile.shp")<br/>geo_df_railways = gdp.read_file("path/to/osm-shape-files/gis_osm_railways_free_1.shp")<br/>geo_df_water = gdp.read_file("path/to/osm-shape-files/gis_osm_water_a_free_1.shp")</span><span id="9fb7" class="nv mc je nr b gy oa nx l ny nz">geo_df_outcodes.join(similarity_scores).plot(<br/>     column="score", cmap='Reds', linewidth=0.8, ax=ax, alpha=0.8,<br/>     edgecolor='0.5', vmin=0, vmax=1, ax=ax<br/>)<br/>geo_df_railways.plot(alpha=1, edgecolor='0.2', ax=ax, color='black', linewidth=0.1)<br/>geo_df_water.plot(alpha=1, edgecolor='0.5', ax=ax, color='deepskyblue', linewidth=0.8)</span><span id="8ae3" class="nv mc je nr b gy oa nx l ny nz">labels = similarity_scores.nlargest(10, "score").reset_index()['name'].to_list()</span><span id="fbee" class="nv mc je nr b gy oa nx l ny nz">similarity_scores.apply(<br/>    lambda x: ax.annotate(<br/>        s=x.name, xy=x.geometry.centroid.coords[0], ha='center'<br/>    ).set_path_effects([PathEffects.withStroke(linewidth=2,    <br/>          foreground='w')]<br/>    ) if x.name in labels else None,<br/>    axis=1<br/>)</span><span id="18a1" class="nv mc je nr b gy oa nx l ny nz">plt.axis('off')</span></pre></div><div class="ab cl ob oc hx od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="im in io ip iq"><figure class="lr ls lt lu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oi"><img src="../Images/b40fa03f9762d1ec3c427365a4c45786.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7HvEyV_ETBrk5E7jVL971A.png"/></div></div></figure><p id="a27d" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">Jan 是公司数据转型方面的成功思想领袖和顾问，拥有将数据科学大规模应用于商业生产的记录。他最近被 dataIQ 评为英国 100 位最具影响力的数据和分析从业者之一。</p><p id="4db2" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated"><strong class="kv jf">在 LinkedIn 上连接:</strong><a class="ae lp" href="https://www.linkedin.com/in/janteichmann/" rel="noopener ugc nofollow" target="_blank"><strong class="kv jf">【https://www.linkedin.com/in/janteichmann/】</strong>T5】</a></p><p id="d479" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated"><strong class="kv jf">阅读其他文章:</strong><a class="ae lp" href="https://medium.com/@jan.teichmann" rel="noopener"><strong class="kv jf">https://medium.com/@jan.teichmann</strong></a></p></div></div>    
</body>
</html>