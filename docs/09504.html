<html>
<head>
<title>Deploy your RShiny App Locally with Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Docker 在本地部署您的 RShiny 应用程序</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/deploy-your-rshiny-app-locally-with-docker-427386010eba?source=collection_archive---------10-----------------------#2019-12-14">https://towardsdatascience.com/deploy-your-rshiny-app-locally-with-docker-427386010eba?source=collection_archive---------10-----------------------#2019-12-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/39ced853d94a75105d8d8f649ede9e4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LzTxTB3zp3ycX-vC.jpg"/></div></div></figure><p id="1fc9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我最喜欢在本地部署<a class="ae kw" href="https://shiny.rstudio.com/" rel="noopener ugc nofollow" target="_blank"> RShiny </a>的方式是简单地将它打包成一个<a class="ae kw" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> docker </a>映像并运行它。在 docker 中运行任何应用程序都使其易于移植，并且是 2019 年普遍接受的分发应用程序的方式。</p><p id="9371" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个解决方案不需要 rshiny-server 或 shinyapps.io，这并不是因为我反对这些解决方案。我只是倾向于坚持一些最喜欢的部署方法，以防止我的头从身体上直接旋转下来。；-)</p><p id="3931" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你不熟悉 docker，那么我有一个<a class="ae kw" href="https://www.dabbleofdevops.com/offers/zWv4nh3e/checkout" rel="noopener ugc nofollow" target="_blank">免费课程</a>可供选择。第一个模块足以让你在一两个小时内启动并运行。在大多数情况下，如果你能使用命令行，你可以使用 docker。</p><h1 id="6f4e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在 Docker 中打包你的闪亮应用</h1><p id="40e1" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">现在我们已经介绍了一些日常工作，让我们开始建立你的 docker 形象。像任何项目一样，您希望将所有相关代码放在一个目录中。这样 docker 构建过程就可以访问它。</p><h1 id="a96a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">项目目录结构</h1><pre class="me mf mg mh gt mi la mj mk aw ml bi"><span id="e9de" class="mm lc iq la b gy mn mo l mp mq">➜ 2019-11-rshiny-app-docker tree<br/>.<br/>├── Dockerfile<br/>├── README.md<br/>├── app.R<br/>└── environment.yml<br/><br/>0 directories, 4 files</span></pre><p id="c799" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是一个非常简单的例子，一个 R 文件服务于我们的 RShiny 应用程序，<em class="mr">应用程序。R </em>。<em class="mr"> Dockerfile </em>有我们的构建指令，<em class="mr"> environment.yml </em>列出了我们的 conda 包，即 r-shiny 和 r-devtools。</p><p id="1343" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我个人喜欢用康达安装我所有的科学软件。如果你喜欢用另一种方式安装你的软件，那就试试吧。重要的是，您的依赖项已经安装好，可以运行您的 RShiny 应用程序了。</p><h1 id="2642" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">RShiny 应用程序</h1><p id="c66e" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">这是一个非常简单的例子，直接取自 RShiny examples github repo，只做了一些修改。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h1 id="98ff" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">Dockerfile 文件</h1><p id="8959" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">docker 文件有我们的 docker 构建指令。它的语法相当简单。使用 FROM 选择基础映像，使用 run 在构建期间运行命令，使用 copy 复制文件，使用 CMD 定义启动命令。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="92d1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mr">确保您已经制作了应用程序。chmod 777 应用程序的可执行文件。否则下一步就没用了。</em></p><h1 id="be38" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">Conda 环境定义文件</h1><p id="fd8c" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">同样，用 conda 安装您的软件是可选的。简直是我最喜欢的安装方式。；-)</p><pre class="me mf mg mh gt mi la mj mk aw ml bi"><span id="05e9" class="mm lc iq la b gy mn mo l mp mq">name: r-shiny<br/>channels:<br/>  - conda-forge<br/>  - defaults<br/>dependencies:<br/>  - python=3.6<br/>  - r-devtools<br/>  - r-shiny</span></pre><h1 id="74e0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">构建 Docker 容器</h1><p id="e0a6" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">现在我们已经准备好了所有的文件，让我们构建并运行 docker 容器！</p><pre class="me mf mg mh gt mi la mj mk aw ml bi"><span id="5f81" class="mm lc iq la b gy mn mo l mp mq">docker build -t r-shiny-app .</span></pre><h1 id="cbcf" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">运行我们的 RShiny 应用程序</h1><p id="b57f" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">现在我们已经构建了我们的应用程序，我们可以运行它了！</p><pre class="me mf mg mh gt mi la mj mk aw ml bi"><span id="09d4" class="mm lc iq la b gy mn mo l mp mq">docker run -it -p 8080:8080 r-shiny-app</span></pre><p id="c99c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你应该看到一条消息说<em class="mr">监听</em><a class="ae kw" href="http://0.0.0.0:8080" rel="noopener ugc nofollow" target="_blank"><em class="mr">http://0 . 0 . 0 . 0:8080</em></a><em class="mr">。一旦你看到一切都准备好了！在 localhost:8080 上打开您的浏览器，查看您的应用程序的运行情况！</em></p></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><p id="d618" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mr">最初发表于</em><a class="ae kw" href="https://www.dabbleofdevops.com/blog/deploy-your-rshiny-app-locally-with-docker" rel="noopener ugc nofollow" target="_blank"><em class="mr">【https://www.dabbleofdevops.com】</em></a><em class="mr">。</em></p></div></div>    
</body>
</html>