<html>
<head>
<title>Boosting your data science workflow with vim+tmux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 vim+tmux 提升您的数据科学工作流程</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/boosting-your-data-science-workflow-with-vim-tmux-14505c5e016e?source=collection_archive---------7-----------------------#2019-10-07">https://towardsdatascience.com/boosting-your-data-science-workflow-with-vim-tmux-14505c5e016e?source=collection_archive---------7-----------------------#2019-10-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/71e2b78473c694be82938628e9da5ca2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A2TAriwQq-adZxNW"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@spacex?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">SpaceX</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="17c1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">和大多数同行一样，我在 Jupyter 生态系统中开始了我的数据科学职业生涯。Jupyter 是一个很好的环境，易于设置，提供了有用的内置功能。</p><p id="a755" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在某些时候，我仍然觉得我需要超越。笔记本固有的一些限制开始扼杀我的生产力。仅举几个例子:</p><ul class=""><li id="f68e" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">笔记本的版本控制是有问题的。我一直害怕将包含客户数据的笔记本输出发送到网上。此外，在代码实际上没有改变的情况下，让 git 跟踪输出修改是非常不方便的。</li><li id="4b1a" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">尽管最近取得了一些进展，但是在 Jupyter 环境中，像高级搜索和替换这样的编辑功能仍然非常有限。</li><li id="f831" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">当项目变大时，同时打开几个笔记本是很常见的。从一台笔记本浏览到另一台笔记本是一件痛苦的事情，尤其是当它们隐藏在互联网标签的海洋中时。浏览器是用来搜索的，不是为了代码而开发的！</li></ul><p id="65c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我积极寻找替代方案，幸运的是，我遇到了一群很酷的家伙，他们教会了我老式的代码开发方式。它依赖于 vim + tmux 组合，该组合结合了一个强大的终端嵌入式编辑器和一个多路复用器。它们一起提供了高级编辑功能以及数据浏览所需的交互性。此外，<strong class="kf ir">该工作流程可以完全通过键盘操作，从而节省了大量时间</strong>，因为您不再需要不断地在键盘和鼠标之间切换。</p><p id="4657" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可能想知道为什么我没有考虑使用像 Pycharm 这样的 IDE。嗯，有两个主要原因。首先，ide 不是真正可移植的，作为一名顾问，我倾向于在许多不同的环境中工作。其次，也是更重要的一点，在黑屏上工作看起来更酷，你可以执行代码，以(几乎)思考的速度从一个窗格移动到另一个窗格。</p><p id="a702" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这篇文章首先旨在指导您建立一个基于 vim + tmux 的基本但实用的数据科学环境。我还将展示这样的设置如何提高您的项目生产率。</p><p id="f3c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lp">免责声明:要阅读这篇文章，你需要对 vim 有基本的了解。如果你是个彻头彻尾的新手，也许可以先看看这篇</em> <a class="ae kc" href="https://medium.com/actualize-network/how-to-learn-vim-a-four-week-plan-cd8b376a9b85" rel="noopener"> <em class="lp">文章</em> </a> <em class="lp">再回来。</em></p><h1 id="81fe" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">Tmux</h1><p id="f189" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">Tmux 是一个命令行工具，可以在一个终端窗口中启用多个窗口和窗格。技术上，它被称为多路复用器。安装就像<code class="fe mt mu mv mw b">sudo apt-get install tmux</code>一样简单。然后，您可以使用以下内容创建第一个会话:</p><pre class="mx my mz na gt nb mw nc nd aw ne bi"><span id="7b6a" class="nf lr iq mw b gy ng nh l ni nj">tmux new -s mycoolproject</span></pre><p id="4e46" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在一个会话中，您可以使用前缀命令<code class="fe mt mu mv mw b">ctrl+b</code>和一些特定的键来控制窗口和窗格。例如，<code class="fe mt mu mv mw b">ctrl+b “</code>产生窗口的水平分割。然后，您可以使用<code class="fe mt mu mv mw b">ctrl+b arrows</code>在窗格之间导航。</p><p id="379d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">tmux 的一大优势是它允许我们并行运行多个会话。这对于<strong class="kf ir">在不同项目之间快速切换非常方便，不会有弄乱脚本的风险</strong>。您可以使用<code class="fe mt mu mv mw b">ctrl+b d</code>脱离当前会话，使用<code class="fe mt mu mv mw b">tmux ls</code>列出现有会话，并使用<code class="fe mt mu mv mw b">tmux a -t &lt;session name&gt;</code>连接到不同的会话。</p><figure class="mx my mz na gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/5cc38415b5839dcabd6dcde8f3af778f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*vzhZ-LDLX799gf7Dm6l4Ow.gif"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Quick overview of tmux capabilities.</figcaption></figure><p id="233a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">定制 tmux 相当容易，您只需要编辑位于您的主目录中的配置文件<code class="fe mt mu mv mw b">.tmux.conf</code>。例如，许多人喜欢将前缀命令重新绑定到<code class="fe mt mu mv mw b">ctrl+a</code>。</p><p id="00f7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我的目的只是在这里提供一个 tmux 的简要概述，但是如果你想了解更多，还有很多很棒的教程。这个<a class="ae kc" href="https://gist.github.com/MohamedAlaa/2961058" rel="noopener ugc nofollow" target="_blank">小抄</a>也值得看一看。</p><h1 id="1d83" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">❤️维姆❤️</h1><p id="b611" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">我喜欢维姆。真的。Vim 是那些像黑咖啡、周日早晨慢跑或戈达尔电影一样的东西之一，起初可能会觉得有点刺耳，但随着时间的推移和练习，它会变得越来越令人愉快。</p><p id="bb3e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有人说学习曲线很陡。是真的。但是，当你开始掌握新的快捷方式或宏来大大提高你的生产力时，这也是非常有益的。</p><p id="7978" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vim 是一个高度可定制的文本编辑器，直接嵌入在终端中。默认情况下，Vim 存在于所有类似 Unix 的系统中。无需安装。基本配置的功能有限，但您可以快速添加功能(如语法突出显示、自动完成等..)通过调整或添加插件到<code class="fe mt mu mv mw b">.vimrc</code>，配置文件位于您的主目录中，在启动编辑器时加载。</p><p id="a6be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我在这个<a class="ae kc" href="https://github.com/greghor/vimux-ds-workflow" rel="noopener ugc nofollow" target="_blank">回购</a>中做了一个简单的<code class="fe mt mu mv mw b">.vimrc</code>。它将帮助您重复下面描述的步骤。然而，我强烈建议建立自己的配置文件，以便更好地感受 vim 的精神。</p><p id="782b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本教程中，我们将使用三个插件:</p><ul class=""><li id="9a37" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated"><a class="ae kc" href="https://github.com/benmills/vimux" rel="noopener ugc nofollow" target="_blank"> vimux </a>，使 vim 能够与 tmux 交互</li><li id="e709" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">vim-pyShell ，一个专门为简化 ipython 的使用而设计的 vimux 包装器</li><li id="3349" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><a class="ae kc" href="https://github.com/julienr/vim-cellmode" rel="noopener ugc nofollow" target="_blank"> vim-cellmode </a>，ipython 的类 matlab 代码块执行</li></ul><p id="72e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装插件最简单的方法是通过插件管理器。我个人使用<a class="ae kc" href="https://github.com/junegunn/vim-plug" rel="noopener ugc nofollow" target="_blank"> vim-plug </a>，但是还有很多其他好的选择。</p><p id="fef9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vim-plug 易于安装。它只需要一个 bash 命令:</p><pre class="mx my mz na gt nb mw nc nd aw ne bi"><span id="ccb9" class="nf lr iq mw b gy ng nh l ni nj">curl -fLo ~/.vim/autoload/plug.vim  <a class="ae kc" href="https://raw.github.com/junegunn/vim-plug/master/plug.vim" rel="noopener ugc nofollow" target="_blank">https://raw.github.com/junegunn/vim-plug/master/plug.vim</a></span></pre><p id="803b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后你只需要在<code class="fe mt mu mv mw b">call plug#begin()</code>和<code class="fe mt mu mv mw b">call plug#end()</code>之间的<code class="fe mt mu mv mw b">.vimrc</code>中指定想要的插件，如下图所示。</p><figure class="mx my mz na gt jr gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/4161ba75726f4bf93ff3671c4fa9592c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*MZgFe0jmgzTCCOc5LLftEA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">First lines of .vimrc</figcaption></figure><p id="306b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装插件，打开<code class="fe mt mu mv mw b">.vimrc</code>执行命令<code class="fe mt mu mv mw b">:PlugInstall</code>。然后重启 vim 来获取配置文件。</p><h1 id="cfc7" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">代码执行</h1><p id="89d9" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">一旦我们的插件启动并运行，我们就可以开始从 vim 向终端发送指令。</p><p id="393f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在 tmux 会话中，用 vim 打开一个 python 脚本。在正常模式下，您可以使用命令<code class="fe mt mu mv mw b">:call StartPyShell()</code>从新安装的插件中调用专用函数来启动 ipython 终端。默认情况下，这将在屏幕底部创建一个窗格，并启动一个 ipython 会话。</p><p id="7798" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">代码可以通过以下方式执行:</p><ul class=""><li id="d575" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">逐行发送指令。为此，将光标移动到所需的行并运行命令<code class="fe mt mu mv mw b">:call RunPyShellSendLine()</code>。</li><li id="fc8c" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">发送用<code class="fe mt mu mv mw b">##{/##}</code>分隔的代码块。在这种情况下，转到程序块并调用<code class="fe mt mu mv mw b">RunTmuxPythonCell(0)</code>。</li></ul><figure class="mx my mz na gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/a7f9e4c184ae01b64c39ee5ec424bb15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*gvsjsahLgH78gUiaecbBOw.gif"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Sending commands directly from vim to the shell with vimux</figcaption></figure><p id="05ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这已经很酷了，但它实际上需要相当多的输入。我们能做得更好吗？</p><h1 id="2227" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">通过相关映射提高您的生产力</h1><p id="50fe" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">自动化重复性任务。这是缩短开发时间从而提高生产力的秘密。好消息是 vim 真的很擅长这个。</p><p id="c6b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">主要思想在于为最常见的任务创建映射。让我们仔细看看如何实际实现映射。同样，这是在<code class="fe mt mu mv mw b">.vimrc</code>中完成的。在下面的代码片段中，第 2 行和第 3 行分别将快捷键<code class="fe mt mu mv mw b">,ss</code>和<code class="fe mt mu mv mw b">,sk</code>映射到 ipython 启动和停止命令，而第二个块定义了代码执行的映射。</p><figure class="mx my mz na gt jr"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="c038" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">众所周知，数据科学中的大部分时间都用于数据准备。这一步严重依赖于数据帧操作。因此，定义与基本操作相关的映射，如:</p><ul class=""><li id="705a" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">打印数据帧的第一个元素:<code class="fe mt mu mv mw b">,sdh</code></li><li id="1b7c" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">打印数据帧信息:<code class="fe mt mu mv mw b">,sdi</code></li><li id="6744" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">绘制数据帧的内容:<code class="fe mt mu mv mw b">,spp</code></li><li id="baf7" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">显示直方图:<code class="fe mt mu mv mw b">,sph</code></li><li id="fecc" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">显示变量的内容:<code class="fe mt mu mv mw b">,so</code></li><li id="e9cf" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">获取一个 iterable 的长度:<code class="fe mt mu mv mw b">,sl</code></li></ul><p id="2ad7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">会为你节省很多时间吗？此外，由于检查是通过将光标下的变量/对象传递给后端函数来执行的，因此<strong class="kf ir">不会因为大量的打印和输出</strong>而污染您的脚本。不需要额外的输入。</p><p id="eddc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们看看这些映射是如何工作的！</p><figure class="mx my mz na gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/6377246cd30aa9c73e82e5c01c396d12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*QFrmh61r5QE98MrdqqSSkQ.gif"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Few mappings were sufficient to really boost my productivity!</figcaption></figure><h1 id="4fbc" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">总结想法</h1><p id="c6af" class="pw-post-body-paragraph kd ke iq kf b kg mo ki kj kk mp km kn ko mq kq kr ks mr ku kv kw ms ky kz la ij bi translated">将 vim 的高级编辑功能与一些设计良好的映射结合起来，确实提高了我的生产率。这个工作流程帮助我满足了工作中固有的紧迫的最后期限。的确，它需要大量的初始投资，但我相信，从节省时间和工作舒适度来看，回报要高得多。</p><p id="46b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我对 vim 惊叹不已的是无穷无尽的定制可能性。所以要有创意，开始破解<code class="fe mt mu mv mw b">.vimrc</code>并实现你自己的映射！</p><p id="68ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢阅读！如果你喜欢这类内容，你可能也会对这个<a class="ae kc" href="https://greghor.medium.com/5-killer-vim-features-for-your-data-science-daily-routine-ec814fc6c090" rel="noopener">帖子</a>感兴趣。请随意<a class="ae kc" href="https://greghor.medium.com/" rel="noopener">关注我的 Medium </a>，不要错过我的下一篇关于如何在数据科学中使用 vim 的文章。你也可以通过使用我的<a class="ae kc" href="https://greghor.medium.com/membership" rel="noopener">附属链接</a>加入 Medium 来支持我的写作。</p></div></div>    
</body>
</html>