<html>
<head>
<title>How to make stunning 3D Plots for better storytelling?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为了更好地讲故事，如何制作令人惊叹的 3D 情节？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-make-stunning-3d-plots-for-better-storytelling-5c93aec80503?source=collection_archive---------15-----------------------#2019-06-26">https://towardsdatascience.com/how-to-make-stunning-3d-plots-for-better-storytelling-5c93aec80503?source=collection_archive---------15-----------------------#2019-06-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0f6253ce60609f579b54332e3f6e40cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LrZSJEzTfuhqIDOEsn82Pg.png"/></div></div></figure><p id="4845" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kw">在我们开始之前，这不是 2D 与 3D 图之间的战斗，也不是声称 3D 图优于 2D，因为它有一个额外的维度。事实上，我是那些试图避免给一个情节添加太多以至于情节失去其本身情节的人之一。但是有些情况下，你知道你可以通过使用 3D 情节更好地讲故事。这篇文章是为了帮助你在这些情况下！</em></p><h1 id="c0b9" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><a class="ae lv" href="https://datacamp.pxf.io/c/2888696/1240322/13294?u=https%3A%2F%2Fpromo.datacamp.com" rel="noopener ugc nofollow" target="_blank">查看 78%的 DataCamp 折扣</a></h1><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lw"><img src="../Images/ab410d72406438743243dd0ca4f9bbcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZZc74LTJvEGsk-F9.png"/></div></div></figure></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><p id="b6b0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以正确的方式为正确的目的构建的 3D 图总是令人惊叹。在本文中，我们将看到如何使用<code class="fe mi mj mk ml b">ggplot2</code>和<code class="fe mi mj mk ml b">rayshader</code>用 R 制作令人惊叹的 3D 图。虽然<code class="fe mi mj mk ml b">ggplot2</code>可能为数据科学领域的任何人所熟悉，但<code class="fe mi mj mk ml b">rayshader</code>可能并不熟悉。那么，让我们先来简单介绍一下<code class="fe mi mj mk ml b">rayshader</code>。</p><p id="9ccf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">来自<code class="fe mi mj mk ml b"><a class="ae lv" href="https://github.com/tylermorganwall/rayshader" rel="noopener ugc nofollow" target="_blank">rayshader</a>:</code>的包装说明</p><blockquote class="mm mn mo"><p id="b863" class="jy jz kw ka b kb kc kd ke kf kg kh ki mp kk kl km mq ko kp kq mr ks kt ku kv ij bi translated"><strong class="ka ir"> rayshader </strong>是一个开源包，用于在 R 中生成 2D 和 3D 数据可视化。<strong class="ka ir"> rayshader </strong>使用基本 R 矩阵中的高程数据以及光线跟踪、球形纹理映射、叠加和环境遮挡的组合来生成美丽的地形 2D 和 3D 地图。除了地图，<strong class="ka ir"> rayshader </strong>还允许用户将<strong class="ka ir"> ggplot2 </strong>对象转换成漂亮的 3D 数据可视化。</p></blockquote><h2 id="674a" class="ms ky iq bd kz mt mu dn ld mv mw dp lh kj mx my ll kn mz na lp kr nb nc lt nd bi translated">所需的库/包:</h2><p id="3a1e" class="pw-post-body-paragraph jy jz iq ka b kb ne kd ke kf nf kh ki kj ng kl km kn nh kp kq kr ni kt ku kv ij bi translated">最新版本的<code class="fe mi mj mk ml b"><a class="ae lv" href="https://github.com/tylermorganwall/rayshader" rel="noopener ugc nofollow" target="_blank">rayshader</a></code>可从<a class="ae lv" href="https://github.com/tylermorganwall/rayshader" rel="noopener ugc nofollow" target="_blank"> github </a>上获得，可以使用<code class="fe mi mj mk ml b">devtools</code>或<code class="fe mi mj mk ml b">remotes</code>安装。</p><pre class="lx ly lz ma gt nj ml nk nl aw nm bi"><span id="9a08" class="ms ky iq ml b gy nn no l np nq">devtools::install_github("tylermorganwall/rayshader")</span></pre><p id="0fdc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并且，确保你已经获得了最新版本的<code class="fe mi mj mk ml b">ggplot2</code>。如果你是一个爱潮流的人，那就买最新的吧。</p><pre class="lx ly lz ma gt nj ml nk nl aw nm bi"><span id="352d" class="ms ky iq ml b gy nn no l np nq">install.packages('tidyverse')</span></pre><h2 id="25cd" class="ms ky iq bd kz mt mu dn ld mv mw dp lh kj mx my ll kn mz na lp kr nb nc lt nd bi translated"><strong class="ak">数据</strong></h2><p id="6e99" class="pw-post-body-paragraph jy jz iq ka b kb ne kd ke kf nf kh ki kj ng kl km kn nh kp kq kr ni kt ku kv ij bi translated">为了保持这篇文章的最低要求，我们将使用<code class="fe mi mj mk ml b">ggplot2</code>库中的一个内置数据集<code class="fe mi mj mk ml b">faithfuld</code>。</p><pre class="lx ly lz ma gt nj ml nk nl aw nm bi"><span id="0642" class="ms ky iq ml b gy nn no l np nq">&gt; glimpse(faithfuld)<br/>Observations: 5,625<br/>Variables: 3<br/>$ eruptions &lt;dbl&gt; 1.600000, 1.647297, 1.694595, 1.741…<br/>$ waiting   &lt;dbl&gt; 43, 43, 43, 43, 43, 43, 43, 43, 43,…<br/>$ density   &lt;dbl&gt; 0.003216159, 0.003835375, 0.0044355…</span></pre><p id="14f3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如你所见，<code class="fe mi mj mk ml b">faithfuld</code>有 3 个连续变量，我们将用它们来绘图。</p><h2 id="e09b" class="ms ky iq bd kz mt mu dn ld mv mw dp lh kj mx my ll kn mz na lp kr nb nc lt nd bi translated">2D 图</h2><p id="8823" class="pw-post-body-paragraph jy jz iq ka b kb ne kd ke kf nf kh ki kj ng kl km kn nh kp kq kr ni kt ku kv ij bi translated">我们的 3D 绘图之旅从普通的 2D ggplot2 绘图开始。我们将使用 geom_raster 在<code class="fe mi mj mk ml b">waiting</code>、<code class="fe mi mj mk ml b">eruptions</code>之间构建一个密度图，以查看数据情况。</p><pre class="lx ly lz ma gt nj ml nk nl aw nm bi"><span id="2d86" class="ms ky iq ml b gy nn no l np nq">faithful_dd &lt;- ggplot(faithfuld, aes(waiting, eruptions)) +<br/>  geom_raster(aes(fill = density)) +<br/>  ggtitle("3D Plotting in R from 2D_ggplot_graphics") +<br/>  labs(caption = "Package: rayshader") +<br/>  theme(axis.text = element_text(size = 12),<br/>        title = element_text(size = 12,face="bold"),<br/>        panel.border= element_rect(size=2,color="black",fill=NA))  </span><span id="e780" class="ms ky iq ml b gy nr no l np nq">faithful_dd</span></pre><p id="67bf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如你在上面的代码中看到的，随着情节的展开，我们对情节的外观做了一些美学上的改进</p><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ns"><img src="../Images/bc39fe01e54554c9eaf59f5176fc0da4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gl4PMRBmpL3TkdNEu93kXA.png"/></div></div></figure><p id="6768" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">嗯，这很好，但这是我喜欢以 3D 形式显示一座小山的地块之一，事实上，是两座小山。因此，让我们推进到一个三维绘图。</p><h2 id="010e" class="ms ky iq bd kz mt mu dn ld mv mw dp lh kj mx my ll kn mz na lp kr nb nc lt nd bi translated">从 2D 情节到 3D 情节的旅程——一条线！</h2><p id="337e" class="pw-post-body-paragraph jy jz iq ka b kb ne kd ke kf nf kh ki kj ng kl km kn nh kp kq kr ni kt ku kv ij bi translated">从 2D 情节到 3D 情节的旅程，只是来自包<code class="fe mi mj mk ml b">rayshader</code>的一行额外的代码。函数<code class="fe mi mj mk ml b">plot_gg() </code>采用一组参数来定义 3D 绘图的外观。</p><pre class="lx ly lz ma gt nj ml nk nl aw nm bi"><span id="aa01" class="ms ky iq ml b gy nn no l np nq">plot_gg(faithful_dd, multicore = TRUE, width = 8, height = 8, scale = 300, <br/>          zoom = 0.6, phi = 60,<br/>          background = "#afceff",shadowcolor = "#3a4f70")</span></pre><p id="5630" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mi mj mk ml b">faithful_dd</code>是我们在上一步中生成的 ggplot2 对象。因为大多数参数都是不言自明的，比如在渲染时激活计算机的所有内核。像<code class="fe mi mj mk ml b">zoom</code>和<code class="fe mi mj mk ml b">phi</code>这样的参数用于设置 3D 摄像机视图应该在哪里。</p><p id="22db" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们来看看生成的图:</p><div class="lx ly lz ma gt ab cb"><figure class="nt jr nu nv nw nx ny paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/4ebadb3c470896a1788ba054ed7dc35a.png" data-original-src="https://miro.medium.com/v2/resize:fit:678/format:webp/1*M1PU5fEZjaYbapTHAzPfgg.png"/></div></figure><figure class="nt jr nz nv nw nx ny paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/e9576a5f511aa7c743f8f99cfdfd0fc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:678/format:webp/1*tHPMXlMEulouJncAX60_DA.png"/></div></figure><figure class="nt jr oa nv nw nx ny paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/54743c78101189c3bec46738c3b53be1.png" data-original-src="https://miro.medium.com/v2/resize:fit:648/format:webp/1*gMuvOZRoIm-Djb4g0IOaJQ.png"/></div></figure></div><p id="cb5f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">看起来是不是很美？这些不仅仅是惊人的，而且是有目的的。想象一下，你要解释梯度下降或一些优化算法，像这样更直观和自我解释，以获得一个心理模型。</p><h1 id="f9a7" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">还有一件事！</h1><p id="446f" class="pw-post-body-paragraph jy jz iq ka b kb ne kd ke kf nf kh ki kj ng kl km kn nh kp kq kr ni kt ku kv ij bi translated">这个故事不仅仅以一个 3D 情节结束，但开发人员(<a class="ae lv" href="https://twitter.com/tylermorganwall" rel="noopener ugc nofollow" target="_blank">泰勒·摩根-沃尔</a>)非常友好地给了我们另一个功能<code class="fe mi mj mk ml b">render_movie()</code>，它放置了一个相机，并围绕我们刚刚建立的 3D 情节旋转，给了我们一个令人惊叹的 3D 情节视频。<code class="fe mi mj mk ml b">render_movie()</code>内部使用<code class="fe mi mj mk ml b">av</code>包制作视频。</p><pre class="lx ly lz ma gt nj ml nk nl aw nm bi"><span id="3d5c" class="ms ky iq ml b gy nn no l np nq">render_movie("faithful_3d.mp4", frames = 480)</span></pre><figure class="lx ly lz ma gt jr"><div class="bz fp l di"><div class="ob oc l"/></div></figure><h2 id="6db1" class="ms ky iq bd kz mt mu dn ld mv mw dp lh kj mx my ll kn mz na lp kr nb nc lt nd bi translated">摘要</h2><p id="d769" class="pw-post-body-paragraph jy jz iq ka b kb ne kd ke kf nf kh ki kj ng kl km kn nh kp kq kr ni kt ku kv ij bi translated">感谢泰勒，现在我们可以从 2D ggplots 制作出令人惊叹的 3D 绘图——只需使用一个额外的函数<code class="fe mi mj mk ml b">plot_gg()</code>最终甚至可以制作 360 度的 3D 绘图视频。在 R here 和<a class="ae lv" href="https://www.rayshader.com/" rel="noopener ugc nofollow" target="_blank"> rayshader </a>文档中了解更多关于<a class="ae lv" href="https://www.datacamp.com/courses/introduction-to-data-visualization-with-ggplot2?irclickid=V0FwRdyHGxyIW7HRYNWRwwwzUkG3PyzTCXti2k0&amp;irgwc=1&amp;utm_medium=affiliate&amp;utm_source=impact&amp;utm_campaign=2888696" rel="noopener ugc nofollow" target="_blank">数据可视化的信息。这里使用的代码和 sessionInfo 可在</a>这里<a class="ae lv" href="https://github.com/amrrs/blogpost_codes/blob/master/stunning_3d_plots.R" rel="noopener ugc nofollow" target="_blank">获得。</a></p></div></div>    
</body>
</html>