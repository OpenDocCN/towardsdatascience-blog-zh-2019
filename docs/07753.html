<html>
<head>
<title>Planning to Travel Around the World, with Python?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">计划环游世界，用 Python？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/planning-to-travel-around-the-world-with-python-42fac1d21a6e?source=collection_archive---------16-----------------------#2019-10-27">https://towardsdatascience.com/planning-to-travel-around-the-world-with-python-42fac1d21a6e?source=collection_archive---------16-----------------------#2019-10-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="58b7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何使用 Python 中的底图和 Networkx 包来规划您的环球旅程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b22c232eb01f19d0cd3a7669680ff248.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*scYnG2z-YgGLoRIg8rojrw.jpeg"/></div></div></figure><p id="67be" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi lq translated">环游世界一直是每个人的梦想，但我们中很少有人准备这样做。老实说，我们甚至不知道环游世界意味着什么。当然，我不能提供你旅行时需要的任何东西，比如钱和假期，这也是我所缺乏的。然而，你可以用从文章中学到的技巧开始计划，或者做白日梦。</p><p id="f286" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">本文分为两部分:</p><ul class=""><li id="e554" class="lz ma it kw b kx ky la lb ld mb lh mc ll md lp me mf mg mh bi translated">【第 1 部分】—这篇文章讲的是如何用 Python 中的<code class="fe mi mj mk ml b">Basemap</code>包绘制地图。旅行前和旅行中需要地图，可以用 Python 中的包画出需要的东西。[<a class="ae mm" href="https://github.com/BarryPan/Traveling_Tool_Analysis_on_Medium/blob/master/S1_Map.ipynb" rel="noopener ugc nofollow" target="_blank">Jupyter 笔记本中的源代码</a></li><li id="bf2d" class="lz ma it kw b kx mn la mo ld mp lh mq ll mr lp me mf mg mh bi translated">[第二部分] —这篇文章是关于如何用 Python 中的<code class="fe mi mj mk ml b">Networkx</code>包为我们优化环游世界的路线。<code class="fe mi mj mk ml b">Networkx</code>是 Python 中一个分析复杂网络的强大软件包，它将有助于我们制定环游世界的计划，有了我们的目标。[<a class="ae mm" href="https://github.com/BarryPan/Traveling_Tool_Analysis_on_Medium/blob/master/S2_Route.ipynb" rel="noopener ugc nofollow" target="_blank">Jupyter 笔记本</a>中的源代码]</li></ul></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="eea5" class="mz na it bd nb nc nd ne nf ng nh ni nj jz nk ka nl kc nm kd nn kf no kg np nq bi translated">第一部分</h1><h1 id="6769" class="mz na it bd nb nc nr ne nf ng ns ni nj jz nt ka nl kc nu kd nn kf nv kg np nq bi translated">底图简介</h1><p id="4fa9" class="pw-post-body-paragraph ku kv it kw b kx nw ju kz la nx jx lc ld ny lf lg lh nz lj lk ll oa ln lo lp im bi lq translated">matplotlib 底图工具包是一个用 Python 在地图上绘制 2D 数据的库。 正如大家都认同可视化对于人们理解数据真的很重要，地图是我们在处理地理位置时最好的可视化方法(我相信没有人在没有地图的情况下擅长处理经纬度数据。)<code class="fe mi mj mk ml b">Basemap</code>是 Python 中一个强大的包，我们将挑选一些重要的特性来详细解释。要对这个包有更多的了解，请查看<a class="ae mm" href="https://matplotlib.org/basemap/users/index.html" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><h2 id="a34b" class="oc na it bd nb od oe dn nf of og dp nj ld oh oi nl lh oj ok nn ll ol om np on bi translated"><strong class="ak">投影</strong></h2><p id="821d" class="pw-post-body-paragraph ku kv it kw b kx nw ju kz la nx jx lc ld ny lf lg lh nz lj lk ll oa ln lo lp im bi lq translated">众所周知，地球是圆的。因此，要把它做成 2D 地图，我们需要一些投影方法。在<code class="fe mi mj mk ml b">basemap</code>包中，支持多种投影方式，这里的列表是<a class="ae mm" href="https://matplotlib.org/basemap/users/mapsetup.html" rel="noopener ugc nofollow" target="_blank"/>。下面是两个如何在<code class="fe mi mj mk ml b">basemap</code>中应用不同投影方法的例子。</p><p id="777c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">投影—正投影</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/7320e579cb4e113eb75cd38b51410ec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/1*0zdngxkW5A8p2uujHHFyOw.png"/></div><figcaption class="or os gj gh gi ot ou bd b be z dk">Orthographic</figcaption></figure><p id="225d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">投影—瘿体视学</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ov"><img src="../Images/571246fe88d47abdd92054883f317b79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CKH8LeJS96c4q8pyXXp8zw.png"/></div></div><figcaption class="or os gj gh gi ot ou bd b be z dk">Gall Stereographic</figcaption></figure><h2 id="65e9" class="oc na it bd nb od oe dn nf of og dp nj ld oh oi nl lh oj ok nn ll ol om np on bi translated"><strong class="ak">绘画要点</strong></h2><p id="a395" class="pw-post-body-paragraph ku kv it kw b kx nw ju kz la nx jx lc ld ny lf lg lh nz lj lk ll oa ln lo lp im bi lq translated">既然我们能画一张地图，我们就想在上面标出一些地方。在<code class="fe mi mj mk ml b">baemap</code>包中，我们可以使用之前定义的<code class="fe mi mj mk ml b">basemap</code>对象将纬度和经度转换到<code class="fe mi mj mk ml b">matplotlib</code>中的坐标系。之后，我们可以应用<code class="fe mi mj mk ml b">scatter</code>或<code class="fe mi mj mk ml b">annotate</code>函数在地图上放置点。在下面的例子中，我们标记了美国的四个主要城市，纽约、华盛顿、DC、洛杉矶和旧金山。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/55cf010ae4b4baa1e17a7a0b48cb0af4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n_oFpbpmcXMtU3UhIQ26gQ.png"/></div></div><figcaption class="or os gj gh gi ot ou bd b be z dk">Marking the four major cities with basemap</figcaption></figure><h2 id="843d" class="oc na it bd nb od oe dn nf of og dp nj ld oh oi nl lh oj ok nn ll ol om np on bi translated"><strong class="ak">绘制路线</strong></h2><p id="0c9d" class="pw-post-body-paragraph ku kv it kw b kx nw ju kz la nx jx lc ld ny lf lg lh nz lj lk ll oa ln lo lp im bi lq translated">除了在地图上放置点之外，我们还需要画线来可视化两个地方之间的路线。我们知道，地图上两点之间最短的路线不是直线，而是<a class="ae mm" href="https://en.wikipedia.org/wiki/Great_circle" rel="noopener ugc nofollow" target="_blank">大圆路线</a>。在<code class="fe mi mj mk ml b">basemap</code>包中，我们可以用<code class="fe mi mj mk ml b">gcpoints</code>功能绘制路线，做出大圆路线。以下是使用<code class="fe mi mj mk ml b">gcpoints</code>功能从纽约到旧金山的路线示例。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/991e8f9ad461332f4e4eedd6154382ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GYU_M_HgPDzrdFbHzEhGtQ.png"/></div></div><figcaption class="or os gj gh gi ot ou bd b be z dk">Route between New York and San Francisco</figcaption></figure><p id="e49a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi lq translated"><span class="l lr ls lt bm lu lv lw lx ly di"> T </span>这里还有很多有趣的功能在<code class="fe mi mj mk ml b">basemap</code>包里，让你的地图更有信息量和吸引力。例如，<code class="fe mi mj mk ml b">arcgisimage</code>可以用卫星照片创建地图。然而，我们现在已经足够好，可以继续制定环游世界的计划了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ow"><img src="../Images/d902084c22f34f4138c74a9461168df0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yEiiXy0m95eH-bEBU5Lgiw.png"/></div></div><figcaption class="or os gj gh gi ot ou bd b be z dk">Satellite map for Taiwan with arcgisimage function in basemap package</figcaption></figure><h1 id="a471" class="mz na it bd nb nc nr ne nf ng ns ni nj jz nt ka nl kc nu kd nn kf nv kg np nq bi translated">玩真实数据</h1><p id="6746" class="pw-post-body-paragraph ku kv it kw b kx nw ju kz la nx jx lc ld ny lf lg lh nz lj lk ll oa ln lo lp im bi lq translated"><span class="l lr ls lt bm lu lv lw lx ly di">在</span>我们的计划中，我们想乘飞机环游世界。在<a class="ae mm" href="https://openflights.org/data.html" rel="noopener ugc nofollow" target="_blank"> OpenFlights </a>数据库中，我们能够访问世界各地的机场和航线信息。有了这些信息，我们可以制定环游世界的计划。不过，在此之前，我们先来看看数据，先用<code class="fe mi mj mk ml b">basemap</code>工具可视化一下。</p><h2 id="2875" class="oc na it bd nb od oe dn nf of og dp nj ld oh oi nl lh oj ok nn ll ol om np on bi translated">机场</h2><p id="4475" class="pw-post-body-paragraph ku kv it kw b kx nw ju kz la nx jx lc ld ny lf lg lh nz lj lk ll oa ln lo lp im bi lq translated"><span class="l lr ls lt bm lu lv lw lx ly di">在</span> OpenFlights 中，包含了全球所有 6060 个机场，完整的名称、城市、国家、IATA 代码、纬度、经度等所有信息。此外，由于它有经度和纬度信息，我们可以很容易地通过谷歌地图 api 或其他工具查找更多的细节，例如机场属于哪个洲。我们也可以使用<code class="fe mi mj mk ml b">basemap</code>工具将不同大洲的机场用不同的颜色放在地图上:北美、南美、亚洲、欧洲、非洲和大洋洲，如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/75394d5c157ca8badcb6e09e2c4b8978.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*77ZFtrUPoDjTY0SBNvJpRw.png"/></div></div><figcaption class="or os gj gh gi ot ou bd b be z dk">Airports around the world (Source: OpenFlights)</figcaption></figure><h2 id="5d43" class="oc na it bd nb od oe dn nf of og dp nj ld oh oi nl lh oj ok nn ll ol om np on bi translated">途径</h2><p id="1c18" class="pw-post-body-paragraph ku kv it kw b kx nw ju kz la nx jx lc ld ny lf lg lh nz lj lk ll oa ln lo lp im bi lq translated">尽管我们拥有世界各地的所有机场信息，但在考虑如何环游世界时，我们仍然需要航线信息，因为并非所有两个机场都是相连的。在 OpenFlights 中，它确实有航线信息。可惜 2014 年 6 月之后就不更新了。虽然并不完美，但我们仍然可以使用这些数据，并假设这些路线从 2014 年起没有太大变化。</p><p id="6f92" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi lq translated">OpenFlights 数据库中有 67，663 条不同的航线。它有源机场和目的地机场的信息，以及航空公司，站的数量和设备的细节。如果我们只考虑来源和目的地机场，数据中有 33，971 条不同的航线。我们可以在<code class="fe mi mj mk ml b">basemap</code>中应用工具来可视化这些路线，如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/5e00ac88ce7430010ead12b8083855ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qBWzqNBRH5amZ18ZJSrbug.png"/></div></div><figcaption class="or os gj gh gi ot ou bd b be z dk">Airline routes around the world (Source: OpenFlights)</figcaption></figure><p id="4f64" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们有了所有的知识:用 Python 在地图上可视化的技能集，以及关于机场和航线的信息。看起来我们已经为下一步做好了准备:优化我们环游世界的路线。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="b0fb" class="mz na it bd nb nc nd ne nf ng nh ni nj jz nk ka nl kc nm kd nn kf no kg np nq bi translated">第二部分</h1><h1 id="4325" class="mz na it bd nb nc nr ne nf ng ns ni nj jz nt ka nl kc nu kd nn kf nv kg np nq bi translated">环游世界的定义</h1><p id="32f4" class="pw-post-body-paragraph ku kv it kw b kx nw ju kz la nx jx lc ld ny lf lg lh nz lj lk ll oa ln lo lp im bi lq translated">给问题下一个好的定义总是最重要的。在我们开始分析之前，我们需要为我们定义什么是“<strong class="kw iu">环游世界</strong>”:<em class="ob">如果你在北美、南美、亚洲、欧洲、非洲和大洋洲的每个大洲都至少游览过一个地方，那么你就已经环游了世界。</em></p><h1 id="7fb0" class="mz na it bd nb nc nr ne nf ng ns ni nj jz nt ka nl kc nu kd nn kf nv kg np nq bi translated">网络简介 x</h1><p id="6570" class="pw-post-body-paragraph ku kv it kw b kx nw ju kz la nx jx lc ld ny lf lg lh nz lj lk ll oa ln lo lp im bi lq translated">etworkx 是一个 Python 包，用于创建、操作和研究复杂网络的结构、动态和功能。我们可以把机场之间的飞行路线看作一个复杂的网络，因此<code class="fe mi mj mk ml b">Networkx</code> package 非常有助于我们分析它们。开始之前，我们需要先熟悉一些术语:</p><ul class=""><li id="e58c" class="lz ma it kw b kx ky la lb ld mb lh mc ll md lp me mf mg mh bi translated"><strong class="kw iu">节点:</strong>网络中的点；在我们的例子中，机场是航空网络中的节点。</li><li id="21b7" class="lz ma it kw b kx mn la mo ld mp lh mq ll mr lp me mf mg mh bi translated"><strong class="kw iu">边:</strong>两点之间的连接；在我们的例子中，飞行路线是边。由于不是所有两个机场都连接，我们需要使用 OpenFlights 中的路线数据来定义它们。</li><li id="9702" class="lz ma it kw b kx mn la mo ld mp lh mq ll mr lp me mf mg mh bi translated"><strong class="kw iu">有向/无向图:</strong>有向图中，从 A 到 B 的边不等于从 B 到 A 的边；相比之下，在无向图中，边 A 到 B 与 B 到 A 是相同的。在我们的例子中，我们应该使用有向图，因为从 A 到 B 的路线并不表示从 B 到 A 有相应的路线。</li><li id="17b9" class="lz ma it kw b kx mn la mo ld mp lh mq ll mr lp me mf mg mh bi translated"><strong class="kw iu">简单/多图:</strong>简单图中，每个点之间最多有一条边；在多图中，它允许两个节点之间有多条边，并且每条边可以有不同的属性。为了简化我们的分析，我们选择使用简单的图模型，这意味着我们不考虑航空公司的差异。</li></ul><h2 id="d2e5" class="oc na it bd nb od oe dn nf of og dp nj ld oh oi nl lh oj ok nn ll ol om np on bi translated">Networkx 包中的函数</h2><p id="4271" class="pw-post-body-paragraph ku kv it kw b kx nw ju kz la nx jx lc ld ny lf lg lh nz lj lk ll oa ln lo lp im bi translated">下面是一些对我们分析空中飞行网络有用的函数:</p><ul class=""><li id="b2c3" class="lz ma it kw b kx ky la lb ld mb lh mc ll md lp me mf mg mh bi translated"><strong class="kw iu"> dijkstra_path </strong>:用<a class="ae mm" href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm" rel="noopener ugc nofollow" target="_blank"> Dijkstra 的算法</a>从 A 到 B 的最短路径。我们可以在函数中放入“权重”来表示如何计算“距离”。例如，我们要查找从亚特兰大到台北的最短路径是在仁川机场(ICN)停留，代码如下。</li></ul><pre class="kj kk kl km gt oy ml oz pa aw pb bi"><span id="b61a" class="oc na it ml b gy pc pd l pe pf">nx.dijkstra_path(G, source='ATL', target='TPE', weight='Distance')</span><span id="7fab" class="oc na it ml b gy pg pd l pe pf">&gt;&gt; [Output]: ['ATL', 'ICN', 'TPE']</span></pre><ul class=""><li id="52cf" class="lz ma it kw b kx ky la lb ld mb lh mc ll md lp me mf mg mh bi translated"><strong class="kw iu"> single_source_dijkstra </strong>:当我们没有特定的目的地时，我们可以使用该功能计算到所有可能目的地的距离，并考虑中途停留选项。</li></ul><h1 id="da70" class="mz na it bd nb nc nr ne nf ng ns ni nj jz nt ka nl kc nu kd nn kf nv kg np nq bi translated">使用 OpenFlights 数据</h1><h2 id="8d30" class="oc na it bd nb od oe dn nf of og dp nj ld oh oi nl lh oj ok nn ll ol om np on bi translated">寻找去另一个大陆的最短路线</h2><p id="a525" class="pw-post-body-paragraph ku kv it kw b kx nw ju kz la nx jx lc ld ny lf lg lh nz lj lk ll oa ln lo lp im bi lq translated">没有软件包，我们仍然可以对开放航班的路线数据进行一些分析。例如，我们可以通过<code class="fe mi mj mk ml b">geopy</code>包中的<code class="fe mi mj mk ml b">geodesic</code>函数从机场的纬度和经度计算距离。我们可以使用<code class="fe mi mj mk ml b">pandas</code>包查看每个大陆到另一个大陆的最短路线，该包包含已处理的数据集，其中包含计算的里程信息，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/938a0e867afaba315bf2acf1d62d66be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TmX9cw-XcxvpdJ0AtBzCfQ.png"/></div></div><figcaption class="or os gj gh gi ot ou bd b be z dk">Top 5 rows for Route_Mileage table</figcaption></figure><p id="43ac" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi lq translated">有了这个表格，我们可以找到到另一个大陆的最短距离和相应的机场。以北美为例，到南美的最短路线是从<a class="ae mm" href="https://en.wikipedia.org/wiki/Queen_Beatrix_International_Airport" rel="noopener ugc nofollow" target="_blank">比阿特丽克斯女王国际机场(AUA) </a>到<a class="ae mm" href="https://en.wikipedia.org/wiki/Josefa_Camejo_International_Airport" rel="noopener ugc nofollow" target="_blank"> Josefa Camejo 国际机场(LSP) </a>。到大洋洲，最短的路线是从<a class="ae mm" href="https://en.wikipedia.org/wiki/Daniel_K._Inouye_International_Airport" rel="noopener ugc nofollow" target="_blank">HNL 井上国际机场</a>到<a class="ae mm" href="https://en.wikipedia.org/wiki/Cassidy_International_Airport" rel="noopener ugc nofollow" target="_blank">CXI 卡西迪国际机场</a>。各大洲之间的最短旅行路线可在地图上显示如下。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/8c452d52c89b10fe0963f8ddee06ff7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XuV2KSm_12w8iSSruAC3ww.png"/></div></div><figcaption class="or os gj gh gi ot ou bd b be z dk">The shortest routes from North America to another continents</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/9cd4e7b3398a255174edf6af39339608.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nxc4NUhojMrSGT0LBE7Olg.png"/></div></div><figcaption class="or os gj gh gi ot ou bd b be z dk">The shortest routes from North America to another continents</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/3cd649438c4fd807de035d4c38e1218c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1jGbbhl_c-F1D6NKTX8s3g.png"/></div></div><figcaption class="or os gj gh gi ot ou bd b be z dk">The shortest routes from South America to another continents</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/38af433d782cc6a8758e6bcd8696cec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n5fc0XWD7oiTphRVB97Eqw.png"/></div></div><figcaption class="or os gj gh gi ot ou bd b be z dk">The shortest routes from Europe to another continents</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/29366c4e2dd4822aa5641c3477c6081a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qqV2fDvL0DOdU3CP46llPw.png"/></div></div><figcaption class="or os gj gh gi ot ou bd b be z dk">The shortest routes from Africa to another continents</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/f3dd0c60ee7a56029ae41235ded245e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*koFPc-Nqv2sTDXpzO8ZoFg.png"/></div></div><figcaption class="or os gj gh gi ot ou bd b be z dk">The shortest routes from Asia to another continents</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/baf807e531f77a1e8c3a054812da75cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w869gGsDPJ__3-Gn-00grA.png"/></div></div><figcaption class="or os gj gh gi ot ou bd b be z dk">The shortest routes from Oceania to another continents</figcaption></figure><p id="cf0a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi lq translated">请注意，欧洲和大洋洲之间没有直达航线。然而，这并不意味着欧洲人不能去大洋洲，因为我们总是可以在其他机场转机。在这种复杂的情况下，我们可以使用<code class="fe mi mj mk ml b">Networkx</code>包来有效地处理它。</p><h2 id="b62b" class="oc na it bd nb od oe dn nf of og dp nj ld oh oi nl lh oj ok nn ll ol om np on bi translated">将 OpenFlight 数据导入网络</h2><p id="b312" class="pw-post-body-paragraph ku kv it kw b kx nw ju kz la nx jx lc ld ny lf lg lh nz lj lk ll oa ln lo lp im bi lq translated">在<span class="l lr ls lt bm lu lv lw lx ly di"> F </span>或 Networkx 2.3 版本中，我们可以用<code class="fe mi mj mk ml b">from_pandas_edgelist</code>函数从<code class="fe mi mj mk ml b">pandas</code>导入边，并将其他列作为边的属性。我们可以通过<code class="fe mi mj mk ml b">Networkx</code>中的<code class="fe mi mj mk ml b">set_node_attributes</code>功能输入所有机场的纬度、经度和大陆信息，并通过以下代码使我们将来的分析更加容易。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div><figcaption class="or os gj gh gi ot ou bd b be z dk">Code to import data to Graph and set node attributes</figcaption></figure><h1 id="9ceb" class="mz na it bd nb nc nr ne nf ng ns ni nj jz nt ka nl kc nu kd nn kf nv kg np nq bi translated">优化我们的旅行</h1><p id="7652" class="pw-post-body-paragraph ku kv it kw b kx nw ju kz la nx jx lc ld ny lf lg lh nz lj lk ll oa ln lo lp im bi lq translated">我们可以把我们的目标定义为以最短的距离游遍六大洲。当然，我们可以计算两个机场之间的所有距离，并优化解决方案。然而，由于世界上有 6000 多个机场，可能会有数百万对机场，计算可能会花费很长时间。因此，在给定我们当前所处的位置的情况下，我们可以通过找到离另一个大陆最近的机场来实现目标，而不是计算所有两个机场之间的距离。按照这种逻辑，我们定义一个定制的函数如下。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><p id="dabd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在函数中，我们可以更改一些输入参数:</p><ul class=""><li id="280e" class="lz ma it kw b kx ky la lb ld mb lh mc ll md lp me mf mg mh bi translated"><strong class="kw iu"> G </strong>:全球航线网络图。应该是<code class="fe mi mj mk ml b">Networkx</code>中的图形对象。</li><li id="b6fc" class="lz ma it kw b kx mn la mo ld mp lh mq ll mr lp me mf mg mh bi translated"><strong class="kw iu"> Start_Airport </strong>:我们出发的机场。</li><li id="8fb2" class="lz ma it kw b kx mn la mo ld mp lh mq ll mr lp me mf mg mh bi translated">旅行中我们必须去的机场列表。</li><li id="3121" class="lz ma it kw b kx mn la mo ld mp lh mq ll mr lp me mf mg mh bi translated">旅行中我们不想去的机场列表。</li></ul><h2 id="58fa" class="oc na it bd nb od oe dn nf of og dp nj ld oh oi nl lh oj ok nn ll ol om np on bi translated">计划我们的旅行</h2><p id="f98d" class="pw-post-body-paragraph ku kv it kw b kx nw ju kz la nx jx lc ld ny lf lg lh nz lj lk ll oa ln lo lp im bi lq translated">有了这个工具，我们可以开始环游世界的计划。假设我们从亚特兰大(ATL)开始我们的旅行，我现在住在那里。无需放置任何<code class="fe mi mj mk ml b">Must_go</code>和<code class="fe mi mj mk ml b">Dont_go</code>站点，我们可以在地图上可视化结果。红色的三角形代表我们计划去的目的地机场，黑色的圆点代表我们中途停留的地方。旅行从亚特兰大开始，第一站是<a class="ae mm" href="https://en.wikipedia.org/wiki/Ernesto_Cortissoz_International_Airport" rel="noopener ugc nofollow" target="_blank">南美洲<strong class="kw iu"/>的<strong class="kw iu">BAQ</strong></a>欧内斯特·科尔蒂索兹国际机场。之后我们将飞往西班牙特内里费岛的<strong class="kw iu"> TFN </strong>、西撒哈拉的<strong class="kw iu">欧洲的</strong> ) <strong class="kw iu"> EUN </strong>、土耳其的<strong class="kw iu">亚洲的</strong>、<strong class="kw iu">或帕劳的<strong class="kw iu">大洋洲的</strong>，然后返回亚特兰大。如我们所愿，我们走遍了 6 大洲，总距离 39905 公里。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/519267b66f7525335b6f3828ca33fcad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BSxuatQ5CqmxoR_yzievug.png"/></div></div><figcaption class="or os gj gh gi ot ou bd b be z dk">Our plan for traveling around the world from Atlanta</figcaption></figure><p id="f0e9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi lq translated">正如先前的计划所示，有许多机场实际上远离“我们认为”它应该属于的大陆。例如，TFN 机场，尽管它在西班牙之下，是欧洲的一部分，但它实际上更靠近非洲。此外，我想在旅途中回到台北的家。我们可以用<code class="fe mi mj mk ml b">Globetrotting</code>函数中的<code class="fe mi mj mk ml b">Must_go</code>和<code class="fe mi mj mk ml b">Dont_go</code>参数来完成这两个目标。这是我环游世界的最终计划。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/f4f77852fd3090e2ecbd0d57a20b5be0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rZ0ok5vC7l2uVPURurO7uA.png"/></div></div><figcaption class="or os gj gh gi ot ou bd b be z dk">Plan for traveling around the world from Atlanta with requirements, total distance: 41,830 km</figcaption></figure></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="2721" class="mz na it bd nb nc nd ne nf ng nh ni nj jz nk ka nl kc nm kd nn kf no kg np nq bi translated">结论</h1><p id="ae8c" class="pw-post-body-paragraph ku kv it kw b kx nw ju kz la nx jx lc ld ny lf lg lh nz lj lk ll oa ln lo lp im bi lq translated"><span class="l lr ls lt bm lu lv lw lx ly di">在</span>这篇文章中，我们应用<code class="fe mi mj mk ml b">Networkx</code>软件包分析全球航线网络，并使用 matplotlib 中的<code class="fe mi mj mk ml b">basemap</code>软件包将结果可视化。如前所述，<code class="fe mi mj mk ml b">Networkx</code>是一个强大的复杂网络分析包，在困难的情况下提供有用的信息。有了这些工具，我们可以计划我们的环球旅行，这意味着在一些定制的要求下，访问所有 6 大洲。此外，我们可以在地图上可视化我们的计划，如图所示。</p><p id="4aa8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi lq translated"><span class="l lr ls lt bm lu lv lw lx ly di"> H </span>然而，尽管我们现在精通<code class="fe mi mj mk ml b">Networkx</code>和<code class="fe mi mj mk ml b">basemap</code>套餐，但我们仍然缺乏最重要的资源，时间和金钱，来真正地环游世界。因此，希望我们明天都有一个愉快的工作日！</p><p id="5a5c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">欢迎通过<a class="ae mm" href="https://www.linkedin.com/in/panda0613/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>讨论任何关于 Python、R、数据分析或者 AI 的问题。只是不要在我面前炫耀你的旅行照片！</p></div></div>    
</body>
</html>