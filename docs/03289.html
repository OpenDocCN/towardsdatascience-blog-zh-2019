<html>
<head>
<title>Google Coral USB Accelerator Introduction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌珊瑚 USB 加速器游戏攻略</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/google-coral-usb-accelerator-introduction-18989a962d25?source=collection_archive---------8-----------------------#2019-05-26">https://towardsdatascience.com/google-coral-usb-accelerator-introduction-18989a962d25?source=collection_archive---------8-----------------------#2019-05-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2feb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在小型设备中加速机器学习模型</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c10d3bf607b80876775a8a00a381d3eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8yuzUCkYxgxCmBi2"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><a class="ae ky" href="https://coral.withgoogle.com/products/accelerator/" rel="noopener ugc nofollow" target="_blank">Coral USB Accelerator</a></figcaption></figure><p id="4fe5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">去年在谷歌 Next T1 大会上，谷歌宣布他们正在围绕他们在 T4 的 Edge TPUs T5 在 T2 制造两款新的硬件产品 T3。他们的目的是允许边缘设备，如<a class="ae ky" href="https://www.raspberrypi.org/" rel="noopener ugc nofollow" target="_blank"> Raspberry Pi </a>或其他微控制器，通过允许它们在自己的硬件上本地运行预训练的<a class="ae ky" href="https://www.tensorflow.org/lite" rel="noopener ugc nofollow" target="_blank"> Tensorflow Lite </a>模型的推理，来利用人工智能应用的能力，如图像分类和对象检测。这不仅比拥有服务于机器学习请求的云服务器更安全，而且还可以大大减少延迟。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a2e8" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">珊瑚 USB 加速器</h1><p id="b1ee" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Coral USB 加速器的尺寸为 65x30x8mm 毫米，比其竞争对手英特尔 Movidius 神经计算棒略小。起初，这似乎不是什么大问题，但如果你考虑到英特尔棒往往会阻塞附近的 USB 端口，使其难以使用外设，这就非常重要了。<br/>Coral USB 加速器售价为 60€(之前为 75€)，可通过网站订购，包括:</p><ul class=""><li id="ec0d" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated"><a class="ae ky" href="https://www.mouser.com/ProductDetail/Coral/G950-01456-01?qs=sGAEpiMZZMve4%2FbfQkoj%252BNzzHFZgWGqIphwvwTL5xvk%3D" rel="noopener ugc nofollow" target="_blank">鼠标</a></li><li id="fb1a" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><a class="ae ky" href="https://www.seeedstudio.com/Coral-USB-Accelerator.html" rel="noopener ugc nofollow" target="_blank">参见</a></li><li id="4cb0" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated"><a class="ae ky" href="https://www.amazon.com/dp/B07S214S5Y" rel="noopener ugc nofollow" target="_blank">亚马逊</a></li></ul><p id="9ac1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在硬件方面，它包含一个边缘张量处理单元(TPU)，以相对较低的功耗为深度学习模型提供快速推理。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/3cee21cc2cf109b297d66b2c450c760e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_zAoEO-7fhvvG6tz40_yaQ.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Figure 1: Box contains the USB Accelerator, USB Type-C to USB 3 Adapter and a simple getting started instruction</figcaption></figure><p id="5c0a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">USB 加速器适用于以下操作系统之一:</p><ul class=""><li id="d5b4" class="mz na it lb b lc ld lf lg li nb lm nc lq nd lu ne nf ng nh bi translated">Linux Debian 10 或其衍生版本(如 Ubuntu 18.04 或 Raspbian)</li><li id="ec15" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">安装了 MacPorts 或 Homebrew 的 macOS</li><li id="ca48" class="mz na it lb b lc ni lf nj li nk lm nl lq nm lu ne nf ng nh bi translated">Windows 10</li></ul><p id="8340" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当通过 USB 3.0 连接时，它工作得最好，即使它也可以与 USB 2.0 一起使用，因此也可以与 Raspberry Pi 3 等不提供任何 USB 3 端口的微控制器一起使用。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="e36c" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">设置</h1><p id="7025" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">珊瑚 USB 加速器的设置是没有痛苦的。官方网站上的<a class="ae ky" href="https://coral.ai/docs/accelerator/get-started/#1-install-the-edge-tpu-runtime" rel="noopener ugc nofollow" target="_blank">入门说明</a>在我的树莓派和 PC 上都非常好用，几分钟后就可以运行了。</p><h2 id="d55f" class="no md it bd me np nq dn mi nr ns dp mm li nt nu mo lm nv nw mq lq nx ny ms nz bi translated">1:安装边缘 TPU 运行时</h2><p id="6e55" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Edge TPU 运行时为 Edge TPU 提供核心编程接口。</p><p id="f866" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> Linux </strong></p><p id="cccc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，将 Debian 软件包仓库添加到您的系统中:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="cc45" class="no md it ob b gy of og l oh oi">echo "deb https://packages.cloud.google.com/apt coral-edgetpu-stable main" | sudo tee /etc/apt/sources.list.d/coral-edgetpu.list<br/><br/>curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -<br/><br/>sudo apt-get update</span></pre><p id="1118" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，安装边缘 TPU 运行时:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="5e06" class="no md it ob b gy of og l oh oi">sudo apt-get install libedgetpu1-std</span></pre><p id="a6b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以上命令安装默认的 Edge TPU 运行时，它以降低的时钟频率运行。如果您想以最大时钟频率运行 Coral USB 加速器，请运行以下命令:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="c746" class="no md it ob b gy of og l oh oi">sudo apt-get install libedgetpu1-max</span></pre><p id="d48d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只有当你真的需要最大功率时才建议这样做，因为当你在最大模式下运行时，USB 加速器的金属摸起来会变得非常热。</p><p id="483f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，使用提供的 USB 3.0 电缆将 USB 加速器连接到您的计算机。如果您在安装时已经插上了它，请将其移除并重新插上，以便新安装的 udev 规则可以生效。</p><p id="0d78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> macOS </strong></p><p id="c5ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，下载并解压缩 Edge TPU 运行时:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="d896" class="no md it ob b gy of og l oh oi">curl -O https://dl.google.com/coral/edgetpu_api/edgetpu_runtime_20210119.zip<br/><br/>unzip edgetpu_runtime_20210119.zip</span></pre><p id="ff39" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后安装边缘 TPU 运行时:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="b487" class="no md it ob b gy of og l oh oi">cd edgetpu_runtime<br/><br/>sudo bash install.sh</span></pre><p id="e7c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装脚本将询问您是否要启用最大工作频率。如上所述，如果真的有必要，我建议只使用最大工作频率。</p><p id="ea06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，使用提供的 USB 3.0 电缆将 USB 加速器连接到您的计算机。如果您在安装时已经插上了它，请将其移除并重新插上，以便新安装的 udev 规则可以生效。</p><p id="bce6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">视窗</strong></p><p id="3c2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，确保你有最新版本的<a class="ae ky" href="https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads" rel="noopener ugc nofollow" target="_blank">微软 Visual C++ 2019 可再发行版</a>。</p><p id="efbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，下载<a class="ae ky" href="https://dl.google.com/coral/edgetpu_api/edgetpu_runtime_20210119.zip" rel="noopener ugc nofollow" target="_blank">edge TPU _ runtime _ 2021 01 19 . zip</a>文件，解压，双击<em class="oj"> install.bat </em>文件。</p><p id="263a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装脚本将询问您是否要启用最大工作频率。如上所述，如果真的有必要，我建议只使用最大工作频率。</p><p id="bda9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，使用提供的 USB 3.0 电缆将 USB 加速器连接到您的计算机。如果您在安装时已经插上了它，请将其移除并重新插上，以便新安装的 udev 规则可以生效。</p><h2 id="6f35" class="no md it bd me np nq dn mi nr ns dp mm li nt nu mo lm nv nw mq lq nx ny ms nz bi translated">2:安装 PyCoral 库</h2><p id="4f64" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">PyCoral 是一个构建在 TensorFlow Lite 库之上的 Python 库，旨在加快开发速度并为 Edge TPU 提供额外的功能。</p><p id="15d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要安装 PyCoral 库，请使用以下命令。</p><p id="9783" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> Linux </strong></p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="9c9c" class="no md it ob b gy of og l oh oi">sudo apt-get install python3-pycoral</span></pre><p id="2eaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> MacOS 还是 Windows </strong></p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="ce34" class="no md it ob b gy of og l oh oi">pip3 install --extra-index-url https://google-coral.github.io/py-repo/ pycoral</span></pre><h1 id="a5f8" class="mc md it bd me mf ok mh mi mj ol ml mm jz om ka mo kc on kd mq kf oo kg ms mt bi translated">使用 PyCoral 运行模型</h1><p id="bc5d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">PyCoral 构建在 Tensorflow Lite 之上，允许您在 Edge TPU 上运行 Tensorflow Lite 模型，而无需编写大量样板文件。</p><p id="f99b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以在<a class="ae ky" href="https://github.com/google-coral/pycoral/tree/master/examples" rel="noopener ugc nofollow" target="_blank"> google-coral/pycoral 知识库</a>中找到使用 PyCoral 进行图像分类、对象检测、语义分割和其他应用的示例。</p><p id="f57c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要运行示例影像分类脚本，请遵循以下步骤:</p><p id="939c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">1.从 GitHub 下载示例代码:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="78c4" class="no md it ob b gy of og l oh oi">mkdir coral &amp;&amp; cd coral<br/><br/>git clone https://github.com/google-coral/pycoral.git<br/><br/>cd pycoral</span></pre><p id="432b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.下载鸟类分类器模型、标签文件和一张鸟类照片:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="da85" class="no md it ob b gy of og l oh oi">bash examples/install_requirements.sh classify_image.py</span></pre><p id="6785" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.对鸟照片运行图像分类器:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="dc90" class="no md it ob b gy of og l oh oi">python3 examples/classify_image.py \<br/>--model test_data/mobilenet_v2_1.0_224_inat_bird_quant_edgetpu.tflite \<br/>--labels test_data/inat_bird_labels.txt \<br/>--input test_data/parrot.jpg</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/62b45fd55b9a02d4ce45b884023cba1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*1IbT91GOO8UJmk0V.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Figure 2: Parrot (<a class="ae ky" href="https://coral.ai/static/docs/images/parrot.jpg" rel="noopener ugc nofollow" target="_blank">Source</a>)</figcaption></figure><h1 id="6505" class="mc md it bd me mf ok mh mi mj ol ml mm jz om ka mo kc on kd mq kf oo kg ms mt bi translated">使用 Tensorflow Lite API 运行模型</h1><p id="9f8c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">您也可以在没有 PyCoral 库的情况下运行 Tensorflow Lite 模型。这提供了更多的灵活性，因为它允许您在有和没有边缘 TPU 的情况下运行相同的代码，但它也要求您编写更多的代码来使其工作。</p><p id="3f56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了在 Edge TPU 上运行 Tensorflow Lite 模型，创建一个<a class="ae ky" href="https://coral.ai/docs/edgetpu/tflite-python/#load-tensorflow-lite-and-run-an-inference" rel="noopener ugc nofollow" target="_blank"> tflite 解释器，将 Edge TPU 运行时库作为委托</a>:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="6ed1" class="no md it ob b gy of og l oh oi">import tflite_runtime.interpreter as tflite<br/>interpreter = tflite.Interpreter(model_path,<br/>  experimental_delegates=[tflite.load_delegate('libedgetpu.so.1')])</span></pre><p id="adc5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在<a class="ae ky" href="https://github.com/google-coral/tflite" rel="noopener ugc nofollow" target="_blank"> google-coral/tflite 知识库</a>中找到使用它进行图像分类和物体检测的例子。</p><p id="1e0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过以下步骤运行图像分类示例:</p><p id="0add" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">1.从 Github 下载示例代码:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="cb40" class="no md it ob b gy of og l oh oi">mkdir coral &amp;&amp; cd coral</span><span id="f76d" class="no md it ob b gy oq og l oh oi">git clone <a class="ae ky" href="https://github.com/google-coral/tflite.git" rel="noopener ugc nofollow" target="_blank">https://github.com/google-coral/tflite.git</a></span></pre><p id="9b9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.下载鸟类分类器模型、标签文件和一张鸟类照片:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="ec50" class="no md it ob b gy of og l oh oi">cd tflite/python/examples/classification</span><span id="7a51" class="no md it ob b gy oq og l oh oi">bash install_requirements.sh</span></pre><p id="7c9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.用鸟的照片运行图像分类器:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="04e3" class="no md it ob b gy of og l oh oi">python3 classify_image.py \<br/>--model models/mobilenet_v2_1.0_224_inat_bird_quant_edgetpu.tflite \<br/>--labels models/inat_bird_labels.txt \<br/>--input images/parrot.jpg</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/65921452f61ef57398ebafaeb9d366f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*Pga3nynydwZhSAro.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Figure 3: Parrot (<a class="ae ky" href="https://coral.ai/static/docs/images/parrot.jpg" rel="noopener ugc nofollow" target="_blank">Source</a>)</figcaption></figure><p id="1b52" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该会看到这样的结果:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="c738" class="no md it ob b gy of og l oh oi">INFO: Initialized TensorFlow Lite runtime.<br/>----INFERENCE TIME----<br/>Note: The first inference on Edge TPU is slow because it includes loading the model into Edge TPU memory.<br/>11.8ms<br/>3.0ms<br/>2.8ms<br/>2.9ms<br/>2.9ms<br/>-------RESULTS--------<br/>Ara macao (Scarlet Macaw): 0.76562</span></pre><p id="a28e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以对对象检测示例执行相同的操作:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="7dea" class="no md it ob b gy of og l oh oi">cd tflite/python/examples/detection</span><span id="04cb" class="no md it ob b gy oq og l oh oi">bash install_requirements.sh</span><span id="3707" class="no md it ob b gy oq og l oh oi">python3 detect_image.py \<br/>  --model models/mobilenet_ssd_v2_coco_quant_postprocess_edgetpu.tflite \<br/>  --labels models/coco_labels.txt \<br/>  --input images/grace_hopper.bmp \<br/>  --output images/grace_hopper_processed.bmp</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/4662acd1e6bc427d4ee6d47848bb2583.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*qktulJ8mWltK76DI.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Figure 4: Grace Hopper (<a class="ae ky" href="https://github.com/google-coral/tflite/tree/master/python/examples/detection" rel="noopener ugc nofollow" target="_blank">Source</a>)</figcaption></figure><p id="bcc3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该会看到这样的结果:</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="c5d1" class="no md it ob b gy of og l oh oi">INFO: Initialized TensorFlow Lite runtime.<br/>----INFERENCE TIME----<br/>Note: The first inference is slow because it includes loading the model into Edge TPU memory.<br/>33.92 ms<br/>19.71 ms<br/>19.91 ms<br/>19.91 ms<br/>19.90 ms<br/>-------RESULTS--------<br/>tie<br/>  id:     31<br/>  score:  0.83984375<br/>  bbox:   BBox(xmin=228, ymin=421, xmax=293, ymax=545)<br/>person<br/>  id:     0<br/>  score:  0.83984375<br/>  bbox:   BBox(xmin=2, ymin=5, xmax=513, ymax=596)</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="a3f2" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">使用边缘 TPU Python API 运行模型</h1><blockquote class="os ot ou"><p id="f752" class="kz la oj lb b lc ld ju le lf lg jx lh ov lj lk ll ow ln lo lp ox lr ls lt lu im bi translated"><em class="it">Edge TPU API(Edge TPU 模块)提供了执行图像分类和对象检测的简单 API。它构建在 TensorFlow Lite C++ API 之上，并抽象出处理输入张量和输出张量所需的大量代码。Edge TPU API 还包括通过权重印记或反向传播来执行设备上传输学习的 API。— </em> <a class="ae ky" href="https://coral.ai/docs/edgetpu/api-intro" rel="noopener ugc nofollow" target="_blank"> <em class="it">谷歌珊瑚文档</em> </a></p></blockquote><p id="f783" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，你必须安装边缘 TPU Python 库。在 Mac 或 Windows 上，请遵循此处的说明<a class="ae ky" href="https://coral.ai/software/#edgetpu-python-api" rel="noopener ugc nofollow" target="_blank"/>。如果您使用的是 Linux，可以用 Debian 包安装这个库(示例保存在/usr/share/edgetpu/examples):</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="40aa" class="no md it ob b gy of og l oh oi">sudo apt-get update</span><span id="1fd1" class="no md it ob b gy oq og l oh oi">sudo apt-get install python3-edgetpu</span></pre><p id="0df4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以用与 Tensorflow Lite 示例相同的方式运行这些示例，但是它们使用的是 Edge TPU 库，而不是 Tensorflow Lite。</p><h1 id="2878" class="mc md it bd me mf ok mh mi mj ol ml mm jz om ka mo kc on kd mq kf oo kg ms mt bi translated">构建您自己的模型</h1><p id="36bd" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">尽管谷歌提供了许多可以与 USB 加速器一起使用的预编译模型，你可能想要运行你自己的定制模型。</p><p id="5f27" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，您有多种选择。您可以使用一种称为迁移学习的技术，重新训练已经与 Edge TPU 兼容的现有模型，而不是从头开始构建您的模型。要了解更多细节，请查看重新训练<a class="ae ky" href="https://coral.ai/docs/edgetpu/retrain-classification" rel="noopener ugc nofollow" target="_blank">图像分类</a>和<a class="ae ky" href="https://coral.ai/docs/edgetpu/retrain-detection/" rel="noopener ugc nofollow" target="_blank">物体检测</a>模型的官方教程。</p><p id="afcc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢从头开始训练一个模型，你当然可以这样做，但是你需要注意在 USB 加速器上部署你的模型时会有一些限制。</p><p id="909a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，你需要对你的模型进行量化。这意味着将所有 32 位浮点数(如权重和激活输出)转换为最接近的 8 位定点数。</p><p id="00c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了与边缘 TPU 兼容，必须使用量化感知训练(推荐)或全整数训练后量化。有关更多信息，请查看文档中的<a class="ae ky" href="https://coral.ai/docs/edgetpu/models-intro/#quantization" rel="noopener ugc nofollow" target="_blank">量化部分</a>。</p><p id="3b39" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">量化后，你需要将你的模型从 Tensorflow 转换到 Tensorflow Lite，然后使用<a class="ae ky" href="https://coral.ai/docs/edgetpu/compiler/" rel="noopener ugc nofollow" target="_blank"> Edge TPU 编译器</a>进行编译。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oy"><img src="../Images/1e6fd18adf68f685657f4d9c8b165bed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*k0Zm7zcNpKq4-YBN.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Figure 5: Building custom model process (<a class="ae ky" href="https://coral.ai/docs/edgetpu/models-intro/#model-requirements" rel="noopener ugc nofollow" target="_blank">Source</a>)</figcaption></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4268" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">推荐读物</h1><div class="oz pa gp gr pb pc"><a href="https://coral.withgoogle.com/docs/accelerator/get-started/" rel="noopener  ugc nofollow" target="_blank"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd iu gy z fp ph fr fs pi fu fw is bi translated">开始使用 USB 加速器| Coral</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">了解如何在 Linux 计算机或 Raspberry Pi 上设置 Coral USB 加速器，并运行一些演示代码。</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">coral.withgoogle.com</p></div></div><div class="pl l"><div class="pm l pn po pp pl pq ks pc"/></div></div></a></div><div class="oz pa gp gr pb pc"><a href="https://coral.withgoogle.com/docs/edgetpu/models-intro/" rel="noopener  ugc nofollow" target="_blank"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd iu gy z fp ph fr fs pi fu fw is bi translated">TPU |珊瑚边缘的张量流模型</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">有关如何创建与 Edge TPU 兼容的 TensorFlow Lite 模型的详细信息</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">coral.withgoogle.com</p></div></div><div class="pl l"><div class="pr l pn po pp pl pq ks pc"/></div></div></a></div><h1 id="1c3a" class="mc md it bd me mf ok mh mi mj ol ml mm jz om ka mo kc on kd mq kf oo kg ms mt bi translated">结论</h1><p id="9900" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">谷歌 Coral USB 加速器是一款出色的硬件，它允许边缘设备，如<a class="ae ky" href="https://www.raspberrypi.org/" rel="noopener ugc nofollow" target="_blank"> Raspberry Pi </a>或其他微型计算机，利用人工智能应用的力量。它拥有优秀的<a class="ae ky" href="https://coral.withgoogle.com/docs/" rel="noopener ugc nofollow" target="_blank">文档</a>，包含从<a class="ae ky" href="https://coral.ai/docs/accelerator/get-started/" rel="noopener ugc nofollow" target="_blank">安装和演示应用</a>到<a class="ae ky" href="https://coral.ai/docs/edgetpu/models-intro/" rel="noopener ugc nofollow" target="_blank">构建你自己的模型</a>的所有内容，以及详细的<a class="ae ky" href="https://coral.ai/docs/edgetpu/api-intro/" rel="noopener ugc nofollow" target="_blank"> Python API </a>文档。</p><p id="5b57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是这篇文章的全部内容。感谢阅读。如果你对我接下来应该报道的内容有任何反馈、建议或想法，请随时在社交媒体上发表评论或联系我。</p></div></div>    
</body>
</html>