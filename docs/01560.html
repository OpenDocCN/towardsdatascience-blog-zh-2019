<html>
<head>
<title>Computer Vision for Beginners: Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">初学者的计算机视觉:第 1 部分</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/computer-vision-for-beginners-part-1-7cca775f58ef?source=collection_archive---------1-----------------------#2019-03-13">https://towardsdatascience.com/computer-vision-for-beginners-part-1-7cca775f58ef?source=collection_archive---------1-----------------------#2019-03-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="315d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">OpenCV 和 Python 中的图像处理简介</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/59095a76063817952fb96d4ddb887418.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CwSvaseYli4Jst1ibNXTgQ.jpeg"/></div></div></figure><p id="1616" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">计算机视觉是人工智能领域最热门的话题之一。它在自动驾驶汽车、机器人以及各种照片校正应用程序方面取得了巨大进步。目标检测每天都在稳步前进。GANs 也是研究人员目前关注的一个问题。视觉正在向我们展示技术的未来，我们甚至无法想象它的可能性的尽头会是什么。</p><p id="1707" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">那么，你想迈出计算机视觉的第一步，并参与到这一最新的运动中来吗？欢迎你来对地方了。从这篇文章中，我们将有一系列的图像处理和物体检测的基础教程。这是 OpenCV 初学者教程的第一部分，完整系列如下:</p><ol class=""><li id="42f8" class="lq lr it kw b kx ky la lb ld ls lh lt ll lu lp lv lw lx ly bi translated"><strong class="kw iu"> <em class="lz">理解颜色模型并在图像上绘制图形</em> </strong></li><li id="3972" class="lq lr it kw b kx ma la mb ld mc lh md ll me lp lv lw lx ly bi translated"><a class="ae mf" rel="noopener" target="_blank" href="/computer-vision-for-beginners-part-2-29b3f9151874">带滤波的图像处理基础知识</a></li><li id="c30b" class="lq lr it kw b kx ma la mb ld mc lh md ll me lp lv lw lx ly bi translated"><a class="ae mf" rel="noopener" target="_blank" href="/computer-vision-for-beginners-part-3-79de62dbeef7">从特征检测到人脸检测</a></li><li id="507b" class="lq lr it kw b kx ma la mb ld mc lh md ll me lp lv lw lx ly bi translated"><a class="ae mf" rel="noopener" target="_blank" href="/computer-vision-for-beginners-part-4-64a8d9856208">轮廓检测和享受一点乐趣</a></li></ol><p id="42da" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">本系列的第一个故事将是关于安装 OpenCV，解释颜色模型和在图像上绘制图形。本教程的完整代码也可以在<a class="ae mf" href="https://nbviewer.jupyter.org/github/jjone36/vision_4_beginners/blob/master/01.image_processing/01_introduction.ipynb" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> Github </strong> </a>上找到。现在让我们开始吧。</p><h1 id="6e38" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">OpenCV 简介</h1><p id="bd9c" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated"><a class="ae mf" href="https://en.wikipedia.org/wiki/Digital_image_processing" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu">图像处理</strong> </a>是对图像进行一些操作，以获得想要的操作。想想当我们开始新的数据分析时，我们会做些什么。我们做一些数据预处理和特征工程。图像处理也是一样。我们通过图像处理来处理图片，从中提取有用的信息。我们可以减少噪音，控制亮度和色彩对比度。要了解详细的图像处理基础知识，请访问本视频<a class="ae mf" href="https://www.youtube.com/watch?v=QMLbTEQJCaI" rel="noopener ugc nofollow" target="_blank"><strong class="kw iu"/></a><strong class="kw iu">。</strong></p><p id="3d28" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">OpenCV 代表<a class="ae mf" href="https://opencv.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> <em class="lz">开源计算机视觉</em> </strong> </a>库，由英特尔于 1999 年发明。它最初是用 C/C++编写的，所以你可能会看到更多的 C 语言教程，而不是 Python。但是现在它也在 Python 中被广泛用于计算机视觉。首先，让我们为使用 OpenCV 建立一个合适的环境。安装可以按如下方式进行，但您也可以在此处  <strong class="kw iu">找到详细描述<a class="ae mf" href="https://pypi.org/project/opencv-python/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu">。</strong></a></strong></p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="2723" class="ni mh it ne b gy nj nk l nl nm">pip install opencv-python==3.4.2<br/>pip install opencv-contrib-python==3.3.1</span></pre><p id="457a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">完成安装后，尝试导入软件包，看看它是否工作正常。如果你得到的回报没有任何错误，那么你现在就可以开始了！</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="e13d" class="ni mh it ne b gy nj nk l nl nm">import cv2<br/>cv2.__version__</span></pre><p id="a899" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们要用 OpenCV 做的第一步是导入一个图像，可以这样做。</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="6f84" class="ni mh it ne b gy nj nk l nl nm">import numpy as np<br/>import matplotlib.pyplot as plt<br/>%matplotlib inline</span><span id="1a46" class="ni mh it ne b gy nn nk l nl nm"># Import the image<br/>img = cv2.imread('burano.jpg')<br/>plt.imshow(img)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/7a08b67627e413eafe297ee1eb9c3cec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*Oe3JzhYDb3I6wovNZ-488w.png"/></div></figure><p id="3ef2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你去过布拉诺吗？它是意大利最美丽的岛屿之一。如果你还没有去过那里，你一定要在下一个假期去看看这个地方。但是如果你已经知道这个岛，你可能会注意到这张照片有些不同。和我们平时看到的布拉诺的图片有点不一样。应该比这更让人欣喜吧！</p><p id="77ef" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是因为 OpenCV 中颜色模式的默认设置是按照 BGR 的顺序来的，这与 Matplotlib 不同。因此，要查看 RGB 模式下的图像，我们需要将其从 BGR 转换为 RGB，如下所示。</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="bda0" class="ni mh it ne b gy nj nk l nl nm"># Convert the image into RGB<br/>img_rgb = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)<br/>plt.imshow(img_rgb)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/80eb2a88830f96bd52ec856330b6aa89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*dIUzwVFYunVzBtRdOb7BSA.png"/></div></figure><p id="cc6a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，这是布拉诺！意大利如此可爱的岛屿！</p><h1 id="f0d4" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">不仅仅是 RGB</h1><p id="4ab6" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">让我们再多谈一点颜色模式。<a class="ae mf" href="https://www.designersinsights.com/designer-resources/understanding-color-models/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> <em class="lz">色彩模型</em></strong></a><strong class="kw iu"><em class="lz"/></strong>是一个使用原色创建全范围色彩的系统。这里有两种不同的颜色模型:<strong class="kw iu"> <em class="lz">加色模型</em> </strong>和<strong class="kw iu"> <em class="lz">减色模型</em> </strong>。加色模型使用光在计算机屏幕上表现颜色，而减色模型使用墨水在纸上打印这些数字图像。对于前者，原色是红色、绿色和蓝色(RGB ),对于后者，原色是青色、品红色、黄色和黑色(CMYK)。我们在图像上看到的所有其他颜色都是由这些原色组合或混合而成的。因此，当图片以 RGB 和 CMYK 表示时，它们的描述会有所不同。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/5186277bfd53f1d22d8932380cabe20e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CSmlQDizc03csCaSgMgMIw.png"/></div></div><figcaption class="nr ns gj gh gi nt nu bd b be z dk">(<a class="ae mf" href="https://www.kinkos.co.kr/bbs/board.php?bo_table=k_magazine&amp;wr_id=9&amp;page=2" rel="noopener ugc nofollow" target="_blank">Source</a>)</figcaption></figure><p id="acd9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你会很习惯这两种模型。然而，在颜色模型的世界中，有两种以上的模型。其中，<strong class="kw iu"> <em class="lz">灰度，HSV </em> </strong>和<strong class="kw iu"> <em class="lz"> HLS </em> </strong>是你在计算机视觉中会经常看到的。</p><p id="b6b2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">灰度很简单。它通过黑白的强度来表示图像和形态，这意味着它只有一个通道。要查看灰度图像，我们需要将彩色模式转换为灰色，就像我们之前对 BGR 图像所做的那样。</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="1724" class="ni mh it ne b gy nj nk l nl nm"># Convert the image into gray scale<br/>img_gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)<br/>plt.imshow(img_gray, cmap = 'gray')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/25270feebf79c064648e63bdbeaa4731.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E1cRhyj4ByJ_qrTev3hTlA.png"/></div></div></figure><p id="943d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">实际上，RGB 图像是由三个通道堆叠而成的:R、G 和 b。因此，如果我们选取每个通道并逐一描绘它们，我们就可以理解颜色通道是如何构成的。</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="20ba" class="ni mh it ne b gy nj nk l nl nm"># Plot the three channels of the image<br/>fig, axs = plt.subplots(nrows = 1, ncols = 3, figsize = (20, 20))</span><span id="a4aa" class="ni mh it ne b gy nn nk l nl nm">for i in range(0, 3):<br/>    ax = axs[i]<br/>    ax.imshow(img_rgb[:, :, i], cmap = 'gray')<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/aded1f4906086ec3865b17106af65890.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zeVGeXCBFE4FLSbv_bUaLw.png"/></div></div></figure><p id="b3e9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">看看上面的图片。这三个图像向您展示了每个通道是如何组成的。在 R 通道图片中，红色饱和度高的部分看起来是白色的。这是为什么呢？这是因为红色部分的值接近 255。在灰度模式下，该值越高，颜色越白。您也可以用 G 或 B 通道来检查这一点，并比较某些部分之间的差异。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/252cd139a8be4479d429b4d182da6fb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t6gJMcMAu8EUXcgbhhGy5Q.png"/></div></div></figure><p id="0ade" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">HSV 和 HLS 有一点不同。正如你在上面看到的，它们有一个三维的表示，它更类似于人类的感知方式。<strong class="kw iu"> <em class="lz"> HSV </em> </strong>代表色相、饱和度、明度。<strong class="kw iu"> <em class="lz"> HSL </em> </strong>代表色相、饱和度、明度。HSV 的中心轴是颜色值，而 HSL 的中心轴是光量。沿着中心轴的角度，有色调，实际的颜色。而离中轴线的距离属于饱和。可以按如下方式转换颜色模式。</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="e116" class="ni mh it ne b gy nj nk l nl nm"># Transform the image into HSV and HLS models<br/>img_hsv = cv2.cvtColor(img, cv2.COLOR_BGR2HSV)<br/>img_hls = cv2.cvtColor(img, cv2.COLOR_BGR2HLS)</span><span id="5270" class="ni mh it ne b gy nn nk l nl nm"># Plot the converted images<br/>fig, (ax1, ax2) = plt.subplots(nrows = 1, ncols = 2, figsize = (20, 20))<br/>ax1.imshow(img_hsv)<br/>ax2.imshow(img_hls)<br/>plt.show()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/ec40b72ad00b1e7f9b610f8ee733ce0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f3pRIVbutpa9KBwuqsl43w.png"/></div></div></figure><p id="4167" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但是为什么我们要变换颜色呢？这些是干什么用的？可以给出答案的一个例子是车道检测。请看下图。查看如何在不同的颜色模式下检测车道。在计算机视觉任务中，我们在蒙版的同时进行多种颜色模式的转换。如果你想了解更多关于如何在车道检测任务中应用图像处理的信息，请随时查看由<a class="nz oa ep" href="https://medium.com/u/26a6ee15a5c5?source=post_page-----7cca775f58ef--------------------------------" rel="noopener" target="_blank"> nachiket tanksale </a>撰写的<a class="ae mf" rel="noopener" target="_blank" href="/finding-lane-lines-simple-pipeline-for-lane-detection-d02b62e7572b"> <strong class="kw iu">这篇文章</strong> </a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/49150d979d00b829b787d08069f397a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gs_f7aWJQktSkIWLy2m70g.png"/></div></div><figcaption class="nr ns gj gh gi nt nu bd b be z dk"><a class="ae mf" rel="noopener" target="_blank" href="/finding-lane-lines-simple-pipeline-for-lane-detection-d02b62e7572b">RGB vs Grayscale (darkened) vs HSV vs HSL</a></figcaption></figure><p id="545b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我相信你明白了。图像处理是“数据预处理”它减少噪音，提取有用的模式，使分类和检测任务更容易。因此，所有这些技术，包括我们将在后面讨论的技术，都是为了帮助模型更容易地检测模式。</p><h1 id="0f7b" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">在图像上绘图</h1><p id="fac2" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">让我们在图像上添加一些数字。现在，我们要去巴黎。你听说过<a class="ae mf" href="https://en.wikipedia.org/wiki/Wall_of_Love" rel="noopener ugc nofollow" target="_blank">爱情墙</a>吗？这是一面用各种国际语言写满“我爱你”的墙。我们要做的是找到我们语言中的单词，并用一个矩形标记它们。因为我来自韩国，我会在韩语中查找“我爱你”。首先，我将复制原始图像，然后用<code class="fe oc od oe ne b">cv2.rectangle()</code>画一个矩形，我们需要给出左上角和右下角的坐标值。</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="9d85" class="ni mh it ne b gy nj nk l nl nm"># Copy the image<br/>img_copy = img.copy()</span><span id="ecf4" class="ni mh it ne b gy nn nk l nl nm"># Draw a rectangle <br/>cv2.rectangle(img_copy, pt1 = (800, 470), pt2 = (980, 530), <br/>              color = (255, 0, 0), thickness = 5)<br/>plt.imshow(img_copy)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/815ae752cac76486abc9336068920838.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*6elxrI90FEiDhWplc74mYg.png"/></div></figure><p id="7adc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">太好了！我觉得我抓对位置了。让我们再试一次。我可以从图像中看到一个韩文单词，所以这次我会画一个圆圈。用<code class="fe oc od oe ne b">cv2.circle()</code>，我们需要指定它的圆心的点和它的半径的长度。</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="0552" class="ni mh it ne b gy nj nk l nl nm"># Draw a circle <br/>cv2.circle(img_copy, center = (950, 50), radius = 50, <br/>           color = (0, 0, 255), thickness = 5)<br/>plt.imshow(img_copy)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/1dd430e71e73ccf8a5d7a06e52c1ef4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*fMZjDpFbVwTncrQAvOazdg.png"/></div></figure><p id="0887" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们也可以在图像上放置文本数据。这次我们为什么不写这面墙的名字呢？使用<code class="fe oc od oe ne b">cv2.putText()</code>，我们可以指定文本的位置、字体和大小。</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="61c0" class="ni mh it ne b gy nj nk l nl nm"># Add text <br/>cv2.putText(img_copy, text = "the Wall of Love", <br/>            org = (250, 250),<br/>            fontFace = cv2.FONT_HERSHEY_DUPLEX, <br/>            fontScale = 2, <br/>            color = (0, 255, 0), <br/>            thickness = 2, <br/>            lineType = cv2.LINE_AA)<br/>plt.imshow(img_copy)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/b2f1f6880d5844da75dde16ca7a5b113.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*ZnWzOppbxJoHp6Gb2R3OZA.png"/></div></figure><p id="927c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这真是一面“可爱”的墙，不是吗？自己试试，用你的语言找到“我爱你”！😍</p><h1 id="ff75" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">不仅仅是图像</h1><p id="218b" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">现在我们去了意大利和法国。接下来你想去哪里？我们为什么不放一张地图并标出这些地方呢？我们将创建一个窗口并绘制图形，不是通过指定点，而是通过直接点击窗口。我们先试一圈。我们首先创建一个函数，用鼠标位置和点击的数据画一个圆。</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="5274" class="ni mh it ne b gy nj nk l nl nm"># Step 1. Define callback function<br/><strong class="ne iu">def </strong>draw_circle(event, x, y, flags, param):</span><span id="812b" class="ni mh it ne b gy nn nk l nl nm"><strong class="ne iu">    if </strong>event == cv2.EVENT_LBUTTONDOWN:<br/>            cv2.circle(img, center = (x, y), radius = 5, <br/>                       color = (87, 184, 237), thickness = -1)</span><span id="7336" class="ni mh it ne b gy nn nk l nl nm"><strong class="ne iu">    elif </strong>event == cv2.EVENT_RBUTTONDOWN:        <br/>            cv2.circle(img, center = (x, y), radius = 10,  <br/>                       color = (87, 184, 237), thickness = 1)</span></pre><p id="dde5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用<code class="fe oc od oe ne b">cv2.EVENT_LBUTTONDOWN</code>或<code class="fe oc od oe ne b">cv2.EVENT_RBUTTONDOWN</code>，当我们按下鼠标按钮时，我们可以带来该位置的数据。鼠标的位置将是<code class="fe oc od oe ne b">(x, y)</code>，我们将画一个圆心在该点的圆。</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="a82b" class="ni mh it ne b gy nj nk l nl nm"># Step 2. Call the window<br/>img = cv2.imread('map.png')</span><span id="9284" class="ni mh it ne b gy nn nk l nl nm">cv2.namedWindow(winname = 'my_drawing')<br/>cv2.setMouseCallback('my_drawing', draw_circle)</span></pre><p id="771c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将设置一张地图作为窗口的背景，并将窗口命名为<em class="lz"> my_drawing </em>。窗口的名称可以是任何东西，但是它应该是相同的，因为它的作用就像窗口的 id。使用<code class="fe oc od oe ne b">cv2.setMouseCallback()</code>，我们在窗口和我们在步骤 1 中创建的函数<code class="fe oc od oe ne b">draw_circle</code>之间建立一个连接。</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="93ba" class="ni mh it ne b gy nj nk l nl nm"># Step 3. Execution<br/><strong class="ne iu">while</strong> True:<br/>    cv2.imshow('my_drawing',img)<br/>    <strong class="ne iu">if </strong>cv2.waitKey(10) &amp; 0xFF == 27:<br/>       <strong class="ne iu"> break</strong></span><span id="2a31" class="ni mh it ne b gy nn nk l nl nm">cv2.destroyAllWindows()</span></pre><p id="3af3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们使用 while 循环执行窗口。不要忘记设置断点，除非你正在进行无限循环。if 子句的条件是当我们按键盘上的 ESC 键时关闭窗口。将此保存为文件，并将其导入您的终端。如果你要使用 jupyter 实验室，把代码放在一个单元格中并执行。现在，告诉我！你想去哪？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/5ac08e0c3ebbf5d96e8eac601a479608.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Q3GfBHxWFS_ziXb1CGQkMg.gif"/></div></div></figure><p id="acd8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们试试长方形。由于矩形需要两个点用于<code class="fe oc od oe ne b">cv2.rectangle()</code>中的<strong class="kw iu"> pt1 </strong>和<strong class="kw iu"> pt2 </strong>，我们需要一个额外的步骤来设置第一个点击点为<strong class="kw iu"> pt1 </strong>和最后一个点为<strong class="kw iu"> pt2 </strong>。我们将使用<code class="fe oc od oe ne b">cv2.EVENT_MOUSEMOVE</code>和<code class="fe oc od oe ne b">cv2.EVENT_LBUTTONUP</code>来检测鼠标的移动。</p><p id="ff2a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们首先将<code class="fe oc od oe ne b">drawing = False</code>定义为默认值。当按下左键时，<code class="fe oc od oe ne b">drawing</code>变为真，我们将第一个位置指定为<strong class="kw iu"> pt1 </strong>。如果绘图打开，它会将当前点作为<strong class="kw iu"> pt2 </strong>并在我们移动鼠标时继续绘制矩形。这就像重叠的数字。当左键向上时，<code class="fe oc od oe ne b">drawing</code>变为假，以鼠标的最后位置作为其<strong class="kw iu"> pt2 </strong>的终点。</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="5992" class="ni mh it ne b gy nj nk l nl nm"># Initialization<br/>drawing = False<br/>ix = -1<br/>iy = -1</span><span id="6ea6" class="ni mh it ne b gy nn nk l nl nm"># create a drawing function<br/><strong class="ne iu">def</strong> draw_rectangle(event, x, y, flags, params):<br/>    <br/>    <strong class="ne iu">global </strong>ix, iy, drawing</span><span id="6939" class="ni mh it ne b gy nn nk l nl nm">    <strong class="ne iu">if</strong> event == cv2.EVENT_LBUTTONDOWN:<br/>        drawing = True<br/>        ix, iy = x, y<br/>        <br/>    <strong class="ne iu">elif</strong> event == cv2.EVENT_MOUSEMOVE:<br/>        if drawing == True:<br/>            cv2.rectangle(img, pt1=(ix, iy), pt2=(x, y), <br/>                          color = (87, 184, 237), thickness = -1)<br/>            <br/>    <strong class="ne iu">elif</strong> event == cv2.EVENT_LBUTTONUP:<br/>        drawing = False<br/>        cv2.rectangle(img, pt1=(ix, iy), pt2=(x, y), <br/>                     color = (87, 184, 237), thickness = -1)</span></pre><p id="f07f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将步骤 1 中的<code class="fe oc od oe ne b">draw_circle</code>功能替换为<code class="fe oc od oe ne b">draw_rectangle</code>。请不要忘记在回调函数中做一个改变，<code class="fe oc od oe ne b">cv2.setMouseCallback()</code>也一样。所以整个代码脚本如下。保存这个脚本文件，并在终端或 jupyter 笔记本上运行它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><h1 id="5adc" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">下一步是什么？</h1><p id="ec05" class="pw-post-body-paragraph ku kv it kw b kx my ju kz la mz jx lc ld na lf lg lh nb lj lk ll nc ln lo lp im bi translated">你喜欢第一次使用 OpenCV 吗？您还可以尝试其他功能，如绘制直线或多边形。可以随意查看它的文档，可以在这里 找到<a class="ae mf" href="https://docs.opencv.org/2.4/modules/core/doc/drawing_functions.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu">。下一次，我们将讨论更高级的技术，如附加两个不同的图像，图像轮廓和对象检测。</strong></a></p><p id="8ccb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">⭐️，你可能也会觉得这些系列很有趣，⭐️</p><ul class=""><li id="5d0b" class="lq lr it kw b kx ky la lb ld ls lh lt ll lu lp oi lw lx ly bi translated"><strong class="kw iu">卷积神经网络的基本概念:</strong></li></ul><div class="oj ok gp gr ol om"><a rel="noopener follow" target="_blank" href="/the-most-intuitive-and-easiest-guide-for-convolutional-neural-network-3607be47480"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">CNN 最直观、最简单的指南</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">揭开卷积神经网络的神秘面纱</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">towardsdatascience.com</p></div></div><div class="ov l"><div class="ow l ox oy oz ov pa ks om"/></div></div></a></div><ul class=""><li id="96fb" class="lq lr it kw b kx ky la lb ld ls lh lt ll lu lp oi lw lx ly bi translated"><strong class="kw iu">卷积神经网络的高级网络:</strong></li></ul><div class="oj ok gp gr ol om"><a rel="noopener follow" target="_blank" href="/deep-dive-into-the-computer-vision-world-f35cd7349e16"><div class="on ab fo"><div class="oo ab op cl cj oq"><h2 class="bd iu gy z fp or fr fs os fu fw is bi translated">深入了解计算机视觉世界:第 1 部分</h2><div class="ot l"><h3 class="bd b gy z fp or fr fs os fu fw dk translated">从 VGG 开始，ResNet 和盗梦空间网络</h3></div><div class="ou l"><p class="bd b dl z fp or fr fs os fu fw dk translated">towardsdatascience.com</p></div></div><div class="ov l"><div class="pb l ox oy oz ov pa ks om"/></div></div></a></div><p id="28a6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有你想改正的错误吗？请与我们分享您的见解。我总是乐于交谈，所以请在下面留下评论，分享你的想法。我还在 LinkedIn<a class="ae mf" href="https://www.linkedin.com/in/jiwon-jeong/" rel="noopener ugc nofollow" target="_blank">上分享有趣和有用的资源，所以请随时关注或联系我。下次我会带着另一个有趣的故事回来的！</a></p></div></div>    
</body>
</html>