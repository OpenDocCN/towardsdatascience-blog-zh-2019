<html>
<head>
<title>How Many Samples Do I Need in My Test?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我的测试需要多少样本？</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-many-samples-do-i-need-in-my-test-db14e668289?source=collection_archive---------20-----------------------#2019-10-10">https://towardsdatascience.com/how-many-samples-do-i-need-in-my-test-db14e668289?source=collection_archive---------20-----------------------#2019-10-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8d81" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">计算二项式测试的最小测试规模需要知道什么，以及如何计算</h2></div><p id="bc10" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我熟悉假设检验的来龙去脉时，我没能找到一个简单问题的直接答案:当实现 A/B 检验时，你需要多大的检验规模？</p><p id="4fd0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个看似简单的问题很难回答，原因有很多。</p><h2 id="4070" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">无效假设可能是真的</h2><p id="9f9a" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">对于大多数测试来说，人们都希望证明另一个假设，而不是零假设。人们希望发现他们应用的治疗具有某种效果)。</p><p id="5889" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果替代假设是真的，但测试规模太小，你可能会错误地认为你不能反驳零假设。随着否定零假设的议程，不断增加样本量直到各组出现统计差异是有意义的。然而，如果处理 A 和 B 在统计学上没有差异，你可以永远增加样本量，这不会改变结果。任何样本量都会告诉你零假设是不能被证伪的。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mc"><img src="../Images/8849070493de611c61c64adc1cf6b537.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1vbIoiaCigUL6CywCnzLAQ.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk">An A/B test in which the results may be so similar that any difference between them is likely due to random chance.</figcaption></figure><p id="4433" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">想一想布尔迪安的驴的悖论:当一头驴又饿又渴时，它被放在食物和水之间。在这个有争议的悖论中，驴因为无法决定是吃还是喝而死于饥渴。</p><p id="ddf0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们暂停这个悖论的任何问题，并将其视为对干草(A)或水(B)的需求之间的测试，我们的样本大小为 1(我们的驴),我们的零假设为真(同样饥渴的驴对干草或水的需求没有区别)。</p><p id="530c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这种情况下，我们增加多少头驴子(我们的样本量有多大)并不重要——只要驴子同样饥渴，它们中任何一个被选中的比率都会告诉我们，水和干草是同样需要的。即使样本量变得如此之大，以至于我们偶然得到了几头做出选择的驴，这种情况也足够罕见和随机，我们仍然会发现零假设是正确的。</p><p id="912f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">在测试实施前需要知道结果</strong></p><p id="ab24" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设替代假设为真，证明零假设为假的最小样本量取决于许多因素，其中许多因素只有在测试后才能知道。</p><p id="c9e4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先是两组之间预期的成功率差异。例如，如果按钮 A 的性能比按钮 B 好 100%,那么通过较小的样本量就可以清楚地看出，按钮之间的差异是基于按钮的性能，而不是随机的。相比之下，如果按钮 A 的表现比按钮 B 好 5%,那么就需要更大的样本量来确定这两个按钮之间确实存在的差异。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mt"><img src="../Images/0d99e6a833361d31ec96d9a94c3c69c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c5IEuC8Brz25ep4URpDXBg.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk">The A/B test to the left is likely to have a bigger difference in performance across buttons than the A/B test to the right. As a result the test to the left needs fewer samples to provide statistical confidence in the difference between the buttons.</figcaption></figure><p id="4746" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">成功率也决定了需要测试多少样本。例如，如果您正在测量人们点击链接的比率，那么您的样本大小就是您向其显示链接的人数。点击那个链接的人越多，你从测试中得到的有用结果就越多。</p><p id="d5b7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你在测试中成功的标准是一小部分人可能会做的事情，例如，购物，你将需要更大的样本量来获得相同数量的结果。</p><p id="2266" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接近 0 或 100%的成功率增加了获得统计显著结果所需的样本量，因为它们给你的测试集中的成功(或失败)比例更小。</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mt"><img src="../Images/a3cb28021126d305dbfabb1601fc047d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hy8h0fZCNlYFcwpf3_YIaQ.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk">The likelihood of success for either button A or button B on the test on the left will be higher than that for the test on the right. As a result, the sample size needed for the test on the left would be lower than the sample size for the test on the right.</figcaption></figure><h1 id="4efd" class="mu lf it bd lg mv mw mx lj my mz na lm jz nb ka lp kc nc kd ls kf nd kg lv ne bi translated">那么你的测试需要多少样本呢？</h1><p id="900b" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">根据上述问题，这个问题只有在假设替代假设为真的情况下才能得到真正的回答。在测试开始时做出这样的假设是与假设检验的思想相违背的。然而，为了设置一个数字，让我们首先假设替代假设为真(处理 A 的表现不同于处理 B)。</p><p id="9c33" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要设置最小测试规模，您需要对以下内容进行估计:</p><ul class=""><li id="eeb6" class="ng nh it kk b kl km ko kp kr ni kv nj kz nk ld nl nm nn no bi translated">A 和 B 的平均<strong class="kk iu">成功率</strong></li><li id="7a8d" class="ng nh it kk b kl np ko nq kr nr kv ns kz nt ld nl nm nn no bi translated"><strong class="kk iu">A 和 B 之间的百分比差异</strong></li></ul><p id="acdf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，您需要知道您的<strong class="kk iu"> p 值</strong>或您希望在结果中得到的<strong class="kk iu">置信区间</strong>。</p><h1 id="ef17" class="mu lf it bd lg mv mw mx lj my mz na lm jz nb ka lp kc nc kd ls kf nd kg lv ne bi translated">示例测试</h1><p id="31dc" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">让我们创建一个假设的 A/B 测试来计算最小样本测试大小，这将为我们提供两个样本之间差异的期望置信区间。</p><p id="ccae" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个测试中，我们向个人发送邮件，希望他们去一个网站。待遇 A 是蓝色信封；治疗 B 是一个绿色信封。在这个测试中，我们还将发送相同数量的绿色信封和蓝色信封。</p><ul class=""><li id="5e5d" class="ng nh it kk b kl km ko kp kr ni kv nj kz nk ld nl nm nn no bi translated">期望的<strong class="kk iu">置信区间= 95% </strong></li><li id="8d06" class="ng nh it kk b kl np ko nq kr nr kv ns kz nt ld nl nm nn no bi translated">预期平均成功率= <strong class="kk iu"> 2% </strong> ( <strong class="kk iu"> Pavg </strong>)</li><li id="86a9" class="ng nh it kk b kl np ko nq kr nr kv ns kz nt ld nl nm nn no bi translated">预期<strong class="kk iu">百分比差异 A 和 B = 15% </strong></li></ul><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi nu"><img src="../Images/739042a15395794a3d14824e0f9819b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g75E_D7PFI0OFJrk77wv_Q.png"/></div></div></figure><p id="fbfe" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">给定 2%的预期成功率和 15%的预期性能差异，那么性能更好的信封(假设蓝色)具有<strong class="kk iu"> 2.14% </strong>成功率(<strong class="kk iu"> Pa </strong>)，绿色信封具有<strong class="kk iu"> 1.86% </strong>成功率(<strong class="kk iu"> Pb </strong>)。Pa 和 Pb 通过以下等式求解:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi nv"><img src="../Images/592ee1f6c7c36e387db2345986bcb41f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J8cE0x-YZA8MXWOxZOdW4g.png"/></div></div></figure><p id="7fa4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了达到 95%的置信区间，你需要一个至少为<strong class="kk iu"> 1.96 </strong>的<strong class="kk iu"> z 值</strong>。在给定置信区间的情况下计算 z 值需要复杂的数学运算，才能找到一部分曲线在正态曲线下的面积。幸运的是，网上有<a class="ae ms" href="https://www.ztable.net" rel="noopener ugc nofollow" target="_blank">表格</a>告诉你需要的 z 分数。</p><p id="bfad" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于此测试设置，z 分数可计算如下:</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi nu"><img src="../Images/58c69f6f0c214abcd9f48071e983cb6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6E7bwdwi79pkg1GIkz_Yig.png"/></div></div></figure><p id="6766" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">其中 n 是发出的信封总数。这是我们试图解决的测试规模。然后，我们可以填入从我们所做的假设中得知的值(Pa、Pb 和 Pavg):</p><figure class="md me mf mg gt mh gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi nw"><img src="../Images/9917e2bacc22e595b35bedf62b07f7e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_U17hAvrhWpM5nrcXgeKZg.png"/></div></div></figure><p id="e3b1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们现在可以求解 n，发现我们至少需要发送总共 9，604 封邮件(或者每种颜色 4，802 封邮件)。</p><p id="b839" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果信封颜色表现之间的百分比差异上升，或者如果平均成功率上升，所需的邮寄者数量就会下降。如果对结果的期望信心下降，所需的邮寄者数量也会下降。</p><h1 id="5851" class="mu lf it bd lg mv mw mx lj my mz na lm jz nb ka lp kc nc kd ls kf nd kg lv ne bi translated">结论</h1><p id="9998" class="pw-post-body-paragraph ki kj it kk b kl lx ju kn ko ly jx kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">不幸的现实是，要提前知道所需的测试规模，你需要很多你根本无法知道的信息。幸运的是，如果您正在运行比较按钮点击或登录页面的测试，您可以在早期填写平均成功率和百分比差异，以估计您需要向多少人展示您的测试，以便对您的结果有信心。</p></div></div>    
</body>
</html>