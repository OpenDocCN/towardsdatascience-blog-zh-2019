<html>
<head>
<title>How To Find Probability From Probability Density Plots</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从概率密度图中找到概率</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-find-probability-from-probability-density-plots-7c392b218bab?source=collection_archive---------5-----------------------#2019-05-17">https://towardsdatascience.com/how-to-find-probability-from-probability-density-plots-7c392b218bab?source=collection_archive---------5-----------------------#2019-05-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1263" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">通过知道一个范围内的实际概率来理解数据的分布</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/cd5b978bcc69d1203c85dcf8c2bf5112.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vOwrmNwmtFOUaWrn"/></div></div></figure><p id="fb7c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在进一步发展之前，让我们面对它。</p><p id="2a4a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您已经在数据科学领域工作了一段时间，那么您可能已经制作了概率密度图(如下所示)来了解数据的总体分布。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="ab gu cl lq"><img src="../Images/d7199e993c435874e9c81166a5bb8b2e.png" data-original-src="https://miro.medium.com/v2/format:webp/1*rKK_hzmcAqot_0CK0qwYdQ.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk"><a class="ae lv" rel="noopener" target="_blank" href="/histograms-and-density-plots-in-python-f6bda88f5ac0">(Source)</a></figcaption></figure><p id="043e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">嗯…首先，什么是密度图？Will Koehrsen 给出了一个伟大而清晰的解释:</p><blockquote class="ly lz ma"><p id="b0e9" class="ku kv mb kw b kx ky ju kz la lb jx lc mc le lf lg md li lj lk me lm ln lo lp im bi translated"><a class="ae lv" href="http://serialmentor.com/dataviz/histograms-density-plots.html" rel="noopener ugc nofollow" target="_blank">密度图</a>是根据数据估计的直方图的平滑、连续版本。</p><p id="c405" class="ku kv mb kw b kx ky ju kz la lb jx lc mc le lf lg md li lj lk me lm ln lo lp im bi translated">最常见的估计形式被称为<a class="ae lv" href="https://en.wikipedia.org/wiki/Kernel_density_estimation" rel="noopener ugc nofollow" target="_blank">核密度估计</a> (KDE)。</p><p id="654c" class="ku kv mb kw b kx ky ju kz la lb jx lc mc le lf lg md li lj lk me lm ln lo lp im bi translated">在这种方法中，在每个单独的数据点绘制一条连续的曲线(内核),然后将所有这些曲线加在一起，进行一次平滑的密度估计。</p><p id="85dc" class="ku kv mb kw b kx ky ju kz la lb jx lc mc le lf lg md li lj lk me lm ln lo lp im bi translated">最常用的内核是一个<strong class="kw iu">高斯</strong>(它在每个数据点产生一个高斯钟形曲线)</p></blockquote><p id="1c35" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">概率密度图</strong>简单地表示概率密度函数(Y 轴)对变量数据点(X 轴)的密度图。</p><p id="97e0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">通常，概率密度图用于<strong class="kw iu">了解连续变量的数据分布</strong>，我们希望<strong class="kw iu">知道获得连续变量可以假设的数值范围</strong>的可能性(或概率)。</p><p id="0698" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">但问题是。</p><p id="9e2e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">通过显示概率密度图，我们只能直观地了解数据<strong class="kw iu"><em class="mb"/></strong>的分布，而不知道某一范围值的确切概率。</p><p id="07b0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">换句话说，仅仅看图很难量化曲线下的概率。</p><p id="3c4c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然而，得到曲线下的确切概率是极其重要的<strong class="kw iu"><em class="mb"/></strong>(我会在下一节告诉你为什么)，尤其是当你向商业利益相关者陈述的时候。</p><p id="9379" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本文中，我将向您展示我用来计算概率的完整代码，并一步一步地向您解释您如何也能这样做。</p><p id="9428" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本文结束时，我希望您能够通过计算一系列值中的实际概率来更好地理解数据的分布，并随后能够用您的见解说服利益相关者。</p><p id="f9a3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可以从我的 GitHub 获取数据集和 jupyter 笔记本。</p><p id="2e07" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们开始吧！</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="395a" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">为什么概率密度图说服力不够？</h1><p id="9807" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld ng lf lg lh nh lj lk ll ni ln lo lp im bi translated">从视觉上回顾上面的密度图，你可能会得出一个结论，阿拉斯加航空公司的航班往往比联合航空公司更早。</p><p id="f013" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">想象一下，现在你的老板问了这个问题，并质疑你的说法，<strong class="kw iu">“阿拉斯加航空公司的航班比联合航空公司的航班早多少，发生这种情况的几率有多高？你有什么数字证据证明你的结论是正确的吗？”</strong></p><p id="dac5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你惊呆了。因为结论来自于你对数据整体分布的观察。</p><p id="0a4a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">更糟糕的是，现在你没有任何数字证据——确切的概率——来支持你的说法。</p><p id="9175" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你没有做好充分的准备，如果你不能证明自己的观点，你作为数据科学家的可信度就会立刻下降。</p><p id="9f88" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这就是从概率密度图计算概率的重要性所在。</p><p id="2578" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">不幸的是，如果你使用 Seaborn 来制作使用<code class="fe nj nk nl nm b">distplot</code>的密度图，很难计算概率。</p><p id="23b3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在花了一些时间弄清楚如何计算概率之后，我决定使用来自<code class="fe nj nk nl nm b">sklearn</code>的<code class="fe nj nk nl nm b">KernelDensity</code>。</p><p id="342d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这个方法非常有效，我很高兴能和你分享这个！👇🏻</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="b767" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">下面是如何从概率密度图中找到概率</h1><p id="1dd6" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld ng lf lg lh nh lj lk ll ni ln lo lp im bi translated">我们将使用小费数据，它由一些可能影响餐馆中顾客给小费数量的因素组成。你可以在这里得到数据<a class="ae lv" href="https://github.com/admond1994/calculate-probability-from-probability-density-plots/blob/master/tips.csv" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/a2fcfd0dca734982826a6576472e2cf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:648/format:webp/1*Blgn6yjVDzTDvMs_RNUcsA.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Tips data loaded in a dataframe</figcaption></figure><p id="0b44" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因为我们的目标是从密度图中找到概率，所以为了简单起见，我们将集中回答一个问题— <strong class="kw iu">顾客在午餐/晚餐时间会给更多小费吗？</strong></p><p id="95e1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">由于数据已经足够清晰，因此我们可以开始绘制密度图并直接计算各自的概率值。</p><p id="b624" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于以下步骤，请参考<a class="ae lv" href="https://github.com/admond1994/calculate-probability-from-probability-density-plots/blob/master/cal_probability.ipynb" rel="noopener ugc nofollow" target="_blank">笔记本</a>了解所用功能的完整代码实现。</p><h2 id="0cbb" class="no mn it bd mo np nq dn ms nr ns dp mw ld nt nu my lh nv nw na ll nx ny nc nz bi translated">1.绘制概率密度图</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Function to make probability density plots without using Seaborn</figcaption></figure><p id="dff5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">由于 Seaborn 没有提供任何从 KDE 计算概率的功能，因此代码遵循这 3 个步骤(如下)来绘制概率密度图，并输出 KDE 对象来计算概率。</p><ul class=""><li id="3152" class="oc od it kw b kx ky la lb ld oe lh of ll og lp oh oi oj ok bi translated">绘制标准化直方图</li><li id="dd9d" class="oc od it kw b kx ol la om ld on lh oo ll op lp oh oi oj ok bi translated">执行核密度估计(KDE)</li><li id="54df" class="oc od it kw b kx ol la om ld on lh oo ll op lp oh oi oj ok bi translated">绘图概率密度</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/e7baa98a1b5d95d5201b4b1899e1df51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*LGSfpyQfmto5eJjJ5l69Hg.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Probability density plot of tips amount (USD) given by customers</figcaption></figure><p id="b855" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们有了午餐和晚餐时间小费数量的概率密度图来进行比较。</p><p id="a5e0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">仅从顾客给的 1-3 美元的小费来看，我们可以得出这样的结论:与晚餐时间相比，<strong class="kw iu">的顾客更倾向于在午餐时间给 1-3 美元的小费。</strong></p><p id="5bb0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">同样，为了有数字证据(也称为概率值)来加强我们的陈述，让我们计算一下顾客在午餐和晚餐时间给 1-3 美元小费的概率，以作比较。</p><h2 id="120b" class="no mn it bd mo np nq dn ms nr ns dp mw ld nt nu my lh nv nw na ll nx ny nc nz bi translated">2.计算概率</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Function to calculate probability</figcaption></figure><p id="8d21" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一旦我们使用函数<code class="fe nj nk nl nm b">plot_prob_density</code>绘制了概率密度图，我们将使用这个函数的输出 KDE 对象作为输入来使用下一个函数<code class="fe nj nk nl nm b">get_probability</code>计算概率。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/af604baca7a33d8bb1b58ac4bdde8bd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Of1k1jI6cJfKzor8eJ_aA.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Calculate and output probability</figcaption></figure><p id="9898" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在你知道了！</p><p id="5920" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">标准化密度曲线下的概率总和总是等于 1。由于概率是曲线下的面积，因此我们可以指定一个值范围(本例中为 1-3 美元小费)来计算该范围内的概率。</p><p id="b558" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，概率就是概率密度值(Y 轴)和小费数量(X 轴)的乘积。</p><p id="6c3e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">乘法在每个评估点上完成，然后将这些相乘的值相加，以计算最终概率。</p><p id="b7e4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">计算出的概率证明支持了我们最初的说法——与晚餐时间相比，顾客倾向于在午餐时间给 1-3 美元的小费<strong class="kw iu">,概率为 63%比 49%。</strong></p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h1 id="1a94" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">最后的想法</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e0b6da8237abf1fb916666a8c129a09d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nyPGiTCFuoecCpDf"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Photo credit: <a class="ae lv" href="http://www.campaigncreators.com/" rel="noopener ugc nofollow" target="_blank">Campaign Creators</a></figcaption></figure><p id="96b5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">感谢您的阅读。</p><p id="5c99" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我希望这篇文章能让你对概率密度图有更好的理解，最重要的是，向你展示如何<strong class="kw iu">计算概率密度曲线下</strong>值范围内的实际概率。</p><p id="cc5a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">计算概率相当简单，但并不简单。它确实起到了至关重要的作用<strong class="kw iu">让利益相关者更好地理解你的概率密度图，从而根据数字证据</strong>而不是主观和模糊的观察提出可行的见解。</p><p id="3024" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一如既往，如果您有任何问题或意见，请随时在下面留下您的反馈，或者您可以随时通过<a class="ae lv" href="https://www.linkedin.com/in/admond1994/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>联系我。在那之前，下一篇文章再见！😄</p></div><div class="ab cl mf mg hx mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="im in io ip iq"><h2 id="4afe" class="no mn it bd mo np nq dn ms nr ns dp mw ld nt nu my lh nv nw na ll nx ny nc nz bi translated">关于作者</h2><p id="5193" class="pw-post-body-paragraph ku kv it kw b kx ne ju kz la nf jx lc ld ng lf lg lh nh lj lk ll ni ln lo lp im bi translated"><a class="ae lv" href="https://www.linkedin.com/in/admond1994/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> Admond Lee </strong> </a>目前是东南亚排名第一的商业银行 API 平台<a class="ae lv" href="https://www.trystaq.com" rel="noopener ugc nofollow" target="_blank"><strong class="kw iu">【Staq】</strong></a><strong class="kw iu">—</strong>的联合创始人/首席技术官。</p><p id="f20d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">想要获得免费的每周数据科学和创业见解吗？</p><p id="f2b1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><a class="ae lv" href="https://bit.ly/3pGF8jv" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu">加入 Admond 的电子邮件简讯——Hustle Hub</strong></a>，每周他都会在那里分享可行的数据科学职业技巧、错误&amp;以及从创建他的初创公司 Staq 中学到的东西。</p><p id="c060" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可以在<a class="ae lv" href="https://www.linkedin.com/in/admond1994/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>、<a class="ae lv" href="https://medium.com/@admond1994" rel="noopener"> Medium </a>、<a class="ae lv" href="https://twitter.com/admond1994" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae lv" href="https://www.facebook.com/admond1994" rel="noopener ugc nofollow" target="_blank">脸书</a>上和他联系。</p><div class="os ot gp gr ou ov"><a href="https://www.admondlee.com/" rel="noopener  ugc nofollow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd iu gy z fp pa fr fs pb fu fw is bi translated">阿德蒙德·李</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">让每个人都能接触到数据科学。Admond 正在通过先进的社交分析和机器学习，利用可操作的见解帮助公司和数字营销机构实现营销投资回报。</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">www.admondlee.com</p></div></div><div class="pe l"><div class="pf l pg ph pi pe pj ks ov"/></div></div></a></div></div></div>    
</body>
</html>